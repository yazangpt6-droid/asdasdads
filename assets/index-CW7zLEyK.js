(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function L_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Hg={exports:{}},Au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function jT(){if(lw)return Au;lw=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Au.Fragment=e,Au.jsx=t,Au.jsxs=t,Au}var ow;function ET(){return ow||(ow=1,Hg.exports=jT()),Hg.exports}var r=ET(),Gg={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function TT(){if(cw)return Ke;cw=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function M(A){return A===null||typeof A!="object"?null:(A=N&&A[N]||A["@@iterator"],typeof A=="function"?A:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,q={};function re(A,Y,xe){this.props=A,this.context=Y,this.refs=q,this.updater=xe||z}re.prototype.isReactComponent={},re.prototype.setState=function(A,Y){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,Y,"setState")},re.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function ue(){}ue.prototype=re.prototype;function U(A,Y,xe){this.props=A,this.context=Y,this.refs=q,this.updater=xe||z}var fe=U.prototype=new ue;fe.constructor=U,B(fe,re.prototype),fe.isPureReactComponent=!0;var ae=Array.isArray;function pe(){}var S={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function I(A,Y,xe){var be=xe.ref;return{$$typeof:a,type:A,key:Y,ref:be!==void 0?be:null,props:xe}}function D(A,Y){return I(A.type,Y,A.props)}function R(A){return typeof A=="object"&&A!==null&&A.$$typeof===a}function O(A){var Y={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(xe){return Y[xe]})}var C=/\/+/g;function ce(A,Y){return typeof A=="object"&&A!==null&&A.key!=null?O(""+A.key):Y.toString(36)}function je(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(pe,pe):(A.status="pending",A.then(function(Y){A.status==="pending"&&(A.status="fulfilled",A.value=Y)},function(Y){A.status==="pending"&&(A.status="rejected",A.reason=Y)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function H(A,Y,xe,be,ie){var Ee=typeof A;(Ee==="undefined"||Ee==="boolean")&&(A=null);var Oe=!1;if(A===null)Oe=!0;else switch(Ee){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(A.$$typeof){case a:case e:Oe=!0;break;case w:return Oe=A._init,H(Oe(A._payload),Y,xe,be,ie)}}if(Oe)return ie=ie(A),Oe=be===""?"."+ce(A,0):be,ae(ie)?(xe="",Oe!=null&&(xe=Oe.replace(C,"$&/")+"/"),H(ie,Y,xe,"",function(on){return on})):ie!=null&&(R(ie)&&(ie=D(ie,xe+(ie.key==null||A&&A.key===ie.key?"":(""+ie.key).replace(C,"$&/")+"/")+Oe)),Y.push(ie)),1;Oe=0;var ct=be===""?".":be+":";if(ae(A))for(var tt=0;tt<A.length;tt++)be=A[tt],Ee=ct+ce(be,tt),Oe+=H(be,Y,xe,Ee,ie);else if(tt=M(A),typeof tt=="function")for(A=tt.call(A),tt=0;!(be=A.next()).done;)be=be.value,Ee=ct+ce(be,tt++),Oe+=H(be,Y,xe,Ee,ie);else if(Ee==="object"){if(typeof A.then=="function")return H(je(A),Y,xe,be,ie);throw Y=String(A),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function P(A,Y,xe){if(A==null)return A;var be=[],ie=0;return H(A,be,"","",function(Ee){return Y.call(xe,Ee,ie++)}),be}function ne(A){if(A._status===-1){var Y=A._result;Y=Y(),Y.then(function(xe){(A._status===0||A._status===-1)&&(A._status=1,A._result=xe)},function(xe){(A._status===0||A._status===-1)&&(A._status=2,A._result=xe)}),A._status===-1&&(A._status=0,A._result=Y)}if(A._status===1)return A._result.default;throw A._result}var W=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},ge={map:P,forEach:function(A,Y,xe){P(A,function(){Y.apply(this,arguments)},xe)},count:function(A){var Y=0;return P(A,function(){Y++}),Y},toArray:function(A){return P(A,function(Y){return Y})||[]},only:function(A){if(!R(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Ke.Activity=b,Ke.Children=ge,Ke.Component=re,Ke.Fragment=t,Ke.Profiler=l,Ke.PureComponent=U,Ke.StrictMode=s,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(A){return S.H.useMemoCache(A)}},Ke.cache=function(A){return function(){return A.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(A,Y,xe){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var be=B({},A.props),ie=A.key;if(Y!=null)for(Ee in Y.key!==void 0&&(ie=""+Y.key),Y)!E.call(Y,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Y.ref===void 0||(be[Ee]=Y[Ee]);var Ee=arguments.length-2;if(Ee===1)be.children=xe;else if(1<Ee){for(var Oe=Array(Ee),ct=0;ct<Ee;ct++)Oe[ct]=arguments[ct+2];be.children=Oe}return I(A.type,ie,be)},Ke.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},Ke.createElement=function(A,Y,xe){var be,ie={},Ee=null;if(Y!=null)for(be in Y.key!==void 0&&(Ee=""+Y.key),Y)E.call(Y,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(ie[be]=Y[be]);var Oe=arguments.length-2;if(Oe===1)ie.children=xe;else if(1<Oe){for(var ct=Array(Oe),tt=0;tt<Oe;tt++)ct[tt]=arguments[tt+2];ie.children=ct}if(A&&A.defaultProps)for(be in Oe=A.defaultProps,Oe)ie[be]===void 0&&(ie[be]=Oe[be]);return I(A,Ee,ie)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(A){return{$$typeof:f,render:A}},Ke.isValidElement=R,Ke.lazy=function(A){return{$$typeof:w,_payload:{_status:-1,_result:A},_init:ne}},Ke.memo=function(A,Y){return{$$typeof:x,type:A,compare:Y===void 0?null:Y}},Ke.startTransition=function(A){var Y=S.T,xe={};S.T=xe;try{var be=A(),ie=S.S;ie!==null&&ie(xe,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(pe,W)}catch(Ee){W(Ee)}finally{Y!==null&&xe.types!==null&&(Y.types=xe.types),S.T=Y}},Ke.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ke.use=function(A){return S.H.use(A)},Ke.useActionState=function(A,Y,xe){return S.H.useActionState(A,Y,xe)},Ke.useCallback=function(A,Y){return S.H.useCallback(A,Y)},Ke.useContext=function(A){return S.H.useContext(A)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(A,Y){return S.H.useDeferredValue(A,Y)},Ke.useEffect=function(A,Y){return S.H.useEffect(A,Y)},Ke.useEffectEvent=function(A){return S.H.useEffectEvent(A)},Ke.useId=function(){return S.H.useId()},Ke.useImperativeHandle=function(A,Y,xe){return S.H.useImperativeHandle(A,Y,xe)},Ke.useInsertionEffect=function(A,Y){return S.H.useInsertionEffect(A,Y)},Ke.useLayoutEffect=function(A,Y){return S.H.useLayoutEffect(A,Y)},Ke.useMemo=function(A,Y){return S.H.useMemo(A,Y)},Ke.useOptimistic=function(A,Y){return S.H.useOptimistic(A,Y)},Ke.useReducer=function(A,Y,xe){return S.H.useReducer(A,Y,xe)},Ke.useRef=function(A){return S.H.useRef(A)},Ke.useState=function(A){return S.H.useState(A)},Ke.useSyncExternalStore=function(A,Y,xe){return S.H.useSyncExternalStore(A,Y,xe)},Ke.useTransition=function(){return S.H.useTransition()},Ke.version="19.2.3",Ke}var uw;function dx(){return uw||(uw=1,Gg.exports=TT()),Gg.exports}var k=dx();const z_=L_(k);var $g={exports:{}},Iu={},Kg={exports:{}},Qg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function ST(){return dw||(dw=1,(function(a){function e(H,P){var ne=H.length;H.push(P);e:for(;0<ne;){var W=ne-1>>>1,ge=H[W];if(0<l(ge,P))H[W]=P,H[ne]=ge,ne=W;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var P=H[0],ne=H.pop();if(ne!==P){H[0]=ne;e:for(var W=0,ge=H.length,A=ge>>>1;W<A;){var Y=2*(W+1)-1,xe=H[Y],be=Y+1,ie=H[be];if(0>l(xe,ne))be<ge&&0>l(ie,xe)?(H[W]=ie,H[be]=ne,W=be):(H[W]=xe,H[Y]=ne,W=Y);else if(be<ge&&0>l(ie,ne))H[W]=ie,H[be]=ne,W=be;else break e}}return P}function l(H,P){var ne=H.sortIndex-P.sortIndex;return ne!==0?ne:H.id-P.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();a.unstable_now=function(){return d.now()-f}}var g=[],x=[],w=1,b=null,N=3,M=!1,z=!1,B=!1,q=!1,re=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function fe(H){for(var P=t(x);P!==null;){if(P.callback===null)s(x);else if(P.startTime<=H)s(x),P.sortIndex=P.expirationTime,e(g,P);else break;P=t(x)}}function ae(H){if(B=!1,fe(H),!z)if(t(g)!==null)z=!0,pe||(pe=!0,O());else{var P=t(x);P!==null&&je(ae,P.startTime-H)}}var pe=!1,S=-1,E=5,I=-1;function D(){return q?!0:!(a.unstable_now()-I<E)}function R(){if(q=!1,pe){var H=a.unstable_now();I=H;var P=!0;try{e:{z=!1,B&&(B=!1,ue(S),S=-1),M=!0;var ne=N;try{t:{for(fe(H),b=t(g);b!==null&&!(b.expirationTime>H&&D());){var W=b.callback;if(typeof W=="function"){b.callback=null,N=b.priorityLevel;var ge=W(b.expirationTime<=H);if(H=a.unstable_now(),typeof ge=="function"){b.callback=ge,fe(H),P=!0;break t}b===t(g)&&s(g),fe(H)}else s(g);b=t(g)}if(b!==null)P=!0;else{var A=t(x);A!==null&&je(ae,A.startTime-H),P=!1}}break e}finally{b=null,N=ne,M=!1}P=void 0}}finally{P?O():pe=!1}}}var O;if(typeof U=="function")O=function(){U(R)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ce=C.port2;C.port1.onmessage=R,O=function(){ce.postMessage(null)}}else O=function(){re(R,0)};function je(H,P){S=re(function(){H(a.unstable_now())},P)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(H){H.callback=null},a.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},a.unstable_getCurrentPriorityLevel=function(){return N},a.unstable_next=function(H){switch(N){case 1:case 2:case 3:var P=3;break;default:P=N}var ne=N;N=P;try{return H()}finally{N=ne}},a.unstable_requestPaint=function(){q=!0},a.unstable_runWithPriority=function(H,P){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=N;N=H;try{return P()}finally{N=ne}},a.unstable_scheduleCallback=function(H,P,ne){var W=a.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?W+ne:W):ne=W,H){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,H={id:w++,callback:P,priorityLevel:H,startTime:ne,expirationTime:ge,sortIndex:-1},ne>W?(H.sortIndex=ne,e(x,H),t(g)===null&&H===t(x)&&(B?(ue(S),S=-1):B=!0,je(ae,ne-W))):(H.sortIndex=ge,e(g,H),z||M||(z=!0,pe||(pe=!0,O()))),H},a.unstable_shouldYield=D,a.unstable_wrapCallback=function(H){var P=N;return function(){var ne=N;N=P;try{return H.apply(this,arguments)}finally{N=ne}}}})(Qg)),Qg}var hw;function AT(){return hw||(hw=1,Kg.exports=ST()),Kg.exports}var Yg={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function IT(){if(fw)return Fn;fw=1;var a=dx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:x,implementation:w}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fn.createPortal=function(g,x){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,w)},Fn.flushSync=function(g){var x=d.T,w=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=w,s.d.f()}},Fn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},Fn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Fn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var w=x.as,b=f(w,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,M=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;w==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:M}):w==="script"&&s.d.X(g,{crossOrigin:b,integrity:N,fetchPriority:M,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Fn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var w=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},Fn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var w=x.as,b=f(w,x.crossOrigin);s.d.L(g,w,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Fn.preloadModule=function(g,x){if(typeof g=="string")if(x){var w=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},Fn.requestFormReset=function(g){s.d.r(g)},Fn.unstable_batchedUpdates=function(g,x){return g(x)},Fn.useFormState=function(g,x,w){return d.H.useFormState(g,x,w)},Fn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Fn.version="19.2.3",Fn}var mw;function U_(){if(mw)return Yg.exports;mw=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Yg.exports=IT(),Yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw;function CT(){if(gw)return Iu;gw=1;var a=AT(),e=dx(),t=U_();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,u=i;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),i;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var v=!1,j=m.child;j;){if(j===o){v=!0,o=m,u=p;break}if(j===u){v=!0,u=m,o=p;break}j=j.sibling}if(!v){for(j=p.child;j;){if(j===o){v=!0,o=p,u=m;break}if(j===u){v=!0,u=p,o=m;break}j=j.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function w(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=w(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),U=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=R&&n[R]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case re:return"Profiler";case q:return"StrictMode";case ae:return"Suspense";case pe:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case U:return n.displayName||"Context";case ue:return(n._context.displayName||"Context")+".Consumer";case fe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return i=n.displayName||null,i!==null?i:ce(n.type)||"Memo";case E:i=n._payload,n=n._init;try{return ce(n(i))}catch{}}return null}var je=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},W=[],ge=-1;function A(n){return{current:n}}function Y(n){0>ge||(n.current=W[ge],W[ge]=null,ge--)}function xe(n,i){ge++,W[ge]=n.current,n.current=i}var be=A(null),ie=A(null),Ee=A(null),Oe=A(null);function ct(n,i){switch(xe(Ee,i),xe(ie,n),xe(be,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Cv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Cv(i),n=kv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(be),xe(be,n)}function tt(){Y(be),Y(ie),Y(Ee)}function on(n){n.memoizedState!==null&&xe(Oe,n);var i=be.current,o=kv(i,n.type);i!==o&&(xe(ie,n),xe(be,o))}function Kt(n){ie.current===n&&(Y(be),Y(ie)),Oe.current===n&&(Y(Oe),ju._currentValue=ne)}var cn,J;function we(n){if(cn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);cn=i&&i[1]||"",J=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+n+J}var te=!1;function Pe(n,i){if(!n||te)return"";te=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ee){var X=ee}Reflect.construct(n,[],de)}else{try{de.call()}catch(ee){X=ee}n.call(de.prototype)}}else{try{throw Error()}catch(ee){X=ee}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],j=p[1];if(v&&j){var V=v.split(`
`),Q=j.split(`
`);for(m=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===V.length||m===Q.length)for(u=V.length-1,m=Q.length-1;1<=u&&0<=m&&V[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(V[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||V[u]!==Q[m]){var le=`
`+V[u].replace(" at new "," at ");return n.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",n.displayName)),le}while(1<=u&&0<=m);break}}}finally{te=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?we(o):""}function Te(n,i){switch(n.tag){case 26:case 27:case 5:return we(n.type);case 16:return we("Lazy");case 13:return n.child!==i&&i!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return Pe(n.type,!1);case 11:return Pe(n.type.render,!1);case 1:return Pe(n.type,!0);case 31:return we("Activity");default:return""}}function Ut(n){try{var i="",o=null;do i+=Te(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ye=Object.prototype.hasOwnProperty,Le=a.unstable_scheduleCallback,ke=a.unstable_cancelCallback,ft=a.unstable_shouldYield,Pt=a.unstable_requestPaint,wt=a.unstable_now,en=a.unstable_getCurrentPriorityLevel,Dt=a.unstable_ImmediatePriority,Dn=a.unstable_UserBlockingPriority,un=a.unstable_NormalPriority,ss=a.unstable_LowPriority,tr=a.unstable_IdlePriority,Ms=a.log,gs=a.unstable_setDisableYieldValue,tn=null,Yt=null;function Tn(n){if(typeof Ms=="function"&&gs(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(tn,n)}catch{}}var dt=Math.clz32?Math.clz32:zi,ps=Math.log,Wn=Math.LN2;function zi(n){return n>>>=0,n===0?32:31-(ps(n)/Wn|0)|0}var Os=256,Wr=262144,Bt=4194304;function Vs(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xs(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var j=u&134217727;return j!==0?(u=j&~p,u!==0?m=Vs(u):(v&=j,v!==0?m=Vs(v):o||(o=j&~n,o!==0&&(m=Vs(o))))):(j=u&~p,j!==0?m=Vs(j):v!==0?m=Vs(v):o||(o=u&~n,o!==0&&(m=Vs(o)))),m===0?0:i!==0&&i!==m&&(i&p)===0&&(p=m&-m,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:m}function Mn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Cc(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gl(){var n=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),n}function Ps(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Zr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ye(n,i,o,u,m,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var j=n.entanglements,V=n.expirationTimes,Q=n.hiddenUpdates;for(o=v&~o;0<o;){var le=31-dt(o),de=1<<le;j[le]=0,V[le]=-1;var X=Q[le];if(X!==null)for(Q[le]=null,le=0;le<X.length;le++){var ee=X[le];ee!==null&&(ee.lane&=-536870913)}o&=~de}u!==0&&Re(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~i))}function Re(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-dt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Se(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-dt(o),m=1<<u;m&i|n[u]&i&&(n[u]|=i),o&=~m}}function ze(n,i){var o=i&-i;return o=(o&42)!==0?1:He(o),(o&(n.suspendedLanes|i))!==0?0:o}function He(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ie(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _t(){var n=P.p;return n!==0?n:(n=window.event,n===void 0?32:ew(n.type))}function nt(n,i){var o=P.p;try{return P.p=n,i()}finally{P.p=o}}var $e=Math.random().toString(36).slice(2),Xe="__reactFiber$"+$e,dn="__reactProps$"+$e,br="__reactContainer$"+$e,$l="__reactEvents$"+$e,Xm="__reactListeners$"+$e,$d="__reactHandles$"+$e,Kd="__reactResources$"+$e,vr="__reactMarker$"+$e;function Kl(n){delete n[Xe],delete n[dn],delete n[$l],delete n[Xm],delete n[$d]}function wr(n){var i=n[Xe];if(i)return i;for(var o=n.parentNode;o;){if(i=o[br]||o[Xe]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Lv(n);n!==null;){if(o=n[Xe])return o;n=Lv(n)}return i}n=o,o=n.parentNode}return null}function Ls(n){if(n=n[Xe]||n[br]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function ys(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function _r(n){var i=n[Kd];return i||(i=n[Kd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function hn(n){n[vr]=!0}var kc=new Set,Rc={};function Nr(n,i){jr(n,i),jr(n+"Capture",i)}function jr(n,i){for(Rc[n]=i,n=0;n<i.length;n++)kc.add(i[n])}var Dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mc={},Oc={};function Qd(n){return Ye.call(Oc,n)?!0:Ye.call(Mc,n)?!1:Dc.test(n)?Oc[n]=!0:(Mc[n]=!0,!1)}function Ql(n,i,o){if(Qd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function bs(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function fn(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Sn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ra(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vc(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Nt(n){if(!n._valueTracker){var i=Ra(n)?"checked":"value";n._valueTracker=Vc(n,i,""+n[i])}}function Ui(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Ra(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Er(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bi=/[\n"\\]/g;function rs(n){return n.replace(Bi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Yl(n,i,o,u,m,p,v,j){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Sn(i)):n.value!==""+Sn(i)&&(n.value=""+Sn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?Pc(n,v,Sn(i)):o!=null?Pc(n,v,Sn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+Sn(j):n.removeAttribute("name")}function Yd(n,i,o,u,m,p,v,j){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Nt(n);return}o=o!=null?""+Sn(o):"",i=i!=null?""+Sn(i):o,j||i===n.value||(n.value=i),n.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=j?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Nt(n)}function Pc(n,i,o){i==="number"&&Er(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Da(n,i,o,u){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Sn(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Xd(n,i,o){if(i!=null&&(i=""+Sn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Sn(o):""}function Ma(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(je(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Sn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Nt(n)}function as(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Jd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Jd.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function zc(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Lc(n,m,u)}else for(var p in i)i.hasOwnProperty(p)&&Lc(n,p,i[p])}function Xl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jl(n){return Oa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function nr(){}var Uc=null;function zs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Va=null,Tr=null;function qi(n){var i=Ls(n);if(i&&(n=i.stateNode)){var o=n[dn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Yl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+rs(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var m=u[dn]||null;if(!m)throw Error(s(90));Yl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ui(u)}break e;case"textarea":Xd(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Da(n,!!o.multiple,i,!1)}}}var Wl=!1;function Pa(n,i,o){if(Wl)return n(i,o);Wl=!0;try{var u=n(i);return u}finally{if(Wl=!1,(Va!==null||Tr!==null)&&(Gh(),Va&&(i=Va,n=Tr,Tr=Va=null,qi(i),n)))for(i=0;i<n.length;i++)qi(n[i])}}function sr(n,i){var o=n.stateNode;if(o===null)return null;var u=o[dn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(Us)try{var It={};Object.defineProperty(It,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{Fi=!1}var Sr=null,Bc=null,Hi=null;function qc(){if(Hi)return Hi;var n,i=Bc,o=i.length,u,m="value"in Sr?Sr.value:Sr.textContent,p=m.length;for(n=0;n<o&&i[n]===m[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===m[p-u];u++);return Hi=m.slice(n,1<u?1-u:void 0)}function Gi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ea(){return!0}function rr(){return!1}function On(n){function i(o,u,m,p,v){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(p):p[j]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ea:rr,this.isPropagationStopped=rr,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),i}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=On(ta),La=b({},ta,{view:0,detail:0}),Fc=On(La),za,Zl,Ir,eo=b({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ir&&(Ir&&n.type==="mousemove"?(za=n.screenX-Ir.screenX,Zl=n.screenY-Ir.screenY):Zl=za=0,Ir=n),za)},movementY:function(n){return"movementY"in n?n.movementY:Zl}}),Hc=On(eo),$i=b({},eo,{dataTransfer:0}),Zd=On($i),eh=b({},La,{relatedTarget:0}),Ki=On(eh),Gc=b({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),th=On(Gc),to=b({},ta,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nh=On(to),sh=b({},ta,{data:0}),Cr=On(sh),rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lh(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ih[n])?!!i[n]:!1}function Ua(){return lh}var Zn=b({},La,{key:function(n){if(n.key){var i=rh[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ah[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(n){return n.type==="keypress"?Gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oh=On(Zn),ch=b({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),na=On(ch),h=b({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),y=On(h),_=b({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=On(_),$=b({},eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=On($),_e=b({},ta,{newState:0,oldState:0}),Je=On(_e),nn=[9,13,27,32],xt=Us&&"CompositionEvent"in window,qt=null;Us&&"documentMode"in document&&(qt=document.documentMode);var Bs=Us&&"TextEvent"in window&&!qt,kr=Us&&(!xt||qt&&8<qt&&11>=qt),ar=" ",ir=!1;function Qi(n,i){switch(n){case"keyup":return nn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var so=!1;function Q5(n,i){switch(n){case"compositionend":return no(i);case"keypress":return i.which!==32?null:(ir=!0,ar);case"textInput":return n=i.data,n===ar&&ir?null:n;default:return null}}function Y5(n,i){if(so)return n==="compositionend"||!xt&&Qi(n,i)?(n=qc(),Hi=Bc=Sr=null,so=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kr&&i.locale!=="ko"?null:i.data;default:return null}}var X5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function By(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!X5[n.type]:i==="textarea"}function qy(n,i,o,u){Va?Tr?Tr.push(u):Tr=[u]:Va=u,i=Wh(i,"onChange"),0<i.length&&(o=new Ar("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var $c=null,Kc=null;function J5(n){jv(n,0)}function uh(n){var i=ys(n);if(Ui(i))return n}function Fy(n,i){if(n==="change")return i}var Hy=!1;if(Us){var Jm;if(Us){var Wm="oninput"in document;if(!Wm){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Wm=typeof Gy.oninput=="function"}Jm=Wm}else Jm=!1;Hy=Jm&&(!document.documentMode||9<document.documentMode)}function $y(){$c&&($c.detachEvent("onpropertychange",Ky),Kc=$c=null)}function Ky(n){if(n.propertyName==="value"&&uh(Kc)){var i=[];qy(i,Kc,n,zs(n)),Pa(J5,i)}}function W5(n,i,o){n==="focusin"?($y(),$c=i,Kc=o,$c.attachEvent("onpropertychange",Ky)):n==="focusout"&&$y()}function Z5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uh(Kc)}function eE(n,i){if(n==="click")return uh(i)}function tE(n,i){if(n==="input"||n==="change")return uh(i)}function nE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var vs=typeof Object.is=="function"?Object.is:nE;function Qc(n,i){if(vs(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ye.call(i,m)||!vs(n[m],i[m]))return!1}return!0}function Qy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yy(n,i){var o=Qy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Qy(o)}}function Xy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Xy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Er(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Er(n.document)}return i}function Zm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var sE=Us&&"documentMode"in document&&11>=document.documentMode,ro=null,e0=null,Yc=null,t0=!1;function Wy(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;t0||ro==null||ro!==Er(u)||(u=ro,"selectionStart"in u&&Zm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yc&&Qc(Yc,u)||(Yc=u,u=Wh(e0,"onSelect"),0<u.length&&(i=new Ar("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=ro)))}function Yi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var ao={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},n0={},Zy={};Us&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Xi(n){if(n0[n])return n0[n];if(!ao[n])return n;var i=ao[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Zy)return n0[n]=i[o];return n}var eb=Xi("animationend"),tb=Xi("animationiteration"),nb=Xi("animationstart"),rE=Xi("transitionrun"),aE=Xi("transitionstart"),iE=Xi("transitioncancel"),sb=Xi("transitionend"),rb=new Map,s0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");s0.push("scrollEnd");function lr(n,i){rb.set(n,i),Nr(i,[n])}var dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qs=[],io=0,r0=0;function hh(){for(var n=io,i=r0=io=0;i<n;){var o=qs[i];qs[i++]=null;var u=qs[i];qs[i++]=null;var m=qs[i];qs[i++]=null;var p=qs[i];if(qs[i++]=null,u!==null&&m!==null){var v=u.pending;v===null?m.next=m:(m.next=v.next,v.next=m),u.pending=m}p!==0&&ab(o,m,p)}}function fh(n,i,o,u){qs[io++]=n,qs[io++]=i,qs[io++]=o,qs[io++]=u,r0|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function a0(n,i,o,u){return fh(n,i,o,u),mh(n)}function Ji(n,i){return fh(n,null,null,i),mh(n)}function ab(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&i!==null&&(m=31-dt(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[i]:u.push(i),i.lane=o|536870912),p):null}function mh(n){if(50<xu)throw xu=0,mg=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var lo={};function lE(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(n,i,o,u){return new lE(n,i,o,u)}function i0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function sa(n,i){var o=n.alternate;return o===null?(o=ws(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ib(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function gh(n,i,o,u,m,p){var v=0;if(u=n,typeof n=="function")i0(n)&&(v=1);else if(typeof n=="string")v=hT(n,o,be.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=ws(31,o,i,m),n.elementType=I,n.lanes=p,n;case B:return Wi(o.children,m,p,i);case q:v=8,m|=24;break;case re:return n=ws(12,o,i,m|2),n.elementType=re,n.lanes=p,n;case ae:return n=ws(13,o,i,m),n.elementType=ae,n.lanes=p,n;case pe:return n=ws(19,o,i,m),n.elementType=pe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:v=10;break e;case ue:v=9;break e;case fe:v=11;break e;case S:v=14;break e;case E:v=16,u=null;break e}v=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=ws(v,o,i,m),i.elementType=n,i.type=u,i.lanes=p,i}function Wi(n,i,o,u){return n=ws(7,n,u,i),n.lanes=o,n}function l0(n,i,o){return n=ws(6,n,null,i),n.lanes=o,n}function lb(n){var i=ws(18,null,null,0);return i.stateNode=n,i}function o0(n,i,o){return i=ws(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ob=new WeakMap;function Fs(n,i){if(typeof n=="object"&&n!==null){var o=ob.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ut(i)},ob.set(n,i),i)}return{value:n,source:i,stack:Ut(i)}}var oo=[],co=0,ph=null,Xc=0,Hs=[],Gs=0,Ba=null,Rr=1,Dr="";function ra(n,i){oo[co++]=Xc,oo[co++]=ph,ph=n,Xc=i}function cb(n,i,o){Hs[Gs++]=Rr,Hs[Gs++]=Dr,Hs[Gs++]=Ba,Ba=n;var u=Rr;n=Dr;var m=32-dt(u)-1;u&=~(1<<m),o+=1;var p=32-dt(i)+m;if(30<p){var v=m-m%5;p=(u&(1<<v)-1).toString(32),u>>=v,m-=v,Rr=1<<32-dt(i)+m|o<<m|u,Dr=p+n}else Rr=1<<p|o<<m|u,Dr=n}function c0(n){n.return!==null&&(ra(n,1),cb(n,1,0))}function u0(n){for(;n===ph;)ph=oo[--co],oo[co]=null,Xc=oo[--co],oo[co]=null;for(;n===Ba;)Ba=Hs[--Gs],Hs[Gs]=null,Dr=Hs[--Gs],Hs[Gs]=null,Rr=Hs[--Gs],Hs[Gs]=null}function ub(n,i){Hs[Gs++]=Rr,Hs[Gs++]=Dr,Hs[Gs++]=Ba,Rr=i.id,Dr=i.overflow,Ba=n}var Vn=null,Lt=null,ut=!1,qa=null,$s=!1,d0=Error(s(519));function Fa(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jc(Fs(i,n)),d0}function db(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Xe]=n,i[dn]=u,o){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(o=0;o<bu.length;o++)rt(bu[o],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":rt("invalid",i),Yd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":rt("invalid",i);break;case"textarea":rt("invalid",i),Ma(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Av(i.textContent,o)?(u.popover!=null&&(rt("beforetoggle",i),rt("toggle",i)),u.onScroll!=null&&rt("scroll",i),u.onScrollEnd!=null&&rt("scrollend",i),u.onClick!=null&&(i.onclick=nr),i=!0):i=!1,i||Fa(n,!0)}function hb(n){for(Vn=n.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:Vn=Vn.return}}function uo(n){if(n!==Vn)return!1;if(!ut)return hb(n),ut=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ig(n.type,n.memoizedProps)),o=!o),o&&Lt&&Fa(n),hb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Lt=Pv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Lt=Pv(n)}else i===27?(i=Lt,si(n.type)?(n=Mg,Mg=null,Lt=n):Lt=i):Lt=Vn?Qs(n.stateNode.nextSibling):null;return!0}function Zi(){Lt=Vn=null,ut=!1}function h0(){var n=qa;return n!==null&&(cs===null?cs=n:cs.push.apply(cs,n),qa=null),n}function Jc(n){qa===null?qa=[n]:qa.push(n)}var f0=A(null),el=null,aa=null;function Ha(n,i,o){xe(f0,i._currentValue),i._currentValue=o}function ia(n){n._currentValue=f0.current,Y(f0)}function m0(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function g0(n,i,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;e:for(;p!==null;){var j=p;p=m;for(var V=0;V<i.length;V++)if(j.context===i[V]){p.lanes|=o,j=p.alternate,j!==null&&(j.lanes|=o),m0(p.return,o,n),u||(v=null);break e}p=j.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(s(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),m0(v,o,n),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===n){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function ho(n,i,o,u){n=null;for(var m=i,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var j=m.type;vs(m.pendingProps.value,v.value)||(n!==null?n.push(j):n=[j])}}else if(m===Oe.current){if(v=m.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(ju):n=[ju])}m=m.return}n!==null&&g0(i,n,o,u),i.flags|=262144}function xh(n){for(n=n.firstContext;n!==null;){if(!vs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function tl(n){el=n,aa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Pn(n){return fb(el,n)}function yh(n,i){return el===null&&tl(n),fb(n,i)}function fb(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},aa===null){if(n===null)throw Error(s(308));aa=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else aa=aa.next=i;return o}var oE=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},cE=a.unstable_scheduleCallback,uE=a.unstable_NormalPriority,mn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function p0(){return{controller:new oE,data:new Map,refCount:0}}function Wc(n){n.refCount--,n.refCount===0&&cE(uE,function(){n.controller.abort()})}var Zc=null,x0=0,fo=0,mo=null;function dE(n,i){if(Zc===null){var o=Zc=[];x0=0,fo=vg(),mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return x0++,i.then(mb,mb),i}function mb(){if(--x0===0&&Zc!==null){mo!==null&&(mo.status="fulfilled");var n=Zc;Zc=null,fo=0,mo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function hE(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var gb=H.S;H.S=function(n,i){W1=wt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&dE(n,i),gb!==null&&gb(n,i)};var nl=A(null);function y0(){var n=nl.current;return n!==null?n:Mt.pooledCache}function bh(n,i){i===null?xe(nl,nl.current):xe(nl,i.pool)}function pb(){var n=y0();return n===null?null:{parent:mn._currentValue,pool:n}}var go=Error(s(460)),b0=Error(s(474)),vh=Error(s(542)),wh={then:function(){}};function xb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function yb(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(nr,nr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,vb(n),n;default:if(typeof i.status=="string")i.then(nr,nr);else{if(n=Mt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,vb(n),n}throw rl=i,go}}function sl(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(rl=o,go):o}}var rl=null;function bb(){if(rl===null)throw Error(s(459));var n=rl;return rl=null,n}function vb(n){if(n===go||n===vh)throw Error(s(483))}var po=null,eu=0;function _h(n){var i=eu;return eu+=1,po===null&&(po=[]),yb(po,n,i)}function tu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Nh(n,i){throw i.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function wb(n){function i(F,L){if(n){var K=F.deletions;K===null?(F.deletions=[L],F.flags|=16):K.push(L)}}function o(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function u(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function m(F,L){return F=sa(F,L),F.index=0,F.sibling=null,F}function p(F,L,K){return F.index=K,n?(K=F.alternate,K!==null?(K=K.index,K<L?(F.flags|=67108866,L):K):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function v(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function j(F,L,K,oe){return L===null||L.tag!==6?(L=l0(K,F.mode,oe),L.return=F,L):(L=m(L,K),L.return=F,L)}function V(F,L,K,oe){var Ue=K.type;return Ue===B?le(F,L,K.props.children,oe,K.key):L!==null&&(L.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===E&&sl(Ue)===L.type)?(L=m(L,K.props),tu(L,K),L.return=F,L):(L=gh(K.type,K.key,K.props,null,F.mode,oe),tu(L,K),L.return=F,L)}function Q(F,L,K,oe){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=o0(K,F.mode,oe),L.return=F,L):(L=m(L,K.children||[]),L.return=F,L)}function le(F,L,K,oe,Ue){return L===null||L.tag!==7?(L=Wi(K,F.mode,oe,Ue),L.return=F,L):(L=m(L,K),L.return=F,L)}function de(F,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=l0(""+L,F.mode,K),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return K=gh(L.type,L.key,L.props,null,F.mode,K),tu(K,L),K.return=F,K;case z:return L=o0(L,F.mode,K),L.return=F,L;case E:return L=sl(L),de(F,L,K)}if(je(L)||O(L))return L=Wi(L,F.mode,K,null),L.return=F,L;if(typeof L.then=="function")return de(F,_h(L),K);if(L.$$typeof===U)return de(F,yh(F,L),K);Nh(F,L)}return null}function X(F,L,K,oe){var Ue=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ue!==null?null:j(F,L,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case M:return K.key===Ue?V(F,L,K,oe):null;case z:return K.key===Ue?Q(F,L,K,oe):null;case E:return K=sl(K),X(F,L,K,oe)}if(je(K)||O(K))return Ue!==null?null:le(F,L,K,oe,null);if(typeof K.then=="function")return X(F,L,_h(K),oe);if(K.$$typeof===U)return X(F,L,yh(F,K),oe);Nh(F,K)}return null}function ee(F,L,K,oe,Ue){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(K)||null,j(L,F,""+oe,Ue);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:return F=F.get(oe.key===null?K:oe.key)||null,V(L,F,oe,Ue);case z:return F=F.get(oe.key===null?K:oe.key)||null,Q(L,F,oe,Ue);case E:return oe=sl(oe),ee(F,L,K,oe,Ue)}if(je(oe)||O(oe))return F=F.get(K)||null,le(L,F,oe,Ue,null);if(typeof oe.then=="function")return ee(F,L,K,_h(oe),Ue);if(oe.$$typeof===U)return ee(F,L,K,yh(L,oe),Ue);Nh(L,oe)}return null}function Ce(F,L,K,oe){for(var Ue=null,mt=null,Me=L,Ze=L=0,it=null;Me!==null&&Ze<K.length;Ze++){Me.index>Ze?(it=Me,Me=null):it=Me.sibling;var gt=X(F,Me,K[Ze],oe);if(gt===null){Me===null&&(Me=it);break}n&&Me&&gt.alternate===null&&i(F,Me),L=p(gt,L,Ze),mt===null?Ue=gt:mt.sibling=gt,mt=gt,Me=it}if(Ze===K.length)return o(F,Me),ut&&ra(F,Ze),Ue;if(Me===null){for(;Ze<K.length;Ze++)Me=de(F,K[Ze],oe),Me!==null&&(L=p(Me,L,Ze),mt===null?Ue=Me:mt.sibling=Me,mt=Me);return ut&&ra(F,Ze),Ue}for(Me=u(Me);Ze<K.length;Ze++)it=ee(Me,F,Ze,K[Ze],oe),it!==null&&(n&&it.alternate!==null&&Me.delete(it.key===null?Ze:it.key),L=p(it,L,Ze),mt===null?Ue=it:mt.sibling=it,mt=it);return n&&Me.forEach(function(oi){return i(F,oi)}),ut&&ra(F,Ze),Ue}function qe(F,L,K,oe){if(K==null)throw Error(s(151));for(var Ue=null,mt=null,Me=L,Ze=L=0,it=null,gt=K.next();Me!==null&&!gt.done;Ze++,gt=K.next()){Me.index>Ze?(it=Me,Me=null):it=Me.sibling;var oi=X(F,Me,gt.value,oe);if(oi===null){Me===null&&(Me=it);break}n&&Me&&oi.alternate===null&&i(F,Me),L=p(oi,L,Ze),mt===null?Ue=oi:mt.sibling=oi,mt=oi,Me=it}if(gt.done)return o(F,Me),ut&&ra(F,Ze),Ue;if(Me===null){for(;!gt.done;Ze++,gt=K.next())gt=de(F,gt.value,oe),gt!==null&&(L=p(gt,L,Ze),mt===null?Ue=gt:mt.sibling=gt,mt=gt);return ut&&ra(F,Ze),Ue}for(Me=u(Me);!gt.done;Ze++,gt=K.next())gt=ee(Me,F,Ze,gt.value,oe),gt!==null&&(n&&gt.alternate!==null&&Me.delete(gt.key===null?Ze:gt.key),L=p(gt,L,Ze),mt===null?Ue=gt:mt.sibling=gt,mt=gt);return n&&Me.forEach(function(NT){return i(F,NT)}),ut&&ra(F,Ze),Ue}function Rt(F,L,K,oe){if(typeof K=="object"&&K!==null&&K.type===B&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case M:e:{for(var Ue=K.key;L!==null;){if(L.key===Ue){if(Ue=K.type,Ue===B){if(L.tag===7){o(F,L.sibling),oe=m(L,K.props.children),oe.return=F,F=oe;break e}}else if(L.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===E&&sl(Ue)===L.type){o(F,L.sibling),oe=m(L,K.props),tu(oe,K),oe.return=F,F=oe;break e}o(F,L);break}else i(F,L);L=L.sibling}K.type===B?(oe=Wi(K.props.children,F.mode,oe,K.key),oe.return=F,F=oe):(oe=gh(K.type,K.key,K.props,null,F.mode,oe),tu(oe,K),oe.return=F,F=oe)}return v(F);case z:e:{for(Ue=K.key;L!==null;){if(L.key===Ue)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){o(F,L.sibling),oe=m(L,K.children||[]),oe.return=F,F=oe;break e}else{o(F,L);break}else i(F,L);L=L.sibling}oe=o0(K,F.mode,oe),oe.return=F,F=oe}return v(F);case E:return K=sl(K),Rt(F,L,K,oe)}if(je(K))return Ce(F,L,K,oe);if(O(K)){if(Ue=O(K),typeof Ue!="function")throw Error(s(150));return K=Ue.call(K),qe(F,L,K,oe)}if(typeof K.then=="function")return Rt(F,L,_h(K),oe);if(K.$$typeof===U)return Rt(F,L,yh(F,K),oe);Nh(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(o(F,L.sibling),oe=m(L,K),oe.return=F,F=oe):(o(F,L),oe=l0(K,F.mode,oe),oe.return=F,F=oe),v(F)):o(F,L)}return function(F,L,K,oe){try{eu=0;var Ue=Rt(F,L,K,oe);return po=null,Ue}catch(Me){if(Me===go||Me===vh)throw Me;var mt=ws(29,Me,null,F.mode);return mt.lanes=oe,mt.return=F,mt}finally{}}}var al=wb(!0),_b=wb(!1),Ga=!1;function v0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w0(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ka(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(yt&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=mh(n),ab(n,null,o),i}return fh(n,u,i,o),mh(n)}function nu(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Se(n,o)}}function _0(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?m=p=i:p=p.next=i}else m=p=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var N0=!1;function su(){if(N0){var n=mo;if(n!==null)throw n}}function ru(n,i,o,u){N0=!1;var m=n.updateQueue;Ga=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var V=j,Q=V.next;V.next=null,v===null?p=Q:v.next=Q,v=V;var le=n.alternate;le!==null&&(le=le.updateQueue,j=le.lastBaseUpdate,j!==v&&(j===null?le.firstBaseUpdate=Q:j.next=Q,le.lastBaseUpdate=V))}if(p!==null){var de=m.baseState;v=0,le=Q=V=null,j=p;do{var X=j.lane&-536870913,ee=X!==j.lane;if(ee?(at&X)===X:(u&X)===X){X!==0&&X===fo&&(N0=!0),le!==null&&(le=le.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ce=n,qe=j;X=i;var Rt=o;switch(qe.tag){case 1:if(Ce=qe.payload,typeof Ce=="function"){de=Ce.call(Rt,de,X);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=qe.payload,X=typeof Ce=="function"?Ce.call(Rt,de,X):Ce,X==null)break e;de=b({},de,X);break e;case 2:Ga=!0}}X=j.callback,X!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:j.tag,payload:j.payload,callback:j.callback,next:null},le===null?(Q=le=ee,V=de):le=le.next=ee,v|=X;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;ee=j,j=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);le===null&&(V=de),m.baseState=V,m.firstBaseUpdate=Q,m.lastBaseUpdate=le,p===null&&(m.shared.lanes=0),Wa|=v,n.lanes=v,n.memoizedState=de}}function Nb(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function jb(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Nb(o[n],i)}var xo=A(null),jh=A(0);function Eb(n,i){n=ga,xe(jh,n),xe(xo,i),ga=n|i.baseLanes}function j0(){xe(jh,ga),xe(xo,xo.current)}function E0(){ga=jh.current,Y(xo),Y(jh)}var _s=A(null),Ks=null;function Qa(n){var i=n.alternate;xe(sn,sn.current&1),xe(_s,n),Ks===null&&(i===null||xo.current!==null||i.memoizedState!==null)&&(Ks=n)}function T0(n){xe(sn,sn.current),xe(_s,n),Ks===null&&(Ks=n)}function Tb(n){n.tag===22?(xe(sn,sn.current),xe(_s,n),Ks===null&&(Ks=n)):Ya()}function Ya(){xe(sn,sn.current),xe(_s,_s.current)}function Ns(n){Y(_s),Ks===n&&(Ks=null),Y(sn)}var sn=A(0);function Eh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rg(o)||Dg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var la=0,We=null,Ct=null,gn=null,Th=!1,yo=!1,il=!1,Sh=0,au=0,bo=null,fE=0;function Xt(){throw Error(s(321))}function S0(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!vs(n[o],i[o]))return!1;return!0}function A0(n,i,o,u,m,p){return la=p,We=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?c1:F0,il=!1,p=o(u,m),il=!1,yo&&(p=Ab(i,o,u,m)),Sb(n),p}function Sb(n){H.H=ou;var i=Ct!==null&&Ct.next!==null;if(la=0,gn=Ct=We=null,Th=!1,au=0,bo=null,i)throw Error(s(300));n===null||pn||(n=n.dependencies,n!==null&&xh(n)&&(pn=!0))}function Ab(n,i,o,u){We=n;var m=0;do{if(yo&&(bo=null),au=0,yo=!1,25<=m)throw Error(s(301));if(m+=1,gn=Ct=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=u1,p=i(o,u)}while(yo);return p}function mE(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?iu(i):i,n=n.useState()[0],(Ct!==null?Ct.memoizedState:null)!==n&&(We.flags|=1024),i}function I0(){var n=Sh!==0;return Sh=0,n}function C0(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function k0(n){if(Th){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Th=!1}la=0,gn=Ct=We=null,yo=!1,au=Sh=0,bo=null}function es(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?We.memoizedState=gn=n:gn=gn.next=n,gn}function rn(){if(Ct===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var i=gn===null?We.memoizedState:gn.next;if(i!==null)gn=i,Ct=n;else{if(n===null)throw We.alternate===null?Error(s(467)):Error(s(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},gn===null?We.memoizedState=gn=n:gn=gn.next=n}return gn}function Ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iu(n){var i=au;return au+=1,bo===null&&(bo=[]),n=yb(bo,n,i),i=We,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?c1:F0),n}function Ih(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return iu(n);if(n.$$typeof===U)return Pn(n)}throw Error(s(438,String(n)))}function R0(n){var i=null,o=We.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=We.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Ah(),We.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=D;return i.index++,o}function oa(n,i){return typeof i=="function"?i(n):i}function Ch(n){var i=rn();return D0(i,Ct,n)}function D0(n,i,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}i.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{i=m.next;var j=v=null,V=null,Q=i,le=!1;do{var de=Q.lane&-536870913;if(de!==Q.lane?(at&de)===de:(la&de)===de){var X=Q.revertLane;if(X===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),de===fo&&(le=!0);else if((la&X)===X){Q=Q.next,X===fo&&(le=!0);continue}else de={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(j=V=de,v=p):V=V.next=de,We.lanes|=X,Wa|=X;de=Q.action,il&&o(p,de),p=Q.hasEagerState?Q.eagerState:o(p,de)}else X={lane:de,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(j=V=X,v=p):V=V.next=X,We.lanes|=de,Wa|=de;Q=Q.next}while(Q!==null&&Q!==i);if(V===null?v=p:V.next=j,!vs(p,n.memoizedState)&&(pn=!0,le&&(o=mo,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=V,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function M0(n){var i=rn(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=i.memoizedState;if(m!==null){o.pending=null;var v=m=m.next;do p=n(p,v.action),v=v.next;while(v!==m);vs(p,i.memoizedState)||(pn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Ib(n,i,o){var u=We,m=rn(),p=ut;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var v=!vs((Ct||m).memoizedState,o);if(v&&(m.memoizedState=o,pn=!0),m=m.queue,P0(Rb.bind(null,u,m,n),[n]),m.getSnapshot!==i||v||gn!==null&&gn.memoizedState.tag&1){if(u.flags|=2048,vo(9,{destroy:void 0},kb.bind(null,u,m,o,i),null),Mt===null)throw Error(s(349));p||(la&127)!==0||Cb(u,i,o)}return o}function Cb(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=We.updateQueue,i===null?(i=Ah(),We.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function kb(n,i,o,u){i.value=o,i.getSnapshot=u,Db(i)&&Mb(n)}function Rb(n,i,o){return o(function(){Db(i)&&Mb(n)})}function Db(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!vs(n,o)}catch{return!0}}function Mb(n){var i=Ji(n,2);i!==null&&us(i,n,2)}function O0(n){var i=es();if(typeof n=="function"){var o=n;if(n=o(),il){Tn(!0);try{o()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:n},i}function Ob(n,i,o,u){return n.baseState=o,D0(n,Ct,typeof u=="function"?u:oa)}function gE(n,i,o,u,m){if(Dh(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};H.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,Vb(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Vb(n,i){var o=i.action,u=i.payload,m=n.state;if(i.isTransition){var p=H.T,v={};H.T=v;try{var j=o(m,u),V=H.S;V!==null&&V(v,j),Pb(n,i,j)}catch(Q){V0(n,i,Q)}finally{p!==null&&v.types!==null&&(p.types=v.types),H.T=p}}else try{p=o(m,u),Pb(n,i,p)}catch(Q){V0(n,i,Q)}}function Pb(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Lb(n,i,u)},function(u){return V0(n,i,u)}):Lb(n,i,o)}function Lb(n,i,o){i.status="fulfilled",i.value=o,zb(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Vb(n,o)))}function V0(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,zb(i),i=i.next;while(i!==u)}n.action=null}function zb(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Ub(n,i){return i}function Bb(n,i){if(ut){var o=Mt.formState;if(o!==null){e:{var u=We;if(ut){if(Lt){t:{for(var m=Lt,p=$s;m.nodeType!==8;){if(!p){m=null;break t}if(m=Qs(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Lt=Qs(m.nextSibling),u=m.data==="F!";break e}}Fa(u)}u=!1}u&&(i=o[0])}}return o=es(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ub,lastRenderedState:i},o.queue=u,o=i1.bind(null,We,u),u.dispatch=o,u=O0(!1),p=q0.bind(null,We,!1,u.queue),u=es(),m={state:i,dispatch:null,action:n,pending:null},u.queue=m,o=gE.bind(null,We,m,p,o),m.dispatch=o,u.memoizedState=n,[i,o,!1]}function qb(n){var i=rn();return Fb(i,Ct,n)}function Fb(n,i,o){if(i=D0(n,i,Ub)[0],n=Ch(oa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=iu(i)}catch(v){throw v===go?vh:v}else u=i;i=rn();var m=i.queue,p=m.dispatch;return o!==i.memoizedState&&(We.flags|=2048,vo(9,{destroy:void 0},pE.bind(null,m,o),null)),[u,p,n]}function pE(n,i){n.action=i}function Hb(n){var i=rn(),o=Ct;if(o!==null)return Fb(i,o,n);rn(),i=i.memoizedState,o=rn();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function vo(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=We.updateQueue,i===null&&(i=Ah(),We.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function Gb(){return rn().memoizedState}function kh(n,i,o,u){var m=es();We.flags|=n,m.memoizedState=vo(1|i,{destroy:void 0},o,u===void 0?null:u)}function Rh(n,i,o,u){var m=rn();u=u===void 0?null:u;var p=m.memoizedState.inst;Ct!==null&&u!==null&&S0(u,Ct.memoizedState.deps)?m.memoizedState=vo(i,p,o,u):(We.flags|=n,m.memoizedState=vo(1|i,p,o,u))}function $b(n,i){kh(8390656,8,n,i)}function P0(n,i){Rh(2048,8,n,i)}function xE(n){We.flags|=4;var i=We.updateQueue;if(i===null)i=Ah(),We.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Kb(n){var i=rn().memoizedState;return xE({ref:i,nextImpl:n}),function(){if((yt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Qb(n,i){return Rh(4,2,n,i)}function Yb(n,i){return Rh(4,4,n,i)}function Xb(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Jb(n,i,o){o=o!=null?o.concat([n]):null,Rh(4,4,Xb.bind(null,i,n),o)}function L0(){}function Wb(n,i){var o=rn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&S0(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function Zb(n,i){var o=rn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&S0(i,u[1]))return u[0];if(u=n(),il){Tn(!0);try{n()}finally{Tn(!1)}}return o.memoizedState=[u,i],u}function z0(n,i,o){return o===void 0||(la&1073741824)!==0&&(at&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=ev(),We.lanes|=n,Wa|=n,o)}function e1(n,i,o,u){return vs(o,i)?o:xo.current!==null?(n=z0(n,o,u),vs(n,i)||(pn=!0),n):(la&42)===0||(la&1073741824)!==0&&(at&261930)===0?(pn=!0,n.memoizedState=o):(n=ev(),We.lanes|=n,Wa|=n,i)}function t1(n,i,o,u,m){var p=P.p;P.p=p!==0&&8>p?p:8;var v=H.T,j={};H.T=j,q0(n,!1,i,o);try{var V=m(),Q=H.S;if(Q!==null&&Q(j,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var le=hE(V,u);lu(n,i,le,Ts(n))}else lu(n,i,u,Ts(n))}catch(de){lu(n,i,{then:function(){},status:"rejected",reason:de},Ts())}finally{P.p=p,v!==null&&j.types!==null&&(v.types=j.types),H.T=v}}function yE(){}function U0(n,i,o,u){if(n.tag!==5)throw Error(s(476));var m=n1(n).queue;t1(n,m,i,ne,o===null?yE:function(){return s1(n),o(u)})}function n1(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:ne},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function s1(n){var i=n1(n);i.next===null&&(i=n.alternate.memoizedState),lu(n,i.next.queue,{},Ts())}function B0(){return Pn(ju)}function r1(){return rn().memoizedState}function a1(){return rn().memoizedState}function bE(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ts();n=$a(o);var u=Ka(i,n,o);u!==null&&(us(u,i,o),nu(u,i,o)),i={cache:p0()},n.payload=i;return}i=i.return}}function vE(n,i,o){var u=Ts();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Dh(n)?l1(i,o):(o=a0(n,i,o,u),o!==null&&(us(o,n,u),o1(o,i,u)))}function i1(n,i,o){var u=Ts();lu(n,i,o,u)}function lu(n,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Dh(n))l1(i,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,j=p(v,o);if(m.hasEagerState=!0,m.eagerState=j,vs(j,v))return fh(n,i,m,0),Mt===null&&hh(),!1}catch{}finally{}if(o=a0(n,i,m,u),o!==null)return us(o,n,u),o1(o,i,u),!0}return!1}function q0(n,i,o,u){if(u={lane:2,revertLane:vg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dh(n)){if(i)throw Error(s(479))}else i=a0(n,o,u,2),i!==null&&us(i,n,2)}function Dh(n){var i=n.alternate;return n===We||i!==null&&i===We}function l1(n,i){yo=Th=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function o1(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Se(n,o)}}var ou={readContext:Pn,use:Ih,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt};ou.useEffectEvent=Xt;var c1={readContext:Pn,use:Ih,useCallback:function(n,i){return es().memoizedState=[n,i===void 0?null:i],n},useContext:Pn,useEffect:$b,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,kh(4194308,4,Xb.bind(null,i,n),o)},useLayoutEffect:function(n,i){return kh(4194308,4,n,i)},useInsertionEffect:function(n,i){kh(4,2,n,i)},useMemo:function(n,i){var o=es();i=i===void 0?null:i;var u=n();if(il){Tn(!0);try{n()}finally{Tn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=es();if(o!==void 0){var m=o(i);if(il){Tn(!0);try{o(i)}finally{Tn(!1)}}}else m=i;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=vE.bind(null,We,n),[u.memoizedState,n]},useRef:function(n){var i=es();return n={current:n},i.memoizedState=n},useState:function(n){n=O0(n);var i=n.queue,o=i1.bind(null,We,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:L0,useDeferredValue:function(n,i){var o=es();return z0(o,n,i)},useTransition:function(){var n=O0(!1);return n=t1.bind(null,We,n.queue,!0,!1),es().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=We,m=es();if(ut){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Mt===null)throw Error(s(349));(at&127)!==0||Cb(u,i,o)}m.memoizedState=o;var p={value:o,getSnapshot:i};return m.queue=p,$b(Rb.bind(null,u,p,n),[n]),u.flags|=2048,vo(9,{destroy:void 0},kb.bind(null,u,p,o,i),null),o},useId:function(){var n=es(),i=Mt.identifierPrefix;if(ut){var o=Dr,u=Rr;o=(u&~(1<<32-dt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Sh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=fE++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:B0,useFormState:Bb,useActionState:Bb,useOptimistic:function(n){var i=es();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=q0.bind(null,We,!0,o),o.dispatch=i,[n,i]},useMemoCache:R0,useCacheRefresh:function(){return es().memoizedState=bE.bind(null,We)},useEffectEvent:function(n){var i=es(),o={impl:n};return i.memoizedState=o,function(){if((yt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},F0={readContext:Pn,use:Ih,useCallback:Wb,useContext:Pn,useEffect:P0,useImperativeHandle:Jb,useInsertionEffect:Qb,useLayoutEffect:Yb,useMemo:Zb,useReducer:Ch,useRef:Gb,useState:function(){return Ch(oa)},useDebugValue:L0,useDeferredValue:function(n,i){var o=rn();return e1(o,Ct.memoizedState,n,i)},useTransition:function(){var n=Ch(oa)[0],i=rn().memoizedState;return[typeof n=="boolean"?n:iu(n),i]},useSyncExternalStore:Ib,useId:r1,useHostTransitionStatus:B0,useFormState:qb,useActionState:qb,useOptimistic:function(n,i){var o=rn();return Ob(o,Ct,n,i)},useMemoCache:R0,useCacheRefresh:a1};F0.useEffectEvent=Kb;var u1={readContext:Pn,use:Ih,useCallback:Wb,useContext:Pn,useEffect:P0,useImperativeHandle:Jb,useInsertionEffect:Qb,useLayoutEffect:Yb,useMemo:Zb,useReducer:M0,useRef:Gb,useState:function(){return M0(oa)},useDebugValue:L0,useDeferredValue:function(n,i){var o=rn();return Ct===null?z0(o,n,i):e1(o,Ct.memoizedState,n,i)},useTransition:function(){var n=M0(oa)[0],i=rn().memoizedState;return[typeof n=="boolean"?n:iu(n),i]},useSyncExternalStore:Ib,useId:r1,useHostTransitionStatus:B0,useFormState:Hb,useActionState:Hb,useOptimistic:function(n,i){var o=rn();return Ct!==null?Ob(o,Ct,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:R0,useCacheRefresh:a1};u1.useEffectEvent=Kb;function H0(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:b({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var G0={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Ts(),m=$a(u);m.payload=i,o!=null&&(m.callback=o),i=Ka(n,m,u),i!==null&&(us(i,n,u),nu(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Ts(),m=$a(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Ka(n,m,u),i!==null&&(us(i,n,u),nu(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Ts(),u=$a(o);u.tag=2,i!=null&&(u.callback=i),i=Ka(n,u,o),i!==null&&(us(i,n,o),nu(i,n,o))}};function d1(n,i,o,u,m,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!Qc(o,u)||!Qc(m,p):!0}function h1(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&G0.enqueueReplaceState(i,i.state,null)}function ll(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=b({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function f1(n){dh(n)}function m1(n){console.error(n)}function g1(n){dh(n)}function Mh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function p1(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $0(n,i,o){return o=$a(o),o.tag=3,o.payload={element:null},o.callback=function(){Mh(n,i)},o}function x1(n){return n=$a(n),n.tag=3,n}function y1(n,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){p1(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){p1(i,o,u),typeof m!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function wE(n,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ho(i,o,m,!0),o=_s.current,o!==null){switch(o.tag){case 31:case 13:return Ks===null?$h():o.alternate===null&&Jt===0&&(Jt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===wh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),xg(n,u,m)),!1;case 22:return o.flags|=65536,u===wh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),xg(n,u,m)),!1}throw Error(s(435,o.tag))}return xg(n,u,m),$h(),!1}if(ut)return i=_s.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==d0&&(n=Error(s(422),{cause:u}),Jc(Fs(n,o)))):(u!==d0&&(i=Error(s(423),{cause:u}),Jc(Fs(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Fs(u,o),m=$0(n.stateNode,u,m),_0(n,m),Jt!==4&&(Jt=2)),!1;var p=Error(s(520),{cause:u});if(p=Fs(p,o),pu===null?pu=[p]:pu.push(p),Jt!==4&&(Jt=2),i===null)return!0;u=Fs(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=$0(o.stateNode,u,n),_0(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Za===null||!Za.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=x1(m),y1(m,n,o,u),_0(o,m),!1}o=o.return}while(o!==null);return!1}var K0=Error(s(461)),pn=!1;function Ln(n,i,o,u){i.child=n===null?_b(i,null,o,u):al(i,n.child,o,u)}function b1(n,i,o,u,m){o=o.render;var p=i.ref;if("ref"in u){var v={};for(var j in u)j!=="ref"&&(v[j]=u[j])}else v=u;return tl(i),u=A0(n,i,o,v,p,m),j=I0(),n!==null&&!pn?(C0(n,i,m),ca(n,i,m)):(ut&&j&&c0(i),i.flags|=1,Ln(n,i,u,m),i.child)}function v1(n,i,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!i0(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,w1(n,i,p,u,m)):(n=gh(o.type,null,u,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!tg(n,m)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Qc,o(v,u)&&n.ref===i.ref)return ca(n,i,m)}return i.flags|=1,n=sa(p,u),n.ref=i.ref,n.return=i,i.child=n}function w1(n,i,o,u,m){if(n!==null){var p=n.memoizedProps;if(Qc(p,u)&&n.ref===i.ref)if(pn=!1,i.pendingProps=u=p,tg(n,m))(n.flags&131072)!==0&&(pn=!0);else return i.lanes=n.lanes,ca(n,i,m)}return Q0(n,i,o,u,m)}function _1(n,i,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=i.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,i.child=null;return N1(n,i,p,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&bh(i,p!==null?p.cachePool:null),p!==null?Eb(i,p):j0(),Tb(i);else return u=i.lanes=536870912,N1(n,i,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(bh(i,p.cachePool),Eb(i,p),Ya(),i.memoizedState=null):(n!==null&&bh(i,null),j0(),Ya());return Ln(n,i,m,o),i.child}function cu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function N1(n,i,o,u,m){var p=y0();return p=p===null?null:{parent:mn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},n!==null&&bh(i,null),j0(),Tb(i),n!==null&&ho(n,i,u,!0),i.childLanes=m,null}function Oh(n,i){return i=Ph({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function j1(n,i,o){return al(i,n.child,null,o),n=Oh(i,i.pendingProps),n.flags|=2,Ns(i),i.memoizedState=null,n}function _E(n,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(ut){if(u.mode==="hidden")return n=Oh(i,u),i.lanes=536870912,cu(null,n);if(T0(i),(n=Lt)?(n=Vv(n,$s),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ba!==null?{id:Rr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},o=lb(n),o.return=i,i.child=o,Vn=i,Lt=null)):n=null,n===null)throw Fa(i);return i.lanes=536870912,null}return Oh(i,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(T0(i),m)if(i.flags&256)i.flags&=-257,i=j1(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(pn||ho(n,i,o,!1),m=(o&n.childLanes)!==0,pn||m){if(u=Mt,u!==null&&(v=ze(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ji(n,v),us(u,n,v),K0;$h(),i=j1(n,i,o)}else n=p.treeContext,Lt=Qs(v.nextSibling),Vn=i,ut=!0,qa=null,$s=!1,n!==null&&ub(i,n),i=Oh(i,u),i.flags|=4096;return i}return n=sa(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Vh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Q0(n,i,o,u,m){return tl(i),o=A0(n,i,o,u,void 0,m),u=I0(),n!==null&&!pn?(C0(n,i,m),ca(n,i,m)):(ut&&u&&c0(i),i.flags|=1,Ln(n,i,o,m),i.child)}function E1(n,i,o,u,m,p){return tl(i),i.updateQueue=null,o=Ab(i,u,o,m),Sb(n),u=I0(),n!==null&&!pn?(C0(n,i,p),ca(n,i,p)):(ut&&u&&c0(i),i.flags|=1,Ln(n,i,o,p),i.child)}function T1(n,i,o,u,m){if(tl(i),i.stateNode===null){var p=lo,v=o.contextType;typeof v=="object"&&v!==null&&(p=Pn(v)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=G0,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},v0(i),v=o.contextType,p.context=typeof v=="object"&&v!==null?Pn(v):lo,p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(H0(i,o,v,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&G0.enqueueReplaceState(p,p.state,null),ru(i,u,p,m),su(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){p=i.stateNode;var j=i.memoizedProps,V=ll(o,j);p.props=V;var Q=p.context,le=o.contextType;v=lo,typeof le=="object"&&le!==null&&(v=Pn(le));var de=o.getDerivedStateFromProps;le=typeof de=="function"||typeof p.getSnapshotBeforeUpdate=="function",j=i.pendingProps!==j,le||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j||Q!==v)&&h1(i,p,u,v),Ga=!1;var X=i.memoizedState;p.state=X,ru(i,u,p,m),su(),Q=i.memoizedState,j||X!==Q||Ga?(typeof de=="function"&&(H0(i,o,de,u),Q=i.memoizedState),(V=Ga||d1(i,o,V,u,X,Q,v))?(le||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Q),p.props=u,p.state=Q,p.context=v,u=V):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,w0(n,i),v=i.memoizedProps,le=ll(o,v),p.props=le,de=i.pendingProps,X=p.context,Q=o.contextType,V=lo,typeof Q=="object"&&Q!==null&&(V=Pn(Q)),j=o.getDerivedStateFromProps,(Q=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==de||X!==V)&&h1(i,p,u,V),Ga=!1,X=i.memoizedState,p.state=X,ru(i,u,p,m),su();var ee=i.memoizedState;v!==de||X!==ee||Ga||n!==null&&n.dependencies!==null&&xh(n.dependencies)?(typeof j=="function"&&(H0(i,o,j,u),ee=i.memoizedState),(le=Ga||d1(i,o,le,u,X,ee,V)||n!==null&&n.dependencies!==null&&xh(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ee,V),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ee,V)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ee),p.props=u,p.state=ee,p.context=V,u=le):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),u=!1)}return p=u,Vh(n,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&u?(i.child=al(i,n.child,null,m),i.child=al(i,null,o,m)):Ln(n,i,o,m),i.memoizedState=p.state,n=i.child):n=ca(n,i,m),n}function S1(n,i,o,u){return Zi(),i.flags|=256,Ln(n,i,o,u),i.child}var Y0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function X0(n){return{baseLanes:n,cachePool:pb()}}function J0(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Es),n}function A1(n,i,o){var u=i.pendingProps,m=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(sn.current&2)!==0),v&&(m=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(ut){if(m?Qa(i):Ya(),(n=Lt)?(n=Vv(n,$s),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ba!==null?{id:Rr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},o=lb(n),o.return=i,i.child=o,Vn=i,Lt=null)):n=null,n===null)throw Fa(i);return Dg(n)?i.lanes=32:i.lanes=536870912,null}var j=u.children;return u=u.fallback,m?(Ya(),m=i.mode,j=Ph({mode:"hidden",children:j},m),u=Wi(u,m,o,null),j.return=i,u.return=i,j.sibling=u,i.child=j,u=i.child,u.memoizedState=X0(o),u.childLanes=J0(n,v,o),i.memoizedState=Y0,cu(null,u)):(Qa(i),W0(i,j))}var V=n.memoizedState;if(V!==null&&(j=V.dehydrated,j!==null)){if(p)i.flags&256?(Qa(i),i.flags&=-257,i=Z0(n,i,o)):i.memoizedState!==null?(Ya(),i.child=n.child,i.flags|=128,i=null):(Ya(),j=u.fallback,m=i.mode,u=Ph({mode:"visible",children:u.children},m),j=Wi(j,m,o,null),j.flags|=2,u.return=i,j.return=i,u.sibling=j,i.child=u,al(i,n.child,null,o),u=i.child,u.memoizedState=X0(o),u.childLanes=J0(n,v,o),i.memoizedState=Y0,i=cu(null,u));else if(Qa(i),Dg(j)){if(v=j.nextSibling&&j.nextSibling.dataset,v)var Q=v.dgst;v=Q,u=Error(s(419)),u.stack="",u.digest=v,Jc({value:u,source:null,stack:null}),i=Z0(n,i,o)}else if(pn||ho(n,i,o,!1),v=(o&n.childLanes)!==0,pn||v){if(v=Mt,v!==null&&(u=ze(v,o),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ji(n,u),us(v,n,u),K0;Rg(j)||$h(),i=Z0(n,i,o)}else Rg(j)?(i.flags|=192,i.child=n.child,i=null):(n=V.treeContext,Lt=Qs(j.nextSibling),Vn=i,ut=!0,qa=null,$s=!1,n!==null&&ub(i,n),i=W0(i,u.children),i.flags|=4096);return i}return m?(Ya(),j=u.fallback,m=i.mode,V=n.child,Q=V.sibling,u=sa(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,Q!==null?j=sa(Q,j):(j=Wi(j,m,o,null),j.flags|=2),j.return=i,u.return=i,u.sibling=j,i.child=u,cu(null,u),u=i.child,j=n.child.memoizedState,j===null?j=X0(o):(m=j.cachePool,m!==null?(V=mn._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=pb(),j={baseLanes:j.baseLanes|o,cachePool:m}),u.memoizedState=j,u.childLanes=J0(n,v,o),i.memoizedState=Y0,cu(n.child,u)):(Qa(i),o=n.child,n=o.sibling,o=sa(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function W0(n,i){return i=Ph({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Ph(n,i){return n=ws(22,n,null,i),n.lanes=0,n}function Z0(n,i,o){return al(i,n.child,null,o),n=W0(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function I1(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),m0(n.return,i,o)}function eg(n,i,o,u,m,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=m,v.treeForkCount=p)}function C1(n,i,o){var u=i.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var v=sn.current,j=(v&2)!==0;if(j?(v=v&1|2,i.flags|=128):v&=1,xe(sn,v),Ln(n,i,u,o),u=ut?Xc:0,!j&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&I1(n,o,i);else if(n.tag===19)I1(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&Eh(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),eg(i,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Eh(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}eg(i,!0,o,null,p,u);break;case"together":eg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ca(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Wa|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(ho(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=sa(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=sa(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function tg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&xh(n)))}function NE(n,i,o){switch(i.tag){case 3:ct(i,i.stateNode.containerInfo),Ha(i,mn,n.memoizedState.cache),Zi();break;case 27:case 5:on(i);break;case 4:ct(i,i.stateNode.containerInfo);break;case 10:Ha(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,T0(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Qa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?A1(n,i,o):(Qa(i),n=ca(n,i,o),n!==null?n.sibling:null);Qa(i);break;case 19:var m=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ho(n,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return C1(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),xe(sn,sn.current),u)break;return null;case 22:return i.lanes=0,_1(n,i,o,i.pendingProps);case 24:Ha(i,mn,n.memoizedState.cache)}return ca(n,i,o)}function k1(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)pn=!0;else{if(!tg(n,o)&&(i.flags&128)===0)return pn=!1,NE(n,i,o);pn=(n.flags&131072)!==0}else pn=!1,ut&&(i.flags&1048576)!==0&&cb(i,Xc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=sl(i.elementType),i.type=n,typeof n=="function")i0(n)?(u=ll(n,u),i.tag=1,i=T1(null,i,n,u,o)):(i.tag=0,i=Q0(null,i,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===fe){i.tag=11,i=b1(null,i,n,u,o);break e}else if(m===S){i.tag=14,i=v1(null,i,n,u,o);break e}}throw i=ce(n)||n,Error(s(306,i,""))}}return i;case 0:return Q0(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=ll(u,i.pendingProps),T1(n,i,u,m,o);case 3:e:{if(ct(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var p=i.memoizedState;m=p.element,w0(n,i),ru(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Ha(i,mn,u),u!==p.cache&&g0(i,[mn],o,!0),su(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=S1(n,i,u,o);break e}else if(u!==m){m=Fs(Error(s(424)),i),Jc(m),i=S1(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Lt=Qs(n.firstChild),Vn=i,ut=!0,qa=null,$s=!0,o=_b(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Zi(),u===m){i=ca(n,i,o);break e}Ln(n,i,u,o)}i=i.child}return i;case 26:return Vh(n,i),n===null?(o=qv(i.type,null,i.pendingProps,null))?i.memoizedState=o:ut||(o=i.type,n=i.pendingProps,u=Zh(Ee.current).createElement(o),u[Xe]=i,u[dn]=n,zn(u,o,n),hn(u),i.stateNode=u):i.memoizedState=qv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return on(i),n===null&&ut&&(u=i.stateNode=zv(i.type,i.pendingProps,Ee.current),Vn=i,$s=!0,m=Lt,si(i.type)?(Mg=m,Lt=Qs(u.firstChild)):Lt=m),Ln(n,i,i.pendingProps.children,o),Vh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ut&&((m=u=Lt)&&(u=ZE(u,i.type,i.pendingProps,$s),u!==null?(i.stateNode=u,Vn=i,Lt=Qs(u.firstChild),$s=!1,m=!0):m=!1),m||Fa(i)),on(i),m=i.type,p=i.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Ig(m,p)?u=null:v!==null&&Ig(m,v)&&(i.flags|=32),i.memoizedState!==null&&(m=A0(n,i,mE,null,null,o),ju._currentValue=m),Vh(n,i),Ln(n,i,u,o),i.child;case 6:return n===null&&ut&&((n=o=Lt)&&(o=eT(o,i.pendingProps,$s),o!==null?(i.stateNode=o,Vn=i,Lt=null,n=!0):n=!1),n||Fa(i)),null;case 13:return A1(n,i,o);case 4:return ct(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=al(i,null,u,o):Ln(n,i,u,o),i.child;case 11:return b1(n,i,i.type,i.pendingProps,o);case 7:return Ln(n,i,i.pendingProps,o),i.child;case 8:return Ln(n,i,i.pendingProps.children,o),i.child;case 12:return Ln(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ha(i,i.type,u.value),Ln(n,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,tl(i),m=Pn(m),u=u(m),i.flags|=1,Ln(n,i,u,o),i.child;case 14:return v1(n,i,i.type,i.pendingProps,o);case 15:return w1(n,i,i.type,i.pendingProps,o);case 19:return C1(n,i,o);case 31:return _E(n,i,o);case 22:return _1(n,i,o,i.pendingProps);case 24:return tl(i),u=Pn(mn),n===null?(m=y0(),m===null&&(m=Mt,p=p0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),i.memoizedState={parent:u,cache:m},v0(i),Ha(i,mn,m)):((n.lanes&o)!==0&&(w0(n,i),ru(i,null,null,o),su()),m=n.memoizedState,p=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ha(i,mn,u)):(u=p.cache,Ha(i,mn,u),u!==m.cache&&g0(i,[mn],o,!0))),Ln(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ua(n){n.flags|=4}function ng(n,i,o,u,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(rv())n.flags|=8192;else throw rl=wh,b0}else n.flags&=-16777217}function R1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Kv(i))if(rv())n.flags|=8192;else throw rl=wh,b0}function Lh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Gl():536870912,n.lanes|=i,jo|=i)}function uu(n,i){if(!ut)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function zt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function jE(n,i,o){var u=i.pendingProps;switch(u0(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(i),null;case 1:return zt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ia(mn),tt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(uo(i)?ua(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,h0())),zt(i),null;case 26:var m=i.type,p=i.memoizedState;return n===null?(ua(i),p!==null?(zt(i),R1(i,p)):(zt(i),ng(i,m,null,u,o))):p?p!==n.memoizedState?(ua(i),zt(i),R1(i,p)):(zt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&ua(i),zt(i),ng(i,m,n,u,o)),null;case 27:if(Kt(i),o=Ee.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ua(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return zt(i),null}n=be.current,uo(i)?db(i):(n=zv(m,u,o),i.stateNode=n,ua(i))}return zt(i),null;case 5:if(Kt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ua(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return zt(i),null}if(p=be.current,uo(i))db(i);else{var v=Zh(Ee.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(m,{is:u.is}):v.createElement(m)}}p[Xe]=i,p[dn]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;e:switch(zn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ua(i)}}return zt(i),ng(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&ua(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ee.current,uo(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,m=Vn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[Xe]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Av(n.nodeValue,o)),n||Fa(i,!0)}else n=Zh(n).createTextNode(u),n[Xe]=i,i.stateNode=n}return zt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=uo(i),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Xe]=i}else Zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),n=!1}else o=h0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Ns(i),i):(Ns(i),null);if((i.flags&128)!==0)throw Error(s(558))}return zt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=uo(i),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Xe]=i}else Zi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),m=!1}else m=h0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Ns(i),i):(Ns(i),null)}return Ns(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Lh(i,i.updateQueue),zt(i),null);case 4:return tt(),n===null&&jg(i.stateNode.containerInfo),zt(i),null;case 10:return ia(i.type),zt(i),null;case 19:if(Y(sn),u=i.memoizedState,u===null)return zt(i),null;if(m=(i.flags&128)!==0,p=u.rendering,p===null)if(m)uu(u,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Eh(n),p!==null){for(i.flags|=128,uu(u,!1),n=p.updateQueue,i.updateQueue=n,Lh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)ib(o,n),o=o.sibling;return xe(sn,sn.current&1|2),ut&&ra(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&wt()>Fh&&(i.flags|=128,m=!0,uu(u,!1),i.lanes=4194304)}else{if(!m)if(n=Eh(p),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,Lh(i,n),uu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!ut)return zt(i),null}else 2*wt()-u.renderingStartTime>Fh&&o!==536870912&&(i.flags|=128,m=!0,uu(u,!1),i.lanes=4194304);u.isBackwards?(p.sibling=i.child,i.child=p):(n=u.last,n!==null?n.sibling=p:i.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=wt(),n.sibling=null,o=sn.current,xe(sn,m?o&1|2:o&1),ut&&ra(i,u.treeForkCount),n):(zt(i),null);case 22:case 23:return Ns(i),E0(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(zt(i),i.subtreeFlags&6&&(i.flags|=8192)):zt(i),o=i.updateQueue,o!==null&&Lh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&Y(nl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ia(mn),zt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function EE(n,i){switch(u0(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ia(mn),tt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Kt(i),null;case 31:if(i.memoizedState!==null){if(Ns(i),i.alternate===null)throw Error(s(340));Zi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Ns(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Zi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Y(sn),null;case 4:return tt(),null;case 10:return ia(i.type),null;case 22:case 23:return Ns(i),E0(),n!==null&&Y(nl),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ia(mn),null;case 25:return null;default:return null}}function D1(n,i){switch(u0(i),i.tag){case 3:ia(mn),tt();break;case 26:case 27:case 5:Kt(i);break;case 4:tt();break;case 31:i.memoizedState!==null&&Ns(i);break;case 13:Ns(i);break;case 19:Y(sn);break;case 10:ia(i.type);break;case 22:case 23:Ns(i),E0(),n!==null&&Y(nl);break;case 24:ia(mn)}}function du(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==m)}}catch(j){Et(i,i.return,j)}}function Xa(n,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var v=u.inst,j=v.destroy;if(j!==void 0){v.destroy=void 0,m=i;var V=o,Q=j;try{Q()}catch(le){Et(m,V,le)}}}u=u.next}while(u!==p)}}catch(le){Et(i,i.return,le)}}function M1(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{jb(i,o)}catch(u){Et(n,n.return,u)}}}function O1(n,i,o){o.props=ll(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Et(n,i,u)}}function hu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){Et(n,i,m)}}function Mr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Et(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Et(n,i,m)}else o.current=null}function V1(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Et(n,n.return,m)}}function sg(n,i,o){try{var u=n.stateNode;KE(u,n.type,o,i),u[dn]=i}catch(m){Et(n,n.return,m)}}function P1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&si(n.type)||n.tag===4}function rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||P1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&si(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ag(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=nr));else if(u!==4&&(u===27&&si(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(ag(n,i,o),n=n.sibling;n!==null;)ag(n,i,o),n=n.sibling}function zh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&si(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(zh(n,i,o),n=n.sibling;n!==null;)zh(n,i,o),n=n.sibling}function L1(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);zn(i,u,o),i[Xe]=n,i[dn]=o}catch(p){Et(n,n.return,p)}}var da=!1,xn=!1,ig=!1,z1=typeof WeakSet=="function"?WeakSet:Set,An=null;function TE(n,i){if(n=n.containerInfo,Sg=lf,n=Jy(n),Zm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,j=-1,V=-1,Q=0,le=0,de=n,X=null;t:for(;;){for(var ee;de!==o||m!==0&&de.nodeType!==3||(j=v+m),de!==p||u!==0&&de.nodeType!==3||(V=v+u),de.nodeType===3&&(v+=de.nodeValue.length),(ee=de.firstChild)!==null;)X=de,de=ee;for(;;){if(de===n)break t;if(X===o&&++Q===m&&(j=v),X===p&&++le===u&&(V=v),(ee=de.nextSibling)!==null)break;de=X,X=de.parentNode}de=ee}o=j===-1||V===-1?null:{start:j,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ag={focusedElem:n,selectionRange:o},lf=!1,An=i;An!==null;)if(i=An,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,An=n;else for(;An!==null;){switch(i=An,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ce=ll(o.type,m);n=u.getSnapshotBeforeUpdate(Ce,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(qe){Et(o,o.return,qe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)kg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":kg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,An=n;break}An=i.return}}function U1(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:fa(n,o),u&4&&du(5,o);break;case 1:if(fa(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){Et(o,o.return,v)}else{var m=ll(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Et(o,o.return,v)}}u&64&&M1(o),u&512&&hu(o,o.return);break;case 3:if(fa(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{jb(n,i)}catch(v){Et(o,o.return,v)}}break;case 27:i===null&&u&4&&L1(o);case 26:case 5:fa(n,o),i===null&&u&4&&V1(o),u&512&&hu(o,o.return);break;case 12:fa(n,o);break;case 31:fa(n,o),u&4&&F1(n,o);break;case 13:fa(n,o),u&4&&H1(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=OE.bind(null,o),tT(n,o))));break;case 22:if(u=o.memoizedState!==null||da,!u){i=i!==null&&i.memoizedState!==null||xn,m=da;var p=xn;da=u,(xn=i)&&!p?ma(n,o,(o.subtreeFlags&8772)!==0):fa(n,o),da=m,xn=p}break;case 30:break;default:fa(n,o)}}function B1(n){var i=n.alternate;i!==null&&(n.alternate=null,B1(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Kl(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ft=null,is=!1;function ha(n,i,o){for(o=o.child;o!==null;)q1(n,i,o),o=o.sibling}function q1(n,i,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(tn,o)}catch{}switch(o.tag){case 26:xn||Mr(o,i),ha(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xn||Mr(o,i);var u=Ft,m=is;si(o.type)&&(Ft=o.stateNode,is=!1),ha(n,i,o),wu(o.stateNode),Ft=u,is=m;break;case 5:xn||Mr(o,i);case 6:if(u=Ft,m=is,Ft=null,ha(n,i,o),Ft=u,is=m,Ft!==null)if(is)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(o.stateNode)}catch(p){Et(o,i,p)}else try{Ft.removeChild(o.stateNode)}catch(p){Et(o,i,p)}break;case 18:Ft!==null&&(is?(n=Ft,Mv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ro(n)):Mv(Ft,o.stateNode));break;case 4:u=Ft,m=is,Ft=o.stateNode.containerInfo,is=!0,ha(n,i,o),Ft=u,is=m;break;case 0:case 11:case 14:case 15:Xa(2,o,i),xn||Xa(4,o,i),ha(n,i,o);break;case 1:xn||(Mr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&O1(o,i,u)),ha(n,i,o);break;case 21:ha(n,i,o);break;case 22:xn=(u=xn)||o.memoizedState!==null,ha(n,i,o),xn=u;break;default:ha(n,i,o)}}function F1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ro(n)}catch(o){Et(i,i.return,o)}}}function H1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ro(n)}catch(o){Et(i,i.return,o)}}function SE(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new z1),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new z1),i;default:throw Error(s(435,n.tag))}}function Uh(n,i){var o=SE(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=VE.bind(null,n,u);u.then(m,m)}})}function ls(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,v=i,j=v;e:for(;j!==null;){switch(j.tag){case 27:if(si(j.type)){Ft=j.stateNode,is=!1;break e}break;case 5:Ft=j.stateNode,is=!1;break e;case 3:case 4:Ft=j.stateNode.containerInfo,is=!0;break e}j=j.return}if(Ft===null)throw Error(s(160));q1(p,v,m),Ft=null,is=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)G1(i,n),i=i.sibling}var or=null;function G1(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ls(i,n),os(n),u&4&&(Xa(3,n,n.return),du(3,n),Xa(5,n,n.return));break;case 1:ls(i,n),os(n),u&512&&(xn||o===null||Mr(o,o.return)),u&64&&da&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=or;if(ls(i,n),os(n),u&512&&(xn||o===null||Mr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[vr]||p[Xe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),zn(p,u,o),p[Xe]=n,hn(p),u=p;break e;case"link":var v=Gv("link","href",m).get(u+(o.href||""));if(v){for(var j=0;j<v.length;j++)if(p=v[j],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(j,1);break t}}p=m.createElement(u),zn(p,u,o),m.head.appendChild(p);break;case"meta":if(v=Gv("meta","content",m).get(u+(o.content||""))){for(j=0;j<v.length;j++)if(p=v[j],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(j,1);break t}}p=m.createElement(u),zn(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[Xe]=n,hn(p),u=p}n.stateNode=u}else $v(m,n.type,n.stateNode);else n.stateNode=Hv(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?$v(m,n.type,n.stateNode):Hv(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&sg(n,n.memoizedProps,o.memoizedProps)}break;case 27:ls(i,n),os(n),u&512&&(xn||o===null||Mr(o,o.return)),o!==null&&u&4&&sg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ls(i,n),os(n),u&512&&(xn||o===null||Mr(o,o.return)),n.flags&32){m=n.stateNode;try{as(m,"")}catch(Ce){Et(n,n.return,Ce)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,sg(n,m,o!==null?o.memoizedProps:m)),u&1024&&(ig=!0);break;case 6:if(ls(i,n),os(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Ce){Et(n,n.return,Ce)}}break;case 3:if(nf=null,m=or,or=ef(i.containerInfo),ls(i,n),or=m,os(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ro(i.containerInfo)}catch(Ce){Et(n,n.return,Ce)}ig&&(ig=!1,$1(n));break;case 4:u=or,or=ef(n.stateNode.containerInfo),ls(i,n),os(n),or=u;break;case 12:ls(i,n),os(n);break;case 31:ls(i,n),os(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 13:ls(i,n),os(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(qh=wt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 22:m=n.memoizedState!==null;var V=o!==null&&o.memoizedState!==null,Q=da,le=xn;if(da=Q||m,xn=le||V,ls(i,n),xn=le,da=Q,os(n),u&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||V||da||xn||ol(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){V=o=i;try{if(p=V.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{j=V.stateNode;var de=V.memoizedProps.style,X=de!=null&&de.hasOwnProperty("display")?de.display:null;j.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Ce){Et(V,V.return,Ce)}}}else if(i.tag===6){if(o===null){V=i;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(Ce){Et(V,V.return,Ce)}}}else if(i.tag===18){if(o===null){V=i;try{var ee=V.stateNode;m?Ov(ee,!0):Ov(V.stateNode,!1)}catch(Ce){Et(V,V.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Uh(n,o))));break;case 19:ls(i,n),os(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 30:break;case 21:break;default:ls(i,n),os(n)}}function os(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(P1(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=rg(n);zh(n,p,m);break;case 5:var v=o.stateNode;o.flags&32&&(as(v,""),o.flags&=-33);var j=rg(n);zh(n,j,v);break;case 3:case 4:var V=o.stateNode.containerInfo,Q=rg(n);ag(n,Q,V);break;default:throw Error(s(161))}}catch(le){Et(n,n.return,le)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function $1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;$1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function fa(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)U1(n,i.alternate,i),i=i.sibling}function ol(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Xa(4,i,i.return),ol(i);break;case 1:Mr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&O1(i,i.return,o),ol(i);break;case 27:wu(i.stateNode);case 26:case 5:Mr(i,i.return),ol(i);break;case 22:i.memoizedState===null&&ol(i);break;case 30:ol(i);break;default:ol(i)}n=n.sibling}}function ma(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=n,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:ma(m,p,o),du(4,p);break;case 1:if(ma(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){Et(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var j=u.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)Nb(V[m],j)}catch(Q){Et(u,u.return,Q)}}o&&v&64&&M1(p),hu(p,p.return);break;case 27:L1(p);case 26:case 5:ma(m,p,o),o&&u===null&&v&4&&V1(p),hu(p,p.return);break;case 12:ma(m,p,o);break;case 31:ma(m,p,o),o&&v&4&&F1(m,p);break;case 13:ma(m,p,o),o&&v&4&&H1(m,p);break;case 22:p.memoizedState===null&&ma(m,p,o),hu(p,p.return);break;case 30:break;default:ma(m,p,o)}i=i.sibling}}function lg(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Wc(o))}function og(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Wc(n))}function cr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)K1(n,i,o,u),i=i.sibling}function K1(n,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:cr(n,i,o,u),m&2048&&du(9,i);break;case 1:cr(n,i,o,u);break;case 3:cr(n,i,o,u),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Wc(n)));break;case 12:if(m&2048){cr(n,i,o,u),n=i.stateNode;try{var p=i.memoizedProps,v=p.id,j=p.onPostCommit;typeof j=="function"&&j(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){Et(i,i.return,V)}}else cr(n,i,o,u);break;case 31:cr(n,i,o,u);break;case 13:cr(n,i,o,u);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?cr(n,i,o,u):fu(n,i):p._visibility&2?cr(n,i,o,u):(p._visibility|=2,wo(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&lg(v,i);break;case 24:cr(n,i,o,u),m&2048&&og(i.alternate,i);break;default:cr(n,i,o,u)}}function wo(n,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,v=i,j=o,V=u,Q=v.flags;switch(v.tag){case 0:case 11:case 15:wo(p,v,j,V,m),du(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?wo(p,v,j,V,m):fu(p,v):(le._visibility|=2,wo(p,v,j,V,m)),m&&Q&2048&&lg(v.alternate,v);break;case 24:wo(p,v,j,V,m),m&&Q&2048&&og(v.alternate,v);break;default:wo(p,v,j,V,m)}i=i.sibling}}function fu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,m=u.flags;switch(u.tag){case 22:fu(o,u),m&2048&&lg(u.alternate,u);break;case 24:fu(o,u),m&2048&&og(u.alternate,u);break;default:fu(o,u)}i=i.sibling}}var mu=8192;function _o(n,i,o){if(n.subtreeFlags&mu)for(n=n.child;n!==null;)Q1(n,i,o),n=n.sibling}function Q1(n,i,o){switch(n.tag){case 26:_o(n,i,o),n.flags&mu&&n.memoizedState!==null&&fT(o,or,n.memoizedState,n.memoizedProps);break;case 5:_o(n,i,o);break;case 3:case 4:var u=or;or=ef(n.stateNode.containerInfo),_o(n,i,o),or=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,_o(n,i,o),mu=u):_o(n,i,o));break;default:_o(n,i,o)}}function Y1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function gu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];An=u,J1(u,n)}Y1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X1(n),n=n.sibling}function X1(n){switch(n.tag){case 0:case 11:case 15:gu(n),n.flags&2048&&Xa(9,n,n.return);break;case 3:gu(n);break;case 12:gu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Bh(n)):gu(n);break;default:gu(n)}}function Bh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];An=u,J1(u,n)}Y1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Xa(8,i,i.return),Bh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Bh(i));break;default:Bh(i)}n=n.sibling}}function J1(n,i){for(;An!==null;){var o=An;switch(o.tag){case 0:case 11:case 15:Xa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,An=u;else e:for(o=n;An!==null;){u=An;var m=u.sibling,p=u.return;if(B1(u),u===o){An=null;break e}if(m!==null){m.return=p,An=m;break e}An=p}}}var AE={getCacheForType:function(n){var i=Pn(mn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Pn(mn).controller.signal}},IE=typeof WeakMap=="function"?WeakMap:Map,yt=0,Mt=null,st=null,at=0,jt=0,js=null,Ja=!1,No=!1,cg=!1,ga=0,Jt=0,Wa=0,cl=0,ug=0,Es=0,jo=0,pu=null,cs=null,dg=!1,qh=0,W1=0,Fh=1/0,Hh=null,Za=null,vn=0,ei=null,Eo=null,pa=0,hg=0,fg=null,Z1=null,xu=0,mg=null;function Ts(){return(yt&2)!==0&&at!==0?at&-at:H.T!==null?vg():_t()}function ev(){if(Es===0)if((at&536870912)===0||ut){var n=Wr;Wr<<=1,(Wr&3932160)===0&&(Wr=262144),Es=n}else Es=536870912;return n=_s.current,n!==null&&(n.flags|=32),Es}function us(n,i,o){(n===Mt&&(jt===2||jt===9)||n.cancelPendingCommit!==null)&&(To(n,0),ti(n,at,Es,!1)),Zr(n,o),((yt&2)===0||n!==Mt)&&(n===Mt&&((yt&2)===0&&(cl|=o),Jt===4&&ti(n,at,Es,!1)),Or(n))}function tv(n,i,o){if((yt&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Mn(n,i),m=u?RE(n,i):pg(n,i,!0),p=u;do{if(m===0){No&&!u&&ti(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!CE(o)){m=pg(n,i,!1),p=!1;continue}if(m===2){if(p=i,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var j=n;m=pu;var V=j.current.memoizedState.isDehydrated;if(V&&(To(j,v).flags|=256),v=pg(j,v,!1),v!==2){if(cg&&!V){j.errorRecoveryDisabledLanes|=p,cl|=p,m=4;break e}p=cs,cs=m,p!==null&&(cs===null?cs=p:cs.push.apply(cs,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){To(n,0),ti(n,i,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ti(u,i,Es,!Ja);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=qh+300-wt(),10<m)){if(ti(u,i,Es,!Ja),xs(u,0,!0)!==0)break e;pa=i,u.timeoutHandle=Rv(nv.bind(null,u,o,cs,Hh,dg,i,Es,cl,jo,Ja,p,"Throttled",-0,0),m);break e}nv(u,o,cs,Hh,dg,i,Es,cl,jo,Ja,p,null,-0,0)}}break}while(!0);Or(n)}function nv(n,i,o,u,m,p,v,j,V,Q,le,de,X,ee){if(n.timeoutHandle=-1,de=i.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},Q1(i,p,de);var Ce=(p&62914560)===p?qh-wt():(p&4194048)===p?W1-wt():0;if(Ce=mT(de,Ce),Ce!==null){pa=p,n.cancelPendingCommit=Ce(uv.bind(null,n,i,p,o,u,m,v,j,V,le,de,null,X,ee)),ti(n,p,v,!Q);return}}uv(n,i,p,o,u,m,v,j,V)}function CE(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!vs(p(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(n,i,o,u){i&=~ug,i&=~cl,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var m=i;0<m;){var p=31-dt(m),v=1<<p;u[p]=-1,m&=~v}o!==0&&Re(n,o,i)}function Gh(){return(yt&6)===0?(yu(0),!1):!0}function gg(){if(st!==null){if(jt===0)var n=st.return;else n=st,aa=el=null,k0(n),po=null,eu=0,n=st;for(;n!==null;)D1(n.alternate,n),n=n.return;st=null}}function To(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,XE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),pa=0,gg(),Mt=n,st=o=sa(n.current,null),at=i,jt=0,js=null,Ja=!1,No=Mn(n,i),cg=!1,jo=Es=ug=cl=Wa=Jt=0,cs=pu=null,dg=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var m=31-dt(u),p=1<<m;i|=n[m],u&=~p}return ga=i,hh(),o}function sv(n,i){We=null,H.H=ou,i===go||i===vh?(i=bb(),jt=3):i===b0?(i=bb(),jt=4):jt=i===K0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,js=i,st===null&&(Jt=1,Mh(n,Fs(i,n.current)))}function rv(){var n=_s.current;return n===null?!0:(at&4194048)===at?Ks===null:(at&62914560)===at||(at&536870912)!==0?n===Ks:!1}function av(){var n=H.H;return H.H=ou,n===null?ou:n}function iv(){var n=H.A;return H.A=AE,n}function $h(){Jt=4,Ja||(at&4194048)!==at&&_s.current!==null||(No=!0),(Wa&134217727)===0&&(cl&134217727)===0||Mt===null||ti(Mt,at,Es,!1)}function pg(n,i,o){var u=yt;yt|=2;var m=av(),p=iv();(Mt!==n||at!==i)&&(Hh=null,To(n,i)),i=!1;var v=Jt;e:do try{if(jt!==0&&st!==null){var j=st,V=js;switch(jt){case 8:gg(),v=6;break e;case 3:case 2:case 9:case 6:_s.current===null&&(i=!0);var Q=jt;if(jt=0,js=null,So(n,j,V,Q),o&&No){v=0;break e}break;default:Q=jt,jt=0,js=null,So(n,j,V,Q)}}kE(),v=Jt;break}catch(le){sv(n,le)}while(!0);return i&&n.shellSuspendCounter++,aa=el=null,yt=u,H.H=m,H.A=p,st===null&&(Mt=null,at=0,hh()),v}function kE(){for(;st!==null;)lv(st)}function RE(n,i){var o=yt;yt|=2;var u=av(),m=iv();Mt!==n||at!==i?(Hh=null,Fh=wt()+500,To(n,i)):No=Mn(n,i);e:do try{if(jt!==0&&st!==null){i=st;var p=js;t:switch(jt){case 1:jt=0,js=null,So(n,i,p,1);break;case 2:case 9:if(xb(p)){jt=0,js=null,ov(i);break}i=function(){jt!==2&&jt!==9||Mt!==n||(jt=7),Or(n)},p.then(i,i);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:xb(p)?(jt=0,js=null,ov(i)):(jt=0,js=null,So(n,i,p,7));break;case 5:var v=null;switch(st.tag){case 26:v=st.memoizedState;case 5:case 27:var j=st;if(v?Kv(v):j.stateNode.complete){jt=0,js=null;var V=j.sibling;if(V!==null)st=V;else{var Q=j.return;Q!==null?(st=Q,Kh(Q)):st=null}break t}}jt=0,js=null,So(n,i,p,5);break;case 6:jt=0,js=null,So(n,i,p,6);break;case 8:gg(),Jt=6;break e;default:throw Error(s(462))}}DE();break}catch(le){sv(n,le)}while(!0);return aa=el=null,H.H=u,H.A=m,yt=o,st!==null?0:(Mt=null,at=0,hh(),Jt)}function DE(){for(;st!==null&&!ft();)lv(st)}function lv(n){var i=k1(n.alternate,n,ga);n.memoizedProps=n.pendingProps,i===null?Kh(n):st=i}function ov(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=E1(o,i,i.pendingProps,i.type,void 0,at);break;case 11:i=E1(o,i,i.pendingProps,i.type.render,i.ref,at);break;case 5:k0(i);default:D1(o,i),i=st=ib(i,ga),i=k1(o,i,ga)}n.memoizedProps=n.pendingProps,i===null?Kh(n):st=i}function So(n,i,o,u){aa=el=null,k0(i),po=null,eu=0;var m=i.return;try{if(wE(n,m,i,o,at)){Jt=1,Mh(n,Fs(o,n.current)),st=null;return}}catch(p){if(m!==null)throw st=m,p;Jt=1,Mh(n,Fs(o,n.current)),st=null;return}i.flags&32768?(ut||u===1?n=!0:No||(at&536870912)!==0?n=!1:(Ja=n=!0,(u===2||u===9||u===3||u===6)&&(u=_s.current,u!==null&&u.tag===13&&(u.flags|=16384))),cv(i,n)):Kh(i)}function Kh(n){var i=n;do{if((i.flags&32768)!==0){cv(i,Ja);return}n=i.return;var o=jE(i.alternate,i,ga);if(o!==null){st=o;return}if(i=i.sibling,i!==null){st=i;return}st=i=n}while(i!==null);Jt===0&&(Jt=5)}function cv(n,i){do{var o=EE(n.alternate,n);if(o!==null){o.flags&=32767,st=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){st=n;return}st=n=o}while(n!==null);Jt=6,st=null}function uv(n,i,o,u,m,p,v,j,V){n.cancelPendingCommit=null;do Qh();while(vn!==0);if((yt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=r0,ye(n,o,p,v,j,V),n===Mt&&(st=Mt=null,at=0),Eo=i,ei=n,pa=o,hg=p,fg=m,Z1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,PE(un,function(){return gv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,m=P.p,P.p=2,v=yt,yt|=4;try{TE(n,i,o)}finally{yt=v,P.p=m,H.T=u}}vn=1,dv(),hv(),fv()}}function dv(){if(vn===1){vn=0;var n=ei,i=Eo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=P.p;P.p=2;var m=yt;yt|=4;try{G1(i,n);var p=Ag,v=Jy(n.containerInfo),j=p.focusedElem,V=p.selectionRange;if(v!==j&&j&&j.ownerDocument&&Xy(j.ownerDocument.documentElement,j)){if(V!==null&&Zm(j)){var Q=V.start,le=V.end;if(le===void 0&&(le=Q),"selectionStart"in j)j.selectionStart=Q,j.selectionEnd=Math.min(le,j.value.length);else{var de=j.ownerDocument||document,X=de&&de.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Ce=j.textContent.length,qe=Math.min(V.start,Ce),Rt=V.end===void 0?qe:Math.min(V.end,Ce);!ee.extend&&qe>Rt&&(v=Rt,Rt=qe,qe=v);var F=Yy(j,qe),L=Yy(j,Rt);if(F&&L&&(ee.rangeCount!==1||ee.anchorNode!==F.node||ee.anchorOffset!==F.offset||ee.focusNode!==L.node||ee.focusOffset!==L.offset)){var K=de.createRange();K.setStart(F.node,F.offset),ee.removeAllRanges(),qe>Rt?(ee.addRange(K),ee.extend(L.node,L.offset)):(K.setEnd(L.node,L.offset),ee.addRange(K))}}}}for(de=[],ee=j;ee=ee.parentNode;)ee.nodeType===1&&de.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<de.length;j++){var oe=de[j];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}lf=!!Sg,Ag=Sg=null}finally{yt=m,P.p=u,H.T=o}}n.current=i,vn=2}}function hv(){if(vn===2){vn=0;var n=ei,i=Eo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=P.p;P.p=2;var m=yt;yt|=4;try{U1(n,i.alternate,i)}finally{yt=m,P.p=u,H.T=o}}vn=3}}function fv(){if(vn===4||vn===3){vn=0,Pt();var n=ei,i=Eo,o=pa,u=Z1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?vn=5:(vn=0,Eo=ei=null,mv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Za=null),Ie(o),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(tn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,m=P.p,P.p=2,H.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var j=u[v];p(j.value,{componentStack:j.stack})}}finally{H.T=i,P.p=m}}(pa&3)!==0&&Qh(),Or(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===mg?xu++:(xu=0,mg=n):xu=0,yu(0)}}function mv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Wc(i)))}function Qh(){return dv(),hv(),fv(),gv()}function gv(){if(vn!==5)return!1;var n=ei,i=hg;hg=0;var o=Ie(pa),u=H.T,m=P.p;try{P.p=32>o?32:o,H.T=null,o=fg,fg=null;var p=ei,v=pa;if(vn=0,Eo=ei=null,pa=0,(yt&6)!==0)throw Error(s(331));var j=yt;if(yt|=4,X1(p.current),K1(p,p.current,v,o),yt=j,yu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(tn,p)}catch{}return!0}finally{P.p=m,H.T=u,mv(n,i)}}function pv(n,i,o){i=Fs(o,i),i=$0(n.stateNode,i,2),n=Ka(n,i,2),n!==null&&(Zr(n,2),Or(n))}function Et(n,i,o){if(n.tag===3)pv(n,n,o);else for(;i!==null;){if(i.tag===3){pv(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Za===null||!Za.has(u))){n=Fs(o,n),o=x1(2),u=Ka(i,o,2),u!==null&&(y1(o,u,i,n),Zr(u,2),Or(u));break}}i=i.return}}function xg(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new IE;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(cg=!0,m.add(o),n=ME.bind(null,n,i,o),i.then(n,n))}function ME(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Mt===n&&(at&o)===o&&(Jt===4||Jt===3&&(at&62914560)===at&&300>wt()-qh?(yt&2)===0&&To(n,0):ug|=o,jo===at&&(jo=0)),Or(n)}function xv(n,i){i===0&&(i=Gl()),n=Ji(n,i),n!==null&&(Zr(n,i),Or(n))}function OE(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),xv(n,o)}function VE(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),xv(n,o)}function PE(n,i){return Le(n,i)}var Yh=null,Ao=null,yg=!1,Xh=!1,bg=!1,ni=0;function Or(n){n!==Ao&&n.next===null&&(Ao===null?Yh=Ao=n:Ao=Ao.next=n),Xh=!0,yg||(yg=!0,zE())}function yu(n,i){if(!bg&&Xh){bg=!0;do for(var o=!1,u=Yh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var v=u.suspendedLanes,j=u.pingedLanes;p=(1<<31-dt(42|n)+1)-1,p&=m&~(v&~j),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,wv(u,p))}else p=at,p=xs(u,u===Mt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Mn(u,p)||(o=!0,wv(u,p));u=u.next}while(o);bg=!1}}function LE(){yv()}function yv(){Xh=yg=!1;var n=0;ni!==0&&YE()&&(n=ni);for(var i=wt(),o=null,u=Yh;u!==null;){var m=u.next,p=bv(u,i);p===0?(u.next=null,o===null?Yh=m:o.next=m,m===null&&(Ao=o)):(o=u,(n!==0||(p&3)!==0)&&(Xh=!0)),u=m}vn!==0&&vn!==5||yu(n),ni!==0&&(ni=0)}function bv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-dt(p),j=1<<v,V=m[v];V===-1?((j&o)===0||(j&u)!==0)&&(m[v]=Cc(j,i)):V<=i&&(n.expiredLanes|=j),p&=~j}if(i=Mt,o=at,o=xs(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(jt===2||jt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ke(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Mn(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&ke(u),Ie(o)){case 2:case 8:o=Dn;break;case 32:o=un;break;case 268435456:o=tr;break;default:o=un}return u=vv.bind(null,n),o=Le(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&ke(u),n.callbackPriority=2,n.callbackNode=null,2}function vv(n,i){if(vn!==0&&vn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Qh()&&n.callbackNode!==o)return null;var u=at;return u=xs(n,n===Mt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(tv(n,u,i),bv(n,wt()),n.callbackNode!=null&&n.callbackNode===o?vv.bind(null,n):null)}function wv(n,i){if(Qh())return null;tv(n,i,!0)}function zE(){JE(function(){(yt&6)!==0?Le(Dt,LE):yv()})}function vg(){if(ni===0){var n=fo;n===0&&(n=Os,Os<<=1,(Os&261888)===0&&(Os=256)),ni=n}return ni}function _v(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Jl(""+n)}function Nv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function UE(n,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var p=_v((m[dn]||null).action),v=u.submitter;v&&(i=(i=v[dn]||null)?_v(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var j=new Ar("action","action",null,u,m);n.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ni!==0){var V=v?Nv(m,v):new FormData(m);U0(o,{pending:!0,data:V,method:m.method,action:p},null,V)}}else typeof p=="function"&&(j.preventDefault(),V=v?Nv(m,v):new FormData(m),U0(o,{pending:!0,data:V,method:m.method,action:p},p,V))},currentTarget:m}]})}}for(var wg=0;wg<s0.length;wg++){var _g=s0[wg],BE=_g.toLowerCase(),qE=_g[0].toUpperCase()+_g.slice(1);lr(BE,"on"+qE)}lr(eb,"onAnimationEnd"),lr(tb,"onAnimationIteration"),lr(nb,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(rE,"onTransitionRun"),lr(aE,"onTransitionStart"),lr(iE,"onTransitionCancel"),lr(sb,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function jv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var j=u[v],V=j.instance,Q=j.currentTarget;if(j=j.listener,V!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(le){dh(le)}m.currentTarget=null,p=V}else for(v=0;v<u.length;v++){if(j=u[v],V=j.instance,Q=j.currentTarget,j=j.listener,V!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(le){dh(le)}m.currentTarget=null,p=V}}}}function rt(n,i){var o=i[$l];o===void 0&&(o=i[$l]=new Set);var u=n+"__bubble";o.has(u)||(Ev(i,n,2,!1),o.add(u))}function Ng(n,i,o){var u=0;i&&(u|=4),Ev(o,n,u,i)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function jg(n){if(!n[Jh]){n[Jh]=!0,kc.forEach(function(o){o!=="selectionchange"&&(FE.has(o)||Ng(o,!1,n),Ng(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jh]||(i[Jh]=!0,Ng("selectionchange",!1,i))}}function Ev(n,i,o,u){switch(ew(i)){case 2:var m=xT;break;case 8:m=yT;break;default:m=zg}o=m.bind(null,i,o,n),m=void 0,!Fi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function Eg(n,i,o,u,m){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var j=u.stateNode.containerInfo;if(j===m)break;if(v===4)for(v=u.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;j!==null;){if(v=wr(j),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){u=p=v;continue e}j=j.parentNode}}u=u.return}Pa(function(){var Q=p,le=zs(o),de=[];e:{var X=rb.get(n);if(X!==void 0){var ee=Ar,Ce=n;switch(n){case"keypress":if(Gi(o)===0)break e;case"keydown":case"keyup":ee=oh;break;case"focusin":Ce="focus",ee=Ki;break;case"focusout":Ce="blur",ee=Ki;break;case"beforeblur":case"afterblur":ee=Ki;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case eb:case tb:case nb:ee=th;break;case sb:ee=T;break;case"scroll":case"scrollend":ee=Fc;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=na;break;case"toggle":case"beforetoggle":ee=Je}var qe=(i&4)!==0,Rt=!qe&&(n==="scroll"||n==="scrollend"),F=qe?X!==null?X+"Capture":null:X;qe=[];for(var L=Q,K;L!==null;){var oe=L;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||F===null||(oe=sr(L,F),oe!=null&&qe.push(vu(L,oe,K))),Rt)break;L=L.return}0<qe.length&&(X=new ee(X,Ce,null,o,le),de.push({event:X,listeners:qe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",X&&o!==Uc&&(Ce=o.relatedTarget||o.fromElement)&&(wr(Ce)||Ce[br]))break e;if((ee||X)&&(X=le.window===le?le:(X=le.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Ce=o.relatedTarget||o.toElement,ee=Q,Ce=Ce?wr(Ce):null,Ce!==null&&(Rt=c(Ce),qe=Ce.tag,Ce!==Rt||qe!==5&&qe!==27&&qe!==6)&&(Ce=null)):(ee=null,Ce=Q),ee!==Ce)){if(qe=Hc,oe="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(qe=na,oe="onPointerLeave",F="onPointerEnter",L="pointer"),Rt=ee==null?X:ys(ee),K=Ce==null?X:ys(Ce),X=new qe(oe,L+"leave",ee,o,le),X.target=Rt,X.relatedTarget=K,oe=null,wr(le)===Q&&(qe=new qe(F,L+"enter",Ce,o,le),qe.target=K,qe.relatedTarget=Rt,oe=qe),Rt=oe,ee&&Ce)t:{for(qe=HE,F=ee,L=Ce,K=0,oe=F;oe;oe=qe(oe))K++;oe=0;for(var Ue=L;Ue;Ue=qe(Ue))oe++;for(;0<K-oe;)F=qe(F),K--;for(;0<oe-K;)L=qe(L),oe--;for(;K--;){if(F===L||L!==null&&F===L.alternate){qe=F;break t}F=qe(F),L=qe(L)}qe=null}else qe=null;ee!==null&&Tv(de,X,ee,qe,!1),Ce!==null&&Rt!==null&&Tv(de,Rt,Ce,qe,!0)}}e:{if(X=Q?ys(Q):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var mt=Fy;else if(By(X))if(Hy)mt=tE;else{mt=Z5;var Me=W5}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Xl(Q.elementType)&&(mt=Fy):mt=eE;if(mt&&(mt=mt(n,Q))){qy(de,mt,o,le);break e}Me&&Me(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Pc(X,"number",X.value)}switch(Me=Q?ys(Q):window,n){case"focusin":(By(Me)||Me.contentEditable==="true")&&(ro=Me,e0=Q,Yc=null);break;case"focusout":Yc=e0=ro=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,Wy(de,o,le);break;case"selectionchange":if(sE)break;case"keydown":case"keyup":Wy(de,o,le)}var Ze;if(xt)e:{switch(n){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else so?Qi(n,o)&&(it="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(it="onCompositionStart");it&&(kr&&o.locale!=="ko"&&(so||it!=="onCompositionStart"?it==="onCompositionEnd"&&so&&(Ze=qc()):(Sr=le,Bc="value"in Sr?Sr.value:Sr.textContent,so=!0)),Me=Wh(Q,it),0<Me.length&&(it=new Cr(it,n,null,o,le),de.push({event:it,listeners:Me}),Ze?it.data=Ze:(Ze=no(o),Ze!==null&&(it.data=Ze)))),(Ze=Bs?Q5(n,o):Y5(n,o))&&(it=Wh(Q,"onBeforeInput"),0<it.length&&(Me=new Cr("onBeforeInput","beforeinput",null,o,le),de.push({event:Me,listeners:it}),Me.data=Ze)),UE(de,n,Q,o,le)}jv(de,i)})}function vu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Wh(n,i){for(var o=i+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=sr(n,o),m!=null&&u.unshift(vu(n,m,p)),m=sr(n,i),m!=null&&u.push(vu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function HE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Tv(n,i,o,u,m){for(var p=i._reactName,v=[];o!==null&&o!==u;){var j=o,V=j.alternate,Q=j.stateNode;if(j=j.tag,V!==null&&V===u)break;j!==5&&j!==26&&j!==27||Q===null||(V=Q,m?(Q=sr(o,p),Q!=null&&v.unshift(vu(o,Q,V))):m||(Q=sr(o,p),Q!=null&&v.push(vu(o,Q,V)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var GE=/\r\n?/g,$E=/\u0000|\uFFFD/g;function Sv(n){return(typeof n=="string"?n:""+n).replace(GE,`
`).replace($E,"")}function Av(n,i){return i=Sv(i),Sv(n)===i}function kt(n,i,o,u,m,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||as(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&as(n,""+u);break;case"className":bs(n,"class",u);break;case"tabIndex":bs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":bs(n,o,u);break;case"style":zc(n,u,p);break;case"data":if(i!=="object"){bs(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Jl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&kt(n,i,"name",m.name,m,null),kt(n,i,"formEncType",m.formEncType,m,null),kt(n,i,"formMethod",m.formMethod,m,null),kt(n,i,"formTarget",m.formTarget,m,null)):(kt(n,i,"encType",m.encType,m,null),kt(n,i,"method",m.method,m,null),kt(n,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Jl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=nr);break;case"onScroll":u!=null&&rt("scroll",n);break;case"onScrollEnd":u!=null&&rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Jl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":rt("beforetoggle",n),rt("toggle",n),Ql(n,"popover",u);break;case"xlinkActuate":fn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":fn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":fn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":fn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":fn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":fn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":fn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":fn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":fn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ql(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Wd.get(o)||o,Ql(n,o,u))}}function Tg(n,i,o,u,m,p){switch(o){case"style":zc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?as(n,u):(typeof u=="number"||typeof u=="bigint")&&as(n,""+u);break;case"onScroll":u!=null&&rt("scroll",n);break;case"onScrollEnd":u!=null&&rt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),p=n[dn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ql(n,o,u)}}}function zn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",n),rt("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:kt(n,i,p,v,o,null)}}m&&kt(n,i,"srcSet",o.srcSet,o,null),u&&kt(n,i,"src",o.src,o,null);return;case"input":rt("invalid",n);var j=p=v=m=null,V=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":m=le;break;case"type":v=le;break;case"checked":V=le;break;case"defaultChecked":Q=le;break;case"value":p=le;break;case"defaultValue":j=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,i));break;default:kt(n,i,u,le,o,null)}}Yd(n,p,j,V,Q,v,m,!1);return;case"select":rt("invalid",n),u=v=p=null;for(m in o)if(o.hasOwnProperty(m)&&(j=o[m],j!=null))switch(m){case"value":p=j;break;case"defaultValue":v=j;break;case"multiple":u=j;default:kt(n,i,m,j,o,null)}i=p,o=v,n.multiple=!!u,i!=null?Da(n,!!u,i,!1):o!=null&&Da(n,!!u,o,!0);return;case"textarea":rt("invalid",n),p=m=u=null;for(v in o)if(o.hasOwnProperty(v)&&(j=o[v],j!=null))switch(v){case"value":u=j;break;case"defaultValue":m=j;break;case"children":p=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:kt(n,i,v,j,o,null)}Ma(n,u,m,p);return;case"option":for(V in o)if(o.hasOwnProperty(V)&&(u=o[V],u!=null))switch(V){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:kt(n,i,V,u,o,null)}return;case"dialog":rt("beforetoggle",n),rt("toggle",n),rt("cancel",n),rt("close",n);break;case"iframe":case"object":rt("load",n);break;case"video":case"audio":for(u=0;u<bu.length;u++)rt(bu[u],n);break;case"image":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"embed":case"source":case"link":rt("error",n),rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:kt(n,i,Q,u,o,null)}return;default:if(Xl(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&Tg(n,i,le,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&kt(n,i,j,u,o,null))}function KE(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,j=null,V=null,Q=null,le=null;for(ee in o){var de=o[ee];if(o.hasOwnProperty(ee)&&de!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=de;default:u.hasOwnProperty(ee)||kt(n,i,ee,null,u,de)}}for(var X in u){var ee=u[X];if(de=o[X],u.hasOwnProperty(X)&&(ee!=null||de!=null))switch(X){case"type":p=ee;break;case"name":m=ee;break;case"checked":Q=ee;break;case"defaultChecked":le=ee;break;case"value":v=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:ee!==de&&kt(n,i,X,ee,u,de)}}Yl(n,v,j,V,Q,le,p,m);return;case"select":ee=v=j=X=null;for(p in o)if(V=o[p],o.hasOwnProperty(p)&&V!=null)switch(p){case"value":break;case"multiple":ee=V;default:u.hasOwnProperty(p)||kt(n,i,p,null,u,V)}for(m in u)if(p=u[m],V=o[m],u.hasOwnProperty(m)&&(p!=null||V!=null))switch(m){case"value":X=p;break;case"defaultValue":j=p;break;case"multiple":v=p;default:p!==V&&kt(n,i,m,p,u,V)}i=j,o=v,u=ee,X!=null?Da(n,!!o,X,!1):!!u!=!!o&&(i!=null?Da(n,!!o,i,!0):Da(n,!!o,o?[]:"",!1));return;case"textarea":ee=X=null;for(j in o)if(m=o[j],o.hasOwnProperty(j)&&m!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:kt(n,i,j,null,u,m)}for(v in u)if(m=u[v],p=o[v],u.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":X=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&kt(n,i,v,m,u,p)}Xd(n,X,ee);return;case"option":for(var Ce in o)if(X=o[Ce],o.hasOwnProperty(Ce)&&X!=null&&!u.hasOwnProperty(Ce))switch(Ce){case"selected":n.selected=!1;break;default:kt(n,i,Ce,null,u,X)}for(V in u)if(X=u[V],ee=o[V],u.hasOwnProperty(V)&&X!==ee&&(X!=null||ee!=null))switch(V){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:kt(n,i,V,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in o)X=o[qe],o.hasOwnProperty(qe)&&X!=null&&!u.hasOwnProperty(qe)&&kt(n,i,qe,null,u,X);for(Q in u)if(X=u[Q],ee=o[Q],u.hasOwnProperty(Q)&&X!==ee&&(X!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:kt(n,i,Q,X,u,ee)}return;default:if(Xl(i)){for(var Rt in o)X=o[Rt],o.hasOwnProperty(Rt)&&X!==void 0&&!u.hasOwnProperty(Rt)&&Tg(n,i,Rt,void 0,u,X);for(le in u)X=u[le],ee=o[le],!u.hasOwnProperty(le)||X===ee||X===void 0&&ee===void 0||Tg(n,i,le,X,u,ee);return}}for(var F in o)X=o[F],o.hasOwnProperty(F)&&X!=null&&!u.hasOwnProperty(F)&&kt(n,i,F,null,u,X);for(de in u)X=u[de],ee=o[de],!u.hasOwnProperty(de)||X===ee||X==null&&ee==null||kt(n,i,de,X,u,ee)}function Iv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,v=m.initiatorType,j=m.duration;if(p&&j&&Iv(v)){for(v=0,j=m.responseEnd,u+=1;u<o.length;u++){var V=o[u],Q=V.startTime;if(Q>j)break;var le=V.transferSize,de=V.initiatorType;le&&Iv(de)&&(V=V.responseEnd,v+=le*(V<j?1:(j-Q)/(V-Q)))}if(--u,i+=8*(p+v)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Sg=null,Ag=null;function Zh(n){return n.nodeType===9?n:n.ownerDocument}function Cv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Ig(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cg=null;function YE(){var n=window.event;return n&&n.type==="popstate"?n===Cg?!1:(Cg=n,!0):(Cg=null,!1)}var Rv=typeof setTimeout=="function"?setTimeout:void 0,XE=typeof clearTimeout=="function"?clearTimeout:void 0,Dv=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dv<"u"?function(n){return Dv.resolve(null).then(n).catch(WE)}:Rv;function WE(n){setTimeout(function(){throw n})}function si(n){return n==="head"}function Mv(n,i){var o=i,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),Ro(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")wu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,wu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,j=p.nodeName;p[vr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&wu(n.ownerDocument.body);o=m}while(o);Ro(i)}function Ov(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function kg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":kg(o),Kl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function ZE(n,i,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[vr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Qs(n.nextSibling),n===null)break}return null}function eT(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Qs(n.nextSibling),n===null))return null;return n}function Vv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Qs(n.nextSibling),n===null))return null;return n}function Rg(n){return n.data==="$?"||n.data==="$~"}function Dg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function tT(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Qs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Mg=null;function Pv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Qs(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Lv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function zv(n,i,o){switch(i=Zh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function wu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Kl(n)}var Ys=new Map,Uv=new Set;function ef(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var xa=P.d;P.d={f:nT,r:sT,D:rT,C:aT,L:iT,m:lT,X:cT,S:oT,M:uT};function nT(){var n=xa.f(),i=Gh();return n||i}function sT(n){var i=Ls(n);i!==null&&i.tag===5&&i.type==="form"?s1(i):xa.r(n)}var Io=typeof document>"u"?null:document;function Bv(n,i,o){var u=Io;if(u&&typeof i=="string"&&i){var m=rs(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Uv.has(m)||(Uv.add(m),n={rel:n,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),zn(i,"link",n),hn(i),u.head.appendChild(i)))}}function rT(n){xa.D(n),Bv("dns-prefetch",n,null)}function aT(n,i){xa.C(n,i),Bv("preconnect",n,i)}function iT(n,i,o){xa.L(n,i,o);var u=Io;if(u&&n&&i){var m='link[rel="preload"][as="'+rs(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+rs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+rs(o.imageSizes)+'"]')):m+='[href="'+rs(n)+'"]';var p=m;switch(i){case"style":p=Co(n);break;case"script":p=ko(n)}Ys.has(p)||(n=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Ys.set(p,n),u.querySelector(m)!==null||i==="style"&&u.querySelector(_u(p))||i==="script"&&u.querySelector(Nu(p))||(i=u.createElement("link"),zn(i,"link",n),hn(i),u.head.appendChild(i)))}}function lT(n,i){xa.m(n,i);var o=Io;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+rs(u)+'"][href="'+rs(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ko(n)}if(!Ys.has(p)&&(n=b({rel:"modulepreload",href:n},i),Ys.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Nu(p)))return}u=o.createElement("link"),zn(u,"link",n),hn(u),o.head.appendChild(u)}}}function oT(n,i,o){xa.S(n,i,o);var u=Io;if(u&&n){var m=_r(u).hoistableStyles,p=Co(n);i=i||"default";var v=m.get(p);if(!v){var j={loading:0,preload:null};if(v=u.querySelector(_u(p)))j.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Ys.get(p))&&Og(n,o);var V=v=u.createElement("link");hn(V),zn(V,"link",n),V._p=new Promise(function(Q,le){V.onload=Q,V.onerror=le}),V.addEventListener("load",function(){j.loading|=1}),V.addEventListener("error",function(){j.loading|=2}),j.loading|=4,tf(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:j},m.set(p,v)}}}function cT(n,i){xa.X(n,i);var o=Io;if(o&&n){var u=_r(o).hoistableScripts,m=ko(n),p=u.get(m);p||(p=o.querySelector(Nu(m)),p||(n=b({src:n,async:!0},i),(i=Ys.get(m))&&Vg(n,i),p=o.createElement("script"),hn(p),zn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function uT(n,i){xa.M(n,i);var o=Io;if(o&&n){var u=_r(o).hoistableScripts,m=ko(n),p=u.get(m);p||(p=o.querySelector(Nu(m)),p||(n=b({src:n,async:!0,type:"module"},i),(i=Ys.get(m))&&Vg(n,i),p=o.createElement("script"),hn(p),zn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function qv(n,i,o,u){var m=(m=Ee.current)?ef(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Co(o.href),o=_r(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Co(o.href);var p=_r(m).hoistableStyles,v=p.get(n);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=m.querySelector(_u(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Ys.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ys.set(n,o),p||dT(m,n,o,v.state))),i&&u===null)throw Error(s(528,""));return v}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ko(o),o=_r(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Co(n){return'href="'+rs(n)+'"'}function _u(n){return'link[rel="stylesheet"]['+n+"]"}function Fv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function dT(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),zn(i,"link",o),hn(i),n.head.appendChild(i))}function ko(n){return'[src="'+rs(n)+'"]'}function Nu(n){return"script[async]"+n}function Hv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+rs(o.href)+'"]');if(u)return i.instance=u,hn(u),u;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),hn(u),zn(u,"style",m),tf(u,o.precedence,n),i.instance=u;case"stylesheet":m=Co(o.href);var p=n.querySelector(_u(m));if(p)return i.state.loading|=4,i.instance=p,hn(p),p;u=Fv(o),(m=Ys.get(m))&&Og(u,m),p=(n.ownerDocument||n).createElement("link"),hn(p);var v=p;return v._p=new Promise(function(j,V){v.onload=j,v.onerror=V}),zn(p,"link",u),i.state.loading|=4,tf(p,o.precedence,n),i.instance=p;case"script":return p=ko(o.src),(m=n.querySelector(Nu(p)))?(i.instance=m,hn(m),m):(u=o,(m=Ys.get(p))&&(u=b({},o),Vg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),hn(m),zn(m,"link",u),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,tf(u,o.precedence,n));return i.instance}function tf(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,v=0;v<u.length;v++){var j=u[v];if(j.dataset.precedence===i)p=j;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Og(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Vg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var nf=null;function Gv(n,i,o){if(nf===null){var u=new Map,m=nf=new Map;m.set(o,u)}else m=nf,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[vr]||p[Xe]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=n+v;var j=u.get(v);j?j.push(p):u.set(v,[p])}}return u}function $v(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function hT(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Kv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function fT(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Co(u.href),p=i.querySelector(_u(m));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=sf.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=p,hn(p);return}p=i.ownerDocument||i,u=Fv(u),(m=Ys.get(m))&&Og(u,m),p=p.createElement("link"),hn(p);var v=p;v._p=new Promise(function(j,V){v.onload=j,v.onerror=V}),zn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=sf.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Pg=0;function mT(n,i){return n.stylesheets&&n.count===0&&af(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&af(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&Pg===0&&(Pg=62500*QE());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&af(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Pg?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var rf=null;function af(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,rf=new Map,i.forEach(gT,n),rf=null,sf.call(n))}function gT(n,i){if(!(i.state.loading&4)){var o=rf.get(n);if(o)var u=o.get(null);else{o=new Map,rf.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}m=i.instance,v=m.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,m),o.set(v,m),this.count++,u=sf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var ju={$$typeof:U,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function pT(n,i,o,u,m,p,v,j,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.hiddenUpdates=Ps(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Qv(n,i,o,u,m,p,v,j,V,Q,le,de){return n=new pT(n,i,o,v,V,Q,le,de,j),i=1,p===!0&&(i|=24),p=ws(3,null,null,i),n.current=p,p.stateNode=n,i=p0(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},v0(p),n}function Yv(n){return n?(n=lo,n):lo}function Xv(n,i,o,u,m,p){m=Yv(m),u.context===null?u.context=m:u.pendingContext=m,u=$a(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ka(n,u,i),o!==null&&(us(o,n,i),nu(o,n,i))}function Jv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Lg(n,i){Jv(n,i),(n=n.alternate)&&Jv(n,i)}function Wv(n){if(n.tag===13||n.tag===31){var i=Ji(n,67108864);i!==null&&us(i,n,67108864),Lg(n,67108864)}}function Zv(n){if(n.tag===13||n.tag===31){var i=Ts();i=He(i);var o=Ji(n,i);o!==null&&us(o,n,i),Lg(n,i)}}var lf=!0;function xT(n,i,o,u){var m=H.T;H.T=null;var p=P.p;try{P.p=2,zg(n,i,o,u)}finally{P.p=p,H.T=m}}function yT(n,i,o,u){var m=H.T;H.T=null;var p=P.p;try{P.p=8,zg(n,i,o,u)}finally{P.p=p,H.T=m}}function zg(n,i,o,u){if(lf){var m=Ug(u);if(m===null)Eg(n,i,u,of,o),tw(n,u);else if(vT(m,n,i,o,u))u.stopPropagation();else if(tw(n,u),i&4&&-1<bT.indexOf(n)){for(;m!==null;){var p=Ls(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Vs(p.pendingLanes);if(v!==0){var j=p;for(j.pendingLanes|=2,j.entangledLanes|=2;v;){var V=1<<31-dt(v);j.entanglements[1]|=V,v&=~V}Or(p),(yt&6)===0&&(Fh=wt()+500,yu(0))}}break;case 31:case 13:j=Ji(p,2),j!==null&&us(j,p,2),Gh(),Lg(p,2)}if(p=Ug(u),p===null&&Eg(n,i,u,of,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else Eg(n,i,u,null,o)}}function Ug(n){return n=zs(n),Bg(n)}var of=null;function Bg(n){if(of=null,n=wr(n),n!==null){var i=c(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=d(i),n!==null)return n;n=null}else if(o===31){if(n=f(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return of=n,null}function ew(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(en()){case Dt:return 2;case Dn:return 8;case un:case ss:return 32;case tr:return 268435456;default:return 32}default:return 32}}var qg=!1,ri=null,ai=null,ii=null,Eu=new Map,Tu=new Map,li=[],bT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tw(n,i){switch(n){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(i.pointerId)}}function Su(n,i,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},i!==null&&(i=Ls(i),i!==null&&Wv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function vT(n,i,o,u,m){switch(i){case"focusin":return ri=Su(ri,n,i,o,u,m),!0;case"dragenter":return ai=Su(ai,n,i,o,u,m),!0;case"mouseover":return ii=Su(ii,n,i,o,u,m),!0;case"pointerover":var p=m.pointerId;return Eu.set(p,Su(Eu.get(p)||null,n,i,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,Tu.set(p,Su(Tu.get(p)||null,n,i,o,u,m)),!0}return!1}function nw(n){var i=wr(n.target);if(i!==null){var o=c(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){n.blockedOn=i,nt(n.priority,function(){Zv(o)});return}}else if(i===31){if(i=f(o),i!==null){n.blockedOn=i,nt(n.priority,function(){Zv(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Ug(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Uc=u,o.target.dispatchEvent(u),Uc=null}else return i=Ls(o),i!==null&&Wv(i),n.blockedOn=o,!1;i.shift()}return!0}function sw(n,i,o){cf(n)&&o.delete(i)}function wT(){qg=!1,ri!==null&&cf(ri)&&(ri=null),ai!==null&&cf(ai)&&(ai=null),ii!==null&&cf(ii)&&(ii=null),Eu.forEach(sw),Tu.forEach(sw)}function uf(n,i){n.blockedOn===i&&(n.blockedOn=null,qg||(qg=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wT)))}var df=null;function rw(n){df!==n&&(df=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){df===n&&(df=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],m=n[i+2];if(typeof u!="function"){if(Bg(u||o)===null)continue;break}var p=Ls(o);p!==null&&(n.splice(i,3),i-=3,U0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ro(n){function i(V){return uf(V,n)}ri!==null&&uf(ri,n),ai!==null&&uf(ai,n),ii!==null&&uf(ii,n),Eu.forEach(i),Tu.forEach(i);for(var o=0;o<li.length;o++){var u=li[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<li.length&&(o=li[0],o.blockedOn===null);)nw(o),o.blockedOn===null&&li.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],v=m[dn]||null;if(typeof p=="function")v||rw(o);else if(v){var j=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[dn]||null)j=v.formAction;else if(Bg(m)!==null)continue}else j=v.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),rw(o)}}}function aw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Fg(n){this._internalRoot=n}hf.prototype.render=Fg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Ts();Xv(o,u,n,i,null,null)},hf.prototype.unmount=Fg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Xv(n.current,2,null,n,null,null),Gh(),i[br]=null}};function hf(n){this._internalRoot=n}hf.prototype.unstable_scheduleHydration=function(n){if(n){var i=_t();n={blockedOn:null,target:n,priority:i};for(var o=0;o<li.length&&i!==0&&i<li[o].priority;o++);li.splice(o,0,n),o===0&&nw(n)}};var iw=e.version;if(iw!=="19.2.3")throw Error(s(527,iw,"19.2.3"));P.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(i),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var _T={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{tn=ff.inject(_T),Yt=ff}catch{}}return Iu.createRoot=function(n,i){if(!l(n))throw Error(s(299));var o=!1,u="",m=f1,p=m1,v=g1;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Qv(n,1,!1,null,null,o,u,null,m,p,v,aw),n[br]=i.current,jg(n),new Fg(i)},Iu.hydrateRoot=function(n,i,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=f1,v=m1,j=g1,V=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(V=o.formState)),i=Qv(n,1,!0,i,o??null,u,m,V,p,v,j,aw),i.context=Yv(null),o=i.current,u=Ts(),u=He(u),m=$a(u),m.callback=null,Ka(o,m,u),o=u,i.current.lanes=o,Zr(i,o),Or(i),n[br]=i.current,jg(n),new hf(i)},Iu.version="19.2.3",Iu}var pw;function kT(){if(pw)return $g.exports;pw=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),$g.exports=CT(),$g.exports}var RT=kT();const DT=L_(RT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OT=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),xw=a=>{const e=OT(a);return e.charAt(0).toUpperCase()+e.slice(1)},B_=(...a)=>a.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),VT=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=k.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>k.createElement("svg",{ref:g,...PT,width:e,height:e,stroke:a,strokeWidth:s?Number(t)*24/Number(e):t,className:B_("lucide",l),...!c&&!VT(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,w])=>k.createElement(x,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(a,e)=>{const t=k.forwardRef(({className:s,...l},c)=>k.createElement(LT,{ref:c,iconNode:e,className:B_(`lucide-${MT(xw(a))}`,`lucide-${a}`,s),...l}));return t.displayName=xw(a),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],UT=he("activity",zT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hx=he("arrow-left",BT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pt=he("arrow-right",qT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],wd=he("award",FT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]],er=he("backpack",HT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$T=he("ban",GT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mf=he("bell",KT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],q_=he("bold",QT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Nn=he("book-open",YT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],xm=he("book",XT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],fx=he("brain",JT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ed=he("briefcase",WT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Xo=he("calendar-days",ZT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],td=he("calendar",eS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],F_=he("chart-column",tS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mx=he("check",nS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wa=he("chevron-down",sS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pr=he("chevron-left",rS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xg=he("chevron-right",aS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nd=he("circle-alert",iS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Al=he("circle-check-big",lS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qn=he("circle-check",oS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uS=he("circle-play",cS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yw=he("circle-plus",dS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dr=he("circle-question-mark",hS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],mS=he("circle-user",fS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pS=he("circle-x",gS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],yS=he("clipboard-list",xS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],vS=he("clipboard-paste",bS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sd=he("clock",wS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],NS=he("cloud-download",_S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],_p=he("cloud-upload",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gx=he("copy",ES);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],px=he("credit-card",TS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wn=he("crown",SS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Np=he("download",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],CS=he("ellipsis",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jp=he("eye",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Jo=he("facebook",RS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],MS=he("file-plus",DS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],VS=he("file-search",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Cn=he("file-text",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],H_=he("flag",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],G_=he("flame",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],gl=he("folder-open",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qS=he("globe",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],xr=he("graduation-cap",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],GS=he("headphones",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Gt=he("house",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xx=he("info",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],YS=he("instagram",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],JS=he("key",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],_d=he("languages",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Br=he("layers",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],bw=he("layout-dashboard",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],n3=he("library",t3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],r3=he("link",s3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],vw=he("list-ordered",a3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],$_=he("list",i3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vt=he("loader-circle",l3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],K_=he("log-in",o3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Il=he("lock",c3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zf=he("log-out",u3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],fi=he("mail",d3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ep=he("map-pin",h3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],m3=he("map",f3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],ww=he("medal",g3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],x3=he("megaphone",p3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],b3=he("menu",y3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Wo=he("message-circle",v3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rd=he("message-square",w3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M5 12h14",key:"1ays0h"}]],N3=he("minus",_3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],qr=he("monitor",j3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],Q_=he("move-right",E3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Y_=he("octagon-alert",T3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],X_=he("palette",S3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],I3=he("pen-line",A3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ym=he("pen-tool",C3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],R3=he("plus",k3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],M3=he("quote",D3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Nd=he("refresh-cw",O3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],P3=he("rocket",V3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fr=he("rotate-ccw",L3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cl=he("save",z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],yx=he("school",U3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],q3=he("scroll",B3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fs=he("search",F3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_l=he("send",H3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_w=he("share-2",G3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],bx=he("shield-alert",$3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zo=he("shield-check",K3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Y3=he("smartphone",Q3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Tp=he("sparkles",X3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sp=he("square-pen",J3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vi=he("star",W3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],J_=he("tag",Z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],vx=he("target",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],nA=he("text-align-center",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],rA=he("text-align-end",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],W_=he("text-align-start",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Z_=he("timer",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],oA=he("toggle-left",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fr=he("trash-2",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dA=he("trending-up",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wx=he("triangle-alert",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Uf=he("trophy",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],gA=he("type",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],eN=he("underline",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],Bn=he("university",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Is=he("user",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Si=he("users",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],wA=he("wallet",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Nw=he("wand-sparkles",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=he("x",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],jd=he("zap",jA),EA=()=>{};var jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=function(a){const e=[];let t=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},TA=function(a){const e=[];let t=0,s=0;for(;t<a.length;){const l=a[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=a[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=a[t++],d=a[t++],f=a[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=a[t++],d=a[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},nN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const c=a[l],d=l+1<a.length,f=d?a[l+1]:0,g=l+2<a.length,x=g?a[l+2]:0,w=c>>2,b=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,M=x&63;g||(M=64,d||(N=64)),s.push(t[w],t[b],t[N],t[M])}return s.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(tN(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):TA(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const c=t[a.charAt(l++)],f=l<a.length?t[a.charAt(l)]:0;++l;const x=l<a.length?t[a.charAt(l)]:64;++l;const b=l<a.length?t[a.charAt(l)]:64;if(++l,c==null||f==null||x==null||b==null)throw new SA;const N=c<<2|f>>4;if(s.push(N),x!==64){const M=f<<4&240|x>>2;if(s.push(M),b!==64){const z=x<<6&192|b;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class SA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(a){const e=tN(a);return nN.encodeByteArray(e,!0)},sN=function(a){return AA(a).replace(/\./g,"")},rN=function(a){try{return nN.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=()=>aN().__FIREBASE_DEFAULTS__,CA=()=>{if(typeof process>"u"||typeof jw>"u")return;const a=jw.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},kA=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&rN(a[1]);return e&&JSON.parse(e)},bm=()=>{try{return EA()||IA()||CA()||kA()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},RA=a=>{var e,t;return(t=(e=bm())==null?void 0:e.emulatorHosts)==null?void 0:t[a]},iN=()=>{var a;return(a=bm())==null?void 0:a.config},lN=a=>{var e;return(e=bm())==null?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oN(a){return(await fetch(a,{credentials:"include"})).ok}const Fu={};function MA(){const a={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?a.emulator.push(e):a.prod.push(e);return a}function OA(a){let e=document.getElementById(a),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),t=!0),{created:t,element:e}}let Ew=!1;function VA(a,e){if(typeof window>"u"||typeof document>"u"||!vc(window.location.host)||Fu[a]===e||Fu[a]||Ew)return;Fu[a]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=MA().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,M){N.setAttribute("width","24"),N.setAttribute("id",M),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Ew=!0,d()},N}function w(N,M){N.setAttribute("id",M),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function b(){const N=OA(s),M=t("text"),z=document.getElementById(M)||document.createElement("span"),B=t("learnmore"),q=document.getElementById(B)||document.createElement("a"),re=t("preprendIcon"),ue=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const U=N.element;f(U),w(q,B);const fe=x();g(ue,re),U.append(ue,z,q,fe),document.body.appendChild(U)}c?(z.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function cN(){var e;const a=(e=bm())==null?void 0:e.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const a=jn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function dN(){return!cN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hN(){return!cN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _x(){try{return typeof indexedDB=="object"}catch{return!1}}function fN(){return new Promise((a,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function BA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class yr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=qA,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?FA(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new yr(l,f,s)}}function FA(a,e){return a.replace(HA,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const HA=/\{\$([^}]+)}/g;function GA(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Ai(a,e){if(a===e)return!0;const t=Object.keys(a),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=a[l],d=e[l];if(Tw(c)&&Tw(d)){if(!Ai(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function Tw(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(a){const e=[];for(const[t,s]of Object.entries(a))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Vu(a){const e={};return a.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Pu(a){const e=a.indexOf("?");if(!e)return"";const t=a.indexOf("#",e);return a.substring(e,t>0?t:void 0)}function $A(a,e){const t=new KA(a,e);return t.subscribe.bind(t)}class KA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=Jg),l.error===void 0&&(l.error=Jg),l.complete===void 0&&(l.complete=Jg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function Jg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=1e3,XA=2,JA=14400*1e3,WA=.5;function Sw(a,e=YA,t=XA){const s=e*Math.pow(t,a),l=Math.round(WA*s*(Math.random()-.5)*2);return Math.min(JA,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(a){return a&&a._delegate?a._delegate:a}class mr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new DA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tI(e))try{this.getOrInitializeService({instanceIdentifier:hl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=hl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hl){return this.instances.has(e)}getOptions(e=hl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:eI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=hl){return this.component?this.component.multipleInstances?e:hl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eI(a){return a===hl?void 0:a}function tI(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(lt||(lt={}));const sI={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},rI=lt.INFO,aI={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},iI=(a,e,...t)=>{if(e<a.logLevel)return;const s=new Date().toISOString(),l=aI[e];if(l)console[l](`[${s}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=rI,this._logHandler=iI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const lI=(a,e)=>e.some(t=>a instanceof t);let Aw,Iw;function oI(){return Aw||(Aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cI(){return Iw||(Iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mN=new WeakMap,Ap=new WeakMap,gN=new WeakMap,Wg=new WeakMap,Nx=new WeakMap;function uI(a){const e=new Promise((t,s)=>{const l=()=>{a.removeEventListener("success",c),a.removeEventListener("error",d)},c=()=>{t(wi(a.result)),l()},d=()=>{s(a.error),l()};a.addEventListener("success",c),a.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&mN.set(t,a)}).catch(()=>{}),Nx.set(e,a),e}function dI(a){if(Ap.has(a))return;const e=new Promise((t,s)=>{const l=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",d),a.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",c),a.addEventListener("error",d),a.addEventListener("abort",d)});Ap.set(a,e)}let Ip={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return Ap.get(a);if(e==="objectStoreNames")return a.objectStoreNames||gN.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function hI(a){Ip=a(Ip)}function fI(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=a.call(Zg(this),e,...t);return gN.set(s,e.sort?e.sort():[e]),wi(s)}:cI().includes(a)?function(...e){return a.apply(Zg(this),e),wi(mN.get(this))}:function(...e){return wi(a.apply(Zg(this),e))}}function mI(a){return typeof a=="function"?fI(a):(a instanceof IDBTransaction&&dI(a),lI(a,oI())?new Proxy(a,Ip):a)}function wi(a){if(a instanceof IDBRequest)return uI(a);if(Wg.has(a))return Wg.get(a);const e=mI(a);return e!==a&&(Wg.set(a,e),Nx.set(e,a)),e}const Zg=a=>Nx.get(a);function pN(a,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(a,e),f=wi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(wi(d.result),g.oldVersion,g.newVersion,wi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const gI=["get","getKey","getAll","getAllKeys","count"],pI=["put","add","delete","clear"],ep=new Map;function Cw(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(ep.get(e))return ep.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=pI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||gI.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return ep.set(e,c),c}hI(a=>({...a,get:(e,t,s)=>Cw(e,t)||a.get(e,t,s),has:(e,t)=>!!Cw(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function yI(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cp="@firebase/app",kw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new vm("@firebase/app"),bI="@firebase/app-compat",vI="@firebase/analytics-compat",wI="@firebase/analytics",_I="@firebase/app-check-compat",NI="@firebase/app-check",jI="@firebase/auth",EI="@firebase/auth-compat",TI="@firebase/database",SI="@firebase/data-connect",AI="@firebase/database-compat",II="@firebase/functions",CI="@firebase/functions-compat",kI="@firebase/installations",RI="@firebase/installations-compat",DI="@firebase/messaging",MI="@firebase/messaging-compat",OI="@firebase/performance",VI="@firebase/performance-compat",PI="@firebase/remote-config",LI="@firebase/remote-config-compat",zI="@firebase/storage",UI="@firebase/storage-compat",BI="@firebase/firestore",qI="@firebase/ai",FI="@firebase/firestore-compat",HI="firebase",GI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",$I={[Cp]:"fire-core",[bI]:"fire-core-compat",[wI]:"fire-analytics",[vI]:"fire-analytics-compat",[NI]:"fire-app-check",[_I]:"fire-app-check-compat",[jI]:"fire-auth",[EI]:"fire-auth-compat",[TI]:"fire-rtdb",[SI]:"fire-data-connect",[AI]:"fire-rtdb-compat",[II]:"fire-fn",[CI]:"fire-fn-compat",[kI]:"fire-iid",[RI]:"fire-iid-compat",[DI]:"fire-fcm",[MI]:"fire-fcm-compat",[OI]:"fire-perf",[VI]:"fire-perf-compat",[PI]:"fire-rc",[LI]:"fire-rc-compat",[zI]:"fire-gcs",[UI]:"fire-gcs-compat",[BI]:"fire-fst",[FI]:"fire-fst-compat",[qI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Map,KI=new Map,Rp=new Map;function Rw(a,e){try{a.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function Yr(a){const e=a.name;if(Rp.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;Rp.set(e,a);for(const t of Bf.values())Rw(t,a);for(const t of KI.values())Rw(t,a);return!0}function Fl(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function Xs(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new ql("app","Firebase",QI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=GI;function xN(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const s={name:kp,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw _i.create("bad-app-name",{appName:String(l)});if(t||(t=iN()),!t)throw _i.create("no-options");const c=Bf.get(l);if(c){if(Ai(t,c.options)&&Ai(s,c.config))return c;throw _i.create("duplicate-app",{appName:l})}const d=new nI(l);for(const g of Rp.values())d.addComponent(g);const f=new YI(t,s,d);return Bf.set(l,f),f}function yN(a=kp){const e=Bf.get(a);if(!e&&a===kp&&iN())return xN();if(!e)throw _i.create("no-app",{appName:a});return e}function Ws(a,e,t){let s=$I[a]??a;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(d.join(" "));return}Yr(new mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",JI=1,ad="firebase-heartbeat-store";let tp=null;function bN(){return tp||(tp=pN(XI,JI,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(ad)}catch(t){console.warn(t)}}}}).catch(a=>{throw _i.create("idb-open",{originalErrorMessage:a.message})})),tp}async function WI(a){try{const t=(await bN()).transaction(ad),s=await t.objectStore(ad).get(vN(a));return await t.done,s}catch(e){if(e instanceof yr)Na.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Na.warn(t.message)}}}async function Dw(a,e){try{const s=(await bN()).transaction(ad,"readwrite");await s.objectStore(ad).put(e,vN(a)),await s.done}catch(t){if(t instanceof yr)Na.warn(t.message);else{const s=_i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Na.warn(s.message)}}}function vN(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1024,e6=30;class t6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new s6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Mw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>e6){const d=r6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Na.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Mw(),{heartbeatsToSend:s,unsentEntries:l}=n6(this._heartbeatsCache.heartbeats),c=sN(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Na.warn(t),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function n6(a,e=ZI){const t=[];let s=a.slice();for(const l of a){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),Ow(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),Ow(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class s6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _x()?fN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ow(a){return sN(JSON.stringify({version:2,heartbeats:a})).length}function r6(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let s=1;s<a.length;s++)a[s].date<t&&(t=a[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(a){Yr(new mr("platform-logger",e=>new xI(e),"PRIVATE")),Yr(new mr("heartbeat",e=>new t6(e),"PRIVATE")),Ws(Cp,kw,a),Ws(Cp,kw,"esm2020"),Ws("fire-js","")}a6("");var i6="firebase",l6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(i6,l6,"app");function wN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o6=wN,_N=new ql("auth","Firebase",wN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new vm("@firebase/auth");function c6(a,...e){qf.logLevel<=lt.WARN&&qf.warn(`Auth (${wc}): ${a}`,...e)}function Nf(a,...e){qf.logLevel<=lt.ERROR&&qf.error(`Auth (${wc}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(a,...e){throw jx(a,...e)}function Hr(a,...e){return jx(a,...e)}function NN(a,e,t){const s={...o6(),[e]:t};return new ql("auth","Firebase",s).create(e,{appName:a.name})}function _a(a){return NN(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jx(a,...e){if(typeof a!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=a.name),a._errorFactory.create(t,...s)}return _N.create(a,...e)}function Fe(a,e,...t){if(!a)throw jx(e,...t)}function ya(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Nf(e),new Error(e)}function ja(a,e){a||ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function u6(){return Vw()==="http:"||Vw()==="https:"}function Vw(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u6()||uN()||"connection"in navigator)?navigator.onLine:!0}function h6(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.shortDelay=e,this.longDelay=t,ja(t>e,"Short delay should be less than long delay!"),this.isMobile=PA()||zA()}get(){return d6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(a,e){ja(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g6=new Td(3e4,6e4);function Aa(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function Ia(a,e,t,s,l={}){return EN(a,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=Ed({key:a.config.apiKey,...d}).slice(1),g=await a._getAdditionalHeaders();g["Content-Type"]="application/json",a.languageCode&&(g["X-Firebase-Locale"]=a.languageCode);const x={method:e,headers:g,...c};return LA()||(x.referrerPolicy="no-referrer"),a.emulatorConfig&&vc(a.emulatorConfig.host)&&(x.credentials="include"),jN.fetch()(await TN(a,a.config.apiHost,t,f),x)})}async function EN(a,e,t){a._canInitEmulator=!1;const s={...f6,...e};try{const l=new x6(a),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw gf(a,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gf(a,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw gf(a,"email-already-in-use",d);if(g==="USER_DISABLED")throw gf(a,"user-disabled",d);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw NN(a,w,x);gr(a,w)}}catch(l){if(l instanceof yr)throw l;gr(a,"network-request-failed",{message:String(l)})}}async function Sd(a,e,t,s,l={}){const c=await Ia(a,e,t,s,l);return"mfaPendingCredential"in c&&gr(a,"multi-factor-auth-required",{_serverResponse:c}),c}async function TN(a,e,t,s){const l=`${e}${t}?${s}`,c=a,d=c.config.emulator?Ex(a.config,l):`${a.config.apiScheme}://${l}`;return m6.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function p6(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Hr(this.auth,"network-request-failed")),g6.get())})}}function gf(a,e,t){const s={appName:a.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Hr(a,e,s);return l.customData._tokenResponse=t,l}function Pw(a){return a!==void 0&&a.enterprise!==void 0}class y6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return p6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function b6(a,e){return Ia(a,"GET","/v2/recaptchaConfig",Aa(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(a,e){return Ia(a,"POST","/v1/accounts:delete",e)}async function Ff(a,e){return Ia(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w6(a,e=!1){const t=$t(a),s=await t.getIdToken(e),l=Tx(s);Fe(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Hu(np(l.auth_time)),issuedAtTime:Hu(np(l.iat)),expirationTime:Hu(np(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function np(a){return Number(a)*1e3}function Tx(a){const[e,t,s]=a.split(".");if(e===void 0||t===void 0||s===void 0)return Nf("JWT malformed, contained fewer than 3 sections"),null;try{const l=rN(t);return l?JSON.parse(l):(Nf("Failed to decode base64 JWT payload"),null)}catch(l){return Nf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Lw(a){const e=Tx(a);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(a,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof yr&&_6(s)&&a.auth.currentUser===a&&await a.auth.signOut(),s}}function _6({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(a){var b;const e=a.auth,t=await a.getIdToken(),s=await id(a,Ff(e,{idToken:t}));Fe(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];a._notifyReloadListener(l);const c=(b=l.providerUserInfo)!=null&&b.length?SN(l.providerUserInfo):[],d=E6(a.providerData,c),f=a.isAnonymous,g=!(a.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Mp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(a,w)}async function j6(a){const e=$t(a);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E6(a,e){return[...a.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function SN(a){return a.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(a,e){const t=await EN(a,{},async()=>{const s=Ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=a.config,d=await TN(a,l,"/v1/token",`key=${c}`),f=await a._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return a.emulatorConfig&&vc(a.emulatorConfig.host)&&(g.credentials="include"),jN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function S6(a,e){return Ia(a,"POST","/v2/accounts:revokeToken",Aa(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=Lw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await T6(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Go;return s&&(Fe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Fe(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Fe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(a,e){Fe(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new N6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Mp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await id(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return w6(this,e)}reload(){return j6(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Hf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xs(this.auth.app))return Promise.reject(_a(this.auth));const e=await this.getIdToken();return await id(this,v6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:N,isAnonymous:M,providerData:z,stsTokenManager:B}=t;Fe(b&&B,e,"internal-error");const q=Go.fromJSON(this.name,B);Fe(typeof b=="string",e,"internal-error"),ci(s,e.name),ci(l,e.name),Fe(typeof N=="boolean",e,"internal-error"),Fe(typeof M=="boolean",e,"internal-error"),ci(c,e.name),ci(d,e.name),ci(f,e.name),ci(g,e.name),ci(x,e.name),ci(w,e.name);const re=new hr({uid:b,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:M,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:q,createdAt:x,lastLoginAt:w});return z&&Array.isArray(z)&&(re.providerData=z.map(ue=>({...ue}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,s=!1){const l=new Go;l.updateFromServerResponse(t);const c=new hr({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Hf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Fe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?SN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Go;f.updateFromIdToken(s);const g=new hr({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Mp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map;function ba(a){ja(a instanceof Function,"Expected a class definition");let e=zw.get(a);return e?(ja(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,zw.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AN.type="NONE";const Uw=AN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(a,e,t){return`firebase:${a}:${e}:${t}`}class $o{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=jf(this.userKey,l.apiKey,c),this.fullPersistenceKey=jf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ff(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new $o(ba(Uw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ba(Uw);const d=jf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const w=await x._get(d);if(w){let b;if(typeof w=="string"){const N=await Ff(e,{idToken:w}).catch(()=>{});if(!N)break;b=await hr._fromGetAccountInfoResponse(e,N,w)}else b=hr._fromJSON(e,w);x!==c&&(f=b),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new $o(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new $o(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MN(e))return"Blackberry";if(ON(e))return"Webos";if(CN(e))return"Safari";if((e.includes("chrome/")||kN(e))&&!e.includes("edge/"))return"Chrome";if(DN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=a.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function IN(a=jn()){return/firefox\//i.test(a)}function CN(a=jn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kN(a=jn()){return/crios\//i.test(a)}function RN(a=jn()){return/iemobile/i.test(a)}function DN(a=jn()){return/android/i.test(a)}function MN(a=jn()){return/blackberry/i.test(a)}function ON(a=jn()){return/webos/i.test(a)}function Sx(a=jn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function A6(a=jn()){var e;return Sx(a)&&!!((e=window.navigator)!=null&&e.standalone)}function I6(){return UA()&&document.documentMode===10}function VN(a=jn()){return Sx(a)||DN(a)||ON(a)||MN(a)||/windows phone/i.test(a)||RN(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(a,e=[]){let t;switch(a){case"Browser":t=Bw(jn());break;case"Worker":t=`${Bw(jn())}-${a}`;break;default:t=a}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(a,e={}){return Ia(a,"GET","/v2/passwordPolicy",Aa(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=6;class D6{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??R6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qw(this),this.idTokenSubscription=new qw(this),this.beforeStateQueue=new C6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_N,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ba(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ff(this,{idToken:e}),s=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Xs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xs(this.app))return Promise.reject(_a(this));const t=e?$t(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xs(this.app)?Promise.reject(_a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xs(this.app)?Promise.reject(_a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k6(this),t=new D6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await S6(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ba(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Xs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&c6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mi(a){return $t(a)}class qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=$A(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O6(a){wm=a}function LN(a){return wm.loadJS(a)}function V6(){return wm.recaptchaEnterpriseScript}function P6(){return wm.gapiScript}function L6(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class z6{constructor(){this.enterprise=new U6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class U6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const B6="recaptcha-enterprise",zN="NO_RECAPTCHA";class q6{constructor(e){this.type=B6,this.auth=Mi(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{b6(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new y6(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;Pw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(zN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z6().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&Pw(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=V6();g.length!==0&&(g+=f),LN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Fw(a,e,t,s=!1,l=!1){const c=new q6(a);let d;if(l)d=zN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Gf(a,e,t,s,l){var c;if((c=a._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Fw(a,e,t,t==="getOobCode");return s(a,d)}else return s(a,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Fw(a,e,t,t==="getOobCode");return s(a,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(a,e){const t=Fl(a,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(Ai(c,e??{}))return l;gr(l,"already-initialized")}return t.initialize({options:e})}function H6(a,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ba);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function G6(a,e,t){const s=Mi(a);Fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=UN(e),{host:d,port:f}=$6(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Fe(Ai(x,s.config.emulator)&&Ai(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,vc(d)?(oN(`${c}//${d}${g}`),VA("Auth",!0)):K6()}function UN(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function $6(a){const e=UN(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Hw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Hw(d)}}}function Hw(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function K6(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ya("not implemented")}_getIdTokenResponse(e){return ya("not implemented")}_linkToIdToken(e,t){return ya("not implemented")}_getReauthenticationResolver(e){return ya("not implemented")}}async function Q6(a,e){return Ia(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(a,e){return Sd(a,"POST","/v1/accounts:signInWithPassword",Aa(a,e))}async function X6(a,e){return Ia(a,"POST","/v1/accounts:sendOobCode",Aa(a,e))}async function J6(a,e){return X6(a,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(a,e){return Sd(a,"POST","/v1/accounts:signInWithEmailLink",Aa(a,e))}async function Z6(a,e){return Sd(a,"POST","/v1/accounts:signInWithEmailLink",Aa(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Ax{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new ld(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ld(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,t,"signInWithPassword",Y6);case"emailLink":return W6(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,s,"signUpPassword",Q6);case"emailLink":return Z6(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(a,e){return Sd(a,"POST","/v1/accounts:signInWithIdp",Aa(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="http://localhost";class kl extends Ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new kl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:eC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ed(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nC(a){const e=Vu(Pu(a)).link,t=e?Vu(Pu(e)).deep_link_id:null,s=Vu(Pu(a)).deep_link_id;return(s?Vu(Pu(s)).link:null)||s||t||e||a}class Ix{constructor(e){const t=Vu(Pu(e)),s=t.apiKey??null,l=t.oobCode??null,c=tC(t.mode??null);Fe(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=nC(e);try{return new Ix(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.providerId=_c.PROVIDER_ID}static credential(e,t){return ld._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Ix.parseLink(t);return Fe(s,"argument-error"),ld._fromEmailAndCode(e,s.code,s.tenantId)}}_c.PROVIDER_ID="password";_c.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends BN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Ad{constructor(){super("facebook.com")}static credential(e){return kl._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Ad{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kl._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return gi.credential(t,s)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Ad{constructor(){super("github.com")}static credential(e){return kl._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Ad{constructor(){super("twitter.com")}static credential(e,t){return kl._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return xi.credential(t,s)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(a,e){return Sd(a,"POST","/v1/accounts:signUp",Aa(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await hr._fromIdTokenResponse(e,s,l),d=Gw(s);return new Rl({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Gw(s);return new Rl({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Gw(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends yr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new $f(e,t,s,l)}}function qN(a,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(a,c,e,s):c})}async function rC(a,e,t=!1){const s=await id(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return Rl._forOperation(a,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(a,e,t=!1){const{auth:s}=a;if(Xs(s.app))return Promise.reject(_a(s));const l="reauthenticate";try{const c=await id(a,qN(s,l,e,a),t);Fe(c.idToken,s,"internal-error");const d=Tx(c.idToken);Fe(d,s,"internal-error");const{sub:f}=d;return Fe(a.uid===f,s,"user-mismatch"),Rl._forOperation(a,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&gr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(a,e,t=!1){if(Xs(a.app))return Promise.reject(_a(a));const s="signIn",l=await qN(a,s,e),c=await Rl._fromIdTokenResponse(a,s,l);return t||await a._updateCurrentUser(c.user),c}async function iC(a,e){return FN(Mi(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(a){const e=Mi(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lC(a,e,t){const s=Mi(a);await Gf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",J6)}async function oC(a,e,t){if(Xs(a.app))return Promise.reject(_a(a));const s=Mi(a),d=await Gf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&HN(a),g}),f=await Rl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function cC(a,e,t){return Xs(a.app)?Promise.reject(_a(a)):iC($t(a),_c.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&HN(a),s})}function uC(a,e,t,s){return $t(a).onIdTokenChanged(e,t,s)}function dC(a,e,t){return $t(a).beforeAuthStateChanged(e,t)}function hC(a,e,t,s){return $t(a).onAuthStateChanged(e,t,s)}function fC(a){return $t(a).signOut()}const Kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kf,"1"),this.storage.removeItem(Kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=1e3,gC=10;class $N extends GN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);I6()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,gC):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$N.type="LOCAL";const pC=$N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN extends GN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KN.type="SESSION";const QN=KN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new _m(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await xC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(a="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=Cx("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(b){const N=b;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function bC(a){Gr().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function vC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wC(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function _C(){return YN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firebaseLocalStorageDb",NC=1,Qf="firebaseLocalStorage",JN="fbase_key";class Id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nm(a,e){return a.transaction([Qf],e?"readwrite":"readonly").objectStore(Qf)}function jC(){const a=indexedDB.deleteDatabase(XN);return new Id(a).toPromise()}function Op(){const a=indexedDB.open(XN,NC);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const s=a.result;try{s.createObjectStore(Qf,{keyPath:JN})}catch(l){t(l)}}),a.addEventListener("success",async()=>{const s=a.result;s.objectStoreNames.contains(Qf)?e(s):(s.close(),await jC(),e(await Op()))})})}async function $w(a,e,t){const s=Nm(a,!0).put({[JN]:e,value:t});return new Id(s).toPromise()}async function EC(a,e){const t=Nm(a,!1).get(e),s=await new Id(t).toPromise();return s===void 0?null:s.value}function Kw(a,e){const t=Nm(a,!0).delete(e);return new Id(t).toPromise()}const TC=800,SC=3;class WN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>SC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(_C()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await vC(),!this.activeServiceWorker)return;this.sender=new yC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await $w(e,Kf,"1"),await Kw(e,Kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>$w(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>EC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Nm(l,!1).getAll();return new Id(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WN.type="LOCAL";const AC=WN;new Td(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(a,e){return e?ba(e):(Fe(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends Ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CC(a){return FN(a.auth,new kx(a),a.bypassAuthState)}function kC(a){const{auth:e,user:t}=a;return Fe(t,e,"internal-error"),aC(t,new kx(a),a.bypassAuthState)}async function RC(a){const{auth:e,user:t}=a;return Fe(t,e,"internal-error"),rC(t,new kx(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CC;case"linkViaPopup":case"linkViaRedirect":return RC;case"reauthViaPopup":case"reauthViaRedirect":return kC;default:gr(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Td(2e3,1e4);class Ho extends ZN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ja(this.filter.length===1,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DC.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="pendingRedirect",Ef=new Map;class OC extends ZN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const s=await VC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VC(a,e){const t=zC(e),s=LC(a);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function PC(a,e){Ef.set(a._key(),e)}function LC(a){return ba(a._redirectPersistence)}function zC(a){return jf(MC,a.config.apiKey,a.name)}async function UC(a,e,t=!1){if(Xs(a.app))return Promise.reject(_a(a));const s=Mi(a),l=IC(s,e),d=await new OC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=600*1e3;class qC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!ej(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Hr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function ej({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FC(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ej(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(a,e={}){return Ia(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$C=/^https?/;async function KC(a){if(a.config.emulator)return;const{authorizedDomains:e}=await HC(a);for(const t of e)try{if(QC(t))return}catch{}gr(a,"unauthorized-domain")}function QC(a){const e=Dp(),{protocol:t,hostname:s}=new URL(e);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&s===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!$C.test(t))return!1;if(GC.test(a))return s===a;const l=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new Td(3e4,6e4);function Yw(){const a=Gr().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function XC(a){return new Promise((e,t)=>{var l,c,d;function s(){Yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yw(),t(Hr(a,"network-request-failed"))},timeout:YC.get()})}if((c=(l=Gr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Gr().gapi)!=null&&d.load)s();else{const f=L6("iframefcb");return Gr()[f]=()=>{gapi.load?s():t(Hr(a,"network-request-failed"))},LN(`${P6()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function JC(a){return Tf=Tf||XC(a),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Td(5e3,15e3),ZC="__/auth/iframe",ek="emulator/auth/iframe",tk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sk(a){const e=a.config;Fe(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?Ex(e,ek):`https://${a.config.authDomain}/${ZC}`,s={apiKey:e.apiKey,appName:a.name,v:wc},l=nk.get(a.config.apiHost);l&&(s.eid=l);const c=a._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Ed(s).slice(1)}`}async function rk(a){const e=await JC(a),t=Gr().gapi;return Fe(t,a,"internal-error"),e.open({where:document.body,url:sk(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tk,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Hr(a,"network-request-failed"),f=Gr().setTimeout(()=>{c(d)},WC.get());function g(){Gr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ik=500,lk=600,ok="_blank",ck="http://localhost";class Xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uk(a,e,t,s=ik,l=lk){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...ak,width:s.toString(),height:l.toString(),top:c,left:d},x=jn().toLowerCase();t&&(f=kN(x)?ok:t),IN(x)&&(e=e||ck,g.scrollbars="yes");const w=Object.entries(g).reduce((N,[M,z])=>`${N}${M}=${z},`,"");if(A6(x)&&f!=="_self")return dk(e||"",f),new Xw(null);const b=window.open(e||"",f,w);Fe(b,a,"popup-blocked");try{b.focus()}catch{}return new Xw(b)}function dk(a,e){const t=document.createElement("a");t.href=a,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="__/auth/handler",fk="emulator/auth/handler",mk=encodeURIComponent("fac");async function Jw(a,e,t,s,l,c){Fe(a.config.authDomain,a,"auth-domain-config-required"),Fe(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:s,v:wc,eventId:l};if(e instanceof BN){e.setDefaultLanguage(a.languageCode),d.providerId=e.providerId||"",GA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))d[w]=b}if(e instanceof Ad){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(d.scopes=w.join(","))}a.tenantId&&(d.tid=a.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await a._getAppCheckToken(),x=g?`#${mk}=${encodeURIComponent(g)}`:"";return`${gk(a)}?${Ed(f).slice(1)}${x}`}function gk({config:a}){return a.emulator?Ex(a,fk):`https://${a.authDomain}/${hk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class pk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QN,this._completeRedirectFn=UC,this._overrideRedirectResult=PC}async _openPopup(e,t,s,l){var d;ja((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Jw(e,t,s,Dp(),l);return uk(e,c,Cx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Jw(e,t,s,Dp(),l);return bC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(ja(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await rk(e),s=new qC(e);return t.register("authEvent",l=>(Fe(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sp,{type:sp},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[sp];c!==void 0&&t(!!c),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VN()||CN()||Sx()}}const xk=pk;var Ww="@firebase/auth",Zw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vk(a){Yr(new mr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Fe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PN(a)},x=new M6(s,l,c,g);return H6(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Yr(new mr("auth-internal",e=>{const t=Mi(e.getProvider("auth").getImmediate());return(s=>new yk(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(Ww,Zw,bk(a)),Ws(Ww,Zw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=300,_k=lN("authIdTokenMaxAge")||wk;let e2=null;const Nk=a=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>_k)return;const l=t==null?void 0:t.token;e2!==l&&(e2=l,await fetch(a,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function jk(a=yN()){const e=Fl(a,"auth");if(e.isInitialized())return e.getImmediate();const t=F6(a,{popupRedirectResolver:xk,persistence:[AC,pC,QN]}),s=lN("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=Nk(c.toString());dC(t,d,()=>d(t.currentUser)),uC(t,f=>d(f))}}const l=RA("auth");return l&&G6(t,`http://${l}`),t}function Ek(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}O6({loadJS(a){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",a),s.onload=e,s.onerror=l=>{const c=Hr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",Ek().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vk("Browser");var t2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,tj;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function I(){}I.prototype=E.prototype,S.F=E.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(D,R,O){for(var C=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)C[ce-2]=arguments[ce];return E.prototype[R].apply(D,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,E,I){I||(I=0);const D=Array(16);if(typeof E=="string")for(var R=0;R<16;++R)D[R]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(R=0;R<16;++R)D[R]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=S.g[0],I=S.g[1],R=S.g[2];let O=S.g[3],C;C=E+(O^I&(R^O))+D[0]+3614090360&4294967295,E=I+(C<<7&4294967295|C>>>25),C=O+(R^E&(I^R))+D[1]+3905402710&4294967295,O=E+(C<<12&4294967295|C>>>20),C=R+(I^O&(E^I))+D[2]+606105819&4294967295,R=O+(C<<17&4294967295|C>>>15),C=I+(E^R&(O^E))+D[3]+3250441966&4294967295,I=R+(C<<22&4294967295|C>>>10),C=E+(O^I&(R^O))+D[4]+4118548399&4294967295,E=I+(C<<7&4294967295|C>>>25),C=O+(R^E&(I^R))+D[5]+1200080426&4294967295,O=E+(C<<12&4294967295|C>>>20),C=R+(I^O&(E^I))+D[6]+2821735955&4294967295,R=O+(C<<17&4294967295|C>>>15),C=I+(E^R&(O^E))+D[7]+4249261313&4294967295,I=R+(C<<22&4294967295|C>>>10),C=E+(O^I&(R^O))+D[8]+1770035416&4294967295,E=I+(C<<7&4294967295|C>>>25),C=O+(R^E&(I^R))+D[9]+2336552879&4294967295,O=E+(C<<12&4294967295|C>>>20),C=R+(I^O&(E^I))+D[10]+4294925233&4294967295,R=O+(C<<17&4294967295|C>>>15),C=I+(E^R&(O^E))+D[11]+2304563134&4294967295,I=R+(C<<22&4294967295|C>>>10),C=E+(O^I&(R^O))+D[12]+1804603682&4294967295,E=I+(C<<7&4294967295|C>>>25),C=O+(R^E&(I^R))+D[13]+4254626195&4294967295,O=E+(C<<12&4294967295|C>>>20),C=R+(I^O&(E^I))+D[14]+2792965006&4294967295,R=O+(C<<17&4294967295|C>>>15),C=I+(E^R&(O^E))+D[15]+1236535329&4294967295,I=R+(C<<22&4294967295|C>>>10),C=E+(R^O&(I^R))+D[1]+4129170786&4294967295,E=I+(C<<5&4294967295|C>>>27),C=O+(I^R&(E^I))+D[6]+3225465664&4294967295,O=E+(C<<9&4294967295|C>>>23),C=R+(E^I&(O^E))+D[11]+643717713&4294967295,R=O+(C<<14&4294967295|C>>>18),C=I+(O^E&(R^O))+D[0]+3921069994&4294967295,I=R+(C<<20&4294967295|C>>>12),C=E+(R^O&(I^R))+D[5]+3593408605&4294967295,E=I+(C<<5&4294967295|C>>>27),C=O+(I^R&(E^I))+D[10]+38016083&4294967295,O=E+(C<<9&4294967295|C>>>23),C=R+(E^I&(O^E))+D[15]+3634488961&4294967295,R=O+(C<<14&4294967295|C>>>18),C=I+(O^E&(R^O))+D[4]+3889429448&4294967295,I=R+(C<<20&4294967295|C>>>12),C=E+(R^O&(I^R))+D[9]+568446438&4294967295,E=I+(C<<5&4294967295|C>>>27),C=O+(I^R&(E^I))+D[14]+3275163606&4294967295,O=E+(C<<9&4294967295|C>>>23),C=R+(E^I&(O^E))+D[3]+4107603335&4294967295,R=O+(C<<14&4294967295|C>>>18),C=I+(O^E&(R^O))+D[8]+1163531501&4294967295,I=R+(C<<20&4294967295|C>>>12),C=E+(R^O&(I^R))+D[13]+2850285829&4294967295,E=I+(C<<5&4294967295|C>>>27),C=O+(I^R&(E^I))+D[2]+4243563512&4294967295,O=E+(C<<9&4294967295|C>>>23),C=R+(E^I&(O^E))+D[7]+1735328473&4294967295,R=O+(C<<14&4294967295|C>>>18),C=I+(O^E&(R^O))+D[12]+2368359562&4294967295,I=R+(C<<20&4294967295|C>>>12),C=E+(I^R^O)+D[5]+4294588738&4294967295,E=I+(C<<4&4294967295|C>>>28),C=O+(E^I^R)+D[8]+2272392833&4294967295,O=E+(C<<11&4294967295|C>>>21),C=R+(O^E^I)+D[11]+1839030562&4294967295,R=O+(C<<16&4294967295|C>>>16),C=I+(R^O^E)+D[14]+4259657740&4294967295,I=R+(C<<23&4294967295|C>>>9),C=E+(I^R^O)+D[1]+2763975236&4294967295,E=I+(C<<4&4294967295|C>>>28),C=O+(E^I^R)+D[4]+1272893353&4294967295,O=E+(C<<11&4294967295|C>>>21),C=R+(O^E^I)+D[7]+4139469664&4294967295,R=O+(C<<16&4294967295|C>>>16),C=I+(R^O^E)+D[10]+3200236656&4294967295,I=R+(C<<23&4294967295|C>>>9),C=E+(I^R^O)+D[13]+681279174&4294967295,E=I+(C<<4&4294967295|C>>>28),C=O+(E^I^R)+D[0]+3936430074&4294967295,O=E+(C<<11&4294967295|C>>>21),C=R+(O^E^I)+D[3]+3572445317&4294967295,R=O+(C<<16&4294967295|C>>>16),C=I+(R^O^E)+D[6]+76029189&4294967295,I=R+(C<<23&4294967295|C>>>9),C=E+(I^R^O)+D[9]+3654602809&4294967295,E=I+(C<<4&4294967295|C>>>28),C=O+(E^I^R)+D[12]+3873151461&4294967295,O=E+(C<<11&4294967295|C>>>21),C=R+(O^E^I)+D[15]+530742520&4294967295,R=O+(C<<16&4294967295|C>>>16),C=I+(R^O^E)+D[2]+3299628645&4294967295,I=R+(C<<23&4294967295|C>>>9),C=E+(R^(I|~O))+D[0]+4096336452&4294967295,E=I+(C<<6&4294967295|C>>>26),C=O+(I^(E|~R))+D[7]+1126891415&4294967295,O=E+(C<<10&4294967295|C>>>22),C=R+(E^(O|~I))+D[14]+2878612391&4294967295,R=O+(C<<15&4294967295|C>>>17),C=I+(O^(R|~E))+D[5]+4237533241&4294967295,I=R+(C<<21&4294967295|C>>>11),C=E+(R^(I|~O))+D[12]+1700485571&4294967295,E=I+(C<<6&4294967295|C>>>26),C=O+(I^(E|~R))+D[3]+2399980690&4294967295,O=E+(C<<10&4294967295|C>>>22),C=R+(E^(O|~I))+D[10]+4293915773&4294967295,R=O+(C<<15&4294967295|C>>>17),C=I+(O^(R|~E))+D[1]+2240044497&4294967295,I=R+(C<<21&4294967295|C>>>11),C=E+(R^(I|~O))+D[8]+1873313359&4294967295,E=I+(C<<6&4294967295|C>>>26),C=O+(I^(E|~R))+D[15]+4264355552&4294967295,O=E+(C<<10&4294967295|C>>>22),C=R+(E^(O|~I))+D[6]+2734768916&4294967295,R=O+(C<<15&4294967295|C>>>17),C=I+(O^(R|~E))+D[13]+1309151649&4294967295,I=R+(C<<21&4294967295|C>>>11),C=E+(R^(I|~O))+D[4]+4149444226&4294967295,E=I+(C<<6&4294967295|C>>>26),C=O+(I^(E|~R))+D[11]+3174756917&4294967295,O=E+(C<<10&4294967295|C>>>22),C=R+(E^(O|~I))+D[2]+718787259&4294967295,R=O+(C<<15&4294967295|C>>>17),C=I+(O^(R|~E))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+O&4294967295}s.prototype.v=function(S,E){E===void 0&&(E=S.length);const I=E-this.blockSize,D=this.C;let R=this.h,O=0;for(;O<E;){if(R==0)for(;O<=I;)l(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<E;)if(D[R++]=S.charCodeAt(O++),R==this.blockSize){l(this,D),R=0;break}}else for(;O<E;)if(D[R++]=S[O++],R==this.blockSize){l(this,D),R=0;break}}this.h=R,this.o+=E},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,I=0;I<4;++I)for(let D=0;D<32;D+=8)S[E++]=this.g[I]>>>D&255;return S};function c(S,E){var I=f;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=E(S)}function d(S,E){this.h=E;const I=[];let D=!0;for(let R=S.length-1;R>=0;R--){const O=S[R]|0;D&&O==E||(I[R]=O,D=!1)}this.g=I}var f={};function g(S){return-128<=S&&S<128?c(S,function(E){return new d([E|0],E<0?-1:0)}):new d([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return b;if(S<0)return q(x(-S));const E=[];let I=1;for(let D=0;S>=I;D++)E[D]=S/I|0,I*=4294967296;return new d(E,0)}function w(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return q(w(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=x(Math.pow(E,8));let D=b;for(let O=0;O<S.length;O+=8){var R=Math.min(8,S.length-O);const C=parseInt(S.substring(O,O+R),E);R<8?(R=x(Math.pow(E,R)),D=D.j(R).add(x(C))):(D=D.j(I),D=D.add(x(C)))}return D}var b=g(0),N=g(1),M=g(16777216);a=d.prototype,a.m=function(){if(B(this))return-q(this).m();let S=0,E=1;for(let I=0;I<this.g.length;I++){const D=this.i(I);S+=(D>=0?D:4294967296+D)*E,E*=4294967296}return S},a.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(z(this))return"0";if(B(this))return"-"+q(this).toString(S);const E=x(Math.pow(S,6));var I=this;let D="";for(;;){const R=fe(I,E).g;I=re(I,R.j(E));let O=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=R,z(I))return O+D;for(;O.length<6;)O="0"+O;D=O+D}},a.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function z(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function B(S){return S.h==-1}a.l=function(S){return S=re(this,S),B(S)?-1:z(S)?0:1};function q(S){const E=S.g.length,I=[];for(let D=0;D<E;D++)I[D]=~S.g[D];return new d(I,~S.h).add(N)}a.abs=function(){return B(this)?q(this):this},a.add=function(S){const E=Math.max(this.g.length,S.g.length),I=[];let D=0;for(let R=0;R<=E;R++){let O=D+(this.i(R)&65535)+(S.i(R)&65535),C=(O>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);D=C>>>16,O&=65535,C&=65535,I[R]=C<<16|O}return new d(I,I[I.length-1]&-2147483648?-1:0)};function re(S,E){return S.add(q(E))}a.j=function(S){if(z(this)||z(S))return b;if(B(this))return B(S)?q(this).j(q(S)):q(q(this).j(S));if(B(S))return q(this.j(q(S)));if(this.l(M)<0&&S.l(M)<0)return x(this.m()*S.m());const E=this.g.length+S.g.length,I=[];for(var D=0;D<2*E;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(let R=0;R<S.g.length;R++){const O=this.i(D)>>>16,C=this.i(D)&65535,ce=S.i(R)>>>16,je=S.i(R)&65535;I[2*D+2*R]+=C*je,ue(I,2*D+2*R),I[2*D+2*R+1]+=O*je,ue(I,2*D+2*R+1),I[2*D+2*R+1]+=C*ce,ue(I,2*D+2*R+1),I[2*D+2*R+2]+=O*ce,ue(I,2*D+2*R+2)}for(S=0;S<E;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=E;S<2*E;S++)I[S]=0;return new d(I,0)};function ue(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function U(S,E){this.g=S,this.h=E}function fe(S,E){if(z(E))throw Error("division by zero");if(z(S))return new U(b,b);if(B(S))return E=fe(q(S),E),new U(q(E.g),q(E.h));if(B(E))return E=fe(S,q(E)),new U(q(E.g),E.h);if(S.g.length>30){if(B(S)||B(E))throw Error("slowDivide_ only works with positive integers.");for(var I=N,D=E;D.l(S)<=0;)I=ae(I),D=ae(D);var R=pe(I,1),O=pe(D,1);for(D=pe(D,2),I=pe(I,2);!z(D);){var C=O.add(D);C.l(S)<=0&&(R=R.add(I),O=C),D=pe(D,1),I=pe(I,1)}return E=re(S,R.j(E)),new U(R,E)}for(R=b;S.l(E)>=0;){for(I=Math.max(1,Math.floor(S.m()/E.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),O=x(I),C=O.j(E);B(C)||C.l(S)>0;)I-=D,O=x(I),C=O.j(E);z(O)&&(O=N),R=R.add(O),S=re(S,C)}return new U(R,S)}a.B=function(S){return fe(this,S).h},a.and=function(S){const E=Math.max(this.g.length,S.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)&S.i(D);return new d(I,this.h&S.h)},a.or=function(S){const E=Math.max(this.g.length,S.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)|S.i(D);return new d(I,this.h|S.h)},a.xor=function(S){const E=Math.max(this.g.length,S.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)^S.i(D);return new d(I,this.h^S.h)};function ae(S){const E=S.g.length+1,I=[];for(let D=0;D<E;D++)I[D]=S.i(D)<<1|S.i(D-1)>>>31;return new d(I,S.h)}function pe(S,E){const I=E>>5;E%=32;const D=S.g.length-I,R=[];for(let O=0;O<D;O++)R[O]=E>0?S.i(O+I)>>>E|S.i(O+I+1)<<32-E:S.i(O+I);return new d(R,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,tj=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=w,Ni=d}).apply(typeof t2<"u"?t2:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nj,Lu,sj,Sf,Vp,rj,aj,ij;(function(){var a,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],y=y(T),y!=T&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&_.push([T,y[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function w(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function b(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,Z){for(var _e=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)_e[Je-2]=arguments[Je];return y.prototype[$].apply(T,_e)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function M(h){const y=h.length;if(y>0){const _=Array(y);for(let T=0;T<y;T++)_[T]=h[T];return _}return[]}function z(h,y){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const Z=$.length||0;h.length=_+Z;for(let _e=0;_e<Z;_e++)h[_+_e]=$[_e]}else h.push($)}}class B{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){d.setTimeout(()=>{throw h},0)}function re(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ue{constructor(){this.h=this.g=null}add(y,_){const T=U.get();T.set(y,_),this.h?this.h.next=T:this.g=T,this.h=T}}var U=new B(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,S=new ue,E=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(I)}};function I(){for(var h;h=re();){try{h.h.call(h.g)}catch(_){q(_)}var y=U;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}pe=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function ce(h,y){R.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(ce,R),ce.prototype.init=function(h,y){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),H=0;function P(h,y,_,T,$){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!T,this.ha=$,this.key=++H,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function W(h,y,_){for(const T in h)y.call(_,h[T],T,h)}function ge(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function A(h){const y={};for(const _ in h)y[_]=h[_];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(h,y){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let Z=0;Z<Y.length;Z++)_=Y[Z],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function be(h){this.src=h,this.g={},this.h=0}be.prototype.add=function(h,y,_,T,$){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const _e=Ee(h,y,T,$);return _e>-1?(y=h[_e],_||(y.fa=!1)):(y=new P(y,this.src,Z,!!T,$),y.fa=_,h.push(y)),y};function ie(h,y){const _=y.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,y,void 0),Z;(Z=$>=0)&&Array.prototype.splice.call(T,$,1),Z&&(ne(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ee(h,y,_,T){for(let $=0;$<h.length;++$){const Z=h[$];if(!Z.da&&Z.listener==y&&Z.capture==!!_&&Z.ha==T)return $}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),ct={};function tt(h,y,_,T,$){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)tt(h,y[Z],_,T,$);return null}return _=Ut(_),h&&h[je]?h.J(y,_,f(T)?!!T.capture:!1,$):on(h,y,_,!1,T,$)}function on(h,y,_,T,$,Z){if(!y)throw Error("Invalid event type");const _e=f($)?!!$.capture:!!$;let Je=Pe(h);if(Je||(h[Oe]=Je=new be(h)),_=Je.add(y,_,T,_e,Z),_.proxy)return _;if(T=Kt(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)O||($=_e),$===void 0&&($=!1),h.addEventListener(y.toString(),T,$);else if(h.attachEvent)h.attachEvent(we(y.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Kt(){function h(_){return y.call(h.src,h.listener,_)}const y=te;return h}function cn(h,y,_,T,$){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)cn(h,y[Z],_,T,$);else T=f(T)?!!T.capture:!!T,_=Ut(_),h&&h[je]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],_=Ee(y,_,T,$),_>-1&&(ne(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Pe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,_,T,$)),(_=h>-1?y[h]:null)&&J(_))}function J(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[je])ie(y.i,h);else{var _=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(_,T,h.capture):y.detachEvent?y.detachEvent(we(_),T):y.addListener&&y.removeListener&&y.removeListener(T),(_=Pe(y))?(ie(_,h),_.h==0&&(_.src=null,y[Oe]=null)):ne(h)}}}function we(h){return h in ct?ct[h]:ct[h]="on"+h}function te(h,y){if(h.da)h=!0;else{y=new ce(y,this);const _=h.listener,T=h.ha||h.src;h.fa&&J(h),h=_.call(T,y)}return h}function Pe(h){return h=h[Oe],h instanceof be?h:null}var Te="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ut(h){return typeof h=="function"?h:(h[Te]||(h[Te]=function(y){return h.handleEvent(y)}),h[Te])}function Ye(){D.call(this),this.i=new be(this),this.M=this,this.G=null}b(Ye,D),Ye.prototype[je]=!0,Ye.prototype.removeEventListener=function(h,y,_,T){cn(this,h,y,_,T)};function Le(h,y){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=y.type||y,typeof y=="string")y=new R(y,h);else if(y instanceof R)y.target=y.target||h;else{var $=y;y=new R(T,h),xe(y,$)}$=!0;let Z,_e;if(_)for(_e=_.length-1;_e>=0;_e--)Z=y.g=_[_e],$=ke(Z,T,!0,y)&&$;if(Z=y.g=h,$=ke(Z,T,!0,y)&&$,$=ke(Z,T,!1,y)&&$,_)for(_e=0;_e<_.length;_e++)Z=y.g=_[_e],$=ke(Z,T,!1,y)&&$}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let T=0;T<_.length;T++)ne(_[T]);delete h.g[y],h.h--}}this.G=null},Ye.prototype.J=function(h,y,_,T){return this.i.add(String(h),y,!1,_,T)},Ye.prototype.K=function(h,y,_,T){return this.i.add(String(h),y,!0,_,T)};function ke(h,y,_,T){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let Z=0;Z<y.length;++Z){const _e=y[Z];if(_e&&!_e.da&&_e.capture==_){const Je=_e.listener,nn=_e.ha||_e.src;_e.fa&&ie(h.i,_e),$=Je.call(nn,T)!==!1&&$}}return $&&!T.defaultPrevented}function ft(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Pt(h){h.g=ft(()=>{h.g=null,h.i&&(h.i=!1,Pt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class wt extends D{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(h){D.call(this),this.h=h,this.g={}}b(en,D);var Dt=[];function Dn(h){W(h.g,function(y,_){this.g.hasOwnProperty(_)&&J(y)},h),h.g={}}en.prototype.N=function(){en.Z.N.call(this),Dn(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=d.JSON.stringify,ss=d.JSON.parse,tr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ms(){}function gs(){}var tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){R.call(this,"d")}b(Yt,R);function Tn(){R.call(this,"c")}b(Tn,R);var dt={},ps=null;function Wn(){return ps=ps||new Ye}dt.Ia="serverreachability";function zi(h){R.call(this,dt.Ia,h)}b(zi,R);function Os(h){const y=Wn();Le(y,new zi(y))}dt.STAT_EVENT="statevent";function Wr(h,y){R.call(this,dt.STAT_EVENT,h),this.stat=y}b(Wr,R);function Bt(h){const y=Wn();Le(y,new Wr(y,h))}dt.Ja="timingevent";function Vs(h,y){R.call(this,dt.Ja,h),this.size=y}b(Vs,R);function xs(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Mn(){this.g=!0}Mn.prototype.ua=function(){this.g=!1};function Cc(h,y,_,T,$,Z){h.info(function(){if(h.g)if(Z){var _e="",Je=Z.split("&");for(let xt=0;xt<Je.length;xt++){var nn=Je[xt].split("=");if(nn.length>1){const qt=nn[0];nn=nn[1];const Bs=qt.split("_");_e=Bs.length>=2&&Bs[1]=="type"?_e+(qt+"="+nn+"&"):_e+(qt+"=redacted&")}}}else _e=null;else _e=Z;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+_+`
`+_e})}function Gl(h,y,_,T,$,Z,_e){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+_+`
`+Z+" "+_e})}function Ps(h,y,_,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ye(h,_)+(T?" "+T:"")})}function Zr(h,y){h.info(function(){return"TIMEOUT: "+y})}Mn.prototype.info=function(){};function ye(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var _=Z[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let _e=1;_e<T.length;_e++)T[_e]=""}}}}return un(Z)}catch{return y}}var Re={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Se={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ze;function He(){}b(He,Ms),He.prototype.g=function(){return new XMLHttpRequest},ze=new He;function Ie(h){return encodeURIComponent(String(h))}function _t(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function nt(h,y,_,T){this.j=h,this.i=y,this.l=_,this.S=T||1,this.V=new en(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var Xe={},dn={};function br(h,y,_){h.M=1,h.A=Ui(fn(y)),h.u=_,h.R=!0,$l(h,null)}function $l(h,y){h.F=Date.now(),vr(h),h.B=fn(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),Xl(_.i,"t",T),h.C=0,_=h.j.L,h.h=new $e,h.g=ih(h.j,_?y:null,!h.u),h.P>0&&(h.O=new wt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(Dt[0]=$.toString()),$=Dt);for(let Z=0;Z<$.length;Z++){const _e=tt(_,$[Z],T||y.handleEvent,!1,y.h||y);if(!_e)break;y.g[_e.key]=_e}y=h.J?A(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Os(),Cc(h.i,h.v,h.B,h.l,h.S,h.u)}nt.prototype.ba=function(h){h=h.target;const y=this.O;y&&rr(h)==3?y.j():this.Y(h)},nt.prototype.Y=function(h){try{if(h==this.g)e:{const Je=rr(this.g),nn=this.g.ya(),xt=this.g.ca();if(!(Je<3)&&(Je!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||Je!=4||nn==7||(nn==8||xt<=0?Os(3):Os(2)),wr(this);var y=this.g.ca();this.X=y;var _=Xm(this);if(this.o=y==200,Gl(this.i,this.v,this.B,this.l,this.S,Je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var Z=T;break t}}Z=null}if(h=Z)Ps(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_r(this,h);else{this.o=!1,this.m=3,Bt(12),ys(this),Ls(this);break e}}if(this.R){h=!0;let qt;for(;!this.K&&this.C<_.length;)if(qt=Kd(this,_),qt==dn){Je==4&&(this.m=4,Bt(14),h=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Xe){this.m=4,Bt(15),Ps(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Ps(this.i,this.l,qt,null),_r(this,qt);if($d(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||_.length!=0||this.h.h||(this.m=1,Bt(16),h=!1),this.o=this.o&&h,!h)Ps(this.i,this.l,_,"[Invalid Chunked Response]"),ys(this),Ls(this);else if(_.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Gc(_e),_e.P=!0,Bt(11))}}else Ps(this.i,this.l,_,null),_r(this,_);Je==4&&ys(this),this.o&&!this.K&&(Je==4?nh(this.j,this):(this.o=!1,vr(this)))}else ta(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),ys(this),Ls(this)}}}catch{}finally{}};function Xm(h){if(!$d(h))return h.g.la();const y=On(h.g);if(y==="")return"";let _="";const T=y.length,$=rr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ys(h),Ls(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<T;Z++)h.h.h=!0,_+=h.h.i.decode(y[Z],{stream:!($&&Z==T-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function $d(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Kd(h,y){var _=h.C,T=y.indexOf(`
`,_);return T==-1?dn:(_=Number(y.substring(_,T)),isNaN(_)?Xe:(T+=1,T+_>y.length?dn:(y=y.slice(T,T+_),h.C=T+_,y)))}nt.prototype.cancel=function(){this.K=!0,ys(this)};function vr(h){h.T=Date.now()+h.H,Kl(h,h.H)}function Kl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xs(x(h.aa,h),y)}function wr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}nt.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Zr(this.i,this.B),this.M!=2&&(Os(),Bt(17)),ys(this),this.m=2,Ls(this)):Kl(this,this.T-h)};function Ls(h){h.j.I==0||h.K||nh(h.j,h)}function ys(h){wr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Dn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function _r(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||jr(_.h,h))){if(!h.L&&jr(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)to(_),za(_);else break e;Ki(_),Bt(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=xs(x(_.Va,_),6e3));Nr(_.h)<=1&&_.ta&&(_.ta=void 0)}else Cr(_,11)}else if((h.L||_.g==h)&&to(_),!C(y))for($=_.Ba.g.parse(y),y=0;y<$.length;y++){let xt=$[y];const qt=xt[0];if(!(qt<=_.K))if(_.K=qt,xt=xt[1],_.I==2)if(xt[0]=="c"){_.M=xt[1],_.ba=xt[2];const Bs=xt[3];Bs!=null&&(_.ka=Bs,_.j.info("VER="+_.ka));const kr=xt[4];kr!=null&&(_.za=kr,_.j.info("SVER="+_.za));const ar=xt[5];ar!=null&&typeof ar=="number"&&ar>0&&(T=1.5*ar,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const ir=h.g;if(ir){const Qi=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var Z=T.h;Z.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Dc(Z,Z.h),Z.h=null))}if(T.G){const no=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(T.wa=no,Nt(T.J,T.G,no))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var _e=h;if(T.na=ah(T,T.L?T.ba:null,T.W),_e.L){Mc(T.h,_e);var Je=_e,nn=T.O;nn&&(Je.H=nn),Je.D&&(wr(Je),vr(Je)),T.g=_e}else eh(T);_.i.length>0&&Ir(_)}else xt[0]!="stop"&&xt[0]!="close"||Cr(_,7);else _.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?Cr(_,7):Fc(_):xt[0]!="noop"&&_.l&&_.l.qa(xt),_.A=0)}}Os(4)}catch{}}var hn=class{constructor(h,y){this.g=h,this.map=y}};function kc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nr(h){return h.h?1:h.g?h.g.size:0}function jr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Dc(h,y){h.g?h.g.add(y):h.h=y}function Mc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}kc.prototype.cancel=function(){if(this.i=Oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return M(h.i)}var Qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ql(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,Z=null;T>=0?($=h[_].substring(0,T),Z=h[_].substring(T+1)):$=h[_],y($,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function bs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bs?(this.l=h.l,Sn(this,h.j),this.o=h.o,this.g=h.g,Ra(this,h.u),this.h=h.h,Vc(this,Wd(h.i)),this.m=h.m):h&&(y=String(h).match(Qd))?(this.l=!1,Sn(this,y[1]||"",!0),this.o=Er(y[2]||""),this.g=Er(y[3]||"",!0),Ra(this,y[4]),this.h=Er(y[5]||"",!0),Vc(this,y[6]||"",!0),this.m=Er(y[7]||"")):(this.l=!1,this.i=new Ma(null,this.l))}bs.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Bi(y,Yl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Bi(y,Yl,!0),"@"),h.push(Ie(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Bi(_,_.charAt(0)=="/"?Pc:Yd,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Bi(_,Xd)),h.join("")},bs.prototype.resolve=function(h){const y=fn(this);let _=!!h.j;_?Sn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var T=h.h;if(_)Ra(y,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=y.h.lastIndexOf("/");$!=-1&&(T=y.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const Z=[];for(let _e=0;_e<$.length;){const Je=$[_e++];Je=="."?T&&_e==$.length&&Z.push(""):Je==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),T&&_e==$.length&&Z.push("")):(Z.push(Je),T=!0)}T=Z.join("/")}else T=$}return _?y.h=T:_=h.i.toString()!=="",_?Vc(y,Wd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function fn(h){return new bs(h)}function Sn(h,y,_){h.j=_?Er(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ra(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Vc(h,y,_){y instanceof Ma?(h.i=y,Jl(h.i,h.l)):(_||(y=Bi(y,Da)),h.i=new Ma(y,h.l))}function Nt(h,y,_){h.i.set(y,_)}function Ui(h){return Nt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Er(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,rs),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function rs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Yl=/[#\/\?@]/g,Yd=/[#\?:]/g,Pc=/[#\?]/g,Da=/[#\?@]/g,Xd=/#/g;function Ma(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function as(h){h.g||(h.g=new Map,h.h=0,h.i&&Ql(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}a=Ma.prototype,a.add=function(h,y){as(this),this.i=null,h=Oa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Jd(h,y){as(h),y=Oa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Lc(h,y){return as(h),y=Oa(h,y),h.g.has(y)}a.forEach=function(h,y){as(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(y,$,T,this)},this)},this)};function zc(h,y){as(h);let _=[];if(typeof y=="string")Lc(h,y)&&(_=_.concat(h.g.get(Oa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}a.set=function(h,y){return as(this),this.i=null,h=Oa(this,h),Lc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},a.get=function(h,y){return h?(h=zc(this,h),h.length>0?String(h[0]):y):y};function Xl(h,y,_){Jd(h,y),_.length>0&&(h.i=null,h.g.set(Oa(h,y),M(_)),h.h+=_.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var _=y[T];const $=Ie(_);_=zc(this,_);for(let Z=0;Z<_.length;Z++){let _e=$;_[Z]!==""&&(_e+="="+Ie(_[Z])),h.push(_e)}}return this.i=h.join("&")};function Wd(h){const y=new Ma;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Oa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Jl(h,y){y&&!h.j&&(as(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(Jd(this,T),Xl(this,$,_))},h)),h.j=y}function nr(h,y){const _=new Mn;if(d.Image){const T=new Image;T.onload=w(zs,_,"TestLoadImage: loaded",!0,y,T),T.onerror=w(zs,_,"TestLoadImage: error",!1,y,T),T.onabort=w(zs,_,"TestLoadImage: abort",!1,y,T),T.ontimeout=w(zs,_,"TestLoadImage: timeout",!1,y,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}function Uc(h,y){const _=new Mn,T=new AbortController,$=setTimeout(()=>{T.abort(),zs(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:T.signal}).then(Z=>{clearTimeout($),Z.ok?zs(_,"TestPingServer: ok",!0,y):zs(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),zs(_,"TestPingServer: error",!1,y)})}function zs(h,y,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function Va(){this.g=new tr}function Tr(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Tr,Ms),Tr.prototype.g=function(){return new qi(this.i,this.h)};function qi(h,y){Ye.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(qi,Ye),a=qi.prototype,a.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,sr(this)},a.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},a.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}a.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Pa(this):sr(this),this.readyState==3&&Wl(this)}},a.Oa=function(h){this.g&&(this.response=this.responseText=h,Pa(this))},a.Na=function(h){this.g&&(this.response=h,Pa(this))},a.ga=function(){this.g&&Pa(this)};function Pa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}a.setRequestHeader=function(h,y){this.A.append(h,y)},a.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Us(h){let y="";return W(h,function(_,T){y+=T,y+=":",y+=_,y+=`\r
`}),y}function Fi(h,y,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Us(_),typeof h=="string"?_!=null&&Ie(_):Nt(h,y,_))}function It(h){Ye.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(It,Ye);var Sr=/^https?$/i,Bc=["POST","PUT"];a=It.prototype,a.Fa=function(h){this.H=h},a.ea=function(h,y,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ze.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){Hi(this,Z);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Z of T.keys())_.set(Z,T.get(Z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Bc,y,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,_e]of _)this.g.setRequestHeader(Z,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Hi(this,Z)}};function Hi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,qc(h),ea(h)}function qc(h){h.A||(h.A=!0,Le(h,"complete"),Le(h,"error"))}a.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Le(this,"complete"),Le(this,"abort"),ea(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),It.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},a.Xa=function(){Gi(this)};function Gi(h){if(h.h&&typeof c<"u"){if(h.v&&rr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Le(h,"readystatechange"),rr(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var T;if(T=Z===0){let _e=String(h.D).match(Qd)[1]||null;!_e&&d.self&&d.self.location&&(_e=d.self.location.protocol.slice(0,-1)),T=!Sr.test(_e?_e.toLowerCase():"")}_=T}if(_)Le(h,"complete"),Le(h,"success");else{h.o=6;try{var $=rr(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",qc(h)}}finally{ea(h)}}}}function ea(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Le(h,"ready");try{_.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function rr(h){return h.g?h.g.readyState:0}a.ca=function(){try{return rr(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ss(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ta(h){const y={};h=(h.g&&rr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(C(h[T]))continue;var _=_t(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=y[$]||[];y[$]=Z,Z.push(_)}ge(y,function(T){return T.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function La(h){this.za=0,this.i=[],this.j=new Mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ar("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ar("baseRetryDelayMs",5e3,h),this.Za=Ar("retryDelaySeedMs",1e4,h),this.Ta=Ar("forwardChannelMaxRetries",2,h),this.va=Ar("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new kc(h&&h.concurrentRequestLimit),this.Ba=new Va,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=La.prototype,a.ka=8,a.I=1,a.connect=function(h,y,_,T){Bt(0),this.W=h,this.H=y||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ah(this,null,this.W),Ir(this)};function Fc(h){if(Zl(h),h.I==3){var y=h.V++,_=fn(h.J);if(Nt(_,"SID",h.M),Nt(_,"RID",y),Nt(_,"TYPE","terminate"),$i(h,_),y=new nt(h,h.j,y),y.M=2,y.A=Ui(fn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=ih(y.j,null),y.g.ea(y.A)),y.F=Date.now(),vr(y)}rh(h)}function za(h){h.g&&(Gc(h),h.g.cancel(),h.g=null)}function Zl(h){za(h),h.v&&(d.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ir(h){if(!Rc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ae||E(),pe||(ae(),pe=!0),S.add(y,h),h.D=0}}function eo(h,y){return Nr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xs(x(h.Ea,h,y),sh(h,h.D)),h.D++,!0)}a.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new nt(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=A(Z),xe(Z,this.U)):Z=this.U),this.u!==null||this.R||($.J=Z,Z=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Zd(this,$,y),_=fn(this.J),Nt(_,"RID",h),Nt(_,"CVER",22),this.G&&Nt(_,"X-HTTP-Session-Id",this.G),$i(this,_),Z&&(this.R?y="headers="+Ie(Us(Z))+"&"+y:this.u&&Fi(_,this.u,Z)),Dc(this.h,$),this.Ra&&Nt(_,"TYPE","init"),this.S?(Nt(_,"$req",y),Nt(_,"SID","null"),$.U=!0,br($,_,null)):br($,_,y),this.I=2}}else this.I==3&&(h?Hc(this,h):this.i.length==0||Rc(this.h)||Hc(this))};function Hc(h,y){var _;y?_=y.l:_=h.V++;const T=fn(h.J);Nt(T,"SID",h.M),Nt(T,"RID",_),Nt(T,"AID",h.K),$i(h,T),h.u&&h.o&&Fi(T,h.u,h.o),_=new nt(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Zd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Dc(h.h,_),br(_,T,y)}function $i(h,y){h.H&&W(h.H,function(_,T){Nt(y,T,_)}),h.l&&W({},function(_,T){Nt(y,T,_)})}function Zd(h,y,_){_=Math.min(h.i.length,_);const T=h.l?x(h.l.Ka,h.l,h):null;e:{var $=h.i;let Je=-1;for(;;){const nn=["count="+_];Je==-1?_>0?(Je=$[0].g,nn.push("ofs="+Je)):Je=0:nn.push("ofs="+Je);let xt=!0;for(let qt=0;qt<_;qt++){var Z=$[qt].g;const Bs=$[qt].map;if(Z-=Je,Z<0)Je=Math.max(0,$[qt].g-100),xt=!1;else try{Z="req"+Z+"_"||"";try{var _e=Bs instanceof Map?Bs:Object.entries(Bs);for(const[kr,ar]of _e){let ir=ar;f(ar)&&(ir=un(ar)),nn.push(Z+kr+"="+encodeURIComponent(ir))}}catch(kr){throw nn.push(Z+"type="+encodeURIComponent("_badmap")),kr}}catch{T&&T(Bs)}}if(xt){_e=nn.join("&");break e}}_e=void 0}return h=h.i.splice(0,_),y.G=h,_e}function eh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ae||E(),pe||(ae(),pe=!0),S.add(y,h),h.A=0}}function Ki(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xs(x(h.Da,h),sh(h,h.A)),h.A++,!0)}a.Da=function(){if(this.v=null,th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xs(x(this.Wa,this),h)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),za(this),th(this))};function Gc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function th(h){h.g=new nt(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=fn(h.na);Nt(y,"RID","rpc"),Nt(y,"SID",h.M),Nt(y,"AID",h.K),Nt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Nt(y,"TO",h.ia),Nt(y,"TYPE","xmlhttp"),$i(h,y),h.u&&h.o&&Fi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Ui(fn(y)),_.u=null,_.R=!0,$l(_,h)}a.Va=function(){this.C!=null&&(this.C=null,za(this),Ki(this),Bt(19))};function to(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function nh(h,y){var _=null;if(h.g==y){to(h),Gc(h),h.g=null;var T=2}else if(jr(h.h,y))_=y.G,Mc(h.h,y),T=1;else return;if(h.I!=0){if(y.o)if(T==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;T=Wn(),Le(T,new Vs(T,_)),Ir(h)}else eh(h);else if($=y.m,$==3||$==0&&y.X>0||!(T==1&&eo(h,y)||T==2&&Ki(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),$){case 1:Cr(h,5);break;case 4:Cr(h,10);break;case 3:Cr(h,6);break;default:Cr(h,2)}}}function sh(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Cr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),T=h.Ua;const $=!T;T=new bs(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Sn(T,"https"),Ui(T),$?nr(T.toString(),_):Uc(T.toString(),_)}else Bt(2);h.I=0,h.l&&h.l.pa(y),rh(h),Zl(h)}a.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function rh(h){if(h.I=0,h.ja=[],h.l){const y=Oc(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ja,y),z(h.ja,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.oa()}}function ah(h,y,_){var T=_ instanceof bs?fn(_):new bs(_);if(T.g!="")y&&(T.g=y+"."+T.g),Ra(T,T.u);else{var $=d.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const Z=new bs(null);T&&Sn(Z,T),y&&(Z.g=y),$&&Ra(Z,$),_&&(Z.h=_),T=Z}return _=h.G,y=h.wa,_&&y&&Nt(T,_,y),Nt(T,"VER",h.ka),$i(h,T),T}function ih(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new It(new Tr({ab:_})):new It(h.ma),y.Fa(h.L),y}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function lh(){}a=lh.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,y){return new Zn(h,y)};function Zn(h,y){Ye.call(this),this.g=new La(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new na(this)}b(Zn,Ye),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){Fc(this.g)},Zn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=un(h),h=_);y.i.push(new hn(y.Ya++,h)),y.I==3&&Ir(y)},Zn.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,Zn.Z.N.call(this)};function oh(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(oh,Yt);function ch(){Tn.call(this),this.status=1}b(ch,Tn);function na(h){this.g=h}b(na,lh),na.prototype.ra=function(){Le(this.g,"a")},na.prototype.qa=function(h){Le(this.g,new oh(h))},na.prototype.pa=function(h){Le(this.g,new ch)},na.prototype.oa=function(){Le(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,ij=function(){return new Ua},aj=function(){return Wn()},rj=dt,Vp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Sf=Re,Se.COMPLETE="complete",sj=Se,gs.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Lu=gs,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,nj=It}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const n2="@firebase/firestore",s2="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new vm("@firebase/firestore");function zo(){return Dl.logLevel}function me(a,...e){if(Dl.logLevel<=lt.DEBUG){const t=e.map(Rx);Dl.debug(`Firestore (${Nc}): ${a}`,...t)}}function an(a,...e){if(Dl.logLevel<=lt.ERROR){const t=e.map(Rx);Dl.error(`Firestore (${Nc}): ${a}`,...t)}}function od(a,...e){if(Dl.logLevel<=lt.WARN){const t=e.map(Rx);Dl.warn(`Firestore (${Nc}): ${a}`,...t)}}function Rx(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(a,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,lj(a,s,t)}function lj(a,e,t){let s=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw an(s),new Error(s)}function Ve(a,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,a||lj(e,l,s)}function De(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gn.UNAUTHENTICATED)))}shutdown(){}}class Ak{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ve(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $r,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $r)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new Tk(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class Ik{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ck{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Ik(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class r2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ve(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new r2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new r2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<a;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Rk(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function Ge(a,e){return a<e?-1:a>e?1:0}function Pp(a,e){const t=Math.min(a.length,e.length);for(let s=0;s<t;s++){const l=a.charAt(s),c=e.charAt(s);if(l!==c)return rp(l)===rp(c)?Ge(l,c):rp(l)?1:-1}return Ge(a.length,e.length)}const Dk=55296,Mk=57343;function rp(a){const e=a.charCodeAt(0);return e>=Dk&&e<=Mk}function ec(a,e,t){return a.length===e.length&&a.every(((s,l)=>t(s,e[l])))}function oj(a){return a+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="__name__";class Vr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Vr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Ge(e.length,t.length)}static compareSegments(e,t){const s=Vr.isNumericId(e),l=Vr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Vr.extractNumericId(e).compare(Vr.extractNumericId(t)):Pp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class bt extends Vr{construct(e,t,s){return new bt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new bt(t)}static emptyPath(){return new bt([])}}const Ok=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Vr{construct(e,t,s){return new Qt(e,t,s)}static isValidIdentifier(e){return Ok.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a2}static keyField(){return new Qt([a2])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new ve(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ve(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new ve(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(bt.fromString(e))}static fromName(e){return new Ne(bt.fromString(e).popFirst(5))}static empty(){return new Ne(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(a,e,t){if(!t)throw new ve(se.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Vk(a,e,t,s){if(e===!0&&s===!0)throw new ve(se.INVALID_ARGUMENT,`${a} and ${t} cannot be used together.`)}function i2(a){if(!Ne.isDocumentKey(a))throw new ve(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function l2(a){if(Ne.isDocumentKey(a))throw new ve(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function uj(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function jm(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Ae(12329,{type:typeof a})}function Yn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new ve(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jm(a);throw new ve(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return a}function Pk(a,e){if(e<=0)throw new ve(se.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(a,e){const t={typeString:a};return e&&(t.value=e),t}function Cd(a,e){if(!uj(a))throw new ve(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in a)){t=`JSON missing required field: '${s}'`;break}const d=a[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ve(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=-62135596800,c2=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*c2);return new Tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o2)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c2}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cd(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:bn("string",Tt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Tt(0,0))}static max(){return new Be(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-1;class Yf{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Lp(a){return a.fields.find((e=>e.kind===2))}function fl(a){return a.fields.filter((e=>e.kind!==2))}Yf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class cd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cd(0,Rs.min())}}function dj(a,e){const t=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=Be.fromTimestamp(s===1e9?new Tt(t+1,0):new Tt(t,s));return new Rs(l,Ne.empty(),e)}function hj(a){return new Rs(a.readTime,a.key,tc)}class Rs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Rs(Be.min(),Ne.empty(),tc)}static max(){return new Rs(Be.max(),Ne.empty(),tc)}}function Mx(a,e){let t=a.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(a.documentKey,e.documentKey),t!==0?t:Ge(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(a){if(a.code!==se.FAILED_PRECONDITION||a.message!==fj)throw a;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((l=>l?G.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((w=>{d[x]=w,++f,f===c&&s(d)}),(w=>l(w)))}}))}static doWhile(e,t){return new G(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="SimpleDb";class Em{static open(e,t,s,l){try{return new Em(t,e.transaction(l,s))}catch(c){throw new Gu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new $r,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Ox(s.target.error);this.S.reject(new Gu(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(Ss,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zk(t)}}class ji{static delete(e){return me(Ss,"Removing database:",e),pl(aN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_x())return!1;if(ji.F())return!0;const e=jn(),t=ji.M(e),s=0<t&&t<10,l=gj(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,ji.M(jn())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(Ss,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new Gu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new ve(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new ve(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Gu(e,d))},l.onupgradeneeded=c=>{me(Ss,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{me(Ss,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=Em.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),G.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(me(Ss,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gj(a){const e=a.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Lk{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return pl(this.U.delete())}}class Gu extends ve{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vi(a){return a.name==="IndexedDbTransactionError"}class zk{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(me(Ss,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(me(Ss,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),pl(s)}add(e){return me(Ss,"ADD",this.store.name,e,e),pl(this.store.add(e))}get(e){return pl(this.store.get(e)).next((t=>(t===void 0&&(t=null),me(Ss,"GET",this.store.name,e,t),t)))}delete(e){return me(Ss,"DELETE",this.store.name,e),pl(this.store.delete(e))}count(){return me(Ss,"COUNT",this.store.name),pl(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new G(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new G(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){me(Ss,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new G(((s,l)=>{t.onerror=c=>{const d=Ox(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new G(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new Lk(f),x=t(f.primaryKey,f.value,g);if(x instanceof G){const w=x.catch((b=>(g.done(),G.reject(b))));s.push(w)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>G.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pl(a){return new G(((e,t)=>{a.onsuccess=s=>{const l=s.target.result;e(l)},a.onerror=s=>{const l=Ox(s.target.error);t(l)}}))}let u2=!1;function Ox(a){const e=ji.M(jn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(t)>=0){const s=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return u2||(u2=!0,setTimeout((()=>{throw s}),0)),s}}return a}const $u="IndexBackfiller";class Uk{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me($u,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();me($u,`Documents written: ${t}`)}catch(t){Vi(t)?me($u,"Ignoring IndexedDB error during index backfill: ",t):await Oi(t)}await this.re(6e4)}))}}class Bk{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return G.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return me($u,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(me($u,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=hj(c);Mx(d,s)>0&&(s=d)})),new Rs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ds.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=-1;function Tm(a){return a==null}function ud(a){return a===0&&1/a==-1/0}function pj(a){return typeof a=="number"&&Number.isInteger(a)&&!ud(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="";function Xn(a){let e="";for(let t=0;t<a.length;t++)e.length>0&&(e=d2(e)),e=qk(a.get(t),e);return d2(e)}function qk(a,e){let t=e;const s=a.length;for(let l=0;l<s;l++){const c=a.charAt(l);switch(c){case"\0":t+="";break;case Xf:t+="";break;default:t+=c}}return t}function d2(a){return a+Xf+""}function zr(a){const e=a.length;if(Ve(e>=2,64408,{path:a}),e===2)return Ve(a.charAt(0)===Xf&&a.charAt(1)==="",56145,{path:a}),bt.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=a.indexOf(Xf,c);switch((d<0||d>t)&&Ae(50515,{path:a}),a.charAt(d+1)){case"":const f=a.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=a.substring(c,d),l+="\0";break;case"":l+=a.substring(c,d+1);break;default:Ae(61167,{path:a})}c=d+2}return new bt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="remoteDocuments",kd="owner",Do="owner",dd="mutationQueues",Fk="userId",ur="mutations",h2="batchId",vl="userMutationsIndex",f2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(a,e){return[a,Xn(e)]}function xj(a,e,t){return[a,Xn(e),t]}const Hk={},nc="documentMutations",Jf="remoteDocumentsV14",Gk=["prefixPath","collectionGroup","readTime","documentId"],Cf="documentKeyIndex",$k=["prefixPath","collectionGroup","documentId"],yj="collectionGroupIndex",Kk=["collectionGroup","readTime","prefixPath","documentId"],hd="remoteDocumentGlobal",zp="remoteDocumentGlobalKey",sc="targets",bj="queryTargetsIndex",Qk=["canonicalId","targetId"],rc="targetDocuments",Yk=["targetId","path"],Vx="documentTargetsIndex",Xk=["path","targetId"],Wf="targetGlobalKey",jl="targetGlobal",fd="collectionParents",Jk=["collectionId","parent"],ac="clientMetadata",Wk="clientId",Sm="bundles",Zk="bundleId",Am="namedQueries",eR="name",Px="indexConfiguration",tR="indexId",Up="collectionGroupIndex",nR="collectionGroup",Ku="indexState",sR=["indexId","uid"],vj="sequenceNumberIndex",rR=["uid","sequenceNumber"],Qu="indexEntries",aR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wj="documentKeyIndex",iR=["indexId","uid","orderedDocumentKey"],Im="documentOverlays",lR=["userId","collectionPath","documentId"],Bp="collectionPathOverlayIndex",oR=["userId","collectionPath","largestBatchId"],_j="collectionGroupOverlayIndex",cR=["userId","collectionGroup","largestBatchId"],Lx="globals",uR="name",Nj=[dd,ur,nc,ml,sc,kd,jl,rc,ac,hd,fd,Sm,Am],dR=[...Nj,Im],jj=[dd,ur,nc,Jf,sc,kd,jl,rc,ac,hd,fd,Sm,Am,Im],Ej=jj,zx=[...Ej,Px,Ku,Qu],hR=zx,Tj=[...zx,Lx],fR=Tj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp extends mj{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function En(a,e){const t=De(a);return ji.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(a){let e=0;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e++;return e}function Pi(a,e){for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e(t,a[t])}function Sj(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xf(this.root,e,this.comparator,!0)}}class xf{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??Un.RED,this.left=l??Un.EMPTY,this.right=c??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new Un(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Un.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g2(this.data.getIterator())}getIteratorFrom(e){return new g2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class g2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(a){return a.hasNext()?a.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new hs([])}unionWith(e){let t=new At(Qt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Aj("Invalid base64 string: "+c):c}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const mR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(a){if(Ve(!!a,39018),typeof a=="string"){let e=0;const t=mR.exec(a);if(Ve(!!t,46558,{timestamp:a}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ht(a.seconds),nanos:Ht(a.nanos)}}function Ht(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Ta(a){return typeof a=="string"?ln.fromBase64String(a):ln.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="server_timestamp",Cj="__type__",kj="__previous_value__",Rj="__local_write_time__";function Ux(a){var t,s;return((s=(((t=a==null?void 0:a.mapValue)==null?void 0:t.fields)||{})[Cj])==null?void 0:s.stringValue)===Ij}function Cm(a){const e=a.mapValue.fields[kj];return Ux(e)?Cm(e):e}function md(a){const e=Ea(a.mapValue.fields[Rj].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,s,l,c,d,f,g,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=w}}const Zf="(default)";class Ml{constructor(e,t){this.projectId=e,this.database=t||Zf}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Zf}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="__type__",Dj="__max__",bi={mapValue:{fields:{__type__:{stringValue:Dj}}}},qx="__vector__",ic="value",kf={nullValue:"NULL_VALUE"};function Ii(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ux(a)?4:Mj(a)?9007199254740991:km(a)?10:11:Ae(28295,{value:a})}function Xr(a,e){if(a===e)return!0;const t=Ii(a);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return md(a).isEqual(md(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Ea(l.timestampValue),f=Ea(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(l,c){return Ta(l.bytesValue).isEqual(Ta(c.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(l,c){return Ht(l.geoPointValue.latitude)===Ht(c.geoPointValue.latitude)&&Ht(l.geoPointValue.longitude)===Ht(c.geoPointValue.longitude)})(a,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Ht(l.integerValue)===Ht(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Ht(l.doubleValue),f=Ht(c.doubleValue);return d===f?ud(d)===ud(f):isNaN(d)&&isNaN(f)}return!1})(a,e);case 9:return ec(a.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(m2(d)!==m2(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Xr(d[g],f[g])))return!1;return!0})(a,e);default:return Ae(52216,{left:a})}}function gd(a,e){return(a.values||[]).find((t=>Xr(t,e)))!==void 0}function Ci(a,e){if(a===e)return 0;const t=Ii(a),s=Ii(e);if(t!==s)return Ge(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(a.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=Ht(c.integerValue||c.doubleValue),g=Ht(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(a,e);case 3:return p2(a.timestampValue,e.timestampValue);case 4:return p2(md(a),md(e));case 5:return Pp(a.stringValue,e.stringValue);case 6:return(function(c,d){const f=Ta(c),g=Ta(d);return f.compareTo(g)})(a.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const w=Ge(f[x],g[x]);if(w!==0)return w}return Ge(f.length,g.length)})(a.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=Ge(Ht(c.latitude),Ht(d.latitude));return f!==0?f:Ge(Ht(c.longitude),Ht(d.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return x2(a.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,M,z,B;const f=c.fields||{},g=d.fields||{},x=(N=f[ic])==null?void 0:N.arrayValue,w=(M=g[ic])==null?void 0:M.arrayValue,b=Ge(((z=x==null?void 0:x.values)==null?void 0:z.length)||0,((B=w==null?void 0:w.values)==null?void 0:B.length)||0);return b!==0?b:x2(x,w)})(a.mapValue,e.mapValue);case 11:return(function(c,d){if(c===bi.mapValue&&d===bi.mapValue)return 0;if(c===bi.mapValue)return 1;if(d===bi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},w=Object.keys(x);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const N=Pp(g[b],w[b]);if(N!==0)return N;const M=Ci(f[g[b]],x[w[b]]);if(M!==0)return M}return Ge(g.length,w.length)})(a.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function p2(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Ge(a,e);const t=Ea(a),s=Ea(e),l=Ge(t.seconds,s.seconds);return l!==0?l:Ge(t.nanos,s.nanos)}function x2(a,e){const t=a.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ci(t[l],s[l]);if(c)return c}return Ge(t.length,s.length)}function lc(a){return Fp(a)}function Fp(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(t){const s=Ea(t);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(t){return Ta(t).toBase64()})(a.bytesValue):"referenceValue"in a?(function(t){return Ne.fromName(t).toString()})(a.referenceValue):"geoPointValue"in a?(function(t){return`geo(${t.latitude},${t.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Fp(c);return s+"]"})(a.arrayValue):"mapValue"in a?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Fp(t.fields[d])}`;return l+"}"})(a.mapValue):Ae(61005,{value:a})}function Rf(a){switch(Ii(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cm(a);return e?16+Rf(e):16;case 5:return 2*a.stringValue.length;case 6:return Ta(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Rf(c)),0)})(a.arrayValue);case 10:case 11:return(function(s){let l=0;return Pi(s.fields,((c,d)=>{l+=c.length+Rf(d)})),l})(a.mapValue);default:throw Ae(13486,{value:a})}}function pd(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Hp(a){return!!a&&"integerValue"in a}function xd(a){return!!a&&"arrayValue"in a}function y2(a){return!!a&&"nullValue"in a}function b2(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Df(a){return!!a&&"mapValue"in a}function km(a){var t,s;return((s=(((t=a==null?void 0:a.mapValue)==null?void 0:t.fields)||{})[Bx])==null?void 0:s.stringValue)===qx}function Yu(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Pi(a.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Yu(s))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(a.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(a.arrayValue.values[t]);return e}return{...a}}function Mj(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===Dj}const Oj={mapValue:{fields:{[Bx]:{stringValue:qx},[ic]:{arrayValue:{}}}}};function pR(a){return"nullValue"in a?kf:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?pd(Ml.empty(),Ne.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?km(a)?Oj:{mapValue:{}}:Ae(35942,{value:a})}function xR(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?pd(Ml.empty(),Ne.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Oj:"mapValue"in a?km(a)?{mapValue:{}}:bi:Ae(61959,{value:a})}function v2(a,e){const t=Ci(a.value,e.value);return t!==0?t:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function w2(a,e){const t=Ci(a.value,e.value);return t!==0?t:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=Qt.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Yu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];Df(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Pi(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Kn(Yu(this.value))}}function Vj(a){const e=[];return Pi(a.fields,((t,s)=>{const l=new Qt([t]);if(Df(s)){const c=Vj(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new hs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Wt(e,0,Be.min(),Be.min(),Be.min(),Kn.empty(),0)}static newFoundDocument(e,t,s,l){return new Wt(e,1,t,Be.min(),s,l,0)}static newNoDocument(e,t){return new Wt(e,2,t,Be.min(),Be.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Be.min(),Be.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.position=e,this.inclusive=t}}function _2(a,e,t){let s=0;for(let l=0;l<a.position.length;l++){const c=e[l],d=a.position[l];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(d.referenceValue),t.key):s=Ci(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function N2(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let t=0;t<a.position.length;t++)if(!Xr(a.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function yR(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{}class ot extends Pj{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new bR(e,t,s):t==="array-contains"?new _R(e,s):t==="in"?new Fj(e,s):t==="not-in"?new NR(e,s):t==="array-contains-any"?new jR(e,s):new ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new vR(e,s):new wR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ci(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends Pj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new St(e,t)}matches(e){return cc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cc(a){return a.op==="and"}function Gp(a){return a.op==="or"}function Fx(a){return Lj(a)&&cc(a)}function Lj(a){for(const e of a.filters)if(e instanceof St)return!1;return!0}function $p(a){if(a instanceof ot)return a.field.canonicalString()+a.op.toString()+lc(a.value);if(Fx(a))return a.filters.map((e=>$p(e))).join(",");{const e=a.filters.map((t=>$p(t))).join(",");return`${a.op}(${e})`}}function zj(a,e){return a instanceof ot?(function(s,l){return l instanceof ot&&s.op===l.op&&s.field.isEqual(l.field)&&Xr(s.value,l.value)})(a,e):a instanceof St?(function(s,l){return l instanceof St&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&zj(d,l.filters[f])),!0):!1})(a,e):void Ae(19439)}function Uj(a,e){const t=a.filters.concat(e);return St.create(t,a.op)}function Bj(a){return a instanceof ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`})(a):a instanceof St?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bj).join(" ,")+"}"})(a):"Filter"}class bR extends ot{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class vR extends ot{constructor(e,t){super(e,"in",t),this.keys=qj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wR extends ot{constructor(e,t){super(e,"not-in",t),this.keys=qj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qj(a,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class _R extends ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xd(t)&&gd(t.arrayValue,this.value)}}class Fj extends ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}}class NR extends ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gd(this.value.arrayValue,t)}}class jR extends ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>gd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Kp(a,e=null,t=[],s=[],l=null,c=null,d=null){return new ER(a,e,t,s,l,c,d)}function Ol(a){const e=De(a);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>$p(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>lc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>lc(s))).join(",")),e.Te=t}return e.Te}function Rd(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<a.orderBy.length;t++)if(!yR(a.orderBy[t],e.orderBy[t]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let t=0;t<a.filters.length;t++)if(!zj(a.filters[t],e.filters[t]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!N2(a.startAt,e.startAt)&&N2(a.endAt,e.endAt)}function em(a){return Ne.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function tm(a,e){return a.filters.filter((t=>t instanceof ot&&t.field.isEqual(e)))}function j2(a,e,t){let s=kf,l=!0;for(const c of tm(a,e)){let d=kf,f=!0;switch(c.op){case"<":case"<=":d=pR(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=kf}v2({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<a.orderBy.length;++c)if(a.orderBy[c].field.isEqual(e)){const d=t.position[c];v2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function E2(a,e,t){let s=bi,l=!0;for(const c of tm(a,e)){let d=bi,f=!0;switch(c.op){case">=":case">":d=xR(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=bi}w2({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<a.orderBy.length;++c)if(a.orderBy[c].field.isEqual(e)){const d=t.position[c];w2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hj(a,e,t,s,l,c,d,f){return new jc(a,e,t,s,l,c,d,f)}function Dd(a){return new jc(a)}function T2(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function Gj(a){return a.collectionGroup!==null}function Xu(a){const e=De(a);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new At(Qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new yd(c,s))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new yd(Qt.keyField(),s))}return e.Ie}function Cs(a){const e=De(a);return e.Ee||(e.Ee=TR(e,Xu(a))),e.Ee}function TR(a,e){if(a.limitType==="F")return Kp(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new yd(l.field,c)}));const t=a.endAt?new oc(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new oc(a.startAt.position,a.startAt.inclusive):null;return Kp(a.path,a.collectionGroup,e,a.filters,a.limit,t,s)}}function Qp(a,e){const t=a.filters.concat([e]);return new jc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),t,a.limit,a.limitType,a.startAt,a.endAt)}function nm(a,e,t){return new jc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,t,a.startAt,a.endAt)}function Rm(a,e){return Rd(Cs(a),Cs(e))&&a.limitType===e.limitType}function $j(a){return`${Ol(Cs(a))}|lt:${a.limitType}`}function Uo(a){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>Bj(l))).join(", ")}]`),Tm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>lc(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>lc(l))).join(",")),`Target(${s})`})(Cs(a))}; limitType=${a.limitType})`}function Md(a,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(a,e)&&(function(s,l){for(const c of Xu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(a,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(a,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=_2(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Xu(s),l)||s.endAt&&!(function(d,f,g){const x=_2(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Xu(s),l))})(a,e)}function Kj(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Qj(a){return(e,t)=>{let s=!1;for(const l of Xu(a)){const c=SR(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function SR(a,e,t){const s=a.field.isKeyField()?Ne.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ci(g,x):Ae(42886)})(a.field,e,t);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return Sj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new Vt(Ne.comparator);function As(){return AR}const Yj=new Vt(Ne.comparator);function zu(...a){let e=Yj;for(const t of a)e=e.insert(t.key,t);return e}function Xj(a){let e=Yj;return a.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ur(){return Ju()}function Jj(){return Ju()}function Ju(){return new Ca((a=>a.toString()),((a,e)=>a.isEqual(e)))}const IR=new Vt(Ne.comparator),CR=new At(Ne.comparator);function et(...a){let e=CR;for(const t of a)e=e.add(t);return e}const kR=new At(Ge);function Hx(){return kR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function Wj(a){return{integerValue:""+a}}function Zj(a,e){return pj(e)?Wj(e):Gx(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function RR(a,e,t){return a instanceof uc?(function(l,c){const d={fields:{[Cj]:{stringValue:Ij},[Rj]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Ux(c)&&(c=Cm(c)),c&&(d.fields[kj]=c),{mapValue:d}})(t,e):a instanceof dc?t4(a,e):a instanceof hc?n4(a,e):(function(l,c){const d=e4(l,c),f=S2(d)+S2(l.Ae);return Hp(d)&&Hp(l.Ae)?Wj(f):Gx(l.serializer,f)})(a,e)}function DR(a,e,t){return a instanceof dc?t4(a,e):a instanceof hc?n4(a,e):t}function e4(a,e){return a instanceof fc?(function(s){return Hp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class uc extends Dm{}class dc extends Dm{constructor(e){super(),this.elements=e}}function t4(a,e){const t=s4(e);for(const s of a.elements)t.some((l=>Xr(l,s)))||t.push(s);return{arrayValue:{values:t}}}class hc extends Dm{constructor(e){super(),this.elements=e}}function n4(a,e){let t=s4(e);for(const s of a.elements)t=t.filter((l=>!Xr(l,s)));return{arrayValue:{values:t}}}class fc extends Dm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function S2(a){return Ht(a.integerValue||a.doubleValue)}function s4(a){return xd(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.field=e,this.transform=t}}function MR(a,e){return a.field.isEqual(e.field)&&(function(s,l){return s instanceof dc&&l instanceof dc||s instanceof hc&&l instanceof hc?ec(s.elements,l.elements,Xr):s instanceof fc&&l instanceof fc?Xr(s.Ae,l.Ae):s instanceof uc&&l instanceof uc})(a.transform,e.transform)}class OR{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Mm{}function r4(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new Od(a.key,_n.none()):new Ec(a.key,a.data,_n.none());{const t=a.data,s=Kn.empty();let l=new At(Qt.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ka(a.key,s,new hs(l.toArray()),_n.none())}}function VR(a,e,t){a instanceof Ec?(function(l,c,d){const f=l.value.clone(),g=I2(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(a,e,t):a instanceof ka?(function(l,c,d){if(!Mf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=I2(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(a4(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(a,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Wu(a,e,t,s){return a instanceof Ec?(function(c,d,f,g){if(!Mf(c.precondition,d))return f;const x=c.value.clone(),w=C2(c.fieldTransforms,g,d);return x.setAll(w),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(a,e,t,s):a instanceof ka?(function(c,d,f,g){if(!Mf(c.precondition,d))return f;const x=C2(c.fieldTransforms,g,d),w=d.data;return w.setAll(a4(c)),w.setAll(x),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(a,e,t,s):(function(c,d,f){return Mf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(a,e,t)}function PR(a,e){let t=null;for(const s of a.fieldTransforms){const l=e.data.field(s.field),c=e4(s.transform,l||null);c!=null&&(t===null&&(t=Kn.empty()),t.set(s.field,c))}return t||null}function A2(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&ec(s,l,((c,d)=>MR(c,d)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Ec extends Mm{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ka extends Mm{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function a4(a){const e=new Map;return a.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=a.data.field(t);e.set(t,s)}})),e}function I2(a,e,t){const s=new Map;Ve(a.length===t.length,32656,{Re:t.length,Ve:a.length});for(let l=0;l<t.length;l++){const c=a[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,DR(d,f,t[l]))}return s}function C2(a,e,t){const s=new Map;for(const l of a){const c=l.transform,d=t.data.field(l.field);s.set(l.field,RR(c,d,e))}return s}class Od extends Mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i4 extends Mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&VR(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Wu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Wu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jj();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=r4(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,((t,s)=>A2(t,s)))&&ec(this.baseMutations,e.baseMutations,((t,s)=>A2(t,s)))}}class Qx{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){Ve(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return IR})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Qx(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,ht;function zR(a){switch(a){case se.OK:return Ae(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ae(15467,{code:a})}}function l4(a){if(a===void 0)return an("GRPC error has no .code"),se.UNKNOWN;switch(a){case yn.OK:return se.OK;case yn.CANCELLED:return se.CANCELLED;case yn.UNKNOWN:return se.UNKNOWN;case yn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case yn.INTERNAL:return se.INTERNAL;case yn.UNAVAILABLE:return se.UNAVAILABLE;case yn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case yn.NOT_FOUND:return se.NOT_FOUND;case yn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case yn.ABORTED:return se.ABORTED;case yn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case yn.DATA_LOSS:return se.DATA_LOSS;default:return Ae(39323,{code:a})}}(ht=yn||(yn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Ni([4294967295,4294967295],0);function k2(a){const e=UR().encode(a),t=new tj;return t.update(e),new Uint8Array(t.digest())}function R2(a){const e=new DataView(a.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ni([t,s],0),new Ni([l,c],0)]}class Xx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(s<0)throw new Uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ni.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(Ni.fromNumber(s)));return l.compare(BR)===1&&(l=new Ni([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=k2(e),[s,l]=R2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Xx(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=k2(e),[s,l]=R2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,Pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Vd(Be.min(),l,new Vt(Ge),As(),et())}}class Pd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Pd(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class o4{constructor(e,t){this.targetId=e,this.Ce=t}}class c4{constructor(e,t,s=ln.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class D2{constructor(){this.ve=0,this.Fe=M2(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),s=et();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Ae(38017,{changeType:c})}})),new Pd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=M2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qR{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=yf(),this.He=yf(),this.Ye=new Vt(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(em(c))if(s===0){const d=new Ne(c.path);this.et(t,d,Wt.newNoDocument(d,Be.min()))}else Ve(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=Ta(s).toUint8Array()}catch(g){if(g instanceof Aj)return od("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Xx(d,l,c)}catch(g){return od(g instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&em(f.target)){const g=new Ne(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Wt.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=et();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Vd(e,t,this.Ye,this.je,s);return this.je=As(),this.Je=yf(),this.He=yf(),this.Ye=new Vt(Ge),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new D2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new At(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new At(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new D2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yf(){return new Vt(Ne.comparator)}function M2(){return new Vt(Ne.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},HR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class $R{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(a,e){return a.useProto3Json||Tm(e)?e:{value:e}}function mc(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u4(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function KR(a,e){return mc(a,e.toTimestamp())}function ts(a){return Ve(!!a,49232),Be.fromTimestamp((function(t){const s=Ea(t);return new Tt(s.seconds,s.nanos)})(a))}function Jx(a,e){return Xp(a,e).canonicalString()}function Xp(a,e){const t=(function(l){return new bt(["projects",l.projectId,"databases",l.database])})(a).child("documents");return e===void 0?t:t.child(e)}function d4(a){const e=bt.fromString(a);return Ve(v4(e),10190,{key:e.toString()}),e}function sm(a,e){return Jx(a.databaseId,e.path)}function El(a,e){const t=d4(e);if(t.get(1)!==a.databaseId.projectId)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+a.databaseId.projectId);if(t.get(3)!==a.databaseId.database)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+a.databaseId.database);return new Ne(m4(t))}function h4(a,e){return Jx(a.databaseId,e)}function f4(a){const e=d4(a);return e.length===4?bt.emptyPath():m4(e)}function Jp(a){return new bt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function m4(a){return Ve(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function O2(a,e,t){return{name:sm(a,e),fields:t.value.mapValue.fields}}function QR(a,e,t){const s=El(a,e.name),l=ts(e.updateTime),c=e.createTime?ts(e.createTime):Be.min(),d=new Kn({mapValue:{fields:e.fields}}),f=Wt.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function YR(a,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ae(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,w){return x.useProto3Json?(Ve(w===void 0||typeof w=="string",58123),ln.fromBase64String(w||"")):(Ve(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),ln.fromUint8Array(w||new Uint8Array))})(a,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const w=x.code===void 0?se.UNKNOWN:l4(x.code);return new ve(w,x.message||"")})(d);t=new c4(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=El(a,s.document.name),c=ts(s.document.updateTime),d=s.document.createTime?ts(s.document.createTime):Be.min(),f=new Kn({mapValue:{fields:s.document.fields}}),g=Wt.newFoundDocument(l,c,d,f),x=s.targetIds||[],w=s.removedTargetIds||[];t=new Of(x,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=El(a,s.document),c=s.readTime?ts(s.readTime):Be.min(),d=Wt.newNoDocument(l,c),f=s.removedTargetIds||[];t=new Of([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=El(a,s.document),c=s.removedTargetIds||[];t=new Of([],c,l,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new LR(l,c),f=s.targetId;t=new o4(f,d)}}return t}function rm(a,e){let t;if(e instanceof Ec)t={update:O2(a,e.key,e.value)};else if(e instanceof Od)t={delete:sm(a,e.key)};else if(e instanceof ka)t={update:O2(a,e.key,e.data),updateMask:t8(e.fieldMask)};else{if(!(e instanceof i4))return Ae(16599,{Vt:e.type});t={verify:sm(a,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof uc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof dc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof hc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof fc)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:KR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(a,e.precondition)),t}function Wp(a,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?_n.updateTime(ts(c.updateTime)):c.exists!==void 0?_n.exists(c.exists):_n.none()})(e.currentDocument):_n.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)Ve(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new uc;else if("appendMissingElements"in f){const w=f.appendMissingElements.values||[];g=new dc(w)}else if("removeAllFromArray"in f){const w=f.removeAllFromArray.values||[];g=new hc(w)}else"increment"in f?g=new fc(d,f.increment):Ae(16584,{proto:f});const x=Qt.fromServerFormat(f.fieldPath);return new $x(x,g)})(a,l))):[];if(e.update){e.update.name;const l=El(a,e.update.name),c=new Kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new hs(x.map((w=>Qt.fromServerFormat(w))))})(e.updateMask);return new ka(l,c,d,t,s)}return new Ec(l,c,t,s)}if(e.delete){const l=El(a,e.delete);return new Od(l,t)}if(e.verify){const l=El(a,e.verify);return new i4(l,t)}return Ae(1463,{proto:e})}function XR(a,e){return a&&a.length>0?(Ve(e!==void 0,14353),a.map((t=>(function(l,c){let d=l.updateTime?ts(l.updateTime):ts(c);return d.isEqual(Be.min())&&(d=ts(c)),new OR(d,l.transformResults||[])})(t,e)))):[]}function g4(a,e){return{documents:[h4(a,e.path)]}}function p4(a,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=h4(a,l);const c=(function(x){if(x.length!==0)return b4(St.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((w=>(function(N){return{field:Bo(N.field),direction:WR(N.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Yp(a,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function x4(a){let e=f4(a.parent);const t=a.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){Ve(s===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const N=y4(b);return N instanceof St&&Fx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((N=>(function(z){return new yd(qo(z.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let N;return N=typeof b=="object"?b.value:b,Tm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(b){const N=!!b.before,M=b.values||[];return new oc(M,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(b){const N=!b.before,M=b.values||[];return new oc(M,N)})(t.endAt)),Hj(e,l,d,c,f,"F",g,x)}function JR(a,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function y4(a){return a.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qo(t.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=qo(t.unaryFilter.field);return ot.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=qo(t.unaryFilter.field);return ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=qo(t.unaryFilter.field);return ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(a):a.fieldFilter!==void 0?(function(t){return ot.create(qo(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(t){return St.create(t.compositeFilter.filters.map((s=>y4(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(a):Ae(30097,{filter:a})}function WR(a){return FR[a]}function ZR(a){return HR[a]}function e8(a){return GR[a]}function Bo(a){return{fieldPath:a.canonicalString()}}function qo(a){return Qt.fromServerFormat(a.fieldPath)}function b4(a){return a instanceof ot?(function(t){if(t.op==="=="){if(b2(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(y2(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(b2(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(y2(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:ZR(t.op),value:t.value}}})(a):a instanceof St?(function(t){const s=t.getFilters().map((l=>b4(l)));return s.length===1?s[0]:{compositeFilter:{op:e8(t.op),filters:s}}})(a):Ae(54877,{filter:a})}function t8(a){const e=[];return a.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function v4(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,s,l,c=Be.min(),d=Be.min(),f=ln.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.yt=e}}function n8(a,e){let t;if(e.document)t=QR(a.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ne.fromSegments(e.noDocument.path),l=Pl(e.noDocument.readTime);t=Wt.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const s=Ne.fromSegments(e.unknownDocument.path),l=Pl(e.unknownDocument.version);t=Wt.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new Tt(l[0],l[1]);return Be.fromTimestamp(c)})(e.readTime)),t}function V2(a,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:am(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:sm(c,d.key),fields:d.data.value.mapValue.fields,updateTime:mc(c,d.version.toTimestamp()),createTime:mc(c,d.createTime.toTimestamp())}})(a.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Vl(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Vl(e.version)}}return s}function am(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Vl(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pl(a){const e=new Tt(a.seconds,a.nanoseconds);return Be.fromTimestamp(e)}function xl(a,e){const t=(e.baseMutations||[]).map((c=>Wp(a.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Wp(a.yt,c))),l=Tt.fromMillis(e.localWriteTimeMs);return new Kx(e.batchId,l,t,s)}function Bu(a){const e=Pl(a.readTime),t=a.lastLimboFreeSnapshotVersion!==void 0?Pl(a.lastLimboFreeSnapshotVersion):Be.min();let s;return s=(function(c){return c.documents!==void 0})(a.query)?(function(c){const d=c.documents.length;return Ve(d===1,1966,{count:d}),Cs(Dd(f4(c.documents[0])))})(a.query):(function(c){return Cs(x4(c))})(a.query),new va(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,t,ln.fromBase64String(a.resumeToken))}function _4(a,e){const t=Vl(e.snapshotVersion),s=Vl(e.lastLimboFreeSnapshotVersion);let l;l=em(e.target)?g4(a.yt,e.target):p4(a.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ol(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function N4(a){const e=x4({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?nm(e,e.limit,"L"):e}function ap(a,e){return new Yx(e.largestBatchId,Wp(a.yt,e.overlayMutation))}function P2(a,e){const t=e.path.lastSegment();return[a,Xn(e.path.popLast()),t]}function L2(a,e,t,s){return{indexId:a,uid:e,sequenceNumber:t,readTime:Vl(s.readTime),documentKey:Xn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{getBundleMetadata(e,t){return z2(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:Pl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return z2(e).put((function(l){return{bundleId:l.id,createTime:Vl(ts(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return U2(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:N4(c.bundledQuery),readTime:Pl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return U2(e).put((function(l){return{name:l.name,readTime:Vl(ts(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function z2(a){return En(a,Sm)}function U2(a){return En(a,Am)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Om(e,s)}getOverlay(e,t){return Cu(e).get(P2(this.userId,t)).next((s=>s?ap(this.serializer,s):null))}getOverlays(e,t){const s=Ur();return G.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new Yx(t,d);l.push(this.St(e,f))})),G.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add(Xn(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(Cu(e).Z(Bp,f))})),G.waitFor(c)}getOverlaysForCollection(e,t,s){const l=Ur(),c=Xn(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Cu(e).J(Bp,d).next((f=>{for(const g of f){const x=ap(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=Ur();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cu(e).ee({index:_j,range:f},((g,x,w)=>{const b=ap(this.serializer,x);c.size()<l||b.largestBatchId===d?(c.set(b.getKey(),b),d=b.largestBatchId):w.done()})).next((()=>c))}St(e,t){return Cu(e).put((function(l,c,d){const[f,g,x]=P2(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:rm(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function Cu(a){return En(a,Im)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{bt(e){return En(e,Lx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?ln.fromUint8Array(s):ln.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ht(e.integerValue));else if("doubleValue"in e){const s=Ht(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),ud(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=Ea(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ta(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?Mj(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):km(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=ic,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Ht(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),Ne.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}yl.Kt=new yl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=255;function a8(a){if(a===0)return 8;let e=0;return a>>4||(e+=4,a<<=4),a>>6||(e+=2,a<<=2),a>>7||(e+=1),e}function B2(a){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=a8(255&s[c]);if(l+=d,d!==8)break}return l})(a);return Math.ceil(e/8)}class i8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=B2(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=B2(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(Oo),this.sn(255)}_n(){this.an(Oo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Oo?(this.sn(Oo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Oo?(this.an(Oo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class l8{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class o8{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ku{constructor(){this.cn=new i8,this.ln=new l8(this.cn),this.hn=new o8(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new bl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:Vf(this.En),directionalValue:Vf(this.dn),orderedDocumentKey:Vf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function ui(a,e){let t=a.Tn-e.Tn;return t!==0?t:(t=q2(a.En,e.En),t!==0?t:(t=q2(a.dn,e.dn),t!==0?t:Ne.comparator(a.In,e.In)))}function q2(a,e){for(let t=0;t<a.length&&t<e.length;++t){const s=a[t]-e[t];if(s!==0)return s}return a.length-e.length}function Vf(a){return hN()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(a):a}function F2(a){return typeof a!="string"?a:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(a)}class H2{constructor(e){this.mn=new At(((t,s)=>Qt.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Lp(e);if(t!==void 0&&!this.wn(t))return!1;const s=fl(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new At(Qt.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new Af(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new Af(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new Af(s.field,s.dir==="asc"?0:1)));return new Yf(Yf.UNKNOWN_ID,this.collectionId,t,cd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(a){var t,s;if(Ve(a instanceof ot||a instanceof St,20012),a instanceof ot){if(a instanceof Fj){const l=((s=(t=a.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>ot.create(a.field,"==",c))))||[];return St.create(l,"or")}return a}const e=a.filters.map((l=>j4(l)));return St.create(e,a.op)}function c8(a){if(a.getFilters().length===0)return[];const e=tx(j4(a));return Ve(E4(e),7391),Zp(e)||ex(e)?[e]:e.getFilters()}function Zp(a){return a instanceof ot}function ex(a){return a instanceof St&&Fx(a)}function E4(a){return Zp(a)||ex(a)||(function(t){if(t instanceof St&&Gp(t)){for(const s of t.getFilters())if(!Zp(s)&&!ex(s))return!1;return!0}return!1})(a)}function tx(a){if(Ve(a instanceof ot||a instanceof St,34018),a instanceof ot)return a;if(a.filters.length===1)return tx(a.filters[0]);const e=a.filters.map((s=>tx(s)));let t=St.create(e,a.op);return t=im(t),E4(t)?t:(Ve(t instanceof St,64498),Ve(cc(t),40251),Ve(t.filters.length>1,57927),t.filters.reduce(((s,l)=>Wx(s,l))))}function Wx(a,e){let t;return Ve(a instanceof ot||a instanceof St,38388),Ve(e instanceof ot||e instanceof St,25473),t=a instanceof ot?e instanceof ot?(function(l,c){return St.create([l,c],"and")})(a,e):G2(a,e):e instanceof ot?G2(e,a):(function(l,c){if(Ve(l.filters.length>0&&c.filters.length>0,48005),cc(l)&&cc(c))return Uj(l,c.getFilters());const d=Gp(l)?l:c,f=Gp(l)?c:l,g=d.filters.map((x=>Wx(x,f)));return St.create(g,"or")})(a,e),im(t)}function G2(a,e){if(cc(e))return Uj(e,a.getFilters());{const t=e.filters.map((s=>Wx(a,s)));return St.create(t,"or")}}function im(a){if(Ve(a instanceof ot||a instanceof St,11850),a instanceof ot)return a;const e=a.getFilters();if(e.length===1)return im(e[0]);if(Lj(a))return a;const t=e.map((l=>im(l))),s=[];return t.forEach((l=>{l instanceof ot?s.push(l):l instanceof St&&(l.op===a.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:St.create(s,a.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.Cn=new Zx}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Rs.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Zx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new At(bt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new At(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="IndexedDbIndexManager",bf=new Uint8Array(0);class d8{constructor(e,t){this.databaseId=t,this.vn=new Zx,this.Fn=new Ca((s=>Ol(s)),((s,l)=>Rd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:Xn(l)};return K2(e).put(c)}return G.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[oj(t),""],!1,!0);return K2(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(zr(d.parent))}return s}))}addFieldIndex(e,t){const s=Ru(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=Po(e);return c.next((f=>{d.put(L2(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=Ru(e),l=Po(e),c=Vo(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ru(e),s=Vo(e),l=Po(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return G.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new H2(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=Vo(e);let l=!0;const c=new Map;return G.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=et();const f=[];return G.forEach(c,((g,x)=>{me($2,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map((fe=>`${fe.fieldPath}:${fe.kind}`)).join(",")}`})(g)} to execute ${Ol(t)}`);const w=(function(U,fe){const ae=Lp(fe);if(ae===void 0)return null;for(const pe of tm(U,ae.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(x,g),b=(function(U,fe){const ae=new Map;for(const pe of fl(fe))for(const S of tm(U,pe.fieldPath))switch(S.op){case"==":case"in":ae.set(pe.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ae.set(pe.fieldPath.canonicalString(),S.value),Array.from(ae.values())}return null})(x,g),N=(function(U,fe){const ae=[];let pe=!0;for(const S of fl(fe)){const E=S.kind===0?j2(U,S.fieldPath,U.startAt):E2(U,S.fieldPath,U.startAt);ae.push(E.value),pe&&(pe=E.inclusive)}return new oc(ae,pe)})(x,g),M=(function(U,fe){const ae=[];let pe=!0;for(const S of fl(fe)){const E=S.kind===0?E2(U,S.fieldPath,U.endAt):j2(U,S.fieldPath,U.endAt);ae.push(E.value),pe&&(pe=E.inclusive)}return new oc(ae,pe)})(x,g),z=this.On(g,x,N),B=this.On(g,x,M),q=this.Nn(g,x,b),re=this.Bn(g.indexId,w,z,N.inclusive,B,M.inclusive,q);return G.forEach(re,(ue=>s.Y(ue,t.limit).next((U=>{U.forEach((fe=>{const ae=Ne.fromSegments(fe.documentKey);d.has(ae)||(d=d.add(ae),f.push(ae))}))}))))})).next((()=>f))}return G.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=c8(St.create(e.filters,"and")).map((s=>Kp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),w=[];for(let b=0;b<g;++b){const N=t?this.Ln(t[b/x]):bf,M=this.kn(e,N,s[b%x],l),z=this.qn(e,N,c[b%x],d),B=f.map((q=>this.kn(e,N,q,!0)));w.push(...this.createRange(M,z,B))}return w}kn(e,t,s,l){const c=new bl(e,Ne.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new bl(e,Ne.empty(),t,s);return l?c.An():c}xn(e,t){const s=new H2(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return G.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new At(Qt.comparator),w=!1;for(const b of g.filters)for(const N of b.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?w=!0:x=x.add(N.field));for(const b of g.orderBy)b.field.isKeyField()||(x=x.add(b.field));return x.size+(w?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new ku;for(const l of fl(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);yl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new ku;return yl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new ku;return yl.Kt.Dt(pd(this.databaseId,t),s.Pn((function(c){const d=fl(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new ku);let c=0;for(const d of fl(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&xd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);yl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new ku;g.seed(f.un()),yl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof ot&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Ru(e),l=Po(e);return(t?s.J(Up,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return G.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(w,b){const N=b?new cd(b.sequenceNumber,new Rs(Pl(b.readTime),new Ne(zr(b.documentKey)),b.largestBatchId)):cd.empty(),M=w.fields.map((([z,B])=>new Af(Qt.fromServerFormat(z),B)));return new Yf(w.indexId,w.collectionGroup,M,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Ge(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=Ru(e),c=Po(e);return this.Gn(e).next((d=>l.J(Up,IDBKeyRange.bound(t,t)).next((f=>G.forEach(f,(g=>c.put(L2(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return G.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?G.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),G.forEach(f,(g=>this.zn(e,l,g).next((x=>{const w=this.jn(c,g);return x.isEqual(w)?G.resolve():this.Jn(e,c,g,x,w)})))))))}))}Hn(e,t,s,l){return Vo(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return Vo(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=Vo(e);let c=new At(ui);return l.ee({index:wj,range:IDBKeyRange.only([s.indexId,this.uid,Vf(this.$n(s,t))])},((d,f)=>{c=c.add(new bl(s.indexId,t,F2(f.arrayValue),F2(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new At(ui);const l=this.Qn(t,e);if(l==null)return s;const c=Lp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(xd(d))for(const f of d.arrayValue.values||[])s=s.add(new bl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new bl(t.indexId,e.key,bf,l));return s}Jn(e,t,s,l,c){me($2,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,w,b,N){const M=g.getIterator(),z=x.getIterator();let B=Mo(M),q=Mo(z);for(;B||q;){let re=!1,ue=!1;if(B&&q){const U=w(B,q);U<0?ue=!0:U>0&&(re=!0)}else B!=null?ue=!0:re=!0;re?(b(q),q=Mo(z)):ue?(N(B),B=Mo(M)):(B=Mo(M),q=Mo(z))}})(l,c,ui,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),G.waitFor(d)}Gn(e){let t=1;return Po(e).ee({index:vj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>ui(d,f))).filter(((d,f,g)=>!f||ui(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=ui(d,e),g=ui(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,bf,Ne.empty()),g=l[d+1].Vn(this.uid,bf,Ne.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return ui(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Q2)}getMinOffset(e,t){return G.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||Ae(44426))))).next(Q2)}}function K2(a){return En(a,fd)}function Vo(a){return En(a,Qu)}function Ru(a){return En(a,Px)}function Po(a){return En(a,Ku)}function Q2(a){Ve(a.length!==0,28825);let e=a[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<a.length;s++){const l=a[s].indexState.offset;Mx(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new Rs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T4=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(a,e,t){const s=a.store(ur),l=a.store(nc),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((w,b,N)=>(f++,N.delete())));c.push(g.next((()=>{Ve(f===1,47070,{batchId:t.batchId})})));const x=[];for(const w of t.mutations){const b=xj(e,w.key.path,t.batchId);c.push(l.delete(b)),x.push(w.key)}return G.waitFor(c).next((()=>x))}function lm(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw Ae(14731);e=a.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(T4,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class Vm{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){Ve(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Vm(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return di(e).ee({index:vl,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=Fo(e),d=di(e);return d.add({}).next((f=>{Ve(typeof f=="number",49019);const g=new Kx(f,t,s,l),x=(function(M,z,B){const q=B.baseMutations.map((ue=>rm(M.yt,ue))),re=B.mutations.map((ue=>rm(M.yt,ue)));return{userId:z,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:q,mutations:re}})(this.serializer,this.userId,g),w=[];let b=new At(((N,M)=>Ge(N.canonicalString(),M.canonicalString())));for(const N of l){const M=xj(this.userId,N.key.path,f);b=b.add(N.key.path.popLast()),w.push(d.put(x)),w.push(c.put(M,Hk))}return b.forEach((N=>{w.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),G.waitFor(w).next((()=>g))}))}lookupMutationBatch(e,t){return di(e).get(t).next((s=>s?(Ve(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),xl(this.serializer,s)):null))}er(e,t){return this.Xn[t]?G.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return di(e).ee({index:vl,range:l},((d,f,g)=>{f.userId===this.userId&&(Ve(f.batchId>=s,47524,{tr:s}),c=xl(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=Nl;return di(e).ee({index:vl,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Nl],[this.userId,Number.POSITIVE_INFINITY]);return di(e).J(vl,t).next((s=>s.map((l=>xl(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=If(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return Fo(e).ee({range:l},((d,f,g)=>{const[x,w,b]=d,N=zr(w);if(x===this.userId&&t.path.isEqual(N))return di(e).get(b).next((M=>{if(!M)throw Ae(61480,{nr:d,batchId:b});Ve(M.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:M.userId,batchId:b}),c.push(xl(this.serializer,M))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new At(Ge);const l=[];return t.forEach((c=>{const d=If(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=Fo(e).ee({range:f},((x,w,b)=>{const[N,M,z]=x,B=zr(M);N===this.userId&&c.path.isEqual(B)?s=s.add(z):b.done()}));l.push(g)})),G.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=If(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new At(Ge);return Fo(e).ee({range:d},((g,x,w)=>{const[b,N,M]=g,z=zr(N);b===this.userId&&s.isPrefixOf(z)?z.length===l&&(f=f.add(M)):w.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(di(e).get(c).next((d=>{if(d===null)throw Ae(35274,{batchId:c});Ve(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(xl(this.serializer,d))})))})),G.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return S4(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),G.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return Fo(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=zr(c[1]);l.push(g)}else f.done()})).next((()=>{Ve(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return A4(e,this.userId,t)}_r(e){return I4(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Nl,lastStreamToken:""}))}}function A4(a,e,t){const s=If(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return Fo(a).ee({range:c,X:!0},((f,g,x)=>{const[w,b,N]=f;w===e&&b===l&&(d=!0),x.done()})).next((()=>d))}function di(a){return En(a,ur)}function Fo(a){return En(a,nc)}function I4(a){return En(a,dd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ll(0)}static cr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Ll(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Be.fromTimestamp(new Tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lo(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Ve(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return Lo(e).ee(((d,f)=>{const g=Bu(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>G.waitFor(c))).next((()=>l))}forEachTarget(e,t){return Lo(e).ee(((s,l)=>{const c=Bu(l);t(c)}))}lr(e){return X2(e).get(Wf).next((t=>(Ve(t!==null,2888),t)))}hr(e,t){return X2(e).put(Wf,t)}Pr(e,t){return Lo(e).put(_4(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Ol(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Lo(e).ee({range:l,index:bj},((d,f,g)=>{const x=Bu(f);Rd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=yi(e);return t.forEach((d=>{const f=Xn(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),G.waitFor(l)}removeMatchingKeys(e,t,s){const l=yi(e);return G.forEach(t,(c=>{const d=Xn(c.path);return G.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=yi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=yi(e);let c=et();return l.ee({range:s,X:!0},((d,f,g)=>{const x=zr(d[1]),w=new Ne(x);c=c.add(w)})).next((()=>c))}containsKey(e,t){const s=Xn(t.path),l=IDBKeyRange.bound([s],[oj(s)],!1,!0);let c=0;return yi(e).ee({index:Vx,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return Lo(e).get(t).next((s=>s?Bu(s):null))}}function Lo(a){return En(a,sc)}function X2(a){return En(a,jl)}function yi(a){return En(a,rc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="LruGarbageCollector",C4=1048576;function W2([a,e],[t,s]){const l=Ge(a,t);return l===0?Ge(e,s):l}class f8{constructor(e){this.Ir=e,this.buffer=new At(W2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();W2(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class k4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(J2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vi(t)?me(J2,"Ignoring IndexedDB error during garbage collection: ",t):await Oi(t)}await this.Vr(3e5)}))}}class m8{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(ds.ce);const s=new f8(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Y2)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(s=b,f=Date.now(),this.removeTargets(e,s,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(x=Date.now(),zo()<=lt.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${b} documents in `+(x-g)+`ms
Total Duration: ${x-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function R4(a,e){return new m8(a,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,t){this.db=e,this.garbageCollector=R4(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return vf(e,s)}removeReference(e,t,s){return vf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return vf(e,t)}br(e,t){return(function(l,c){let d=!1;return I4(l).te((f=>A4(l,f,c).next((g=>(g&&(d=!0),G.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Be.min()),yi(e).delete((function(b){return[0,Xn(b.path)]})(d)))))}));l.push(g)}})).next((()=>G.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return vf(e,t)}Sr(e,t){const s=yi(e);let l,c=ds.ce;return s.ee({index:Vx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==ds.ce&&t(new Ne(zr(l)),c),c=x,l=g):c=ds.ce})).next((()=>{c!==ds.ce&&t(new Ne(zr(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(a,e){return yi(a).put((function(s,l){return{targetId:0,path:Xn(s.path),sequenceNumber:l}})(e,a.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.changes=new Ca((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ul(e).put(s)}removeEntry(e,t,s){return ul(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],am(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=Wt.newInvalidDocument(t);return ul(e).ee({index:Cf,range:IDBKeyRange.only(Du(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:Wt.newInvalidDocument(t)};return ul(e).ee({index:Cf,range:IDBKeyRange.only(Du(t))},((l,c)=>{s={document:this.Cr(t,c),size:lm(c)}})).next((()=>s))}getEntries(e,t){let s=As();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=As(),l=new Vt(Ne.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,lm(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return G.resolve();let l=new At(t_);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(Du(l.first()),Du(l.last())),d=l.getIterator();let f=d.getNext();return ul(e).ee({index:Cf,range:c},((g,x,w)=>{const b=Ne.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&t_(f,b)<0;)s(f,null),f=d.getNext();f&&f.isEqual(b)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?w.j(Du(f)):w.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),am(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ul(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let w=As();for(const b of x){const N=this.Cr(Ne.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);N.isFoundDocument()&&(Md(t,N)||l.has(N.key))&&(w=w.insert(N.key,N))}return w}))}getAllFromCollectionGroup(e,t,s,l){let c=As();const d=e_(t,s),f=e_(t,Rs.max());return ul(e).ee({index:yj,range:IDBKeyRange.bound(d,f,!0)},((g,x,w)=>{const b=this.Cr(Ne.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(b.key,b),c.size===l&&w.done()})).next((()=>c))}newChangeBuffer(e){return new x8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Z2(e).get(zp).next((t=>(Ve(!!t,20021),t)))}Dr(e,t){return Z2(e).put(zp,t)}Cr(e,t){if(t){const s=n8(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Be.min())))return s}return Wt.newInvalidDocument(e)}}function M4(a){return new p8(a)}class x8 extends D4{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ca((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new At(((c,d)=>Ge(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=V2(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=lm(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=V2(this.Nr.serializer,d.convertToNoDocument(Be.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),G.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function Z2(a){return En(a,hd)}function ul(a){return En(a,Jf)}function Du(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e_(a,e){const t=e.documentKey.path.toArray();return[a,am(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function t_(a,e){const t=a.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=Ge(t[c],s[c]),l)return l;return l=Ge(t.length,s.length),l||(l=Ge(t[t.length-2],s[s.length-2]),l||Ge(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&Wu(s.mutation,l,hs.empty(),Tt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const l=Ur();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=zu();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Ur();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=As();const d=Ju(),f=(function(){return Ju()})();return t.forEach(((g,x)=>{const w=s.get(x.key);l.has(x.key)&&(w===void 0||w.mutation instanceof ka)?c=c.insert(x.key,x):w!==void 0?(d.set(x.key,w.mutation.getFieldMask()),Wu(w.mutation,x,w.mutation.getFieldMask(),Tt.now())):d.set(x.key,hs.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,w)=>d.set(x,w))),t.forEach(((x,w)=>f.set(x,new y8(w,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Ju();let l=new Vt(((d,f)=>d-f)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let w=s.get(g)||hs.empty();w=f.applyToLocalView(x,w),s.set(g,w);const b=(l.get(f.batchId)||et()).add(g);l=l.insert(f.batchId,b)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,w=g.value,b=Jj();w.forEach((N=>{if(!c.has(N)){const M=r4(t.get(N),s.get(N));M!==null&&b.set(N,M),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,b))}return G.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):G.resolve(Ur());let f=tc,g=c;return d.next((x=>G.forEach(x,((w,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),c.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((N=>{g=g.insert(w,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,et()))).next((w=>({batchId:f,changes:Xj(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let l=zu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=zu();return this.indexManager.getCollectionParents(e,c).next((f=>G.forEach(f,(g=>{const x=(function(b,N){return new jc(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((w=>{w.forEach(((b,N)=>{d=d.insert(b,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const w=x.getKey();d.get(w)===null&&(d=d.insert(w,Wt.newInvalidDocument(w)))}));let f=zu();return d.forEach(((g,x)=>{const w=c.get(g);w!==void 0&&Wu(w.mutation,x,hs.empty(),Tt.now()),Md(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:ts(l.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:N4(l.bundledQuery),readTime:ts(l.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.overlays=new Vt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ur();return G.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const l=Ur(),c=t.length+1,d=new Ne(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return G.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Vt(((x,w)=>x-w));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let w=c.get(x.largestBatchId);w===null&&(w=Ur(),c=c.insert(x.largestBatchId,w)),w.set(x.getKey(),x)}}const f=Ur(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,w)=>f.set(x,w))),!(f.size()>=l)););return G.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Yx(t,s));let c=this.qr.get(t);c===void 0&&(c=et(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.Qr=new At(In.$r),this.Ur=new At(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new In(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new In(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ne(new bt([])),s=new In(t,e),l=new In(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new bt([])),s=new In(t,e),l=new In(t,e+1);let c=et();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new In(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class In{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new At(In.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Kx(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new In(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Nl:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new In(t,0),l=new In(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new At(Ge);return t.forEach((l=>{const c=new In(l,0),d=new In(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const d=new In(new Ne(c),0);let f=new At(Ge);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(l=>{const c=new In(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new In(t,0),l=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.ri=e,this.docs=(function(){return new Vt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Wt.newInvalidDocument(l))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=As();const d=t.path,f=new Ne(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:w}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Mx(hj(w),s)<=0||(l.has(w.key)||Md(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Ae(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new j8(this)}getSize(e){return G.resolve(this.size)}}class j8 extends D4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.persistence=e,this.si=new Ca((t=>Ol(t)),Rd),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new ey,this.targetCount=0,this.ai=Ll.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),G.waitFor(c).next((()=>l))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),G.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.ui={},this.overlays={},this.ci=new ds(0),this.li=!1,this.li=!0,this.hi=new w8,this.referenceDelegate=e(this),this.Pi=new E8(this),this.indexManager=new u8,this.remoteDocumentCache=(function(l){return new N8(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new w4(t),this.Ii=new b8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new _8(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const l=new T8(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class T8 extends mj{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Ri=new ey,this.Vi=null}static mi(e){return new Pm(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const l=Ne.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class om{constructor(e,t){this.persistence=e,this.pi=new Ca((s=>Xn(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=R4(this,t)}static mi(e,t){return new om(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?G.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Be.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rf(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return G.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.serializer=e}k(e,t,s,l){const c=new Em("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(kd)})(e),(function(g){g.createObjectStore(dd,{keyPath:Fk}),g.createObjectStore(ur,{keyPath:h2,autoIncrement:!0}).createIndex(vl,f2,{unique:!0}),g.createObjectStore(nc)})(e),n_(e),(function(g){g.createObjectStore(ml)})(e));let d=G.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(rc),g.deleteObjectStore(sc),g.deleteObjectStore(jl)})(e),n_(e)),d=d.next((()=>(function(g){const x=g.store(jl),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return x.put(Wf,w)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(ur).J().next((b=>{g.deleteObjectStore(ur),g.createObjectStore(ur,{keyPath:h2,autoIncrement:!0}).createIndex(vl,f2,{unique:!0});const N=x.store(ur),M=b.map((z=>N.put(z)));return G.waitFor(M)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(ac,{keyPath:Wk})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(hd)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(Sm,{keyPath:Zk})})(e),(function(g){g.createObjectStore(Am,{keyPath:eR})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(Im,{keyPath:lR});x.createIndex(Bp,oR,{unique:!1}),x.createIndex(_j,cR,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Jf,{keyPath:Gk});x.createIndex(Cf,$k),x.createIndex(yj,Kk)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(ml)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Px,{keyPath:tR,autoIncrement:!0}).createIndex(Up,nR,{unique:!1}),g.createObjectStore(Ku,{keyPath:sR}).createIndex(vj,rR,{unique:!1}),g.createObjectStore(Qu,{keyPath:aR}).createIndex(wj,iR,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Qu).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Lx,{keyPath:uR})})(e)}))),s<18&&l>=18&&hN()&&(d=d.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Qu).clear()}))),d}wi(e){let t=0;return e.store(ml).ee(((s,l)=>{t+=lm(l)})).next((()=>{const s={byteSize:t};return e.store(hd).put(zp,s)}))}yi(e){const t=e.store(dd),s=e.store(ur);return t.J().next((l=>G.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,Nl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(vl,d).next((f=>G.forEach(f,(g=>{Ve(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=xl(this.serializer,g);return S4(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(rc),s=e.store(ml);return e.store(jl).get(Wf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new bt(d),x=(function(b){return[0,Xn(b)]})(g);c.push(t.get(x).next((w=>w?G.resolve():(b=>t.put({targetId:0,path:Xn(b),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>G.waitFor(c)))}))}bi(e,t){e.createObjectStore(fd,{keyPath:Jk});const s=t.store(fd),l=new Zx,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:Xn(g)})}};return t.store(ml).ee({X:!0},((d,f)=>{const g=new bt(d);return c(g.popLast())})).next((()=>t.store(nc).ee({X:!0},(([d,f,g],x)=>{const w=zr(f);return c(w.popLast())}))))}Di(e){const t=e.store(sc);return t.ee(((s,l)=>{const c=Bu(l),d=_4(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(ml),l=[];return s.ee(((c,d)=>{const f=t.store(Jf),g=(function(b){return b.document?new Ne(bt.fromString(b.document.name).popFirst(5)):b.noDocument?Ne.fromSegments(b.noDocument.path):b.unknownDocument?Ne.fromSegments(b.unknownDocument.path):Ae(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>G.waitFor(l)))}Fi(e,t){const s=t.store(ur),l=M4(this.serializer),c=new ty(Pm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??et();xl(this.serializer,g).keys().forEach((w=>x=x.add(w))),f.set(g.userId,x)})),G.forEach(f,((g,x)=>{const w=new Gn(x),b=Om.wt(this.serializer,w),N=c.getIndexManager(w),M=Vm.wt(w,this.serializer,N,c.referenceDelegate);return new O4(l,M,b,N).recalculateAndSaveOverlaysForDocumentKeys(new qp(t,ds.ce),g).next()}))}))}}function n_(a){a.createObjectStore(rc,{keyPath:Yk}).createIndex(Vx,Xk,{unique:!0}),a.createObjectStore(sc,{keyPath:"targetId"}).createIndex(bj,Qk,{unique:!0}),a.createObjectStore(jl)}const hi="IndexedDbPersistence",ip=18e5,lp=5e3,op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",A8="main";class ny{constructor(e,t,s,l,c,d,f,g,x,w,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=w,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!ny.v())throw new ve(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g8(this,l),this.$i=t+A8,this.serializer=new w4(g),this.Ui=new ji(this.$i,this.Ni,new S8(this.serializer)),this.hi=new r8,this.Pi=new h8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M4(this.serializer),this.Ii=new s8,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&an(hi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(se.FAILED_PRECONDITION,op);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ds(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Vi(e))return me(hi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(hi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Mu(e).get(Do).next((t=>G.resolve(this.es(t))))}ts(e){return wf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ip)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=En(t,ac);return s.J().next((l=>{const c=this.ss(l,ip),d=l.filter((f=>c.indexOf(f)===-1));return G.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?G.resolve(!0):Mu(e).get(Do).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(se.FAILED_PRECONDITION,op);return!1}}return!(!this.networkEnabled||!this.inForeground)||wf(e).J().next((s=>this.ss(s,lp).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&me(hi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kd,ac],(e=>{const t=new qp(e,ds.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>wf(e).J().next((t=>this.ss(t,ip).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Vm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d8(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Om.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){me(hi,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?fR:g===17?Tj:g===16?hR:g===15?zx:g===14?Ej:g===13?jj:g===12?dR:g===11?Nj:void Ae(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new qp(f,this.ci?this.ci.next():ds.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw an(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(se.FAILED_PRECONDITION,fj);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return Mu(e).get(Do).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(se.FAILED_PRECONDITION,op)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put(Do,t)}static v(){return ji.v()}Zi(e){const t=Mu(e);return t.get(Do).next((s=>this.es(s)?(me(hi,"Releasing primary lease."),t.delete(Do)):G.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(an(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;dN()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return me(hi,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return an(hi,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){an("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(a){return En(a,kd)}function wf(a){return En(a,ac)}function V4(a,e){let t=a.projectId;return a.isDefaultDatabase||(t+="."+a.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=et(),l=et();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new sy(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dN()?8:gj(jn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new I8;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(zo()<=lt.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(zo()<=lt.DEBUG&&me("QueryEngine","Query:",Uo(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(zo()<=lt.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(t))):G.resolve())}ys(e,t){if(T2(t))return G.resolve(null);let s=Cs(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=nm(t,null,"F"),s=Cs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=et(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,nm(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return T2(t)||l.isEqual(Be.min())?G.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?G.resolve(null):(zo()<=lt.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Uo(t)),this.vs(e,d,t,dj(l,tc)).next((f=>f)))}))}Ds(e,t){let s=new At(Qj(e));return t.forEach(((l,c)=>{Md(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return zo()<=lt.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,Rs.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="LocalStore",C8=3e8;class k8{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Vt(Ge),this.xs=new Ca((c=>Ol(c)),Rd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function L4(a,e,t,s){return new k8(a,e,t,s)}async function z4(a,e){const t=De(a);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=et();for(const x of l){d.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}for(const x of c){f.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function R8(a,e){const t=De(a);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,w){const b=x.batch,N=b.keys();let M=G.resolve();return N.forEach((z=>{M=M.next((()=>w.getEntry(g,z))).next((B=>{const q=x.docVersions.get(z);Ve(q!==null,48541),B.version.compareTo(q)<0&&(b.applyToRemoteDocument(B,x),B.isValidDocument()&&(B.setReadTime(x.commitVersion),w.addEntry(B)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,b)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=et();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function U4(a){const e=De(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function D8(a,e){const t=De(a),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((w,b)=>{const N=l.get(b);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let M=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?M=M.withResumeToken(ln.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,s)),l=l.insert(b,M),(function(B,q,re){return B.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=C8?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(N,M,w)&&f.push(t.Pi.updateTargetData(c,M))}));let g=As(),x=et();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),f.push(M8(c,d,e.documentUpdates).next((w=>{g=w.ks,x=w.qs}))),!s.isEqual(Be.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(w)}return G.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function M8(a,e,t){let s=et(),l=et();return t.forEach((c=>s=s.add(c))),e.getEntries(a,s).next((c=>{let d=As();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Be.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):me(ry,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function O8(a,e){const t=De(a);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Nl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function cm(a,e){const t=De(a);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,G.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new va(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function gc(a,e,t){const s=De(a),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Vi(d))throw d;me(ry,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function nx(a,e,t){const s=De(a);let l=Be.min(),c=et();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,w){const b=De(g),N=b.xs.get(w);return N!==void 0?G.resolve(b.Ms.get(N)):b.Pi.getTargetData(x,w)})(s,d,Cs(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Be.min(),t?c:et()))).next((f=>(F4(s,Kj(e),f),{documents:f,Qs:c})))))}function B4(a,e){const t=De(a),s=De(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function q4(a,e){const t=De(a),s=t.Os.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,dj(s,tc),Number.MAX_SAFE_INTEGER))).then((l=>(F4(t,e,l),l)))}function F4(a,e,t){let s=a.Os.get(e)||Be.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),a.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="firestore_clients";function s_(a,e){return`${H4}_${a}_${e}`}const G4="firestore_mutations";function r_(a,e,t){let s=`${G4}_${a}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const $4="firestore_targets";function cp(a,e){return`${$4}_${a}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="SharedClientState";class um{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new ve(l.error.code,l.error.message))),d?new um(e,t,l.state,c):(an(Lr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new ve(s.error.code,s.error.message))),c?new Zu(e,s.state,l):(an(Lr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Hx();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=pj(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new dm(e,c):(an(Lr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ay{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ay(t.clientId,t.onlineState):(an(Lr,`Failed to parse online state: ${e}`),null)}}class sx{constructor(){this.activeTargetIds=Hx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Vt(Ge),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=s_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new sx),this.ro=new RegExp(`^${H4}_${d}_([^_]*)$`),this.io=new RegExp(`^${G4}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${$4}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(s_(this.persistenceKey,s));if(l){const c=dm.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(cp(this.persistenceKey,e));if(l){const c=Zu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me(Lr,"READ",e,t),t}setItem(e,t){me(Lr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){me(Lr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(me(Lr,"EVENT",t.key,t.newValue),t.key===this.eo)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=ds.ce;if(c!=null)try{const f=JSON.parse(c);Ve(typeof f=="number",30636,{So:c}),d=f}catch(f){an(Lr,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==ds.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new um(this.currentUser,e,t,s),c=r_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=r_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=cp(this.persistenceKey,e),c=new Zu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return dm.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return um.Ws(new Gn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Zu.Ws(l,t)}uo(e){return ay.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);me(Lr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Hx();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class K4{constructor(){this.Mo=new sx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sx,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="ConnectivityMonitor";class i_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(a_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f=null;function rx(){return _f===null?_f=(function(){return 268435456+Math.round(2147483648*Math.random())})():_f++,"0x"+_f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="RestConnection",P8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Zf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=rx(),f=this.zo(e,t.toUriEncodedString());me(dp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),w=vc(x);return this.Jo(e,f,g,s,w).then((b=>(me(dp,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw od(dp,`RPC '${e}' ${d} failed with error: `,b,"url: ",f,"request:",s),b}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=P8[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class U8 extends L8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=rx();return new Promise(((f,g)=>{const x=new nj;x.setWithCredentials(!0),x.listenOnce(sj.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case Sf.NO_ERROR:const b=x.getResponseJson();me(Hn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),f(b);break;case Sf.TIMEOUT:me(Hn,`RPC '${e}' ${d} timed out`),g(new ve(se.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const N=x.getStatus();if(me(Hn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let M=x.getResponseJson();Array.isArray(M)&&(M=M[0]);const z=M==null?void 0:M.error;if(z&&z.status&&z.message){const B=(function(re){const ue=re.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ue)>=0?ue:se.UNKNOWN})(z.status);g(new ve(B,z.message))}else g(new ve(se.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new ve(se.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{me(Hn,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);me(Hn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",w,s,15)}))}T_(e,t,s){const l=rx(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ij(),f=aj(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=c.join("");me(Hn,`Creating RPC '${e}' stream ${l}: ${w}`,g);const b=d.createWebChannel(w,g);this.I_(b);let N=!1,M=!1;const z=new z8({Yo:q=>{M?me(Hn,`Not sending because RPC '${e}' stream ${l} is closed:`,q):(N||(me(Hn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),N=!0),me(Hn,`RPC '${e}' stream ${l} sending:`,q),b.send(q))},Zo:()=>b.close()}),B=(q,re,ue)=>{q.listen(re,(U=>{try{ue(U)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return B(b,Lu.EventType.OPEN,(()=>{M||(me(Hn,`RPC '${e}' stream ${l} transport opened.`),z.o_())})),B(b,Lu.EventType.CLOSE,(()=>{M||(M=!0,me(Hn,`RPC '${e}' stream ${l} transport closed`),z.a_(),this.E_(b))})),B(b,Lu.EventType.ERROR,(q=>{M||(M=!0,od(Hn,`RPC '${e}' stream ${l} transport errored. Name:`,q.name,"Message:",q.message),z.a_(new ve(se.UNAVAILABLE,"The operation could not be completed")))})),B(b,Lu.EventType.MESSAGE,(q=>{var re;if(!M){const ue=q.data[0];Ve(!!ue,16349);const U=ue,fe=(U==null?void 0:U.error)||((re=U[0])==null?void 0:re.error);if(fe){me(Hn,`RPC '${e}' stream ${l} received error:`,fe);const ae=fe.status;let pe=(function(I){const D=yn[I];if(D!==void 0)return l4(D)})(ae),S=fe.message;pe===void 0&&(pe=se.INTERNAL,S="Unknown error status: "+ae+" with message "+fe.message),M=!0,z.a_(new ve(pe,S)),b.close()}else me(Hn,`RPC '${e}' stream ${l} received:`,ue),z.u_(ue)}})),B(f,rj.STAT_EVENT,(q=>{q.stat===Vp.PROXY?me(Hn,`RPC '${e}' stream ${l} detected buffering proxy`):q.stat===Vp.NOPROXY&&me(Hn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(){return typeof window<"u"?window:null}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(a){return new $R(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="PersistentStream";class X4{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Y4(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(an(t.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new ve(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(l_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(l_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class B8 extends X4{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=YR(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Be.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Be.min():d.readTime?ts(d.readTime):Be.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Jp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=em(g)?{documents:g4(c,g)}:{query:p4(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=u4(c,d.resumeToken);const x=Yp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Be.min())>0){f.readTime=mc(c,d.snapshotVersion.toTimestamp());const x=Yp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=JR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Jp(this.serializer),t.removeTarget=e,this.q_(t)}}class q8 extends X4{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=XR(e.writeResults,e.commitTime),s=ts(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>rm(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{}class H8 extends F8{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Xp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(se.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Xp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ve(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class G8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(an(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="RemoteStore";class $8{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Hl(this)&&(me(zl,"Restarting streams for network reachability change."),await(async function(g){const x=De(g);x.Ea.add(4),await Ld(x),x.Ra.set("Unknown"),x.Ea.delete(4),await zm(x)})(this))}))})),this.Ra=new G8(s,l)}}async function zm(a){if(Hl(a))for(const e of a.da)await e(!0)}async function Ld(a){for(const e of a.da)await e(!1)}function Um(a,e){const t=De(a);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),oy(t)?ly(t):Sc(t).O_()&&iy(t,e))}function pc(a,e){const t=De(a),s=Sc(t);t.Ia.delete(e),s.O_()&&J4(t,e),t.Ia.size===0&&(s.O_()?s.L_():Hl(t)&&t.Ra.set("Unknown"))}function iy(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sc(a).Y_(e)}function J4(a,e){a.Va.Ue(e),Sc(a).Z_(e)}function ly(a){a.Va=new qR({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),Sc(a).start(),a.Ra.ua()}function oy(a){return Hl(a)&&!Sc(a).x_()&&a.Ia.size>0}function Hl(a){return De(a).Ea.size===0}function W4(a){a.Va=void 0}async function K8(a){a.Ra.set("Online")}async function Q8(a){a.Ia.forEach(((e,t)=>{iy(a,e)}))}async function Y8(a,e){W4(a),oy(a)?(a.Ra.ha(e),ly(a)):a.Ra.set("Unknown")}async function X8(a,e,t){if(a.Ra.set("Online"),e instanceof c4&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(a,e)}catch(s){me(zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await hm(a,s)}else if(e instanceof Of?a.Va.Ze(e):e instanceof o4?a.Va.st(e):a.Va.tt(e),!t.isEqual(Be.min()))try{const s=await U4(a.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(x);w&&c.Ia.set(x,w.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(ln.EMPTY_BYTE_STRING,w.snapshotVersion)),J4(c,g);const b=new va(w.target,g,x,w.sequenceNumber);iy(c,b)})),c.remoteSyncer.applyRemoteEvent(f)})(a,t)}catch(s){me(zl,"Failed to raise snapshot:",s),await hm(a,s)}}async function hm(a,e,t){if(!Vi(e))throw e;a.Ea.add(1),await Ld(a),a.Ra.set("Offline"),t||(t=()=>U4(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{me(zl,"Retrying IndexedDB access"),await t(),a.Ea.delete(1),await zm(a)}))}function Z4(a,e){return e().catch((t=>hm(a,t,e)))}async function Tc(a){const e=De(a),t=ki(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nl;for(;J8(e);)try{const l=await O8(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,W8(e,l)}catch(l){await hm(e,l)}e5(e)&&t5(e)}function J8(a){return Hl(a)&&a.Ta.length<10}function W8(a,e){a.Ta.push(e);const t=ki(a);t.O_()&&t.X_&&t.ea(e.mutations)}function e5(a){return Hl(a)&&!ki(a).x_()&&a.Ta.length>0}function t5(a){ki(a).start()}async function Z8(a){ki(a).ra()}async function e9(a){const e=ki(a);for(const t of a.Ta)e.ea(t.mutations)}async function t9(a,e,t){const s=a.Ta.shift(),l=Qx.from(s,e,t);await Z4(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await Tc(a)}async function n9(a,e){e&&ki(a).X_&&await(async function(s,l){if((function(d){return zR(d)&&d!==se.ABORTED})(l.code)){const c=s.Ta.shift();ki(s).B_(),await Z4(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Tc(s)}})(a,e),e5(a)&&t5(a)}async function o_(a,e){const t=De(a);t.asyncQueue.verifyOperationInProgress(),me(zl,"RemoteStore received new credentials");const s=Hl(t);t.Ea.add(3),await Ld(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zm(t)}async function ax(a,e){const t=De(a);e?(t.Ea.delete(2),await zm(t)):e||(t.Ea.add(2),await Ld(t),t.Ra.set("Unknown"))}function Sc(a){return a.ma||(a.ma=(function(t,s,l){const c=De(t);return c.sa(),new B8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(a.datastore,a.asyncQueue,{Xo:K8.bind(null,a),t_:Q8.bind(null,a),r_:Y8.bind(null,a),H_:X8.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),oy(a)?ly(a):a.Ra.set("Unknown")):(await a.ma.stop(),W4(a))}))),a.ma}function ki(a){return a.fa||(a.fa=(function(t,s,l){const c=De(t);return c.sa(),new q8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z8.bind(null,a),r_:n9.bind(null,a),ta:e9.bind(null,a),na:t9.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Tc(a)):(await a.fa.stop(),a.Ta.length>0&&(me(zl,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new cy(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(a,e){if(an("AsyncQueue",`${e}: ${a}`),Vi(a))return new ve(se.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=zu(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.ga=new Vt(Ne.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class xc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new xc(e,t,Qo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class r9{constructor(){this.queries=u_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=De(t),c=l.queries;l.queries=u_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ve(se.ABORTED,"Firestore shutting down"))}}function u_(){return new Ca((a=>$j(a)),Rm)}async function dy(a,e){const t=De(a);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new s9,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=uy(d,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&fy(t)}async function hy(a,e){const t=De(a),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function a9(a,e){const t=De(a);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&fy(t)}function i9(a,e,t){const s=De(a),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function fy(a){a.Ca.forEach((e=>{e.next()}))}var ix,d_;(d_=ix||(ix={})).Ma="default",d_.Cache="cache";class my{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new xc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ix.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.key=e}}class s5{constructor(e){this.key=e}}class l9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=Qj(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new c_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,b)=>{const N=l.get(w),M=Md(this.query,b)?b:null,z=!!N&&this.mutatedKeys.has(N.key),B=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let q=!1;N&&M?N.data.isEqual(M.data)?z!==B&&(s.track({type:3,doc:M}),q=!0):this.su(N,M)||(s.track({type:2,doc:M}),q=!0,(g&&this.eu(M,g)>0||x&&this.eu(M,x)<0)&&(f=!0)):!N&&M?(s.track({type:0,doc:M}),q=!0):N&&!M&&(s.track({type:1,doc:N}),q=!0,(g||x)&&(f=!0)),q&&(M?(d=d.add(M),c=B?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,b)=>(function(M,z){const B=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:q})}};return B(M)-B(z)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new xc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new s5(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new n5(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ac="SyncEngine";class o9{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class c9{constructor(e){this.key=e,this.hu=!1}}class u9{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ca((f=>$j(f)),Rm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Ne.comparator),this.Au=new Map,this.Ru=new ey,this.Vu={},this.mu=new Map,this.fu=Ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function d9(a,e,t=!0){const s=Bm(a);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await r5(s,e,t,!0),l}async function h9(a,e){const t=Bm(a);await r5(t,e,!0,!1)}async function r5(a,e,t,s){const l=await cm(a.localStore,Cs(e)),c=l.targetId,d=a.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await gy(a,e,c,d==="current",l.resumeToken)),a.isPrimaryClient&&t&&Um(a.remoteStore,l),f}async function gy(a,e,t,s,l){a.pu=(b,N,M)=>(async function(B,q,re,ue){let U=q.view.ru(re);U.Cs&&(U=await nx(B.localStore,q.query,!1).then((({documents:S})=>q.view.ru(S,U))));const fe=ue&&ue.targetChanges.get(q.targetId),ae=ue&&ue.targetMismatches.get(q.targetId)!=null,pe=q.view.applyChanges(U,B.isPrimaryClient,fe,ae);return lx(B,q.targetId,pe.au),pe.snapshot})(a,b,N,M);const c=await nx(a.localStore,e,!0),d=new l9(e,c.Qs),f=d.ru(c.documents),g=Pd.createSynthesizedTargetChangeForCurrentChange(t,s&&a.onlineState!=="Offline",l),x=d.applyChanges(f,a.isPrimaryClient,g);lx(a,t,x.au);const w=new o9(e,t,d);return a.Tu.set(e,w),a.Iu.has(t)?a.Iu.get(t).push(e):a.Iu.set(t,[e]),x.snapshot}async function f9(a,e,t){const s=De(a),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Rm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await gc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&pc(s.remoteStore,l.targetId),yc(s,l.targetId)})).catch(Oi)):(yc(s,l.targetId),await gc(s.localStore,l.targetId,!0))}async function m9(a,e){const t=De(a),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),pc(t.remoteStore,s.targetId))}async function g9(a,e,t){const s=by(a);try{const l=await(function(d,f){const g=De(d),x=Tt.now(),w=f.reduce(((M,z)=>M.add(z.key)),et());let b,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let z=As(),B=et();return g.Ns.getEntries(M,w).next((q=>{z=q,z.forEach(((re,ue)=>{ue.isValidDocument()||(B=B.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,z))).next((q=>{b=q;const re=[];for(const ue of f){const U=PR(ue,b.get(ue.key).overlayedDocument);U!=null&&re.push(new ka(ue.key,U,Vj(U.value.mapValue),_n.exists(!0)))}return g.mutationQueue.addMutationBatch(M,x,re,f)})).next((q=>{N=q;const re=q.applyToLocalDocumentSet(b,B);return g.documentOverlayCache.saveOverlays(M,q.batchId,re)}))})).then((()=>({batchId:N.batchId,changes:Xj(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Vt(Ge)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Li(s,l.changes),await Tc(s.remoteStore)}catch(l){const c=uy(l,"Failed to persist write");t.reject(c)}}async function a5(a,e){const t=De(a);try{const s=await D8(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(Ve(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ve(d.hu,14607):l.removedDocuments.size>0&&(Ve(d.hu,42227),d.hu=!1))})),await Li(t,s,e)}catch(s){await Oi(s)}}function h_(a,e,t){const s=De(a);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=De(d);g.onlineState=f;let x=!1;g.queries.forEach(((w,b)=>{for(const N of b.Sa)N.va(f)&&(x=!0)})),x&&fy(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function p9(a,e,t){const s=De(a);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Vt(Ne.comparator);d=d.insert(c,Wt.newNoDocument(c,Be.min()));const f=et().add(c),g=new Vd(Be.min(),new Map,new Vt(Ge),d,f);await a5(s,g),s.du=s.du.remove(c),s.Au.delete(e),yy(s)}else await gc(s.localStore,e,!1).then((()=>yc(s,e,t))).catch(Oi)}async function x9(a,e){const t=De(a),s=e.batch.batchId;try{const l=await R8(t.localStore,e);xy(t,s,null),py(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Li(t,l)}catch(l){await Oi(l)}}async function y9(a,e,t){const s=De(a);try{const l=await(function(d,f){const g=De(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let w;return g.mutationQueue.lookupMutationBatch(x,f).next((b=>(Ve(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(x,b)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,w))).next((()=>g.localDocuments.getDocuments(x,w)))}))})(s.localStore,e);xy(s,e,t),py(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Li(s,l)}catch(l){await Oi(l)}}function py(a,e){(a.mu.get(e)||[]).forEach((t=>{t.resolve()})),a.mu.delete(e)}function xy(a,e,t){const s=De(a);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function yc(a,e,t=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Iu.get(e))a.Tu.delete(s),t&&a.Pu.yu(s,t);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((s=>{a.Ru.containsKey(s)||i5(a,s)}))}function i5(a,e){a.Eu.delete(e.path.canonicalString());const t=a.du.get(e);t!==null&&(pc(a.remoteStore,t),a.du=a.du.remove(e),a.Au.delete(t),yy(a))}function lx(a,e,t){for(const s of t)s instanceof n5?(a.Ru.addReference(s.key,e),b9(a,s)):s instanceof s5?(me(Ac,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,e),a.Ru.containsKey(s.key)||i5(a,s.key)):Ae(19791,{wu:s})}function b9(a,e){const t=e.key,s=t.path.canonicalString();a.du.get(t)||a.Eu.has(s)||(me(Ac,"New document in limbo: "+t),a.Eu.add(s),yy(a))}function yy(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const t=new Ne(bt.fromString(e)),s=a.fu.next();a.Au.set(s,new c9(t)),a.du=a.du.insert(t,s),Um(a.remoteStore,new va(Cs(Dd(t.path)),s,"TargetPurposeLimboResolution",ds.ce))}}async function Li(a,e,t){const s=De(a),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var w;if((x||t)&&s.isPrimaryClient){const b=x?!x.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){l.push(x);const b=sy.As(g.targetId,x);c.push(b)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const w=De(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>G.forEach(x,(N=>G.forEach(N.Es,(M=>w.persistence.referenceDelegate.addReference(b,N.targetId,M))).next((()=>G.forEach(N.ds,(M=>w.persistence.referenceDelegate.removeReference(b,N.targetId,M)))))))))}catch(b){if(!Vi(b))throw b;me(ry,"Failed to update sequence numbers: "+b)}for(const b of x){const N=b.targetId;if(!b.fromCache){const M=w.Ms.get(N),z=M.snapshotVersion,B=M.withLastLimboFreeSnapshotVersion(z);w.Ms=w.Ms.insert(N,B)}}})(s.localStore,c))}async function v9(a,e){const t=De(a);if(!t.currentUser.isEqual(e)){me(Ac,"User change. New user:",e.toKey());const s=await z4(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new ve(se.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Li(t,s.Ls)}}function w9(a,e){const t=De(a),s=t.Au.get(e);if(s&&s.hu)return et().add(s.key);{let l=et();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function _9(a,e){const t=De(a),s=await nx(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&lx(t,e.targetId,l.au),l}async function N9(a,e){const t=De(a);return q4(t.localStore,e).then((s=>Li(t,s)))}async function j9(a,e,t,s){const l=De(a),c=await(function(f,g){const x=De(f),w=De(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(b=>w.er(b,g).next((N=>N?x.localDocuments.getDocuments(b,N):G.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await Tc(l.remoteStore):t==="acknowledged"||t==="rejected"?(xy(l,e,s||null),py(l,e),(function(f,g){De(De(f).mutationQueue).ir(g)})(l.localStore,e)):Ae(6720,"Unknown batchState",{Su:t}),await Li(l,c)):me(Ac,"Cannot apply mutation batch with id: "+e)}async function E9(a,e){const t=De(a);if(Bm(t),by(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await f_(t,s.toArray());t.gu=!0,await ax(t.remoteStore,!0);for(const c of l)Um(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(yc(t,d),gc(t.localStore,d,!0)))),pc(t.remoteStore,d)})),await l,await f_(t,s),(function(d){const f=De(d);f.Au.forEach(((g,x)=>{pc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Vt(Ne.comparator)})(t),t.gu=!1,await ax(t.remoteStore,!1)}}async function f_(a,e,t){const s=De(a),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await cm(s.localStore,Cs(g[0]));for(const x of g){const w=s.Tu.get(x),b=await _9(s,w);b.snapshot&&c.push(b.snapshot)}}else{const x=await B4(s.localStore,d);f=await cm(s.localStore,x),await gy(s,l5(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function l5(a){return Hj(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function T9(a){return(function(t){return De(De(t).persistence).Ts()})(De(a).localStore)}async function S9(a,e,t,s){const l=De(a);if(l.gu)return void me(Ac,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await q4(l.localStore,Kj(c[0])),f=Vd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ln.EMPTY_BYTE_STRING);await Li(l,d,f);break}case"rejected":await gc(l.localStore,e,!0),yc(l,e,s);break;default:Ae(64155,t)}}async function A9(a,e,t){const s=Bm(a);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){me(Ac,"Adding an already active target "+l);continue}const c=await B4(s.localStore,l),d=await cm(s.localStore,c);await gy(s,l5(c),d.targetId,!1,d.resumeToken),Um(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await gc(s.localStore,l,!1).then((()=>{pc(s.remoteStore,l),yc(s,l)})).catch(Oi)}}function Bm(a){const e=De(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=a5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p9.bind(null,e),e.Pu.H_=a9.bind(null,e.eventManager),e.Pu.yu=i9.bind(null,e.eventManager),e}function by(a){const e=De(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y9.bind(null,e),e}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return L4(this.persistence,new P4,e.initialUser,this.serializer)}Cu(e){return new ty(Pm.mi,this.serializer)}Du(e){return new K4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class I9 extends bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ve(this.persistence.referenceDelegate instanceof om,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new k4(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new ty((s=>om.mi(s,t)),this.serializer)}}class o5 extends bd{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await by(this.xu.syncEngine),await Tc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return L4(this.persistence,new P4,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new k4(s,e.asyncQueue,t)}Mu(e,t){const s=new Bk(t,this.persistence);return new Uk(e.asyncQueue,s)}Cu(e){const t=V4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new ny(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Q4(),Pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new K4}}class C9 extends o5{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof up&&(this.sharedClientState.syncEngine={Co:j9.bind(null,t),vo:S9.bind(null,t),Fo:A9.bind(null,t),Ts:T9.bind(null,t),Do:N9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await E9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Q4();if(!up.v(t))throw new ve(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=V4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class vd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>h_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=v9.bind(null,this.syncEngine),await ax(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new r9})()}createDatastore(e){const t=Lm(e.databaseInfo.databaseId),s=(function(c){return new U8(c)})(e.databaseInfo);return(function(c,d,f,g){return new H8(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new $8(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>h_(this.syncEngine,t,0)),(function(){return i_.v()?new i_:new V8})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,w){const b=new u9(l,c,d,f,g,x);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=De(l);me(zl,"RemoteStore shutting down."),c.Ea.add(5),await Ld(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}vd.provider={build:()=>new vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):an("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="FirestoreClient";class k9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Gn.UNAUTHENTICATED,this.clientId=Dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{me(Ri,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(me(Ri,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=uy(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function hp(a,e){a.asyncQueue.verifyOperationInProgress(),me(Ri,"Initializing OfflineComponentProvider");const t=a.configuration;await e.initialize(t);let s=t.initialUser;a.setCredentialChangeListener((async l=>{s.isEqual(l)||(await z4(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function m_(a,e){a.asyncQueue.verifyOperationInProgress();const t=await R9(a);me(Ri,"Initializing OnlineComponentProvider"),await e.initialize(t,a.configuration),a.setCredentialChangeListener((s=>o_(e.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,l)=>o_(e.remoteStore,l))),a._onlineComponents=e}async function R9(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){me(Ri,"Using user provided OfflineComponentProvider");try{await hp(a,a._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;od("Error using user provided cache. Falling back to memory cache: "+t),await hp(a,new bd)}}else me(Ri,"Using default OfflineComponentProvider"),await hp(a,new I9(void 0));return a._offlineComponents}async function c5(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(me(Ri,"Using user provided OnlineComponentProvider"),await m_(a,a._uninitializedComponentsProvider._online)):(me(Ri,"Using default OnlineComponentProvider"),await m_(a,new vd))),a._onlineComponents}function D9(a){return c5(a).then((e=>e.syncEngine))}async function fm(a){const e=await c5(a),t=e.eventManager;return t.onListen=d9.bind(null,e.syncEngine),t.onUnlisten=f9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m9.bind(null,e.syncEngine),t}function M9(a,e,t={}){const s=new $r;return a.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new vy({next:N=>{w.Nu(),d.enqueueAndForget((()=>hy(c,b)));const M=N.docs.has(f);!M&&N.fromCache?x.reject(new ve(se.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&N.fromCache&&g&&g.source==="server"?x.reject(new ve(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),b=new my(Dd(f.path),w,{includeMetadataChanges:!0,qa:!0});return dy(c,b)})(await fm(a),a.asyncQueue,e,t,s))),s.promise}function u5(a,e,t={}){const s=new $r;return a.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new vy({next:N=>{w.Nu(),d.enqueueAndForget((()=>hy(c,b))),N.fromCache&&g.source==="server"?x.reject(new ve(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),b=new my(f,w,{includeMetadataChanges:!0,qa:!0});return dy(c,b)})(await fm(a),a.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="firestore.googleapis.com",p_=!0;class x_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O9,this.ssl=p_}else this.host=e.host,this.ssl=e.ssl??p_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C4)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d5(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wy{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Sk;switch(s.type){case"firstParty":return new Ck(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=g_.get(t);s&&(me("ComponentProvider","Removing Datastore"),g_.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class Zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Cd(t,Zt._jsonSchema))return new Zt(e,s||null,new Ne(bt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:bn("string",Zt._jsonSchemaVersion),referencePath:bn("string")};class Ei extends Jr{constructor(e,t,s){super(e,t,Dd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Ne(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function Ot(a,e,...t){if(a=$t(a),cj("collection","path",e),a instanceof wy){const s=bt.fromString(e,...t);return l2(s),new Ei(a,null,s)}{if(!(a instanceof Zt||a instanceof Ei))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(bt.fromString(e,...t));return l2(s),new Ei(a.firestore,null,s)}}function qn(a,e,...t){if(a=$t(a),arguments.length===1&&(e=Dx.newId()),cj("doc","path",e),a instanceof wy){const s=bt.fromString(e,...t);return i2(s),new Zt(a,null,new Ne(s))}{if(!(a instanceof Zt||a instanceof Ei))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(bt.fromString(e,...t));return i2(s),new Zt(a.firestore,a instanceof Ei?a.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="AsyncQueue";class b_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Y4(this,"async_queue_retry"),this._c=()=>{const s=Pf();s&&me(y_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vi(e))throw e;me(y_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,an("INTERNAL UNHANDLED ERROR: ",v_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=cy.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ae(47125,{Pc:v_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v_(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(a){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(a,["next","error","complete"])}class pr extends wy{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new b_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function V9(a,e,t){t||(t=Zf);const s=Fl(a,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(Ai(c,e))return l;throw new ve(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C4)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&vc(e.host)&&oN(e.host),s.initialize({options:e,instanceIdentifier:t})}function Ic(a){if(a._terminated)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||P9(a),a._firestoreClient}function P9(a){var s,l,c;const e=a._freezeSettings(),t=(function(f,g,x,w){return new gR(f,g,x,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,d5(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(a._databaseId,((s=a._app)==null?void 0:s.options.appId)||"",a._persistenceKey,e);a._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new k9(a._authCredentials,a._appCheckCredentials,a._queue,t,a._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(ln.fromBase64String(e))}catch(t){throw new ve(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Js(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cd(e,Js._jsonSchema))return Js.fromBase64String(e.bytes)}}Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:bn("string",Js._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kr._jsonSchemaVersion}}static fromJSON(e){if(Cd(e,Kr._jsonSchema))return new Kr(e.latitude,e.longitude)}}Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:bn("string",Kr._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cd(e,Qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qr(e.vectorValues);throw new ve(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:bn("string",Qr._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=/^__.*__$/;class z9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class h5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f5(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:a})}}class _y{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _y({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(f5(this.Ac)&&L9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class U9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Lm(e)}Cc(e,t,s,l=!1){return new _y({Ac:e,methodName:t,Dc:s,path:Qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bd(a){const e=a._freezeSettings(),t=Lm(a._databaseId);return new U9(a._databaseId,!!e.ignoreUndefinedProperties,t)}function Ny(a,e,t,s,l,c={}){const d=a.Cc(c.merge||c.mergeFields?2:0,e,t,l);Ty("Data must be an object, but it was:",d,s);const f=p5(s,d);let g,x;if(c.merge)g=new hs(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const N=ox(e,b,t);if(!d.contains(N))throw new ve(se.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);y5(w,N)||w.push(N)}g=new hs(w),x=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,x=d.fieldTransforms;return new z9(new Kn(f),g,x)}class qm extends Ud{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qm}}class jy extends Ud{_toFieldTransform(e){return new $x(e.path,new uc)}isEqual(e){return e instanceof jy}}class Ey extends Ud{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new fc(e.serializer,Zj(e.serializer,this.Fc));return new $x(e.path,t)}isEqual(e){return e instanceof Ey&&this.Fc===e.Fc}}function m5(a,e,t,s){const l=a.Cc(1,e,t);Ty("Data must be an object, but it was:",l,s);const c=[],d=Kn.empty();Pi(s,((g,x)=>{const w=Sy(e,g,t);x=$t(x);const b=l.yc(w);if(x instanceof qm)c.push(w);else{const N=qd(x,b);N!=null&&(c.push(w),d.set(w,N))}}));const f=new hs(c);return new h5(d,f,l.fieldTransforms)}function g5(a,e,t,s,l,c){const d=a.Cc(1,e,t),f=[ox(e,s,t)],g=[l];if(c.length%2!=0)throw new ve(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(ox(e,c[N])),g.push(c[N+1]);const x=[],w=Kn.empty();for(let N=f.length-1;N>=0;--N)if(!y5(x,f[N])){const M=f[N];let z=g[N];z=$t(z);const B=d.yc(M);if(z instanceof qm)x.push(M);else{const q=qd(z,B);q!=null&&(x.push(M),w.set(M,q))}}const b=new hs(x);return new h5(w,b,d.fieldTransforms)}function B9(a,e,t,s=!1){return qd(t,a.Cc(s?4:3,e))}function qd(a,e){if(x5(a=$t(a)))return Ty("Unsupported field value:",e,a),p5(a,e);if(a instanceof Ud)return(function(s,l){if(!f5(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=qd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(a,e)}return(function(s,l){if((s=$t(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Zj(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Tt.fromDate(s);return{timestampValue:mc(l.serializer,c)}}if(s instanceof Tt){const c=new Tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(l.serializer,c)}}if(s instanceof Kr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Js)return{bytesValue:u4(l.serializer,s._byteString)};if(s instanceof Zt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Jx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Qr)return(function(d,f){return{mapValue:{fields:{[Bx]:{stringValue:qx},[ic]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Gx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${jm(s)}`)})(a,e)}function p5(a,e){const t={};return Sj(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(a,((s,l)=>{const c=qd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function x5(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Tt||a instanceof Kr||a instanceof Js||a instanceof Zt||a instanceof Ud||a instanceof Qr)}function Ty(a,e,t){if(!x5(t)||!uj(t)){const s=jm(t);throw s==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+s)}}function ox(a,e,t){if((e=$t(e))instanceof zd)return e._internalPath;if(typeof e=="string")return Sy(a,e);throw mm("Field path arguments must be of type string or ",a,!1,void 0,t)}const q9=new RegExp("[~\\*/\\[\\]]");function Sy(a,e,t){if(e.search(q9)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,t)}}function mm(a,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new ve(se.INVALID_ARGUMENT,f+a+g)}function y5(a,e){return a.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class F9 extends b5{data(){return super.data()}}function Fm(a,e){return typeof e=="string"?Sy(a,e):e instanceof zd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new ve(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ay{}class Iy extends Ay{}function kn(a,e,...t){let s=[];e instanceof Ay&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof Cy)).length,f=c.filter((g=>g instanceof Hm)).length;if(d>1||d>0&&f>0)throw new ve(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)a=l._apply(a);return a}class Hm extends Iy{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hm(e,t,s)}_apply(e){const t=this._parse(e);return w5(e._query,t),new Jr(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=Bd(e.firestore);return(function(c,d,f,g,x,w,b){let N;if(x.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ve(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){N_(b,w);const z=[];for(const B of b)z.push(__(g,c,B));N={arrayValue:{values:z}}}else N=__(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||N_(b,w),N=B9(f,d,b,w==="in"||w==="not-in");return ot.create(x,w,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rn(a,e,t){const s=e,l=Fm("where",a);return Hm._create(l,s,t)}class Cy extends Ay{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)w5(d,g),d=Qp(d,g)})(e._query,t),new Jr(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends Iy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ky(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yd(c,d)})(e._query,this._field,this._direction);return new Jr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new jc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function Fd(a,e="asc"){const t=e,s=Fm("orderBy",a);return ky._create(s,t)}class Ry extends Iy{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ry(e,t,s)}_apply(e){return new Jr(e.firestore,e.converter,nm(e._query,this._limit,this._limitType))}}function Di(a){return Pk("limit",a),Ry._create("limit",a,"F")}function __(a,e,t){if(typeof(t=$t(t))=="string"){if(t==="")throw new ve(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gj(e)&&t.indexOf("/")!==-1)throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(bt.fromString(t));if(!Ne.isDocumentKey(s))throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pd(a,new Ne(s))}if(t instanceof Zt)return pd(a,t._key);throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(t)}.`)}function N_(a,e){if(!Array.isArray(a)||a.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w5(a,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class H9{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Pi(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[ic].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Ht(d.doubleValue)));return new Qr(t)}convertGeoPoint(e){return new Kr(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Cm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const t=Ea(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=bt.fromString(e);Ve(v4(s),9688,{name:e});const l=new Ml(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return l.isEqual(t)||an(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(a,e,t){let s;return s=a?t&&(t.merge||t.mergeFields)?a.toFirestore(e,t):a.toFirestore(e):e,s}class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tl extends b5{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Fm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Tl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Tl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tl._jsonSchema={type:bn("string",Tl._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class Lf extends Tl{data(e={}){return super.data(e)}}class Ti{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new qu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Lf(this._firestore,this._userDataWriter,s.key,s,new qu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new Lf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new qu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new Lf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new qu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,w=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),w=d.indexOf(f.doc.key)),{type:G9(f.type),doc:g,oldIndex:x,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ti._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G9(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(a){a=Yn(a,Zt);const e=Yn(a.firestore,pr);return M9(Ic(e),a._key).then((t=>N5(e,a,t)))}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:bn("string",Ti._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class Gm extends H9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function Jn(a){a=Yn(a,Jr);const e=Yn(a.firestore,pr),t=Ic(e),s=new Gm(e);return v5(a._query),u5(t,a._query).then((l=>new Ti(e,s,a,l)))}function _5(a){a=Yn(a,Jr);const e=Yn(a.firestore,pr),t=Ic(e),s=new Gm(e);return u5(t,a._query,{source:"server"}).then((l=>new Ti(e,s,a,l)))}function $m(a,e,t){a=Yn(a,Zt);const s=Yn(a.firestore,pr),l=Dy(a.converter,e,t);return Gd(s,[Ny(Bd(s),"setDoc",a._key,l,a.converter!==null,t).toMutation(a._key,_n.none())])}function bc(a,e,t,...s){a=Yn(a,Zt);const l=Yn(a.firestore,pr),c=Bd(l);let d;return d=typeof(e=$t(e))=="string"||e instanceof zd?g5(c,"updateDoc",a._key,e,t,s):m5(c,"updateDoc",a._key,e),Gd(l,[d.toMutation(a._key,_n.exists(!0))])}function Hd(a){return Gd(Yn(a.firestore,pr),[new Od(a._key,_n.none())])}function Sa(a,e){const t=Yn(a.firestore,pr),s=qn(a),l=Dy(a.converter,e);return Gd(t,[Ny(Bd(a.firestore),"addDoc",s._key,l,a.converter!==null,{}).toMutation(s._key,_n.exists(!1))]).then((()=>s))}function K9(a,...e){var g,x,w;a=$t(a);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||w_(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(w_(e[s])){const b=e[s];e[s]=(g=b.next)==null?void 0:g.bind(b),e[s+1]=(x=b.error)==null?void 0:x.bind(b),e[s+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,d,f;if(a instanceof Zt)d=Yn(a.firestore,pr),f=Dd(a._key.path),c={next:b=>{e[s]&&e[s](N5(d,a,b))},error:e[s+1],complete:e[s+2]};else{const b=Yn(a,Jr);d=Yn(b.firestore,pr),f=b._query;const N=new Gm(d);c={next:M=>{e[s]&&e[s](new Ti(d,N,b,M))},error:e[s+1],complete:e[s+2]},v5(a._query)}return(function(N,M,z,B){const q=new vy(B),re=new my(M,q,z);return N.asyncQueue.enqueueAndForget((async()=>dy(await fm(N),re))),()=>{q.Nu(),N.asyncQueue.enqueueAndForget((async()=>hy(await fm(N),re)))}})(Ic(d),f,l,c)}function Gd(a,e){return(function(s,l){const c=new $r;return s.asyncQueue.enqueueAndForget((async()=>g9(await D9(s),l,c))),c.promise})(Ic(a),e)}function N5(a,e,t){const s=t.docs.get(e._key),l=new Gm(a);return new Tl(a,l,e._key,s,new qu(t.hasPendingWrites,t.fromCache),e.converter)}class Q9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=W9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Y9(a){return new Q9(a)}class X9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vd.provider,this._offlineComponentProvider={build:t=>new o5(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class J9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vd.provider,this._offlineComponentProvider={build:t=>new C9(t,e==null?void 0:e.cacheSizeBytes)}}}function W9(a){return new X9(a==null?void 0:a.forceOwnership)}function Z9(){return new J9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bd(e)}set(e,t,s){this._verifyNotCommitted();const l=fp(e,this._firestore),c=Dy(l.converter,t,s),d=Ny(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,_n.none())),this}update(e,t,s,...l){this._verifyNotCommitted();const c=fp(e,this._firestore);let d;return d=typeof(t=$t(t))=="string"||t instanceof zd?g5(this._dataReader,"WriteBatch.update",c._key,t,s,l):m5(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fp(e,this._firestore);return this._mutations=this._mutations.concat(new Od(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fp(a,e){if((a=$t(a)).firestore!==e)throw new ve(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function Zs(){return new jy("serverTimestamp")}function cx(a){return new Ey("increment",a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(a){return Ic(a=Yn(a,pr)),new e7(a,(e=>Gd(a,e)))}(function(e,t=!0){(function(l){Nc=l})(wc),Yr(new mr("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new pr(new Ak(s.getProvider("auth-internal")),new kk(d,s.getProvider("app-check-internal")),(function(x,w){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new ve(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(x.options.projectId,w)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ws(n2,s2,e),Ws(n2,s2,"esm2020")})();const j5="@firebase/installations",My="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=1e4,T5=`w:${My}`,S5="FIS_v2",n7="https://firebaseinstallations.googleapis.com/v1",s7=3600*1e3,r7="installations",a7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ul=new ql(r7,a7,i7);function A5(a){return a instanceof yr&&a.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5({projectId:a}){return`${n7}/projects/${a}/installations`}function C5(a){return{token:a.token,requestStatus:2,expiresIn:o7(a.expiresIn),creationTime:Date.now()}}async function k5(a,e){const s=(await e.json()).error;return Ul.create("request-failed",{requestName:a,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function R5({apiKey:a}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a})}function l7(a,{refreshToken:e}){const t=R5(a);return t.append("Authorization",c7(e)),t}async function D5(a){const e=await a();return e.status>=500&&e.status<600?a():e}function o7(a){return Number(a.replace("s","000"))}function c7(a){return`${S5} ${a}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7({appConfig:a,heartbeatServiceProvider:e},{fid:t}){const s=I5(a),l=R5(a),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:S5,appId:a.appId,sdkVersion:T5},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await D5(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:C5(x.authToken)}}else throw await k5("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(a){return new Promise(e=>{setTimeout(e,a)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(a){return btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=/^[cdef][\w-]{21}$/,ux="";function f7(){try{const a=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(a),a[0]=112+a[0]%16;const t=m7(a);return h7.test(t)?t:ux}catch{return ux}}function m7(a){return d7(a).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(a){return`${a.appName}!${a.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new Map;function V5(a,e){const t=Km(a);P5(t,e),g7(t,e)}function P5(a,e){const t=O5.get(a);if(t)for(const s of t)s(e)}function g7(a,e){const t=p7();t&&t.postMessage({key:a,fid:e}),x7()}let wl=null;function p7(){return!wl&&"BroadcastChannel"in self&&(wl=new BroadcastChannel("[Firebase] FID Change"),wl.onmessage=a=>{P5(a.data.key,a.data.fid)}),wl}function x7(){O5.size===0&&wl&&(wl.close(),wl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="firebase-installations-database",b7=1,Bl="firebase-installations-store";let mp=null;function Oy(){return mp||(mp=pN(y7,b7,{upgrade:(a,e)=>{switch(e){case 0:a.createObjectStore(Bl)}}})),mp}async function gm(a,e){const t=Km(a),l=(await Oy()).transaction(Bl,"readwrite"),c=l.objectStore(Bl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&V5(a,e.fid),e}async function L5(a){const e=Km(a),s=(await Oy()).transaction(Bl,"readwrite");await s.objectStore(Bl).delete(e),await s.done}async function Qm(a,e){const t=Km(a),l=(await Oy()).transaction(Bl,"readwrite"),c=l.objectStore(Bl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&V5(a,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(a){let e;const t=await Qm(a.appConfig,s=>{const l=v7(s),c=w7(a,l);return e=c.registrationPromise,c.installationEntry});return t.fid===ux?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function v7(a){const e=a||{fid:f7(),registrationStatus:0};return z5(e)}function w7(a,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Ul.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=_7(a,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:N7(a)}:{installationEntry:e}}async function _7(a,e){try{const t=await u7(a,e);return gm(a.appConfig,t)}catch(t){throw A5(t)&&t.customData.serverCode===409?await L5(a.appConfig):await gm(a.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function N7(a){let e=await j_(a.appConfig);for(;e.registrationStatus===1;)await M5(100),e=await j_(a.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Vy(a);return s||t}return e}function j_(a){return Qm(a,e=>{if(!e)throw Ul.create("installation-not-found");return z5(e)})}function z5(a){return j7(a)?{fid:a.fid,registrationStatus:0}:a}function j7(a){return a.registrationStatus===1&&a.registrationTime+E5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7({appConfig:a,heartbeatServiceProvider:e},t){const s=T7(a,t),l=l7(a,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:T5,appId:a.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await D5(()=>fetch(s,f));if(g.ok){const x=await g.json();return C5(x)}else throw await k5("Generate Auth Token",g)}function T7(a,{fid:e}){return`${I5(a)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(a,e=!1){let t;const s=await Qm(a.appConfig,c=>{if(!U5(c))throw Ul.create("not-registered");const d=c.authToken;if(!e&&I7(d))return c;if(d.requestStatus===1)return t=S7(a,e),c;{if(!navigator.onLine)throw Ul.create("app-offline");const f=k7(c);return t=A7(a,f),f}});return t?await t:s.authToken}async function S7(a,e){let t=await E_(a.appConfig);for(;t.authToken.requestStatus===1;)await M5(100),t=await E_(a.appConfig);const s=t.authToken;return s.requestStatus===0?Py(a,e):s}function E_(a){return Qm(a,e=>{if(!U5(e))throw Ul.create("not-registered");const t=e.authToken;return R7(t)?{...e,authToken:{requestStatus:0}}:e})}async function A7(a,e){try{const t=await E7(a,e),s={...e,authToken:t};return await gm(a.appConfig,s),t}catch(t){if(A5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await L5(a.appConfig);else{const s={...e,authToken:{requestStatus:0}};await gm(a.appConfig,s)}throw t}}function U5(a){return a!==void 0&&a.registrationStatus===2}function I7(a){return a.requestStatus===2&&!C7(a)}function C7(a){const e=Date.now();return e<a.creationTime||a.creationTime+a.expiresIn<e+s7}function k7(a){const e={requestStatus:1,requestTime:Date.now()};return{...a,authToken:e}}function R7(a){return a.requestStatus===1&&a.requestTime+E5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7(a){const e=a,{installationEntry:t,registrationPromise:s}=await Vy(e);return s?s.catch(console.error):Py(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(a,e=!1){const t=a;return await O7(t),(await Py(t,e)).token}async function O7(a){const{registrationPromise:e}=await Vy(a);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(a){if(!a||!a.options)throw gp("App Configuration");if(!a.name)throw gp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!a.options[t])throw gp(t);return{appName:a.name,projectId:a.options.projectId,apiKey:a.options.apiKey,appId:a.options.appId}}function gp(a){return Ul.create("missing-app-config-values",{valueName:a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5="installations",P7="installations-internal",L7=a=>{const e=a.getProvider("app").getImmediate(),t=V7(e),s=Fl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},z7=a=>{const e=a.getProvider("app").getImmediate(),t=Fl(e,B5).getImmediate();return{getId:()=>D7(t),getToken:l=>M7(t,l)}};function U7(){Yr(new mr(B5,L7,"PUBLIC")),Yr(new mr(P7,z7,"PRIVATE"))}U7();Ws(j5,My);Ws(j5,My,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="analytics",B7="firebase_id",q7="origin",F7=60*1e3,H7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ly="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new vm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ks=new ql("analytics","Analytics",G7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(a){if(!a.startsWith(Ly)){const e=ks.create("invalid-gtag-resource",{gtagURL:a});return ns.warn(e.message),""}return a}function q5(a){return Promise.all(a.map(e=>e.catch(t=>t)))}function K7(a,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(a,e)),t}function Q7(a,e){const t=K7("firebase-js-sdk-policy",{createScriptURL:$7}),s=document.createElement("script"),l=`${Ly}?l=${a}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function Y7(a){let e=[];return Array.isArray(window[a])?e=window[a]:window[a]=e,e}async function X7(a,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await q5(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){ns.error(f)}a("config",l,c)}async function J7(a,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await q5(t);for(const g of d){const x=f.find(b=>b.measurementId===g),w=x&&e[x.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),a("event",s,l||{})}catch(c){ns.error(c)}}function W7(a,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await J7(a,e,t,f,g)}else if(c==="config"){const[f,g]=d;await X7(a,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;a("consent",f,g)}else if(c==="get"){const[f,g,x]=d;a("get",f,g,x)}else if(c==="set"){const[f]=d;a("set",f)}else a(c,...d)}catch(f){ns.error(f)}}return l}function Z7(a,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=W7(c,a,e,t),{gtagCore:c,wrappedGtag:window[l]}}function eD(a){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ly)&&t.src.includes(a))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=30,nD=1e3;class sD{constructor(e={},t=nD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const F5=new sD;function rD(a){return new Headers({Accept:"application/json","x-goog-api-key":a})}async function aD(a){var d;const{appId:e,apiKey:t}=a,s={method:"GET",headers:rD(t)},l=H7.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw ks.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function iD(a,e=F5,t){const{appId:s,apiKey:l,measurementId:c}=a.options;if(!s)throw ks.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw ks.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new cD;return setTimeout(async()=>{f.abort()},F7),H5({appId:s,apiKey:l,measurementId:c},d,f,e)}async function H5(a,{throttleEndTimeMillis:e,backoffCount:t},s,l=F5){var f;const{appId:c,measurementId:d}=a;try{await lD(s,e)}catch(g){if(d)return ns.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await aD(a);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!oD(x)){if(l.deleteThrottleMetadata(c),d)return ns.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const w=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?Sw(t,l.intervalMillis,tD):Sw(t,l.intervalMillis),b={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return l.setThrottleMetadata(c,b),ns.debug(`Calling attemptFetch again in ${w} millis`),H5(a,b,s,l)}}function lD(a,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);a.addEventListener(()=>{clearTimeout(c),s(ks.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function oD(a){if(!(a instanceof yr)||!a.customData)return!1;const e=Number(a.customData.httpStatus);return e===429||e===500||e===503||e===504}class cD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function uD(a,e,t,s,l){if(l&&l.global){a("event",t,s);return}else{const c=await e,d={...s,send_to:c};a("event",t,d)}}async function dD(a,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return a("set",l),Promise.resolve()}else{const l=await e;a("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(){if(_x())try{await fN()}catch(a){return ns.warn(ks.create("indexeddb-unavailable",{errorInfo:a==null?void 0:a.toString()}).message),!1}else return ns.warn(ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function fD(a,e,t,s,l,c,d){const f=iD(a);f.then(N=>{t[N.measurementId]=N.appId,a.options.measurementId&&N.measurementId!==a.options.measurementId&&ns.warn(`The measurement ID in the local Firebase config (${a.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>ns.error(N)),e.push(f);const g=hD().then(N=>{if(N)return s.getId()}),[x,w]=await Promise.all([f,g]);eD(c)||Q7(c,x.measurementId),l("js",new Date);const b=(d==null?void 0:d.config)??{};return b[q7]="firebase",b.update=!0,w!=null&&(b[B7]=w),l("config",x.measurementId,b),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.app=e}_delete(){return delete Yo[this.app.options.appId],Promise.resolve()}}let Yo={},T_=[];const S_={};let pp="dataLayer",gD="gtag",A_,zy,I_=!1;function pD(){const a=[];if(uN()&&a.push("This is a browser extension environment."),BA()||a.push("Cookies are not available."),a.length>0){const e=a.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=ks.create("invalid-analytics-context",{errorInfo:e});ns.warn(t.message)}}function xD(a,e,t){pD();const s=a.options.appId;if(!s)throw ks.create("no-app-id");if(!a.options.apiKey)if(a.options.measurementId)ns.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${a.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ks.create("no-api-key");if(Yo[s]!=null)throw ks.create("already-exists",{id:s});if(!I_){Y7(pp);const{wrappedGtag:c,gtagCore:d}=Z7(Yo,T_,S_,pp,gD);zy=c,A_=d,I_=!0}return Yo[s]=fD(a,T_,S_,e,A_,pp,t),new mD(a)}function yD(a=yN()){a=$t(a);const e=Fl(a,pm);return e.isInitialized()?e.getImmediate():bD(a)}function bD(a,e={}){const t=Fl(a,pm);if(t.isInitialized()){const l=t.getImmediate();if(Ai(e,t.getOptions()))return l;throw ks.create("already-initialized")}return t.initialize({options:e})}function vD(a,e,t){a=$t(a),dD(zy,Yo[a.app.options.appId],e,t).catch(s=>ns.error(s))}function wD(a,e,t,s){a=$t(a),uD(zy,Yo[a.app.options.appId],e,t,s).catch(l=>ns.error(l))}const C_="@firebase/analytics",k_="0.10.19";function _D(){Yr(new mr(pm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return xD(s,l,t)},"PUBLIC")),Yr(new mr("analytics-internal",a,"PRIVATE")),Ws(C_,k_),Ws(C_,k_,"esm2020");function a(e){try{const t=e.getProvider(pm).getImmediate();return{logEvent:(s,l,c)=>wD(t,s,l,c),setUserProperties:(s,l)=>vD(t,s,l)}}catch(t){throw ks.create("interop-component-reg-failed",{reason:t})}}}_D();const ND={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Uy=xN(ND),Sl=jk(Uy),Qe=V9(Uy,{localCache:Y9({tabManager:Z9()})});yD(Uy);const G5=k.createContext(void 0),jD=({children:a})=>{const[e,t]=k.useState(null),[s,l]=k.useState(!0),[c,d]=k.useState(!1),f=k.useRef(null),g=k.useRef(!1),x=z=>{if(!z)return!1;if(z.role==="teacher")return!0;if(z.isSubscriber!==!0||!z.subscriptionExpiry)return!1;const B=Date.now();let q=0;try{if(z.subscriptionExpiry.seconds)q=z.subscriptionExpiry.seconds*1e3;else if(typeof z.subscriptionExpiry=="string")q=new Date(z.subscriptionExpiry).getTime();else if(z.subscriptionExpiry instanceof Date)q=z.subscriptionExpiry.getTime();else return!1}catch(re){return console.error("Date parse error",re),!1}return q>B},w=(z,B)=>{f.current&&(f.current(),f.current=null);const q=qn(Qe,"users",z);f.current=K9(q,re=>{if(re.exists()){const ue=re.data(),U=x({...ue,role:(B==null?void 0:B.role)||ue.role});t(fe=>{const ae=fe||B||{};return{...ae,...ue,uid:z,role:(B==null?void 0:B.role)||ue.role||"student",isSubscriber:U,createdAt:ue.createdAt||ae.createdAt}})}else B&&t({...B,isSubscriber:B.role==="teacher"});l(!1)},re=>{console.error("Error syncing profile:",re),l(!1)})},b=(z,B)=>{localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",z),localStorage.setItem("teacherEmail",B);const q=`teacher-${B.split("@")[0]}`;let re="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";z.includes("")?re="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":z.includes("")&&(re="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj");const ue={uid:q,email:B,displayName:z,role:"teacher",avatar:re,gender:"male",isSubscriber:!0,createdAt:{seconds:Date.now()/1e3}};t(ue),l(!1),w(q,ue)},N=async()=>{try{f.current&&(f.current(),f.current=null),(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):(await fC(Sl),t(null))}catch(z){console.error("Logout error",z)}},M=async z=>{if(e)try{let B={...z};if(z.firstName!==void 0||z.lastName!==void 0){const re=z.firstName!==void 0?z.firstName:e.firstName||"",ue=z.lastName!==void 0?z.lastName:e.lastName||"";B.displayName=`${re} ${ue}`.trim()}const q=qn(Qe,"users",e.uid);await $m(q,B,{merge:!0}),t(re=>re?{...re,...B}:null)}catch(B){throw console.error("Error updating profile:",B),B}};return k.useEffect(()=>{const z=setTimeout(()=>{g.current||d(!0)},9e4);if(localStorage.getItem("isTeacher")==="true"){const q=localStorage.getItem("teacherName")||"",re=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";b(q,re),g.current=!0,clearTimeout(z)}else hC(Sl,async q=>{localStorage.getItem("isTeacher")!=="true"&&(g.current=!0,clearTimeout(z),q?w(q.uid,{uid:q.uid,email:q.email||"",displayName:"User",role:"student",isSubscriber:!1}):(t(null),l(!1)))});return()=>{f.current&&f.current(),clearTimeout(z)}},[]),r.jsx(G5.Provider,{value:{user:e,loading:s,logout:N,setTeacherSession:b,updateUserProfile:M},children:s?r.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),r.jsx(vt,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),r.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):a})},Ds=()=>{const a=k.useContext(G5);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},$5=({className:a})=>r.jsxs("svg",{viewBox:"0 0 200 200",className:a,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("defs",{children:r.jsx("filter",{id:"shadow",x:"-10%",y:"-10%",width:"120%",height:"120%",children:r.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"4",floodColor:"#000",floodOpacity:"0.25"})})}),r.jsx("path",{d:`M100 20 
           L165 85 
           C175 95 175 110 165 120 
           L135 150 
           L100 115 
           L130 85 
           C135 80 135 75 130 70 
           L100 40 
           L70 70 
           L95 95`,fill:"#F3F4F6",stroke:"#111827",strokeWidth:"6",strokeLinejoin:"round",strokeLinecap:"round"}),r.jsx("path",{d:`M100 180 
           L35 115 
           C25 105 25 90 35 80 
           L65 50 
           L100 85 
           L70 115 
           C65 120 65 125 70 130 
           L100 160 
           L130 130 
           L105 105`,fill:"#10B981",stroke:"#111827",strokeWidth:"6",strokeLinejoin:"round",strokeLinecap:"round"}),r.jsx("path",{d:"M95 95 L70 70",stroke:"#111827",strokeWidth:"6",strokeLinecap:"round"})]}),ED=({onLoginClick:a,onNavigate:e,onLogoutClick:t})=>{const[s,l]=k.useState(!1),[c,d]=k.useState(!1),{user:f}=Ds(),[g,x]=k.useState(!1),[w,b]=k.useState([]),[N,M]=k.useState(0),[z,B]=k.useState(!1),q=k.useRef(null);k.useEffect(()=>{const E=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[]),k.useEffect(()=>{const E=I=>{q.current&&!q.current.contains(I.target)&&x(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const re=async(E=!1)=>{if(!Sl.currentUser){b([]),M(0);return}const I=`etqan_notifications_${(f==null?void 0:f.uid)||"guest"}`,D=365*24*60*60*1e3,R=Date.now();if(!E){const O=localStorage.getItem(I);if(O)try{const{data:C,timestamp:ce}=JSON.parse(O);if(R-ce<D){ue(C);return}}catch(C){console.error(C)}}B(!0);try{const O=kn(Ot(Qe,"notifications"),Fd("createdAt","desc"),Di(15)),ce=(await Jn(O)).docs.map(je=>({id:je.id,...je.data(),createdAt:je.data().createdAt?{seconds:je.data().createdAt.seconds}:null}));localStorage.setItem(I,JSON.stringify({data:ce,timestamp:R})),ue(ce)}catch(O){O.code==="permission-denied"?(console.warn("Firestore permissions denied for notifications."),b([]),M(0)):console.error("Error fetching notifications:",O)}finally{B(!1)}},ue=E=>{const I=[];let D=0,R=[];try{const O=localStorage.getItem(`viewed_notifs_${(f==null?void 0:f.uid)||"guest"}`);R=O?JSON.parse(O):[]}catch(O){console.error(O)}E.forEach(O=>{const C=f&&O.recipientId===f.uid,ce=O.recipientId==="all";if(C||ce){const je=R.includes(O.id),H=O.read===!0,P=je||H;P||D++,I.push({...O,read:P})}}),b(I),M(D)};k.useEffect(()=>{re()},[f]);const U=async()=>{const E=!g;if(x(E),E&&N>0){const I=[...w],D=I.filter(R=>!R.read).map(R=>R.id);if(D.length===0)return;try{const R=localStorage.getItem(`viewed_notifs_${(f==null?void 0:f.uid)||"guest"}`),O=R?JSON.parse(R):[];localStorage.setItem(`viewed_notifs_${(f==null?void 0:f.uid)||"guest"}`,JSON.stringify(Array.from(new Set([...O,...D]))))}catch(R){console.error(R)}if(b(I.map(R=>({...R,read:!0}))),M(0),Sl.currentUser)try{const R=t7(Qe);D.forEach(O=>R.update(qn(Qe,"notifications",O),{read:!0})),await R.commit()}catch(R){console.warn("Background update failed:",R)}}},[fe,ae]=k.useState(!1),pe=E=>{if(!f){ae(!0),setTimeout(()=>ae(!1),3e3),l(!1);return}e(E),l(!1)},S=E=>{switch(E){case"quiz":return r.jsx(Nn,{className:"w-4 h-4 text-yellow-400"});case"file":return r.jsx(Cn,{className:"w-4 h-4 text-blue-400"});case"explanation":return r.jsx(qr,{className:"w-4 h-4 text-purple-400"});case"message":return r.jsx(Wo,{className:"w-4 h-4 text-emerald-400"});default:return r.jsx(mf,{className:"w-4 h-4 text-gray-400"})}};return r.jsxs(r.Fragment,{children:[r.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${c?"bg-gray-950/90 backdrop-blur-xl border-b border-white/10 shadow-2xl py-2":"bg-transparent py-4"}`,children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e("HOME"),children:[r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gray-900 rounded-xl flex items-center justify-center border border-emerald-500/30 overflow-hidden shadow-lg group-hover:border-emerald-500 transition-all",children:r.jsx($5,{className:"w-full h-full p-1"})}),r.jsxs("div",{className:"hidden sm:block text-right",children:[r.jsx("span",{className:"text-xl font-black text-white tracking-tight block leading-none",children:""}),r.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"ETQAN PLATFORM"})]})]}),r.jsx("div",{className:"hidden lg:flex items-center gap-1",children:[{label:"",view:"HOME",icon:Gt},{label:"",view:"QUIZZES",icon:Nn},{label:"",view:"LESSONS",icon:Cn},{label:"",view:"LESSONS_EXPLANATIONS",icon:qr},{label:"",view:"SERVICES",icon:ed},{label:"VIP",view:"VIP_AREA",icon:wn,premium:!0}].map(E=>r.jsxs("button",{onClick:()=>pe(E.view),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 hover:bg-white/5 ${E.premium?"text-amber-400":"text-gray-300"}`,children:[r.jsx(E.icon,{className:"w-4 h-4"}),E.label]},E.view))}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsxs("div",{className:"relative",ref:q,children:[r.jsxs("button",{onClick:U,className:"p-2.5 rounded-xl bg-white/5 border border-white/10 text-gray-400 hover:text-white relative group",children:[r.jsx(mf,{className:"w-5 h-5"}),N>0&&r.jsx("span",{className:"absolute top-2 right-2 w-4 h-4 bg-red-600 text-white text-[10px] font-black rounded-full flex items-center justify-center border-2 border-gray-900",children:N})]}),g&&r.jsxs("div",{className:"absolute left-0 mt-3 w-80 bg-gray-900 border border-gray-800 rounded-[2rem] shadow-2xl overflow-hidden animate-fade-in-up z-[110]",children:[r.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-800/50",children:[r.jsxs("h4",{className:"font-black text-white flex items-center gap-2",children:[r.jsx(mf,{className:"w-4 h-4 text-emerald-400"})," "]}),r.jsx("button",{onClick:()=>re(!0),className:"text-gray-500 hover:text-white",children:r.jsx(Nd,{className:`w-4 h-4 ${z?"animate-spin":""}`})})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar",children:w.length===0?r.jsxs("div",{className:"p-10 text-center text-gray-500",children:[r.jsx(mf,{className:"w-10 h-10 mx-auto mb-3 opacity-20"}),r.jsx("p",{className:"text-sm font-medium",children:"   "})]}):w.map(E=>r.jsx("div",{className:`p-4 border-b border-gray-800/50 hover:bg-white/5 transition-colors cursor-pointer group ${E.read?"":"bg-emerald-500/5"}`,onClick:()=>{E.link&&e(E.link),x(!1)},children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"mt-1 shrink-0 p-2 bg-gray-800 rounded-lg",children:S(E.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:`text-sm font-bold truncate ${E.read?"text-gray-400":"text-white"}`,children:E.title}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mt-1 leading-relaxed",children:E.message})]})]})},E.id))})]})]}),f?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-emerald-600/10 border border-emerald-500/20 px-3 py-1.5 rounded-xl hover:bg-emerald-600/20",children:[r.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-emerald-500/30",children:f.avatar?r.jsx("img",{src:f.avatar,className:"w-full h-full object-cover"}):r.jsx(mS,{className:"w-full h-full text-emerald-400"})}),r.jsx("span",{className:"hidden md:block text-xs font-black text-emerald-400",children:f.displayName.split(" ")[0]})]}),r.jsx("button",{onClick:t,className:"p-2.5 rounded-xl text-gray-500 hover:text-red-500",children:r.jsx(zf,{className:"w-5 h-5"})})]}):r.jsxs("button",{onClick:a,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg flex items-center gap-2",children:[r.jsx(K_,{className:"w-4 h-4"})," "]}),r.jsx("button",{onClick:()=>l(!s),className:"lg:hidden p-2.5 rounded-xl bg-white/5 border border-white/10 text-gray-400",children:s?r.jsx(ms,{className:"w-6 h-6"}):r.jsx(b3,{className:"w-6 h-6"})})]})]})}),s&&r.jsx("div",{className:"lg:hidden bg-gray-900 border-t border-gray-800 animate-fade-in",children:r.jsx("div",{className:"px-4 py-6 space-y-2",children:[{label:"",view:"HOME",icon:Gt},{label:"",view:"QUIZZES",icon:Nn},{label:"",view:"LESSONS",icon:Cn},{label:"",view:"LESSONS_EXPLANATIONS",icon:qr},{label:"",view:"SERVICES",icon:ed},{label:"VIP ",view:"VIP_AREA",icon:wn,premium:!0},{label:"  ",view:"CONTACT_TEACHER",icon:fi}].map(E=>r.jsxs("button",{onClick:()=>pe(E.view),className:`w-full flex items-center justify-between p-4 rounded-2xl font-bold ${E.premium?"bg-amber-500/10 text-amber-400 border border-amber-500/20":"bg-white/5 text-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(E.icon,{className:"w-5 h-5"}),r.jsx("span",{children:E.label})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-50"})]},E.view))})})]}),fe&&r.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[200] animate-slide-up-fade",children:r.jsxs("div",{className:"bg-red-900/90 backdrop-blur-md border border-red-800 px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4",children:[r.jsx("div",{className:"bg-red-800 p-2 rounded-full",children:r.jsx(nd,{className:"w-6 h-6 text-red-200"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-white text-sm",children:"  "}),r.jsx("p",{className:"text-red-200 text-xs mt-0.5",children:"     "})]}),r.jsx("button",{onClick:a,className:"bg-white text-red-900 px-4 py-1.5 rounded-lg text-xs font-black",children:""})]})})]})};var TD=U_();const SD=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"})}),AD=({onStartQuiz:a,onLoginClick:e,onNavigate:t})=>{const{user:s}=Ds(),[l,c]=k.useState(!1),[d,f]=k.useState(!1),[g,x]=k.useState(!1),w=window.location.origin;k.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[d]);const b=()=>{c(!0),setTimeout(()=>c(!1),3e3)},N=()=>{s?t("QUIZZES"):b()},M=()=>{s?t("LESSONS"):b()},z=()=>{t("LESSONS_EXPLANATIONS")},B=()=>{t("SERVICES")},q=()=>{t("VIP_AREA")},re=()=>{navigator.clipboard.writeText(w),x(!0),setTimeout(()=>x(!1),2e3)};return r.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:r.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[r.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:r.jsx(nd,{className:"w-6 h-6 text-red-200"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),r.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),r.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:r.jsx(ms,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[r.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",r.jsx("br",{}),r.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",r.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:r.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),r.jsx("br",{}),"  "]}),r.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",r.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),r.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[r.jsxs("button",{onClick:N,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(Nn,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:" "})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:z,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(xm,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:" "})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:M,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(Cn,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:" "})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:B,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(ed,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:""})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:q,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(wn,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:" "})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),r.jsx("div",{className:"w-full mt-2",children:s?r.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[r.jsx(Is,{className:"w-5 h-5"})," "]}):r.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:r.jsx(K_,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"  "})]}),r.jsx(Pr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})}),r.jsx("div",{className:"relative mt-2 flex justify-center z-50",children:r.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-xs font-bold bg-white/5 px-6 py-3 rounded-full border border-white/10 hover:bg-white/10 hover:border-emerald-500/30 group shadow-lg backdrop-blur-sm",children:[r.jsx("div",{className:"p-1.5 bg-emerald-500/10 rounded-full group-hover:bg-emerald-500/20 transition-colors",children:r.jsx(Si,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-300"})}),r.jsx("span",{children:"  "})]})}),d&&TD.createPortal(r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl animate-fade-in",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-gray-950 border-2 border-gray-800 rounded-[2.5rem] shadow-2xl p-8 w-full max-w-md flex flex-col gap-8 animate-fade-in-up relative overflow-hidden",onClick:ue=>ue.stopPropagation(),children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-900/20 rounded-full blur-[80px] pointer-events-none"}),r.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-2xl font-black text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl border border-emerald-500/20",children:r.jsx(Si,{className:"w-6 h-6 text-emerald-500"})}),"  "]}),r.jsx("p",{className:"text-gray-400 text-sm mt-2 font-bold pr-1",children:"     "})]}),r.jsx("button",{onClick:()=>f(!1),className:"self-start p-2 rounded-full bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors border border-gray-700",children:r.jsx(ms,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 relative z-10",children:[r.jsxs("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noreferrer",className:"flex flex-col items-center gap-3 group",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/40 group-hover:-translate-y-1 border border-[#1877F2]/20",children:r.jsx(Jo,{className:"w-10 h-10 text-[#1877F2] group-hover:text-white"})}),r.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),r.jsxs("a",{href:"#",target:"_blank",rel:"noreferrer",className:"flex flex-col items-center gap-3 group",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-pink-500/40 group-hover:-translate-y-1 border border-pink-500/20",children:r.jsx(YS,{className:"w-10 h-10 text-pink-500 group-hover:text-white"})}),r.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),r.jsxs("a",{href:"#",target:"_blank",rel:"noreferrer",className:"flex flex-col items-center gap-3 group",children:[r.jsxs("div",{className:"w-20 h-20 rounded-3xl bg-[#00f2ea]/10 flex items-center justify-center group-hover:bg-black transition-all shadow-lg group-hover:shadow-[#00f2ea]/40 group-hover:-translate-y-1 border border-[#00f2ea]/20 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#00f2ea] to-[#ff0050] opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx(SD,{className:"w-10 h-10 text-white relative z-10"})]}),r.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-white transition-colors",children:" "})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-2xl p-2 pl-2 pr-4 flex items-center border border-gray-700/50 relative z-10",children:[r.jsx("div",{className:"flex-1 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70 tracking-wider",children:w}),r.jsxs("button",{onClick:re,className:`px-5 py-3 rounded-xl font-bold text-xs flex items-center gap-2 transition-all shadow-lg shrink-0 ${g?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[g?r.jsx(mx,{className:"w-4 h-4"}):r.jsx(gx,{className:"w-4 h-4"}),g?" ":" "]})]})]})}),document.body)]})]})]})},xp=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),yp=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),ID=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),dl=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:" ,.",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"          .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:" ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"        .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"      .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],CD=({onNavigate:a})=>{const[e,t]=k.useState(0),[s,l]=k.useState(!0);k.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%dl.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return r.jsx(xp,{className:"w-5 h-5 text-white"});case"messenger":return r.jsx(ID,{className:"w-5 h-5 text-white"});case"telegram":return r.jsx(yp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>r.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[r.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:g.name}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),r.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),r.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return r.jsx("section",{className:"py-20 relative overflow-hidden",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),r.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),r.jsxs("p",{className:"mt-8 text-lg md:text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed text-center px-4 font-medium",style:{lineHeight:"1.8"},children:["  ",r.jsx("span",{className:"text-emerald-400 font-bold",children:"  "}),"                .       ",r.jsx("span",{className:"text-emerald-400 font-bold",children:" "}),"       ",r.jsx("span",{className:"text-emerald-400 font-bold",children:" "}),"   .      ",r.jsx("span",{className:"text-emerald-400 font-bold",children:" "}),"      ."]}),r.jsx("div",{className:"mt-10 flex justify-center animate-fade-in-up delay-200",children:r.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[r.jsx(vi,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),r.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[r.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[r.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"text-center sm:text-right flex-1",children:[r.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),r.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),r.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[r.jsx(Ep,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),r.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),r.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[r.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(Jo,{className:"w-6 h-6"})}),r.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(xp,{className:"w-6 h-6"})}),r.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(yp,{className:"w-6 h-6"})})]})]})]}),r.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[r.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"text-center sm:text-right flex-1",children:[r.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),r.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),r.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[r.jsx(Ep,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),r.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),r.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[r.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(Jo,{className:"w-6 h-6"})}),r.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(xp,{className:"w-6 h-6"})}),r.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:r.jsx(yp,{className:"w-6 h-6"})})]})]})]})]}),r.jsx("div",{className:"text-center mb-12",children:r.jsxs("button",{onClick:()=>a("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[r.jsx(wd,{className:"w-6 h-6"}),"  ",r.jsx(hx,{className:"w-6 h-6"})]})}),r.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsxs("h2",{className:"text-3xl font-black text-white mb-4",children:["  ",r.jsx("span",{className:"text-emerald-400",children:""}),""]}),r.jsx("p",{className:"text-gray-400",children:"          "})]}),r.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[r.jsxs("div",{className:"block md:hidden space-y-4",children:[f(dl[e]),f(dl[(e+1)%dl.length])]}),r.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%dl.length;return r.jsx("div",{children:f(dl[x])},dl[x].id)})})]})]})]})})},R_=({options:a,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=a.find(x=>x.value===e&&!x.isHeader);return r.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[r.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[r.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),r.jsx(wa,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:a.map((x,w)=>{if(x.isHeader)return r.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},w);const b=x.value===e;return r.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,b&&r.jsx(Al,{className:"w-3 h-3"})]},w)})})]})},kD=({isOpen:a,onClose:e})=>{const[t,s]=k.useState("ROLE_SELECTION"),[l,c]=k.useState(!1),[d,f]=k.useState(null),[g,x]=k.useState(null),{setTeacherSession:w}=Ds(),[b,N]=k.useState(""),[M,z]=k.useState(""),[B,q]=k.useState(""),[re,ue]=k.useState(""),[U,fe]=k.useState(""),[ae,pe]=k.useState(""),[S,E]=k.useState(""),[I,D]=k.useState(""),[R,O]=k.useState(""),[C,ce]=k.useState("male"),[je,H]=k.useState(""),[P,ne]=k.useState(!1),[W,ge]=k.useState(!1),[A,Y]=k.useState("");if(!a)return null;const xe=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),z(""),q(""),ue(""),fe(""),pe(""),E(""),D(""),O(""),ce("male"),Y(""),H(""),ne(!1),ge(!1),c(!1)},be=()=>{xe(),e()},ie=te=>{te.preventDefault(),f(null),c(!0),setTimeout(()=>{b==="2001"?(w(".   ","yazanabokaheal@gmail.com"),x("   !  ..."),setTimeout(()=>window.location.reload(),1e3)):b==="2003"?(w(".   ","majd@etqan.edu"),x("    !  ..."),setTimeout(()=>window.location.reload(),1e3)):(f("   "),c(!1))},100)},Ee=async te=>{te.preventDefault(),f(null),c(!0);try{await cC(Sl,M.trim(),B),x("   !   ..."),setTimeout(()=>{window.location.reload()},1e3)}catch(Pe){console.error(Pe),f("      "),c(!1)}},Oe=async te=>{if(te.preventDefault(),!P){f("     ");return}f(null),c(!0);try{const Te=(await oC(Sl,I.trim(),R)).user,Ut="",Ye=S==="university"&&je?je:"";await $m(qn(Qe,"users",Te.uid),{firstName:re,lastName:U,age:ae,grade:S,gender:C,school:Ye,avatar:Ut,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:I.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date,acceptedPrivacy:!0,acceptedPrivacyDate:new Date}),x("   !  ..."),setTimeout(()=>{window.location.reload()},1e3)}catch(Pe){console.error(Pe),Pe.code==="auth/email-already-in-use"?f("   "):Pe.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},ct=async te=>{te.preventDefault(),f(null),c(!0);try{await lC(Sl,A.trim()),x("   !")}catch(Pe){console.error(Pe),Pe.code==="auth/user-not-found"?f("    "):Pe.code==="auth/invalid-email"?f("    "):Pe.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},tt=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},on=()=>r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),r.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[r.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:r.jsx(Is,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{className:"text-right flex-1",children:[r.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),r.jsx(Xg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),r.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[r.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:r.jsx(xr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"text-right flex-1",children:[r.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),r.jsx(Xg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Kt=()=>r.jsxs("form",{onSubmit:ie,className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Il,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),r.jsx("input",{type:"password",value:b,onChange:te=>N(te.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),r.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),cn=()=>r.jsxs("form",{onSubmit:Ee,className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:M,onChange:te=>z(te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),r.jsx(fi,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"password",value:B,onChange:te=>q(te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),r.jsx(Il,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),r.jsx("div",{className:"text-left",children:r.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),r.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),r.jsx("div",{className:"mt-4 text-center",children:r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",r.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),J=()=>{const te=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(Te=>({label:` ${Te}`,value:Te.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Pe=[{label:"",value:"male"},{label:"",value:"female"}];return r.jsxs("form",{onSubmit:Oe,className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),r.jsx("input",{type:"text",value:re,onChange:Te=>ue(Te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),r.jsx("input",{type:"text",value:U,onChange:Te=>fe(Te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),r.jsx("input",{type:"number",value:ae,onChange:Te=>pe(Te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),r.jsx(R_,{options:Pe,value:C,onChange:Te=>ce(Te),placeholder:" "})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),r.jsx(R_,{options:te,value:S,onChange:Te=>E(Te),placeholder:"  / "})]}),S==="university"&&r.jsxs("div",{className:"space-y-1 animate-fade-in",children:[r.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),r.jsx("input",{type:"text",value:je,onChange:Te=>H(Te.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),r.jsx("input",{type:"email",value:I,onChange:Te=>D(Te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),r.jsx("input",{type:"password",value:R,onChange:Te=>O(Te.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),r.jsxs("div",{className:"flex items-center gap-2 px-1 mt-2",children:[r.jsx("input",{id:"privacy-policy",type:"checkbox",checked:P,onChange:Te=>ne(Te.target.checked),className:"w-4 h-4 text-emerald-600 bg-gray-100 border-gray-300 rounded focus:ring-emerald-500 dark:focus:ring-emerald-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"}),r.jsxs("label",{htmlFor:"privacy-policy",className:"text-xs font-bold text-gray-500 dark:text-gray-400 select-none",children:["  ",r.jsx("span",{onClick:Te=>{Te.preventDefault(),ge(!0)},className:"text-emerald-500 dark:text-emerald-400 hover:underline cursor-pointer",children:"   "})]})]}),r.jsx("button",{type:"submit",disabled:l||!P,className:`mt-2 w-full text-white py-3 rounded-xl font-bold transition-all shadow-lg dark:shadow-none flex items-center justify-center gap-2 ${P?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-gray-400 cursor-not-allowed opacity-50"}`,children:" "}),r.jsx("div",{className:"text-center mt-2",children:r.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},we=()=>r.jsxs("form",{onSubmit:ct,className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",r.jsx("strong",{children:""}),"  "]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:A,onChange:te=>Y(te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),r.jsx(fi,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),r.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[r.jsx(hx,{className:"w-4 h-4"}),"  "]})})]});return r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300",onClick:be}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&r.jsxs("div",{className:"absolute inset-0 bg-gray-950/95 backdrop-blur-xl z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl border border-white/10 transition-all duration-500",children:[r.jsxs("div",{className:"relative mb-8",children:[r.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-2xl rounded-full animate-pulse"}),r.jsxs("div",{className:"relative w-24 h-24",children:[r.jsx("div",{className:"absolute inset-0 border-t-4 border-emerald-500 border-solid rounded-full animate-spin"}),r.jsx("div",{className:"absolute inset-2 border-r-4 border-blue-500 border-solid rounded-full animate-spin-reverse"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(Is,{className:"w-8 h-8 text-white/80"})})]})]}),r.jsx("h4",{className:"text-xl font-black text-white mb-2 tracking-tight animate-pulse",children:tt()}),r.jsxs("p",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:[r.jsx(vt,{className:"w-3 h-3 animate-spin"}),"    ..."]})]}),r.jsx("button",{onClick:be,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:r.jsx(ms,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&r.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[r.jsx(Xg,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:r.jsx(Al,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[r.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[r.jsx(nd,{className:"w-5 h-5"}),"  :"]}),r.jsxs("p",{className:"leading-relaxed",children:["         ",r.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),t==="FORGOT_PASSWORD"&&r.jsx("button",{onClick:()=>{s("STUDENT_LOGIN"),x(null)},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:"  "})]}):r.jsxs(r.Fragment,{children:[t==="ROLE_SELECTION"&&on(),t==="TEACHER_LOGIN"&&Kt(),t==="STUDENT_LOGIN"&&cn(),t==="STUDENT_SIGNUP"&&J(),t==="FORGOT_PASSWORD"&&we(),d&&r.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[r.jsx(nd,{className:"w-5 h-5 shrink-0 mt-0.5"}),r.jsx("span",{className:"font-medium",children:d})]})]})}),W&&r.jsxs("div",{className:"absolute inset-0 bg-gray-900 z-[150] rounded-3xl overflow-hidden flex flex-col animate-fade-in-up",children:[r.jsxs("div",{className:"bg-gray-800 p-4 flex justify-between items-center border-b border-gray-700",children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[r.jsx(Zo,{className:"w-5 h-5 text-emerald-500"})," "]}),r.jsx("button",{onClick:()=>ge(!1),className:"text-gray-400 hover:text-white",children:r.jsx(ms,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 text-gray-300 text-sm leading-relaxed space-y-4 custom-scrollbar text-right",children:[r.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-500/20 mb-4",children:[r.jsx("p",{className:"font-bold text-white mb-1",children:"    !"}),r.jsx("p",{className:"text-xs",children:"       ."})]}),r.jsxs("ul",{className:"space-y-4 list-disc list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{className:"text-white",children:" :"}),"                ."]}),r.jsxs("li",{children:[r.jsx("strong",{className:"text-white",children:" :"}),"                ."]}),r.jsxs("li",{children:[r.jsx("strong",{className:"text-white",children:" :"}),"            .        ."]}),r.jsxs("li",{children:[r.jsx("strong",{className:"text-white",children:" :"}),"             ( )."]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700 text-center",children:r.jsx("button",{onClick:()=>ge(!1),className:"bg-emerald-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-emerald-700 transition-colors w-full",children:" "})})]})]})]})]})},RD=({value:a,onChange:e,placeholder:t})=>{const s=k.useRef(null);k.useEffect(()=>{s.current&&a!==s.current.innerHTML&&(a===""?s.current.innerHTML="":s.current.innerHTML||(s.current.innerHTML=a))},[a]);const l=(c,d="")=>{document.execCommand(c,!1,d),s.current&&e(s.current.innerHTML)};return r.jsxs("div",{className:"border-2 border-blue-700 rounded-xl overflow-hidden bg-gray-800 flex flex-col",children:[r.jsxs("div",{className:"bg-gray-900 border-b border-blue-800 p-2 flex flex-wrap items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>l("bold"),className:"p-1.5 hover:bg-gray-700 rounded text-gray-300 transition-colors",title:" (Bold)",children:r.jsx(q_,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>l("underline"),className:"p-1.5 hover:bg-gray-700 rounded text-gray-300 transition-colors",title:"  (Underline)",children:r.jsx(eN,{className:"w-4 h-4"})}),r.jsx("div",{className:"w-px h-4 bg-gray-700 mx-1"}),r.jsxs("button",{type:"button",onClick:()=>l("fontSize","5"),className:"p-1.5 hover:bg-gray-700 rounded text-gray-300 flex items-center gap-1 text-[10px] font-bold",title:" ",children:[r.jsx(R3,{className:"w-3 h-3"})," A"]}),r.jsxs("button",{type:"button",onClick:()=>l("fontSize","2"),className:"p-1.5 hover:bg-gray-700 rounded text-gray-300 flex items-center gap-1 text-[10px] font-bold",title:" ",children:[r.jsx(N3,{className:"w-3 h-3"})," A"]}),r.jsx("button",{type:"button",onClick:()=>l("fontSize","3"),className:"p-1.5 hover:bg-gray-700 rounded text-gray-300 text-[10px] font-bold",title:" ",children:"Normal"})]}),r.jsx("div",{ref:s,contentEditable:!0,onInput:c=>e(c.currentTarget.innerHTML),className:"p-4 min-h-[160px] max-h-[400px] overflow-y-auto outline-none text-white text-sm leading-relaxed",style:{direction:"ltr",textAlign:"left"},"data-placeholder":t})]})},DD=()=>{const{user:a}=Ds(),[e,t]=k.useState(null),[s,l]=k.useState(!1),[c,d]=k.useState(null),[f,g]=k.useState("MCQ"),[x,w]=k.useState("MCQ"),[b,N]=k.useState({title:"",subject:"English",grade:"",semester:"First",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1,keepOrder:!1}),[M,z]=k.useState([]),[B,q]=k.useState(null),[re,ue]=k.useState(!1),[U,fe]=k.useState(""),[ae,pe]=k.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[S,E]=k.useState(""),[I,D]=k.useState(!1),[R,O]=k.useState([]),[C,ce]=k.useState(!1),[je,H]=k.useState(""),P=(J,we)=>{pe(te=>({...te,[J]:we}))},ne=(J,we)=>{const te=[...ae.options];te[J]=we,pe(Pe=>({...Pe,options:te}))},W=(J=!1,we=!1)=>{pe(te=>({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:we?te.passageContent:"",generalInstruction:we?te.generalInstruction:"",passageFontSize:we?te.passageFontSize:"md"})),E(""),q(null),fe(""),ue(!1),J&&(g("MCQ"),w("MCQ"))},ge=()=>{if(!U.trim())return;const J=U.split(`
`).map(Le=>Le.trim()).filter(Le=>Le);if(J.length<2){alert("  .      .");return}let we="",te=["","","",""],Pe="";const Te=J.findIndex(Le=>Le.match(/^(explanation|answer note|reason||||)[:\-\s]/i));if(Te>-1){if(Pe=J[Te].replace(/^(explanation|answer note|reason||||)[:\-\s]*/i,"").trim(),Te<J.length-1){const Le=J.slice(Te+1).join(" ");Pe+=" "+Le}J.splice(Te,J.length-Te)}const Ut=/^([a-d]|[1-4]|||||A-D)[\.\)\-]\s*(.*)/i,Ye=J.map((Le,ke)=>Le.match(Ut)?ke:-1).filter(Le=>Le!==-1);if(Ye.length>=2){const Le=Ye[0];we=J.slice(0,Le).join(`
`),Ye.slice(0,4).forEach((ke,ft)=>{const Pt=J[ke].match(Ut);Pt&&(te[ft]=Pt[2].trim())})}else{we=J[0];for(let Le=0;Le<4;Le++)J[Le+1]&&(te[Le]=J[Le+1])}pe(Le=>({...Le,question:we,options:te,explanation:Pe})),ue(!1)},A=()=>{if(!ae.question.trim()){alert("   ");return}const J=f==="TF"||f==="READING"&&x==="TF";if((f==="MCQ"||f==="READING"&&x==="MCQ")&&ae.options.some(Te=>!Te.trim())){alert("   ");return}if(f==="READING"&&!ae.passageContent.trim()){alert("   ");return}if(f==="REORDER"&&!S.trim()){alert("    ");return}let te=[];if(J)te=["",""];else if(f==="REORDER"){if(te=S.split(" ").filter(Te=>Te.trim().length>0),te.length<2){alert("       ");return}}else te=ae.options;const Pe={id:B||Date.now(),question:ae.question,options:te,correctAnswer:ae.correctAnswer,explanation:ae.explanation||"",type:f};f==="READING"&&(Pe.passageContent=ae.passageContent,Pe.generalInstruction=ae.generalInstruction,Pe.passageFontSize=ae.passageFontSize),B?(z(M.map(Te=>Te.id===B?Pe:Te)),q(null),W(!1)):(z([...M,Pe]),W(!1,f==="READING"))},Y=J=>{const we=M.find(te=>te.id===J);if(we){if(q(J),g(we.type||"MCQ"),we.type==="READING"&&(we.options.length===2&&we.options.includes("")&&we.options.includes("")?w("TF"):w("MCQ")),we.type==="REORDER")E(we.options.join(" ")),pe({question:we.question,options:["","","",""],correctAnswer:we.correctAnswer,explanation:we.explanation||"",passageContent:we.passageContent||"",generalInstruction:we.generalInstruction||"",passageFontSize:we.passageFontSize||"md"});else{const te=we.type==="TF"||we.type==="READING"&&we.options.length===2&&we.options.includes("");pe({question:we.question,options:te?["","","",""]:we.options.length>=4?we.options:[...we.options,...Array(4-we.options.length).fill("")],correctAnswer:we.correctAnswer,explanation:we.explanation||"",passageContent:we.passageContent||"",generalInstruction:we.generalInstruction||"",passageFontSize:we.passageFontSize||"md"}),E("")}window.scrollTo({top:0,behavior:"smooth"})}},xe=()=>{W(!1)},be=J=>{window.confirm("      ")&&(z(M.filter(we=>we.id!==J)),B===J&&W(!1))},ie=async()=>{if(!b.title||!b.grade){alert("    /");return}if(M.length===0){alert("     ");return}l(!0);try{const J={title:b.title,subject:b.subject,grade:b.grade,semester:b.semester,category:b.category,questions:M,createdBy:(a==null?void 0:a.uid)||"teacher",teacherName:(a==null?void 0:a.displayName)||"",description:b.description||"",duration:parseInt(b.duration)||30,questionDuration:b.questionDuration?parseInt(b.questionDuration):null,isPremium:b.isPremium||!1,keepOrder:b.keepOrder||!1};if(c){const we=qn(Qe,"quizzes",c);await bc(we,{...J,updatedAt:Zs()}),alert("    !")}else await Sa(Ot(Qe,"quizzes"),{...J,createdAt:Zs()}),alert("    !");N({title:"",subject:"English",grade:"",semester:"First",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1,keepOrder:!1}),z([]),d(null),W(!0)}catch(J){console.error("Error saving quiz:",J),alert("   ")}finally{l(!1)}},Ee=()=>{window.confirm("        .")&&(N({title:"",subject:"English",grade:"",semester:"First",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1,keepOrder:!1}),z([]),d(null),W(!0))},Oe=async()=>{ce(!0);try{const J="etqan_teacher_import_list",te=Date.now(),Pe=localStorage.getItem(J);if(Pe){const{data:Le,timestamp:ke}=JSON.parse(Pe);if(te-ke<3e5){O(Le),ce(!1);return}}const Te=kn(Ot(Qe,"quizzes"),Fd("createdAt","desc"),Di(50)),Ye=(await Jn(Te)).docs.map(Le=>({id:Le.id,...Le.data()}));O(Ye),localStorage.setItem(J,JSON.stringify({data:Ye,timestamp:te}))}catch(J){console.error(J)}ce(!1)},ct=()=>{Oe(),D(!0)},tt=J=>{if(M.length>0&&!window.confirm("         ."))return;d(J.id||null);const we=J.grade==="English Major - QOU"||J.grade.includes("University");t(we?"university":"school"),N({title:J.title,subject:J.subject,grade:J.grade,semester:J.semester||"First",category:J.category||"Language",description:J.description||"",duration:J.duration?J.duration.toString():"30",questionDuration:J.questionDuration?J.questionDuration.toString():"",isPremium:J.isPremium||!1,keepOrder:J.keepOrder||!1}),z(J.questions),D(!1),W(!0),window.scrollTo({top:0,behavior:"smooth"})},on=R.filter(J=>(J.title?J.title.toLowerCase().includes(je.toLowerCase()):!1)||(J.grade?J.grade.includes(je):!1)),Kt=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];if(!e&&!c)return r.jsx("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-4xl w-full px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:"  "}),r.jsx("p",{className:"text-gray-400",children:"    "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>t("school"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (5 - 12)"})]})]}),r.jsxs("button",{onClick:()=>t("university"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  "})]})]})]})]})});const cn=f==="MCQ"||f==="READING"&&x==="MCQ";return r.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:r.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:r.jsx(bw,{className:"w-10 h-10 text-blue-400"})}),r.jsxs("div",{className:"text-center md:text-right",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),r.jsxs("p",{className:"text-blue-400 font-bold text-lg flex items-center gap-2 justify-center md:justify-start",children:[e==="university"?r.jsx(Bn,{className:"w-5 h-5"}):r.jsx(er,{className:"w-5 h-5"})," ",e==="university"?" ":" "]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>{t(null),d(null),W(!0)},className:"bg-gray-800 text-gray-300 px-4 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[r.jsx(fr,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:ct,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[r.jsx(Np,{className:"w-5 h-5"})," "]})]})]})})}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${c?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[r.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:r.jsx(Nn,{className:"w-5 h-5 text-blue-400"})}),c?"  ":"  "]}),c&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),r.jsx("button",{onClick:Ee,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:r.jsx(ms,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),r.jsx("input",{type:"text",value:b.title,onChange:J=>N({...b,title:J.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx(ym,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),e==="university"?r.jsx("input",{type:"text",value:b.subject,onChange:J=>N({...b,subject:J.target.value}),placeholder:"  ...",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 outline-none font-bold text-white"}):r.jsxs("select",{value:b.subject,onChange:J=>N({...b,subject:J.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Science",children:""}),r.jsx("option",{value:"Math",children:""})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:e==="university"?" ":" "}),r.jsxs("div",{className:"relative",children:[r.jsx(xr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),r.jsxs("select",{value:b.grade,onChange:J=>N({...b,grade:J.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"",className:"text-gray-400",children:"--  --"}),e==="school"?r.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(J=>r.jsxs("option",{value:J.toString(),children:[" ",J]},J))}):r.jsx("optgroup",{label:" ",children:r.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:r.jsx(wa,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx(Xo,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),r.jsxs("select",{value:b.semester,onChange:J=>N({...b,semester:J.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"First",children:"  "}),r.jsx("option",{value:"Second",children:"  "})]}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:r.jsx(wa,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),r.jsxs("div",{className:"relative",children:[r.jsx(J_,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),r.jsxs("select",{value:b.category,onChange:J=>N({...b,category:J.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"Language",children:"Language ()"}),r.jsx("option",{value:"Reading",children:"Reading ()"}),r.jsx("option",{value:"Writing",children:"Writing ()"}),r.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),r.jsx("option",{value:"General",children:"  (General Quiz)"})]}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:r.jsx(wa,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[r.jsx(sd,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),r.jsx("input",{type:"number",min:"1",value:b.duration,onChange:J=>N({...b,duration:J.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[r.jsx(Z_,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),r.jsx("input",{type:"number",min:"5",value:b.questionDuration,onChange:J=>N({...b,questionDuration:J.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),r.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]}),r.jsx("div",{className:"col-span-1",children:r.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-2xl border cursor-pointer transition-all ${b.keepOrder?"bg-indigo-900/20 border-indigo-500/50":"bg-gray-800 border-gray-700 hover:bg-gray-750"}`,children:[r.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${b.keepOrder?"bg-indigo-500":"bg-gray-600"}`,children:r.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${b.keepOrder?"right-1":"right-7"}`})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:b.keepOrder,onChange:J=>N({...b,keepOrder:J.target.checked})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vw,{className:"w-5 h-5 text-indigo-400"}),r.jsx("span",{className:"font-bold text-white text-sm",children:"  ( )"})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"     ."})]})]})}),r.jsx("div",{className:"col-span-1",children:r.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-2xl bg-amber-900/10 border border-amber-500/20 cursor-pointer hover:bg-amber-900/20 transition-colors",children:[r.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${b.isPremium?"bg-amber-500":"bg-gray-600"}`,children:r.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${b.isPremium?"right-1":"right-7"}`})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:b.isPremium,onChange:J=>N({...b,isPremium:J.target.checked})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),r.jsx("span",{className:"font-bold text-white text-sm",children:"  (Premium)"})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"  ."})]})]})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),r.jsx("textarea",{value:b.description,onChange:J=>N({...b,description:J.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),r.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[r.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:r.jsx(yw,{className:"w-5 h-5 text-blue-400"})}),B?" ":" "]}),r.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[r.jsx("button",{onClick:()=>g("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${f==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:""}),r.jsx("button",{onClick:()=>g("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${f==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"/"}),r.jsxs("button",{onClick:()=>g("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${f==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[r.jsx(Cn,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>g("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${f==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[r.jsx(Q_,{className:"w-4 h-4"}),""]})]})]}),!B&&r.jsx("div",{className:"mb-8",children:re?r.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-emerald-500/30 animate-fade-in relative",children:[r.jsx("button",{onClick:()=>ue(!1),className:"absolute top-2 left-2 text-gray-500 hover:text-white p-1",children:r.jsx(ms,{className:"w-4 h-4"})}),r.jsxs("h4",{className:"text-emerald-400 font-bold text-sm mb-2 flex items-center gap-2",children:[r.jsx(vS,{className:"w-4 h-4"}),"  "]}),r.jsx("p",{className:"text-gray-400 text-xs mb-3",children:'   .               ":"  "Explanation:"     .'}),r.jsx("textarea",{value:U,onChange:J=>fe(J.target.value),placeholder:`:
   
. 
.  
. 
. 
:    .`,className:"w-full h-32 bg-gray-900 border border-gray-700 rounded-xl p-3 text-sm text-white focus:border-emerald-500 outline-none resize-none mb-3"}),r.jsx("div",{className:"flex gap-2 justify-end",children:r.jsxs("button",{onClick:ge,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-emerald-700 flex items-center gap-1",children:[r.jsx(Nw,{className:"w-3 h-3"}),"  "]})})]}):r.jsxs("button",{onClick:()=>ue(!0),className:"text-xs font-bold text-emerald-400 hover:text-emerald-300 flex items-center gap-1.5 bg-emerald-900/10 px-4 py-2 rounded-lg border border-emerald-500/20 transition-colors w-fit",children:[r.jsx(Nw,{className:"w-4 h-4"}),"    ( )"]})}),r.jsxs("div",{className:"space-y-6",children:[f==="READING"&&r.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2",children:[r.jsx(W_,{className:"w-5 h-5"})," "]}),r.jsxs("button",{type:"button",onClick:()=>N(J=>({...J,keepOrder:!J.keepOrder})),className:`text-[10px] font-bold px-3 py-1.5 rounded-lg border transition-colors flex items-center gap-1 ${b.keepOrder?"bg-indigo-600 text-white border-indigo-500":"bg-gray-800 text-gray-400 border-gray-600 hover:text-white"}`,children:[r.jsx(vw,{className:"w-3 h-3"}),b.keepOrder?"  ()":"  "]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),r.jsx("input",{type:"text",value:ae.generalInstruction,onChange:J=>P("generalInstruction",J.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),r.jsx(RD,{value:ae.passageContent,onChange:J=>P("passageContent",J),placeholder:"   ..."}),r.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :         ."})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-end",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[r.jsx(gA,{className:"w-4 h-4"}),"   "]}),r.jsx("div",{className:"flex gap-2",children:Kt.map(J=>r.jsx("button",{onClick:()=>P("passageFontSize",J.value),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all border ${ae.passageFontSize===J.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:J.label},J.value))})]}),r.jsxs("div",{className:"bg-gray-800 p-1.5 rounded-xl border border-blue-700/50 flex gap-2",children:[r.jsxs("button",{onClick:()=>w("MCQ"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1 ${x==="MCQ"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx($_,{className:"w-3 h-3"}),""]}),r.jsxs("button",{onClick:()=>w("TF"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1 ${x==="TF"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx(oA,{className:"w-3 h-3"}),"/"]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:f==="READING"?"  ":f==="REORDER"?"/ ":" "}),r.jsxs("div",{className:"relative",children:[r.jsx(dr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),r.jsx("input",{type:"text",value:ae.question,onChange:J=>P("question",J.target.value),placeholder:f==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),cn?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ae.options.map((J,we)=>r.jsxs("div",{className:`relative group transition-all duration-300 ${ae.correctAnswer===we?"scale-[1.02]":""}`,children:[r.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[r.jsxs("span",{className:`text-xs font-bold ${ae.correctAnswer===we?"text-blue-400":"text-gray-400"}`,children:[" ",we+1]}),r.jsx("button",{onClick:()=>P("correctAnswer",we),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${ae.correctAnswer===we?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:ae.correctAnswer===we?" ":" "})]}),r.jsx("input",{type:"text",value:J,onChange:te=>ne(we,te.target.value),placeholder:`  ${we+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${we===ae.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},we))}):f==="REORDER"?r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),r.jsx("input",{type:"text",dir:"ltr",value:S,onChange:J=>E(J.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),S&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.split(" ").filter(J=>J.trim()).map((J,we)=>r.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:J},we))}),r.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>P("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${ae.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[ae.correctAnswer===0&&r.jsx(Qn,{className:"w-6 h-6"})," (True)"]}),r.jsxs("button",{onClick:()=>P("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${ae.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[ae.correctAnswer===1&&r.jsx(Qn,{className:"w-6 h-6"})," (False)"]})]}),r.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[r.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),r.jsx("textarea",{value:ae.explanation,onChange:J=>P("explanation",J.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),r.jsxs("div",{className:"flex gap-3",children:[B&&r.jsxs("button",{onClick:xe,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"})," "]}),r.jsx("button",{onClick:A,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${B?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:B?r.jsxs(r.Fragment,{children:[r.jsx(Cl,{className:"w-5 h-5"})," "]}):r.jsxs(r.Fragment,{children:[r.jsx(yw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[r.jsx(Cl,{className:"w-5 h-5 text-blue-400"})," "]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400 font-medium",children:" "}),r.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:M.length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400 font-medium",children:" "}),r.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:b.category})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400 font-medium",children:" "}),r.jsxs("span",{className:"font-bold text-white",children:[b.duration," "]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400 font-medium",children:""}),r.jsx("span",{className:"font-bold text-white",children:b.semester==="First"?"":""})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400 font-medium",children:" "}),c?r.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):r.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),r.jsxs("button",{onClick:ie,disabled:s||M.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${s||M.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[s?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):c?r.jsx(Nd,{className:"w-5 h-5"}):r.jsx(Qn,{className:"w-5 h-5"}),s?" ...":c?" ":"  "]})]})]}),M.length>0&&r.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:r.jsx(bw,{className:"w-4 h-4 text-blue-400"})}),"  (",M.length,")"]}),r.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:M.map((J,we)=>r.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${B===J.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:we+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:J.question}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:J.type==="REORDER"?"":J.type==="TF"||J.type==="READING"&&J.options.length===2&&J.options.includes("")?"/":J.passageContent?" ()":""})})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[r.jsxs("button",{onClick:()=>Y(J.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[r.jsx(Sp,{className:"w-3.5 h-3.5"}),""]}),r.jsx("div",{className:"w-px h-3 bg-gray-600"}),r.jsxs("button",{onClick:()=>be(J.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[r.jsx(Fr,{className:"w-3.5 h-3.5"}),""]})]}),J.explanation&&r.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",J.explanation]})]},J.id))})]})]})})]})}),I&&r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:r.jsx(Np,{className:"w-6 h-6 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white",children:" "}),r.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),r.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:r.jsx(ms,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:r.jsxs("div",{className:"relative",children:[r.jsx(fs,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),r.jsx("input",{type:"text",placeholder:"   ...",value:je,onChange:J=>H(J.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:C?r.jsx("div",{className:"flex justify-center py-10",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):on.length===0?r.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:on.map(J=>r.jsxs("div",{onClick:()=>tt(J),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:J.subject}),r.jsx("span",{className:"text-xs text-gray-400",children:J.grade})]}),r.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:J.title}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[r.jsx(dr,{className:"w-3 h-3"}),J.questions.length," "]})]},J.id))})})]})})]})},Ou=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:H_},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Nn},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:fs},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:wd},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:jd},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:wn}],MD=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],D_=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],OD=({onNavigate:a})=>{const{user:e,updateUserProfile:t}=Ds(),[s,l]=k.useState(!1),[c,d]=k.useState(null),[f,g]=k.useState(!1),[x,w]=k.useState(!1),[b,N]=k.useState(!1),[M,z]=k.useState(null),[B,q]=k.useState((e==null?void 0:e.avatar)||""),[re,ue]=k.useState((e==null?void 0:e.profileBackground)||D_[0].url),[U,fe]=k.useState([]),[ae,pe]=k.useState(!0),[S,E]=k.useState(0),[I,D]=k.useState(1),[R,O]=k.useState(Ou[0]),[C,ce]=k.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[je,H]=k.useState([]),[P,ne]=k.useState(""),[W,ge]=k.useState(!1),[A,Y]=k.useState("50"),[xe,be]=k.useState(null),[ie,Ee]=k.useState(!1),[Oe,ct]=k.useState(""),[tt,on]=k.useState(!1),[Kt,cn]=k.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});k.useEffect(()=>{e&&(cn(ke=>({...ke,firstName:e.firstName||ke.firstName,lastName:e.lastName||ke.lastName,gender:e.gender||ke.gender,grade:e.grade||ke.grade,school:e.school||ke.school})),e.avatar&&q(e.avatar),e.profileBackground&&ue(e.profileBackground))},[e]);const J=async(ke=!1)=>{if(!e||e.role==="teacher")return;const ft=`etqan_quiz_history_${e.uid}`,Pt=365*24*60*60*1e3,wt=Date.now();if(ke)localStorage.removeItem(ft);else{const en=localStorage.getItem(ft);if(en)try{const{history:Dt,totalXP:Dn,rankLevel:un,stats:ss,timestamp:tr}=JSON.parse(en);if(wt-tr<Pt){fe(Dt),E(Dn),D(un),O(Ou.find(Ms=>un>=Ms.minLevel)||Ou[0]),ce(ss),pe(!1);return}}catch(Dt){console.error(Dt)}}pe(!0);try{const en=kn(Ot(Qe,"quiz_results"),Rn("userId","==",e.uid)),Dt=await Jn(en),Dn=[];let un=0,ss=!1,tr=0;Dt.forEach(dt=>{const ps=dt.data();Dn.push({id:dt.id,...dt.data(),createdAt:dt.data().createdAt?{seconds:dt.data().createdAt.seconds}:null});let Wn=10+ps.percentage*2;ps.passed&&(Wn+=50),ps.percentage===100&&(Wn+=100,ss=!0,tr++),un+=Math.round(Wn)}),Dn.sort((dt,ps)=>{const Wn=dt.createdAt?dt.createdAt.seconds:0;return(ps.createdAt?ps.createdAt.seconds:0)-Wn});const Ms=Dn.slice(0,10);let gs=un;e.totalXP!==void 0&&e.totalXP>gs&&(gs=e.totalXP);const tn=Math.floor(gs/500)+1;fe(Ms),E(gs),D(tn);const Yt=[...Ou].reverse().find(dt=>tn>=dt.minLevel)||Ou[0];O(Yt);const Tn={quizzesCompleted:Dn.length,hasPerfectScore:ss,level:tn,totalXP:gs,perfectScoresCount:tr};ce(Tn),localStorage.setItem(ft,JSON.stringify({history:Ms,totalXP:gs,rankLevel:tn,stats:Tn,timestamp:wt}))}catch(en){console.error(en)}finally{pe(!1)}};k.useEffect(()=>{e&&(e.role==="teacher"?(async()=>{ge(!0);const ft="etqan_all_students_teacher",Pt=1440*60*1e3,wt=localStorage.getItem(ft),en=Date.now();if(wt)try{const{data:Dt,timestamp:Dn}=JSON.parse(wt);if(en-Dn<Pt){H(Dt),ge(!1);return}}catch(Dt){console.error(Dt)}try{const Dt=kn(Ot(Qe,"users"),Rn("role","==","student")),un=(await Jn(Dt)).docs.map(ss=>({id:ss.id,...ss.data()}));H(un),localStorage.setItem(ft,JSON.stringify({data:un,timestamp:en}))}catch(Dt){console.error(Dt)}finally{ge(!1)}})():J())},[e]);const we=async ke=>{ke.preventDefault(),l(!0),d(null);try{let ft={...Kt};Kt.grade==="university"&&Kt.universityName&&(ft.school=Kt.universityName),delete ft.universityName,await t(ft),d("   !"),setTimeout(()=>d(null),3e3)}catch(ft){console.error(ft),alert("   ")}finally{l(!1)}},te=async()=>{l(!0);try{await t({avatar:B}),g(!1)}catch(ke){console.error(ke)}finally{l(!1)}},Pe=async(ke,ft)=>{const Pt=parseInt(A);if(!(isNaN(Pt)||Pt<=0)&&window.confirm(`     ${Pt} XP  ${ft}`)){l(!0);try{const wt=qn(Qe,"users",ke);await bc(wt,{totalXP:cx(Pt)});const en=je.map(Dt=>Dt.id===ke?{...Dt,totalXP:(Dt.totalXP||0)+Pt}:Dt);H(en),be(`  ${Pt} XP !`),setTimeout(()=>be(null),3e3)}catch{alert(" ")}finally{l(!1)}}},Te=async()=>{if(Oe.trim()){on(!0);try{await Sa(Ot(Qe,"announcements"),{title:Oe,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:Zs()}),await Sa(Ot(Qe,"notifications"),{recipientId:"all",title:"  ",message:Oe,type:"info",createdAt:Zs(),read:!1}),alert(" "),ct(""),Ee(!1)}catch{alert(" ")}finally{on(!1)}}},Ut=je.filter(ke=>{const ft=(ke.displayName||"").toLowerCase(),Pt=P.toLowerCase();return ft.includes(Pt)}),Ye=ke=>ke>=30?"border-amber-500 ring-2 ring-amber-500/50 shadow-[0_0_20px_rgba(245,158,11,0.5)]":ke>=10?"border-emerald-500 ring-2 ring-emerald-500/30":"border-gray-500";U.length>0&&Math.round(U.reduce((ke,ft)=>ke+ft.percentage,0)/U.length);const Le="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 outline-none font-bold text-white text-sm";return(e==null?void 0:e.role)==="teacher"?r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up pb-32",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-emerald-500 shadow-2xl bg-gray-700",children:e.avatar?r.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):r.jsx(Is,{className:"w-full h-full p-4 text-gray-400"})}),r.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:r.jsx(Qn,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"text-center md:text-right space-y-2",children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white flex items-center gap-2 justify-center md:justify-start",children:[e.displayName,r.jsx(Zo,{className:"w-6 h-6 text-blue-400",title:" "})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3",children:[r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-1 rounded-full bg-emerald-900/30 text-emerald-300 text-xs font-black border border-emerald-800 uppercase tracking-widest shadow-lg shadow-emerald-900/20",children:[r.jsx(bx,{className:"w-3.5 h-3.5"}),"  "]}),r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-4 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[r.jsx(xr,{className:"w-3.5 h-3.5"}),"   "]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-12",children:[r.jsxs("button",{onClick:()=>a&&a("TEACHER_DASHBOARD"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-blue-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center",children:r.jsx(MS,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:" "})]}),r.jsxs("button",{onClick:()=>a&&a("QUESTION_BANK"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-purple-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center",children:r.jsx(Br,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:" "})]}),r.jsxs("button",{onClick:()=>a&&a("TEACHER_UPLOAD_FILES"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-emerald-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center",children:r.jsx(_p,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:" "})]}),r.jsxs("button",{onClick:()=>a&&a("TEACHER_EXPLANATIONS"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-orange-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center",children:r.jsx(qr,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:" "})]}),r.jsxs("button",{onClick:()=>Ee(!0),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-red-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center",children:r.jsx(x3,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:" "})]}),r.jsxs("button",{onClick:()=>a&&a("TEACHER_REVIEWS"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-yellow-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center",children:r.jsx(rd,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:""})]}),r.jsxs("button",{onClick:()=>a&&a("TEACHER_CORRESPONDENCE"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-cyan-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center",children:r.jsx(_l,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:""})]}),r.jsxs("button",{onClick:()=>a&&a("SUBSCRIPTION_MANAGEMENT"),className:"bg-gray-900 p-5 rounded-3xl border border-gray-700 hover:border-amber-500 transition-all flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-amber-900/20 text-amber-400 flex items-center justify-center",children:r.jsx(px,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-bold text-gray-200 text-xs",children:""})]})]}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] border border-gray-700 overflow-hidden shadow-2xl",children:[r.jsx("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[r.jsx(Uf,{className:"w-6 h-6 text-yellow-500"}),"  "]}),r.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(fs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"  ...",value:P,onChange:ke=>ne(ke.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-emerald-500 outline-none font-bold text-white transition-all"})]}),r.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:W?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):Ut.map(ke=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-800 hover:border-emerald-500 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ke.avatar?r.jsx("img",{src:ke.avatar,className:"w-full h-full object-cover"}):r.jsx(Is,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white text-sm",children:ke.displayName}),r.jsx("p",{className:"text-xs text-gray-500",children:ke.email})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:A,onChange:ft=>Y(ft.target.value),children:[r.jsx("option",{value:"10",children:"+10"}),r.jsx("option",{value:"50",children:"+50"}),r.jsx("option",{value:"100",children:"+100"})]}),r.jsx("button",{onClick:()=>Pe(ke.id,ke.displayName),className:"bg-emerald-600 hover:bg-emerald-700 text-white p-2 rounded-lg",children:r.jsx(_l,{className:"w-4 h-4"})})]})]},ke.id))})]})]}),ie&&r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl border border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-black text-white",children:" "}),r.jsx("button",{onClick:()=>Ee(!1),children:r.jsx(ms,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("input",{type:"text",value:Oe,onChange:ke=>ct(ke.target.value),placeholder:" ...",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white mb-6 outline-none focus:border-emerald-500"}),r.jsxs("button",{onClick:Te,disabled:tt,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2",children:[tt?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(Cl,{className:"w-5 h-5"}),"  "]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up relative z-20 pb-40",children:r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:r.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:r.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group z-20",children:[r.jsxs("div",{className:"relative w-full h-48 md:h-64 transition-all rounded-t-[3rem] overflow-hidden",style:{backgroundImage:`url(${(e==null?void 0:e.profileBackground)||D_[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},children:[r.jsxs("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs font-bold border border-white/20",children:[r.jsx(X_,{className:"w-4 h-4"}),"  "]}),r.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${R.color}`,children:[r.jsx(R.icon,{className:"w-4 h-4"})," ",R.title]})]}),r.jsx("div",{className:"absolute top-28 left-1/2 -translate-x-1/2 md:left-auto md:translate-x-0 md:top-40 md:right-12 z-20",children:r.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[r.jsx("div",{className:`w-32 h-32 md:w-44 md:h-44 rounded-full border-[4px] md:border-[6px] overflow-hidden bg-gray-700 flex items-center justify-center shadow-xl ${Ye(I)}`,children:e!=null&&e.avatar?r.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):r.jsx(Is,{className:"w-16 h-16 text-gray-500"})}),r.jsx("div",{className:"absolute bottom-2 right-2 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800",children:r.jsx(I3,{className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"pt-20 md:pt-24 px-5 md:px-8 pb-8",children:[r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 mb-1 w-full",children:[r.jsx("h2",{className:"text-3xl font-black text-white",children:e==null?void 0:e.displayName}),(e==null?void 0:e.isSubscriber)&&r.jsx(wn,{className:"w-6 h-6 text-amber-400 fill-amber-400 animate-pulse"})]}),r.jsx("form",{onSubmit:we,className:"space-y-6 border-t border-gray-700 pt-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),r.jsx("input",{type:"text",value:Kt.firstName,onChange:ke=>cn({...Kt,firstName:ke.target.value}),className:Le})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),r.jsx("input",{type:"text",value:Kt.lastName,onChange:ke=>cn({...Kt,lastName:ke.target.value}),className:Le})]}),r.jsx("div",{className:"md:col-span-2 flex justify-end pt-4",children:r.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 flex items-center gap-2",children:[s?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(Cl,{className:"w-5 h-5"}),"  "]})})]})})]})]})})})}),f&&r.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 bg-black/80 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm flex flex-col border border-gray-700",children:[r.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:" "}),r.jsx("button",{onClick:()=>g(!1),children:r.jsx(ms,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 p-4 grid grid-cols-3 gap-3",children:MD.map((ke,ft)=>r.jsx("button",{onClick:()=>q(ke.url),className:`aspect-square rounded-xl overflow-hidden border-2 ${B===ke.url?"border-emerald-500":"border-transparent"}`,children:r.jsx("img",{src:ke.url,className:"w-full h-full object-cover"})},ft))}),r.jsx("div",{className:"p-4 border-t border-gray-800",children:r.jsx("button",{onClick:te,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold",children:s?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):" "})})]})})]})},VD=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],bp=({options:a,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=a.find(x=>x.value===e&&!x.isHeader);return r.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[r.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[r.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),r.jsx(wa,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[a.map((x,w)=>{if(x.isHeader)return r.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const b=x.value===e;return r.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,b&&r.jsx(Al,{className:"w-4 h-4"})]},w)}),a.length===0&&r.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},PD=(a="General")=>{switch(a){case"Language":return{label:"",bg:"bg-indigo-500/10",border:"border-indigo-500/20",text:"text-indigo-400",hoverBorder:"group-hover:border-indigo-500/50",buttonHover:"group-hover:bg-indigo-600 group-hover:border-indigo-500 group-hover:text-white",icon:Br};case"Reading":return{label:"",bg:"bg-emerald-500/10",border:"border-emerald-500/20",text:"text-emerald-400",hoverBorder:"group-hover:border-emerald-500/50",buttonHover:"group-hover:bg-emerald-600 group-hover:border-emerald-500 group-hover:text-white",icon:Cn};case"Writing":return{label:"",bg:"bg-orange-500/10",border:"border-orange-500/20",text:"text-orange-400",hoverBorder:"group-hover:border-orange-500/50",buttonHover:"group-hover:bg-orange-600 group-hover:border-orange-500 group-hover:text-white",icon:ym};case"Vocabulary":return{label:"",bg:"bg-purple-500/10",border:"border-purple-500/20",text:"text-purple-400",hoverBorder:"group-hover:border-purple-500/50",buttonHover:"group-hover:bg-purple-600 group-hover:border-purple-500 group-hover:text-white",icon:_d};case"General":default:return{label:"",bg:"bg-gray-700/30",border:"border-gray-700",text:"text-gray-400",hoverBorder:"group-hover:border-gray-500",buttonHover:"group-hover:bg-gray-700 group-hover:border-gray-500 group-hover:text-white",icon:Nn}}},LD=({onBack:a,onNavigate:e})=>{const{user:t}=Ds(),[s,l]=k.useState("SELECTION"),[c,d]=k.useState(null),[f,g]=k.useState(""),[x,w]=k.useState(""),[b,N]=k.useState("First"),[M,z]=k.useState("All"),[B,q]=k.useState([]),[re,ue]=k.useState(!1),[U,fe]=k.useState(null),[ae,pe]=k.useState(0),[S,E]=k.useState({}),[I,D]=k.useState(1800),[R,O]=k.useState(null),[C,ce]=k.useState(!1),[je,H]=k.useState(0),[P,ne]=k.useState({}),[W,ge]=k.useState(!1),[A,Y]=k.useState(null),[xe,be]=k.useState(!1),[ie,Ee]=k.useState(!1),[Oe,ct]=k.useState(!1),[tt,on]=k.useState(0),[Kt,cn]=k.useState(!1),[J,we]=k.useState(!1),[te,Pe]=k.useState(null),[Te,Ut]=k.useState(0),[Ye,Le]=k.useState(""),[ke,ft]=k.useState(!1),[Pt,wt]=k.useState(!1),[,en]=k.useState(0);k.useEffect(()=>{const ye=setInterval(()=>en(Re=>Re+1),5e3);return()=>clearInterval(ye)},[]);const Dt=()=>{if(!(t!=null&&t.isSubscriber)||!t.subscriptionExpiry)return!1;const ye=t.subscriptionExpiry.seconds?t.subscriptionExpiry.seconds*1e3:new Date(t.subscriptionExpiry).getTime();return Date.now()<ye};k.useEffect(()=>{window.scrollTo(0,0)},[s,c]),k.useEffect(()=>{x?Dn():q([])},[x,t==null?void 0:t.isSubscriber]),k.useEffect(()=>{let ye;return s==="ACTIVE"&&I>0&&(ye=setInterval(()=>{D(Re=>Re<=1?(Tn(),0):Re-1)},1e3)),()=>clearInterval(ye)},[s,I]),k.useEffect(()=>{let ye;return s==="ACTIVE"&&(U!=null&&U.questionDuration)&&R!==null&&(R>0?ye=setInterval(()=>{O(Re=>Re!==null&&Re>0?Re-1:0)},1e3):R===0&&Yt()),()=>clearInterval(ye)},[s,U,R]),k.useEffect(()=>{U!=null&&U.questionDuration?O(U.questionDuration):O(null)},[ae,U]),k.useEffect(()=>{if(s!=="ACTIVE")return;const ye=()=>{on(He=>{const Ie=He+1;return Ie===1?Ee(!0):Ie>=2&&(Ee(!1),ct(!0)),Ie})},Re=()=>{document.hidden&&ye()},Se=He=>{(He.key==="PrintScreen"||He.ctrlKey&&He.key==="p"||He.metaKey&&He.shiftKey)&&(He.preventDefault(),ye())},ze=He=>He.preventDefault();return document.addEventListener("visibilitychange",Re),document.addEventListener("keydown",Se),document.addEventListener("contextmenu",ze),document.addEventListener("copy",ze),document.addEventListener("paste",ze),document.addEventListener("cut",ze),document.addEventListener("selectstart",ze),()=>{document.removeEventListener("visibilitychange",Re),document.removeEventListener("keydown",Se),document.removeEventListener("contextmenu",ze),document.removeEventListener("copy",ze),document.removeEventListener("paste",ze),document.removeEventListener("cut",ze),document.removeEventListener("selectstart",ze)}},[s]);const Dn=async()=>{ue(!0);try{const ye=kn(Ot(Qe,"quizzes"),Rn("grade","==",x)),Re=await _5(ye),Se=[];Re.forEach(ze=>{Se.push({id:ze.id,...ze.data()})}),q(Se)}catch(ye){console.error("Error fetching quizzes:",ye)}finally{ue(!1)}},un=Array.from(new Set(B.map(ye=>ye.subject))),ss=B.filter(ye=>{const Re=f?ye.subject===f:!0,Se=M&&M!=="All"?ye.category===M:!0,He=(ye.semester||"First")===b;return Re&&Se&&He}),tr=ye=>{const Re=Dt();if(ye.isPremium&&!Re){cn(!0);return}Y(ye),ge(!0)},Ms=ye=>{if(!ye.questions||ye.questions.length===0){alert("      ");return}let Re=[...ye.questions];ye.keepOrder||Re.sort(()=>Math.random()-.5),Re=Re.map(Ie=>{if(Ie.type==="MCQ"||Ie.type==="TF"||Ie.type==="READING"){const _t=Ie.options.map((Xe,dn)=>({opt:Xe,originalIndex:dn}));_t.sort(()=>Math.random()-.5);const nt=_t.map(Xe=>Xe.opt),$e=_t.findIndex(Xe=>Xe.originalIndex===Ie.correctAnswer);return{...Ie,options:nt,correctAnswer:$e}}return Ie});const Se={...ye,questions:Re},ze={};Re.forEach((Ie,_t)=>{if(Ie.type==="REORDER"){const nt=Ie.options.map(($e,Xe)=>Xe);for(let $e=nt.length-1;$e>0;$e--){const Xe=Math.floor(Math.random()*($e+1));[nt[$e],nt[Xe]]=[nt[Xe],nt[$e]]}ze[_t]=nt}}),ne(ze),fe(Se),pe(0),E({});const He=ye.duration?ye.duration*60:1800;D(He),H(0),on(0),ct(!1),Ut(0),Le(""),wt(!1),ge(!1),Y(null),l("ACTIVE")},gs=()=>{A&&Ms(A)},tn=ye=>{E(Re=>({...Re,[ae]:ye}))},Yt=()=>{U&&(O(null),ae<U.questions.length-1?pe(ye=>ye+1):Tn())},Tn=async()=>{if(!U||!t){l("RESULT");return}ce(!0);const ye=Wn(),Re=Math.round(ye/U.questions.length*100);let Se=ye*30;H(Se);try{await Sa(Ot(Qe,"quiz_results"),{userId:t.uid,userName:t.displayName,quizId:U.id||"unknown",quizTitle:U.title,subject:U.subject,score:ye,totalQuestions:U.questions.length,percentage:Re,passed:Re>=50,earnedXP:Se,createdAt:Zs()});const ze=qn(Qe,"users",t.uid);await $m(ze,{totalXP:cx(Se),quizzesCompleted:cx(1),lastQuizDate:Zs(),role:t.role==="teacher"?"teacher":"student",email:t.email,displayName:t.displayName},{merge:!0});const He=`etqan_user_profile_${t.uid}`,Ie=localStorage.getItem(He);if(Ie){const{data:_t,timestamp:nt}=JSON.parse(Ie),$e={..._t,totalXP:(_t.totalXP||0)+Se,quizzesCompleted:(_t.quizzesCompleted||0)+1};localStorage.setItem(He,JSON.stringify({data:$e,timestamp:nt}))}localStorage.removeItem(`etqan_quiz_history_${t.uid}`)}catch(ze){console.error("Error saving quiz result:",ze)}finally{ce(!1),l("RESULT")}},dt=async()=>{if(Te!==0&&!(!U||!t)){ft(!0);try{await Sa(Ot(Qe,"reviews"),{type:"quiz",targetId:U.id,targetTitle:U.title,teacherId:U.createdBy||"teacher",teacherName:U.teacherName||"",rating:Te,comment:Ye,studentId:t.uid,studentName:t.displayName,createdAt:Zs()}),wt(!0)}catch(ye){console.error("Error saving review:",ye),alert("    ")}finally{ft(!1)}}},ps=ye=>{const Re=Math.floor(ye/60),Se=ye%60;return`${Re}:${Se<10?"0":""}${Se}`},Wn=()=>{if(!U)return 0;let ye=0;return U.questions.forEach((Re,Se)=>{if(Re.type==="REORDER"){const ze=S[Se];if(ze&&ze.length===Re.options.length){let He=!0;for(let Ie=0;Ie<Re.options.length;Ie++)if(ze[Ie]!==Ie){He=!1;break}He&&ye++}}else S[Se]===Re.correctAnswer&&ye++}),ye},zi=()=>{be(!0)},Os=()=>{be(!1),l("SELECTION")},Wr=()=>{ct(!1),l("SELECTION")},Bt=ye=>{Pe(ye),we(!0)},Vs=()=>{if(we(!1),te==="REVIEW")l("REVIEW");else if(te==="RETAKE"){const ye=B.find(Re=>Re.id===(U==null?void 0:U.id));ye?Ms(ye):l("SELECTION")}else te==="LIST"?l("SELECTION"):te==="HOME"&&a();Pe(null)},xs=(ye,Re)=>{const Se=S[ae]||[];tn(Re?[...Se,ye]:Se.filter(ze=>ze!==ye))},Mn=({title:ye,message:Re,onConfirm:Se,onCancel:ze,icon:He=dr,confirmText:Ie="",cancelText:_t="",confirmColor:nt="emerald",isStatic:$e=!1})=>r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:_t?ze:void 0}),r.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-white/10 shadow-2xl shadow-black/50 ${$e?"":"animate-fade-in-up"}`,children:[r.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${nt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:r.jsx(He,{className:`w-10 h-10 ${nt==="red"?"text-red-500":"text-emerald-500"}`})}),r.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:ye}),r.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Re}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx("button",{onClick:Se,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all shadow-lg ${nt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"} ${$e?"":"transform hover:scale-105 active:scale-95"} ${_t?"":"max-w-[200px]"}`,children:Ie}),_t&&r.jsx("button",{onClick:ze,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:_t})]})]})]}),Cc=()=>{if(!c)return r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:"  "}),r.jsx("p",{className:"text-gray-400",children:"      "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>d("school"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (5 - 12)"})]})]}),r.jsxs("button",{onClick:()=>d("university"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  "})]})]})]})]});let ye=[],Re=[];return c==="school"?(ye=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(Se=>({label:` ${Se}`,value:Se.toString()}))],Re=[{label:"  ",value:""},...un.map(Se=>({label:String(Se),value:String(Se)}))]):(ye=[{label:"   -   ",value:"English Major - QOU"}],Re=[{label:"  ",value:""},...un.map(Se=>({label:String(Se),value:String(Se)}))]),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[r.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),r.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:c==="school"?"   ":"   "})]}),r.jsxs("button",{onClick:()=>{d(null),w(""),g("")},className:"text-xs font-bold text-gray-500 hover:text-white flex items-center gap-1 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700 transition-colors",children:[r.jsx(fr,{className:"w-3 h-3"}),"  "]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[r.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[r.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${c==="university"?"bg-blue-900/30":"bg-emerald-900/30"}`,children:c==="university"?r.jsx(Bn,{className:"w-5 h-5 text-blue-400"}):r.jsx(xr,{className:"w-5 h-5 text-emerald-400"})}),c==="university"?" ":" "]}),r.jsx(bp,{options:ye,value:x,onChange:Se=>{w(Se),g(""),z("All")},placeholder:c==="university"?"--   --":"--    --"})]}),r.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[r.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:r.jsx(Nn,{className:"w-5 h-5 text-emerald-400"})}),c==="university"?" / ":" "]}),r.jsx(bp,{options:Re,value:f,onChange:g,placeholder:x?" ":c==="university"?"   ":"   ",disabled:!x})]})]}),x&&r.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[r.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:r.jsx(J_,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),r.jsx(bp,{options:VD.map(Se=>({label:Se.label,value:Se.id})),value:M,onChange:z,placeholder:"  "})]}),r.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[r.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:r.jsx(Xo,{className:"w-5 h-5 text-emerald-400"})})," "]}),r.jsxs("div",{className:"flex bg-gray-800 p-1.5 rounded-2xl border border-gray-700",children:[r.jsx("button",{onClick:()=>N("First"),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm ${b==="First"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:" "}),r.jsx("button",{onClick:()=>N("Second"),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm ${b==="Second"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:" "})]})]})]})}),x&&r.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[r.jsx($_,{className:"w-5 h-5"}),"  - ",b==="First"?" ":" "]}),re?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):B.length===0?r.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(fs,{className:"w-8 h-8 text-gray-500"})}),r.jsx("p",{className:"text-gray-400 font-medium",children:"    "})]}):ss.length===0?r.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(fs,{className:"w-8 h-8 text-gray-500"})}),r.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6",children:ss.map(Se=>{const ze=Dt(),He=Se.isPremium&&!ze,Ie=PD(Se.category);return r.jsxs("div",{className:`bg-gray-900 rounded-2xl md:rounded-3xl p-3 md:p-5 border md:border-2 transition-all duration-300 group relative overflow-hidden flex flex-col gap-2 md:gap-4 ${He?"border-gray-800 opacity-90":`${Ie.border} ${Ie.hoverBorder} hover:-translate-y-1 hover:shadow-xl`}`,children:[Se.isPremium&&r.jsxs("div",{className:"absolute top-0 left-0 bg-amber-500 text-gray-900 text-[8px] md:text-[10px] font-black px-2 md:px-3 py-0.5 md:py-1 rounded-br-lg md:rounded-br-xl z-20 flex items-center gap-1",children:[r.jsx(wn,{className:"w-2.5 h-2.5 md:w-3 md:h-3 fill-gray-900"}),"PREMIUM"]}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:`flex items-center gap-1 md:gap-2 px-2 md:px-3 py-1 md:py-1.5 rounded-full ${Ie.bg} ${Ie.text}`,children:[r.jsx(Ie.icon,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"text-[10px] md:text-xs font-bold",children:Ie.label})]}),r.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 text-gray-500 text-[9px] md:text-xs bg-gray-950 px-1.5 md:px-2 py-0.5 md:py-1 rounded-lg border border-gray-800",children:[r.jsx(sd,{className:"w-2.5 h-2.5 md:w-3 md:h-3"}),r.jsxs("span",{className:"font-mono font-bold pt-0.5",children:[Se.duration||30," "]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[r.jsx("h3",{className:`text-sm md:text-lg font-black text-white leading-tight mb-1 md:mb-2 line-clamp-2 ${He?"text-gray-400":""}`,children:Se.title}),r.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 text-[9px] md:text-xs text-gray-400 font-medium",children:[r.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1",children:[r.jsx(yx,{className:"w-2.5 h-2.5 md:w-3.5 md:h-3.5"}),r.jsx("span",{className:"truncate max-w-[60px] md:max-w-none",children:Se.grade==="English Major - QOU"?"":` ${Se.grade}`})]}),r.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1",children:[r.jsx(dr,{className:"w-2.5 h-2.5 md:w-3.5 md:h-3.5"}),r.jsxs("span",{children:[Se.questions.length," "]})]})]})]}),r.jsx("button",{onClick:()=>tr(Se),className:`w-full py-2 md:py-3 rounded-lg md:rounded-xl font-bold text-xs md:text-sm flex items-center justify-center gap-1 md:gap-2 transition-all shadow-md md:shadow-lg ${He?"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700":`bg-gray-800 text-white border border-gray-700 ${Ie.buttonHover}`}`,children:He?r.jsxs(r.Fragment,{children:[r.jsx(Il,{className:"w-3 h-3 md:w-4 md:h-4"})," "]}):r.jsxs(r.Fragment,{children:[" ",r.jsx(pt,{className:"w-3 h-3 md:w-4 md:h-4"})]})})]},Se.id)})})]}),W&&r.jsx(Mn,{title:"  ",message:`   ${A==null?void 0:A.title} `,onConfirm:gs,onCancel:()=>ge(!1),confirmText:" ",cancelText:"",icon:dr}),Kt&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>cn(!1)}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-sm w-full relative z-10 text-center border border-amber-500/30 shadow-2xl shadow-amber-900/20 animate-fade-in-up",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 bg-amber-500/20",children:r.jsx(wn,{className:"w-10 h-10 text-amber-500 fill-amber-500"})}),r.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:"       .    ."}),r.jsx("button",{onClick:()=>{cn(!1),c&&localStorage.setItem("etqan_service_intent",c),e("SERVICES")},className:"w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 border border-amber-500",children:" "})]})]})]})},Gl=()=>{if(!U||!U.questions||!U.questions[ae])return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[r.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),r.jsx("button",{onClick:()=>l("SELECTION"),className:"text-blue-400 underline",children:" "})]});const ye=U.questions[ae],Re=ye.type==="REORDER";let Se=!1;if(Re){const $e=S[ae];Se=$e!==void 0&&$e.length===ye.options.length}else Se=S[ae]!==void 0;const ze=ae===U.questions.length-1,He=U.subject.toLowerCase().includes("english")||U.subject.includes("")||U.subject.includes(""),Ie=He?"ltr":"rtl",_t=He?"text-left":"text-right",nt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[ye.passageFontSize||"md"];return r.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:$e=>$e.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[r.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),r.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),Oe&&r.jsx(Mn,{title:"   ",message:"      .   .",onConfirm:Wr,cancelText:null,confirmText:"",icon:bx,confirmColor:"red",isStatic:!0}),ie&&!Oe&&r.jsx(Mn,{title:" !",message:"     .   .",onConfirm:()=>Ee(!1),cancelText:null,confirmText:"",icon:wx,confirmColor:"red",isStatic:!0}),xe&&r.jsx(Mn,{title:" ",message:"       .",onConfirm:Os,onCancel:()=>be(!1),confirmText:" ",cancelText:"",icon:zf,confirmColor:"red",isStatic:!0}),r.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[r.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[r.jsxs("button",{onClick:zi,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[r.jsx(zf,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:""})]}),r.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:r.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${I<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[r.jsx(sd,{className:"w-4 h-4"}),ps(I)]})}),r.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[ae+1," / ",U.questions.length]})]}),r.jsx("div",{className:"w-full bg-gray-700 h-1",children:r.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(ae+1)/U.questions.length*100}%`}})})]}),R!==null&&U.questionDuration&&r.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[r.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-1000 linear ${R<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${R/U.questionDuration*100}%`}})}),r.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",R," "]})]}),r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Ie,children:[r.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[r.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:U.title}),r.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Re?r.jsx(Q_,{className:"w-4 h-4 text-emerald-500"}):r.jsx(Il,{className:"w-4 h-4 text-gray-300"})})]}),r.jsxs("div",{className:"p-6 md:p-8",children:[ye.passageContent&&r.jsxs("div",{className:"mb-8 select-none",onCopy:$e=>$e.preventDefault(),children:[ye.generalInstruction&&r.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${_t}`,children:ye.generalInstruction}),r.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${_t} select-none`,children:r.jsx("div",{className:`text-gray-200 font-medium ${nt}`,dangerouslySetInnerHTML:{__html:ye.passageContent||""}})})]}),r.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 select-none ${_t}`,onCopy:$e=>$e.preventDefault(),children:ye.question}),Re?r.jsxs("div",{className:"space-y-6",dir:"ltr",children:[r.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(S[ae]||[]).map(($e,Xe)=>r.jsx("button",{onClick:()=>xs($e,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in select-none",children:ye.options[$e]},`ans-${Xe}`)),(!S[ae]||S[ae].length===0)&&r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic select-none",children:"      "})]}),r.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(P[ae]||[]).filter($e=>!(S[ae]||[]).includes($e)).map(($e,Xe)=>r.jsx("button",{onClick:()=>xs($e,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95 select-none",children:ye.options[$e]},`bank-${Xe}`))}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>tn([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[r.jsx(fr,{className:"w-3 h-3"})," "]})})]}):r.jsx("div",{className:"space-y-3",children:ye.options.map(($e,Xe)=>r.jsxs("button",{onClick:()=>tn(Xe),className:`w-full ${_t} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 outline-none select-none ${S[ae]===Xe?"border-emerald-500 bg-emerald-900/30 shadow-md outline-none":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[r.jsx("span",{className:`text-base font-bold ${S[ae]===Xe?"text-emerald-300":"text-gray-300"}`,children:$e}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${S[ae]===Xe?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:S[ae]===Xe&&r.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Xe))})]})]}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{onClick:Yt,disabled:!Se||C,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Se||C?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:C?r.jsxs(r.Fragment,{children:["  ",r.jsx(vt,{className:"w-5 h-5 animate-spin"})]}):r.jsxs(r.Fragment,{children:[ze?" ":" ",Ie==="rtl"?r.jsx(hx,{className:"w-5 h-5"}):r.jsx(pt,{className:"w-5 h-5"})]})})})]})]})},Ps=()=>{if(!U)return null;const ye=Wn(),Re=U.questions.length,Se=Math.round(ye/Re*100);let ze="text-red-500",He=pS,Ie=" ";Se>=90?(ze="text-emerald-500",He=wn,Ie="!"):Se>=75?(ze="text-blue-500",He=wd,Ie="!"):Se>=50&&(ze="text-yellow-500",He=Al,Ie=" ");const _t=He;return r.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[r.jsxs("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2.5rem] border border-gray-800 p-8 relative overflow-hidden text-center shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6",children:[r.jsx(_t,{className:`w-16 h-16 ${ze} mb-3 drop-shadow-md`}),r.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:Ie}),r.jsx("p",{className:"text-gray-400 font-medium text-sm mb-3",children:U.title}),r.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-3 py-1 rounded-full border border-gray-700",children:[r.jsx(G_,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"}),r.jsxs("span",{className:"font-bold text-white text-xs",children:["+",je," XP"]})]})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 text-center mb-6 border border-gray-800",children:[r.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-2",children:" "}),r.jsxs("span",{className:`text-6xl font-black ${ze}`,children:[Se,"%"]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/50 flex items-center justify-center gap-2 text-gray-400 text-sm font-bold",children:[r.jsx("span",{children:"  :"}),r.jsxs("span",{className:`text-white bg-gray-700 px-3 py-1 rounded-lg ${ze}`,children:[ye," / ",Re]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>Bt("REVIEW"),className:"w-full py-3.5 bg-orange-500 text-white font-black text-sm rounded-xl hover:bg-orange-600 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-lg shadow-orange-900/20",children:[r.jsx(jp,{className:"w-4 h-4"}),"  "]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>Bt("HOME"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[r.jsx(Gt,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>Bt("RETAKE"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[r.jsx(Nd,{className:"w-4 h-4"}),"  "]})]})]})]}),r.jsx("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:Pt?r.jsxs("div",{className:"py-4",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[r.jsx(Al,{className:"w-5 h-5"}),r.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),r.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[r.jsx(rd,{className:"w-4 h-4 text-yellow-400"}),r.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),r.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(nt=>r.jsx("button",{onClick:()=>Ut(nt),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Te===nt?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:nt},nt))}),r.jsx("textarea",{value:Ye,onChange:nt=>Le(nt.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),r.jsxs("button",{onClick:dt,disabled:ke||Te===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Te===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[ke?r.jsx(vt,{className:"w-3 h-3 animate-spin"}):r.jsx(_l,{className:"w-3 h-3"}),""]})]})})]})},Zr=()=>r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(jp,{className:"w-5 h-5 text-emerald-400"})," "]}),r.jsxs("button",{onClick:()=>l("RESULT"),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-xl font-bold transition-all shadow-lg border border-emerald-500 flex items-center gap-2 text-lg transform hover:-translate-y-1",children:[r.jsx(pt,{className:"w-6 h-6"})," "]})]}),r.jsx("div",{className:"space-y-6",children:U==null?void 0:U.questions.map((ye,Re)=>{const Se=ye.type==="REORDER";let ze=!1,He=null;if(Se){const Ie=S[Re];Ie?(He=Ie.map(_t=>ye.options[_t]).join(" "),ze=Ie.length===ye.options.length&&Ie.every((_t,nt)=>_t===nt)):(He="  ",ze=!1)}else{const Ie=S[Re];ze=Ie===ye.correctAnswer,He=Ie!==void 0?ye.options[Ie]:"  "}return r.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ze?"border-gray-700":"border-red-900/50"}`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ze?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Re+1}),r.jsx("h3",{className:"text-base font-bold text-white leading-relaxed select-none",onCopy:Ie=>Ie.preventDefault(),children:ye.question})]}),r.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ze?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[r.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),r.jsx("span",{className:"font-bold",children:He})]}),!ze&&r.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[r.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),r.jsx("span",{className:"font-bold text-emerald-400 select-none",onCopy:Ie=>Ie.preventDefault(),children:Se?ye.options.join(" "):ye.options[ye.correctAnswer]})]}),ye.explanation&&r.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in select-none",onCopy:Ie=>Ie.preventDefault(),children:[r.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[r.jsx(dr,{className:"w-3 h-3"}),":"]}),r.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:ye.explanation})]})]},ye.id)})})]});return r.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[s==="SELECTION"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),r.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5 hidden md:block",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Nn,{className:"w-3 h-3"}),""]})]})]})]})}),Cc()]}),s==="ACTIVE"&&Gl(),s==="RESULT"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed top-0 left-0 w-full h-28 z-[60] bg-transparent cursor-default"}),Ps()]}),s==="REVIEW"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed top-0 left-0 w-full h-28 z-[60] bg-transparent cursor-default"}),Zr()]}),J&&r.jsx(Mn,{title:"  ",message:te==="REVIEW"?"   ":te==="RETAKE"?"     ":te==="LIST"?"    ":"    ",onConfirm:Vs,onCancel:()=>we(!1),confirmText:"",cancelText:"",icon:Y_})]})},Ym=()=>{const a=k.useRef(null);return k.useEffect(()=>{const e=a.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const w=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",w);const b=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(b)};return b(),()=>{window.removeEventListener("resize",w),cancelAnimationFrame(s)}},[]),r.jsx("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},zD=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),UD=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),BD=({onBack:a})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",workplace:"  ",location:" ",color:"emerald",education:"     -   ",rating:"",bio:"        .              .",skills:["  ","  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",workplace:"  ",location:" ",color:"blue",education:"   -   ",rating:"",bio:"       .                .",skills:["  ",""],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[r.jsx(Ym,{}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950"}),r.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-emerald-900/30 rounded-xl transition-all text-gray-400 hover:text-white border border-gray-700 hover:border-emerald-500/30 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-400",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-600",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Si,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-emerald-500/10 rounded-full mb-4 border border-emerald-500/20 backdrop-blur-md",children:r.jsx(vi,{className:"w-6 h-6 text-emerald-400 fill-emerald-400 animate-pulse"})}),r.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"          "})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:e.map((t,s)=>r.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-xl rounded-[2.5rem] shadow-2xl border border-gray-700/50 flex flex-col hover:border-emerald-500/30 transition-all duration-300 p-8 group relative overflow-hidden",children:[r.jsx("div",{className:`absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-transparent via-${t.color}-500 to-transparent opacity-80`}),r.jsxs("div",{className:"flex justify-center mb-8 relative",children:[r.jsxs("div",{className:`w-40 h-40 rounded-full p-1.5 bg-gradient-to-br from-${t.color}-500/20 to-gray-800 shadow-2xl relative z-10 border border-${t.color}-500/30`,children:[r.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"}),r.jsx("div",{className:"absolute bottom-2 right-2 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:r.jsx(Qn,{className:"w-4 h-4"})})]}),r.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-${t.color}-500/10 rounded-full blur-3xl animate-pulse`})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:t.name}),r.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-5`,children:t.title}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-gray-300 text-sm font-medium",children:[r.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-800/80 px-3 py-1.5 rounded-full border border-gray-700 shadow-sm",children:[r.jsx(ed,{className:"w-3.5 h-3.5 text-emerald-400"}),t.workplace]}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-800/80 px-3 py-1.5 rounded-full border border-gray-700 shadow-sm",children:[r.jsx(Ep,{className:"w-3.5 h-3.5 text-red-400"}),t.location]})]})]}),r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"bg-gray-800/40 p-5 rounded-2xl border border-gray-700/50 relative hover:bg-gray-800/60 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[r.jsx("div",{className:`p-1.5 rounded-lg bg-${t.color}-500/20 text-${t.color}-400`,children:r.jsx(xr,{className:"w-5 h-5"})}),r.jsx("h3",{children:" "})]}),t.rating&&r.jsxs("span",{className:"text-[10px] font-black bg-amber-500/20 text-amber-400 px-2 py-0.5 rounded border border-amber-500/30 flex items-center gap-1",children:[r.jsx(vi,{className:"w-3 h-3 fill-amber-400"}),t.rating]})]}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-medium pr-2 border-r-2 border-gray-700 mr-1",children:t.education})]}),r.jsxs("div",{className:"text-center px-2",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(vi,{className:"w-4 h-4 text-emerald-500 fill-emerald-500"}),r.jsx("h3",{className:"font-bold text-gray-200",children:" "})]}),r.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:t.bio})]}),r.jsx("div",{children:r.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>r.jsxs("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-3 py-1.5 rounded-lg text-xs font-bold border border-${t.color}-500/20 flex items-center gap-1.5`,children:[r.jsx(wd,{className:"w-3 h-3"}),l]},c))})})]}),r.jsx("div",{className:"pt-8 mt-4 border-t border-gray-800/50",children:r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-xl bg-[#1877F2]/10 text-[#1877F2] flex items-center justify-center hover:bg-[#1877F2] hover:text-white transition-all border border-[#1877F2]/20 hover:-translate-y-1 shadow-lg",children:r.jsx(Jo,{className:"w-5 h-5"})}),r.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-xl bg-[#25D366]/10 text-[#25D366] flex items-center justify-center hover:bg-[#25D366] hover:text-white transition-all border border-[#25D366]/20 hover:-translate-y-1 shadow-lg",children:r.jsx(zD,{className:"w-5 h-5"})}),r.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-xl bg-[#0088cc]/10 text-[#0088cc] flex items-center justify-center hover:bg-[#0088cc] hover:text-white transition-all border border-[#0088cc]/20 hover:-translate-y-1 shadow-lg",children:r.jsx(UD,{className:"w-5 h-5"})})]})})]},s))})]})]})},qD=({onBack:a})=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(xx,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5 -mt-16 pt-32",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[r.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),r.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",r.jsx("br",{}),"   "]}),r.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[r.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:r.jsx(jp,{className:"w-8 h-8 text-blue-400"})}),r.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),r.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),r.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:r.jsx(vx,{className:"w-8 h-8 text-emerald-400"})}),r.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),r.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),r.jsxs("div",{className:"mb-20",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),r.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:Zo,title:" ",desc:"       ."},{icon:qS,title:" ",desc:"           ."},{icon:F_,title:" ",desc:"         ."},{icon:Si,title:" ",desc:"          ."}].map((e,t)=>r.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[r.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:r.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),r.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),M_=({options:a,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=k.useState(!1),f=k.useRef(null);k.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=a.find(x=>x.value===e&&!x.isHeader);return r.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[r.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-3 rounded-xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all text-xs md:text-sm
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[r.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),r.jsx(wa,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[a.map((x,w)=>{if(x.isHeader)return r.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const b=x.value===e;return r.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,b&&r.jsx(Al,{className:"w-4 h-4"})]},w)}),a.length===0&&r.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},FD=({onBack:a})=>{const[e,t]=k.useState(null),[s,l]=k.useState(""),[c,d]=k.useState(""),[f,g]=k.useState("SELECTION"),[x,w]=k.useState(["handouts"]),[b,N]=k.useState([]),[M,z]=k.useState(!1);k.useEffect(()=>{f==="CONTENT"&&c&&s&&B()},[f,c,s]);const B=async()=>{z(!0);const S=`etqan_materials_${c}_${s}`,E=365*24*60*60*1e3,I=localStorage.getItem(S);if(I)try{const{data:D,timestamp:R}=JSON.parse(I);if(Date.now()-R<E){N(D),z(!1);return}}catch(D){console.error("Cache parsing error",D)}try{const D=kn(Ot(Qe,"study_materials"),Rn("grade","==",c),Rn("subject","==",s)),R=await Jn(D),O=[];R.forEach(C=>{O.push({id:C.id,...C.data()})}),O.sort((C,ce)=>{var P,ne;const je=((P=C.createdAt)==null?void 0:P.seconds)||0;return(((ne=ce.createdAt)==null?void 0:ne.seconds)||0)-je}),N(O),localStorage.setItem(S,JSON.stringify({data:O,timestamp:Date.now()}))}catch(D){console.error("Error fetching materials:",D)}finally{z(!1)}},q=()=>{s&&c&&g("CONTENT")},re=S=>{w(E=>E.includes(S)?E.filter(I=>I!==S):[...E,S])},ue=()=>{const S=b.filter(D=>D.category==="handouts"),E=b.filter(D=>D.category==="worksheets"),I=b.filter(D=>D.category==="exams");return[{id:"handouts",title:" ",files:S},{id:"worksheets",title:" ",files:E},{id:"exams",title:" ",files:I}]},U=S=>S?(S.toDate?S.toDate():new Date(S.seconds*1e3)).toLocaleDateString("ar-EG"):"",fe=ue(),ae=()=>{if(!e)return r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in relative z-20",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:"  "}),r.jsx("p",{className:"text-gray-400",children:"    "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>t("school"),className:"bg-gray-900 p-8 rounded-3xl border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-xl flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(er,{className:"w-10 h-10 text-emerald-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),r.jsxs("button",{onClick:()=>t("university"),className:"bg-gray-900 p-8 rounded-3xl border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-xl flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(Bn,{className:"w-10 h-10 text-blue-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (  )"})]})]})]});let S=[];e==="school"?S=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(I=>({label:` ${I}`,value:I.toString()}))]:S=[{label:"   -   ",value:"English Major - QOU"}];const E=[{label:"  (English)",value:"English"}];return r.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[r.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-20",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white hidden md:block leading-none mb-1",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-bold text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(gl,{className:"w-3 h-3"}),""]})]})]})]})}),r.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3rem] shadow-2xl shadow-gray-900/50 mb-16 border-b border-white/5 -mt-16",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),r.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),r.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/10 backdrop-blur-md rounded-2xl mb-4 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:r.jsx(gl,{className:"w-8 h-8 text-white drop-shadow-md"})}),r.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-4 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),r.jsx("p",{className:"text-white/95 text-lg md:text-xl max-w-2xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-6 animate-fade-in-up delay-200",children:"         PDF."})]})]}),r.jsx("div",{className:"max-w-3xl mx-auto px-4 -mt-32 relative z-20 animate-fade-in-up delay-300",children:r.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-2xl border border-white/5 p-6 md:p-6 backdrop-blur-xl mb-6",children:[r.jsxs("button",{onClick:()=>{t(null),d(""),l("")},className:"text-xs font-bold text-gray-500 hover:text-white flex items-center gap-1 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700 transition-colors mb-4 w-fit",children:[r.jsx(fr,{className:"w-3 h-3"}),"  "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"group relative z-20",children:[r.jsxs("label",{className:"block text-xs font-bold text-gray-300 mb-2 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[r.jsx("div",{className:"p-1.5 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:r.jsx(Nn,{className:"w-3.5 h-3.5 text-emerald-400"})}),e==="university"?" / ":" "]}),r.jsx(M_,{options:E,value:s,onChange:l,placeholder:" "})]}),r.jsxs("div",{className:"group relative z-10",children:[r.jsxs("label",{className:"block text-xs font-bold text-gray-300 mb-2 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[r.jsx("div",{className:"p-1.5 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:e==="university"?r.jsx(Bn,{className:"w-3.5 h-3.5 text-teal-400"}):r.jsx(xr,{className:"w-3.5 h-3.5 text-teal-400"})}),e==="university"?"":" "]}),r.jsx(M_,{options:S,value:c,onChange:d,placeholder:e==="university"?" ":" "})]})]}),r.jsxs("button",{onClick:q,disabled:!s||!c,className:`w-full py-3.5 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-lg ${!s||!c?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[r.jsx(fs,{className:"w-5 h-5"})," "]})]})})]})},pe=()=>r.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 animate-fade-in-up min-h-screen",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-20",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>g("SELECTION"),className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:[" ",s]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-bold text-gray-500",children:[r.jsxs("span",{onClick:()=>g("SELECTION"),className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(gl,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Cn,{className:"w-3 h-3"}),""]})]})]})]})}),r.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden mt-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),r.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Cn,{className:"w-8 h-8 text-emerald-400"})}),r.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",s]}),r.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",r.jsx("span",{className:"font-bold text-emerald-400",children:c==="English Major - QOU"?"  ":` ${c}`})]})]}),M?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[r.jsx(vt,{className:"w-10 h-10 animate-spin text-emerald-400"}),r.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):r.jsx("div",{className:"space-y-4",children:fe.map(S=>{const E=x.includes(S.id);return r.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("button",{onClick:()=>re(S.id),className:`w-full flex items-center justify-between p-5 transition-colors ${E?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-2.5 rounded-xl ${E?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:r.jsx(gl,{className:"w-6 h-6"})}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"font-bold text-base text-white block",children:S.title}),r.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[S.files.length," "]})]})]}),r.jsx("div",{className:`transition-transform duration-300 ${E?"rotate-180":""}`,children:r.jsx(wa,{className:"w-5 h-5 text-gray-400"})})]}),E&&r.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:S.files.length===0?r.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[r.jsx(gl,{className:"w-10 h-10 mb-2 opacity-20"}),r.jsx("p",{className:"text-sm font-medium",children:"       "})]}):r.jsx("div",{className:"divide-y divide-gray-700/50",children:S.files.map((I,D)=>r.jsxs("div",{onClick:()=>I.url&&window.open(I.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:r.jsx(Cn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[r.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:I.title}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:U(I.createdAt)}),r.jsx("span",{children:""}),r.jsx("span",{children:I.size||"PDF"})]})]})]}),r.jsx("div",{className:"p-2 text-gray-500 group-hover:text-emerald-400 transition-colors",children:r.jsx(Np,{className:"w-5 h-5"})})]},D))})})]},S.id)})})]});return r.jsx(r.Fragment,{children:f==="SELECTION"?ae():pe()})},HD=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),GD=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036c-2.148 0-2.797 1.651-2.797 2.895v1.076h3.441l-1.347 3.667h-2.094v8.382a12.975 12.975 0 0 0 1.579-.098 12.9 12.9 0 0 0 4.199-1.528 12.906 12.906 0 0 0 3.334-2.715 12.825 12.825 0 0 0 2.193-3.525A12.972 12.972 0 0 0 24 12.074a12.972 12.972 0 0 0-1.405-6.075 12.906 12.906 0 0 0-3.831-4.421A12.975 12.975 0 0 0 12.074 0a12.972 12.972 0 0 0-6.075 1.405A12.906 12.906 0 0 0 1.579 5.236 12.972 12.972 0 0 0 0 12.074a12.972 12.972 0 0 0 1.405 6.075 12.906 12.906 0 0 0 3.831 4.421 12.975 12.975 0 0 0 3.865 1.121z"})}),$D=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),KD=({onBack:a})=>{const e=[{name:".   ",role:"  -  ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",whatsapp:"https://wa.me/972568401548",facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",telegram:"https://t.me/yazan1342",theme:"emerald",glowColor:"rgba(16,185,129,0.6)",borderColor:"border-emerald-500/50",textColor:"text-emerald-400"},{name:".   ",role:"  -  ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",whatsapp:"#",facebook:"#",telegram:"#",theme:"blue",glowColor:"rgba(59,130,246,0.6)",borderColor:"border-blue-500/50",textColor:"text-blue-400"}];return r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-2 pb-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:"  "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Wo,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-gray-900 rounded-2xl mb-4 border border-gray-800 shadow-xl",children:r.jsx(xr,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"  "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:e.map((t,s)=>r.jsxs("div",{className:`bg-gray-950 rounded-[2.5rem] p-8 text-center relative overflow-hidden group border-2 ${t.borderColor} transition-all duration-500 hover:-translate-y-2`,style:{boxShadow:`0 0 60px -10px ${t.glowColor}, inset 0 0 20px -15px ${t.glowColor}`},children:[r.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] opacity-20 pointer-events-none",style:{background:`radial-gradient(circle, ${t.glowColor} 0%, transparent 70%)`}}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:`w-36 h-36 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl border-4 ${t.borderColor} overflow-hidden p-1 group-hover:scale-105 transition-transform duration-500`,children:r.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})}),r.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:t.name}),r.jsxs("div",{className:`flex items-center justify-center gap-2 mb-8 ${t.textColor} font-bold text-sm bg-gray-900/80 px-5 py-2 rounded-full w-fit mx-auto border border-white/10 backdrop-blur-sm shadow-lg`,children:[r.jsx(yx,{className:"w-4 h-4"}),r.jsx("span",{children:t.role})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>window.open(t.whatsapp,"_blank"),className:"flex flex-col items-center justify-center gap-2 bg-[#25D366]/10 hover:bg-[#25D366] text-[#25D366] hover:text-white py-4 rounded-2xl font-bold transition-all border border-[#25D366]/20 group/btn shadow-lg",children:[r.jsx(HD,{className:"w-6 h-6 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-[10px]",children:""})]}),r.jsxs("button",{onClick:()=>window.open(t.facebook,"_blank"),className:"flex flex-col items-center justify-center gap-2 bg-[#1877F2]/10 hover:bg-[#1877F2] text-[#1877F2] hover:text-white py-4 rounded-2xl font-bold transition-all border border-[#1877F2]/20 group/btn shadow-lg",children:[r.jsx(GD,{className:"w-6 h-6 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-[10px]",children:""})]}),r.jsxs("button",{onClick:()=>window.open(t.telegram,"_blank"),className:"flex flex-col items-center justify-center gap-2 bg-[#0088cc]/10 hover:bg-[#0088cc] text-[#0088cc] hover:text-white py-4 rounded-2xl font-bold transition-all border border-[#0088cc]/20 group/btn shadow-lg",children:[r.jsx($D,{className:"w-6 h-6 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-[10px]",children:""})]})]})]})]},s))}),r.jsx("div",{className:"text-center py-8 border-t border-white/5",children:r.jsxs("p",{className:"text-gray-500 text-sm font-medium animate-pulse flex items-center justify-center gap-2",children:[r.jsx(dr,{className:"w-4 h-4"}),"    (  ) ..."]})}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-900 p-6 rounded-3xl border border-gray-800 hover:border-emerald-500/30 transition-colors",children:[r.jsx(dr,{className:"w-8 h-8 text-blue-500 mb-4"}),r.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"              ."})]}),r.jsxs("div",{className:"bg-gray-900 p-6 rounded-3xl border border-gray-800 hover:border-emerald-500/30 transition-colors",children:[r.jsx(VS,{className:"w-8 h-8 text-purple-500 mb-4"}),r.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:'   " "         .'})]})]})]})]})},O_=[{minLevel:1,title:" ",icon:H_,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:Nn,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:fs,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:wd,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:jd,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:wn,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],QD=({onLoginClick:a})=>{const[e,t]=k.useState([]),[s,l]=k.useState(!0),[c,d]=k.useState(null);k.useEffect(()=>{(async()=>{l(!0);const b="etqan_leaderboard_cache_v3",N=365*24*60*60*1e3,M=localStorage.getItem(b),z=Date.now();let B=[],q=!1;if(M)try{const re=JSON.parse(M);z-re.timestamp<N&&(B=re.data,q=!0)}catch(re){console.error("Cache parse error",re)}if(q)t(B);else try{const re=kn(Ot(Qe,"users"),Fd("totalXP","desc"),Di(10)),U=(await Jn(re)).docs.map(fe=>({...fe.data(),uid:fe.id}));t(U),localStorage.setItem(b,JSON.stringify({timestamp:z,data:U}))}catch(re){console.error("Error fetching leaderboard:",re)}l(!1)})()},[]);const f=w=>{switch(w){case 0:return r.jsx(wn,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return r.jsx(ww,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return r.jsx(ww,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return r.jsx(Uf,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=w=>{const b=Math.floor((w||0)/500)+1;return[...O_].reverse().find(N=>b>=N.minLevel)||O_[0]},x=w=>{const b=Math.floor((w||0)/500)+1;return b>=30?"border-red-600 ring-2 ring-red-600/50 shadow-[0_0_15px_rgba(220,38,38,0.5)]":b>=20?"border-orange-700 ring-1 ring-orange-700/30":b>=15?"border-yellow-400 ring-1 ring-yellow-400/30":b>=10?"border-blue-800 ring-1 ring-blue-800/30":b>=5?"border-emerald-500 ring-1 ring-emerald-500/30":"border-gray-600"};return r.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),r.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[r.jsxs("h2",{className:"text-3xl md:text-5xl font-black mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[r.jsx(Uf,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:" "})]}),r.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"    ( 10)"})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-full max-w-3xl",children:r.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[r.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(G_,{className:"w-5 h-5 text-orange-500"})," "]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[r.jsx(xx,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),r.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:r.jsx("p",{children:"      !"})}):r.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((w,b)=>r.jsxs("div",{onClick:()=>d(w),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${b===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":b===1?"bg-gray-800/60 border-gray-600/50":b===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[r.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${b<3?"text-white":"text-gray-600"}`,children:b<3?f(b):b+1}),r.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden shrink-0 border-2 transition-all duration-300 ${x(w.totalXP||0)}`,children:w.avatar?r.jsx("img",{src:w.avatar,alt:w.displayName,className:"w-full h-full object-cover"}):r.jsx(Is,{className:"w-full h-full p-2 text-gray-400 bg-gray-800"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:w.displayName}),r.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[r.jsx(xr,{className:"w-3 h-3"}),w.school||" "]})]})]}),r.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[r.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:w.totalXP||0}),r.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),b===0&&r.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:r.jsxs("span",{className:"flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},b))})]})})})]}),c&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:r.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[r.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:r.jsx(ms,{className:"w-5 h-5"})}),r.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:r.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),r.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[r.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-[6px] overflow-hidden shadow-xl mb-4 bg-gray-800 ${x(c.totalXP||0)}`,children:c.avatar?r.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):r.jsx(Is,{className:"w-full h-full p-6 text-gray-500"})}),r.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[r.jsx(yx,{className:"w-3 h-3"}),c.school||" "]}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[z_.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),r.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),r.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[r.jsx(M3,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),r.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),r.jsx("div",{className:"pt-4 border-t border-gray-800",children:r.jsxs("div",{className:"flex justify-between items-center px-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),r.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),r.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},YD=()=>{const a=[{id:1,label:" ",value:"+500",icon:Si,gradient:"from-blue-400 via-indigo-400 to-cyan-400",shadow:"hover:shadow-blue-500/20",border:"group-hover:border-blue-500/50",bgIcon:"bg-blue-500/10 text-blue-400"},{id:2,label:" ",value:"+50",icon:Nn,gradient:"from-emerald-400 via-green-400 to-teal-400",shadow:"hover:shadow-emerald-500/20",border:"group-hover:border-emerald-500/50",bgIcon:"bg-emerald-500/10 text-emerald-400"},{id:3,label:" ",value:"+20",icon:Cn,gradient:"from-amber-400 via-orange-400 to-yellow-400",shadow:"hover:shadow-amber-500/20",border:"group-hover:border-amber-500/50",bgIcon:"bg-amber-500/10 text-amber-400"},{id:4,label:" ",value:"+30",icon:qr,gradient:"from-purple-400 via-fuchsia-400 to-pink-400",shadow:"hover:shadow-purple-500/20",border:"group-hover:border-purple-500/50",bgIcon:"bg-purple-500/10 text-purple-400"}];return r.jsxs("section",{className:"py-20 bg-gray-950 relative overflow-hidden border-t border-white/5",children:[r.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-[20%] left-[20%] w-72 h-72 bg-emerald-500/10 rounded-full blur-[100px] animate-pulse"}),r.jsx("div",{className:"absolute bottom-[20%] right-[20%] w-72 h-72 bg-blue-500/10 rounded-full blur-[100px] animate-pulse delay-1000"})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center mb-16 text-center",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full animate-ping duration-[3s]"}),r.jsx("div",{className:"relative p-4 bg-gray-900 rounded-full border border-emerald-500/30 shadow-[0_0_30px_rgba(16,185,129,0.3)]",children:r.jsx(UT,{className:"w-10 h-10 text-emerald-400 animate-pulse"})})]}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white tracking-tight mb-6",children:[" ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:a.map((e,t)=>r.jsx("div",{className:"group relative",style:{animationDelay:`${t*100}ms`},children:r.jsxs("div",{className:`
                  relative h-full bg-gray-900/40 backdrop-blur-xl rounded-[2rem] p-6 
                  border border-white/5 ${e.border} transition-all duration-500 
                  hover:-translate-y-2 hover:shadow-2xl ${e.shadow}
                  flex flex-col items-center justify-center text-center overflow-hidden
              `,children:[r.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-500 bg-gradient-to-br ${e.gradient}`}),r.jsx("div",{className:`mb-4 p-4 rounded-2xl ${e.bgIcon} border border-white/5 group-hover:scale-110 transition-transform duration-300 relative z-10 shadow-lg`,children:r.jsx(e.icon,{className:"w-8 h-8",strokeWidth:1.5})}),r.jsx("div",{className:`text-3xl md:text-5xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-br ${e.gradient} tracking-tight drop-shadow-sm relative z-10`,children:e.value}),r.jsx("div",{className:"text-gray-400 text-xs md:text-sm font-bold relative z-10 group-hover:text-white transition-colors",children:e.label}),r.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-white/5 rounded-full blur-2xl group-hover:bg-white/10 transition-colors"})]})},e.id))})]})]})},XD=({onBack:a})=>{const[e,t]=k.useState([]),[s,l]=k.useState(!0),[c,d]=k.useState(null),[f,g]=k.useState(""),[x,w]=k.useState(null),[b,N]=k.useState(null),[M,z]=k.useState(!1),[B,q]=k.useState(null),[re,ue]=k.useState(!1),U=k.useRef(!0);k.useEffect(()=>(U.current=!0,fe(),()=>{U.current=!1}),[]);const fe=async()=>{l(!0),d(null);const P="etqan_question_bank_v1";try{const W=localStorage.getItem(P);if(W){const ge=JSON.parse(W);if(ge&&Array.isArray(ge)){U.current&&(t(ge),l(!1));return}}}catch(W){console.error("Cache parsing error",W)}const ne=setTimeout(()=>{U.current&&s&&(l(!1),d("   .      ."))},15e3);try{const W=kn(Ot(Qe,"quizzes"),Fd("createdAt","desc"),Di(50)),A=(await Jn(W)).docs.map(Y=>({id:Y.id,...Y.data()}));U.current&&(t(A),localStorage.setItem(P,JSON.stringify(A)),d(null))}catch(W){console.error("Error fetching quizzes:",W),U.current&&d("    . "+W.message)}finally{clearTimeout(ne),U.current&&l(!1)}},ae=P=>{N({category:"Language",...P})},pe=P=>{localStorage.setItem("etqan_question_bank_v1",JSON.stringify(P))},S=(P,ne)=>{P.stopPropagation(),ne.id&&q({id:ne.id,title:ne.title})},E=async()=>{if(B){ue(!0);try{await Hd(qn(Qe,"quizzes",B.id));const P=e.filter(ne=>ne.id!==B.id);t(P),pe(P),q(null)}catch(P){console.error("Error deleting quiz:",P),alert("   : "+P.message)}finally{ue(!1)}}},I=(P,ne)=>{b&&N({...b,[P]:ne})},D=(P,ne,W)=>{if(!b)return;const ge=[...b.questions];ge[P]={...ge[P],[ne]:W},N({...b,questions:ge})},R=(P,ne,W)=>{if(!b)return;const ge=[...b.questions],A=[...ge[P].options];A[ne]=W,ge[P]={...ge[P],options:A},N({...b,questions:ge})},O=P=>{if(b&&window.confirm("      ")){const ne=b.questions.filter((W,ge)=>ge!==P);N({...b,questions:ne})}},C=async()=>{if(!(!b||!b.id)){if(b.questions.length===0){alert("     !");return}z(!0);try{const P=qn(Qe,"quizzes",b.id);await bc(P,{title:b.title,subject:b.subject,grade:b.grade,category:b.category,questions:b.questions});const ne=e.map(W=>W.id===b.id?b:W);t(ne),pe(ne),N(null),alert("   ")}catch(P){console.error("Error updating quiz:",P),alert("   ")}finally{z(!1)}}},ce=e.filter(P=>{const ne=(P.title?P.title.toLowerCase().includes(f.toLowerCase()):!1)||P.teacherName&&P.teacherName.toLowerCase().includes(f.toLowerCase()),W=P.grade==="English Major - QOU"||P.grade&&P.grade.includes("University");let ge=!1;return x==="university"?ge=W:ge=!W,ne&&ge}),je=P=>{if(!P)return"";try{return(P.toDate?P.toDate():new Date(P.seconds*1e3)).toLocaleDateString("ar-EG")}catch{return""}},H="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return x?r.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[r.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-6",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg group backdrop-blur-sm",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsx("div",{className:"flex-1 w-full",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5 flex items-center gap-2",children:[" ",r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-lg border ${x==="school"?"bg-emerald-900/30 text-emerald-400 border-emerald-500/30":"bg-blue-900/30 text-blue-400 border-blue-500/30"}`,children:x==="school"?"":""})]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Br,{className:"w-3 h-3"})," "]})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[r.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[r.jsx(fs,{className:"w-5 h-5 text-gray-300 mr-2"}),r.jsx("input",{type:"text",placeholder:"  ...",value:f,onChange:P=>g(P.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]}),r.jsxs("button",{onClick:()=>{w(null),g("")},className:"bg-gray-800 text-gray-300 px-3 py-2 rounded-xl text-xs font-bold flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors border border-gray-700",children:[r.jsx(fr,{className:"w-3 h-3"})," "]})]})]})})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 relative z-20",children:s?r.jsxs("div",{className:"flex flex-col justify-center items-center py-20 gap-4",children:[r.jsx(vt,{className:"w-10 h-10 animate-spin text-blue-400"}),r.jsx("p",{className:"text-gray-400 font-bold text-sm",children:"  ..."})]}):c?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-900 rounded-3xl border border-red-500/20 p-8 text-center",children:[r.jsx(nd,{className:"w-12 h-12 text-red-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),r.jsx("p",{className:"text-gray-400 mb-6",children:c}),r.jsxs("button",{onClick:fe,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition-colors",children:[r.jsx(fr,{className:"w-4 h-4"})," "]})]}):ce.length===0?r.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Br,{className:"w-8 h-8 text-gray-500"})}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),r.jsx("p",{className:"text-gray-400 mt-1",children:f?"       .":`      ${x==="school"?"":""} .`}),r.jsx("button",{onClick:fe,className:"mt-4 text-xs text-blue-400 underline hover:text-blue-300",children:" "})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ce.map(P=>r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[r.jsxs("div",{className:"p-6 flex-1",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${x==="school"?"bg-emerald-900/30 text-emerald-300":"bg-blue-900/30 text-blue-300"}`,children:P.subject}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ae(P),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:r.jsx(Sp,{className:"w-4 h-4"})}),r.jsx("button",{onClick:ne=>S(ne,P),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:r.jsx(Fr,{className:"w-4 h-4"})})]})]}),r.jsxs("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors flex items-center gap-2",children:[P.title,P.isPremium&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 p-1 rounded-full",title:" ",children:r.jsx(wn,{className:"w-4 h-4 text-amber-500 fill-amber-500"})})]}),P.category&&r.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:P.category}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[r.jsx("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:P.grade==="English Major - QOU"?"":` ${P.grade}`}),r.jsx("span",{className:"text-gray-600",children:"|"}),r.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[r.jsx(td,{className:"w-3 h-3"}),je(P.createdAt)]})]})]}),r.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:r.jsx(Is,{className:"w-4 h-4"})}),r.jsx("p",{className:"text-sm font-bold text-gray-300",children:P.teacherName||""})]}),r.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[r.jsx(dr,{className:"w-3 h-3"}),P.questions.length," "]})]})]},P.id))})}),b&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[r.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:r.jsx(Sp,{className:"w-6 h-6 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white",children:" "}),r.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),r.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:r.jsx(ms,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[r.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[r.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Br,{className:"w-5 h-5 text-blue-400"})," "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),r.jsx("input",{type:"text",value:b.title,onChange:P=>I("title",P.target.value),className:H})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),r.jsx("input",{type:"text",value:b.subject,onChange:P=>I("subject",P.target.value),className:H})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:x==="university"?"":""}),x==="school"?r.jsx("select",{value:b.grade,onChange:P=>I("grade",P.target.value),className:H,children:[5,6,7,8,9,10,11,12].map(P=>r.jsxs("option",{value:P,children:[" ",P]},P))}):r.jsx("input",{type:"text",value:b.grade,onChange:P=>I("grade",P.target.value),className:H,disabled:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),r.jsxs("select",{value:b.category||"Language",onChange:P=>I("category",P.target.value),className:H,children:[r.jsx("option",{value:"Language",children:"Language ()"}),r.jsx("option",{value:"Reading",children:"Reading ()"}),r.jsx("option",{value:"Writing",children:"Writing ()"}),r.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5 text-blue-400"})," (",b.questions.length,")"]}),r.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),b.questions.map((P,ne)=>r.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[r.jsx("button",{onClick:()=>O(ne),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:r.jsx(Fr,{className:"w-5 h-5"})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",ne+1]}),r.jsx("input",{type:"text",dir:"ltr",value:P.question,onChange:W=>D(ne,"question",W.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:P.options.map((W,ge)=>r.jsxs("div",{className:"relative",children:[r.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[r.jsxs("span",{children:[" ",ge+1]}),r.jsxs("button",{onClick:()=>D(ne,"correctAnswer",ge),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${P.correctAnswer===ge?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[P.correctAnswer===ge?r.jsx(Qn,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),P.correctAnswer===ge?" ":" "]})]}),r.jsx("input",{type:"text",dir:"ltr",value:W,onChange:A=>R(ne,ge,A.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${P.correctAnswer===ge?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},ge))}),r.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[r.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),r.jsx("textarea",{value:P.explanation||"",onChange:W=>D(ne,"explanation",W.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},ne))]})]}),r.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[r.jsx("button",{onClick:()=>N(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),r.jsxs("button",{onClick:C,disabled:M,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[M?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(Cl,{className:"w-5 h-5"})," "]})]})]})}),B&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:r.jsx(Fr,{className:"w-10 h-10 text-red-500"})}),r.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),r.jsxs("p",{className:"text-gray-400 mb-6 text-sm leading-relaxed",children:["      ",r.jsx("br",{}),r.jsxs("span",{className:"text-white font-bold",children:['"',B.title,'"']}),"",r.jsx("br",{}),"     ."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:E,disabled:re,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-900/20",children:re?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):" "}),r.jsx("button",{onClick:()=>q(null),disabled:re,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors border border-gray-700",children:""})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-4xl w-full px-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg group backdrop-blur-sm",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsx("span",{className:"text-gray-400 text-sm font-bold",children:""})]}),r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400",children:"     "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>w("school"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:""}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (5 - 12)"})]})]}),r.jsxs("button",{onClick:()=>w("university"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:""}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  "})]})]})]})]})})},JD=[{id:"grammar",title:" (Grammar)",icon:Br,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Nn,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:_d,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:ym,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],WD=[{id:"English",title:" ",icon:_d,color:"text-purple-400",bg:"bg-purple-900/20"}],ZD=({onBack:a,onNavigate:e})=>{const{user:t}=Ds(),[s,l]=k.useState("INTRO"),[c,d]=k.useState(null),[f,g]=k.useState(""),[x,w]=k.useState(""),[b,N]=k.useState(null),[M,z]=k.useState("First"),[B,q]=k.useState([]),[re,ue]=k.useState(!1),[U,fe]=k.useState(null),[ae,pe]=k.useState(0),[S,E]=k.useState(""),[I,D]=k.useState(!1),[R,O]=k.useState(!1),[C,ce]=k.useState(!1),[,je]=k.useState(0);k.useEffect(()=>{const te=setInterval(()=>je(Pe=>Pe+1),5e3);return()=>clearInterval(te)},[]),k.useEffect(()=>{window.history.replaceState({view:"LESSONS_EXPLANATIONS",subView:"INTRO"},"","");const te=Pe=>{Pe.state&&Pe.state.subView?l(Pe.state.subView):s==="INTRO"?a&&a():l("INTRO")};return window.addEventListener("popstate",te),()=>window.removeEventListener("popstate",te)},[]);const H=te=>{window.history.pushState({view:"LESSONS_EXPLANATIONS",subView:te},"",""),l(te)},P=()=>{window.history.back()},ne=()=>{if(!(t!=null&&t.isSubscriber)||!t.subscriptionExpiry)return!1;const te=t.subscriptionExpiry.seconds?t.subscriptionExpiry.seconds*1e3:new Date(t.subscriptionExpiry).getTime();return Date.now()<te};k.useEffect(()=>{if(s==="DETAILS"){const te=Pe=>(Pe.preventDefault(),!1);return document.addEventListener("contextmenu",te),document.addEventListener("selectstart",te),document.addEventListener("copy",te),document.addEventListener("cut",te),()=>{document.removeEventListener("contextmenu",te),document.removeEventListener("selectstart",te),document.removeEventListener("copy",te),document.removeEventListener("cut",te)}}},[s]),k.useEffect(()=>{window.scrollTo(0,0)},[s]);const W=()=>H("LEVELS"),ge=te=>{d(te),H("SUBJECTS")},A=te=>{g(te),H("GRADES")},Y=te=>{w(te),H("CATEGORIES")},xe=te=>{N(te),H("TOPICS")},be=te=>{if(te.isPremium&&!ne()){ce(!0);return}fe(te),pe(0),E(""),O(!1),H("DETAILS")};k.useEffect(()=>{s==="TOPICS"&&x&&b&&f&&ie()},[s,x,b,f,M,t==null?void 0:t.isSubscriber]);const ie=async()=>{ue(!0);try{const te=kn(Ot(Qe,"explanations"),Rn("subject","==",f),Rn("grade","==",x),Rn("category","==",b==null?void 0:b.id)),Pe=await _5(te),Te=[];Pe.forEach(Ye=>{Te.push({id:Ye.id,...Ye.data()})});const Ut=Te.filter(Ye=>(Ye.semester||"First")===M);Ut.sort((Ye,Le)=>{var Pt,wt;const ke=((Pt=Ye.createdAt)==null?void 0:Pt.seconds)||0;return(((wt=Le.createdAt)==null?void 0:wt.seconds)||0)-ke}),q(Ut)}catch(te){console.error("Error fetching explanations:",te)}finally{ue(!1)}},Ee=async()=>{if(ae!==0&&!(!U||!t)){D(!0);try{await Sa(Ot(Qe,"reviews"),{type:"explanation",targetId:U.id,targetTitle:U.title,teacherId:U.teacherName||"",teacherName:U.teacherName||"",rating:ae,comment:S,studentId:t.uid,studentName:t.displayName,createdAt:Zs()}),O(!0)}catch(te){console.error("Error saving review:",te),alert("    ")}finally{D(!1)}}},Oe=te=>te?(te.toDate?te.toDate():new Date(te.seconds*1e3)).toLocaleDateString("ar-EG"):"",ct=()=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:r.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),r.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[r.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),r.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),r.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),r.jsxs("button",{onClick:W,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",r.jsx(pt,{className:"w-6 h-6"})]})]}),r.jsx("div",{className:"p-6 text-center relative z-10",children:r.jsxs("button",{onClick:a,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[r.jsx(Gt,{className:"w-4 h-4"})," "]})})]}),tt=()=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Nn,{className:"w-3 h-3"}),""]})]})]})]})}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>ge("school"),className:"bg-gray-900 p-8 rounded-3xl border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-xl flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),r.jsxs("button",{onClick:()=>ge("university"),className:"bg-gray-900 p-8 rounded-3xl border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-xl flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-white",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (  )"})]})]})})]}),on=()=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Nn,{className:"w-3 h-3"}),""]})]})]})]})}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:WD.map(te=>r.jsxs("button",{onClick:()=>A(te.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[r.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${te.bg} ${te.color} group-hover:scale-110 transition-transform`,children:r.jsx(te.icon,{className:"w-10 h-10"})}),r.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:te.title})]},te.id))})})]}),Kt=()=>{const te={5:"border-emerald-500/30 hover:border-emerald-500 hover:shadow-emerald-900/20 group-hover:text-emerald-400",6:"border-cyan-500/30 hover:border-cyan-500 hover:shadow-cyan-900/20 group-hover:text-cyan-400",7:"border-sky-500/30 hover:border-sky-500 hover:shadow-sky-900/20 group-hover:text-sky-400",8:"border-blue-500/30 hover:border-blue-500 hover:shadow-blue-900/20 group-hover:text-blue-400",9:"border-indigo-500/30 hover:border-indigo-500 hover:shadow-indigo-900/20 group-hover:text-indigo-400",10:"border-violet-500/30 hover:border-violet-500 hover:shadow-violet-900/20 group-hover:text-violet-400",11:"border-purple-500/30 hover:border-purple-500 hover:shadow-purple-900/20 group-hover:text-purple-400",12:"border-pink-500/30 hover:border-pink-500 hover:shadow-pink-900/20 group-hover:text-pink-400"},Pe={5:"bg-emerald-900/20 text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white",6:"bg-cyan-900/20 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white",7:"bg-sky-900/20 text-sky-400 group-hover:bg-sky-500 group-hover:text-white",8:"bg-blue-900/20 text-blue-400 group-hover:bg-blue-500 group-hover:text-white",9:"bg-indigo-900/20 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white",10:"bg-violet-900/20 text-violet-400 group-hover:bg-violet-500 group-hover:text-white",11:"bg-purple-900/20 text-purple-400 group-hover:bg-purple-500 group-hover:text-white",12:"bg-pink-900/20 text-pink-400 group-hover:bg-pink-500 group-hover:text-white"};return r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:c==="university"?" ":" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(xr,{className:"w-3 h-3"}),""]})]})]})]})}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:c==="school"?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[5,6,7,8,9,10,11,12].map(Te=>{const Ut=Te.toString(),Ye=te[Ut],Le=Pe[Ut];return r.jsxs("button",{onClick:()=>Y(Te.toString()),className:`bg-gray-900 p-5 rounded-2xl shadow-sm border transition-all group flex flex-col items-center gap-3 hover:-translate-y-1 hover:shadow-lg ${Ye}`,children:[r.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-colors ${Le}`,children:r.jsx("span",{className:"font-black text-xl",children:Te})}),r.jsxs("span",{className:"font-black text-gray-300 transition-colors text-base group-hover:text-white",children:[" ",Te]})]},Te)})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.jsxs("button",{onClick:()=>Y("English Major - QOU"),className:"bg-gray-900 p-8 rounded-2xl shadow-sm border border-blue-500/30 hover:border-blue-500 transition-all group flex flex-col items-center gap-4 hover:-translate-y-1 hover:shadow-xl hover:shadow-blue-900/20",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-900/20 flex items-center justify-center transition-colors group-hover:bg-blue-600 group-hover:text-white text-blue-400",children:r.jsx(Bn,{className:"w-10 h-10"})}),r.jsx("span",{className:"font-black text-gray-200 transition-colors text-lg group-hover:text-white",children:"   -   "})]})})})]})},cn=()=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:"  "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Br,{className:"w-3 h-3"}),c==="university"?"":""]})]})]})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"bg-gray-900 p-2 rounded-2xl mb-8 flex border border-gray-700 max-w-sm mx-auto",children:[r.jsxs("button",{onClick:()=>z("First"),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm flex items-center justify-center gap-2 ${M==="First"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx(Xo,{className:"w-4 h-4"}),"  "]}),r.jsxs("button",{onClick:()=>z("Second"),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm flex items-center justify-center gap-2 ${M==="Second"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[r.jsx(Xo,{className:"w-4 h-4"}),"  "]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:JD.map(te=>r.jsx("button",{onClick:()=>xe(te),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:r.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[r.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${te.color} group-hover:scale-110 transition-transform`,children:r.jsx(te.icon,{className:"w-7 h-7"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-black text-white mb-1",children:te.title}),r.jsx("p",{className:"text-gray-400 text-xs font-medium",children:te.desc})]}),r.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:r.jsx(Pr,{className:"w-5 h-5 text-gray-400"})})]})},te.id))})]})]}),J=()=>r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:b==null?void 0:b.title}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Br,{className:"w-3 h-3"})," - ",M==="First"?" 1":" 2"]})]})]})]})}),r.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:re?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):B.length===0?r.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:r.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[r.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),r.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",r.jsx("span",{className:"text-emerald-600 font-bold",children:b==null?void 0:b.title}),"  ",r.jsx("span",{className:"text-emerald-600 font-bold",children:M==="First"?"":""}),"  ."]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[r.jsx(xm,{className:"w-4 h-4"}),"     "]})]})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:B.map(te=>{const Pe=ne(),Te=te.isPremium&&!Pe,Ut=Te?"border-amber-900/50":te.isPremium?"border-amber-600":"border-gray-700";return r.jsxs("button",{onClick:()=>be(te),className:`bg-gray-900 p-5 rounded-2xl shadow-sm border ${Ut} hover:shadow-md transition-all group text-right flex items-center justify-between relative overflow-hidden`,children:[te.isPremium&&r.jsxs("div",{className:"absolute top-0 left-0 bg-amber-500/20 border-b border-r border-amber-500/30 text-amber-400 text-[9px] font-bold px-2 py-0.5 rounded-br-lg z-10 flex items-center gap-1",children:[r.jsx(wn,{className:"w-3 h-3 fill-amber-400"}),"PREMIUM"]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-xl transition-colors ${Te?"bg-gray-800":"bg-gray-700 group-hover:bg-emerald-900/20"}`,children:Te?r.jsx(Il,{className:"w-6 h-6 text-gray-500"}):r.jsx(Cn,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-lg font-bold mb-1 transition-colors ${Te?"text-gray-500":"text-white group-hover:text-emerald-400"}`,children:te.title}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(td,{className:"w-3 h-3"}),Oe(te.createdAt)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Is,{className:"w-3 h-3"}),te.teacherName]})]})]})]}),r.jsx("div",{className:`transition-transform duration-300 ${Te?"":"group-hover:-translate-x-1"}`,children:Te?r.jsx(Il,{className:"w-5 h-5 text-gray-600"}):r.jsx(Pr,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})})]},te.id)})})})]}),we=()=>U?r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:P,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5 truncate max-w-md",children:U.title}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:P,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Br,{className:"w-3 h-3"})," ",b==null?void 0:b.title]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(Cn,{className:"w-3 h-3"}),""]})]})]}),U.isPremium&&r.jsxs("div",{className:"mr-auto hidden sm:flex items-center gap-1.5 bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-amber-500/30 px-3 py-1 rounded-lg text-amber-400 text-xs font-black shadow-[0_0_10px_rgba(245,158,11,0.1)]",children:[r.jsx(wn,{className:"w-3.5 h-3.5 fill-amber-400 animate-pulse"}),r.jsx("span",{children:"  (Premium)"})]})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:`bg-gray-900 rounded-3xl shadow-2xl overflow-hidden mb-8 relative transition-all ${U.isPremium?"border-2 border-amber-500/20 shadow-amber-900/10":"border border-gray-700"}`,children:[U.isPremium&&r.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-amber-600 via-yellow-400 to-amber-600 shadow-[0_0_15px_rgba(245,158,11,0.5)]"}),r.jsxs("div",{className:"p-6 md:p-10 pt-10 select-none",onCopy:te=>te.preventDefault(),children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-8 text-sm text-gray-400 border-b border-gray-800 pb-6",children:[r.jsx("span",{className:"bg-gray-800 px-3 py-1.5 rounded-lg font-bold border border-gray-700 text-gray-300",children:x==="English Major - QOU"?"":` ${x}`}),r.jsx(Pr,{className:"w-4 h-4 opacity-50"}),r.jsx("span",{className:"bg-gray-800 px-3 py-1.5 rounded-lg font-bold border border-gray-700 text-gray-300",children:b==null?void 0:b.title})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white mb-8 leading-relaxed tracking-tight drop-shadow-sm",dir:"auto",children:U.title}),r.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg font-medium selection:bg-emerald-500/30",dir:"auto",dangerouslySetInnerHTML:{__html:U.content}})]}),r.jsxs("div",{className:"bg-gray-950/30 p-6 border-t border-gray-800 flex flex-wrap justify-between items-center text-sm text-gray-400 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-gray-900/50 px-4 py-2 rounded-full border border-gray-800 shadow-sm",children:[r.jsx("div",{className:"p-1.5 bg-gray-800 rounded-full",children:r.jsx(Is,{className:"w-4 h-4 text-emerald-400"})}),r.jsxs("span",{children:[": ",r.jsx("span",{className:"font-bold text-white",children:U.teacherName})]})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-80",children:[r.jsx(td,{className:"w-4 h-4"}),r.jsx("span",{className:"font-mono dir-ltr",children:Oe(U.createdAt)})]})]})]}),t&&r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 p-8 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500/20 via-blue-500/50 to-blue-500/20"}),R?r.jsxs("div",{className:"py-12 animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/20 shadow-lg shadow-green-900/20",children:r.jsx(Al,{className:"w-10 h-10 text-green-400"})}),r.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:" !"}),r.jsx("p",{className:"text-gray-400 font-medium",children:"     ."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 bg-blue-500/10 rounded-2xl border border-blue-500/20",children:r.jsx(rd,{className:"w-6 h-6 text-blue-400"})}),r.jsx("h3",{className:"font-bold text-xl text-white",children:"    "})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-6 font-medium",children:"     ()"}),r.jsx("div",{className:"flex justify-center gap-2 mb-6 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(te=>r.jsx("button",{onClick:()=>pe(te),className:`w-10 h-10 rounded-xl text-sm font-bold transition-all shadow-sm ${ae===te?"bg-blue-600 text-white scale-110 shadow-blue-900/50 shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700 border border-gray-700"}`,children:te},te))}),r.jsx("div",{className:"relative mb-6",children:r.jsx("textarea",{value:S,onChange:te=>E(te.target.value),placeholder:"  ...",className:"w-full bg-gray-950 border border-gray-700 rounded-2xl p-4 text-sm text-white outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 min-h-[100px] resize-none transition-all placeholder-gray-600"})}),r.jsxs("button",{onClick:Ee,disabled:I||ae===0,className:`w-full py-4 rounded-2xl font-bold text-base flex items-center justify-center gap-3 transition-all shadow-lg ${ae===0?"bg-gray-800 text-gray-500 cursor-not-allowed shadow-none":"bg-blue-600 text-white hover:bg-blue-500 hover:shadow-blue-500/20 hover:-translate-y-1"}`,children:[I?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(_l,{className:"w-5 h-5"})," "]})]})]})]})]}):null;return r.jsxs(r.Fragment,{children:[s==="INTRO"&&ct(),s==="LEVELS"&&tt(),s==="SUBJECTS"&&on(),s==="GRADES"&&Kt(),s==="CATEGORIES"&&cn(),s==="TOPICS"&&J(),s==="DETAILS"&&we(),C&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>ce(!1)}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-amber-500/30 shadow-2xl shadow-amber-900/20 animate-fade-in-up",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 bg-amber-500/20",children:r.jsx(wn,{className:"w-10 h-10 text-amber-500 fill-amber-500"})}),r.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:"        (Premium).    ."}),r.jsxs("button",{onClick:()=>{ce(!1),e("SERVICES")},className:"w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 border border-amber-500 flex items-center justify-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5 fill-white"})," "]})]})]})]})},V_=[{id:"grammar",title:" (Grammar)",icon:Br},{id:"reading",title:" (Reading)",icon:Nn},{id:"vocabulary",title:" (Vocabulary)",icon:_d},{id:"writing",title:" (Writing)",icon:ym}],eM=[{id:"English",title:"  (English)",icon:_d}],tM=({value:a,onChange:e})=>{const t=k.useRef(null),[s,l]=k.useState("#000000");k.useEffect(()=>{t.current&&a!==t.current.innerHTML&&a===""&&(t.current.innerHTML="")},[a]);const c=(f,g="")=>{var x;document.execCommand(f,!1,g),t.current&&e(t.current.innerHTML),(x=t.current)==null||x.focus()},d=()=>{t.current&&e(t.current.innerHTML)};return r.jsxs("div",{className:"border-2 border-gray-700 rounded-xl overflow-hidden bg-gray-800 flex flex-col h-96",children:[r.jsxs("div",{className:"bg-gray-900 border-b border-gray-700 p-2 flex flex-wrap items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>c("bold"),className:"p-2 hover:bg-gray-700 rounded text-gray-300 hover:text-white",title:"",children:r.jsx(q_,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>c("underline"),className:"p-2 hover:bg-gray-700 rounded text-gray-300 hover:text-white",title:"",children:r.jsx(eN,{className:"w-4 h-4"})}),r.jsx("div",{className:"w-px h-6 bg-gray-700 mx-1"}),r.jsxs("select",{onChange:f=>c("fontSize",f.target.value),className:"bg-gray-800 text-white text-xs p-1.5 rounded border border-gray-600 outline-none",defaultValue:"3",title:" ",children:[r.jsx("option",{value:"1",children:" "}),r.jsx("option",{value:"2",children:""}),r.jsx("option",{value:"3",children:""}),r.jsx("option",{value:"4",children:""}),r.jsx("option",{value:"5",children:""}),r.jsx("option",{value:"6",children:" "}),r.jsx("option",{value:"7",children:""})]}),r.jsxs("div",{className:"flex items-center gap-1 bg-gray-800 rounded border border-gray-600 px-1",children:[r.jsx(X_,{className:"w-4 h-4 text-gray-400"}),r.jsx("input",{type:"color",value:s,onChange:f=>{l(f.target.value),c("foreColor",f.target.value)},className:"w-6 h-6 bg-transparent border-none outline-none cursor-pointer",title:" "})]}),r.jsx("div",{className:"w-px h-6 bg-gray-700 mx-1"}),r.jsx("button",{type:"button",onClick:()=>c("justifyLeft"),className:"p-2 hover:bg-gray-700 rounded text-gray-300 hover:text-white",title:"  (English)",children:r.jsx(W_,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>c("justifyCenter"),className:"p-2 hover:bg-gray-700 rounded text-gray-300 hover:text-white",title:"",children:r.jsx(nA,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>c("justifyRight"),className:"p-2 hover:bg-gray-700 rounded text-gray-300 hover:text-white",title:"  ()",children:r.jsx(rA,{className:"w-4 h-4"})})]}),r.jsx("div",{ref:t,contentEditable:!0,onInput:d,className:"flex-1 p-4 outline-none text-white overflow-y-auto text-right",style:{direction:"rtl",minHeight:"200px"},dir:"auto"})]})},nM=({onBack:a,onNavigate:e})=>{const{user:t}=Ds(),[s,l]=k.useState(null),[c,d]=k.useState(""),[f,g]=k.useState(""),[x,w]=k.useState("First"),[b,N]=k.useState(""),[M,z]=k.useState(""),[B,q]=k.useState(""),[re,ue]=k.useState(!1),[U,fe]=k.useState(!1),[ae,pe]=k.useState(!1),[S,E]=k.useState(""),[I,D]=k.useState([]),[R,O]=k.useState(!1),[C,ce]=k.useState(!1),[je,H]=k.useState(null),[P,ne]=k.useState(!1),W=async()=>{if(!c||!f||!b||!M||!B){alert("    ");return}fe(!0);try{await Sa(Ot(Qe,"explanations"),{subject:c,grade:f,semester:x,category:b,title:M,content:B,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,isPremium:re,createdAt:Zs()}),pe(!0),setTimeout(()=>{pe(!1),z(""),q(""),ue(!1)},2e3)}catch(ie){console.error("Error saving explanation:",ie),alert("   ")}finally{fe(!1)}},ge=async()=>{if(S.trim()&&t!=null&&t.uid){O(!0),ce(!0),D([]);try{const ie=kn(Ot(Qe,"explanations"),Rn("title",">=",S),Rn("title","<=",S+"")),Ee=await Jn(ie),Oe=[];Ee.forEach(ct=>{const tt=ct.data();tt.teacherId===t.uid&&Oe.push({id:ct.id,...tt})}),D(Oe)}catch(ie){console.error("Error searching explanations:",ie)}finally{O(!1)}}},A=async()=>{if(je){ne(!0);try{await Hd(qn(Qe,"explanations",je)),D(ie=>ie.filter(Ee=>Ee.id!==je)),H(null)}catch(ie){console.error(ie),alert("   ")}finally{ne(!1)}}},Y=()=>{a?a():e("HOME")},xe=ie=>ie?(ie.toDate?ie.toDate():new Date(ie.seconds*1e3)).toLocaleDateString("ar-EG"):"",be=ie=>{const Ee=V_.find(Oe=>Oe.id===ie);return Ee?Ee.title:ie};return s?r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:Y,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:"  "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:Y,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(qr,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[r.jsx(qr,{className:"w-6 h-6 text-purple-500"}),"  "]}),r.jsxs("button",{onClick:()=>{l(null),z(""),q("")},className:"bg-gray-800 text-gray-300 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-gray-700 transition-colors",children:[r.jsx(fr,{className:"w-3 h-3"})," "]})]}),ae?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:r.jsx(Qn,{className:"w-10 h-10 text-green-400"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),r.jsx("button",{onClick:()=>pe(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),s==="university"?r.jsx("input",{type:"text",value:c,onChange:ie=>d(ie.target.value),placeholder:"  (: Writing 1)...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-purple-500 outline-none font-bold text-white"}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:eM.map(ie=>r.jsxs("button",{onClick:()=>d(ie.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${c===ie.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[r.jsx(ie.icon,{className:"w-6 h-6"}),r.jsx("span",{children:ie.title})]},ie.id))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:["2. ",s==="university"?" ":"  "]}),s==="school"?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[5,6,7,8,9,10,11,12].map(ie=>r.jsxs("button",{onClick:()=>g(ie.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${f===ie.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",ie]},ie))}):r.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.jsx("button",{onClick:()=>g("English Major - QOU"),className:`py-3 rounded-xl font-bold transition-all border-2 ${f==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"   -   "})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx(Xo,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),r.jsxs("select",{value:x,onChange:ie=>w(ie.target.value),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-purple-500 focus:ring-4 focus:ring-purple-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"First",children:"  "}),r.jsx("option",{value:"Second",children:"  "})]}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:r.jsx(wa,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:V_.map(ie=>r.jsxs("button",{onClick:()=>N(ie.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${b===ie.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[r.jsx("div",{className:`p-2 rounded-lg ${b===ie.id?"bg-purple-800":"bg-gray-700"}`,children:r.jsx(ie.icon,{className:"w-5 h-5"})}),r.jsx("span",{className:"font-bold",children:ie.title})]},ie.id))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),r.jsx("input",{type:"text",value:M,onChange:ie=>z(ie.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex justify-between",children:[r.jsx("span",{children:"  ( )"}),r.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"     "})]}),r.jsx(tM,{value:B,onChange:q})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-xl bg-amber-900/10 border border-amber-500/20 cursor-pointer hover:bg-amber-900/20 transition-colors",children:[r.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${re?"bg-amber-500":"bg-gray-600"}`,children:r.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${re?"right-1":"right-7"}`})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:re,onChange:ie=>ue(ie.target.checked)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),r.jsx("span",{className:"font-bold text-white",children:"  (Premium)"})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]})]})})]}),r.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:r.jsxs("button",{onClick:W,disabled:U,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[U?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(Cl,{className:"w-5 h-5"}),"  "]})})]})]}),r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[r.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[r.jsx(Fr,{className:"w-6 h-6 text-red-500"}),"  ()"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"    ...",value:S,onChange:ie=>E(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&ge(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),r.jsx("button",{onClick:ge,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:R?r.jsx(vt,{className:"w-4 h-4 animate-spin"}):r.jsx(fs,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),I.length>0?r.jsx("div",{className:"space-y-3 animate-fade-in",children:I.map(ie=>r.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:r.jsx(Cn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-bold text-white truncate",children:ie.title}),ie.isPremium&&r.jsx("span",{className:"text-[9px] bg-amber-900/40 text-amber-300 px-1.5 py-0.5 rounded border border-amber-800/50",children:"VIP"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[r.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:ie.subject||"English"}),r.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:be(ie.category)}),r.jsx("span",{children:ie.grade==="English Major - QOU"?"":` ${ie.grade}`}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(td,{className:"w-3 h-3"})," ",xe(ie.createdAt)]})]})]})]}),r.jsx("button",{onClick:()=>ie.id&&H(ie.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:r.jsx(Fr,{className:"w-4 h-4"})})]},ie.id))}):C&&!R&&r.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[r.jsx(qr,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{children:"      "})]})]})]}),je&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[r.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:r.jsx(wx,{className:"w-8 h-8 text-red-500"})}),r.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:A,disabled:P,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:P?r.jsx(vt,{className:"w-4 h-4 animate-spin"}):" "}),r.jsx("button",{onClick:()=>H(null),disabled:P,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-4xl w-full px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:"  "}),r.jsx("p",{className:"text-gray-400",children:"    "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>l("school"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (5 - 12)"})]})]}),r.jsxs("button",{onClick:()=>l("university"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  "})]})]})]})]})})},sM=[{id:"handouts",title:" ",icon:Cn,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:gl,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Nn,color:"text-purple-400",bg:"bg-purple-900/20"}],rM=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],aM=({onBack:a,onNavigate:e})=>{const{user:t}=Ds(),[s,l]=k.useState(null),[c,d]=k.useState(""),[f,g]=k.useState(""),[x,w]=k.useState(""),[b,N]=k.useState(""),[M,z]=k.useState(""),[B,q]=k.useState(!1),[re,ue]=k.useState(!1),[U,fe]=k.useState(""),[ae,pe]=k.useState([]),[S,E]=k.useState(!1),[I,D]=k.useState(!1),[R,O]=k.useState(null),[C,ce]=k.useState(!1),je=async()=>{if(!c||!f||!x||!b||!M){alert("    ");return}if(!M.startsWith("http")){alert("        http  https");return}q(!0);try{await Sa(Ot(Qe,"study_materials"),{grade:c,subject:f,category:x,title:b,url:M,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Zs()}),ue(!0),setTimeout(()=>{ue(!1),N(""),z("")},2e3)}catch(A){console.error("Error saving file:",A),alert("   ")}finally{q(!1)}},H=async()=>{if(U.trim()&&t!=null&&t.uid){E(!0),D(!0),pe([]);try{const A=kn(Ot(Qe,"study_materials"),Rn("title",">=",U),Rn("title","<=",U+"")),Y=await Jn(A),xe=[];Y.forEach(be=>{const ie=be.data();ie.teacherId===t.uid&&xe.push({id:be.id,...ie})}),pe(xe)}catch(A){console.error("Error searching files:",A)}finally{E(!1)}}},P=async()=>{if(R){ce(!0);try{await Hd(qn(Qe,"study_materials",R)),pe(A=>A.filter(Y=>Y.id!==R)),O(null)}catch(A){console.error(A),alert("   ")}finally{ce(!1)}}},ne=()=>{a?a():e("PROFILE")},W=A=>A?(A.toDate?A.toDate():new Date(A.seconds*1e3)).toLocaleDateString("ar-EG"):"",ge=()=>{d(""),g(""),w(""),N(""),z("")};return s?r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:ne,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:"  "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:ne,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(_p,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[r.jsx(_p,{className:"w-6 h-6 text-blue-500"}),"  "]}),r.jsxs("button",{onClick:()=>{l(null),ge()},className:"bg-gray-800 text-gray-300 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-gray-700 transition-colors",children:[r.jsx(fr,{className:"w-3 h-3"})," "]})]}),re?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:r.jsx(Qn,{className:"w-10 h-10 text-green-400"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),r.jsx("button",{onClick:()=>ue(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[r.jsx(xr,{className:"w-4 h-4 text-blue-500"}),s==="university"?"":" "]}),r.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:""}),s==="school"?[5,6,7,8,9,10,11,12].map(A=>r.jsxs("option",{value:A.toString(),children:[" ",A]},A)):r.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[r.jsx(Nn,{className:"w-4 h-4 text-blue-500"}),""]}),s==="university"?r.jsx("input",{type:"text",value:f,onChange:A=>g(A.target.value),placeholder:" ...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white"}):r.jsxs("select",{value:f,onChange:A=>g(A.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:" "}),rM.map(A=>r.jsx("option",{value:A.id,children:A.title},A.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:sM.map(A=>r.jsxs("button",{onClick:()=>w(A.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${x===A.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[r.jsx("div",{className:`p-2 rounded-lg ${A.bg}`,children:r.jsx(A.icon,{className:`w-6 h-6 ${A.color}`})}),r.jsx("span",{className:"font-bold text-sm",children:A.title})]},A.id))})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),r.jsx("input",{type:"text",value:b,onChange:A=>N(A.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[r.jsx(r3,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),r.jsx("input",{type:"url",value:M,onChange:A=>z(A.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),r.jsx("div",{className:"pt-4 flex justify-end",children:r.jsxs("button",{onClick:je,disabled:B,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[B?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(Cl,{className:"w-5 h-5"}),"  "]})})]})]}),r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[r.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[r.jsx(Fr,{className:"w-6 h-6 text-red-500"}),"  ()"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"    ...",value:U,onChange:A=>fe(A.target.value),onKeyDown:A=>A.key==="Enter"&&H(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),r.jsx("button",{onClick:H,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:S?r.jsx(vt,{className:"w-4 h-4 animate-spin"}):r.jsx(fs,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),ae.length>0?r.jsx("div",{className:"space-y-3 animate-fade-in",children:ae.map(A=>r.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:r.jsx(Cn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h4",{className:"font-bold text-white truncate mb-1",children:A.title}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[r.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:A.subject}),r.jsx("span",{children:A.grade==="English Major - QOU"?"":` ${A.grade}`}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(td,{className:"w-3 h-3"})," ",W(A.createdAt)]})]})]})]}),r.jsx("button",{onClick:()=>A.id&&O(A.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:r.jsx(Fr,{className:"w-4 h-4"})})]},A.id))}):I&&!S&&r.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[r.jsx(Cn,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{children:"      "})]})]})]}),R&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[r.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:r.jsx(wx,{className:"w-8 h-8 text-red-500"})}),r.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:P,disabled:C,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:C?r.jsx(vt,{className:"w-4 h-4 animate-spin"}):" "}),r.jsx("button",{onClick:()=>O(null),disabled:C,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-4xl w-full px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:"  "}),r.jsx("p",{className:"text-gray-400",children:"    "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("button",{onClick:()=>l("school"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-emerald-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-emerald-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-12 h-12 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  (5 - 12)"})]})]}),r.jsxs("button",{onClick:()=>l("university"),className:"bg-gray-900 p-10 rounded-[2.5rem] border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group shadow-2xl flex flex-col items-center gap-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-900/20 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-12 h-12 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"  "})]})]})]})]})})},vp=({title:a,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const b={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",M=g==="rtl"?"md:text-right":"md:text-left";return r.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:r.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[r.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[r.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${b.glow}`}),r.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${b.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[r.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[r.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${b.bgIcon} border ${b.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:r.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${b.text} drop-shadow-lg`,strokeWidth:1.5})}),r.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${b.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:r.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${b.text}`})})]})]})]}),r.jsxs("div",{className:`w-full md:w-1/2 text-center ${M} space-y-6 md:space-y-8`,children:[r.jsxs("div",{className:"space-y-3 md:space-y-4",children:[r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${b.border} ${b.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[r.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),r.jsx("span",{children:e})]}),r.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:a})]}),r.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),r.jsx("div",{className:"pt-2 md:pt-4",children:r.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${b.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,r.jsx(pt,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&r.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[r.jsx("div",{className:`w-full h-px bg-gradient-to-r ${b.divider} opacity-30`}),r.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${b.divider} blur-sm opacity-50`}),r.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},iM=({onNavigate:a})=>r.jsxs("div",{className:"bg-gray-950 relative z-10",children:[r.jsx(vp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:fx,secondaryIcon:Qn,buttonText:"  ",onClick:()=>a("QUIZZES")}),r.jsx(vp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:xm,secondaryIcon:uS,buttonText:" ",onClick:()=>a("LESSONS_EXPLANATIONS")}),r.jsx(vp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:gl,secondaryIcon:NS,buttonText:" ",onClick:()=>a("LESSONS"),isLast:!0})]}),lM=()=>r.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:r.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),r.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:r.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),r.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),r.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),r.jsx("div",{className:"relative",children:r.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),oM=({onLoginClick:a})=>r.jsxs("section",{className:"py-32 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),r.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),r.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),r.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[r.jsx(Tp,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}),r.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),r.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),r.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:r.jsxs("button",{onClick:a,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",r.jsx(pt,{className:"w-6 h-6"})]})})]})]}),cM=()=>r.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),r.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),r.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[r.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),r.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),r.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[r.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),r.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),r.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),r.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),uM=({onBack:a})=>{const e=[{icon:fx,title:" ",desc:"              ."},{icon:Y3,title:" 24/7",desc:"                 ."},{icon:jd,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Cn,title:" ",desc:"           ."}];return r.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx(Ym,{}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),r.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),r.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:a,className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(xx,{className:"w-3 h-3"}),"  "]})]})]})]})}),r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[r.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[r.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),r.jsx(vi,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),r.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),r.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),r.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[r.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:r.jsx(vx,{className:"w-8 h-8 text-blue-400"})})," "]}),r.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[r.jsx("p",{children:'  ""         .                    .'}),r.jsxs("p",{children:["       ",r.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>r.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[r.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:r.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),r.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),r.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[r.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[r.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:r.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),r.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),r.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[r.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:r.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),r.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),r.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[r.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:r.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),r.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),r.jsx("div",{className:"mt-16 text-center",children:r.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",r.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},dM=({onNavigate:a})=>r.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[r.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:r.jsx(Ym,{})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),r.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:r.jsx(vi,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),r.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),r.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),r.jsxs("button",{onClick:a,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[r.jsx("span",{children:" "}),r.jsx(pt,{className:"w-5 h-5"})]})]})]}),hM=({onBack:a,onNavigate:e})=>{const{user:t}=Ds(),[s,l]=k.useState("INBOX"),[c,d]=k.useState([]),[f,g]=k.useState(""),[x,w]=k.useState(""),[b,N]=k.useState(""),[M,z]=k.useState(!1),[B,q]=k.useState(!1),[re,ue]=k.useState(""),[U,fe]=k.useState([]),[ae,pe]=k.useState(!1);k.useEffect(()=>{s==="COMPOSE"?S():E()},[s,t]);const S=async()=>{q(!0);try{const ce=kn(Ot(Qe,"users"),Rn("role","==","student")),H=(await Jn(ce)).docs.map(P=>({id:P.id,...P.data()}));d(H)}catch(ce){console.error("Error fetching students",ce)}finally{q(!1)}},E=async(ce=!1)=>{if(!t)return;const je=`etqan_inbox_${t.uid}`,H=365*24*60*60*1e3,P=Date.now();if(!ce){const ne=localStorage.getItem(je);if(ne)try{const{data:W,timestamp:ge}=JSON.parse(ne);if(P-ge<H){fe(W);return}}catch(W){console.error(W)}}pe(!0);try{const ne=kn(Ot(Qe,"contact_messages"),Rn("teacherId","==",t.uid)),ge=(await Jn(ne)).docs.map(A=>({id:A.id,...A.data(),createdAt:A.data().createdAt?{seconds:A.data().createdAt.seconds}:null}));ge.sort((A,Y)=>{var ie,Ee;const xe=((ie=A.createdAt)==null?void 0:ie.seconds)||0;return(((Ee=Y.createdAt)==null?void 0:Ee.seconds)||0)-xe}),fe(ge),localStorage.setItem(je,JSON.stringify({timestamp:P,data:ge}))}catch(ne){console.error("Error fetching inbox",ne)}finally{pe(!1)}},I=async()=>{if(!x||!b){alert("    ");return}if(!f){alert("  ");return}z(!0);try{await Sa(Ot(Qe,"notifications"),{recipientId:f,title:x,message:b,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:Zs(),read:!1}),alert("   !"),w(""),N(""),g(""),ue("")}catch(ce){console.error("Error sending message",ce),alert("   ")}finally{z(!1)}},D=async ce=>{if(window.confirm("      "))try{await Hd(qn(Qe,"contact_messages",ce));const je=U.filter(ne=>ne.id!==ce);fe(je);const H=`etqan_inbox_${t==null?void 0:t.uid}`,P=localStorage.getItem(H);if(P){const ne=JSON.parse(P);ne.data=je,localStorage.setItem(H,JSON.stringify(ne))}}catch(je){console.error(je)}},R=async ce=>{try{await bc(qn(Qe,"contact_messages",ce),{read:!0});const je=U.map(ne=>ne.id===ce?{...ne,read:!0}:ne);fe(je);const H=`etqan_inbox_${t==null?void 0:t.uid}`,P=localStorage.getItem(H);if(P){const ne=JSON.parse(P);ne.data=je,localStorage.setItem(H,JSON.stringify(ne))}}catch(je){console.error(je)}},O=c.filter(ce=>{const je=ce.displayName?ce.displayName.toLowerCase():"",H=ce.email?ce.email.toLowerCase():"",P=re.toLowerCase();return je.includes(P)||H.includes(P)}),C=ce=>ce?(ce.toDate?ce.toDate():new Date(ce.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:""}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:()=>e("PROFILE"),className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(fi,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[r.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[r.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[r.jsx(fi,{className:"w-5 h-5"})," ",U.some(ce=>!ce.read)&&r.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[r.jsx(_l,{className:"w-5 h-5"})," "]})]}),r.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[r.jsx(_l,{className:"w-6 h-6 text-emerald-400"}),"  "]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex gap-4",children:r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[r.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),r.jsx("span",{className:"font-bold text-sm text-white",children:" "}),r.jsx(Si,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx(fs,{className:"h-4 w-4 text-gray-500"})}),r.jsx("input",{type:"text",placeholder:"    ...",value:re,onChange:ce=>{ue(ce.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),re&&r.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:O.map(ce=>r.jsxs("div",{onClick:()=>{g(ce.id),ue(ce.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===ce.id?"bg-emerald-900/20":""}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:ce.avatar?r.jsx("img",{src:ce.avatar,className:"w-full h-full rounded-full object-cover"}):r.jsx(Is,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-white",children:ce.displayName}),r.jsx("div",{className:"text-xs text-gray-400",children:ce.email})]}),f===ce.id&&r.jsx(Qn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},ce.id))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),r.jsx("input",{type:"text",value:x,onChange:ce=>w(ce.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),r.jsx("textarea",{value:b,onChange:ce=>N(ce.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),r.jsxs("button",{onClick:I,disabled:M,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[M?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(_l,{className:"w-5 h-5"})," "]})]})]}):r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[r.jsx(fi,{className:"w-6 h-6 text-emerald-400"})," "]}),r.jsx("button",{onClick:()=>E(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:r.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})]}),ae?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):U.length===0?r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(fi,{className:"w-16 h-16 mb-4 opacity-20"}),r.jsx("p",{children:"   "})]}):r.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:U.map(ce=>r.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${ce.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[r.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[r.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${ce.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:ce.studentName?ce.studentName.charAt(0).toUpperCase():r.jsx(Is,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`font-bold text-base leading-tight ${ce.read?"text-gray-300":"text-white"}`,children:ce.studentName||""}),r.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:ce.studentEmail})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[r.jsx(sd,{className:"w-3 h-3 text-gray-500"}),r.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:C(ce.createdAt)})]})]}),r.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:ce.message}),r.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!ce.read&&r.jsxs("button",{onClick:()=>R(ce.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[r.jsx(Qn,{className:"w-3.5 h-3.5"})," "]}),r.jsxs("button",{onClick:()=>D(ce.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[r.jsx(Fr,{className:"w-3.5 h-3.5"}),""]})]})]}),r.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:r.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:r.jsx(fi,{className:"w-4 h-4 text-gray-500"})})})]}),!ce.read&&r.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},ce.id))})]})})]})})]})},fM=({onBack:a,onNavigate:e})=>{const[t,s]=k.useState([]),[l,c]=k.useState(!0),[d,f]=k.useState("ALL");k.useEffect(()=>{g()},[]);const g=async()=>{c(!0);const N="etqan_teacher_reviews_v1",M=365*24*60*60*1e3,z=Date.now(),B=localStorage.getItem(N);if(B)try{const{data:q,timestamp:re}=JSON.parse(B);if(z-re<M){s(q),c(!1);return}}catch(q){console.error("Cache parsing error",q)}try{const q=kn(Ot(Qe,"reviews"),Fd("createdAt","desc"),Di(50)),ue=(await Jn(q)).docs.map(U=>({id:U.id,...U.data(),createdAt:U.data().createdAt?{seconds:U.data().createdAt.seconds}:null}));s(ue),localStorage.setItem(N,JSON.stringify({timestamp:z,data:ue}))}catch(q){console.error("Error fetching reviews:",q)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),w=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",b=t.length>0?(t.reduce((N,M)=>N+M.rating,0)/t.length).toFixed(1):"0.0";return r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[r.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:" "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{onClick:()=>e("PROFILE"),className:"hover:text-emerald-400 cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{className:"text-gray-700",children:"/"}),r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1",children:[r.jsx(rd,{className:"w-3 h-3"})," "]})]})]})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4",children:[r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:r.jsx(vi,{className:"w-8 h-8 fill-yellow-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white",children:b}),r.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[r.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),r.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),r.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[r.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),r.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),r.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),r.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(vt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(rd,{className:"w-16 h-16 mb-4 opacity-20"}),r.jsx("p",{className:"text-lg font-bold",children:"     "})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>r.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,r.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:w(N.createdAt)})]}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((M,z)=>r.jsx(vi,{className:`w-3 h-3 ${z<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},z)),r.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),r.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?r.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:r.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):r.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})},mM=({onNavigate:a})=>r.jsxs("section",{className:"py-24 relative overflow-hidden bg-gray-950 border-t border-white/5",children:[r.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-900/10 rounded-full blur-[100px]"}),r.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-[100px]"})]}),r.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl mb-8 border border-white/10 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:r.jsx(Wo,{className:"w-10 h-10 text-emerald-400"})}),r.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight tracking-tight",children:"   "}),r.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed font-medium",children:"       .         ."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8",children:[r.jsxs("div",{className:"flex items-center -space-x-4 space-x-reverse",children:[r.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-20",children:r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:"Teacher",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-10",children:r.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:"Teacher",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shadow-lg relative z-0",children:"+2"})]}),r.jsxs("button",{onClick:()=>a("CONTACT_TEACHER"),className:"group relative bg-white text-gray-900 px-8 py-4 rounded-2xl font-black text-lg hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] flex items-center gap-3 transform hover:-translate-y-1",children:["  ",r.jsx(pt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-emerald-600"})]})]})]})]}),wp=()=>r.jsxs("div",{className:"relative w-full h-16 flex items-center justify-center my-8 overflow-hidden",children:[r.jsx("div",{className:"absolute w-full h-px bg-gray-800/50"}),r.jsx("div",{className:"absolute w-3/4 h-px bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,1)]"}),r.jsx("div",{className:"relative bg-gray-950 p-2 rounded-full border border-emerald-500/30 shadow-[0_0_15px_rgba(16,185,129,0.4)]",children:r.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"})})]}),gM=()=>{const a=[{icon:m3,title:" ",desc:"     .",color:"text-blue-400",bg:"bg-blue-900/20"},{icon:fx,title:" ",desc:"     .",color:"text-purple-400",bg:"bg-purple-900/20"},{icon:jd,title:" ",desc:"    .",color:"text-yellow-400",bg:"bg-yellow-900/20"},{icon:Uf,title:" ",desc:"      .",color:"text-emerald-400",bg:"bg-emerald-900/20"}];return r.jsxs("div",{className:"py-12 px-4 relative",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),r.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[r.jsx("div",{className:"absolute right-8 md:right-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-emerald-500/10 via-emerald-500 to-emerald-500/10 rounded-full"}),r.jsx("div",{className:"space-y-12",children:a.map((e,t)=>r.jsxs("div",{className:"relative flex items-center gap-6 group",children:[r.jsx("div",{className:`relative z-10 w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 border-4 border-gray-950 shadow-xl ${e.bg} transition-transform group-hover:scale-110 duration-300`,children:r.jsx(e.icon,{className:`w-8 h-8 ${e.color}`})}),r.jsxs("div",{className:"flex-1 bg-gray-900/60 backdrop-blur-sm p-5 rounded-2xl border border-white/5 shadow-lg group-hover:border-emerald-500/30 transition-all group-hover:-translate-x-2",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),r.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]})]},t))})]})]})},pM=()=>r.jsxs("div",{className:"py-12 px-4",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-transparent"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-emerald-900/30 rounded-xl flex items-center justify-center mb-4 text-emerald-400 group-hover:scale-110 transition-transform",children:r.jsx(P3,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),r.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-l from-blue-500 to-transparent"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-xl flex items-center justify-center mb-4 text-blue-400 group-hover:scale-110 transition-transform",children:r.jsx(Zo,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),r.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-colors"})]}),r.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group text-center md:text-right flex flex-col md:flex-row items-center gap-6",children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-400 shrink-0 border border-yellow-500/20 shadow-lg shadow-yellow-900/20 animate-pulse",children:r.jsx(vx,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"          ."})]})]})]})]}),xM=()=>{const[a,e]=k.useState(null),t=[{q:"   ",a:"            ."},{q:"    ",a:'   "  "       .'},{q:"    ",a:"!        ."},{q:"  ",a:"           100%."}];return r.jsxs("div",{className:"py-12 px-4 mb-12",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),r.jsx("div",{className:"max-w-2xl mx-auto space-y-3",children:t.map((s,l)=>r.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden transition-all duration-300",children:[r.jsxs("button",{onClick:()=>e(a===l?null:l),className:"w-full p-5 flex items-center justify-between text-right bg-gray-900 hover:bg-gray-800/50 transition-colors",children:[r.jsxs("span",{className:"font-bold text-white text-sm md:text-base flex items-center gap-3",children:[r.jsx(dr,{className:"w-5 h-5 text-emerald-500"}),s.q]}),r.jsx(wa,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${a===l?"rotate-180 text-emerald-400":""}`})]}),r.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${a===l?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:r.jsx("div",{className:"p-5 pt-0 text-gray-400 text-sm leading-relaxed border-t border-gray-800/50",children:s.a})})]},l))})]})},yM=()=>r.jsxs("div",{className:"relative z-10 w-full bg-transparent",children:[r.jsx(wp,{}),r.jsx(gM,{}),r.jsx(wp,{}),r.jsx(pM,{}),r.jsx(wp,{}),r.jsx(xM,{})]}),P_=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),bM=({className:a})=>r.jsx("svg",{viewBox:"0 0 24 24",className:a,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),vM=({onNavigate:a})=>{const[e,t]=k.useState(!1),[s,l]=k.useState(!1),c=window.location.origin,d="   -   ",f=()=>{const N=`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${encodeURIComponent(d)}`;window.open(N,"_blank"),t(!1)},g=()=>{const N=`https://wa.me/?text=${encodeURIComponent(d+" "+c)}`;window.open(N,"_blank"),t(!1)},x=()=>{const N=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;window.open(N,"_blank"),t(!1)},w=()=>{navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)},b=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:d,url:c}),t(!1)}catch(N){console.log("Error sharing",N)}else w()};return r.jsxs("footer",{className:"relative bg-gray-950 border-t border-white/5 py-4 md:py-6",children:[r.jsxs("div",{className:"w-full px-6 flex flex-col md:flex-row items-center justify-between gap-4 md:gap-8",children:[r.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gray-900 rounded-xl flex items-center justify-center border border-emerald-500/30 overflow-hidden shadow-md shadow-emerald-900/20",children:r.jsx($5,{className:"w-full h-full p-1"})}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-lg font-bold text-white tracking-tight block leading-none",children:""}),r.jsx("span",{className:"text-[10px] text-gray-500",children:" "})]})]}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4 md:gap-6",children:[r.jsxs("button",{onClick:()=>a&&a("HOME"),className:"text-xs font-bold text-gray-400 hover:text-emerald-400 transition-colors flex items-center gap-1.5",children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:()=>a&&a("QUIZZES"),className:"text-xs font-bold text-gray-400 hover:text-emerald-400 transition-colors flex items-center gap-1.5",children:[r.jsx(Nn,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:()=>a&&a("LESSONS"),className:"text-xs font-bold text-gray-400 hover:text-emerald-400 transition-colors flex items-center gap-1.5",children:[r.jsx(Cn,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:()=>a&&a("LESSONS_EXPLANATIONS"),className:"text-xs font-bold text-gray-400 hover:text-emerald-400 transition-colors flex items-center gap-1.5",children:[r.jsx(qr,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:()=>a&&a("CONTACT_TEACHER"),className:"text-xs font-bold text-gray-400 hover:text-emerald-400 transition-colors flex items-center gap-1.5",children:[r.jsx(Wo,{className:"w-3 h-3"}),"  "]})]}),r.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[r.jsx("div",{className:"h-4 w-px bg-gray-800 mx-1 hidden md:block"}),r.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#1877F2] transition-colors",children:r.jsx(Jo,{className:"w-4 h-4"})}),r.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#25D366] transition-colors",children:r.jsx(P_,{className:"w-4 h-4"})}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 bg-emerald-600/10 text-emerald-500 px-3 py-1.5 rounded-lg hover:bg-emerald-600/20 transition-colors text-[10px] font-bold border border-emerald-500/20 ml-2",children:[r.jsx(_w,{className:"w-3 h-3"}),""]})]})]}),r.jsx("div",{className:"text-center mt-4 border-t border-gray-900 pt-2",children:r.jsxs("p",{className:"text-[9px] text-gray-600 font-mono dir-ltr",children:[" ",new Date().getFullYear()," Etqan. By Mr. Yazan Abu Kahil"]})}),e&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>t(!1),children:r.jsxs("div",{className:"w-full max-w-xs bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl p-4 flex flex-col gap-4 animate-fade-in-up relative",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-2",children:[r.jsxs("span",{className:"text-white font-bold text-sm flex items-center gap-2",children:[r.jsx(_w,{className:"w-4 h-4 text-emerald-500"})," "]}),r.jsx("button",{onClick:()=>t(!1),className:"text-gray-500 hover:text-white transition-colors",children:r.jsx(ms,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-1 group",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all border border-[#25D366]/20",children:r.jsx(P_,{className:"w-5 h-5 text-[#25D366] group-hover:text-white"})}),r.jsx("span",{className:"text-[9px] text-gray-400",children:""})]}),r.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-1 group",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all border border-[#0088cc]/20",children:r.jsx(bM,{className:"w-5 h-5 text-[#0088cc] group-hover:text-white"})}),r.jsx("span",{className:"text-[9px] text-gray-400",children:""})]}),r.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-1 group",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all border border-[#1877F2]/20",children:r.jsx(Jo,{className:"w-5 h-5 text-[#1877F2] group-hover:text-white"})}),r.jsx("span",{className:"text-[9px] text-gray-400",children:""})]}),r.jsxs("button",{onClick:b,className:"flex flex-col items-center gap-1 group",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-800 flex items-center justify-center group-hover:bg-gray-700 transition-all border border-gray-700",children:r.jsx(CS,{className:"w-5 h-5 text-gray-300 group-hover:text-white"})}),r.jsx("span",{className:"text-[9px] text-gray-400",children:""})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-2 flex items-center border border-gray-700",children:[r.jsx("div",{className:"flex-1 px-2 text-[10px] text-gray-400 font-mono truncate dir-ltr",children:c}),r.jsx("button",{onClick:w,className:`p-1.5 rounded-md transition-all ${s?"bg-emerald-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s?r.jsx(mx,{className:"w-3 h-3"}):r.jsx(gx,{className:"w-3 h-3"})})]})]})})]})},wM=({onBack:a})=>{const[e,t]=k.useState(null);k.useEffect(()=>{const f=localStorage.getItem("etqan_service_intent");(f==="school"||f==="university")&&(t(f),localStorage.removeItem("etqan_service_intent"))},[]);const s=f=>{let g="";f?g=`    : ${f}`:g=`    ${e==="university"?"   (30 )":"   (20 )"}  .`,window.open(`https://wa.me/972568401548?text=${encodeURIComponent(g)}`,"_blank")},l=()=>{e?t(null):a()},c=e==="university"?{title:" ",subtitle:"",price:"30",description:null,color:"blue",gradient:"from-blue-500 to-indigo-600",border:"border-blue-500/30",shadow:"shadow-blue-500/20",features:[{icon:Bn,text:"  ",sub:null},{icon:n3,text:"      ",sub:null}]}:{title:" ",subtitle:"",price:"20",description:"            .",color:"amber",gradient:"from-amber-500 to-orange-600",border:"border-amber-500/30",shadow:"shadow-amber-500/20",features:[{icon:Qn,text:"  ",sub:"    "},{icon:xm,text:"  ",sub:"   "},{icon:GS,text:"   ",sub:"  "}]},d=[{title:" ",fullTitle:"  ",desc:"       ( ).",icon:xr,gradient:"from-emerald-600 to-teal-600",shadow:"shadow-emerald-500/20",border:"border-emerald-500/20"},{title:" ",fullTitle:"  ",desc:"     .",icon:yS,gradient:"from-violet-600 to-purple-600",shadow:"shadow-purple-500/20",border:"border-purple-500/20"},{title:" ",fullTitle:"  ",desc:"   (Presentation)  .",icon:qr,gradient:"from-orange-500 to-amber-500",shadow:"shadow-orange-500/20",border:"border-orange-500/20"},{title:" ",fullTitle:"  ",desc:"       ELT   ( ).",icon:ed,gradient:"from-pink-600 to-rose-600",shadow:"shadow-pink-500/20",border:"border-pink-500/20"}];return e?r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[r.jsxs("div",{className:"relative overflow-hidden pt-28 pb-8",children:[r.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 via-gray-950/80 to-gray-950 pointer-events-none"}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 relative z-30 mb-6",children:r.jsxs("div",{className:"flex items-center justify-start gap-4",children:[r.jsx("button",{onClick:l,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-300 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm group",children:r.jsx(pt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-white leading-none mb-1",children:" "}),r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400",children:[r.jsxs("span",{onClick:a,className:"hover:text-white cursor-pointer transition-colors flex items-center gap-1",children:[r.jsx(Gt,{className:"w-3.5 h-3.5"})," "]}),r.jsx("span",{className:"text-gray-600",children:"/"}),r.jsxs("span",{onClick:()=>t(null),className:"hover:text-white cursor-pointer transition-colors flex items-center gap-1",children:[e==="university"?r.jsx(Bn,{className:"w-3.5 h-3.5"}):r.jsx(er,{className:"w-3.5 h-3.5"}),e==="university"?"":""]})]})]})]})}),r.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center px-4",children:[r.jsxs("div",{className:`inline-flex items-center gap-2 bg-${c.color}-500/10 border border-${c.color}-500/30 text-${c.color}-400 px-4 py-1.5 rounded-full text-xs font-bold mb-4 animate-fade-in-up shadow-lg`,children:[r.jsx(Tp,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"  "})]}),r.jsxs("h1",{className:"text-3xl md:text-5xl font-black text-white mb-2 drop-shadow-2xl tracking-tight leading-tight",children:[c.title," ",r.jsx("span",{className:`text-transparent bg-clip-text bg-gradient-to-r ${c.gradient}`,children:c.subtitle})]}),c.description&&r.jsx("p",{className:"text-gray-400 text-sm md:text-base max-w-2xl mx-auto leading-relaxed",children:c.description})]})]}),r.jsx("div",{className:"max-w-md mx-auto px-4 relative z-10 w-full -mt-4",children:r.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-1 border-2 ${c.border} ${c.shadow} relative overflow-hidden group`,children:[r.jsx("div",{className:`absolute top-0 left-0 w-full h-full bg-gradient-to-b from-${c.color}-900/10 to-transparent pointer-events-none`}),r.jsxs("div",{className:`bg-gray-900/90 backdrop-blur-xl rounded-[2.3rem] ${e==="university"?"p-4":"p-5 md:p-6"} relative h-full flex flex-col`,children:[r.jsxs("div",{className:`text-center ${e==="university"?"mb-4":"mb-6"}`,children:[r.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${c.gradient} rounded-full flex items-center justify-center mx-auto mb-2 shadow-2xl animate-pulse-slow`,children:r.jsx(wn,{className:"w-6 h-6 text-white fill-white"})}),r.jsx("h2",{className:"text-lg font-black text-white mb-2",children:" Premium"}),r.jsxs("div",{className:`inline-block bg-${c.color}-500/10 border border-${c.color}-500/30 rounded-xl px-4 py-1`,children:[r.jsxs("div",{className:`flex items-baseline justify-center gap-1 text-${c.color}-400`,children:[r.jsx("span",{className:"text-xl font-black",children:c.price}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]}),r.jsx("span",{className:`text-[8px] text-${c.color}-500/70 font-bold block`,children:" / "})]})]}),r.jsx("div",{className:`space-y-2 ${e==="university"?"mb-4":"mb-8"} flex-1`,children:c.features.map((f,g)=>r.jsxs("div",{className:"flex items-center gap-3 bg-gray-800/50 p-2.5 rounded-xl border border-gray-700/50",children:[r.jsx("div",{className:`bg-${c.color}-500/20 p-1.5 rounded-lg text-${c.color}-400`,children:r.jsx(f.icon,{className:"w-4 h-4"})}),r.jsxs("div",{className:"text-right",children:[r.jsx("h4",{className:"font-bold text-white text-xs",children:f.text}),f.sub&&r.jsx("p",{className:"text-gray-400 text-[9px]",children:f.sub})]})]},g))}),r.jsxs("button",{onClick:()=>s(),className:`w-full py-3 rounded-xl font-black text-sm text-white shadow-xl flex items-center justify-center gap-2 transition-all transform hover:-translate-y-1 active:scale-95 bg-gradient-to-r ${c.gradient} hover:shadow-${c.color}-900/30 mb-3`,children:[r.jsx(Wo,{className:"w-4 h-4"}),"   "]}),r.jsxs("div",{className:"pt-2 border-t border-gray-800 text-center",children:[r.jsxs("p",{className:"text-[9px] text-gray-400 font-bold mb-2 flex items-center justify-center gap-1",children:[r.jsx(px,{className:"w-2.5 h-2.5"}),"  :"]}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-2 text-[9px] font-bold text-gray-300",children:[r.jsxs("div",{className:"bg-gray-800 px-2 py-1 rounded-lg border border-gray-700 flex items-center gap-1",children:[r.jsx(wA,{className:"w-2.5 h-2.5 text-blue-400"})," PalPay"]}),r.jsxs("div",{className:"bg-gray-800 px-2 py-1 rounded-lg border border-gray-700 flex items-center gap-1",children:[r.jsx(jd,{className:"w-2.5 h-2.5 text-yellow-400"})," Reflect"]}),r.jsxs("div",{className:"bg-gray-800 px-2 py-1 rounded-lg border border-gray-700 flex items-center gap-1",children:[r.jsx(_M,{className:"w-2.5 h-2.5 text-green-400"})," Jawwal Pay"]}),r.jsxs("div",{className:"bg-gray-800 px-2 py-1 rounded-lg border border-gray-700 flex items-center gap-1",children:[r.jsx(Bn,{className:"w-2.5 h-2.5 text-purple-400"}),"  "]})]})]})]})]})}),e==="university"&&r.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-20 relative z-10 w-full mt-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:"  "}),r.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:d.map((f,g)=>r.jsxs("div",{className:`bg-gray-900 rounded-3xl p-4 md:p-6 relative overflow-hidden group hover:-translate-y-1 transition-all duration-300 border ${f.border} flex flex-col items-center text-center`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),r.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${f.gradient} flex items-center justify-center mb-4 shadow-lg ${f.shadow} group-hover:scale-110 transition-transform duration-300`,children:r.jsx(f.icon,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-sm md:text-lg font-black text-white mb-2 leading-tight",children:f.title}),r.jsx("p",{className:"text-gray-400 text-[10px] md:text-xs leading-relaxed mb-4 line-clamp-3",children:f.desc}),r.jsxs("button",{onClick:()=>s(f.fullTitle),className:"mt-auto bg-gray-800 hover:bg-gray-700 text-white text-[10px] md:text-xs font-bold py-2 px-4 rounded-xl transition-colors flex items-center gap-1.5 border border-gray-700 hover:border-gray-600 w-full justify-center",children:[r.jsx(Wo,{className:"w-3 h-3"})," "]})]},g))})]})]}):r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100 pt-28",children:[r.jsx("div",{className:"max-w-4xl mx-auto px-4 pb-2 w-full",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 hover:text-white border border-white/10 shadow-lg backdrop-blur-sm",children:r.jsx(pt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-white leading-none mb-1",children:""}),r.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-gray-500",children:[r.jsx(Gt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:""}),r.jsx("span",{children:"/"}),r.jsx("span",{children:" "})]})]})]})}),r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 pb-20",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-4 animate-pulse",children:[r.jsx(Tp,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}),r.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl",children:[r.jsxs("button",{onClick:()=>t("school"),className:"group relative bg-gray-900 rounded-[2rem] p-6 border-2 border-gray-800 hover:border-emerald-500 transition-all duration-300 hover:shadow-[0_0_40px_rgba(16,185,129,0.15)] flex flex-col items-center text-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-20 h-20 bg-emerald-900/20 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform border border-emerald-500/20",children:r.jsx(er,{className:"w-8 h-8 text-emerald-400"})}),r.jsx("h3",{className:"text-xl font-black text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-xs font-medium mb-4",children:"  (5 - 12)"}),r.jsx("span",{className:"mt-auto bg-gray-800 text-white px-5 py-2 rounded-xl font-bold text-xs group-hover:bg-emerald-600 transition-colors",children:" "})]}),r.jsxs("button",{onClick:()=>t("university"),className:"group relative bg-gray-900 rounded-[2rem] p-6 border-2 border-gray-800 hover:border-blue-500 transition-all duration-300 hover:shadow-[0_0_40px_rgba(59,130,246,0.15)] flex flex-col items-center text-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-20 h-20 bg-blue-900/20 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform border border-blue-500/20",children:r.jsx(Bn,{className:"w-8 h-8 text-blue-400"})}),r.jsx("h3",{className:"text-xl font-black text-white mb-1",children:" "}),r.jsx("p",{className:"text-gray-400 text-xs font-medium mb-4",children:"  "}),r.jsx("span",{className:"mt-auto bg-gray-800 text-white px-5 py-2 rounded-xl font-bold text-xs group-hover:bg-blue-600 transition-colors",children:"  "})]})]})]})]})},_M=({className:a})=>r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[r.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),r.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),NM="Etqan_Secure_2024",jM=({expiryDate:a})=>{const[e,t]=k.useState(""),[s,l]=k.useState(!1);return k.useEffect(()=>{const c=()=>{let g=0;if(!a)return 0;a.seconds?g=a.seconds*1e3:a instanceof Date?g=a.getTime():g=new Date(a).getTime();const x=g-Date.now();return x<=0?(l(!0),0):x},d=()=>{const g=c();if(g<=0){t("");return}const x=Math.floor(g/(1e3*60*60*24)),w=Math.floor(g%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(g%(1e3*60*60)/(1e3*60));x>0?t(`${x}   ${w} `):t(`${w}:${b.toString().padStart(2,"0")}`)};d();const f=setInterval(d,6e4);return()=>clearInterval(f)},[a]),r.jsx("span",{className:`font-mono font-bold text-[10px] ${s?"text-red-400":"text-emerald-400"}`,children:e})},EM=({onBack:a})=>{const{user:e}=Ds(),[t,s]=k.useState([]),[l,c]=k.useState([]),[d,f]=k.useState(""),[g,x]=k.useState(!1),[w,b]=k.useState(null),[N,M]=k.useState(!1),[z,B]=k.useState(!1),[q,re]=k.useState("school"),[ue,U]=k.useState(!1),[fe,ae]=k.useState(null),[pe,S]=k.useState(30),[E,I]=k.useState("school"),D=(e==null?void 0:e.role)==="teacher",R=`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /subscriptions/{id} {
      allow write: if request.resource.data.adminSecret == 'Etqan_Secure_2024';
      allow read, delete: if true;
    }
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`;k.useEffect(()=>{D&&O()},[D]);const O=async()=>{M(!1);try{const W=kn(Ot(Qe,"subscriptions"),Di(100)),ge=await Jn(W),A=[];ge.forEach(Y=>A.push({id:Y.id,...Y.data()})),A.sort((Y,xe)=>{var Ee,Oe;const be=((Ee=Y.expiryDate)==null?void 0:Ee.seconds)||0;return(((Oe=xe.expiryDate)==null?void 0:Oe.seconds)||0)-be}),c(A)}catch(W){console.error("Firestore Error:",W.message),(W.message.includes("permission")||W.code==="permission-denied")&&M(!0)}},C=async()=>{x(!0),s([]);const W=d.trim();if(!W){x(!1);return}try{const ge=qn(Qe,"users",W),A=await $9(ge);let Y=[];if(A.exists())Y.push({id:A.id,...A.data()});else{const xe=kn(Ot(Qe,"users"),Rn("email","==",W));if((await Jn(xe)).forEach(ie=>Y.push({id:ie.id,...ie.data()})),Y.length===0){const ie=kn(Ot(Qe,"users"),Rn("displayName",">=",W),Rn("displayName","<=",W+""),Di(10));(await Jn(ie)).forEach(Oe=>Y.push({id:Oe.id,...Oe.data()}))}}s(Y)}catch(ge){console.error("Search error:",ge),ge.code==="permission-denied"&&M(!0)}finally{x(!1)}},ce=W=>{var A;ae(W);const ge=W.grade==="English Major - QOU"||((A=W.school)==null?void 0:A.includes(""));I(ge?"university":"school"),S(30),U(!0)},je=async()=>{if(!fe)return;const W=fe,ge=!W.isSubscriber;U(!1),b(W.id);try{const A=qn(Qe,"users",W.id),Y=qn(Qe,"subscriptions",W.id),xe=pe,be=ge?new Date(Date.now()+xe*24*60*60*1e3):null;ge?(await $m(Y,{studentId:W.id,displayName:W.displayName,email:W.email||"",isActive:!0,expiryDate:be,startDate:Zs(),studentType:E,adminSecret:NM}),await bc(A,{isSubscriber:!0,subscriptionExpiry:be,grade:E==="university"&&W.grade!=="English Major - QOU"?"university":W.grade})):(await Hd(Y),await bc(A,{isSubscriber:!1,subscriptionExpiry:null})),C(),O(),ae(null)}catch(A){console.error("Update Error:",A),alert(":      (Rules)  Firebase.")}finally{b(null)}},H=()=>{navigator.clipboard.writeText(R),B(!0),setTimeout(()=>B(!1),3e3)},P=l.filter(W=>W.studentType==="school"||!W.studentType),ne=l.filter(W=>W.studentType==="university");return D?r.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100 pb-20",children:[ue&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md animate-fade-in",onClick:()=>U(!1)}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-md w-full relative z-10 text-center border border-white/10 shadow-2xl animate-fade-in-up",children:[r.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-800 shadow-xl ${fe!=null&&fe.isSubscriber?"bg-red-500/20 text-red-500":"bg-emerald-500/20 text-emerald-500"}`,children:fe!=null&&fe.isSubscriber?r.jsx(Y_,{className:"w-10 h-10"}):r.jsx(Zo,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:" "}),r.jsxs("p",{className:"text-gray-400 mb-6 text-sm",children:["   VIP : ",r.jsx("br",{}),r.jsxs("span",{className:"text-white font-bold",children:['"',fe==null?void 0:fe.displayName,'"']})]}),!(fe!=null&&fe.isSubscriber)&&r.jsxs("div",{className:"space-y-6 mb-8 text-right",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-black text-gray-500 mb-3 uppercase tracking-widest",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-800 p-1 rounded-xl border border-gray-700",children:[r.jsxs("button",{onClick:()=>I("school"),className:`py-2.5 rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2 ${E==="school"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-750"}`,children:[r.jsx(er,{className:"w-3.5 h-3.5"}),"  "]}),r.jsxs("button",{onClick:()=>I("university"),className:`py-2.5 rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2 ${E==="university"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-750"}`,children:[r.jsx(Bn,{className:"w-3.5 h-3.5"}),"  "]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-black text-gray-500 mb-3 uppercase tracking-widest",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-800 p-1 rounded-xl border border-gray-700",children:[r.jsxs("button",{onClick:()=>S(30),className:`py-2.5 rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2 ${pe===30?"bg-amber-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-750"}`,children:[r.jsx(sd,{className:"w-3.5 h-3.5"})," 30  ()"]}),r.jsxs("button",{onClick:()=>S(150),className:`py-2.5 rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2 ${pe===150?"bg-amber-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-750"}`,children:[r.jsx(Xo,{className:"w-3.5 h-3.5"})," 150  ()"]})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:je,className:`flex-1 py-4 rounded-2xl font-black text-white transition-all shadow-lg transform hover:scale-105 active:scale-95 ${fe!=null&&fe.isSubscriber?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:fe!=null&&fe.isSubscriber?" ":" "}),r.jsx("button",{onClick:()=>U(!1),className:"flex-1 bg-gray-800 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:""})]})]})]}),r.jsx("div",{className:"max-w-6xl mx-auto px-4 pt-4 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:a,className:"p-2 bg-gray-900/50 hover:bg-gray-800 rounded-xl transition-all text-gray-400 border border-white/10 shadow-lg group",children:r.jsx(pt,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5",children:"  "}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsxs("span",{className:"hover:text-emerald-400 cursor-pointer flex items-center gap-1",onClick:a,children:[r.jsx(Gt,{className:"w-3 h-3"})," "]}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-emerald-500",children:" "})]})]})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 space-y-8",children:[N&&r.jsx("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-3xl p-6 mb-8 shadow-[0_0_30px_rgba(239,68,68,0.2)]",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[r.jsx("div",{className:"bg-red-500 p-3 rounded-2xl text-white shrink-0 shadow-lg",children:r.jsx(bx,{className:"w-8 h-8"})}),r.jsxs("div",{className:"text-right flex-1",children:[r.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"  "}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:"   (Rules)  Firestore     ."}),r.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 mb-6 relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("p",{className:"text-emerald-400 text-xs font-black flex items-center gap-2",children:[r.jsx(JS,{className:"w-4 h-4"}),"  :"]}),r.jsx("button",{onClick:H,className:`p-2 rounded-lg transition-all ${z?"bg-emerald-500 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:z?r.jsx(mx,{className:"w-4 h-4"}):r.jsx(gx,{className:"w-4 h-4"})})]}),r.jsx("pre",{className:"text-left text-[10px] md:text-xs font-mono text-gray-400 overflow-x-auto bg-gray-900/50 p-4 rounded-xl",dir:"ltr",children:R})]}),r.jsxs("button",{onClick:O,className:"bg-white text-red-950 px-8 py-3 rounded-xl font-black text-sm flex items-center gap-2",children:[r.jsx(Nd,{className:"w-4 h-4"}),"  "]})]})]})}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 p-6 md:p-8 animate-fade-in-up",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8 border-b border-gray-800 pb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3 mb-2",children:[r.jsx(px,{className:"w-8 h-8 text-amber-500"}),"  "]}),r.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"        VIP"})]}),r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[r.jsxs("div",{className:"relative flex-1 md:flex-none",children:[r.jsx(fs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-500"}),r.jsx("input",{type:"text",placeholder:"   ...",value:d,onChange:W=>f(W.target.value),onKeyDown:W=>W.key==="Enter"&&C(),className:"w-full md:w-80 px-12 py-3.5 rounded-xl bg-gray-850 border border-gray-700 focus:border-amber-500 outline-none text-white font-bold text-sm"})]}),r.jsx("button",{onClick:C,disabled:g,className:"bg-amber-600 hover:bg-amber-700 text-white px-6 rounded-xl transition-all",children:g?r.jsx(vt,{className:"w-5 h-5 animate-spin"}):r.jsx(fs,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"overflow-x-auto min-h-[100px]",children:t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 bg-gray-850/30 rounded-3xl border border-dashed border-gray-800",children:[r.jsx(fs,{className:"w-12 h-12 mb-4 opacity-10"}),r.jsx("p",{className:"font-bold text-sm opacity-40",children:"    "})]}):r.jsxs("table",{className:"w-full text-right border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-800 text-gray-500 text-[10px] uppercase font-black tracking-widest",children:[r.jsx("th",{className:"pb-4 pr-4",children:""}),r.jsx("th",{className:"pb-4",children:""}),r.jsx("th",{className:"pb-4 pl-4 text-left",children:""})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:t.map(W=>r.jsxs("tr",{className:"group hover:bg-white/[0.02] transition-colors",children:[r.jsx("td",{className:"py-4 pr-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-800 flex items-center justify-center overflow-hidden border border-gray-700 shrink-0 shadow-inner",children:W.avatar?r.jsx("img",{src:W.avatar,className:"w-full h-full object-cover"}):r.jsx(Si,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-black text-white text-sm",children:W.displayName}),r.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:W.email})]})]})}),r.jsx("td",{className:"py-4",children:W.isSubscriber?r.jsxs("span",{className:"bg-emerald-500/10 text-emerald-400 px-3 py-1 rounded-full text-[10px] font-black border border-emerald-500/20 flex items-center gap-1.5 w-fit",children:[r.jsx(Qn,{className:"w-3 h-3"})," "]}):r.jsx("span",{className:"bg-gray-800 text-gray-500 px-3 py-1 rounded-full text-[10px] font-black border border-gray-700 w-fit block",children:" "})}),r.jsx("td",{className:"py-4 pl-4 text-left",children:r.jsx("button",{onClick:()=>ce(W),disabled:w===W.id,className:`px-5 py-2.5 rounded-xl text-xs font-black transition-all transform active:scale-95 shadow-lg ${w===W.id?"bg-gray-800 text-gray-600":W.isSubscriber?"bg-red-900/20 text-red-400 border border-red-500/30 hover:bg-red-900/40":"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-900/20"}`,children:w===W.id?r.jsx(vt,{className:"w-4 h-4 animate-spin mx-auto"}):W.isSubscriber?" ":" "})})]},W.id))})]})})]}),r.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-emerald-500/20 p-6 md:p-8 animate-fade-in-up relative",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-8 border-b border-gray-800 pb-6",children:[r.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl border border-emerald-500/20 shadow-lg shadow-emerald-900/10",children:r.jsx(Zo,{className:"w-8 h-8 text-emerald-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-2xl font-black text-white",children:" "}),r.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"      "})]}),r.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl border border-gray-700",children:[r.jsxs("button",{onClick:()=>re("school"),className:`px-4 py-2 rounded-lg text-xs font-black transition-all flex items-center gap-2 ${q==="school"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx(er,{className:"w-3.5 h-3.5"}),"  (",P.length,")"]}),r.jsxs("button",{onClick:()=>re("university"),className:`px-4 py-2 rounded-lg text-xs font-black transition-all flex items-center gap-2 ${q==="university"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx(Bn,{className:"w-3.5 h-3.5"}),"  (",ne.length,")"]})]}),r.jsx("button",{onClick:O,className:"p-3 bg-gray-800 hover:bg-gray-700 rounded-xl text-gray-400 transition-all shadow-md",children:r.jsx(fr,{className:"w-5 h-5"})})]}),(q==="school"?P:ne).length===0?r.jsxs("div",{className:"text-center py-16 text-gray-500",children:[r.jsx($T,{className:"w-16 h-16 mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"font-bold",children:"      "})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(q==="school"?P:ne).map(W=>r.jsxs("div",{className:`bg-gray-850/50 rounded-3xl p-5 border border-white/5 flex items-center justify-between group transition-all shadow-sm ${q==="university"?"hover:border-blue-500/30":"hover:border-emerald-500/30"}`,children:[r.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gray-800 flex items-center justify-center overflow-hidden border border-gray-700 shrink-0 ${q==="university"?"group-hover:border-blue-500/50":"group-hover:border-emerald-500/50"}`,children:W.avatar?r.jsx("img",{src:W.avatar,className:"w-full h-full object-cover"}):r.jsx(Si,{className:"w-6 h-6 text-gray-500"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h4",{className:"font-black text-white text-sm truncate mb-0.5",children:W.displayName}),r.jsx("p",{className:"text-[9px] text-gray-500 font-mono truncate mb-2",children:W.email}),r.jsxs("div",{className:"flex items-center gap-2 bg-black/30 px-2 py-0.5 rounded-lg border border-white/5 w-fit",children:[r.jsx(Z_,{className:`w-3 h-3 ${q==="university"?"text-blue-400":"text-emerald-400"}`}),r.jsx(jM,{expiryDate:W.expiryDate||W.subscriptionExpiry})]})]})]}),r.jsx("button",{onClick:()=>ce({...W,isSubscriber:!0}),className:"p-2.5 rounded-xl bg-gray-800 text-gray-500 hover:bg-red-900/20 hover:text-red-400 transition-all shadow-md group-hover:opacity-100 md:opacity-0",children:r.jsx(Fr,{className:"w-4 h-4"})})]},W.id))})]})]})]}):r.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-6 text-center",children:r.jsxs("div",{className:"bg-gray-900 p-10 rounded-[2.5rem] border border-red-500/30 max-w-md shadow-2xl animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(ms,{className:"w-10 h-10 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:" "}),r.jsx("p",{className:"text-gray-400 mb-8 font-medium",children:"     ."}),r.jsxs("button",{onClick:a,className:"w-full py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[r.jsx(pt,{className:"w-4 h-4"}),"  "]})]})})},TM=({onNavigate:a})=>{const{user:e}=Ds(),[t,s]=k.useState("MENU"),[l,c]=k.useState({grammar:0,vocab:0,reading:0,total:0,overallAvg:0}),[d,f]=k.useState(!1),g=(()=>{if((e==null?void 0:e.role)==="teacher")return!0;if(!(e!=null&&e.isSubscriber)||!e.subscriptionExpiry)return!1;const b=e.subscriptionExpiry.seconds?e.subscriptionExpiry.seconds*1e3:new Date(e.subscriptionExpiry).getTime();return Date.now()<b})();k.useEffect(()=>{g&&(e!=null&&e.uid)&&e.role!=="teacher"&&x()},[e,g]);const x=async()=>{if(e!=null&&e.uid){f(!0);try{const b=kn(Ot(Qe,"quiz_results"),Rn("userId","==",e.uid),Di(20)),M=(await Jn(b)).docs.map(ae=>ae.data());if(M.length===0){f(!1);return}let z=0,B=0,q=0,re=0,ue=0,U=0,fe=0;M.forEach(ae=>{const pe=ae.quizTitle||"";pe.includes("")||pe.includes("Grammar")?(z+=ae.percentage,B++):pe.includes("")||pe.includes("Vocab")?(q+=ae.percentage,re++):(ue+=ae.percentage,U++),fe+=ae.percentage}),c({grammar:B?Math.round(z/B):0,vocab:re?Math.round(q/re):0,reading:U?Math.round(ue/U):0,total:M.length,overallAvg:M.length?Math.round(fe/M.length):0})}catch(b){console.warn("Analysis access info:",b.message)}finally{f(!1)}}},w=()=>{t!=="MENU"?s("MENU"):a("HOME")};return g?r.jsxs("div",{className:"min-h-screen bg-[#020202] animate-fade-in text-gray-100 pb-20 relative overflow-hidden",children:[r.jsx("div",{className:"max-w-6xl mx-auto px-4 pt-2 pb-2 relative z-30",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:w,className:"p-2 bg-gray-900/50 hover:bg-amber-900/20 rounded-xl transition-all text-gray-400 border border-white/5 shadow-lg group",children:r.jsx(pt,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-lg font-black text-white tracking-tight mb-0.5 flex items-center gap-2",children:["  ",r.jsx(wn,{className:"w-4 h-4 text-amber-500 fill-amber-500"})]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium text-gray-500",children:[r.jsx("span",{onClick:()=>a("HOME"),className:"hover:text-amber-400 cursor-pointer",children:""}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-amber-500",children:"VIP"})]})]})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 relative z-10",children:[t==="MENU"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",children:[r.jsxs("button",{onClick:()=>s("ANALYSIS"),className:"group relative w-full bg-[#080808] rounded-[2.5rem] p-8 border border-white/5 hover:border-amber-500/30 transition-all h-64 flex flex-col justify-center items-center text-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gray-800 flex items-center justify-center border border-amber-500/20 group-hover:bg-amber-900/20 transition-all",children:r.jsx(F_,{className:"w-10 h-10 text-amber-500"})}),r.jsx("h3",{className:"text-2xl font-black text-white",children:" "}),r.jsx("p",{className:"text-gray-500 text-sm",children:"     "})]}),r.jsxs("button",{onClick:()=>s("CERTIFICATE_PREVIEW"),className:"group relative w-full bg-[#080808] rounded-[2.5rem] p-8 border border-white/5 hover:border-emerald-500/30 transition-all h-64 flex flex-col justify-center items-center text-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gray-800 flex items-center justify-center border border-emerald-500/20 group-hover:bg-emerald-900/20 transition-all",children:r.jsx(q3,{className:"w-10 h-10 text-emerald-500"})}),r.jsx("h3",{className:"text-2xl font-black text-white",children:" "}),r.jsx("p",{className:"text-gray-500 text-sm",children:"     "})]})]}),t==="ANALYSIS"&&r.jsxs("div",{className:"animate-fade-in bg-[#080808] rounded-[2rem] p-8 md:p-10 border border-white/10 shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-10 pb-8 border-b border-white/5",children:[r.jsx("div",{className:"p-3 bg-amber-500/10 rounded-2xl border border-amber-500/20",children:r.jsx(dA,{className:"w-8 h-8 text-amber-500"})}),r.jsx("h2",{className:"text-2xl font-black text-white",children:"  "})]}),d?r.jsx("div",{className:"py-20 text-center",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-amber-500 mx-auto"})}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[r.jsx("span",{className:"text-gray-400 block mb-2 font-bold",children:""}),r.jsxs("div",{className:"text-3xl font-black text-blue-400",children:[l.grammar,"%"]}),r.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full mt-4",children:r.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${l.grammar}%`}})})]}),r.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[r.jsx("span",{className:"text-gray-400 block mb-2 font-bold",children:""}),r.jsxs("div",{className:"text-3xl font-black text-purple-400",children:[l.vocab,"%"]}),r.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full mt-4",children:r.jsx("div",{className:"bg-purple-500 h-full rounded-full",style:{width:`${l.vocab}%`}})})]}),r.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800",children:[r.jsx("span",{className:"text-gray-400 block mb-2 font-bold",children:""}),r.jsxs("div",{className:"text-3xl font-black text-emerald-400",children:[l.reading,"%"]}),r.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full mt-4",children:r.jsx("div",{className:"bg-emerald-500 h-full rounded-full",style:{width:`${l.reading}%`}})})]})]}),r.jsxs("div",{className:"mt-10 p-10 bg-amber-500/5 rounded-[2.5rem] border border-amber-500/10 text-center",children:[r.jsx("div",{className:"text-gray-400 font-bold mb-2",children:"  "}),r.jsxs("div",{className:"text-7xl font-black text-amber-500 drop-shadow-[0_0_15px_rgba(245,158,11,0.3)]",children:[l.overallAvg,"%"]}),r.jsx("p",{className:"text-gray-500 mt-4 text-sm font-medium",children:"       "})]})]})]})]})]}):r.jsx("div",{className:"min-h-screen bg-[#050505] animate-fade-in flex flex-col items-center justify-center p-4 relative overflow-hidden",children:r.jsxs("div",{className:"relative z-10 max-w-lg w-full bg-gray-900/80 backdrop-blur-xl border border-amber-500/30 rounded-[2.5rem] p-8 md:p-12 text-center shadow-2xl",children:[r.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2",children:r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-300 via-yellow-500 to-amber-600 rounded-full flex items-center justify-center border-4 border-gray-900 shadow-xl",children:r.jsx(Il,{className:"w-8 h-8 text-white"})})}),r.jsxs("div",{className:"mt-8 mb-8",children:[r.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:"  VIP"}),r.jsx("p",{className:"text-amber-400 font-medium text-sm",children:"       "})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>a("SERVICES"),className:"w-full py-4 rounded-xl bg-gradient-to-r from-amber-500 to-amber-600 text-white font-black shadow-lg shadow-amber-900/20 transform hover:scale-[1.02] transition-all",children:" "}),r.jsxs("button",{onClick:()=>a("HOME"),className:"w-full py-4 rounded-xl bg-gray-800 text-gray-300 font-bold border border-gray-700 flex items-center justify-center gap-2",children:[r.jsx(fr,{className:"w-4 h-4"})," "]})]})]})})};function SM(){const[a,e]=k.useState("HOME"),[t,s]=k.useState(!1),[l,c]=k.useState(!1),d=k.useRef({}),f=k.useRef(!1),{logout:g}=Ds();k.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const b=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",b),()=>window.removeEventListener("popstate",b)},[]),k.useEffect(()=>{if(f.current){const b=d.current[a]||0;setTimeout(()=>window.scrollTo(0,b),10)}else window.scrollTo(0,0)},[a]);const x=(b,N=!1)=>{if(b===a){b==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[a]=window.scrollY,f.current=N,window.history.pushState({view:b},"",""),e(b)},w=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},2500)};return r.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[a==="HOME"&&r.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[r.jsx(Ym,{}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),r.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&r.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black/90 backdrop-blur-2xl transition-all duration-700 animate-fade-in",children:[r.jsxs("div",{className:"relative scale-150 transform transition-transform duration-700",children:[r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-emerald-500/20 rounded-full blur-[80px] animate-pulse"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-blue-500/10 rounded-full blur-[60px] animate-pulse delay-75"}),r.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[r.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_3s_linear_infinite] text-emerald-500/20",viewBox:"0 0 100 100",children:r.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"20 10"})}),r.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_2s_linear_infinite_reverse] text-emerald-500/60",viewBox:"0 0 100 100",children:r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60 100",strokeLinecap:"round"})}),r.jsx("svg",{className:"w-full h-full absolute inset-0 animate-spin text-blue-500/50",viewBox:"0 0 100 100",children:r.jsx("circle",{cx:"50",cy:"50",r:"32",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"40 40",strokeLinecap:"round"})}),r.jsxs("div",{className:"bg-gray-900 p-4 rounded-full border border-white/10 shadow-2xl relative z-10 animate-bounce-subtle",children:[r.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-md rounded-full"}),r.jsx(zf,{className:"w-8 h-8 text-emerald-400 relative z-20"})]})]})]}),r.jsxs("div",{className:"mt-12 text-center space-y-4 animate-slide-up-fade",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 tracking-tight drop-shadow-lg",children:" "}),r.jsxs("div",{className:"flex items-center justify-center gap-3 text-emerald-400 text-sm md:text-base font-bold bg-emerald-950/30 px-6 py-2.5 rounded-full border border-emerald-500/20 shadow-lg backdrop-blur-md",children:[r.jsx(vt,{className:"w-4 h-4 animate-spin"}),"    ..."]})]})]}),r.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[r.jsx(ED,{onLoginClick:()=>s(!0),onNavigate:b=>x(b),onLogoutClick:w}),r.jsxs("main",{className:`flex-grow ${a!=="HOME"&&a!=="SERVICES"?"pt-24":""}`,children:[a==="HOME"&&r.jsxs(r.Fragment,{children:[r.jsx(AD,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:b=>x(b)}),r.jsx(CD,{onNavigate:b=>x(b)}),r.jsx(QD,{onLoginClick:()=>s(!0)}),r.jsx(YD,{}),r.jsx(dM,{onNavigate:()=>x("PLATFORM_DEFINITION")}),r.jsx(lM,{}),r.jsx(oM,{onLoginClick:()=>s(!0)}),r.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),r.jsx(cM,{}),r.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),r.jsx(iM,{onNavigate:b=>x(b)}),r.jsx(yM,{}),r.jsx(mM,{onNavigate:b=>x(b)})]}),a==="ABOUT_PLATFORM"&&r.jsx(qD,{onBack:()=>x("HOME",!0)}),a==="PLATFORM_DEFINITION"&&r.jsx(uM,{onBack:()=>x("HOME",!0)}),a==="TEACHER_CV"&&r.jsx(BD,{onBack:()=>x("HOME",!0)}),a==="PROFILE"&&r.jsx(OD,{onNavigate:b=>x(b)}),a==="TEACHER_DASHBOARD"&&r.jsx(DD,{}),a==="QUESTION_BANK"&&r.jsx(XD,{onBack:()=>x("HOME",!0)}),a==="TEACHER_EXPLANATIONS"&&r.jsx(nM,{onNavigate:b=>x(b),onBack:()=>x("PROFILE",!0)}),a==="TEACHER_UPLOAD_FILES"&&r.jsx(aM,{onNavigate:b=>x(b),onBack:()=>x("PROFILE",!0)}),a==="QUIZZES"&&r.jsx(LD,{onBack:()=>x("HOME",!0),onNavigate:b=>x(b)}),a==="LESSONS"&&r.jsx(FD,{onBack:()=>x("HOME",!0)}),a==="LESSONS_EXPLANATIONS"&&r.jsx(ZD,{onBack:()=>x("HOME",!0),onNavigate:b=>x(b)}),a==="CONTACT_TEACHER"&&r.jsx(KD,{onBack:()=>x("HOME",!0)}),a==="SERVICES"&&r.jsx(wM,{onBack:()=>x("HOME",!0)}),a==="TEACHER_CORRESPONDENCE"&&r.jsx(hM,{onNavigate:b=>x(b)}),a==="TEACHER_REVIEWS"&&r.jsx(fM,{onNavigate:b=>x(b)}),a==="SUBSCRIPTION_MANAGEMENT"&&r.jsx(EM,{onBack:()=>x("PROFILE",!0)}),a==="VIP_AREA"&&r.jsx(TM,{onNavigate:b=>x(b)})]}),r.jsx(kD,{isOpen:t,onClose:()=>s(!1)}),r.jsx(vM,{onNavigate:b=>x(b)})]})]})}const K5=document.getElementById("root");if(!K5)throw new Error("Could not find root element to mount to");const AM=DT.createRoot(K5);AM.render(r.jsx(z_.StrictMode,{children:r.jsx(jD,{children:r.jsx(SM,{})})}));
