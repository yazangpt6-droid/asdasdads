(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function aE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wp={exports:{}},jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function xA(){if(Cb)return jc;Cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return jc.Fragment=e,jc.jsx=t,jc.jsxs=t,jc}var Ib;function vA(){return Ib||(Ib=1,wp.exports=xA()),wp.exports}var o=vA(),Ep={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function bA(){if(Rb)return Oe;Rb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,F={};function ee(O,J,V){this.props=O,this.context=J,this.refs=F,this.updater=V||D}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ne(){}ne.prototype=ee.prototype;function K(O,J,V){this.props=O,this.context=J,this.refs=F,this.updater=V||D}var ae=K.prototype=new ne;ae.constructor=K,G(ae,ee.prototype),ae.isPureReactComponent=!0;var Z=Array.isArray;function z(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,J,V){var re=V.ref;return{$$typeof:n,type:O,key:J,ref:re!==void 0?re:null,props:V}}function P(O,J){return R(O.type,J,O.props)}function j(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function U(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(V){return J[V]})}var M=/\/+/g;function $e(O,J){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):J.toString(36)}function Ke(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(z,z):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function X(O,J,V,re,he){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var Ie=!1;if(O===null)Ie=!0;else switch(Ae){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(O.$$typeof){case n:case e:Ie=!0;break;case v:return Ie=O._init,X(Ie(O._payload),J,V,re,he)}}if(Ie)return he=he(O),Ie=re===""?"."+$e(O,0):re,Z(he)?(V="",Ie!=null&&(V=Ie.replace(M,"$&/")+"/"),X(he,J,V,"",function(gn){return gn})):he!=null&&(j(he)&&(he=P(he,V+(he.key==null||O&&O.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+Ie)),J.push(he)),1;Ie=0;var Ye=re===""?".":re+":";if(Z(O))for(var je=0;je<O.length;je++)re=O[je],Ae=Ye+$e(re,je),Ie+=X(re,J,V,Ae,he);else if(je=S(O),typeof je=="function")for(O=je.call(O),je=0;!(re=O.next()).done;)re=re.value,Ae=Ye+$e(re,je++),Ie+=X(re,J,V,Ae,he);else if(Ae==="object"){if(typeof O.then=="function")return X(Ke(O),J,V,re,he);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function fe(O,J,V){if(O==null)return O;var re=[],he=0;return X(O,re,"","",function(Ae){return J.call(V,Ae,he++)}),re}function Te(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(V){(O._status===0||O._status===-1)&&(O._status=1,O._result=V)},function(V){(O._status===0||O._status===-1)&&(O._status=2,O._result=V)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Ve=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Le={map:fe,forEach:function(O,J,V){fe(O,function(){J.apply(this,arguments)},V)},count:function(O){var J=0;return fe(O,function(){J++}),J},toArray:function(O){return fe(O,function(J){return J})||[]},only:function(O){if(!j(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Oe.Activity=_,Oe.Children=Le,Oe.Component=ee,Oe.Fragment=t,Oe.Profiler=a,Oe.PureComponent=K,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},Oe.cache=function(O){return function(){return O.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(O,J,V){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var re=G({},O.props),he=O.key;if(J!=null)for(Ae in J.key!==void 0&&(he=""+J.key),J)!A.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(re[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)re.children=V;else if(1<Ae){for(var Ie=Array(Ae),Ye=0;Ye<Ae;Ye++)Ie[Ye]=arguments[Ye+2];re.children=Ie}return R(O.type,he,re)},Oe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Oe.createElement=function(O,J,V){var re,he={},Ae=null;if(J!=null)for(re in J.key!==void 0&&(Ae=""+J.key),J)A.call(J,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=J[re]);var Ie=arguments.length-2;if(Ie===1)he.children=V;else if(1<Ie){for(var Ye=Array(Ie),je=0;je<Ie;je++)Ye[je]=arguments[je+2];he.children=Ye}if(O&&O.defaultProps)for(re in Ie=O.defaultProps,Ie)he[re]===void 0&&(he[re]=Ie[re]);return R(O,Ae,he)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(O){return{$$typeof:h,render:O}},Oe.isValidElement=j,Oe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Te}},Oe.memo=function(O,J){return{$$typeof:m,type:O,compare:J===void 0?null:J}},Oe.startTransition=function(O){var J=I.T,V={};I.T=V;try{var re=O(),he=I.S;he!==null&&he(V,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(z,Ve)}catch(Ae){Ve(Ae)}finally{J!==null&&V.types!==null&&(J.types=V.types),I.T=J}},Oe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Oe.use=function(O){return I.H.use(O)},Oe.useActionState=function(O,J,V){return I.H.useActionState(O,J,V)},Oe.useCallback=function(O,J){return I.H.useCallback(O,J)},Oe.useContext=function(O){return I.H.useContext(O)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(O,J){return I.H.useDeferredValue(O,J)},Oe.useEffect=function(O,J){return I.H.useEffect(O,J)},Oe.useEffectEvent=function(O){return I.H.useEffectEvent(O)},Oe.useId=function(){return I.H.useId()},Oe.useImperativeHandle=function(O,J,V){return I.H.useImperativeHandle(O,J,V)},Oe.useInsertionEffect=function(O,J){return I.H.useInsertionEffect(O,J)},Oe.useLayoutEffect=function(O,J){return I.H.useLayoutEffect(O,J)},Oe.useMemo=function(O,J){return I.H.useMemo(O,J)},Oe.useOptimistic=function(O,J){return I.H.useOptimistic(O,J)},Oe.useReducer=function(O,J,V){return I.H.useReducer(O,J,V)},Oe.useRef=function(O){return I.H.useRef(O)},Oe.useState=function(O){return I.H.useState(O)},Oe.useSyncExternalStore=function(O,J,V){return I.H.useSyncExternalStore(O,J,V)},Oe.useTransition=function(){return I.H.useTransition()},Oe.version="19.2.0",Oe}var kb;function Fg(){return kb||(kb=1,Ep.exports=bA()),Ep.exports}var H=Fg();const oE=aE(H);var Tp={exports:{}},Lc={},Np={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function _A(){return Mb||(Mb=1,(function(n){function e(X,fe){var Te=X.length;X.push(fe);e:for(;0<Te;){var Ve=Te-1>>>1,Le=X[Ve];if(0<a(Le,fe))X[Ve]=fe,X[Te]=Le,Te=Ve;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var fe=X[0],Te=X.pop();if(Te!==fe){X[0]=Te;e:for(var Ve=0,Le=X.length,O=Le>>>1;Ve<O;){var J=2*(Ve+1)-1,V=X[J],re=J+1,he=X[re];if(0>a(V,Te))re<Le&&0>a(he,V)?(X[Ve]=he,X[re]=Te,Ve=re):(X[Ve]=V,X[J]=Te,Ve=J);else if(re<Le&&0>a(he,Te))X[Ve]=he,X[re]=Te,Ve=re;else break e}}return fe}function a(X,fe){var Te=X.sortIndex-fe.sortIndex;return Te!==0?Te:X.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,_=null,E=3,S=!1,D=!1,G=!1,F=!1,ee=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ae(X){for(var fe=t(m);fe!==null;){if(fe.callback===null)s(m);else if(fe.startTime<=X)s(m),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=t(m)}}function Z(X){if(G=!1,ae(X),!D)if(t(p)!==null)D=!0,z||(z=!0,U());else{var fe=t(m);fe!==null&&Ke(Z,fe.startTime-X)}}var z=!1,I=-1,A=5,R=-1;function P(){return F?!0:!(n.unstable_now()-R<A)}function j(){if(F=!1,z){var X=n.unstable_now();R=X;var fe=!0;try{e:{D=!1,G&&(G=!1,ne(I),I=-1),S=!0;var Te=E;try{t:{for(ae(X),_=t(p);_!==null&&!(_.expirationTime>X&&P());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,E=_.priorityLevel;var Le=Ve(_.expirationTime<=X);if(X=n.unstable_now(),typeof Le=="function"){_.callback=Le,ae(X),fe=!0;break t}_===t(p)&&s(p),ae(X)}else s(p);_=t(p)}if(_!==null)fe=!0;else{var O=t(m);O!==null&&Ke(Z,O.startTime-X),fe=!1}}break e}finally{_=null,E=Te,S=!1}fe=void 0}}finally{fe?U():z=!1}}}var U;if(typeof K=="function")U=function(){K(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$e=M.port2;M.port1.onmessage=j,U=function(){$e.postMessage(null)}}else U=function(){ee(j,0)};function Ke(X,fe){I=ee(function(){X(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(X){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var Te=E;E=fe;try{return X()}finally{E=Te}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(X,fe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Te=E;E=X;try{return fe()}finally{E=Te}},n.unstable_scheduleCallback=function(X,fe,Te){var Ve=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ve+Te:Ve):Te=Ve,X){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=Te+Le,X={id:v++,callback:fe,priorityLevel:X,startTime:Te,expirationTime:Le,sortIndex:-1},Te>Ve?(X.sortIndex=Te,e(m,X),t(p)===null&&X===t(m)&&(G?(ne(I),I=-1):G=!0,Ke(Z,Te-Ve))):(X.sortIndex=Le,e(p,X),D||S||(D=!0,z||(z=!0,U()))),X},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(X){var fe=E;return function(){var Te=E;E=fe;try{return X.apply(this,arguments)}finally{E=Te}}}})(Sp)),Sp}var Db;function wA(){return Db||(Db=1,Np.exports=_A()),Np.exports}var Ap={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function EA(){if(Pb)return An;Pb=1;var n=Fg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,An.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},An.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},An.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},An.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},An.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:S}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:E,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},An.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},An.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},An.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},An.requestFormReset=function(p){s.d.r(p)},An.unstable_batchedUpdates=function(p,m){return p(m)},An.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},An.useFormStatus=function(){return u.H.useHostTransitionStatus()},An.version="19.2.0",An}var jb;function TA(){if(jb)return Ap.exports;jb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ap.exports=EA(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function NA(){if(Lb)return Lc;Lb=1;var n=wA(),e=Fg(),t=TA();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(s(188))}function m(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var c=r,d=i;;){var x=c.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){c=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===c)return p(x),r;if(b===d)return p(x),i;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=x,d=b;else{for(var T=!1,C=x.child;C;){if(C===c){T=!0,c=x,d=b;break}if(C===d){T=!0,d=x,c=b;break}C=C.sibling}if(!T){for(C=b.child;C;){if(C===c){T=!0,c=b,d=x;break}if(C===d){T=!0,d=b,c=x;break}C=C.sibling}if(!T)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case G:return"Fragment";case ee:return"Profiler";case F:return"StrictMode";case Z:return"Suspense";case z:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case K:return r.displayName||"Context";case ne:return(r._context.displayName||"Context")+".Consumer";case ae:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return i=r.displayName||null,i!==null?i:$e(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return $e(r(i))}catch{}}return null}var Ke=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ve=[],Le=-1;function O(r){return{current:r}}function J(r){0>Le||(r.current=Ve[Le],Ve[Le]=null,Le--)}function V(r,i){Le++,Ve[Le]=r.current,r.current=i}var re=O(null),he=O(null),Ae=O(null),Ie=O(null);function Ye(r,i){switch(V(Ae,i),V(he,r),V(re,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Xv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Xv(i),r=Wv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(re),V(re,r)}function je(){J(re),J(he),J(Ae)}function gn(r){r.memoizedState!==null&&V(Ie,r);var i=re.current,c=Wv(i,r.type);i!==c&&(V(he,r),V(re,c))}function ze(r){he.current===r&&(J(re),J(he)),Ie.current===r&&(J(Ie),kc._currentValue=Te)}var ht,at;function Ut(r){if(ht===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);ht=i&&i[1]||"",at=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+r+at}var lt=!1;function Ot(r,i){if(!r||lt)return"";lt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(se){var W=se}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(se){W=se}r.call(ue.prototype)}}else{try{throw Error()}catch(se){W=se}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(se){if(se&&W&&typeof se.stack=="string")return[se.stack,W.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),T=b[0],C=b[1];if(T&&C){var L=T.split(`
`),Q=C.split(`
`);for(x=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;if(d===L.length||x===Q.length)for(d=L.length-1,x=Q.length-1;1<=d&&0<=x&&L[d]!==Q[x];)x--;for(;1<=d&&0<=x;d--,x--)if(L[d]!==Q[x]){if(d!==1||x!==1)do if(d--,x--,0>x||L[d]!==Q[x]){var oe=`
`+L[d].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=d&&0<=x);break}}}finally{lt=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ut(c):""}function er(r,i){switch(r.tag){case 26:case 27:case 5:return Ut(r.type);case 16:return Ut("Lazy");case 13:return r.child!==i&&i!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return Ot(r.type,!1);case 11:return Ot(r.type.render,!1);case 1:return Ot(r.type,!0);case 31:return Ut("Activity");default:return""}}function tr(r){try{var i="",c=null;do i+=er(r,c),c=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var kt=Object.prototype.hasOwnProperty,jt=n.unstable_scheduleCallback,Sn=n.unstable_cancelCallback,yi=n.unstable_shouldYield,nr=n.unstable_requestPaint,qt=n.unstable_now,Ms=n.unstable_getCurrentPriorityLevel,sr=n.unstable_ImmediatePriority,es=n.unstable_UserBlockingPriority,ts=n.unstable_NormalPriority,ba=n.unstable_LowPriority,xi=n.unstable_IdlePriority,Un=n.log,me=n.unstable_setDisableYieldValue,Se=null,we=null;function ge(r){if(typeof Un=="function"&&me(r),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Se,r)}catch{}}var Ce=Math.clz32?Math.clz32:Qt,Xe=Math.log,We=Math.LN2;function Qt(r){return r>>>=0,r===0?32:31-(Xe(r)/We|0)|0}var Ze=256,ie=262144,xe=4194304;function Fe(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Mt(r,i,c){var d=r.pendingLanes;if(d===0)return 0;var x=0,b=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var C=d&134217727;return C!==0?(d=C&~b,d!==0?x=Fe(d):(T&=C,T!==0?x=Fe(T):c||(c=C&~r,c!==0&&(x=Fe(c))))):(C=d&~b,C!==0?x=Fe(C):T!==0?x=Fe(T):c||(c=d&~r,c!==0&&(x=Fe(c)))),x===0?0:i!==0&&i!==x&&(i&b)===0&&(b=x&-x,c=i&-i,b>=c||b===32&&(c&4194048)!==0)?i:x}function cn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Ds(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(){var r=xe;return xe<<=1,(xe&62914560)===0&&(xe=4194304),r}function On(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Pr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function qn(r,i,c,d,x,b){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,Q=r.hiddenUpdates;for(c=T&~c;0<c;){var oe=31-Ce(c),ue=1<<oe;C[oe]=0,L[oe]=-1;var W=Q[oe];if(W!==null)for(Q[oe]=null,oe=0;oe<W.length;oe++){var se=W[oe];se!==null&&(se.lane&=-536870913)}c&=~ue}d!==0&&yn(r,d,0),b!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=b&~(T&~i))}function yn(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-Ce(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|c&261930}function Ps(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var d=31-Ce(c),x=1<<d;x&i|r[d]&i&&(r[d]|=i),c&=~x}}function _a(r,i){var c=i&-i;return c=(c&42)!==0?1:ir(c),(c&(r.suspendedLanes|i))!==0?0:c}function ir(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function fs(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Su(){var r=fe.p;return r!==0?r:(r=window.event,r===void 0?32:_b(r.type))}function js(r,i){var c=fe.p;try{return fe.p=r,i()}finally{fe.p=c}}var Ls=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ls,hn="__reactProps$"+Ls,ar="__reactContainer$"+Ls,mo="__reactEvents$"+Ls,Cf="__reactListeners$"+Ls,Au="__reactHandles$"+Ls,Cu="__reactResources$"+Ls,or="__reactMarker$"+Ls;function po(r){delete r[Jt],delete r[hn],delete r[mo],delete r[Cf],delete r[Au]}function lr(r){var i=r[Jt];if(i)return i;for(var c=r.parentNode;c;){if(i=c[ar]||c[Jt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=ib(r);r!==null;){if(c=r[Jt])return c;r=ib(r)}return i}r=c,c=r.parentNode}return null}function ms(r){if(r=r[Jt]||r[ar]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function ns(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function cr(r){var i=r[Cu];return i||(i=r[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(r){r[or]=!0}var Ul=new Set,Ol={};function ur(r,i){dr(r,i),dr(r+"Capture",i)}function dr(r,i){for(Ol[r]=i,r=0;r<i.length;r++)Ul.add(i[r])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zl={},Fl={};function Iu(r){return kt.call(Fl,r)?!0:kt.call(zl,r)?!1:ql.test(r)?Fl[r]=!0:(zl[r]=!0,!1)}function go(r,i,c){if(Iu(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function ss(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function Wt(r,i,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+d)}}function fn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function vi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Gl(r,i,c){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return x.call(this)},set:function(T){c=""+T,b.call(this,T)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function yt(r){if(!r._valueTracker){var i=vi(r)?"checked":"value";r._valueTracker=Gl(r,i,""+r[i])}}function wa(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return r&&(d=vi(r)?r.checked?"true":"false":r.value),r=d,r!==c?(i.setValue(r),!0):!1}function hr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ea=/[\n"\\]/g;function zn(r){return r.replace(Ea,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function yo(r,i,c,d,x,b,T,C){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+fn(i)):r.value!==""+fn(i)&&(r.value=""+fn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Hl(r,T,fn(i)):c!=null?Hl(r,T,fn(c)):d!=null&&r.removeAttribute("value"),x==null&&b!=null&&(r.defaultChecked=!!b),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+fn(C):r.removeAttribute("name")}function Ru(r,i,c,d,x,b,T,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),i!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){yt(r);return}c=c!=null?""+fn(c):"",i=i!=null?""+fn(i):c,C||i===r.value||(r.value=i),r.defaultValue=i}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=C?r.checked:!!d,r.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),yt(r)}function Hl(r,i,c){i==="number"&&hr(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function bi(r,i,c,d){if(r=r.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=i.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&d&&(r[c].defaultSelected=!0)}else{for(c=""+fn(c),i=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,d&&(r[x].defaultSelected=!0);return}i!==null||r[x].disabled||(i=r[x])}i!==null&&(i.selected=!0)}}function ku(r,i,c){if(i!=null&&(i=""+fn(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+fn(c):""}function _i(r,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(s(92));if(Ke(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=fn(i),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d),yt(r)}function Fn(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var Mu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(r,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,c):typeof c!="number"||c===0||Mu.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function $l(r,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var x in i)d=i[x],i.hasOwnProperty(x)&&c[x]!==d&&Bl(r,x,d)}else for(var b in i)i.hasOwnProperty(b)&&Bl(r,b,i[b])}function xo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(r){return wi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Vs(){}var Kl=null;function ps(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ei=null,fr=null;function Ta(r){var i=ms(r);if(i&&(r=i.stateNode)){var c=r[hn]||null;e:switch(r=i.stateNode,i.type){case"input":if(yo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+zn(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==r&&d.form===r.form){var x=d[hn]||null;if(!x)throw Error(s(90));yo(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===r.form&&wa(d)}break e;case"textarea":ku(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&bi(r,!!c.multiple,i,!1)}}}var bo=!1;function Ti(r,i,c){if(bo)return r(i,c);bo=!0;try{var d=r(i);return d}finally{if(bo=!1,(Ei!==null||fr!==null)&&(Sd(),Ei&&(i=Ei,r=fr,fr=Ei=null,Ta(i),r)))for(i=0;i<r.length;i++)Ta(r[i])}}function Us(r,i){var c=r.stateNode;if(c===null)return null;var d=c[hn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(gs)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Na=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Na=!1}var mr=null,Yl=null,Sa=null;function Ql(){if(Sa)return Sa;var r,i=Yl,c=i.length,d,x="value"in mr?mr.value:mr.textContent,b=x.length;for(r=0;r<c&&i[r]===x[r];r++);var T=c-r;for(d=1;d<=T&&i[c-d]===x[b-d];d++);return Sa=x.slice(r,1<d?1-d:void 0)}function Aa(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function jr(){return!0}function Os(){return!1}function xn(r){function i(c,d,x,b,T){this._reactName=c,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(c=r[C],this[C]=c?c(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?jr:Os,this.isPropagationStopped=Os,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),i}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=xn(Lr),Ni=_({},Lr,{view:0,detail:0}),Jl=xn(Ni),Si,_o,gr,wo=_({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ai,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gr&&(gr&&r.type==="mousemove"?(Si=r.screenX-gr.screenX,_o=r.screenY-gr.screenY):_o=Si=0,gr=r),Si)},movementY:function(r){return"movementY"in r?r.movementY:_o}}),Xl=xn(wo),Ca=_({},wo,{dataTransfer:0}),Pu=xn(Ca),ju=_({},Ni,{relatedTarget:0}),Ia=xn(ju),Wl=_({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=xn(Wl),Eo=_({},Lr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Vu=xn(Eo),Uu=_({},Lr,{data:0}),yr=xn(Uu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=zu[r])?!!i[r]:!1}function Ai(){return Fu}var Dn=_({},Ni,{key:function(r){if(r.key){var i=Ou[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Aa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ai,charCode:function(r){return r.type==="keypress"?Aa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Aa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Gu=xn(Dn),Hu=_({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=xn(Hu),y=_({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ai}),w=xn(y),N=_({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=xn(N),$=_({},wo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),te=xn($),ye=_({},Lr,{newState:0,oldState:0}),Ge=xn(ye),Bt=[9,13,27,32],ft=gs&&"CompositionEvent"in window,Dt=null;gs&&"documentMode"in document&&(Dt=document.documentMode);var ys=gs&&"TextEvent"in window&&!Dt,xr=gs&&(!ft||Dt&&8<Dt&&11>=Dt),qs=" ",zs=!1;function Ra(r,i){switch(r){case"keyup":return Bt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function To(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var No=!1;function F2(r,i){switch(r){case"compositionend":return To(i);case"keypress":return i.which!==32?null:(zs=!0,qs);case"textInput":return r=i.data,r===qs&&zs?null:r;default:return null}}function G2(r,i){if(No)return r==="compositionend"||!ft&&Ra(r,i)?(r=Ql(),Sa=Yl=mr=null,No=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xr&&i.locale!=="ko"?null:i.data;default:return null}}var H2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!H2[r.type]:i==="textarea"}function cy(r,i,c,d){Ei?fr?fr.push(d):fr=[d]:Ei=d,i=Dd(i,"onChange"),0<i.length&&(c=new pr("onChange","change",null,c,d),r.push({event:c,listeners:i}))}var Zl=null,ec=null;function B2(r){Bv(r,0)}function Bu(r){var i=ns(r);if(wa(i))return r}function uy(r,i){if(r==="change")return i}var dy=!1;if(gs){var If;if(gs){var Rf="oninput"in document;if(!Rf){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),Rf=typeof hy.oninput=="function"}If=Rf}else If=!1;dy=If&&(!document.documentMode||9<document.documentMode)}function fy(){Zl&&(Zl.detachEvent("onpropertychange",my),ec=Zl=null)}function my(r){if(r.propertyName==="value"&&Bu(ec)){var i=[];cy(i,ec,r,ps(r)),Ti(B2,i)}}function $2(r,i,c){r==="focusin"?(fy(),Zl=i,ec=c,Zl.attachEvent("onpropertychange",my)):r==="focusout"&&fy()}function K2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bu(ec)}function Y2(r,i){if(r==="click")return Bu(i)}function Q2(r,i){if(r==="input"||r==="change")return Bu(i)}function J2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var rs=typeof Object.is=="function"?Object.is:J2;function tc(r,i){if(rs(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var x=c[d];if(!kt.call(i,x)||!rs(r[x],i[x]))return!1}return!0}function py(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gy(r,i){var c=py(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=i&&d>=i)return{node:c,offset:i-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=py(c)}}function yy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?yy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function xy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=hr(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=hr(r.document)}return i}function kf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var X2=gs&&"documentMode"in document&&11>=document.documentMode,So=null,Mf=null,nc=null,Df=!1;function vy(r,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Df||So==null||So!==hr(d)||(d=So,"selectionStart"in d&&kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),nc&&tc(nc,d)||(nc=d,d=Dd(Mf,"onSelect"),0<d.length&&(i=new pr("onSelect","select",null,i,c),r.push({event:i,listeners:d}),i.target=So)))}function ka(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var Ao={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},Pf={},by={};gs&&(by=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Ma(r){if(Pf[r])return Pf[r];if(!Ao[r])return r;var i=Ao[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in by)return Pf[r]=i[c];return r}var _y=Ma("animationend"),wy=Ma("animationiteration"),Ey=Ma("animationstart"),W2=Ma("transitionrun"),Z2=Ma("transitionstart"),eS=Ma("transitioncancel"),Ty=Ma("transitionend"),Ny=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function Fs(r,i){Ny.set(r,i),ur(i,[r])}var $u=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},xs=[],Co=0,Lf=0;function Ku(){for(var r=Co,i=Lf=Co=0;i<r;){var c=xs[i];xs[i++]=null;var d=xs[i];xs[i++]=null;var x=xs[i];xs[i++]=null;var b=xs[i];if(xs[i++]=null,d!==null&&x!==null){var T=d.pending;T===null?x.next=x:(x.next=T.next,T.next=x),d.pending=x}b!==0&&Sy(c,x,b)}}function Yu(r,i,c,d){xs[Co++]=r,xs[Co++]=i,xs[Co++]=c,xs[Co++]=d,Lf|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Vf(r,i,c,d){return Yu(r,i,c,d),Qu(r)}function Da(r,i){return Yu(r,null,null,i),Qu(r)}function Sy(r,i,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var x=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(x=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,x&&i!==null&&(x=31-Ce(c),r=b.hiddenUpdates,d=r[x],d===null?r[x]=[i]:d.push(i),i.lane=c|536870912),b):null}function Qu(r){if(50<Tc)throw Tc=0,$m=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Io={};function tS(r,i,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(r,i,c,d){return new tS(r,i,c,d)}function Uf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ur(r,i){var c=r.alternate;return c===null?(c=is(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Ay(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Ju(r,i,c,d,x,b){var T=0;if(d=r,typeof r=="function")Uf(r)&&(T=1);else if(typeof r=="string")T=aA(r,c,re.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=is(31,c,i,x),r.elementType=R,r.lanes=b,r;case G:return Pa(c.children,x,b,i);case F:T=8,x|=24;break;case ee:return r=is(12,c,i,x|2),r.elementType=ee,r.lanes=b,r;case Z:return r=is(13,c,i,x),r.elementType=Z,r.lanes=b,r;case z:return r=is(19,c,i,x),r.elementType=z,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:T=10;break e;case ne:T=9;break e;case ae:T=11;break e;case I:T=14;break e;case A:T=16,d=null;break e}T=29,c=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=is(T,c,i,x),i.elementType=r,i.type=d,i.lanes=b,i}function Pa(r,i,c,d){return r=is(7,r,d,i),r.lanes=c,r}function Of(r,i,c){return r=is(6,r,null,i),r.lanes=c,r}function Cy(r){var i=is(18,null,null,0);return i.stateNode=r,i}function qf(r,i,c){return i=is(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Iy=new WeakMap;function vs(r,i){if(typeof r=="object"&&r!==null){var c=Iy.get(r);return c!==void 0?c:(i={value:r,source:i,stack:tr(i)},Iy.set(r,i),i)}return{value:r,source:i,stack:tr(i)}}var Ro=[],ko=0,Xu=null,sc=0,bs=[],_s=0,Ci=null,vr=1,br="";function Or(r,i){Ro[ko++]=sc,Ro[ko++]=Xu,Xu=r,sc=i}function Ry(r,i,c){bs[_s++]=vr,bs[_s++]=br,bs[_s++]=Ci,Ci=r;var d=vr;r=br;var x=32-Ce(d)-1;d&=~(1<<x),c+=1;var b=32-Ce(i)+x;if(30<b){var T=x-x%5;b=(d&(1<<T)-1).toString(32),d>>=T,x-=T,vr=1<<32-Ce(i)+x|c<<x|d,br=b+r}else vr=1<<b|c<<x|d,br=r}function zf(r){r.return!==null&&(Or(r,1),Ry(r,1,0))}function Ff(r){for(;r===Xu;)Xu=Ro[--ko],Ro[ko]=null,sc=Ro[--ko],Ro[ko]=null;for(;r===Ci;)Ci=bs[--_s],bs[_s]=null,br=bs[--_s],bs[_s]=null,vr=bs[--_s],bs[_s]=null}function ky(r,i){bs[_s++]=vr,bs[_s++]=br,bs[_s++]=Ci,vr=i.id,br=i.overflow,Ci=r}var vn=null,At=null,it=!1,Ii=null,ws=!1,Gf=Error(s(519));function Ri(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rc(vs(i,r)),Gf}function My(r){var i=r.stateNode,c=r.type,d=r.memoizedProps;switch(i[Jt]=r,i[hn]=d,c){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(c=0;c<Sc.length;c++)Je(Sc[c],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Je("invalid",i),Ru(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Je("invalid",i);break;case"textarea":Je("invalid",i),_i(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||Qv(i.textContent,c)?(d.popover!=null&&(Je("beforetoggle",i),Je("toggle",i)),d.onScroll!=null&&Je("scroll",i),d.onScrollEnd!=null&&Je("scrollend",i),d.onClick!=null&&(i.onclick=Vs),i=!0):i=!1,i||Ri(r,!0)}function Dy(r){for(vn=r.return;vn;)switch(vn.tag){case 5:case 31:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:vn=vn.return}}function Mo(r){if(r!==vn)return!1;if(!it)return Dy(r),it=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||op(r.type,r.memoizedProps)),c=!c),c&&At&&Ri(r),Dy(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));At=rb(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));At=rb(r)}else i===27?(i=At,Hi(r.type)?(r=hp,hp=null,At=r):At=i):At=vn?Ts(r.stateNode.nextSibling):null;return!0}function ja(){At=vn=null,it=!1}function Hf(){var r=Ii;return r!==null&&($n===null?$n=r:$n.push.apply($n,r),Ii=null),r}function rc(r){Ii===null?Ii=[r]:Ii.push(r)}var Bf=O(null),La=null,qr=null;function ki(r,i,c){V(Bf,i._currentValue),i._currentValue=c}function zr(r){r._currentValue=Bf.current,J(Bf)}function $f(r,i,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===c)break;r=r.return}}function Kf(r,i,c,d){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var b=x.dependencies;if(b!==null){var T=x.child;b=b.firstContext;e:for(;b!==null;){var C=b;b=x;for(var L=0;L<i.length;L++)if(C.context===i[L]){b.lanes|=c,C=b.alternate,C!==null&&(C.lanes|=c),$f(b.return,c,r),d||(T=null);break e}b=C.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(s(341));T.lanes|=c,b=T.alternate,b!==null&&(b.lanes|=c),$f(T,c,r),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===r){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function Do(r,i,c,d){r=null;for(var x=i,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=x.type;rs(x.pendingProps.value,T.value)||(r!==null?r.push(C):r=[C])}}else if(x===Ie.current){if(T=x.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(kc):r=[kc])}x=x.return}r!==null&&Kf(i,r,c,d),i.flags|=262144}function Wu(r){for(r=r.firstContext;r!==null;){if(!rs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Va(r){La=r,qr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function bn(r){return Py(La,r)}function Zu(r,i){return La===null&&Va(r),Py(r,i)}function Py(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},qr===null){if(r===null)throw Error(s(308));qr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else qr=qr.next=i;return c}var nS=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},sS=n.unstable_scheduleCallback,rS=n.unstable_NormalPriority,Zt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new nS,data:new Map,refCount:0}}function ic(r){r.refCount--,r.refCount===0&&sS(rS,function(){r.controller.abort()})}var ac=null,Qf=0,Po=0,jo=null;function iS(r,i){if(ac===null){var c=ac=[];Qf=0,Po=Wm(),jo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Qf++,i.then(jy,jy),i}function jy(){if(--Qf===0&&ac!==null){jo!==null&&(jo.status="fulfilled");var r=ac;ac=null,Po=0,jo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function aS(r,i){var c=[],d={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var x=0;x<c.length;x++)(0,c[x])(i)},function(x){for(d.status="rejected",d.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),d}var Ly=X.S;X.S=function(r,i){vv=qt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&iS(r,i),Ly!==null&&Ly(r,i)};var Ua=O(null);function Jf(){var r=Ua.current;return r!==null?r:Tt.pooledCache}function ed(r,i){i===null?V(Ua,Ua.current):V(Ua,i.pool)}function Vy(){var r=Jf();return r===null?null:{parent:Zt._currentValue,pool:r}}var Lo=Error(s(460)),Xf=Error(s(474)),td=Error(s(542)),nd={then:function(){}};function Uy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Oy(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(Vs,Vs),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,zy(r),r;default:if(typeof i.status=="string")i.then(Vs,Vs);else{if(r=Tt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var x=i;x.status="fulfilled",x.value=d}},function(d){if(i.status==="pending"){var x=i;x.status="rejected",x.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,zy(r),r}throw qa=i,Lo}}function Oa(r){try{var i=r._init;return i(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(qa=c,Lo):c}}var qa=null;function qy(){if(qa===null)throw Error(s(459));var r=qa;return qa=null,r}function zy(r){if(r===Lo||r===td)throw Error(s(483))}var Vo=null,oc=0;function sd(r){var i=oc;return oc+=1,Vo===null&&(Vo=[]),Oy(Vo,r,i)}function lc(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function rd(r,i){throw i.$$typeof===E?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Fy(r){function i(B,q){if(r){var Y=B.deletions;Y===null?(B.deletions=[q],B.flags|=16):Y.push(q)}}function c(B,q){if(!r)return null;for(;q!==null;)i(B,q),q=q.sibling;return null}function d(B){for(var q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function x(B,q){return B=Ur(B,q),B.index=0,B.sibling=null,B}function b(B,q,Y){return B.index=Y,r?(Y=B.alternate,Y!==null?(Y=Y.index,Y<q?(B.flags|=67108866,q):Y):(B.flags|=67108866,q)):(B.flags|=1048576,q)}function T(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function C(B,q,Y,le){return q===null||q.tag!==6?(q=Of(Y,B.mode,le),q.return=B,q):(q=x(q,Y),q.return=B,q)}function L(B,q,Y,le){var Re=Y.type;return Re===G?oe(B,q,Y.props.children,le,Y.key):q!==null&&(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Oa(Re)===q.type)?(q=x(q,Y.props),lc(q,Y),q.return=B,q):(q=Ju(Y.type,Y.key,Y.props,null,B.mode,le),lc(q,Y),q.return=B,q)}function Q(B,q,Y,le){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=qf(Y,B.mode,le),q.return=B,q):(q=x(q,Y.children||[]),q.return=B,q)}function oe(B,q,Y,le,Re){return q===null||q.tag!==7?(q=Pa(Y,B.mode,le,Re),q.return=B,q):(q=x(q,Y),q.return=B,q)}function ue(B,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Of(""+q,B.mode,Y),q.return=B,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Y=Ju(q.type,q.key,q.props,null,B.mode,Y),lc(Y,q),Y.return=B,Y;case D:return q=qf(q,B.mode,Y),q.return=B,q;case A:return q=Oa(q),ue(B,q,Y)}if(Ke(q)||U(q))return q=Pa(q,B.mode,Y,null),q.return=B,q;if(typeof q.then=="function")return ue(B,sd(q),Y);if(q.$$typeof===K)return ue(B,Zu(B,q),Y);rd(B,q)}return null}function W(B,q,Y,le){var Re=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:C(B,q,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===Re?L(B,q,Y,le):null;case D:return Y.key===Re?Q(B,q,Y,le):null;case A:return Y=Oa(Y),W(B,q,Y,le)}if(Ke(Y)||U(Y))return Re!==null?null:oe(B,q,Y,le,null);if(typeof Y.then=="function")return W(B,q,sd(Y),le);if(Y.$$typeof===K)return W(B,q,Zu(B,Y),le);rd(B,Y)}return null}function se(B,q,Y,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return B=B.get(Y)||null,C(q,B,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case S:return B=B.get(le.key===null?Y:le.key)||null,L(q,B,le,Re);case D:return B=B.get(le.key===null?Y:le.key)||null,Q(q,B,le,Re);case A:return le=Oa(le),se(B,q,Y,le,Re)}if(Ke(le)||U(le))return B=B.get(Y)||null,oe(q,B,le,Re,null);if(typeof le.then=="function")return se(B,q,Y,sd(le),Re);if(le.$$typeof===K)return se(B,q,Y,Zu(q,le),Re);rd(q,le)}return null}function Ee(B,q,Y,le){for(var Re=null,ct=null,Ne=q,Be=q=0,tt=null;Ne!==null&&Be<Y.length;Be++){Ne.index>Be?(tt=Ne,Ne=null):tt=Ne.sibling;var ut=W(B,Ne,Y[Be],le);if(ut===null){Ne===null&&(Ne=tt);break}r&&Ne&&ut.alternate===null&&i(B,Ne),q=b(ut,q,Be),ct===null?Re=ut:ct.sibling=ut,ct=ut,Ne=tt}if(Be===Y.length)return c(B,Ne),it&&Or(B,Be),Re;if(Ne===null){for(;Be<Y.length;Be++)Ne=ue(B,Y[Be],le),Ne!==null&&(q=b(Ne,q,Be),ct===null?Re=Ne:ct.sibling=Ne,ct=Ne);return it&&Or(B,Be),Re}for(Ne=d(Ne);Be<Y.length;Be++)tt=se(Ne,B,Be,Y[Be],le),tt!==null&&(r&&tt.alternate!==null&&Ne.delete(tt.key===null?Be:tt.key),q=b(tt,q,Be),ct===null?Re=tt:ct.sibling=tt,ct=tt);return r&&Ne.forEach(function(Qi){return i(B,Qi)}),it&&Or(B,Be),Re}function Me(B,q,Y,le){if(Y==null)throw Error(s(151));for(var Re=null,ct=null,Ne=q,Be=q=0,tt=null,ut=Y.next();Ne!==null&&!ut.done;Be++,ut=Y.next()){Ne.index>Be?(tt=Ne,Ne=null):tt=Ne.sibling;var Qi=W(B,Ne,ut.value,le);if(Qi===null){Ne===null&&(Ne=tt);break}r&&Ne&&Qi.alternate===null&&i(B,Ne),q=b(Qi,q,Be),ct===null?Re=Qi:ct.sibling=Qi,ct=Qi,Ne=tt}if(ut.done)return c(B,Ne),it&&Or(B,Be),Re;if(Ne===null){for(;!ut.done;Be++,ut=Y.next())ut=ue(B,ut.value,le),ut!==null&&(q=b(ut,q,Be),ct===null?Re=ut:ct.sibling=ut,ct=ut);return it&&Or(B,Be),Re}for(Ne=d(Ne);!ut.done;Be++,ut=Y.next())ut=se(Ne,B,Be,ut.value,le),ut!==null&&(r&&ut.alternate!==null&&Ne.delete(ut.key===null?Be:ut.key),q=b(ut,q,Be),ct===null?Re=ut:ct.sibling=ut,ct=ut);return r&&Ne.forEach(function(yA){return i(B,yA)}),it&&Or(B,Be),Re}function Et(B,q,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===G&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var Re=Y.key;q!==null;){if(q.key===Re){if(Re=Y.type,Re===G){if(q.tag===7){c(B,q.sibling),le=x(q,Y.props.children),le.return=B,B=le;break e}}else if(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Oa(Re)===q.type){c(B,q.sibling),le=x(q,Y.props),lc(le,Y),le.return=B,B=le;break e}c(B,q);break}else i(B,q);q=q.sibling}Y.type===G?(le=Pa(Y.props.children,B.mode,le,Y.key),le.return=B,B=le):(le=Ju(Y.type,Y.key,Y.props,null,B.mode,le),lc(le,Y),le.return=B,B=le)}return T(B);case D:e:{for(Re=Y.key;q!==null;){if(q.key===Re)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){c(B,q.sibling),le=x(q,Y.children||[]),le.return=B,B=le;break e}else{c(B,q);break}else i(B,q);q=q.sibling}le=qf(Y,B.mode,le),le.return=B,B=le}return T(B);case A:return Y=Oa(Y),Et(B,q,Y,le)}if(Ke(Y))return Ee(B,q,Y,le);if(U(Y)){if(Re=U(Y),typeof Re!="function")throw Error(s(150));return Y=Re.call(Y),Me(B,q,Y,le)}if(typeof Y.then=="function")return Et(B,q,sd(Y),le);if(Y.$$typeof===K)return Et(B,q,Zu(B,Y),le);rd(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(c(B,q.sibling),le=x(q,Y),le.return=B,B=le):(c(B,q),le=Of(Y,B.mode,le),le.return=B,B=le),T(B)):c(B,q)}return function(B,q,Y,le){try{oc=0;var Re=Et(B,q,Y,le);return Vo=null,Re}catch(Ne){if(Ne===Lo||Ne===td)throw Ne;var ct=is(29,Ne,null,B.mode);return ct.lanes=le,ct.return=B,ct}finally{}}}var za=Fy(!0),Gy=Fy(!1),Mi=!1;function Wf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Di(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pi(r,i,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(mt&2)!==0){var x=d.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),d.pending=i,i=Qu(r),Sy(r,null,c),i}return Yu(r,d,i,c),Qu(r)}function cc(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Ps(r,c)}}function em(r,i){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var x=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?x=b=T:b=b.next=T,c=c.next}while(c!==null);b===null?x=b=i:b=b.next=i}else x=b=i;c={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var tm=!1;function uc(){if(tm){var r=jo;if(r!==null)throw r}}function dc(r,i,c,d){tm=!1;var x=r.updateQueue;Mi=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,C=x.shared.pending;if(C!==null){x.shared.pending=null;var L=C,Q=L.next;L.next=null,T===null?b=Q:T.next=Q,T=L;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==T&&(C===null?oe.firstBaseUpdate=Q:C.next=Q,oe.lastBaseUpdate=L))}if(b!==null){var ue=x.baseState;T=0,oe=Q=L=null,C=b;do{var W=C.lane&-536870913,se=W!==C.lane;if(se?(et&W)===W:(d&W)===W){W!==0&&W===Po&&(tm=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ee=r,Me=C;W=i;var Et=c;switch(Me.tag){case 1:if(Ee=Me.payload,typeof Ee=="function"){ue=Ee.call(Et,ue,W);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Me.payload,W=typeof Ee=="function"?Ee.call(Et,ue,W):Ee,W==null)break e;ue=_({},ue,W);break e;case 2:Mi=!0}}W=C.callback,W!==null&&(r.flags|=64,se&&(r.flags|=8192),se=x.callbacks,se===null?x.callbacks=[W]:se.push(W))}else se={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(Q=oe=se,L=ue):oe=oe.next=se,T|=W;if(C=C.next,C===null){if(C=x.shared.pending,C===null)break;se=C,C=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);oe===null&&(L=ue),x.baseState=L,x.firstBaseUpdate=Q,x.lastBaseUpdate=oe,b===null&&(x.shared.lanes=0),Oi|=T,r.lanes=T,r.memoizedState=ue}}function Hy(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function By(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Hy(c[r],i)}var Uo=O(null),id=O(0);function $y(r,i){r=Jr,V(id,r),V(Uo,i),Jr=r|i.baseLanes}function nm(){V(id,Jr),V(Uo,Uo.current)}function sm(){Jr=id.current,J(Uo),J(id)}var as=O(null),Es=null;function ji(r){var i=r.alternate;V($t,$t.current&1),V(as,r),Es===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(Es=r)}function rm(r){V($t,$t.current),V(as,r),Es===null&&(Es=r)}function Ky(r){r.tag===22?(V($t,$t.current),V(as,r),Es===null&&(Es=r)):Li()}function Li(){V($t,$t.current),V(as,as.current)}function os(r){J(as),Es===r&&(Es=null),J($t)}var $t=O(0);function ad(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||up(c)||dp(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Fr=0,He=null,_t=null,en=null,od=!1,Oo=!1,Fa=!1,ld=0,hc=0,qo=null,oS=0;function zt(){throw Error(s(321))}function im(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!rs(r[c],i[c]))return!1;return!0}function am(r,i,c,d,x,b){return Fr=b,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=r===null||r.memoizedState===null?Rx:_m,Fa=!1,b=c(d,x),Fa=!1,Oo&&(b=Qy(i,c,d,x)),Yy(r),b}function Yy(r){X.H=pc;var i=_t!==null&&_t.next!==null;if(Fr=0,en=_t=He=null,od=!1,hc=0,qo=null,i)throw Error(s(300));r===null||tn||(r=r.dependencies,r!==null&&Wu(r)&&(tn=!0))}function Qy(r,i,c,d){He=r;var x=0;do{if(Oo&&(qo=null),hc=0,Oo=!1,25<=x)throw Error(s(301));if(x+=1,en=_t=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}X.H=kx,b=i(c,d)}while(Oo);return b}function lS(){var r=X.H,i=r.useState()[0];return i=typeof i.then=="function"?fc(i):i,r=r.useState()[0],(_t!==null?_t.memoizedState:null)!==r&&(He.flags|=1024),i}function om(){var r=ld!==0;return ld=0,r}function lm(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function cm(r){if(od){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}Fr=0,en=_t=He=null,Oo=!1,hc=ld=0,qo=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=r:en=en.next=r,en}function Kt(){if(_t===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var i=en===null?He.memoizedState:en.next;if(i!==null)en=i,_t=r;else{if(r===null)throw He.alternate===null?Error(s(467)):Error(s(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},en===null?He.memoizedState=en=r:en=en.next=r}return en}function cd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(r){var i=hc;return hc+=1,qo===null&&(qo=[]),r=Oy(qo,r,i),i=He,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Rx:_m),r}function ud(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return fc(r);if(r.$$typeof===K)return bn(r)}throw Error(s(438,String(r)))}function um(r){var i=null,c=He.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(x){return x.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=cd(),He.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),d=0;d<r;d++)c[d]=P;return i.index++,c}function Gr(r,i){return typeof i=="function"?i(r):i}function dd(r){var i=Kt();return dm(i,_t,r)}function dm(r,i,c){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var x=r.baseQueue,b=d.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}i.baseQueue=x=b,d.pending=null}if(b=r.baseState,x===null)r.memoizedState=b;else{i=x.next;var C=T=null,L=null,Q=i,oe=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(et&ue)===ue:(Fr&ue)===ue){var W=Q.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===Po&&(oe=!0);else if((Fr&W)===W){Q=Q.next,W===Po&&(oe=!0);continue}else ue={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(C=L=ue,T=b):L=L.next=ue,He.lanes|=W,Oi|=W;ue=Q.action,Fa&&c(b,ue),b=Q.hasEagerState?Q.eagerState:c(b,ue)}else W={lane:ue,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(C=L=W,T=b):L=L.next=W,He.lanes|=ue,Oi|=ue;Q=Q.next}while(Q!==null&&Q!==i);if(L===null?T=b:L.next=C,!rs(b,r.memoizedState)&&(tn=!0,oe&&(c=jo,c!==null)))throw c;r.memoizedState=b,r.baseState=T,r.baseQueue=L,d.lastRenderedState=b}return x===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function hm(r){var i=Kt(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var d=c.dispatch,x=c.pending,b=i.memoizedState;if(x!==null){c.pending=null;var T=x=x.next;do b=r(b,T.action),T=T.next;while(T!==x);rs(b,i.memoizedState)||(tn=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),c.lastRenderedState=b}return[b,d]}function Jy(r,i,c){var d=He,x=Kt(),b=it;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=i();var T=!rs((_t||x).memoizedState,c);if(T&&(x.memoizedState=c,tn=!0),x=x.queue,pm(Zy.bind(null,d,x,r),[r]),x.getSnapshot!==i||T||en!==null&&en.memoizedState.tag&1){if(d.flags|=2048,zo(9,{destroy:void 0},Wy.bind(null,d,x,c,i),null),Tt===null)throw Error(s(349));b||(Fr&127)!==0||Xy(d,i,c)}return c}function Xy(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=He.updateQueue,i===null?(i=cd(),He.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Wy(r,i,c,d){i.value=c,i.getSnapshot=d,ex(i)&&tx(r)}function Zy(r,i,c){return c(function(){ex(i)&&tx(r)})}function ex(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!rs(r,c)}catch{return!0}}function tx(r){var i=Da(r,2);i!==null&&Kn(i,r,2)}function fm(r){var i=Pn();if(typeof r=="function"){var c=r;if(r=c(),Fa){ge(!0);try{c()}finally{ge(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:r},i}function nx(r,i,c,d){return r.baseState=c,dm(r,_t,typeof d=="function"?d:Gr)}function cS(r,i,c,d,x){if(md(r))throw Error(s(485));if(r=i.action,r!==null){var b={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};X.T!==null?c(!0):b.isTransition=!1,d(b),c=i.pending,c===null?(b.next=i.pending=b,sx(i,b)):(b.next=c.next,i.pending=c.next=b)}}function sx(r,i){var c=i.action,d=i.payload,x=r.state;if(i.isTransition){var b=X.T,T={};X.T=T;try{var C=c(x,d),L=X.S;L!==null&&L(T,C),rx(r,i,C)}catch(Q){mm(r,i,Q)}finally{b!==null&&T.types!==null&&(b.types=T.types),X.T=b}}else try{b=c(x,d),rx(r,i,b)}catch(Q){mm(r,i,Q)}}function rx(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){ix(r,i,d)},function(d){return mm(r,i,d)}):ix(r,i,c)}function ix(r,i,c){i.status="fulfilled",i.value=c,ax(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,sx(r,c)))}function mm(r,i,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,ax(i),i=i.next;while(i!==d)}r.action=null}function ax(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function ox(r,i){return i}function lx(r,i){if(it){var c=Tt.formState;if(c!==null){e:{var d=He;if(it){if(At){t:{for(var x=At,b=ws;x.nodeType!==8;){if(!b){x=null;break t}if(x=Ts(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){At=Ts(x.nextSibling),d=x.data==="F!";break e}}Ri(d)}d=!1}d&&(i=c[0])}}return c=Pn(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ox,lastRenderedState:i},c.queue=d,c=Ax.bind(null,He,d),d.dispatch=c,d=fm(!1),b=bm.bind(null,He,!1,d.queue),d=Pn(),x={state:i,dispatch:null,action:r,pending:null},d.queue=x,c=cS.bind(null,He,x,b,c),x.dispatch=c,d.memoizedState=r,[i,c,!1]}function cx(r){var i=Kt();return ux(i,_t,r)}function ux(r,i,c){if(i=dm(r,i,ox)[0],r=dd(Gr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=fc(i)}catch(T){throw T===Lo?td:T}else d=i;i=Kt();var x=i.queue,b=x.dispatch;return c!==i.memoizedState&&(He.flags|=2048,zo(9,{destroy:void 0},uS.bind(null,x,c),null)),[d,b,r]}function uS(r,i){r.action=i}function dx(r){var i=Kt(),c=_t;if(c!==null)return ux(i,c,r);Kt(),i=i.memoizedState,c=Kt();var d=c.queue.dispatch;return c.memoizedState=r,[i,d,!1]}function zo(r,i,c,d){return r={tag:r,create:c,deps:d,inst:i,next:null},i=He.updateQueue,i===null&&(i=cd(),He.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,i.lastEffect=r),r}function hx(){return Kt().memoizedState}function hd(r,i,c,d){var x=Pn();He.flags|=r,x.memoizedState=zo(1|i,{destroy:void 0},c,d===void 0?null:d)}function fd(r,i,c,d){var x=Kt();d=d===void 0?null:d;var b=x.memoizedState.inst;_t!==null&&d!==null&&im(d,_t.memoizedState.deps)?x.memoizedState=zo(i,b,c,d):(He.flags|=r,x.memoizedState=zo(1|i,b,c,d))}function fx(r,i){hd(8390656,8,r,i)}function pm(r,i){fd(2048,8,r,i)}function dS(r){He.flags|=4;var i=He.updateQueue;if(i===null)i=cd(),He.updateQueue=i,i.events=[r];else{var c=i.events;c===null?i.events=[r]:c.push(r)}}function mx(r){var i=Kt().memoizedState;return dS({ref:i,nextImpl:r}),function(){if((mt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function px(r,i){return fd(4,2,r,i)}function gx(r,i){return fd(4,4,r,i)}function yx(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function xx(r,i,c){c=c!=null?c.concat([r]):null,fd(4,4,yx.bind(null,i,r),c)}function gm(){}function vx(r,i){var c=Kt();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&im(i,d[1])?d[0]:(c.memoizedState=[r,i],r)}function bx(r,i){var c=Kt();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&im(i,d[1]))return d[0];if(d=r(),Fa){ge(!0);try{r()}finally{ge(!1)}}return c.memoizedState=[d,i],d}function ym(r,i,c){return c===void 0||(Fr&1073741824)!==0&&(et&261930)===0?r.memoizedState=i:(r.memoizedState=c,r=_v(),He.lanes|=r,Oi|=r,c)}function _x(r,i,c,d){return rs(c,i)?c:Uo.current!==null?(r=ym(r,c,d),rs(r,i)||(tn=!0),r):(Fr&42)===0||(Fr&1073741824)!==0&&(et&261930)===0?(tn=!0,r.memoizedState=c):(r=_v(),He.lanes|=r,Oi|=r,i)}function wx(r,i,c,d,x){var b=fe.p;fe.p=b!==0&&8>b?b:8;var T=X.T,C={};X.T=C,bm(r,!1,i,c);try{var L=x(),Q=X.S;if(Q!==null&&Q(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=aS(L,d);mc(r,i,oe,us(r))}else mc(r,i,d,us(r))}catch(ue){mc(r,i,{then:function(){},status:"rejected",reason:ue},us())}finally{fe.p=b,T!==null&&C.types!==null&&(T.types=C.types),X.T=T}}function hS(){}function xm(r,i,c,d){if(r.tag!==5)throw Error(s(476));var x=Ex(r).queue;wx(r,x,i,Te,c===null?hS:function(){return Tx(r),c(d)})}function Ex(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:Te},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Tx(r){var i=Ex(r);i.next===null&&(i=r.alternate.memoizedState),mc(r,i.next.queue,{},us())}function vm(){return bn(kc)}function Nx(){return Kt().memoizedState}function Sx(){return Kt().memoizedState}function fS(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=us();r=Di(c);var d=Pi(i,r,c);d!==null&&(Kn(d,i,c),cc(d,i,c)),i={cache:Yf()},r.payload=i;return}i=i.return}}function mS(r,i,c){var d=us();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},md(r)?Cx(i,c):(c=Vf(r,i,c,d),c!==null&&(Kn(c,r,d),Ix(c,i,d)))}function Ax(r,i,c){var d=us();mc(r,i,c,d)}function mc(r,i,c,d){var x={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(md(r))Cx(i,x);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var T=i.lastRenderedState,C=b(T,c);if(x.hasEagerState=!0,x.eagerState=C,rs(C,T))return Yu(r,i,x,0),Tt===null&&Ku(),!1}catch{}finally{}if(c=Vf(r,i,x,d),c!==null)return Kn(c,r,d),Ix(c,i,d),!0}return!1}function bm(r,i,c,d){if(d={lane:2,revertLane:Wm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},md(r)){if(i)throw Error(s(479))}else i=Vf(r,c,d,2),i!==null&&Kn(i,r,2)}function md(r){var i=r.alternate;return r===He||i!==null&&i===He}function Cx(r,i){Oo=od=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function Ix(r,i,c){if((c&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Ps(r,c)}}var pc={readContext:bn,use:ud,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};pc.useEffectEvent=zt;var Rx={readContext:bn,use:ud,useCallback:function(r,i){return Pn().memoizedState=[r,i===void 0?null:i],r},useContext:bn,useEffect:fx,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,hd(4194308,4,yx.bind(null,i,r),c)},useLayoutEffect:function(r,i){return hd(4194308,4,r,i)},useInsertionEffect:function(r,i){hd(4,2,r,i)},useMemo:function(r,i){var c=Pn();i=i===void 0?null:i;var d=r();if(Fa){ge(!0);try{r()}finally{ge(!1)}}return c.memoizedState=[d,i],d},useReducer:function(r,i,c){var d=Pn();if(c!==void 0){var x=c(i);if(Fa){ge(!0);try{c(i)}finally{ge(!1)}}}else x=i;return d.memoizedState=d.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},d.queue=r,r=r.dispatch=mS.bind(null,He,r),[d.memoizedState,r]},useRef:function(r){var i=Pn();return r={current:r},i.memoizedState=r},useState:function(r){r=fm(r);var i=r.queue,c=Ax.bind(null,He,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:gm,useDeferredValue:function(r,i){var c=Pn();return ym(c,r,i)},useTransition:function(){var r=fm(!1);return r=wx.bind(null,He,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var d=He,x=Pn();if(it){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Tt===null)throw Error(s(349));(et&127)!==0||Xy(d,i,c)}x.memoizedState=c;var b={value:c,getSnapshot:i};return x.queue=b,fx(Zy.bind(null,d,b,r),[r]),d.flags|=2048,zo(9,{destroy:void 0},Wy.bind(null,d,b,c,i),null),c},useId:function(){var r=Pn(),i=Tt.identifierPrefix;if(it){var c=br,d=vr;c=(d&~(1<<32-Ce(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=ld++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=oS++,i="_"+i+"r_"+c.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:vm,useFormState:lx,useActionState:lx,useOptimistic:function(r){var i=Pn();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=bm.bind(null,He,!0,c),c.dispatch=i,[r,i]},useMemoCache:um,useCacheRefresh:function(){return Pn().memoizedState=fS.bind(null,He)},useEffectEvent:function(r){var i=Pn(),c={impl:r};return i.memoizedState=c,function(){if((mt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},_m={readContext:bn,use:ud,useCallback:vx,useContext:bn,useEffect:pm,useImperativeHandle:xx,useInsertionEffect:px,useLayoutEffect:gx,useMemo:bx,useReducer:dd,useRef:hx,useState:function(){return dd(Gr)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Kt();return _x(c,_t.memoizedState,r,i)},useTransition:function(){var r=dd(Gr)[0],i=Kt().memoizedState;return[typeof r=="boolean"?r:fc(r),i]},useSyncExternalStore:Jy,useId:Nx,useHostTransitionStatus:vm,useFormState:cx,useActionState:cx,useOptimistic:function(r,i){var c=Kt();return nx(c,_t,r,i)},useMemoCache:um,useCacheRefresh:Sx};_m.useEffectEvent=mx;var kx={readContext:bn,use:ud,useCallback:vx,useContext:bn,useEffect:pm,useImperativeHandle:xx,useInsertionEffect:px,useLayoutEffect:gx,useMemo:bx,useReducer:hm,useRef:hx,useState:function(){return hm(Gr)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Kt();return _t===null?ym(c,r,i):_x(c,_t.memoizedState,r,i)},useTransition:function(){var r=hm(Gr)[0],i=Kt().memoizedState;return[typeof r=="boolean"?r:fc(r),i]},useSyncExternalStore:Jy,useId:Nx,useHostTransitionStatus:vm,useFormState:dx,useActionState:dx,useOptimistic:function(r,i){var c=Kt();return _t!==null?nx(c,_t,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:um,useCacheRefresh:Sx};kx.useEffectEvent=mx;function wm(r,i,c,d){i=r.memoizedState,c=c(d,i),c=c==null?i:_({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Em={enqueueSetState:function(r,i,c){r=r._reactInternals;var d=us(),x=Di(d);x.payload=i,c!=null&&(x.callback=c),i=Pi(r,x,d),i!==null&&(Kn(i,r,d),cc(i,r,d))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var d=us(),x=Di(d);x.tag=1,x.payload=i,c!=null&&(x.callback=c),i=Pi(r,x,d),i!==null&&(Kn(i,r,d),cc(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=us(),d=Di(c);d.tag=2,i!=null&&(d.callback=i),i=Pi(r,d,c),i!==null&&(Kn(i,r,c),cc(i,r,c))}};function Mx(r,i,c,d,x,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,T):i.prototype&&i.prototype.isPureReactComponent?!tc(c,d)||!tc(x,b):!0}function Dx(r,i,c,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==r&&Em.enqueueReplaceState(i,i.state,null)}function Ga(r,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(r=r.defaultProps){c===i&&(c=_({},c));for(var x in r)c[x]===void 0&&(c[x]=r[x])}return c}function Px(r){$u(r)}function jx(r){console.error(r)}function Lx(r){$u(r)}function pd(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Vx(r,i,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Tm(r,i,c){return c=Di(c),c.tag=3,c.payload={element:null},c.callback=function(){pd(r,i)},c}function Ux(r){return r=Di(r),r.tag=3,r}function Ox(r,i,c,d){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;r.payload=function(){return x(b)},r.callback=function(){Vx(i,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){Vx(i,c,d),typeof x!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function pS(r,i,c,d,x){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Do(i,c,x,!0),c=as.current,c!==null){switch(c.tag){case 31:case 13:return Es===null?Ad():c.alternate===null&&Ft===0&&(Ft=3),c.flags&=-257,c.flags|=65536,c.lanes=x,d===nd?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),Qm(r,d,x)),!1;case 22:return c.flags|=65536,d===nd?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),Qm(r,d,x)),!1}throw Error(s(435,c.tag))}return Qm(r,d,x),Ad(),!1}if(it)return i=as.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=x,d!==Gf&&(r=Error(s(422),{cause:d}),rc(vs(r,c)))):(d!==Gf&&(i=Error(s(423),{cause:d}),rc(vs(i,c))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,d=vs(d,c),x=Tm(r.stateNode,d,x),em(r,x),Ft!==4&&(Ft=2)),!1;var b=Error(s(520),{cause:d});if(b=vs(b,c),Ec===null?Ec=[b]:Ec.push(b),Ft!==4&&(Ft=2),i===null)return!0;d=vs(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=x&-x,c.lanes|=r,r=Tm(c.stateNode,d,r),em(c,r),!1;case 1:if(i=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qi===null||!qi.has(b))))return c.flags|=65536,x&=-x,c.lanes|=x,x=Ux(x),Ox(x,r,c,d),em(c,x),!1}c=c.return}while(c!==null);return!1}var Nm=Error(s(461)),tn=!1;function _n(r,i,c,d){i.child=r===null?Gy(i,null,c,d):za(i,r.child,c,d)}function qx(r,i,c,d,x){c=c.render;var b=i.ref;if("ref"in d){var T={};for(var C in d)C!=="ref"&&(T[C]=d[C])}else T=d;return Va(i),d=am(r,i,c,T,b,x),C=om(),r!==null&&!tn?(lm(r,i,x),Hr(r,i,x)):(it&&C&&zf(i),i.flags|=1,_n(r,i,d,x),i.child)}function zx(r,i,c,d,x){if(r===null){var b=c.type;return typeof b=="function"&&!Uf(b)&&b.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=b,Fx(r,i,b,d,x)):(r=Ju(c.type,null,d,i,i.mode,x),r.ref=i.ref,r.return=i,i.child=r)}if(b=r.child,!Dm(r,x)){var T=b.memoizedProps;if(c=c.compare,c=c!==null?c:tc,c(T,d)&&r.ref===i.ref)return Hr(r,i,x)}return i.flags|=1,r=Ur(b,d),r.ref=i.ref,r.return=i,i.child=r}function Fx(r,i,c,d,x){if(r!==null){var b=r.memoizedProps;if(tc(b,d)&&r.ref===i.ref)if(tn=!1,i.pendingProps=d=b,Dm(r,x))(r.flags&131072)!==0&&(tn=!0);else return i.lanes=r.lanes,Hr(r,i,x)}return Sm(r,i,c,d,x)}function Gx(r,i,c,d){var x=d.children,b=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,r!==null){for(d=i.child=r.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,i.child=null;return Hx(r,i,b,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ed(i,b!==null?b.cachePool:null),b!==null?$y(i,b):nm(),Ky(i);else return d=i.lanes=536870912,Hx(r,i,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(ed(i,b.cachePool),$y(i,b),Li(),i.memoizedState=null):(r!==null&&ed(i,null),nm(),Li());return _n(r,i,x,c),i.child}function gc(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Hx(r,i,c,d,x){var b=Jf();return b=b===null?null:{parent:Zt._currentValue,pool:b},i.memoizedState={baseLanes:c,cachePool:b},r!==null&&ed(i,null),nm(),Ky(i),r!==null&&Do(r,i,d,!0),i.childLanes=x,null}function gd(r,i){return i=xd({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Bx(r,i,c){return za(i,r.child,null,c),r=gd(i,i.pendingProps),r.flags|=2,os(i),i.memoizedState=null,r}function gS(r,i,c){var d=i.pendingProps,x=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(it){if(d.mode==="hidden")return r=gd(i,d),i.lanes=536870912,gc(null,r);if(rm(i),(r=At)?(r=sb(r,ws),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ci!==null?{id:vr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},c=Cy(r),c.return=i,i.child=c,vn=i,At=null)):r=null,r===null)throw Ri(i);return i.lanes=536870912,null}return gd(i,d)}var b=r.memoizedState;if(b!==null){var T=b.dehydrated;if(rm(i),x)if(i.flags&256)i.flags&=-257,i=Bx(r,i,c);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(tn||Do(r,i,c,!1),x=(c&r.childLanes)!==0,tn||x){if(d=Tt,d!==null&&(T=_a(d,c),T!==0&&T!==b.retryLane))throw b.retryLane=T,Da(r,T),Kn(d,r,T),Nm;Ad(),i=Bx(r,i,c)}else r=b.treeContext,At=Ts(T.nextSibling),vn=i,it=!0,Ii=null,ws=!1,r!==null&&ky(i,r),i=gd(i,d),i.flags|=4096;return i}return r=Ur(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function yd(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Sm(r,i,c,d,x){return Va(i),c=am(r,i,c,d,void 0,x),d=om(),r!==null&&!tn?(lm(r,i,x),Hr(r,i,x)):(it&&d&&zf(i),i.flags|=1,_n(r,i,c,x),i.child)}function $x(r,i,c,d,x,b){return Va(i),i.updateQueue=null,c=Qy(i,d,c,x),Yy(r),d=om(),r!==null&&!tn?(lm(r,i,b),Hr(r,i,b)):(it&&d&&zf(i),i.flags|=1,_n(r,i,c,b),i.child)}function Kx(r,i,c,d,x){if(Va(i),i.stateNode===null){var b=Io,T=c.contextType;typeof T=="object"&&T!==null&&(b=bn(T)),b=new c(d,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Em,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=d,b.state=i.memoizedState,b.refs={},Wf(i),T=c.contextType,b.context=typeof T=="object"&&T!==null?bn(T):Io,b.state=i.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(wm(i,c,T,d),b.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Em.enqueueReplaceState(b,b.state,null),dc(i,d,b,x),uc(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){b=i.stateNode;var C=i.memoizedProps,L=Ga(c,C);b.props=L;var Q=b.context,oe=c.contextType;T=Io,typeof oe=="object"&&oe!==null&&(T=bn(oe));var ue=c.getDerivedStateFromProps;oe=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||Q!==T)&&Dx(i,b,d,T),Mi=!1;var W=i.memoizedState;b.state=W,dc(i,d,b,x),uc(),Q=i.memoizedState,C||W!==Q||Mi?(typeof ue=="function"&&(wm(i,c,ue,d),Q=i.memoizedState),(L=Mi||Mx(i,c,L,d,W,Q,T))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=Q),b.props=d,b.state=Q,b.context=T,d=L):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{b=i.stateNode,Zf(r,i),T=i.memoizedProps,oe=Ga(c,T),b.props=oe,ue=i.pendingProps,W=b.context,Q=c.contextType,L=Io,typeof Q=="object"&&Q!==null&&(L=bn(Q)),C=c.getDerivedStateFromProps,(Q=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ue||W!==L)&&Dx(i,b,d,L),Mi=!1,W=i.memoizedState,b.state=W,dc(i,d,b,x),uc();var se=i.memoizedState;T!==ue||W!==se||Mi||r!==null&&r.dependencies!==null&&Wu(r.dependencies)?(typeof C=="function"&&(wm(i,c,C,d),se=i.memoizedState),(oe=Mi||Mx(i,c,oe,d,W,se,L)||r!==null&&r.dependencies!==null&&Wu(r.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,se,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,se,L)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=se),b.props=d,b.state=se,b.context=L,d=oe):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),d=!1)}return b=d,yd(r,i),d=(i.flags&128)!==0,b||d?(b=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,r!==null&&d?(i.child=za(i,r.child,null,x),i.child=za(i,null,c,x)):_n(r,i,c,x),i.memoizedState=b.state,r=i.child):r=Hr(r,i,x),r}function Yx(r,i,c,d){return ja(),i.flags|=256,_n(r,i,c,d),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cm(r){return{baseLanes:r,cachePool:Vy()}}function Im(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=cs),r}function Qx(r,i,c){var d=i.pendingProps,x=!1,b=(i.flags&128)!==0,T;if((T=b)||(T=r!==null&&r.memoizedState===null?!1:($t.current&2)!==0),T&&(x=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(it){if(x?ji(i):Li(),(r=At)?(r=sb(r,ws),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ci!==null?{id:vr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},c=Cy(r),c.return=i,i.child=c,vn=i,At=null)):r=null,r===null)throw Ri(i);return dp(r)?i.lanes=32:i.lanes=536870912,null}var C=d.children;return d=d.fallback,x?(Li(),x=i.mode,C=xd({mode:"hidden",children:C},x),d=Pa(d,x,c,null),C.return=i,d.return=i,C.sibling=d,i.child=C,d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,gc(null,d)):(ji(i),Rm(i,C))}var L=r.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(b)i.flags&256?(ji(i),i.flags&=-257,i=km(r,i,c)):i.memoizedState!==null?(Li(),i.child=r.child,i.flags|=128,i=null):(Li(),C=d.fallback,x=i.mode,d=xd({mode:"visible",children:d.children},x),C=Pa(C,x,c,null),C.flags|=2,d.return=i,C.return=i,d.sibling=C,i.child=d,za(i,r.child,null,c),d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,i=gc(null,d));else if(ji(i),dp(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var Q=T.dgst;T=Q,d=Error(s(419)),d.stack="",d.digest=T,rc({value:d,source:null,stack:null}),i=km(r,i,c)}else if(tn||Do(r,i,c,!1),T=(c&r.childLanes)!==0,tn||T){if(T=Tt,T!==null&&(d=_a(T,c),d!==0&&d!==L.retryLane))throw L.retryLane=d,Da(r,d),Kn(T,r,d),Nm;up(C)||Ad(),i=km(r,i,c)}else up(C)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,At=Ts(C.nextSibling),vn=i,it=!0,Ii=null,ws=!1,r!==null&&ky(i,r),i=Rm(i,d.children),i.flags|=4096);return i}return x?(Li(),C=d.fallback,x=i.mode,L=r.child,Q=L.sibling,d=Ur(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,Q!==null?C=Ur(Q,C):(C=Pa(C,x,c,null),C.flags|=2),C.return=i,d.return=i,d.sibling=C,i.child=d,gc(null,d),d=i.child,C=r.child.memoizedState,C===null?C=Cm(c):(x=C.cachePool,x!==null?(L=Zt._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=Vy(),C={baseLanes:C.baseLanes|c,cachePool:x}),d.memoizedState=C,d.childLanes=Im(r,T,c),i.memoizedState=Am,gc(r.child,d)):(ji(i),c=r.child,r=c.sibling,c=Ur(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=c,i.memoizedState=null,c)}function Rm(r,i){return i=xd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function xd(r,i){return r=is(22,r,null,i),r.lanes=0,r}function km(r,i,c){return za(i,r.child,null,c),r=Rm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Jx(r,i,c){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),$f(r.return,i,c)}function Mm(r,i,c,d,x,b){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:x,treeForkCount:b}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=x,T.treeForkCount=b)}function Xx(r,i,c){var d=i.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var T=$t.current,C=(T&2)!==0;if(C?(T=T&1|2,i.flags|=128):T&=1,V($t,T),_n(r,i,d,c),d=it?sc:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jx(r,c,i);else if(r.tag===19)Jx(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(c=i.child,x=null;c!==null;)r=c.alternate,r!==null&&ad(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),Mm(i,!1,x,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(r=x.alternate,r!==null&&ad(r)===null){i.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Mm(i,!0,c,null,b,d);break;case"together":Mm(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Hr(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),Oi|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(Do(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,c=Ur(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Ur(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function Dm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Wu(r)))}function yS(r,i,c){switch(i.tag){case 3:Ye(i,i.stateNode.containerInfo),ki(i,Zt,r.memoizedState.cache),ja();break;case 27:case 5:gn(i);break;case 4:Ye(i,i.stateNode.containerInfo);break;case 10:ki(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,rm(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(ji(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Qx(r,i,c):(ji(i),r=Hr(r,i,c),r!==null?r.sibling:null);ji(i);break;case 19:var x=(r.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Do(r,i,c,!1),d=(c&i.childLanes)!==0),x){if(d)return Xx(r,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),V($t,$t.current),d)break;return null;case 22:return i.lanes=0,Gx(r,i,c,i.pendingProps);case 24:ki(i,Zt,r.memoizedState.cache)}return Hr(r,i,c)}function Wx(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)tn=!0;else{if(!Dm(r,c)&&(i.flags&128)===0)return tn=!1,yS(r,i,c);tn=(r.flags&131072)!==0}else tn=!1,it&&(i.flags&1048576)!==0&&Ry(i,sc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=Oa(i.elementType),i.type=r,typeof r=="function")Uf(r)?(d=Ga(r,d),i.tag=1,i=Kx(null,i,r,d,c)):(i.tag=0,i=Sm(null,i,r,d,c));else{if(r!=null){var x=r.$$typeof;if(x===ae){i.tag=11,i=qx(null,i,r,d,c);break e}else if(x===I){i.tag=14,i=zx(null,i,r,d,c);break e}}throw i=$e(r)||r,Error(s(306,i,""))}}return i;case 0:return Sm(r,i,i.type,i.pendingProps,c);case 1:return d=i.type,x=Ga(d,i.pendingProps),Kx(r,i,d,x,c);case 3:e:{if(Ye(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var b=i.memoizedState;x=b.element,Zf(r,i),dc(i,d,null,c);var T=i.memoizedState;if(d=T.cache,ki(i,Zt,d),d!==b.cache&&Kf(i,[Zt],c,!0),uc(),d=T.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=Yx(r,i,d,c);break e}else if(d!==x){x=vs(Error(s(424)),i),rc(x),i=Yx(r,i,d,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(At=Ts(r.firstChild),vn=i,it=!0,Ii=null,ws=!0,c=Gy(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ja(),d===x){i=Hr(r,i,c);break e}_n(r,i,d,c)}i=i.child}return i;case 26:return yd(r,i),r===null?(c=cb(i.type,null,i.pendingProps,null))?i.memoizedState=c:it||(c=i.type,r=i.pendingProps,d=Pd(Ae.current).createElement(c),d[Jt]=i,d[hn]=r,wn(d,c,r),Xt(d),i.stateNode=d):i.memoizedState=cb(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return gn(i),r===null&&it&&(d=i.stateNode=ab(i.type,i.pendingProps,Ae.current),vn=i,ws=!0,x=At,Hi(i.type)?(hp=x,At=Ts(d.firstChild)):At=x),_n(r,i,i.pendingProps.children,c),yd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&it&&((x=d=At)&&(d=KS(d,i.type,i.pendingProps,ws),d!==null?(i.stateNode=d,vn=i,At=Ts(d.firstChild),ws=!1,x=!0):x=!1),x||Ri(i)),gn(i),x=i.type,b=i.pendingProps,T=r!==null?r.memoizedProps:null,d=b.children,op(x,b)?d=null:T!==null&&op(x,T)&&(i.flags|=32),i.memoizedState!==null&&(x=am(r,i,lS,null,null,c),kc._currentValue=x),yd(r,i),_n(r,i,d,c),i.child;case 6:return r===null&&it&&((r=c=At)&&(c=YS(c,i.pendingProps,ws),c!==null?(i.stateNode=c,vn=i,At=null,r=!0):r=!1),r||Ri(i)),null;case 13:return Qx(r,i,c);case 4:return Ye(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=za(i,null,d,c):_n(r,i,d,c),i.child;case 11:return qx(r,i,i.type,i.pendingProps,c);case 7:return _n(r,i,i.pendingProps,c),i.child;case 8:return _n(r,i,i.pendingProps.children,c),i.child;case 12:return _n(r,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,ki(i,i.type,d.value),_n(r,i,d.children,c),i.child;case 9:return x=i.type._context,d=i.pendingProps.children,Va(i),x=bn(x),d=d(x),i.flags|=1,_n(r,i,d,c),i.child;case 14:return zx(r,i,i.type,i.pendingProps,c);case 15:return Fx(r,i,i.type,i.pendingProps,c);case 19:return Xx(r,i,c);case 31:return gS(r,i,c);case 22:return Gx(r,i,c,i.pendingProps);case 24:return Va(i),d=bn(Zt),r===null?(x=Jf(),x===null&&(x=Tt,b=Yf(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=c),x=b),i.memoizedState={parent:d,cache:x},Wf(i),ki(i,Zt,x)):((r.lanes&c)!==0&&(Zf(r,i),dc(i,null,null,c),uc()),x=r.memoizedState,b=i.memoizedState,x.parent!==d?(x={parent:d,cache:d},i.memoizedState=x,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=x),ki(i,Zt,d)):(d=b.cache,ki(i,Zt,d),d!==x.cache&&Kf(i,[Zt],c,!0))),_n(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Br(r){r.flags|=4}function Pm(r,i,c,d,x){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(Nv())r.flags|=8192;else throw qa=nd,Xf}else r.flags&=-16777217}function Zx(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!mb(i))if(Nv())r.flags|=8192;else throw qa=nd,Xf}function vd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?rr():536870912,r.lanes|=i,Bo|=i)}function yc(r,i){if(!it)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Ct(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(i)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=d,r.childLanes=c,i}function xS(r,i,c){var d=i.pendingProps;switch(Ff(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return Ct(i),null;case 3:return c=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),zr(Zt),je(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Mo(i)?Br(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hf())),Ct(i),null;case 26:var x=i.type,b=i.memoizedState;return r===null?(Br(i),b!==null?(Ct(i),Zx(i,b)):(Ct(i),Pm(i,x,null,d,c))):b?b!==r.memoizedState?(Br(i),Ct(i),Zx(i,b)):(Ct(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&Br(i),Ct(i),Pm(i,x,r,d,c)),null;case 27:if(ze(i),c=Ae.current,x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Br(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}r=re.current,Mo(i)?My(i):(r=ab(x,d,c),i.stateNode=r,Br(i))}return Ct(i),null;case 5:if(ze(i),x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Br(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Ct(i),null}if(b=re.current,Mo(i))My(i);else{var T=Pd(Ae.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?T.createElement(x,{is:d.is}):T.createElement(x)}}b[Jt]=i,b[hn]=d;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=b;e:switch(wn(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Br(i)}}return Ct(i),Pm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,c),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&Br(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=Ae.current,Mo(i)){if(r=i.stateNode,c=i.memoizedProps,d=null,x=vn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}r[Jt]=i,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Qv(r.nodeValue,c)),r||Ri(i,!0)}else r=Pd(r).createTextNode(d),r[Jt]=i,i.stateNode=r}return Ct(i),null;case 31:if(c=i.memoizedState,r===null||r.memoizedState!==null){if(d=Mo(i),c!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Jt]=i}else ja(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),r=!1}else c=Hf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return i.flags&256?(os(i),i):(os(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ct(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=Mo(i),d!==null&&d.dehydrated!==null){if(r===null){if(!x)throw Error(s(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[Jt]=i}else ja(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),x=!1}else x=Hf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return i.flags&256?(os(i),i):(os(i),null)}return os(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,r=r!==null&&r.memoizedState!==null,c&&(d=i.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),c!==r&&c&&(i.child.flags|=8192),vd(i,i.updateQueue),Ct(i),null);case 4:return je(),r===null&&np(i.stateNode.containerInfo),Ct(i),null;case 10:return zr(i.type),Ct(i),null;case 19:if(J($t),d=i.memoizedState,d===null)return Ct(i),null;if(x=(i.flags&128)!==0,b=d.rendering,b===null)if(x)yc(d,!1);else{if(Ft!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=ad(r),b!==null){for(i.flags|=128,yc(d,!1),r=b.updateQueue,i.updateQueue=r,vd(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)Ay(c,r),c=c.sibling;return V($t,$t.current&1|2),it&&Or(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&qt()>Td&&(i.flags|=128,x=!0,yc(d,!1),i.lanes=4194304)}else{if(!x)if(r=ad(b),r!==null){if(i.flags|=128,x=!0,r=r.updateQueue,i.updateQueue=r,vd(i,r),yc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!it)return Ct(i),null}else 2*qt()-d.renderingStartTime>Td&&c!==536870912&&(i.flags|=128,x=!0,yc(d,!1),i.lanes=4194304);d.isBackwards?(b.sibling=i.child,i.child=b):(r=d.last,r!==null?r.sibling=b:i.child=b,d.last=b)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=qt(),r.sibling=null,c=$t.current,V($t,x?c&1|2:c&1),it&&Or(i,d.treeForkCount),r):(Ct(i),null);case 22:case 23:return os(i),sm(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),c=i.updateQueue,c!==null&&vd(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),r!==null&&J(Ua),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),zr(Zt),Ct(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vS(r,i){switch(Ff(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return zr(Zt),je(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return ze(i),null;case 31:if(i.memoizedState!==null){if(os(i),i.alternate===null)throw Error(s(340));ja()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(os(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ja()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return J($t),null;case 4:return je(),null;case 10:return zr(i.type),null;case 22:case 23:return os(i),sm(),r!==null&&J(Ua),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return zr(Zt),null;case 25:return null;default:return null}}function ev(r,i){switch(Ff(i),i.tag){case 3:zr(Zt),je();break;case 26:case 27:case 5:ze(i);break;case 4:je();break;case 31:i.memoizedState!==null&&os(i);break;case 13:os(i);break;case 19:J($t);break;case 10:zr(i.type);break;case 22:case 23:os(i),sm(),r!==null&&J(Ua);break;case 24:zr(Zt)}}function xc(r,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var x=d.next;c=x;do{if((c.tag&r)===r){d=void 0;var b=c.create,T=c.inst;d=b(),T.destroy=d}c=c.next}while(c!==x)}}catch(C){vt(i,i.return,C)}}function Vi(r,i,c){try{var d=i.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&r)===r){var T=d.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,x=i;var L=c,Q=C;try{Q()}catch(oe){vt(x,L,oe)}}}d=d.next}while(d!==b)}}catch(oe){vt(i,i.return,oe)}}function tv(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{By(i,c)}catch(d){vt(r,r.return,d)}}}function nv(r,i,c){c.props=Ga(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){vt(r,i,d)}}function vc(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(x){vt(r,i,x)}}function _r(r,i){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(x){vt(r,i,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){vt(r,i,x)}else c.current=null}function sv(r){var i=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(x){vt(r,r.return,x)}}function jm(r,i,c){try{var d=r.stateNode;zS(d,r.type,c,i),d[hn]=i}catch(x){vt(r,r.return,x)}}function rv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Hi(r.type)||r.tag===4}function Lm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||rv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Hi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Vm(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Vs));else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(Vm(r,i,c),r=r.sibling;r!==null;)Vm(r,i,c),r=r.sibling}function bd(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(bd(r,i,c),r=r.sibling;r!==null;)bd(r,i,c),r=r.sibling}function iv(r){var i=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,x=i.attributes;x.length;)i.removeAttributeNode(x[0]);wn(i,d,c),i[Jt]=r,i[hn]=c}catch(b){vt(r,r.return,b)}}var $r=!1,nn=!1,Um=!1,av=typeof WeakSet=="function"?WeakSet:Set,mn=null;function bS(r,i){if(r=r.containerInfo,ip=zd,r=xy(r),kf(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var T=0,C=-1,L=-1,Q=0,oe=0,ue=r,W=null;t:for(;;){for(var se;ue!==c||x!==0&&ue.nodeType!==3||(C=T+x),ue!==b||d!==0&&ue.nodeType!==3||(L=T+d),ue.nodeType===3&&(T+=ue.nodeValue.length),(se=ue.firstChild)!==null;)W=ue,ue=se;for(;;){if(ue===r)break t;if(W===c&&++Q===x&&(C=T),W===b&&++oe===d&&(L=T),(se=ue.nextSibling)!==null)break;ue=W,W=ue.parentNode}ue=se}c=C===-1||L===-1?null:{start:C,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(ap={focusedElem:r,selectionRange:c},zd=!1,mn=i;mn!==null;)if(i=mn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,mn=r;else for(;mn!==null;){switch(i=mn,b=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)x=r[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=i,x=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Ee=Ga(c.type,x);r=d.getSnapshotBeforeUpdate(Ee,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(Me){vt(c,c.return,Me)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)cp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,mn=r;break}mn=i.return}}function ov(r,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Yr(r,c),d&4&&xc(5,c);break;case 1:if(Yr(r,c),d&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(T){vt(c,c.return,T)}else{var x=Ga(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(x,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){vt(c,c.return,T)}}d&64&&tv(c),d&512&&vc(c,c.return);break;case 3:if(Yr(r,c),d&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{By(r,i)}catch(T){vt(c,c.return,T)}}break;case 27:i===null&&d&4&&iv(c);case 26:case 5:Yr(r,c),i===null&&d&4&&sv(c),d&512&&vc(c,c.return);break;case 12:Yr(r,c);break;case 31:Yr(r,c),d&4&&uv(r,c);break;case 13:Yr(r,c),d&4&&dv(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=IS.bind(null,c),QS(r,c))));break;case 22:if(d=c.memoizedState!==null||$r,!d){i=i!==null&&i.memoizedState!==null||nn,x=$r;var b=nn;$r=d,(nn=i)&&!b?Qr(r,c,(c.subtreeFlags&8772)!==0):Yr(r,c),$r=x,nn=b}break;case 30:break;default:Yr(r,c)}}function lv(r){var i=r.alternate;i!==null&&(r.alternate=null,lv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&po(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Pt=null,Gn=!1;function Kr(r,i,c){for(c=c.child;c!==null;)cv(r,i,c),c=c.sibling}function cv(r,i,c){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Se,c)}catch{}switch(c.tag){case 26:nn||_r(c,i),Kr(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:nn||_r(c,i);var d=Pt,x=Gn;Hi(c.type)&&(Pt=c.stateNode,Gn=!1),Kr(r,i,c),Cc(c.stateNode),Pt=d,Gn=x;break;case 5:nn||_r(c,i);case 6:if(d=Pt,x=Gn,Pt=null,Kr(r,i,c),Pt=d,Gn=x,Pt!==null)if(Gn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(c.stateNode)}catch(b){vt(c,i,b)}else try{Pt.removeChild(c.stateNode)}catch(b){vt(c,i,b)}break;case 18:Pt!==null&&(Gn?(r=Pt,tb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Zo(r)):tb(Pt,c.stateNode));break;case 4:d=Pt,x=Gn,Pt=c.stateNode.containerInfo,Gn=!0,Kr(r,i,c),Pt=d,Gn=x;break;case 0:case 11:case 14:case 15:Vi(2,c,i),nn||Vi(4,c,i),Kr(r,i,c);break;case 1:nn||(_r(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&nv(c,i,d)),Kr(r,i,c);break;case 21:Kr(r,i,c);break;case 22:nn=(d=nn)||c.memoizedState!==null,Kr(r,i,c),nn=d;break;default:Kr(r,i,c)}}function uv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Zo(r)}catch(c){vt(i,i.return,c)}}}function dv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Zo(r)}catch(c){vt(i,i.return,c)}}function _S(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new av),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new av),i;default:throw Error(s(435,r.tag))}}function _d(r,i){var c=_S(r);i.forEach(function(d){if(!c.has(d)){c.add(d);var x=RS.bind(null,r,d);d.then(x,x)}})}function Hn(r,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var x=c[d],b=r,T=i,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Hi(C.type)){Pt=C.stateNode,Gn=!1;break e}break;case 5:Pt=C.stateNode,Gn=!1;break e;case 3:case 4:Pt=C.stateNode.containerInfo,Gn=!0;break e}C=C.return}if(Pt===null)throw Error(s(160));cv(b,T,x),Pt=null,Gn=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)hv(i,r),i=i.sibling}var Gs=null;function hv(r,i){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hn(i,r),Bn(r),d&4&&(Vi(3,r,r.return),xc(3,r),Vi(5,r,r.return));break;case 1:Hn(i,r),Bn(r),d&512&&(nn||c===null||_r(c,c.return)),d&64&&$r&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var x=Gs;if(Hn(i,r),Bn(r),d&512&&(nn||c===null||_r(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[or]||b[Jt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),wn(b,d,c),b[Jt]=r,Xt(b),d=b;break e;case"link":var T=hb("link","href",x).get(d+(c.href||""));if(T){for(var C=0;C<T.length;C++)if(b=T[C],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(C,1);break t}}b=x.createElement(d),wn(b,d,c),x.head.appendChild(b);break;case"meta":if(T=hb("meta","content",x).get(d+(c.content||""))){for(C=0;C<T.length;C++)if(b=T[C],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(C,1);break t}}b=x.createElement(d),wn(b,d,c),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[Jt]=r,Xt(b),d=b}r.stateNode=d}else fb(x,r.type,r.stateNode);else r.stateNode=db(x,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?fb(x,r.type,r.stateNode):db(x,d,r.memoizedProps)):d===null&&r.stateNode!==null&&jm(r,r.memoizedProps,c.memoizedProps)}break;case 27:Hn(i,r),Bn(r),d&512&&(nn||c===null||_r(c,c.return)),c!==null&&d&4&&jm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Hn(i,r),Bn(r),d&512&&(nn||c===null||_r(c,c.return)),r.flags&32){x=r.stateNode;try{Fn(x,"")}catch(Ee){vt(r,r.return,Ee)}}d&4&&r.stateNode!=null&&(x=r.memoizedProps,jm(r,x,c!==null?c.memoizedProps:x)),d&1024&&(Um=!0);break;case 6:if(Hn(i,r),Bn(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(Ee){vt(r,r.return,Ee)}}break;case 3:if(Vd=null,x=Gs,Gs=jd(i.containerInfo),Hn(i,r),Gs=x,Bn(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Zo(i.containerInfo)}catch(Ee){vt(r,r.return,Ee)}Um&&(Um=!1,fv(r));break;case 4:d=Gs,Gs=jd(r.stateNode.containerInfo),Hn(i,r),Bn(r),Gs=d;break;case 12:Hn(i,r),Bn(r);break;case 31:Hn(i,r),Bn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,_d(r,d)));break;case 13:Hn(i,r),Bn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ed=qt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,_d(r,d)));break;case 22:x=r.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,Q=$r,oe=nn;if($r=Q||x,nn=oe||L,Hn(i,r),nn=oe,$r=Q,Bn(r),d&8192)e:for(i=r.stateNode,i._visibility=x?i._visibility&-2:i._visibility|1,x&&(c===null||L||$r||nn||Ha(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){L=c=i;try{if(b=L.stateNode,x)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=L.stateNode;var ue=L.memoizedProps.style,W=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Ee){vt(L,L.return,Ee)}}}else if(i.tag===6){if(c===null){L=i;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Ee){vt(L,L.return,Ee)}}}else if(i.tag===18){if(c===null){L=i;try{var se=L.stateNode;x?nb(se,!0):nb(L.stateNode,!1)}catch(Ee){vt(L,L.return,Ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,_d(r,c))));break;case 19:Hn(i,r),Bn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,_d(r,d)));break;case 30:break;case 21:break;default:Hn(i,r),Bn(r)}}function Bn(r){var i=r.flags;if(i&2){try{for(var c,d=r.return;d!==null;){if(rv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var x=c.stateNode,b=Lm(r);bd(r,b,x);break;case 5:var T=c.stateNode;c.flags&32&&(Fn(T,""),c.flags&=-33);var C=Lm(r);bd(r,C,T);break;case 3:case 4:var L=c.stateNode.containerInfo,Q=Lm(r);Vm(r,Q,L);break;default:throw Error(s(161))}}catch(oe){vt(r,r.return,oe)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function fv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;fv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Yr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ov(r,i.alternate,i),i=i.sibling}function Ha(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Vi(4,i,i.return),Ha(i);break;case 1:_r(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&nv(i,i.return,c),Ha(i);break;case 27:Cc(i.stateNode);case 26:case 5:_r(i,i.return),Ha(i);break;case 22:i.memoizedState===null&&Ha(i);break;case 30:Ha(i);break;default:Ha(i)}r=r.sibling}}function Qr(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,x=r,b=i,T=b.flags;switch(b.tag){case 0:case 11:case 15:Qr(x,b,c),xc(4,b);break;case 1:if(Qr(x,b,c),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Q){vt(d,d.return,Q)}if(d=b,x=d.updateQueue,x!==null){var C=d.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)Hy(L[x],C)}catch(Q){vt(d,d.return,Q)}}c&&T&64&&tv(b),vc(b,b.return);break;case 27:iv(b);case 26:case 5:Qr(x,b,c),c&&d===null&&T&4&&sv(b),vc(b,b.return);break;case 12:Qr(x,b,c);break;case 31:Qr(x,b,c),c&&T&4&&uv(x,b);break;case 13:Qr(x,b,c),c&&T&4&&dv(x,b);break;case 22:b.memoizedState===null&&Qr(x,b,c),vc(b,b.return);break;case 30:break;default:Qr(x,b,c)}i=i.sibling}}function Om(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&ic(c))}function qm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&ic(r))}function Hs(r,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)mv(r,i,c,d),i=i.sibling}function mv(r,i,c,d){var x=i.flags;switch(i.tag){case 0:case 11:case 15:Hs(r,i,c,d),x&2048&&xc(9,i);break;case 1:Hs(r,i,c,d);break;case 3:Hs(r,i,c,d),x&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&ic(r)));break;case 12:if(x&2048){Hs(r,i,c,d),r=i.stateNode;try{var b=i.memoizedProps,T=b.id,C=b.onPostCommit;typeof C=="function"&&C(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){vt(i,i.return,L)}}else Hs(r,i,c,d);break;case 31:Hs(r,i,c,d);break;case 13:Hs(r,i,c,d);break;case 23:break;case 22:b=i.stateNode,T=i.alternate,i.memoizedState!==null?b._visibility&2?Hs(r,i,c,d):bc(r,i):b._visibility&2?Hs(r,i,c,d):(b._visibility|=2,Fo(r,i,c,d,(i.subtreeFlags&10256)!==0||!1)),x&2048&&Om(T,i);break;case 24:Hs(r,i,c,d),x&2048&&qm(i.alternate,i);break;default:Hs(r,i,c,d)}}function Fo(r,i,c,d,x){for(x=x&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=r,T=i,C=c,L=d,Q=T.flags;switch(T.tag){case 0:case 11:case 15:Fo(b,T,C,L,x),xc(8,T);break;case 23:break;case 22:var oe=T.stateNode;T.memoizedState!==null?oe._visibility&2?Fo(b,T,C,L,x):bc(b,T):(oe._visibility|=2,Fo(b,T,C,L,x)),x&&Q&2048&&Om(T.alternate,T);break;case 24:Fo(b,T,C,L,x),x&&Q&2048&&qm(T.alternate,T);break;default:Fo(b,T,C,L,x)}i=i.sibling}}function bc(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,d=i,x=d.flags;switch(d.tag){case 22:bc(c,d),x&2048&&Om(d.alternate,d);break;case 24:bc(c,d),x&2048&&qm(d.alternate,d);break;default:bc(c,d)}i=i.sibling}}var _c=8192;function Go(r,i,c){if(r.subtreeFlags&_c)for(r=r.child;r!==null;)pv(r,i,c),r=r.sibling}function pv(r,i,c){switch(r.tag){case 26:Go(r,i,c),r.flags&_c&&r.memoizedState!==null&&oA(c,Gs,r.memoizedState,r.memoizedProps);break;case 5:Go(r,i,c);break;case 3:case 4:var d=Gs;Gs=jd(r.stateNode.containerInfo),Go(r,i,c),Gs=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=_c,_c=16777216,Go(r,i,c),_c=d):Go(r,i,c));break;default:Go(r,i,c)}}function gv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function wc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];mn=d,xv(d,r)}gv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yv(r),r=r.sibling}function yv(r){switch(r.tag){case 0:case 11:case 15:wc(r),r.flags&2048&&Vi(9,r,r.return);break;case 3:wc(r);break;case 12:wc(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,wd(r)):wc(r);break;default:wc(r)}}function wd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];mn=d,xv(d,r)}gv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Vi(8,i,i.return),wd(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,wd(i));break;default:wd(i)}r=r.sibling}}function xv(r,i){for(;mn!==null;){var c=mn;switch(c.tag){case 0:case 11:case 15:Vi(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ic(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,mn=d;else e:for(c=r;mn!==null;){d=mn;var x=d.sibling,b=d.return;if(lv(d),d===c){mn=null;break e}if(x!==null){x.return=b,mn=x;break e}mn=b}}}var wS={getCacheForType:function(r){var i=bn(Zt),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c},cacheSignal:function(){return bn(Zt).controller.signal}},ES=typeof WeakMap=="function"?WeakMap:Map,mt=0,Tt=null,Qe=null,et=0,xt=0,ls=null,Ui=!1,Ho=!1,zm=!1,Jr=0,Ft=0,Oi=0,Ba=0,Fm=0,cs=0,Bo=0,Ec=null,$n=null,Gm=!1,Ed=0,vv=0,Td=1/0,Nd=null,qi=null,un=0,zi=null,$o=null,Xr=0,Hm=0,Bm=null,bv=null,Tc=0,$m=null;function us(){return(mt&2)!==0&&et!==0?et&-et:X.T!==null?Wm():Su()}function _v(){if(cs===0)if((et&536870912)===0||it){var r=ie;ie<<=1,(ie&3932160)===0&&(ie=262144),cs=r}else cs=536870912;return r=as.current,r!==null&&(r.flags|=32),cs}function Kn(r,i,c){(r===Tt&&(xt===2||xt===9)||r.cancelPendingCommit!==null)&&(Ko(r,0),Fi(r,et,cs,!1)),Pr(r,c),((mt&2)===0||r!==Tt)&&(r===Tt&&((mt&2)===0&&(Ba|=c),Ft===4&&Fi(r,et,cs,!1)),wr(r))}function wv(r,i,c){if((mt&6)!==0)throw Error(s(327));var d=!c&&(i&127)===0&&(i&r.expiredLanes)===0||cn(r,i),x=d?SS(r,i):Ym(r,i,!0),b=d;do{if(x===0){Ho&&!d&&Fi(r,i,0,!1);break}else{if(c=r.current.alternate,b&&!TS(c)){x=Ym(r,i,!1),b=!1;continue}if(x===2){if(b=i,r.errorRecoveryDisabledLanes&b)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var C=r;x=Ec;var L=C.current.memoizedState.isDehydrated;if(L&&(Ko(C,T).flags|=256),T=Ym(C,T,!1),T!==2){if(zm&&!L){C.errorRecoveryDisabledLanes|=b,Ba|=b,x=4;break e}b=$n,$n=x,b!==null&&($n===null?$n=b:$n.push.apply($n,b))}x=T}if(b=!1,x!==2)continue}}if(x===1){Ko(r,0),Fi(r,i,0,!0);break}e:{switch(d=r,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Fi(d,i,cs,!Ui);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(x=Ed+300-qt(),10<x)){if(Fi(d,i,cs,!Ui),Mt(d,0,!0)!==0)break e;Xr=i,d.timeoutHandle=Zv(Ev.bind(null,d,c,$n,Nd,Gm,i,cs,Ba,Bo,Ui,b,"Throttled",-0,0),x);break e}Ev(d,c,$n,Nd,Gm,i,cs,Ba,Bo,Ui,b,null,-0,0)}}break}while(!0);wr(r)}function Ev(r,i,c,d,x,b,T,C,L,Q,oe,ue,W,se){if(r.timeoutHandle=-1,ue=i.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},pv(i,b,ue);var Ee=(b&62914560)===b?Ed-qt():(b&4194048)===b?vv-qt():0;if(Ee=lA(ue,Ee),Ee!==null){Xr=b,r.cancelPendingCommit=Ee(kv.bind(null,r,i,b,c,d,x,T,C,L,oe,ue,null,W,se)),Fi(r,b,T,!Q);return}}kv(r,i,b,c,d,x,T,C,L)}function TS(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var x=c[d],b=x.getSnapshot;x=x.value;try{if(!rs(b(),x))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fi(r,i,c,d){i&=~Fm,i&=~Ba,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var x=i;0<x;){var b=31-Ce(x),T=1<<b;d[b]=-1,x&=~T}c!==0&&yn(r,c,i)}function Sd(){return(mt&6)===0?(Nc(0),!1):!0}function Km(){if(Qe!==null){if(xt===0)var r=Qe.return;else r=Qe,qr=La=null,cm(r),Vo=null,oc=0,r=Qe;for(;r!==null;)ev(r.alternate,r),r=r.return;Qe=null}}function Ko(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,HS(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Xr=0,Km(),Tt=r,Qe=c=Ur(r.current,null),et=i,xt=0,ls=null,Ui=!1,Ho=cn(r,i),zm=!1,Bo=cs=Fm=Ba=Oi=Ft=0,$n=Ec=null,Gm=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var x=31-Ce(d),b=1<<x;i|=r[x],d&=~b}return Jr=i,Ku(),c}function Tv(r,i){He=null,X.H=pc,i===Lo||i===td?(i=qy(),xt=3):i===Xf?(i=qy(),xt=4):xt=i===Nm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ls=i,Qe===null&&(Ft=1,pd(r,vs(i,r.current)))}function Nv(){var r=as.current;return r===null?!0:(et&4194048)===et?Es===null:(et&62914560)===et||(et&536870912)!==0?r===Es:!1}function Sv(){var r=X.H;return X.H=pc,r===null?pc:r}function Av(){var r=X.A;return X.A=wS,r}function Ad(){Ft=4,Ui||(et&4194048)!==et&&as.current!==null||(Ho=!0),(Oi&134217727)===0&&(Ba&134217727)===0||Tt===null||Fi(Tt,et,cs,!1)}function Ym(r,i,c){var d=mt;mt|=2;var x=Sv(),b=Av();(Tt!==r||et!==i)&&(Nd=null,Ko(r,i)),i=!1;var T=Ft;e:do try{if(xt!==0&&Qe!==null){var C=Qe,L=ls;switch(xt){case 8:Km(),T=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(i=!0);var Q=xt;if(xt=0,ls=null,Yo(r,C,L,Q),c&&Ho){T=0;break e}break;default:Q=xt,xt=0,ls=null,Yo(r,C,L,Q)}}NS(),T=Ft;break}catch(oe){Tv(r,oe)}while(!0);return i&&r.shellSuspendCounter++,qr=La=null,mt=d,X.H=x,X.A=b,Qe===null&&(Tt=null,et=0,Ku()),T}function NS(){for(;Qe!==null;)Cv(Qe)}function SS(r,i){var c=mt;mt|=2;var d=Sv(),x=Av();Tt!==r||et!==i?(Nd=null,Td=qt()+500,Ko(r,i)):Ho=cn(r,i);e:do try{if(xt!==0&&Qe!==null){i=Qe;var b=ls;t:switch(xt){case 1:xt=0,ls=null,Yo(r,i,b,1);break;case 2:case 9:if(Uy(b)){xt=0,ls=null,Iv(i);break}i=function(){xt!==2&&xt!==9||Tt!==r||(xt=7),wr(r)},b.then(i,i);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Uy(b)?(xt=0,ls=null,Iv(i)):(xt=0,ls=null,Yo(r,i,b,7));break;case 5:var T=null;switch(Qe.tag){case 26:T=Qe.memoizedState;case 5:case 27:var C=Qe;if(T?mb(T):C.stateNode.complete){xt=0,ls=null;var L=C.sibling;if(L!==null)Qe=L;else{var Q=C.return;Q!==null?(Qe=Q,Cd(Q)):Qe=null}break t}}xt=0,ls=null,Yo(r,i,b,5);break;case 6:xt=0,ls=null,Yo(r,i,b,6);break;case 8:Km(),Ft=6;break e;default:throw Error(s(462))}}AS();break}catch(oe){Tv(r,oe)}while(!0);return qr=La=null,X.H=d,X.A=x,mt=c,Qe!==null?0:(Tt=null,et=0,Ku(),Ft)}function AS(){for(;Qe!==null&&!yi();)Cv(Qe)}function Cv(r){var i=Wx(r.alternate,r,Jr);r.memoizedProps=r.pendingProps,i===null?Cd(r):Qe=i}function Iv(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=$x(c,i,i.pendingProps,i.type,void 0,et);break;case 11:i=$x(c,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:cm(i);default:ev(c,i),i=Qe=Ay(i,Jr),i=Wx(c,i,Jr)}r.memoizedProps=r.pendingProps,i===null?Cd(r):Qe=i}function Yo(r,i,c,d){qr=La=null,cm(i),Vo=null,oc=0;var x=i.return;try{if(pS(r,x,i,c,et)){Ft=1,pd(r,vs(c,r.current)),Qe=null;return}}catch(b){if(x!==null)throw Qe=x,b;Ft=1,pd(r,vs(c,r.current)),Qe=null;return}i.flags&32768?(it||d===1?r=!0:Ho||(et&536870912)!==0?r=!1:(Ui=r=!0,(d===2||d===9||d===3||d===6)&&(d=as.current,d!==null&&d.tag===13&&(d.flags|=16384))),Rv(i,r)):Cd(i)}function Cd(r){var i=r;do{if((i.flags&32768)!==0){Rv(i,Ui);return}r=i.return;var c=xS(i.alternate,i,Jr);if(c!==null){Qe=c;return}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=r}while(i!==null);Ft===0&&(Ft=5)}function Rv(r,i){do{var c=vS(r.alternate,r);if(c!==null){c.flags&=32767,Qe=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=c}while(r!==null);Ft=6,Qe=null}function kv(r,i,c,d,x,b,T,C,L){r.cancelPendingCommit=null;do Id();while(un!==0);if((mt&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(b=i.lanes|i.childLanes,b|=Lf,qn(r,c,b,T,C,L),r===Tt&&(Qe=Tt=null,et=0),$o=i,zi=r,Xr=c,Hm=b,Bm=x,bv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,kS(ts,function(){return Lv(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,x=fe.p,fe.p=2,T=mt,mt|=4;try{bS(r,i,c)}finally{mt=T,fe.p=x,X.T=d}}un=1,Mv(),Dv(),Pv()}}function Mv(){if(un===1){un=0;var r=zi,i=$o,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var d=fe.p;fe.p=2;var x=mt;mt|=4;try{hv(i,r);var b=ap,T=xy(r.containerInfo),C=b.focusedElem,L=b.selectionRange;if(T!==C&&C&&C.ownerDocument&&yy(C.ownerDocument.documentElement,C)){if(L!==null&&kf(C)){var Q=L.start,oe=L.end;if(oe===void 0&&(oe=Q),"selectionStart"in C)C.selectionStart=Q,C.selectionEnd=Math.min(oe,C.value.length);else{var ue=C.ownerDocument||document,W=ue&&ue.defaultView||window;if(W.getSelection){var se=W.getSelection(),Ee=C.textContent.length,Me=Math.min(L.start,Ee),Et=L.end===void 0?Me:Math.min(L.end,Ee);!se.extend&&Me>Et&&(T=Et,Et=Me,Me=T);var B=gy(C,Me),q=gy(C,Et);if(B&&q&&(se.rangeCount!==1||se.anchorNode!==B.node||se.anchorOffset!==B.offset||se.focusNode!==q.node||se.focusOffset!==q.offset)){var Y=ue.createRange();Y.setStart(B.node,B.offset),se.removeAllRanges(),Me>Et?(se.addRange(Y),se.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),se.addRange(Y))}}}}for(ue=[],se=C;se=se.parentNode;)se.nodeType===1&&ue.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ue.length;C++){var le=ue[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}zd=!!ip,ap=ip=null}finally{mt=x,fe.p=d,X.T=c}}r.current=i,un=2}}function Dv(){if(un===2){un=0;var r=zi,i=$o,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var d=fe.p;fe.p=2;var x=mt;mt|=4;try{ov(r,i.alternate,i)}finally{mt=x,fe.p=d,X.T=c}}un=3}}function Pv(){if(un===4||un===3){un=0,nr();var r=zi,i=$o,c=Xr,d=bv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?un=5:(un=0,$o=zi=null,jv(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(qi=null),fs(c),i=i.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Se,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=X.T,x=fe.p,fe.p=2,X.T=null;try{for(var b=r.onRecoverableError,T=0;T<d.length;T++){var C=d[T];b(C.value,{componentStack:C.stack})}}finally{X.T=i,fe.p=x}}(Xr&3)!==0&&Id(),wr(r),x=r.pendingLanes,(c&261930)!==0&&(x&42)!==0?r===$m?Tc++:(Tc=0,$m=r):Tc=0,Nc(0)}}function jv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,ic(i)))}function Id(){return Mv(),Dv(),Pv(),Lv()}function Lv(){if(un!==5)return!1;var r=zi,i=Hm;Hm=0;var c=fs(Xr),d=X.T,x=fe.p;try{fe.p=32>c?32:c,X.T=null,c=Bm,Bm=null;var b=zi,T=Xr;if(un=0,$o=zi=null,Xr=0,(mt&6)!==0)throw Error(s(331));var C=mt;if(mt|=4,yv(b.current),mv(b,b.current,T,c),mt=C,Nc(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Se,b)}catch{}return!0}finally{fe.p=x,X.T=d,jv(r,i)}}function Vv(r,i,c){i=vs(c,i),i=Tm(r.stateNode,i,2),r=Pi(r,i,2),r!==null&&(Pr(r,2),wr(r))}function vt(r,i,c){if(r.tag===3)Vv(r,r,c);else for(;i!==null;){if(i.tag===3){Vv(i,r,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(qi===null||!qi.has(d))){r=vs(c,r),c=Ux(2),d=Pi(i,c,2),d!==null&&(Ox(c,d,i,r),Pr(d,2),wr(d));break}}i=i.return}}function Qm(r,i,c){var d=r.pingCache;if(d===null){d=r.pingCache=new ES;var x=new Set;d.set(i,x)}else x=d.get(i),x===void 0&&(x=new Set,d.set(i,x));x.has(c)||(zm=!0,x.add(c),r=CS.bind(null,r,i,c),i.then(r,r))}function CS(r,i,c){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Tt===r&&(et&c)===c&&(Ft===4||Ft===3&&(et&62914560)===et&&300>qt()-Ed?(mt&2)===0&&Ko(r,0):Fm|=c,Bo===et&&(Bo=0)),wr(r)}function Uv(r,i){i===0&&(i=rr()),r=Da(r,i),r!==null&&(Pr(r,i),wr(r))}function IS(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),Uv(r,c)}function RS(r,i){var c=0;switch(r.tag){case 31:case 13:var d=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Uv(r,c)}function kS(r,i){return jt(r,i)}var Rd=null,Qo=null,Jm=!1,kd=!1,Xm=!1,Gi=0;function wr(r){r!==Qo&&r.next===null&&(Qo===null?Rd=Qo=r:Qo=Qo.next=r),kd=!0,Jm||(Jm=!0,DS())}function Nc(r,i){if(!Xm&&kd){Xm=!0;do for(var c=!1,d=Rd;d!==null;){if(r!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var T=d.suspendedLanes,C=d.pingedLanes;b=(1<<31-Ce(42|r)+1)-1,b&=x&~(T&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Fv(d,b))}else b=et,b=Mt(d,d===Tt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||cn(d,b)||(c=!0,Fv(d,b));d=d.next}while(c);Xm=!1}}function MS(){Ov()}function Ov(){kd=Jm=!1;var r=0;Gi!==0&&GS()&&(r=Gi);for(var i=qt(),c=null,d=Rd;d!==null;){var x=d.next,b=qv(d,i);b===0?(d.next=null,c===null?Rd=x:c.next=x,x===null&&(Qo=c)):(c=d,(r!==0||(b&3)!==0)&&(kd=!0)),d=x}un!==0&&un!==5||Nc(r),Gi!==0&&(Gi=0)}function qv(r,i){for(var c=r.suspendedLanes,d=r.pingedLanes,x=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var T=31-Ce(b),C=1<<T,L=x[T];L===-1?((C&c)===0||(C&d)!==0)&&(x[T]=Ds(C,i)):L<=i&&(r.expiredLanes|=C),b&=~C}if(i=Tt,c=et,c=Mt(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===i&&(xt===2||xt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Sn(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||cn(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(d!==null&&Sn(d),fs(c)){case 2:case 8:c=es;break;case 32:c=ts;break;case 268435456:c=xi;break;default:c=ts}return d=zv.bind(null,r),c=jt(c,d),r.callbackPriority=i,r.callbackNode=c,i}return d!==null&&d!==null&&Sn(d),r.callbackPriority=2,r.callbackNode=null,2}function zv(r,i){if(un!==0&&un!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Id()&&r.callbackNode!==c)return null;var d=et;return d=Mt(r,r===Tt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(wv(r,d,i),qv(r,qt()),r.callbackNode!=null&&r.callbackNode===c?zv.bind(null,r):null)}function Fv(r,i){if(Id())return null;wv(r,i,!0)}function DS(){BS(function(){(mt&6)!==0?jt(sr,MS):Ov()})}function Wm(){if(Gi===0){var r=Po;r===0&&(r=Ze,Ze<<=1,(Ze&261888)===0&&(Ze=256)),Gi=r}return Gi}function Gv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vo(""+r)}function Hv(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function PS(r,i,c,d,x){if(i==="submit"&&c&&c.stateNode===x){var b=Gv((x[hn]||null).action),T=d.submitter;T&&(i=(i=T[hn]||null)?Gv(i.formAction):T.getAttribute("formAction"),i!==null&&(b=i,T=null));var C=new pr("action","action",null,d,x);r.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Gi!==0){var L=T?Hv(x,T):new FormData(x);xm(c,{pending:!0,data:L,method:x.method,action:b},null,L)}}else typeof b=="function"&&(C.preventDefault(),L=T?Hv(x,T):new FormData(x),xm(c,{pending:!0,data:L,method:x.method,action:b},b,L))},currentTarget:x}]})}}for(var Zm=0;Zm<jf.length;Zm++){var ep=jf[Zm],jS=ep.toLowerCase(),LS=ep[0].toUpperCase()+ep.slice(1);Fs(jS,"on"+LS)}Fs(_y,"onAnimationEnd"),Fs(wy,"onAnimationIteration"),Fs(Ey,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(W2,"onTransitionRun"),Fs(Z2,"onTransitionStart"),Fs(eS,"onTransitionCancel"),Fs(Ty,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sc));function Bv(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],x=d.event;d=d.listeners;e:{var b=void 0;if(i)for(var T=d.length-1;0<=T;T--){var C=d[T],L=C.instance,Q=C.currentTarget;if(C=C.listener,L!==b&&x.isPropagationStopped())break e;b=C,x.currentTarget=Q;try{b(x)}catch(oe){$u(oe)}x.currentTarget=null,b=L}else for(T=0;T<d.length;T++){if(C=d[T],L=C.instance,Q=C.currentTarget,C=C.listener,L!==b&&x.isPropagationStopped())break e;b=C,x.currentTarget=Q;try{b(x)}catch(oe){$u(oe)}x.currentTarget=null,b=L}}}}function Je(r,i){var c=i[mo];c===void 0&&(c=i[mo]=new Set);var d=r+"__bubble";c.has(d)||($v(i,r,2,!1),c.add(d))}function tp(r,i,c){var d=0;i&&(d|=4),$v(c,r,d,i)}var Md="_reactListening"+Math.random().toString(36).slice(2);function np(r){if(!r[Md]){r[Md]=!0,Ul.forEach(function(c){c!=="selectionchange"&&(VS.has(c)||tp(c,!1,r),tp(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Md]||(i[Md]=!0,tp("selectionchange",!1,i))}}function $v(r,i,c,d){switch(_b(i)){case 2:var x=dA;break;case 8:x=hA;break;default:x=yp}c=x.bind(null,i,c,r),x=void 0,!Na||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),d?x!==void 0?r.addEventListener(i,c,{capture:!0,passive:x}):r.addEventListener(i,c,!0):x!==void 0?r.addEventListener(i,c,{passive:x}):r.addEventListener(i,c,!1)}function sp(r,i,c,d,x){var b=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var C=d.stateNode.containerInfo;if(C===x)break;if(T===4)for(T=d.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;C!==null;){if(T=lr(C),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){d=b=T;continue e}C=C.parentNode}}d=d.return}Ti(function(){var Q=b,oe=ps(c),ue=[];e:{var W=Ny.get(r);if(W!==void 0){var se=pr,Ee=r;switch(r){case"keypress":if(Aa(c)===0)break e;case"keydown":case"keyup":se=Gu;break;case"focusin":Ee="focus",se=Ia;break;case"focusout":Ee="blur",se=Ia;break;case"beforeblur":case"afterblur":se=Ia;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=w;break;case _y:case wy:case Ey:se=Lu;break;case Ty:se=k;break;case"scroll":case"scrollend":se=Jl;break;case"wheel":se=te;break;case"copy":case"cut":case"paste":se=Vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Vr;break;case"toggle":case"beforetoggle":se=Ge}var Me=(i&4)!==0,Et=!Me&&(r==="scroll"||r==="scrollend"),B=Me?W!==null?W+"Capture":null:W;Me=[];for(var q=Q,Y;q!==null;){var le=q;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||B===null||(le=Us(q,B),le!=null&&Me.push(Ac(q,le,Y))),Et)break;q=q.return}0<Me.length&&(W=new se(W,Ee,null,c,oe),ue.push({event:W,listeners:Me}))}}if((i&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",W&&c!==Kl&&(Ee=c.relatedTarget||c.fromElement)&&(lr(Ee)||Ee[ar]))break e;if((se||W)&&(W=oe.window===oe?oe:(W=oe.ownerDocument)?W.defaultView||W.parentWindow:window,se?(Ee=c.relatedTarget||c.toElement,se=Q,Ee=Ee?lr(Ee):null,Ee!==null&&(Et=l(Ee),Me=Ee.tag,Ee!==Et||Me!==5&&Me!==27&&Me!==6)&&(Ee=null)):(se=null,Ee=Q),se!==Ee)){if(Me=Xl,le="onMouseLeave",B="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Me=Vr,le="onPointerLeave",B="onPointerEnter",q="pointer"),Et=se==null?W:ns(se),Y=Ee==null?W:ns(Ee),W=new Me(le,q+"leave",se,c,oe),W.target=Et,W.relatedTarget=Y,le=null,lr(oe)===Q&&(Me=new Me(B,q+"enter",Ee,c,oe),Me.target=Y,Me.relatedTarget=Et,le=Me),Et=le,se&&Ee)t:{for(Me=US,B=se,q=Ee,Y=0,le=B;le;le=Me(le))Y++;le=0;for(var Re=q;Re;Re=Me(Re))le++;for(;0<Y-le;)B=Me(B),Y--;for(;0<le-Y;)q=Me(q),le--;for(;Y--;){if(B===q||q!==null&&B===q.alternate){Me=B;break t}B=Me(B),q=Me(q)}Me=null}else Me=null;se!==null&&Kv(ue,W,se,Me,!1),Ee!==null&&Et!==null&&Kv(ue,Et,Ee,Me,!0)}}e:{if(W=Q?ns(Q):window,se=W.nodeName&&W.nodeName.toLowerCase(),se==="select"||se==="input"&&W.type==="file")var ct=uy;else if(ly(W))if(dy)ct=Q2;else{ct=K2;var Ne=$2}else se=W.nodeName,!se||se.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Q&&xo(Q.elementType)&&(ct=uy):ct=Y2;if(ct&&(ct=ct(r,Q))){cy(ue,ct,c,oe);break e}Ne&&Ne(r,W,Q),r==="focusout"&&Q&&W.type==="number"&&Q.memoizedProps.value!=null&&Hl(W,"number",W.value)}switch(Ne=Q?ns(Q):window,r){case"focusin":(ly(Ne)||Ne.contentEditable==="true")&&(So=Ne,Mf=Q,nc=null);break;case"focusout":nc=Mf=So=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,vy(ue,c,oe);break;case"selectionchange":if(X2)break;case"keydown":case"keyup":vy(ue,c,oe)}var Be;if(ft)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else No?Ra(r,c)&&(tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(tt="onCompositionStart");tt&&(xr&&c.locale!=="ko"&&(No||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&No&&(Be=Ql()):(mr=oe,Yl="value"in mr?mr.value:mr.textContent,No=!0)),Ne=Dd(Q,tt),0<Ne.length&&(tt=new yr(tt,r,null,c,oe),ue.push({event:tt,listeners:Ne}),Be?tt.data=Be:(Be=To(c),Be!==null&&(tt.data=Be)))),(Be=ys?F2(r,c):G2(r,c))&&(tt=Dd(Q,"onBeforeInput"),0<tt.length&&(Ne=new yr("onBeforeInput","beforeinput",null,c,oe),ue.push({event:Ne,listeners:tt}),Ne.data=Be)),PS(ue,r,Q,c,oe)}Bv(ue,i)})}function Ac(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Dd(r,i){for(var c=i+"Capture",d=[];r!==null;){var x=r,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Us(r,c),x!=null&&d.unshift(Ac(r,x,b)),x=Us(r,i),x!=null&&d.push(Ac(r,x,b))),r.tag===3)return d;r=r.return}return[]}function US(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Kv(r,i,c,d,x){for(var b=i._reactName,T=[];c!==null&&c!==d;){var C=c,L=C.alternate,Q=C.stateNode;if(C=C.tag,L!==null&&L===d)break;C!==5&&C!==26&&C!==27||Q===null||(L=Q,x?(Q=Us(c,b),Q!=null&&T.unshift(Ac(c,Q,L))):x||(Q=Us(c,b),Q!=null&&T.push(Ac(c,Q,L)))),c=c.return}T.length!==0&&r.push({event:i,listeners:T})}var OS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function Yv(r){return(typeof r=="string"?r:""+r).replace(OS,`
`).replace(qS,"")}function Qv(r,i){return i=Yv(i),Yv(r)===i}function wt(r,i,c,d,x,b){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Fn(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Fn(r,""+d);break;case"className":ss(r,"class",d);break;case"tabIndex":ss(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(r,c,d);break;case"style":$l(r,d,b);break;case"data":if(i!=="object"){ss(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=vo(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(i!=="input"&&wt(r,i,"name",x.name,x,null),wt(r,i,"formEncType",x.formEncType,x,null),wt(r,i,"formMethod",x.formMethod,x,null),wt(r,i,"formTarget",x.formTarget,x,null)):(wt(r,i,"encType",x.encType,x,null),wt(r,i,"method",x.method,x,null),wt(r,i,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=vo(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=Vs);break;case"onScroll":d!=null&&Je("scroll",r);break;case"onScrollEnd":d!=null&&Je("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=vo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Je("beforetoggle",r),Je("toggle",r),go(r,"popover",d);break;case"xlinkActuate":Wt(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Wt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Wt(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Wt(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Wt(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Wt(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Wt(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Wt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Wt(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":go(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Du.get(c)||c,go(r,c,d))}}function rp(r,i,c,d,x,b){switch(c){case"style":$l(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Fn(r,d):(typeof d=="number"||typeof d=="bigint")&&Fn(r,""+d);break;case"onScroll":d!=null&&Je("scroll",r);break;case"onScrollEnd":d!=null&&Je("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ol.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),i=c.slice(2,x?c.length-7:void 0),b=r[hn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(i,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,d,x);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):go(r,c,d)}}}function wn(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",r),Je("load",r);var d=!1,x=!1,b;for(b in c)if(c.hasOwnProperty(b)){var T=c[b];if(T!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:wt(r,i,b,T,c,null)}}x&&wt(r,i,"srcSet",c.srcSet,c,null),d&&wt(r,i,"src",c.src,c,null);return;case"input":Je("invalid",r);var C=b=T=x=null,L=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var oe=c[d];if(oe!=null)switch(d){case"name":x=oe;break;case"type":T=oe;break;case"checked":L=oe;break;case"defaultChecked":Q=oe;break;case"value":b=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,i));break;default:wt(r,i,d,oe,c,null)}}Ru(r,b,C,L,Q,T,x,!1);return;case"select":Je("invalid",r),d=T=b=null;for(x in c)if(c.hasOwnProperty(x)&&(C=c[x],C!=null))switch(x){case"value":b=C;break;case"defaultValue":T=C;break;case"multiple":d=C;default:wt(r,i,x,C,c,null)}i=b,c=T,r.multiple=!!d,i!=null?bi(r,!!d,i,!1):c!=null&&bi(r,!!d,c,!0);return;case"textarea":Je("invalid",r),b=x=d=null;for(T in c)if(c.hasOwnProperty(T)&&(C=c[T],C!=null))switch(T){case"value":d=C;break;case"defaultValue":x=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:wt(r,i,T,C,c,null)}_i(r,d,x,b);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:wt(r,i,L,d,c,null)}return;case"dialog":Je("beforetoggle",r),Je("toggle",r),Je("cancel",r),Je("close",r);break;case"iframe":case"object":Je("load",r);break;case"video":case"audio":for(d=0;d<Sc.length;d++)Je(Sc[d],r);break;case"image":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"embed":case"source":case"link":Je("error",r),Je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:wt(r,i,Q,d,c,null)}return;default:if(xo(i)){for(oe in c)c.hasOwnProperty(oe)&&(d=c[oe],d!==void 0&&rp(r,i,oe,d,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(d=c[C],d!=null&&wt(r,i,C,d,c,null))}function zS(r,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,T=null,C=null,L=null,Q=null,oe=null;for(se in c){var ue=c[se];if(c.hasOwnProperty(se)&&ue!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":L=ue;default:d.hasOwnProperty(se)||wt(r,i,se,null,d,ue)}}for(var W in d){var se=d[W];if(ue=c[W],d.hasOwnProperty(W)&&(se!=null||ue!=null))switch(W){case"type":b=se;break;case"name":x=se;break;case"checked":Q=se;break;case"defaultChecked":oe=se;break;case"value":T=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:se!==ue&&wt(r,i,W,se,d,ue)}}yo(r,T,C,L,Q,oe,b,x);return;case"select":se=T=C=W=null;for(b in c)if(L=c[b],c.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":se=L;default:d.hasOwnProperty(b)||wt(r,i,b,null,d,L)}for(x in d)if(b=d[x],L=c[x],d.hasOwnProperty(x)&&(b!=null||L!=null))switch(x){case"value":W=b;break;case"defaultValue":C=b;break;case"multiple":T=b;default:b!==L&&wt(r,i,x,b,d,L)}i=C,c=T,d=se,W!=null?bi(r,!!c,W,!1):!!d!=!!c&&(i!=null?bi(r,!!c,i,!0):bi(r,!!c,c?[]:"",!1));return;case"textarea":se=W=null;for(C in c)if(x=c[C],c.hasOwnProperty(C)&&x!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:wt(r,i,C,null,d,x)}for(T in d)if(x=d[T],b=c[T],d.hasOwnProperty(T)&&(x!=null||b!=null))switch(T){case"value":W=x;break;case"defaultValue":se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&wt(r,i,T,x,d,b)}ku(r,W,se);return;case"option":for(var Ee in c)if(W=c[Ee],c.hasOwnProperty(Ee)&&W!=null&&!d.hasOwnProperty(Ee))switch(Ee){case"selected":r.selected=!1;break;default:wt(r,i,Ee,null,d,W)}for(L in d)if(W=d[L],se=c[L],d.hasOwnProperty(L)&&W!==se&&(W!=null||se!=null))switch(L){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:wt(r,i,L,W,d,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in c)W=c[Me],c.hasOwnProperty(Me)&&W!=null&&!d.hasOwnProperty(Me)&&wt(r,i,Me,null,d,W);for(Q in d)if(W=d[Q],se=c[Q],d.hasOwnProperty(Q)&&W!==se&&(W!=null||se!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:wt(r,i,Q,W,d,se)}return;default:if(xo(i)){for(var Et in c)W=c[Et],c.hasOwnProperty(Et)&&W!==void 0&&!d.hasOwnProperty(Et)&&rp(r,i,Et,void 0,d,W);for(oe in d)W=d[oe],se=c[oe],!d.hasOwnProperty(oe)||W===se||W===void 0&&se===void 0||rp(r,i,oe,W,d,se);return}}for(var B in c)W=c[B],c.hasOwnProperty(B)&&W!=null&&!d.hasOwnProperty(B)&&wt(r,i,B,null,d,W);for(ue in d)W=d[ue],se=c[ue],!d.hasOwnProperty(ue)||W===se||W==null&&se==null||wt(r,i,ue,W,d,se)}function Jv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FS(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var x=c[d],b=x.transferSize,T=x.initiatorType,C=x.duration;if(b&&C&&Jv(T)){for(T=0,C=x.responseEnd,d+=1;d<c.length;d++){var L=c[d],Q=L.startTime;if(Q>C)break;var oe=L.transferSize,ue=L.initiatorType;oe&&Jv(ue)&&(L=L.responseEnd,T+=oe*(L<C?1:(C-Q)/(L-Q)))}if(--d,i+=8*(b+T)/(x.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ip=null,ap=null;function Pd(r){return r.nodeType===9?r:r.ownerDocument}function Xv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function op(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lp=null;function GS(){var r=window.event;return r&&r.type==="popstate"?r===lp?!1:(lp=r,!0):(lp=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,BS=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(r){return eb.resolve(null).then(r).catch($S)}:Zv;function $S(r){setTimeout(function(){throw r})}function Hi(r){return r==="head"}function tb(r,i){var c=i,d=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(d===0){r.removeChild(x),Zo(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Cc(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Cc(c);for(var b=c.firstChild;b;){var T=b.nextSibling,C=b.nodeName;b[or]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=T}}else c==="body"&&Cc(r.ownerDocument.body);c=x}while(c);Zo(i)}function nb(r,i){var c=r;r=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=d}while(c)}function cp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":cp(c),po(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function KS(r,i,c,d){for(;r.nodeType===1;){var x=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[or])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Ts(r.nextSibling),r===null)break}return null}function YS(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Ts(r.nextSibling),r===null))return null;return r}function sb(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ts(r.nextSibling),r===null))return null;return r}function up(r){return r.data==="$?"||r.data==="$~"}function dp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function QS(r,i){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ts(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var hp=null;function rb(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(i===0)return Ts(r.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}r=r.nextSibling}return null}function ib(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return r;i--}else c!=="/$"&&c!=="/&"||i++}r=r.previousSibling}return null}function ab(r,i,c){switch(i=Pd(c),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Cc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);po(r)}var Ns=new Map,ob=new Set;function jd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Wr=fe.d;fe.d={f:JS,r:XS,D:WS,C:ZS,L:eA,m:tA,X:sA,S:nA,M:rA};function JS(){var r=Wr.f(),i=Sd();return r||i}function XS(r){var i=ms(r);i!==null&&i.tag===5&&i.type==="form"?Tx(i):Wr.r(r)}var Jo=typeof document>"u"?null:document;function lb(r,i,c){var d=Jo;if(d&&typeof i=="string"&&i){var x=zn(i);x='link[rel="'+r+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),ob.has(x)||(ob.add(x),r={rel:r,crossOrigin:c,href:i},d.querySelector(x)===null&&(i=d.createElement("link"),wn(i,"link",r),Xt(i),d.head.appendChild(i)))}}function WS(r){Wr.D(r),lb("dns-prefetch",r,null)}function ZS(r,i){Wr.C(r,i),lb("preconnect",r,i)}function eA(r,i,c){Wr.L(r,i,c);var d=Jo;if(d&&r&&i){var x='link[rel="preload"][as="'+zn(i)+'"]';i==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+zn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+zn(c.imageSizes)+'"]')):x+='[href="'+zn(r)+'"]';var b=x;switch(i){case"style":b=Xo(r);break;case"script":b=Wo(r)}Ns.has(b)||(r=_({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),Ns.set(b,r),d.querySelector(x)!==null||i==="style"&&d.querySelector(Ic(b))||i==="script"&&d.querySelector(Rc(b))||(i=d.createElement("link"),wn(i,"link",r),Xt(i),d.head.appendChild(i)))}}function tA(r,i){Wr.m(r,i);var c=Jo;if(c&&r){var d=i&&typeof i.as=="string"?i.as:"script",x='link[rel="modulepreload"][as="'+zn(d)+'"][href="'+zn(r)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Wo(r)}if(!Ns.has(b)&&(r=_({rel:"modulepreload",href:r},i),Ns.set(b,r),c.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Rc(b)))return}d=c.createElement("link"),wn(d,"link",r),Xt(d),c.head.appendChild(d)}}}function nA(r,i,c){Wr.S(r,i,c);var d=Jo;if(d&&r){var x=cr(d).hoistableStyles,b=Xo(r);i=i||"default";var T=x.get(b);if(!T){var C={loading:0,preload:null};if(T=d.querySelector(Ic(b)))C.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},c),(c=Ns.get(b))&&fp(r,c);var L=T=d.createElement("link");Xt(L),wn(L,"link",r),L._p=new Promise(function(Q,oe){L.onload=Q,L.onerror=oe}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ld(T,i,d)}T={type:"stylesheet",instance:T,count:1,state:C},x.set(b,T)}}}function sA(r,i){Wr.X(r,i);var c=Jo;if(c&&r){var d=cr(c).hoistableScripts,x=Wo(r),b=d.get(x);b||(b=c.querySelector(Rc(x)),b||(r=_({src:r,async:!0},i),(i=Ns.get(x))&&mp(r,i),b=c.createElement("script"),Xt(b),wn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function rA(r,i){Wr.M(r,i);var c=Jo;if(c&&r){var d=cr(c).hoistableScripts,x=Wo(r),b=d.get(x);b||(b=c.querySelector(Rc(x)),b||(r=_({src:r,async:!0,type:"module"},i),(i=Ns.get(x))&&mp(r,i),b=c.createElement("script"),Xt(b),wn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function cb(r,i,c,d){var x=(x=Ae.current)?jd(x):null;if(!x)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Xo(c.href),c=cr(x).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Xo(c.href);var b=cr(x).hoistableStyles,T=b.get(r);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,T),(b=x.querySelector(Ic(r)))&&!b._p&&(T.instance=b,T.state.loading=5),Ns.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ns.set(r,c),b||iA(x,r,c,T.state))),i&&d===null)throw Error(s(528,""));return T}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Wo(c),c=cr(x).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Xo(r){return'href="'+zn(r)+'"'}function Ic(r){return'link[rel="stylesheet"]['+r+"]"}function ub(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function iA(r,i,c,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),wn(i,"link",c),Xt(i),r.head.appendChild(i))}function Wo(r){return'[src="'+zn(r)+'"]'}function Rc(r){return"script[async]"+r}function db(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+zn(c.href)+'"]');if(d)return i.instance=d,Xt(d),d;var x=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Xt(d),wn(d,"style",x),Ld(d,c.precedence,r),i.instance=d;case"stylesheet":x=Xo(c.href);var b=r.querySelector(Ic(x));if(b)return i.state.loading|=4,i.instance=b,Xt(b),b;d=ub(c),(x=Ns.get(x))&&fp(d,x),b=(r.ownerDocument||r).createElement("link"),Xt(b);var T=b;return T._p=new Promise(function(C,L){T.onload=C,T.onerror=L}),wn(b,"link",d),i.state.loading|=4,Ld(b,c.precedence,r),i.instance=b;case"script":return b=Wo(c.src),(x=r.querySelector(Rc(b)))?(i.instance=x,Xt(x),x):(d=c,(x=Ns.get(b))&&(d=_({},c),mp(d,x)),r=r.ownerDocument||r,x=r.createElement("script"),Xt(x),wn(x,"link",d),r.head.appendChild(x),i.instance=x);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Ld(d,c.precedence,r));return i.instance}function Ld(r,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,T=0;T<d.length;T++){var C=d[T];if(C.dataset.precedence===i)b=C;else if(b!==x)break}b?b.parentNode.insertBefore(r,b.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function fp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Vd=null;function hb(r,i,c){if(Vd===null){var d=new Map,x=Vd=new Map;x.set(c,d)}else x=Vd,d=x.get(c),d||(d=new Map,x.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),x=0;x<c.length;x++){var b=c[x];if(!(b[or]||b[Jt]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(i)||"";T=r+T;var C=d.get(T);C?C.push(b):d.set(T,[b])}}return d}function fb(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function aA(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function mb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function oA(r,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Xo(d.href),b=i.querySelector(Ic(x));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Ud.bind(r),i.then(r,r)),c.state.loading|=4,c.instance=b,Xt(b);return}b=i.ownerDocument||i,d=ub(d),(x=Ns.get(x))&&fp(d,x),b=b.createElement("link"),Xt(b);var T=b;T._p=new Promise(function(C,L){T.onload=C,T.onerror=L}),wn(b,"link",d),c.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Ud.bind(r),i.addEventListener("load",c),i.addEventListener("error",c))}}var pp=0;function lA(r,i){return r.stylesheets&&r.count===0&&qd(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var d=setTimeout(function(){if(r.stylesheets&&qd(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+i);0<r.imgBytes&&pp===0&&(pp=62500*FS());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&qd(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>pp?50:800)+i);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function Ud(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Od=null;function qd(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Od=new Map,i.forEach(cA,r),Od=null,Ud.call(r))}function cA(r,i){if(!(i.state.loading&4)){var c=Od.get(r);if(c)var d=c.get(null);else{c=new Map,Od.set(r,c);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var T=x[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}x=i.instance,T=x.getAttribute("data-precedence"),b=c.get(T)||d,b===d&&c.set(null,x),c.set(T,x),this.count++,d=Ud.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),i.state.loading|=4}}var kc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function uA(r,i,c,d,x,b,T,C,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=On(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.hiddenUpdates=On(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function pb(r,i,c,d,x,b,T,C,L,Q,oe,ue){return r=new uA(r,i,c,T,L,Q,oe,ue,C),i=1,b===!0&&(i|=24),b=is(3,null,null,i),r.current=b,b.stateNode=r,i=Yf(),i.refCount++,r.pooledCache=i,i.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:i},Wf(b),r}function gb(r){return r?(r=Io,r):Io}function yb(r,i,c,d,x,b){x=gb(x),d.context===null?d.context=x:d.pendingContext=x,d=Di(i),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Pi(r,d,i),c!==null&&(Kn(c,r,i),cc(c,r,i))}function xb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function gp(r,i){xb(r,i),(r=r.alternate)&&xb(r,i)}function vb(r){if(r.tag===13||r.tag===31){var i=Da(r,67108864);i!==null&&Kn(i,r,67108864),gp(r,67108864)}}function bb(r){if(r.tag===13||r.tag===31){var i=us();i=ir(i);var c=Da(r,i);c!==null&&Kn(c,r,i),gp(r,i)}}var zd=!0;function dA(r,i,c,d){var x=X.T;X.T=null;var b=fe.p;try{fe.p=2,yp(r,i,c,d)}finally{fe.p=b,X.T=x}}function hA(r,i,c,d){var x=X.T;X.T=null;var b=fe.p;try{fe.p=8,yp(r,i,c,d)}finally{fe.p=b,X.T=x}}function yp(r,i,c,d){if(zd){var x=xp(d);if(x===null)sp(r,i,d,Fd,c),wb(r,d);else if(mA(x,r,i,c,d))d.stopPropagation();else if(wb(r,d),i&4&&-1<fA.indexOf(r)){for(;x!==null;){var b=ms(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Fe(b.pendingLanes);if(T!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var L=1<<31-Ce(T);C.entanglements[1]|=L,T&=~L}wr(b),(mt&6)===0&&(Td=qt()+500,Nc(0))}}break;case 31:case 13:C=Da(b,2),C!==null&&Kn(C,b,2),Sd(),gp(b,2)}if(b=xp(d),b===null&&sp(r,i,d,Fd,c),b===x)break;x=b}x!==null&&d.stopPropagation()}else sp(r,i,d,null,c)}}function xp(r){return r=ps(r),vp(r)}var Fd=null;function vp(r){if(Fd=null,r=lr(r),r!==null){var i=l(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=u(i),r!==null)return r;r=null}else if(c===31){if(r=h(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Fd=r,null}function _b(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case sr:return 2;case es:return 8;case ts:case ba:return 32;case xi:return 268435456;default:return 32}default:return 32}}var bp=!1,Bi=null,$i=null,Ki=null,Mc=new Map,Dc=new Map,Yi=[],fA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wb(r,i){switch(r){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Mc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(i.pointerId)}}function Pc(r,i,c,d,x,b){return r===null||r.nativeEvent!==b?(r={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},i!==null&&(i=ms(i),i!==null&&vb(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),r)}function mA(r,i,c,d,x){switch(i){case"focusin":return Bi=Pc(Bi,r,i,c,d,x),!0;case"dragenter":return $i=Pc($i,r,i,c,d,x),!0;case"mouseover":return Ki=Pc(Ki,r,i,c,d,x),!0;case"pointerover":var b=x.pointerId;return Mc.set(b,Pc(Mc.get(b)||null,r,i,c,d,x)),!0;case"gotpointercapture":return b=x.pointerId,Dc.set(b,Pc(Dc.get(b)||null,r,i,c,d,x)),!0}return!1}function Eb(r){var i=lr(r.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){r.blockedOn=i,js(r.priority,function(){bb(c)});return}}else if(i===31){if(i=h(c),i!==null){r.blockedOn=i,js(r.priority,function(){bb(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=xp(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Kl=d,c.target.dispatchEvent(d),Kl=null}else return i=ms(c),i!==null&&vb(i),r.blockedOn=c,!1;i.shift()}return!0}function Tb(r,i,c){Gd(r)&&c.delete(i)}function pA(){bp=!1,Bi!==null&&Gd(Bi)&&(Bi=null),$i!==null&&Gd($i)&&($i=null),Ki!==null&&Gd(Ki)&&(Ki=null),Mc.forEach(Tb),Dc.forEach(Tb)}function Hd(r,i){r.blockedOn===i&&(r.blockedOn=null,bp||(bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pA)))}var Bd=null;function Nb(r){Bd!==r&&(Bd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bd===r&&(Bd=null);for(var i=0;i<r.length;i+=3){var c=r[i],d=r[i+1],x=r[i+2];if(typeof d!="function"){if(vp(d||c)===null)continue;break}var b=ms(c);b!==null&&(r.splice(i,3),i-=3,xm(b,{pending:!0,data:x,method:c.method,action:d},d,x))}}))}function Zo(r){function i(L){return Hd(L,r)}Bi!==null&&Hd(Bi,r),$i!==null&&Hd($i,r),Ki!==null&&Hd(Ki,r),Mc.forEach(i),Dc.forEach(i);for(var c=0;c<Yi.length;c++){var d=Yi[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Yi.length&&(c=Yi[0],c.blockedOn===null);)Eb(c),c.blockedOn===null&&Yi.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var x=c[d],b=c[d+1],T=x[hn]||null;if(typeof b=="function")T||Nb(c);else if(T){var C=null;if(b&&b.hasAttribute("formAction")){if(x=b,T=b[hn]||null)C=T.formAction;else if(vp(x)!==null)continue}else C=T.action;typeof C=="function"?c[d+1]=C:(c.splice(d,3),d-=3),Nb(c)}}}function Sb(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function i(){x!==null&&(x(),x=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),x!==null&&(x(),x=null)}}}function _p(r){this._internalRoot=r}$d.prototype.render=_p.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,d=us();yb(c,d,r,i,null,null)},$d.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;yb(r.current,2,null,r,null,null),Sd(),i[ar]=null}};function $d(r){this._internalRoot=r}$d.prototype.unstable_scheduleHydration=function(r){if(r){var i=Su();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Yi.length&&i!==0&&i<Yi[c].priority;c++);Yi.splice(c,0,r),c===0&&Eb(r)}};var Ab=e.version;if(Ab!=="19.2.0")throw Error(s(527,Ab,"19.2.0"));fe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var gA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{Se=Kd.inject(gA),we=Kd}catch{}}return Lc.createRoot=function(r,i){if(!a(r))throw Error(s(299));var c=!1,d="",x=Px,b=jx,T=Lx;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=pb(r,1,!1,null,null,c,d,null,x,b,T,Sb),r[ar]=i.current,np(r),new _p(i)},Lc.hydrateRoot=function(r,i,c){if(!a(r))throw Error(s(299));var d=!1,x="",b=Px,T=jx,C=Lx,L=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(L=c.formState)),i=pb(r,1,!0,i,c??null,d,x,L,b,T,C,Sb),i.context=gb(null),c=i.current,d=us(),d=ir(d),x=Di(d),x.callback=null,Pi(c,x,d),c=d,i.current.lanes=c,Pr(i,c),wr(i),r[ar]=i.current,np(r),new $d(i)},Lc.version="19.2.0",Lc}var Vb;function SA(){if(Vb)return Tp.exports;Vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tp.exports=NA(),Tp.exports}var AA=SA();const CA=aE(AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Ub=n=>{const e=RA(n);return e.charAt(0).toUpperCase()+e.slice(1)},lE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),kA=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=H.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>H.createElement("svg",{ref:p,...MA,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:lE("lucide",a),...!l&&!kA(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,v])=>H.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(n,e)=>{const t=H.forwardRef(({className:s,...a},l)=>H.createElement(DA,{ref:l,iconNode:e,className:lE(`lucide-${IA(Ub(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Ub(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],jA=pe("activity",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fh=pe("arrow-left",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lt=pe("arrow-right",VA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Wa=pe("award",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],qA=pe("bell",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Zn=pe("book-open",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],GA=pe("book",FA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],gl=pe("brain",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],cE=pe("briefcase",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],eu=pe("calendar",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],uE=pe("chart-column",KA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],QA=pe("chart-no-axes-column-increasing",YA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Za=pe("chevron-down",JA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tr=pe("chevron-left",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cp=pe("chevron-right",WA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mh=pe("circle-alert",ZA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oo=pe("circle-check-big",eC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qn=pe("circle-check",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ph=pe("circle-plus",nC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ti=pe("circle-question-mark",sC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],iC=pe("circle-user",rC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oC=pe("circle-x",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bh=pe("clock",lC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],uC=pe("cloud-upload",cC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Tl=pe("crown",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xp=pe("download",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wp=pe("eye",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Zp=pe("facebook",mC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],gC=pe("file-check",pC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],xC=pe("file-plus",yC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],bC=pe("file-search",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ks=pe("file-text",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Gg=pe("flag",wC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],gh=pe("flame",EC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Uc=pe("folder-open",TC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],SC=pe("globe",NC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ri=pe("graduation-cap",AC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yh=pe("house",CC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],RC=pe("info",IC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Hg=pe("languages",kC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],la=pe("layers",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ob=pe("layout-dashboard",DC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],jC=pe("link",PC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],qb=pe("list",LC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rn=pe("loader-circle",VC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],eg=pe("log-in",UC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ka=pe("lock",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tu=pe("log-out",qC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tg=pe("mail",zC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ng=pe("map-pin",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],HC=pe("medal",GC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Bc=pe("megaphone",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],KC=pe("menu",$C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Bg=pe("message-circle",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],nu=pe("monitor",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],dE=pe("move-right",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],WC=pe("octagon-alert",XC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],zb=pe("palette",ZC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tI=pe("pen-line",eI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],$g=pe("pen-tool",nI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],rI=pe("percent",sI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],aI=pe("quote",iI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hE=pe("refresh-cw",oI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fE=pe("rotate-ccw",lI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],na=pe("save",cI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],xh=pe("school",uI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ca=pe("search",dI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fI=pe("send",hI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pI=pe("share-2",mI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],sg=pe("shield-alert",gI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xI=pe("shield-check",yI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],bI=pe("smartphone",vI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Kg=pe("sparkles",_I);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rg=pe("square-pen",wI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],sa=pe("star",EI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mE=pe("tag",TI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Yg=pe("target",NI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],AI=pe("text-align-start",SI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],II=pe("thumbs-up",CI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],pE=pe("timer",RI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ig=pe("trash-2",kI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],DI=pe("trending-up",MI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],su=pe("triangle-alert",PI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ol=pe("trophy",jI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],VI=pe("type",LI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jn=pe("user",UI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qI=pe("users",OI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Ip=pe("wand-sparkles",zI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nr=pe("x",FI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$h=pe("zap",GI),HI=()=>{};var Fb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},BI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let E=(h&15)<<2|m>>6,S=m&63;p||(S=64,u||(E=64)),s.push(t[v],t[_],t[E],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||m==null||_==null)throw new $I;const E=l<<2|h>>4;if(s.push(E),m!==64){const S=h<<4&240|m>>2;if(s.push(S),_!==64){const D=m<<6&192|_;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $I extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KI=function(n){const e=gE(n);return yE.encodeByteArray(e,!0)},vh=function(n){return KI(n).replace(/\./g,"")},xE=function(n){try{return yE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=()=>YI().__FIREBASE_DEFAULTS__,JI=()=>{if(typeof process>"u"||typeof Fb>"u")return;const n=Fb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xE(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return HI()||QI()||JI()||XI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vE=n=>{var e,t;return(t=(e=Kh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WI=n=>{const e=vE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},bE=()=>{var n;return(n=Kh())==null?void 0:n.config},_E=n=>{var e;return(e=Kh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vh(JSON.stringify(t)),vh(JSON.stringify(u)),""].join(".")}const $c={};function tR(){const n={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?n.emulator.push(e):n.prod.push(e);return n}function nR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Gb=!1;function EE(n,e){if(typeof window>"u"||typeof document>"u"||!Nl(window.location.host)||$c[n]===e||$c[n]||Gb)return;$c[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=tR().prod.length>0;function u(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Gb=!0,u()},E}function v(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=nR(s),S=t("text"),D=document.getElementById(S)||document.createElement("span"),G=t("learnmore"),F=document.getElementById(G)||document.createElement("a"),ee=t("preprendIcon"),ne=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const K=E.element;h(K),v(F,G);const ae=m();p(ne,ee),K.append(ne,D,F,ae),document.body.appendChild(K)}l?(D.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function rR(){var e;const n=(e=Kh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oR(){const n=Mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lR(){return!rR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function cR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="FirebaseError";class Ws extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=uR,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?dR(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Ws(a,h,s)}}function dR(n,e){return n.replace(hR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const hR=/\{\$([^}]+)}/g;function fR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ii(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(Hb(l)&&Hb(u)){if(!ii(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Hb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Oc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function qc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mR(n,e){const t=new pR(n,e);return t.subscribe.bind(t)}class pR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");gR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Rp),a.error===void 0&&(a.error=Rp),a.complete===void 0&&(a.complete=Rp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,xR=2,vR=14400*1e3,bR=.5;function Bb(n,e=yR,t=xR){const s=e*Math.pow(t,n),a=Math.round(bR*s*(Math.random()-.5)*2);return Math.min(vR,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class Ys{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new ZI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ER(e))try{this.getOrInitializeService({instanceIdentifier:$a})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=$a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$a){return this.instances.has(e)}getOptions(e=$a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$a){return this.component?this.component.multipleInstances?e:$a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wR(n){return n===$a?void 0:n}function ER(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const NR={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},SR=nt.INFO,AR={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},CR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=AR[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=SR,this._logHandler=CR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const IR=(n,e)=>e.some(t=>n instanceof t);let $b,Kb;function RR(){return $b||($b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kR(){return Kb||(Kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,ag=new WeakMap,CE=new WeakMap,kp=new WeakMap,Qg=new WeakMap;function MR(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ra(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,n)}).catch(()=>{}),Qg.set(e,n),e}function DR(n){if(ag.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});ag.set(n,e)}let og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function PR(n){og=n(og)}function jR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Mp(this),e,...t);return CE.set(s,e.sort?e.sort():[e]),ra(s)}:kR().includes(n)?function(...e){return n.apply(Mp(this),e),ra(AE.get(this))}:function(...e){return ra(n.apply(Mp(this),e))}}function LR(n){return typeof n=="function"?jR(n):(n instanceof IDBTransaction&&DR(n),IR(n,RR())?new Proxy(n,og):n)}function ra(n){if(n instanceof IDBRequest)return MR(n);if(kp.has(n))return kp.get(n);const e=LR(n);return e!==n&&(kp.set(n,e),Qg.set(e,n)),e}const Mp=n=>Qg.get(n);function IE(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=ra(u);return s&&u.addEventListener("upgradeneeded",p=>{s(ra(u.result),p.oldVersion,p.newVersion,ra(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const VR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],Dp=new Map;function Yb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=UR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||VR.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return Dp.set(e,l),l}PR(n=>({...n,get:(e,t,s)=>Yb(e,t)||n.get(e,t,s),has:(e,t)=>!!Yb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function qR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",Qb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Yh("@firebase/app"),zR="@firebase/app-compat",FR="@firebase/analytics-compat",GR="@firebase/analytics",HR="@firebase/app-check-compat",BR="@firebase/app-check",$R="@firebase/auth",KR="@firebase/auth-compat",YR="@firebase/database",QR="@firebase/data-connect",JR="@firebase/database-compat",XR="@firebase/functions",WR="@firebase/functions-compat",ZR="@firebase/installations",e4="@firebase/installations-compat",t4="@firebase/messaging",n4="@firebase/messaging-compat",s4="@firebase/performance",r4="@firebase/performance-compat",i4="@firebase/remote-config",a4="@firebase/remote-config-compat",o4="@firebase/storage",l4="@firebase/storage-compat",c4="@firebase/firestore",u4="@firebase/ai",d4="@firebase/firestore-compat",h4="firebase",f4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",m4={[lg]:"fire-core",[zR]:"fire-core-compat",[GR]:"fire-analytics",[FR]:"fire-analytics-compat",[BR]:"fire-app-check",[HR]:"fire-app-check-compat",[$R]:"fire-auth",[KR]:"fire-auth-compat",[YR]:"fire-rtdb",[QR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[XR]:"fire-fn",[WR]:"fire-fn-compat",[ZR]:"fire-iid",[e4]:"fire-iid-compat",[t4]:"fire-fcm",[n4]:"fire-fcm-compat",[s4]:"fire-perf",[r4]:"fire-perf-compat",[i4]:"fire-rc",[a4]:"fire-rc-compat",[o4]:"fire-gcs",[l4]:"fire-gcs-compat",[c4]:"fire-fst",[d4]:"fire-fst-compat",[u4]:"fire-vertex","fire-js":"fire-js",[h4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,p4=new Map,ug=new Map;function Jb(n,e){try{n.container.addComponent(e)}catch(t){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mr(n){const e=n.name;if(ug.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,n);for(const t of bh.values())Jb(t,n);for(const t of p4.values())Jb(t,n);return!0}function co(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ss(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new lo("app","Firebase",g4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=f4;function RE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:cg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=bE()),!t)throw ia.create("no-options");const l=bh.get(a);if(l){if(ii(t,l.options)&&ii(s,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new TR(a);for(const p of ug.values())u.addComponent(p);const h=new y4(t,s,u);return bh.set(a,h),h}function Jg(n=cg){const e=bh.get(n);if(!e&&n===cg&&bE())return RE();if(!e)throw ia.create("no-app",{appName:n});return e}function Cs(n,e,t){let s=m4[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(u.join(" "));return}Mr(new Ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",v4=1,ru="firebase-heartbeat-store";let Pp=null;function kE(){return Pp||(Pp=IE(x4,v4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),Pp}async function b4(n){try{const t=(await kE()).transaction(ru),s=await t.objectStore(ru).get(ME(n));return await t.done,s}catch(e){if(e instanceof Ws)ai.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(t.message)}}}async function Xb(n,e){try{const s=(await kE()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,ME(n)),await s.done}catch(t){if(t instanceof Ws)ai.warn(t.message);else{const s=ia.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ai.warn(s.message)}}}function ME(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=1024,w4=30;class E4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>w4){const u=S4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ai.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wb(),{heartbeatsToSend:s,unsentEntries:a}=T4(this._heartbeatsCache.heartbeats),l=vh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ai.warn(t),""}}}function Wb(){return new Date().toISOString().substring(0,10)}function T4(n,e=_4){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Zb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Zb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class N4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await b4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zb(n){return vh(JSON.stringify({version:2,heartbeats:n})).length}function S4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){Mr(new Ys("platform-logger",e=>new OR(e),"PRIVATE")),Mr(new Ys("heartbeat",e=>new E4(e),"PRIVATE")),Cs(lg,Qb,n),Cs(lg,Qb,"esm2020"),Cs("fire-js","")}A4("");var C4="firebase",I4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(C4,I4,"app");function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R4=DE,PE=new lo("auth","Firebase",DE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Yh("@firebase/auth");function k4(n,...e){_h.logLevel<=nt.WARN&&_h.warn(`Auth (${Sl}): ${n}`,...e)}function th(n,...e){_h.logLevel<=nt.ERROR&&_h.error(`Auth (${Sl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(n,...e){throw Xg(n,...e)}function Sr(n,...e){return Xg(n,...e)}function jE(n,e,t){const s={...R4(),[e]:t};return new lo("auth","Firebase",s).create(e,{appName:n.name})}function ni(n){return jE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return PE.create(n,...e)}function De(n,e,...t){if(!n)throw Xg(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw th(e),new Error(e)}function oi(n,e){n||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function M4(){return e_()==="http:"||e_()==="https:"}function e_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M4()||TE()||"connection"in navigator)?navigator.onLine:!0}function P4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=sR()||aR()}get(){return D4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(n,e){oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],V4=new gu(3e4,6e4);function hi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fi(n,e,t,s,a={}){return VE(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=pu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return iR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Nl(n.emulatorConfig.host)&&(m.credentials="include"),LE.fetch()(await UE(n,n.config.apiHost,t,h),m)})}async function VE(n,e,t){n._canInitEmulator=!1;const s={...j4,...e};try{const a=new O4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Yd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Yd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Yd(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw jE(n,v,m);Qs(n,v)}}catch(a){if(a instanceof Ws)throw a;Qs(n,"network-request-failed",{message:String(a)})}}async function yu(n,e,t,s,a={}){const l=await fi(n,e,t,s,a);return"mfaPendingCredential"in l&&Qs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function UE(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?Wg(n.config,a):`${n.config.apiScheme}://${a}`;return L4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function U4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sr(this.auth,"network-request-failed")),V4.get())})}}function Yd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Sr(n,e,s);return a.customData._tokenResponse=t,a}function t_(n){return n!==void 0&&n.enterprise!==void 0}class q4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return U4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z4(n,e){return fi(n,"GET","/v2/recaptchaConfig",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(n,e){return fi(n,"POST","/v1/accounts:delete",e)}async function wh(n,e){return fi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G4(n,e=!1){const t=Ht(n),s=await t.getIdToken(e),a=Zg(s);De(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Kc(jp(a.auth_time)),issuedAtTime:Kc(jp(a.iat)),expirationTime:Kc(jp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function jp(n){return Number(n)*1e3}function Zg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const a=xE(t);return a?JSON.parse(a):(th("Failed to decode base64 JWT payload"),null)}catch(a){return th("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function n_(n){const e=Zg(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ws&&H4(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function H4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await iu(n,wh(e,{idToken:t}));De(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?OE(a.providerUserInfo):[],u=K4(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),m=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function $4(n){const e=Ht(n);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K4(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function OE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(n,e){const t=await VE(n,{},async()=>{const s=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await UE(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Nl(n.emulatorConfig.host)&&(p.credentials="include"),LE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Q4(n,e){return fi(n,"POST","/v2/accounts:revokeToken",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=n_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await Y4(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new ll;return s&&(De(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(De(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Bs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new B4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G4(this,e)}reload(){return $4(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ss(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await iu(this,F4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:D,stsTokenManager:G}=t;De(_&&G,e,"internal-error");const F=ll.fromJSON(this.name,G);De(typeof _=="string",e,"internal-error"),Ji(s,e.name),Ji(a,e.name),De(typeof E=="boolean",e,"internal-error"),De(typeof S=="boolean",e,"internal-error"),Ji(l,e.name),Ji(u,e.name),Ji(h,e.name),Ji(p,e.name),Ji(m,e.name),Ji(v,e.name);const ee=new Bs({uid:_,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:S,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:F,createdAt:m,lastLoginAt:v});return D&&Array.isArray(D)&&(ee.providerData=D.map(ne=>({...ne}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const a=new ll;a.updateFromServerResponse(t);const l=new Bs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Eh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?OE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new ll;h.updateFromIdToken(s);const p=new Bs({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function ei(n){oi(n instanceof Function,"Expected a class definition");let e=s_.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,s_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qE.type="NONE";const r_=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=nh(this.userKey,a.apiKey,l),this.fullPersistenceKey=nh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wh(this.auth,{idToken:e}).catch(()=>{});return t?Bs._fromGetAccountInfoResponse(this.auth,t,e):null}return Bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new cl(ei(r_),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||ei(r_);const u=nh(s,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(u);if(v){let _;if(typeof v=="string"){const E=await wh(e,{idToken:v}).catch(()=>{});if(!E)break;_=await Bs._fromGetAccountInfoResponse(e,E,v)}else _=Bs._fromJSON(e,v);m!==l&&(h=_),l=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new cl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new cl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(KE(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(BE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zE(n=Mn()){return/firefox\//i.test(n)}function FE(n=Mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(n=Mn()){return/crios\//i.test(n)}function HE(n=Mn()){return/iemobile/i.test(n)}function BE(n=Mn()){return/android/i.test(n)}function $E(n=Mn()){return/blackberry/i.test(n)}function KE(n=Mn()){return/webos/i.test(n)}function e0(n=Mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function J4(n=Mn()){var e;return e0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function X4(){return oR()&&document.documentMode===10}function YE(n=Mn()){return e0(n)||BE(n)||KE(n)||$E(n)||/windows phone/i.test(n)||HE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e=[]){let t;switch(n){case"Browser":t=i_(Mn());break;case"Worker":t=`${i_(Mn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(n,e={}){return fi(n,"GET","/v2/passwordPolicy",hi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=6;class t5{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a_(this),this.idTokenSubscription=new a_(this),this.beforeStateQueue=new W4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ei(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wh(this,{idToken:e}),s=await Bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ss(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ss(this.app))return Promise.reject(ni(this));const t=e?Ht(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ss(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ss(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z4(this),t=new t5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Q4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ei(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&k4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ga(n){return Ht(n)}class a_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mR(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s5(n){Qh=n}function JE(n){return Qh.loadJS(n)}function r5(){return Qh.recaptchaEnterpriseScript}function i5(){return Qh.gapiScript}function a5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class o5{constructor(){this.enterprise=new l5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class l5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c5="recaptcha-enterprise",XE="NO_RECAPTCHA";class u5{constructor(e){this.type=c5,this.auth=ga(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{z4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new q4(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function a(l,u,h){const p=window.grecaptcha;t_(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(XE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o5().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!t&&t_(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=r5();p.length!==0&&(p+=h),JE(p).then(()=>{a(h,l,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function o_(n,e,t,s=!1,a=!1){const l=new u5(n);let u;if(a)u=XE;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Th(n,e,t,s,a){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await o_(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await o_(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n,e){const t=co(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ii(l,e??{}))return a;Qs(a,"already-initialized")}return t.initialize({options:e})}function h5(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ei);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function f5(n,e,t){const s=ga(n);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=WE(e),{host:u,port:h}=m5(e),p=h===null?"":`:${h}`,m={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(ii(m,s.config.emulator)&&ii(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Nl(u)?(wE(`${l}//${u}${p}`),EE("Auth",!0)):p5()}function WE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function m5(n){const e=WE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:l_(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:l_(u)}}}function l_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function p5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function g5(n,e){return fi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",hi(n,e))}async function x5(n,e){return fi(n,"POST","/v1/accounts:sendOobCode",hi(n,e))}async function v5(n,e){return x5(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",hi(n,e))}async function _5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends t0{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,t,"signInWithPassword",y5);case"emailLink":return b5(e,{email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,s,"signUpPassword",g5);case"emailLink":return _5(e,{idToken:t,email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="http://localhost";class eo extends t0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new eo(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ul(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:w5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T5(n){const e=Oc(qc(n)).link,t=e?Oc(qc(e)).deep_link_id:null,s=Oc(qc(n)).deep_link_id;return(s?Oc(qc(s)).link:null)||s||t||e||n}class n0{constructor(e){const t=Oc(qc(e)),s=t.apiKey??null,a=t.oobCode??null,l=E5(t.mode??null);De(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=T5(e);try{return new n0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.providerId=Al.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=n0.parseLink(t);return De(s,"argument-error"),au._fromEmailAndCode(e,s.code,s.tenantId)}}Al.PROVIDER_ID="password";Al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends ZE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends xu{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wi.credential(t,s)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends xu{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends xu{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ea.credential(t,s)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(n,e){return yu(n,"POST","/v1/accounts:signUp",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Bs._fromIdTokenResponse(e,s,a),u=c_(s);return new to({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=c_(s);return new to({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function c_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Ws{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Nh(e,t,s,a)}}function eT(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,l,e,s):l})}async function S5(n,e,t=!1){const s=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return to._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(n,e,t=!1){const{auth:s}=n;if(Ss(s.app))return Promise.reject(ni(s));const a="reauthenticate";try{const l=await iu(n,eT(s,a,e,n),t);De(l.idToken,s,"internal-error");const u=Zg(l.idToken);De(u,s,"internal-error");const{sub:h}=u;return De(n.uid===h,s,"user-mismatch"),to._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qs(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n,e,t=!1){if(Ss(n.app))return Promise.reject(ni(n));const s="signIn",a=await eT(n,s,e),l=await to._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function C5(n,e){return tT(ga(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(n){const e=ga(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I5(n,e,t){const s=ga(n);await Th(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",v5)}async function R5(n,e,t){if(Ss(n.app))return Promise.reject(ni(n));const s=ga(n),u=await Th(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nT(n),p}),h=await to._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function k5(n,e,t){return Ss(n.app)?Promise.reject(ni(n)):C5(Ht(n),Al.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nT(n),s})}function M5(n,e,t,s){return Ht(n).onIdTokenChanged(e,t,s)}function D5(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function P5(n,e,t,s){return Ht(n).onAuthStateChanged(e,t,s)}function j5(n){return Ht(n).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=1e3,V5=10;class rT extends sT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);X4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,V5):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},L5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const U5=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends sT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iT.type="SESSION";const aT=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Jh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,l)),p=await O5(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const m=s0("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(E.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function z5(n){Ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function F5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function H5(){return oT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebaseLocalStorageDb",B5=1,Ah="firebaseLocalStorage",cT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function $5(){const n=indexedDB.deleteDatabase(lT);return new vu(n).toPromise()}function fg(){const n=indexedDB.open(lT,B5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ah,{keyPath:cT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await $5(),e(await fg()))})})}async function u_(n,e,t){const s=Xh(n,!0).put({[cT]:e,value:t});return new vu(s).toPromise()}async function K5(n,e){const t=Xh(n,!1).get(e),s=await new vu(t).toPromise();return s===void 0?null:s.value}function d_(n,e){const t=Xh(n,!0).delete(e);return new vu(t).toPromise()}const Y5=800,Q5=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Q5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(H5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await F5(),!this.activeServiceWorker)return;this.sender=new q5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await u_(e,Sh,"1"),await d_(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>u_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>K5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>d_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Xh(a,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const J5=uT;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(n,e){return e?ei(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends t0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W5(n){return tT(n.auth,new r0(n),n.bypassAuthState)}function Z5(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),A5(t,new r0(n),n.bypassAuthState)}async function ek(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),S5(t,new r0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W5;case"linkViaPopup":case"linkViaRedirect":return ek;case"reauthViaPopup":case"reauthViaRedirect":return Z5;default:Qs(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new gu(2e3,1e4);class rl extends dT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,rl.currentPopupAction&&rl.currentPopupAction.cancel(),rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=s0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tk.get())};e()}}rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="pendingRedirect",sh=new Map;class sk extends dT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const s=await rk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rk(n,e){const t=ok(e),s=ak(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function ik(n,e){sh.set(n._key(),e)}function ak(n){return ei(n._redirectPersistence)}function ok(n){return nh(nk,n.config.apiKey,n.name)}async function lk(n,e,t=!1){if(Ss(n.app))return Promise.reject(ni(n));const s=ga(n),a=X5(s,e),u=await new sk(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=600*1e3;class uk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!hT(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ck&&this.cachedEventUids.clear(),this.cachedEventUids.has(h_(e))}saveEventToCache(e){this.cachedEventUids.add(h_(e)),this.lastProcessedEventTime=Date.now()}}function h_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(n,e={}){return fi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mk=/^https?/;async function pk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hk(n);for(const t of e)try{if(gk(t))return}catch{}Qs(n,"unauthorized-domain")}function gk(n){const e=dg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!mk.test(t))return!1;if(fk.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new gu(3e4,6e4);function f_(){const n=Ar().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xk(n){return new Promise((e,t)=>{var a,l,u;function s(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),t(Sr(n,"network-request-failed"))},timeout:yk.get()})}if((l=(a=Ar().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ar().gapi)!=null&&u.load)s();else{const h=a5("iframefcb");return Ar()[h]=()=>{gapi.load?s():t(Sr(n,"network-request-failed"))},JE(`${i5()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw rh=null,e})}let rh=null;function vk(n){return rh=rh||xk(n),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new gu(5e3,15e3),_k="__/auth/iframe",wk="emulator/auth/iframe",Ek={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nk(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wg(e,wk):`https://${n.config.authDomain}/${_k}`,s={apiKey:e.apiKey,appName:n.name,v:Sl},a=Tk.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pu(s).slice(1)}`}async function Sk(n){const e=await vk(n),t=Ar().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:Nk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ek,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Sr(n,"network-request-failed"),h=Ar().setTimeout(()=>{l(u)},bk.get());function p(){Ar().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ck=500,Ik=600,Rk="_blank",kk="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mk(n,e,t,s=Ck,a=Ik){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...Ak,width:s.toString(),height:a.toString(),top:l,left:u},m=Mn().toLowerCase();t&&(h=GE(m)?Rk:t),zE(m)&&(e=e||kk,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(J4(m)&&h!=="_self")return Dk(e||"",h),new m_(null);const _=window.open(e||"",h,v);De(_,n,"popup-blocked");try{_.focus()}catch{}return new m_(_)}function Dk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="__/auth/handler",jk="emulator/auth/handler",Lk=encodeURIComponent("fac");async function p_(n,e,t,s,a,l){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Sl,eventId:a};if(e instanceof ZE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",fR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof xu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),m=p?`#${Lk}=${encodeURIComponent(p)}`:"";return`${Vk(n)}?${pu(h).slice(1)}${m}`}function Vk({config:n}){return n.emulator?Wg(n,jk):`https://${n.authDomain}/${Pk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="webStorageSupport";class Uk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=lk,this._overrideRedirectResult=ik}async _openPopup(e,t,s,a){var u;oi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await p_(e,t,s,dg(),a);return Mk(e,l,s0())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await p_(e,t,s,dg(),a);return z5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(oi(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Sk(e),s=new uk(e);return t.register("authEvent",a=>(De(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lp,{type:Lp},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Lp];l!==void 0&&t(!!l),Qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YE()||FE()||e0()}}const Ok=Uk;var g_="@firebase/auth",y_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Fk(n){Mr(new Ys("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QE(n)},m=new n5(s,a,l,p);return h5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Mr(new Ys("auth-internal",e=>{const t=ga(e.getProvider("auth").getImmediate());return(s=>new qk(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(g_,y_,zk(n)),Cs(g_,y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=300,Hk=_E("authIdTokenMaxAge")||Gk;let x_=null;const Bk=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Hk)return;const a=t==null?void 0:t.token;x_!==a&&(x_=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $k(n=Jg()){const e=co(n,"auth");if(e.isInitialized())return e.getImmediate();const t=d5(n,{popupRedirectResolver:Ok,persistence:[J5,U5,aT]}),s=_E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Bk(l.toString());D5(t,u,()=>u(t.currentUser)),M5(t,h=>u(h))}}const a=vE("auth");return a&&f5(t,`http://${a}`),t}function Kk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}s5({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Sr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",Kk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Fk("Browser");var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,fT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function R(){}R.prototype=A.prototype,I.F=A.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(P,j,U){for(var M=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)M[$e-2]=arguments[$e];return A.prototype[j].apply(P,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,A,R){R||(R=0);const P=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)P[j]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(j=0;j<16;++j)P[j]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=I.g[0],R=I.g[1],j=I.g[2];let U=I.g[3],M;M=A+(U^R&(j^U))+P[0]+3614090360&4294967295,A=R+(M<<7&4294967295|M>>>25),M=U+(j^A&(R^j))+P[1]+3905402710&4294967295,U=A+(M<<12&4294967295|M>>>20),M=j+(R^U&(A^R))+P[2]+606105819&4294967295,j=U+(M<<17&4294967295|M>>>15),M=R+(A^j&(U^A))+P[3]+3250441966&4294967295,R=j+(M<<22&4294967295|M>>>10),M=A+(U^R&(j^U))+P[4]+4118548399&4294967295,A=R+(M<<7&4294967295|M>>>25),M=U+(j^A&(R^j))+P[5]+1200080426&4294967295,U=A+(M<<12&4294967295|M>>>20),M=j+(R^U&(A^R))+P[6]+2821735955&4294967295,j=U+(M<<17&4294967295|M>>>15),M=R+(A^j&(U^A))+P[7]+4249261313&4294967295,R=j+(M<<22&4294967295|M>>>10),M=A+(U^R&(j^U))+P[8]+1770035416&4294967295,A=R+(M<<7&4294967295|M>>>25),M=U+(j^A&(R^j))+P[9]+2336552879&4294967295,U=A+(M<<12&4294967295|M>>>20),M=j+(R^U&(A^R))+P[10]+4294925233&4294967295,j=U+(M<<17&4294967295|M>>>15),M=R+(A^j&(U^A))+P[11]+2304563134&4294967295,R=j+(M<<22&4294967295|M>>>10),M=A+(U^R&(j^U))+P[12]+1804603682&4294967295,A=R+(M<<7&4294967295|M>>>25),M=U+(j^A&(R^j))+P[13]+4254626195&4294967295,U=A+(M<<12&4294967295|M>>>20),M=j+(R^U&(A^R))+P[14]+2792965006&4294967295,j=U+(M<<17&4294967295|M>>>15),M=R+(A^j&(U^A))+P[15]+1236535329&4294967295,R=j+(M<<22&4294967295|M>>>10),M=A+(j^U&(R^j))+P[1]+4129170786&4294967295,A=R+(M<<5&4294967295|M>>>27),M=U+(R^j&(A^R))+P[6]+3225465664&4294967295,U=A+(M<<9&4294967295|M>>>23),M=j+(A^R&(U^A))+P[11]+643717713&4294967295,j=U+(M<<14&4294967295|M>>>18),M=R+(U^A&(j^U))+P[0]+3921069994&4294967295,R=j+(M<<20&4294967295|M>>>12),M=A+(j^U&(R^j))+P[5]+3593408605&4294967295,A=R+(M<<5&4294967295|M>>>27),M=U+(R^j&(A^R))+P[10]+38016083&4294967295,U=A+(M<<9&4294967295|M>>>23),M=j+(A^R&(U^A))+P[15]+3634488961&4294967295,j=U+(M<<14&4294967295|M>>>18),M=R+(U^A&(j^U))+P[4]+3889429448&4294967295,R=j+(M<<20&4294967295|M>>>12),M=A+(j^U&(R^j))+P[9]+568446438&4294967295,A=R+(M<<5&4294967295|M>>>27),M=U+(R^j&(A^R))+P[14]+3275163606&4294967295,U=A+(M<<9&4294967295|M>>>23),M=j+(A^R&(U^A))+P[3]+4107603335&4294967295,j=U+(M<<14&4294967295|M>>>18),M=R+(U^A&(j^U))+P[8]+1163531501&4294967295,R=j+(M<<20&4294967295|M>>>12),M=A+(j^U&(R^j))+P[13]+2850285829&4294967295,A=R+(M<<5&4294967295|M>>>27),M=U+(R^j&(A^R))+P[2]+4243563512&4294967295,U=A+(M<<9&4294967295|M>>>23),M=j+(A^R&(U^A))+P[7]+1735328473&4294967295,j=U+(M<<14&4294967295|M>>>18),M=R+(U^A&(j^U))+P[12]+2368359562&4294967295,R=j+(M<<20&4294967295|M>>>12),M=A+(R^j^U)+P[5]+4294588738&4294967295,A=R+(M<<4&4294967295|M>>>28),M=U+(A^R^j)+P[8]+2272392833&4294967295,U=A+(M<<11&4294967295|M>>>21),M=j+(U^A^R)+P[11]+1839030562&4294967295,j=U+(M<<16&4294967295|M>>>16),M=R+(j^U^A)+P[14]+4259657740&4294967295,R=j+(M<<23&4294967295|M>>>9),M=A+(R^j^U)+P[1]+2763975236&4294967295,A=R+(M<<4&4294967295|M>>>28),M=U+(A^R^j)+P[4]+1272893353&4294967295,U=A+(M<<11&4294967295|M>>>21),M=j+(U^A^R)+P[7]+4139469664&4294967295,j=U+(M<<16&4294967295|M>>>16),M=R+(j^U^A)+P[10]+3200236656&4294967295,R=j+(M<<23&4294967295|M>>>9),M=A+(R^j^U)+P[13]+681279174&4294967295,A=R+(M<<4&4294967295|M>>>28),M=U+(A^R^j)+P[0]+3936430074&4294967295,U=A+(M<<11&4294967295|M>>>21),M=j+(U^A^R)+P[3]+3572445317&4294967295,j=U+(M<<16&4294967295|M>>>16),M=R+(j^U^A)+P[6]+76029189&4294967295,R=j+(M<<23&4294967295|M>>>9),M=A+(R^j^U)+P[9]+3654602809&4294967295,A=R+(M<<4&4294967295|M>>>28),M=U+(A^R^j)+P[12]+3873151461&4294967295,U=A+(M<<11&4294967295|M>>>21),M=j+(U^A^R)+P[15]+530742520&4294967295,j=U+(M<<16&4294967295|M>>>16),M=R+(j^U^A)+P[2]+3299628645&4294967295,R=j+(M<<23&4294967295|M>>>9),M=A+(j^(R|~U))+P[0]+4096336452&4294967295,A=R+(M<<6&4294967295|M>>>26),M=U+(R^(A|~j))+P[7]+1126891415&4294967295,U=A+(M<<10&4294967295|M>>>22),M=j+(A^(U|~R))+P[14]+2878612391&4294967295,j=U+(M<<15&4294967295|M>>>17),M=R+(U^(j|~A))+P[5]+4237533241&4294967295,R=j+(M<<21&4294967295|M>>>11),M=A+(j^(R|~U))+P[12]+1700485571&4294967295,A=R+(M<<6&4294967295|M>>>26),M=U+(R^(A|~j))+P[3]+2399980690&4294967295,U=A+(M<<10&4294967295|M>>>22),M=j+(A^(U|~R))+P[10]+4293915773&4294967295,j=U+(M<<15&4294967295|M>>>17),M=R+(U^(j|~A))+P[1]+2240044497&4294967295,R=j+(M<<21&4294967295|M>>>11),M=A+(j^(R|~U))+P[8]+1873313359&4294967295,A=R+(M<<6&4294967295|M>>>26),M=U+(R^(A|~j))+P[15]+4264355552&4294967295,U=A+(M<<10&4294967295|M>>>22),M=j+(A^(U|~R))+P[6]+2734768916&4294967295,j=U+(M<<15&4294967295|M>>>17),M=R+(U^(j|~A))+P[13]+1309151649&4294967295,R=j+(M<<21&4294967295|M>>>11),M=A+(j^(R|~U))+P[4]+4149444226&4294967295,A=R+(M<<6&4294967295|M>>>26),M=U+(R^(A|~j))+P[11]+3174756917&4294967295,U=A+(M<<10&4294967295|M>>>22),M=j+(A^(U|~R))+P[2]+718787259&4294967295,j=U+(M<<15&4294967295|M>>>17),M=R+(U^(j|~A))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+U&4294967295}s.prototype.v=function(I,A){A===void 0&&(A=I.length);const R=A-this.blockSize,P=this.C;let j=this.h,U=0;for(;U<A;){if(j==0)for(;U<=R;)a(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<A;)if(P[j++]=I.charCodeAt(U++),j==this.blockSize){a(this,P),j=0;break}}else for(;U<A;)if(P[j++]=I[U++],j==this.blockSize){a(this,P),j=0;break}}this.h=j,this.o+=A},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)I[A++]=this.g[R]>>>P&255;return I};function l(I,A){var R=h;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=A(I)}function u(I,A){this.h=A;const R=[];let P=!0;for(let j=I.length-1;j>=0;j--){const U=I[j]|0;P&&U==A||(R[j]=U,P=!1)}this.g=R}var h={};function p(I){return-128<=I&&I<128?l(I,function(A){return new u([A|0],A<0?-1:0)}):new u([I|0],I<0?-1:0)}function m(I){if(isNaN(I)||!isFinite(I))return _;if(I<0)return F(m(-I));const A=[];let R=1;for(let P=0;I>=R;P++)A[P]=I/R|0,R*=4294967296;return new u(A,0)}function v(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return F(v(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(A,8));let P=_;for(let U=0;U<I.length;U+=8){var j=Math.min(8,I.length-U);const M=parseInt(I.substring(U,U+j),A);j<8?(j=m(Math.pow(A,j)),P=P.j(j).add(m(M))):(P=P.j(R),P=P.add(m(M)))}return P}var _=p(0),E=p(1),S=p(16777216);n=u.prototype,n.m=function(){if(G(this))return-F(this).m();let I=0,A=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);I+=(P>=0?P:4294967296+P)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(G(this))return"-"+F(this).toString(I);const A=m(Math.pow(I,6));var R=this;let P="";for(;;){const j=ae(R,A).g;R=ee(R,j.j(A));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=j,D(R))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function G(I){return I.h==-1}n.l=function(I){return I=ee(this,I),G(I)?-1:D(I)?0:1};function F(I){const A=I.g.length,R=[];for(let P=0;P<A;P++)R[P]=~I.g[P];return new u(R,~I.h).add(E)}n.abs=function(){return G(this)?F(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),R=[];let P=0;for(let j=0;j<=A;j++){let U=P+(this.i(j)&65535)+(I.i(j)&65535),M=(U>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);P=M>>>16,U&=65535,M&=65535,R[j]=M<<16|U}return new u(R,R[R.length-1]&-2147483648?-1:0)};function ee(I,A){return I.add(F(A))}n.j=function(I){if(D(this)||D(I))return _;if(G(this))return G(I)?F(this).j(F(I)):F(F(this).j(I));if(G(I))return F(this.j(F(I)));if(this.l(S)<0&&I.l(S)<0)return m(this.m()*I.m());const A=this.g.length+I.g.length,R=[];for(var P=0;P<2*A;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let j=0;j<I.g.length;j++){const U=this.i(P)>>>16,M=this.i(P)&65535,$e=I.i(j)>>>16,Ke=I.i(j)&65535;R[2*P+2*j]+=M*Ke,ne(R,2*P+2*j),R[2*P+2*j+1]+=U*Ke,ne(R,2*P+2*j+1),R[2*P+2*j+1]+=M*$e,ne(R,2*P+2*j+1),R[2*P+2*j+2]+=U*$e,ne(R,2*P+2*j+2)}for(I=0;I<A;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=A;I<2*A;I++)R[I]=0;return new u(R,0)};function ne(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function K(I,A){this.g=I,this.h=A}function ae(I,A){if(D(A))throw Error("division by zero");if(D(I))return new K(_,_);if(G(I))return A=ae(F(I),A),new K(F(A.g),F(A.h));if(G(A))return A=ae(I,F(A)),new K(F(A.g),A.h);if(I.g.length>30){if(G(I)||G(A))throw Error("slowDivide_ only works with positive integers.");for(var R=E,P=A;P.l(I)<=0;)R=Z(R),P=Z(P);var j=z(R,1),U=z(P,1);for(P=z(P,2),R=z(R,2);!D(P);){var M=U.add(P);M.l(I)<=0&&(j=j.add(R),U=M),P=z(P,1),R=z(R,1)}return A=ee(I,j.j(A)),new K(j,A)}for(j=_;I.l(A)>=0;){for(R=Math.max(1,Math.floor(I.m()/A.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=m(R),M=U.j(A);G(M)||M.l(I)>0;)R-=P,U=m(R),M=U.j(A);D(U)&&(U=E),j=j.add(U),I=ee(I,M)}return new K(j,I)}n.B=function(I){return ae(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)&I.i(P);return new u(R,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)|I.i(P);return new u(R,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)^I.i(P);return new u(R,this.h^I.h)};function Z(I){const A=I.g.length+1,R=[];for(let P=0;P<A;P++)R[P]=I.i(P)<<1|I.i(P-1)>>>31;return new u(R,I.h)}function z(I,A){const R=A>>5;A%=32;const P=I.g.length-R,j=[];for(let U=0;U<P;U++)j[U]=A>0?I.i(U+R)>>>A|I.i(U+R+1)<<32-A:I.i(U+R);return new u(j,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,fT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,aa=u}).apply(typeof v_<"u"?v_:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,zc,pT,ih,mg,gT,yT,xT;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var w=0;w<y.length;++w){var N=y[w];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function a(y,w){if(w)e:{var N=s;y=y.split(".");for(var k=0;k<y.length-1;k++){var $=y[k];if(!($ in N))break e;N=N[$]}y=y[y.length-1],k=N[y],w=w(k),w!=k&&w!=null&&e(N,y,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(w){var N=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&N.push([k,w[k]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(y){var w=typeof y;return w=="object"&&y!=null||w=="function"}function p(y,w,N){return y.call.apply(y.bind,arguments)}function m(y,w,N){return m=p,m.apply(null,arguments)}function v(y,w){var N=Array.prototype.slice.call(arguments,1);return function(){var k=N.slice();return k.push.apply(k,arguments),y.apply(this,k)}}function _(y,w){function N(){}N.prototype=w.prototype,y.Z=w.prototype,y.prototype=new N,y.prototype.constructor=y,y.Ob=function(k,$,te){for(var ye=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ye[Ge-2]=arguments[Ge];return w.prototype[$].apply(k,ye)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function S(y){const w=y.length;if(w>0){const N=Array(w);for(let k=0;k<w;k++)N[k]=y[k];return N}return[]}function D(y,w){for(let k=1;k<arguments.length;k++){const $=arguments[k];var N=typeof $;if(N=N!="object"?N:$?Array.isArray($)?"array":N:"null",N=="array"||N=="object"&&typeof $.length=="number"){N=y.length||0;const te=$.length||0;y.length=N+te;for(let ye=0;ye<te;ye++)y[N+ye]=$[ye]}else y.push($)}}class G{constructor(w,N){this.i=w,this.j=N,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function F(y){u.setTimeout(()=>{throw y},0)}function ee(){var y=I;let w=null;return y.g&&(w=y.g,y.g=y.g.next,y.g||(y.h=null),w.next=null),w}class ne{constructor(){this.h=this.g=null}add(w,N){const k=K.get();k.set(w,N),this.h?this.h.next=k:this.g=k,this.h=k}}var K=new G(()=>new ae,y=>y.reset());class ae{constructor(){this.next=this.g=this.h=null}set(w,N){this.h=w,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,z=!1,I=new ne,A=()=>{const y=Promise.resolve(void 0);Z=()=>{y.then(R)}};function R(){for(var y;y=ee();){try{y.h.call(y.g)}catch(N){F(N)}var w=K;w.j(y),w.h<100&&(w.h++,y.next=w.g,w.g=y)}z=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(y,w){this.type=y,this.g=this.target=w,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var y=!1,w=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const N=()=>{};u.addEventListener("test",N,w),u.removeEventListener("test",N,w)}catch{}return y})();function M(y){return/^[\s\xa0]*$/.test(y)}function $e(y,w){j.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,w)}_($e,j),$e.prototype.init=function(y,w){const N=this.type=y.type,k=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=w,w=y.relatedTarget,w||(N=="mouseover"?w=y.fromElement:N=="mouseout"&&(w=y.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),X=0;function fe(y,w,N,k,$){this.listener=y,this.proxy=null,this.src=w,this.type=N,this.capture=!!k,this.ha=$,this.key=++X,this.da=this.fa=!1}function Te(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Ve(y,w,N){for(const k in y)w.call(N,y[k],k,y)}function Le(y,w){for(const N in y)w.call(void 0,y[N],N,y)}function O(y){const w={};for(const N in y)w[N]=y[N];return w}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(y,w){let N,k;for(let $=1;$<arguments.length;$++){k=arguments[$];for(N in k)y[N]=k[N];for(let te=0;te<J.length;te++)N=J[te],Object.prototype.hasOwnProperty.call(k,N)&&(y[N]=k[N])}}function re(y){this.src=y,this.g={},this.h=0}re.prototype.add=function(y,w,N,k,$){const te=y.toString();y=this.g[te],y||(y=this.g[te]=[],this.h++);const ye=Ae(y,w,k,$);return ye>-1?(w=y[ye],N||(w.fa=!1)):(w=new fe(w,this.src,te,!!k,$),w.fa=N,y.push(w)),w};function he(y,w){const N=w.type;if(N in y.g){var k=y.g[N],$=Array.prototype.indexOf.call(k,w,void 0),te;(te=$>=0)&&Array.prototype.splice.call(k,$,1),te&&(Te(w),y.g[N].length==0&&(delete y.g[N],y.h--))}}function Ae(y,w,N,k){for(let $=0;$<y.length;++$){const te=y[$];if(!te.da&&te.listener==w&&te.capture==!!N&&te.ha==k)return $}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Ye={};function je(y,w,N,k,$){if(Array.isArray(w)){for(let te=0;te<w.length;te++)je(y,w[te],N,k,$);return null}return N=tr(N),y&&y[Ke]?y.J(w,N,h(k)?!!k.capture:!1,$):gn(y,w,N,!1,k,$)}function gn(y,w,N,k,$,te){if(!w)throw Error("Invalid event type");const ye=h($)?!!$.capture:!!$;let Ge=Ot(y);if(Ge||(y[Ie]=Ge=new re(y)),N=Ge.add(w,N,k,ye,te),N.proxy)return N;if(k=ze(),N.proxy=k,k.src=y,k.listener=N,y.addEventListener)U||($=ye),$===void 0&&($=!1),y.addEventListener(w.toString(),k,$);else if(y.attachEvent)y.attachEvent(Ut(w.toString()),k);else if(y.addListener&&y.removeListener)y.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return N}function ze(){function y(N){return w.call(y.src,y.listener,N)}const w=lt;return y}function ht(y,w,N,k,$){if(Array.isArray(w))for(var te=0;te<w.length;te++)ht(y,w[te],N,k,$);else k=h(k)?!!k.capture:!!k,N=tr(N),y&&y[Ke]?(y=y.i,te=String(w).toString(),te in y.g&&(w=y.g[te],N=Ae(w,N,k,$),N>-1&&(Te(w[N]),Array.prototype.splice.call(w,N,1),w.length==0&&(delete y.g[te],y.h--)))):y&&(y=Ot(y))&&(w=y.g[w.toString()],y=-1,w&&(y=Ae(w,N,k,$)),(N=y>-1?w[y]:null)&&at(N))}function at(y){if(typeof y!="number"&&y&&!y.da){var w=y.src;if(w&&w[Ke])he(w.i,y);else{var N=y.type,k=y.proxy;w.removeEventListener?w.removeEventListener(N,k,y.capture):w.detachEvent?w.detachEvent(Ut(N),k):w.addListener&&w.removeListener&&w.removeListener(k),(N=Ot(w))?(he(N,y),N.h==0&&(N.src=null,w[Ie]=null)):Te(y)}}}function Ut(y){return y in Ye?Ye[y]:Ye[y]="on"+y}function lt(y,w){if(y.da)y=!0;else{w=new $e(w,this);const N=y.listener,k=y.ha||y.src;y.fa&&at(y),y=N.call(k,w)}return y}function Ot(y){return y=y[Ie],y instanceof re?y:null}var er="__closure_events_fn_"+(Math.random()*1e9>>>0);function tr(y){return typeof y=="function"?y:(y[er]||(y[er]=function(w){return y.handleEvent(w)}),y[er])}function kt(){P.call(this),this.i=new re(this),this.M=this,this.G=null}_(kt,P),kt.prototype[Ke]=!0,kt.prototype.removeEventListener=function(y,w,N,k){ht(this,y,w,N,k)};function jt(y,w){var N,k=y.G;if(k)for(N=[];k;k=k.G)N.push(k);if(y=y.M,k=w.type||w,typeof w=="string")w=new j(w,y);else if(w instanceof j)w.target=w.target||y;else{var $=w;w=new j(k,y),V(w,$)}$=!0;let te,ye;if(N)for(ye=N.length-1;ye>=0;ye--)te=w.g=N[ye],$=Sn(te,k,!0,w)&&$;if(te=w.g=y,$=Sn(te,k,!0,w)&&$,$=Sn(te,k,!1,w)&&$,N)for(ye=0;ye<N.length;ye++)te=w.g=N[ye],$=Sn(te,k,!1,w)&&$}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var y=this.i;for(const w in y.g){const N=y.g[w];for(let k=0;k<N.length;k++)Te(N[k]);delete y.g[w],y.h--}}this.G=null},kt.prototype.J=function(y,w,N,k){return this.i.add(String(y),w,!1,N,k)},kt.prototype.K=function(y,w,N,k){return this.i.add(String(y),w,!0,N,k)};function Sn(y,w,N,k){if(w=y.i.g[String(w)],!w)return!0;w=w.concat();let $=!0;for(let te=0;te<w.length;++te){const ye=w[te];if(ye&&!ye.da&&ye.capture==N){const Ge=ye.listener,Bt=ye.ha||ye.src;ye.fa&&he(y.i,ye),$=Ge.call(Bt,k)!==!1&&$}}return $&&!k.defaultPrevented}function yi(y,w){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:u.setTimeout(y,w||0)}function nr(y){y.g=yi(()=>{y.g=null,y.i&&(y.i=!1,nr(y))},y.l);const w=y.h;y.h=null,y.m.apply(null,w)}class qt extends P{constructor(w,N){super(),this.m=w,this.l=N,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:nr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(y){P.call(this),this.h=y,this.g={}}_(Ms,P);var sr=[];function es(y){Ve(y.g,function(w,N){this.g.hasOwnProperty(N)&&at(w)},y),y.g={}}Ms.prototype.N=function(){Ms.Z.N.call(this),es(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=u.JSON.stringify,ba=u.JSON.parse,xi=class{stringify(y){return u.JSON.stringify(y,void 0)}parse(y){return u.JSON.parse(y,void 0)}};function Un(){}function me(){}var Se={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function we(){j.call(this,"d")}_(we,j);function ge(){j.call(this,"c")}_(ge,j);var Ce={},Xe=null;function We(){return Xe=Xe||new kt}Ce.Ia="serverreachability";function Qt(y){j.call(this,Ce.Ia,y)}_(Qt,j);function Ze(y){const w=We();jt(w,new Qt(w))}Ce.STAT_EVENT="statevent";function ie(y,w){j.call(this,Ce.STAT_EVENT,y),this.stat=w}_(ie,j);function xe(y){const w=We();jt(w,new ie(w,y))}Ce.Ja="timingevent";function Fe(y,w){j.call(this,Ce.Ja,y),this.size=w}_(Fe,j);function Mt(y,w){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){y()},w)}function cn(){this.g=!0}cn.prototype.ua=function(){this.g=!1};function Ds(y,w,N,k,$,te){y.info(function(){if(y.g)if(te){var ye="",Ge=te.split("&");for(let ft=0;ft<Ge.length;ft++){var Bt=Ge[ft].split("=");if(Bt.length>1){const Dt=Bt[0];Bt=Bt[1];const ys=Dt.split("_");ye=ys.length>=2&&ys[1]=="type"?ye+(Dt+"="+Bt+"&"):ye+(Dt+"=redacted&")}}}else ye=null;else ye=te;return"XMLHTTP REQ ("+k+") [attempt "+$+"]: "+w+`
`+N+`
`+ye})}function rr(y,w,N,k,$,te,ye){y.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+$+"]: "+w+`
`+N+`
`+te+" "+ye})}function On(y,w,N,k){y.info(function(){return"XMLHTTP TEXT ("+w+"): "+qn(y,N)+(k?" "+k:"")})}function Pr(y,w){y.info(function(){return"TIMEOUT: "+w})}cn.prototype.info=function(){};function qn(y,w){if(!y.g)return w;if(!w)return null;try{const te=JSON.parse(w);if(te){for(y=0;y<te.length;y++)if(Array.isArray(te[y])){var N=te[y];if(!(N.length<2)){var k=N[1];if(Array.isArray(k)&&!(k.length<1)){var $=k[0];if($!="noop"&&$!="stop"&&$!="close")for(let ye=1;ye<k.length;ye++)k[ye]=""}}}}return ts(te)}catch{return w}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ps={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_a;function ir(){}_(ir,Un),ir.prototype.g=function(){return new XMLHttpRequest},_a=new ir;function fs(y){return encodeURIComponent(String(y))}function Su(y){var w=1;y=y.split(":");const N=[];for(;w>0&&y.length;)N.push(y.shift()),w--;return y.length&&N.push(y.join(":")),N}function js(y,w,N,k){this.j=y,this.i=w,this.l=N,this.S=k||1,this.V=new Ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ls}function Ls(){this.i=null,this.g="",this.h=!1}var Jt={},hn={};function ar(y,w,N){y.M=1,y.A=wa(Wt(w)),y.u=N,y.R=!0,mo(y,null)}function mo(y,w){y.F=Date.now(),or(y),y.B=Wt(y.A);var N=y.B,k=y.S;Array.isArray(k)||(k=[String(k)]),xo(N.i,"t",k),y.C=0,N=y.j.L,y.h=new Ls,y.g=zu(y.j,N?w:null,!y.u),y.P>0&&(y.O=new qt(m(y.Y,y,y.g),y.P)),w=y.V,N=y.g,k=y.ba;var $="readystatechange";Array.isArray($)||($&&(sr[0]=$.toString()),$=sr);for(let te=0;te<$.length;te++){const ye=je(N,$[te],k||w.handleEvent,!1,w.h||w);if(!ye)break;w.g[ye.key]=ye}w=y.J?O(y.J):{},y.u?(y.v||(y.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,w)):(y.v="GET",y.g.ea(y.B,y.v,null,w)),Ze(),Ds(y.i,y.v,y.B,y.l,y.S,y.u)}js.prototype.ba=function(y){y=y.target;const w=this.O;w&&Os(y)==3?w.j():this.Y(y)},js.prototype.Y=function(y){try{if(y==this.g)e:{const Ge=Os(this.g),Bt=this.g.ya(),ft=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Ge!=4||Bt==7||(Bt==8||ft<=0?Ze(3):Ze(2)),lr(this);var w=this.g.ca();this.X=w;var N=Cf(this);if(this.o=w==200,rr(this.i,this.v,this.B,this.l,this.S,Ge,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,$=this.g;if((k=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(k)){var te=k;break t}}te=null}if(y=te)On(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cr(this,y);else{this.o=!1,this.m=3,xe(12),ns(this),ms(this);break e}}if(this.R){y=!0;let Dt;for(;!this.K&&this.C<N.length;)if(Dt=Cu(this,N),Dt==hn){Ge==4&&(this.m=4,xe(14),y=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Jt){this.m=4,xe(15),On(this.i,this.l,N,"[Invalid Chunk]"),y=!1;break}else On(this.i,this.l,Dt,null),cr(this,Dt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||N.length!=0||this.h.h||(this.m=1,xe(16),y=!1),this.o=this.o&&y,!y)On(this.i,this.l,N,"[Invalid Chunked Response]"),ns(this),ms(this);else if(N.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Wl(ye),ye.P=!0,xe(11))}}else On(this.i,this.l,N,null),cr(this,N);Ge==4&&ns(this),this.o&&!this.K&&(Ge==4?Vu(this.j,this):(this.o=!1,or(this)))}else Lr(this.g),w==400&&N.indexOf("Unknown SID")>0?(this.m=3,xe(12)):(this.m=0,xe(13)),ns(this),ms(this)}}}catch{}finally{}};function Cf(y){if(!Au(y))return y.g.la();const w=xn(y.g);if(w==="")return"";let N="";const k=w.length,$=Os(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return ns(y),ms(y),"";y.h.i=new u.TextDecoder}for(let te=0;te<k;te++)y.h.h=!0,N+=y.h.i.decode(w[te],{stream:!($&&te==k-1)});return w.length=0,y.h.g+=N,y.C=0,y.h.g}function Au(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Cu(y,w){var N=y.C,k=w.indexOf(`
`,N);return k==-1?hn:(N=Number(w.substring(N,k)),isNaN(N)?Jt:(k+=1,k+N>w.length?hn:(w=w.slice(k,k+N),y.C=k+N,w)))}js.prototype.cancel=function(){this.K=!0,ns(this)};function or(y){y.T=Date.now()+y.H,po(y,y.H)}function po(y,w){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Mt(m(y.aa,y),w)}function lr(y){y.D&&(u.clearTimeout(y.D),y.D=null)}js.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Pr(this.i,this.B),this.M!=2&&(Ze(),xe(17)),ns(this),this.m=2,ms(this)):po(this,this.T-y)};function ms(y){y.j.I==0||y.K||Vu(y.j,y)}function ns(y){lr(y);var w=y.O;w&&typeof w.dispose=="function"&&w.dispose(),y.O=null,es(y.V),y.g&&(w=y.g,y.g=null,w.abort(),w.dispose())}function cr(y,w){try{var N=y.j;if(N.I!=0&&(N.g==y||dr(N.h,y))){if(!y.L&&dr(N.h,y)&&N.I==3){try{var k=N.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var $=k;if($[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<y.F)Eo(N),Si(N);else break e;Ia(N),xe(18)}}else N.xa=$[1],0<N.xa-N.K&&$[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Mt(m(N.Va,N),6e3));ur(N.h)<=1&&N.ta&&(N.ta=void 0)}else yr(N,11)}else if((y.L||N.g==y)&&Eo(N),!M(w))for($=N.Ba.g.parse(w),w=0;w<$.length;w++){let ft=$[w];const Dt=ft[0];if(!(Dt<=N.K))if(N.K=Dt,ft=ft[1],N.I==2)if(ft[0]=="c"){N.M=ft[1],N.ba=ft[2];const ys=ft[3];ys!=null&&(N.ka=ys,N.j.info("VER="+N.ka));const xr=ft[4];xr!=null&&(N.za=xr,N.j.info("SVER="+N.za));const qs=ft[5];qs!=null&&typeof qs=="number"&&qs>0&&(k=1.5*qs,N.O=k,N.j.info("backChannelRequestTimeoutMs_="+k)),k=N;const zs=y.g;if(zs){const Ra=zs.g?zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var te=k.h;te.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ql(te,te.h),te.h=null))}if(k.G){const To=zs.g?zs.g.getResponseHeader("X-HTTP-Session-Id"):null;To&&(k.wa=To,yt(k.J,k.G,To))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-y.F,N.j.info("Handshake RTT: "+N.T+"ms")),k=N;var ye=y;if(k.na=qu(k,k.L?k.ba:null,k.W),ye.L){zl(k.h,ye);var Ge=ye,Bt=k.O;Bt&&(Ge.H=Bt),Ge.D&&(lr(Ge),or(Ge)),k.g=ye}else ju(k);N.i.length>0&&gr(N)}else ft[0]!="stop"&&ft[0]!="close"||yr(N,7);else N.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?yr(N,7):Jl(N):ft[0]!="noop"&&N.l&&N.l.qa(ft),N.A=0)}}Ze(4)}catch{}}var Xt=class{constructor(y,w){this.g=y,this.map=w}};function Ul(y){this.l=y||10,u.PerformanceNavigationTiming?(y=u.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ol(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function ur(y){return y.h?1:y.g?y.g.size:0}function dr(y,w){return y.h?y.h==w:y.g?y.g.has(w):!1}function ql(y,w){y.g?y.g.add(w):y.h=w}function zl(y,w){y.h&&y.h==w?y.h=null:y.g&&y.g.has(w)&&y.g.delete(w)}Ul.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Fl(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let w=y.i;for(const N of y.g.values())w=w.concat(N.G);return w}return S(y.i)}var Iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function go(y,w){if(y){y=y.split("&");for(let N=0;N<y.length;N++){const k=y[N].indexOf("=");let $,te=null;k>=0?($=y[N].substring(0,k),te=y[N].substring(k+1)):$=y[N],w($,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ss(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;y instanceof ss?(this.l=y.l,fn(this,y.j),this.o=y.o,this.g=y.g,vi(this,y.u),this.h=y.h,Gl(this,Du(y.i)),this.m=y.m):y&&(w=String(y).match(Iu))?(this.l=!1,fn(this,w[1]||"",!0),this.o=hr(w[2]||""),this.g=hr(w[3]||"",!0),vi(this,w[4]),this.h=hr(w[5]||"",!0),Gl(this,w[6]||"",!0),this.m=hr(w[7]||"")):(this.l=!1,this.i=new _i(null,this.l))}ss.prototype.toString=function(){const y=[];var w=this.j;w&&y.push(Ea(w,yo,!0),":");var N=this.g;return(N||w=="file")&&(y.push("//"),(w=this.o)&&y.push(Ea(w,yo,!0),"@"),y.push(fs(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&y.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&y.push("/"),y.push(Ea(N,N.charAt(0)=="/"?Hl:Ru,!0))),(N=this.i.toString())&&y.push("?",N),(N=this.m)&&y.push("#",Ea(N,ku)),y.join("")},ss.prototype.resolve=function(y){const w=Wt(this);let N=!!y.j;N?fn(w,y.j):N=!!y.o,N?w.o=y.o:N=!!y.g,N?w.g=y.g:N=y.u!=null;var k=y.h;if(N)vi(w,y.u);else if(N=!!y.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var $=w.h.lastIndexOf("/");$!=-1&&(k=w.h.slice(0,$+1)+k)}if($=k,$==".."||$==".")k="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){k=$.lastIndexOf("/",0)==0,$=$.split("/");const te=[];for(let ye=0;ye<$.length;){const Ge=$[ye++];Ge=="."?k&&ye==$.length&&te.push(""):Ge==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),k&&ye==$.length&&te.push("")):(te.push(Ge),k=!0)}k=te.join("/")}else k=$}return N?w.h=k:N=y.i.toString()!=="",N?Gl(w,Du(y.i)):N=!!y.m,N&&(w.m=y.m),w};function Wt(y){return new ss(y)}function fn(y,w,N){y.j=N?hr(w,!0):w,y.j&&(y.j=y.j.replace(/:$/,""))}function vi(y,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);y.u=w}else y.u=null}function Gl(y,w,N){w instanceof _i?(y.i=w,vo(y.i,y.l)):(N||(w=Ea(w,bi)),y.i=new _i(w,y.l))}function yt(y,w,N){y.i.set(w,N)}function wa(y){return yt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function hr(y,w){return y?w?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ea(y,w,N){return typeof y=="string"?(y=encodeURI(y).replace(w,zn),N&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function zn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var yo=/[#\/\?@]/g,Ru=/[#\?:]/g,Hl=/[#\?]/g,bi=/[#\?@]/g,ku=/#/g;function _i(y,w){this.h=this.g=null,this.i=y||null,this.j=!!w}function Fn(y){y.g||(y.g=new Map,y.h=0,y.i&&go(y.i,function(w,N){y.add(decodeURIComponent(w.replace(/\+/g," ")),N)}))}n=_i.prototype,n.add=function(y,w){Fn(this),this.i=null,y=wi(this,y);let N=this.g.get(y);return N||this.g.set(y,N=[]),N.push(w),this.h+=1,this};function Mu(y,w){Fn(y),w=wi(y,w),y.g.has(w)&&(y.i=null,y.h-=y.g.get(w).length,y.g.delete(w))}function Bl(y,w){return Fn(y),w=wi(y,w),y.g.has(w)}n.forEach=function(y,w){Fn(this),this.g.forEach(function(N,k){N.forEach(function($){y.call(w,$,k,this)},this)},this)};function $l(y,w){Fn(y);let N=[];if(typeof w=="string")Bl(y,w)&&(N=N.concat(y.g.get(wi(y,w))));else for(y=Array.from(y.g.values()),w=0;w<y.length;w++)N=N.concat(y[w]);return N}n.set=function(y,w){return Fn(this),this.i=null,y=wi(this,y),Bl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[w]),this.h+=1,this},n.get=function(y,w){return y?(y=$l(this,y),y.length>0?String(y[0]):w):w};function xo(y,w,N){Mu(y,w),N.length>0&&(y.i=null,y.g.set(wi(y,w),S(N)),y.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var N=w[k];const $=fs(N);N=$l(this,N);for(let te=0;te<N.length;te++){let ye=$;N[te]!==""&&(ye+="="+fs(N[te])),y.push(ye)}}return this.i=y.join("&")};function Du(y){const w=new _i;return w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),w}function wi(y,w){return w=String(w),y.j&&(w=w.toLowerCase()),w}function vo(y,w){w&&!y.j&&(Fn(y),y.i=null,y.g.forEach(function(N,k){const $=k.toLowerCase();k!=$&&(Mu(this,k),xo(this,$,N))},y)),y.j=w}function Vs(y,w){const N=new cn;if(u.Image){const k=new Image;k.onload=v(ps,N,"TestLoadImage: loaded",!0,w,k),k.onerror=v(ps,N,"TestLoadImage: error",!1,w,k),k.onabort=v(ps,N,"TestLoadImage: abort",!1,w,k),k.ontimeout=v(ps,N,"TestLoadImage: timeout",!1,w,k),u.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=y}else w(!1)}function Kl(y,w){const N=new cn,k=new AbortController,$=setTimeout(()=>{k.abort(),ps(N,"TestPingServer: timeout",!1,w)},1e4);fetch(y,{signal:k.signal}).then(te=>{clearTimeout($),te.ok?ps(N,"TestPingServer: ok",!0,w):ps(N,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout($),ps(N,"TestPingServer: error",!1,w)})}function ps(y,w,N,k,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),k(N)}catch{}}function Ei(){this.g=new xi}function fr(y){this.i=y.Sb||null,this.h=y.ab||!1}_(fr,Un),fr.prototype.g=function(){return new Ta(this.i,this.h)};function Ta(y,w){kt.call(this),this.H=y,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ta,kt),n=Ta.prototype,n.open=function(y,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=w,this.readyState=1,Us(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(w.body=y),(this.H||u).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function bo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var w=y.value?y.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!y.done}))&&(this.response=this.responseText+=w)}y.done?Ti(this):Us(this),this.readyState==3&&bo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ti(this))},n.Na=function(y){this.g&&(this.response=y,Ti(this))},n.ga=function(){this.g&&Ti(this)};function Ti(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Us(y)}n.setRequestHeader=function(y,w){this.A.append(y,w)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],w=this.h.entries();for(var N=w.next();!N.done;)N=N.value,y.push(N[0]+": "+N[1]),N=w.next();return y.join(`\r
`)};function Us(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function gs(y){let w="";return Ve(y,function(N,k){w+=k,w+=":",w+=N,w+=`\r
`}),w}function Na(y,w,N){e:{for(k in N){var k=!1;break e}k=!0}k||(N=gs(N),typeof y=="string"?N!=null&&fs(N):yt(y,w,N))}function bt(y){kt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(bt,kt);var mr=/^https?$/i,Yl=["POST","PUT"];n=bt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,w,N,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);w=w?w.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_a.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(y),!0),this.B=!1}catch(te){Sa(this,te);return}if(y=N||"",N=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var $ in k)N.set($,k[$]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const te of k.keys())N.set(te,k.get(te));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(N.keys()).find(te=>te.toLowerCase()=="content-type"),$=u.FormData&&y instanceof u.FormData,!(Array.prototype.indexOf.call(Yl,w,void 0)>=0)||k||$||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ye]of N)this.g.setRequestHeader(te,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(te){Sa(this,te)}};function Sa(y,w){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=w,y.o=5,Ql(y),jr(y)}function Ql(y){y.A||(y.A=!0,jt(y,"complete"),jt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,jt(this,"complete"),jt(this,"abort"),jr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),bt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Aa(this):this.Xa())},n.Xa=function(){Aa(this)};function Aa(y){if(y.h&&typeof l<"u"){if(y.v&&Os(y)==4)setTimeout(y.Ca.bind(y),0);else if(jt(y,"readystatechange"),Os(y)==4){y.h=!1;try{const te=y.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var N;if(!(N=w)){var k;if(k=te===0){let ye=String(y.D).match(Iu)[1]||null;!ye&&u.self&&u.self.location&&(ye=u.self.location.protocol.slice(0,-1)),k=!mr.test(ye?ye.toLowerCase():"")}N=k}if(N)jt(y,"complete"),jt(y,"success");else{y.o=6;try{var $=Os(y)>2?y.g.statusText:""}catch{$=""}y.l=$+" ["+y.ca()+"]",Ql(y)}}finally{jr(y)}}}}function jr(y,w){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const N=y.g;y.g=null,w||jt(y,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Os(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Os(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var w=this.g.responseText;return y&&w.indexOf(y)==0&&(w=w.substring(y.length)),ba(w)}};function xn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Lr(y){const w={};y=(y.g&&Os(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<y.length;k++){if(M(y[k]))continue;var N=Su(y[k]);const $=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const te=w[$]||[];w[$]=te,te.push(N)}Le(w,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(y,w,N){return N&&N.internalChannelParams&&N.internalChannelParams[y]||w}function Ni(y){this.za=0,this.i=[],this.j=new cn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pr("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pr("baseRetryDelayMs",5e3,y),this.Za=pr("retryDelaySeedMs",1e4,y),this.Ta=pr("forwardChannelMaxRetries",2,y),this.va=pr("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Ul(y&&y.concurrentRequestLimit),this.Ba=new Ei,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ni.prototype,n.ka=8,n.I=1,n.connect=function(y,w,N,k){xe(0),this.W=y,this.H=w||{},N&&k!==void 0&&(this.H.OSID=N,this.H.OAID=k),this.F=this.X,this.J=qu(this,null,this.W),gr(this)};function Jl(y){if(_o(y),y.I==3){var w=y.V++,N=Wt(y.J);if(yt(N,"SID",y.M),yt(N,"RID",w),yt(N,"TYPE","terminate"),Ca(y,N),w=new js(y,y.j,w),w.M=2,w.A=wa(Wt(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(w.A.toString(),"")}catch{}!N&&u.Image&&(new Image().src=w.A,N=!0),N||(w.g=zu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),or(w)}Ou(y)}function Si(y){y.g&&(Wl(y),y.g.cancel(),y.g=null)}function _o(y){Si(y),y.v&&(u.clearTimeout(y.v),y.v=null),Eo(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&u.clearTimeout(y.m),y.m=null)}function gr(y){if(!Ol(y.h)&&!y.m){y.m=!0;var w=y.Ea;Z||A(),z||(Z(),z=!0),I.add(w,y),y.D=0}}function wo(y,w){return ur(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=w.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Mt(m(y.Ea,y,w),Uu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const $=new js(this,this.j,y);let te=this.o;if(this.U&&(te?(te=O(te),V(te,this.U)):te=this.U),this.u!==null||this.R||($.J=te,te=null),this.S)e:{for(var w=0,N=0;N<this.i.length;N++){t:{var k=this.i[N];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=N;break e}if(w===4096||N===this.i.length-1){w=N+1;break e}}w=1e3}else w=1e3;w=Pu(this,$,w),N=Wt(this.J),yt(N,"RID",y),yt(N,"CVER",22),this.G&&yt(N,"X-HTTP-Session-Id",this.G),Ca(this,N),te&&(this.R?w="headers="+fs(gs(te))+"&"+w:this.u&&Na(N,this.u,te)),ql(this.h,$),this.Ra&&yt(N,"TYPE","init"),this.S?(yt(N,"$req",w),yt(N,"SID","null"),$.U=!0,ar($,N,null)):ar($,N,w),this.I=2}}else this.I==3&&(y?Xl(this,y):this.i.length==0||Ol(this.h)||Xl(this))};function Xl(y,w){var N;w?N=w.l:N=y.V++;const k=Wt(y.J);yt(k,"SID",y.M),yt(k,"RID",N),yt(k,"AID",y.K),Ca(y,k),y.u&&y.o&&Na(k,y.u,y.o),N=new js(y,y.j,N,y.D+1),y.u===null&&(N.J=y.o),w&&(y.i=w.G.concat(y.i)),w=Pu(y,N,1e3),N.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),ql(y.h,N),ar(N,k,w)}function Ca(y,w){y.H&&Ve(y.H,function(N,k){yt(w,k,N)}),y.l&&Ve({},function(N,k){yt(w,k,N)})}function Pu(y,w,N){N=Math.min(y.i.length,N);const k=y.l?m(y.l.Ka,y.l,y):null;e:{var $=y.i;let Ge=-1;for(;;){const Bt=["count="+N];Ge==-1?N>0?(Ge=$[0].g,Bt.push("ofs="+Ge)):Ge=0:Bt.push("ofs="+Ge);let ft=!0;for(let Dt=0;Dt<N;Dt++){var te=$[Dt].g;const ys=$[Dt].map;if(te-=Ge,te<0)Ge=Math.max(0,$[Dt].g-100),ft=!1;else try{te="req"+te+"_"||"";try{var ye=ys instanceof Map?ys:Object.entries(ys);for(const[xr,qs]of ye){let zs=qs;h(qs)&&(zs=ts(qs)),Bt.push(te+xr+"="+encodeURIComponent(zs))}}catch(xr){throw Bt.push(te+"type="+encodeURIComponent("_badmap")),xr}}catch{k&&k(ys)}}if(ft){ye=Bt.join("&");break e}}ye=void 0}return y=y.i.splice(0,N),w.G=y,ye}function ju(y){if(!y.g&&!y.v){y.Y=1;var w=y.Da;Z||A(),z||(Z(),z=!0),I.add(w,y),y.A=0}}function Ia(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Mt(m(y.Da,y),Uu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Mt(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xe(10),Si(this),Lu(this))};function Wl(y){y.B!=null&&(u.clearTimeout(y.B),y.B=null)}function Lu(y){y.g=new js(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var w=Wt(y.na);yt(w,"RID","rpc"),yt(w,"SID",y.M),yt(w,"AID",y.K),yt(w,"CI",y.F?"0":"1"),!y.F&&y.ia&&yt(w,"TO",y.ia),yt(w,"TYPE","xmlhttp"),Ca(y,w),y.u&&y.o&&Na(w,y.u,y.o),y.O&&(y.g.H=y.O);var N=y.g;y=y.ba,N.M=1,N.A=wa(Wt(w)),N.u=null,N.R=!0,mo(N,y)}n.Va=function(){this.C!=null&&(this.C=null,Si(this),Ia(this),xe(19))};function Eo(y){y.C!=null&&(u.clearTimeout(y.C),y.C=null)}function Vu(y,w){var N=null;if(y.g==w){Eo(y),Wl(y),y.g=null;var k=2}else if(dr(y.h,w))N=w.G,zl(y.h,w),k=1;else return;if(y.I!=0){if(w.o)if(k==1){N=w.u?w.u.length:0,w=Date.now()-w.F;var $=y.D;k=We(),jt(k,new Fe(k,N)),gr(y)}else ju(y);else if($=w.m,$==3||$==0&&w.X>0||!(k==1&&wo(y,w)||k==2&&Ia(y)))switch(N&&N.length>0&&(w=y.h,w.i=w.i.concat(N)),$){case 1:yr(y,5);break;case 4:yr(y,10);break;case 3:yr(y,6);break;default:yr(y,2)}}}function Uu(y,w){let N=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(N*=2),N*w}function yr(y,w){if(y.j.info("Error code "+w),w==2){var N=m(y.bb,y),k=y.Ua;const $=!k;k=new ss(k||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||fn(k,"https"),wa(k),$?Vs(k.toString(),N):Kl(k.toString(),N)}else xe(2);y.I=0,y.l&&y.l.pa(w),Ou(y),_o(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Ou(y){if(y.I=0,y.ja=[],y.l){const w=Fl(y.h);(w.length!=0||y.i.length!=0)&&(D(y.ja,w),D(y.ja,y.i),y.h.i.length=0,S(y.i),y.i.length=0),y.l.oa()}}function qu(y,w,N){var k=N instanceof ss?Wt(N):new ss(N);if(k.g!="")w&&(k.g=w+"."+k.g),vi(k,k.u);else{var $=u.location;k=$.protocol,w=w?w+"."+$.hostname:$.hostname,$=+$.port;const te=new ss(null);k&&fn(te,k),w&&(te.g=w),$&&vi(te,$),N&&(te.h=N),k=te}return N=y.G,w=y.wa,N&&w&&yt(k,N,w),yt(k,"VER",y.ka),Ca(y,k),k}function zu(y,w,N){if(w&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=y.Aa&&!y.ma?new bt(new fr({ab:N})):new bt(y.ma),w.Fa(y.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}n=Fu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ai(){}Ai.prototype.g=function(y,w){return new Dn(y,w)};function Dn(y,w){kt.call(this),this.g=new Ni(w),this.l=y,this.h=w&&w.messageUrlParams||null,y=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(y?y["X-WebChannel-Content-Type"]=w.messageContentType:y={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(y?y["X-WebChannel-Client-Profile"]=w.sa:y={"X-WebChannel-Client-Profile":w.sa}),this.g.U=y,(y=w&&w.Qb)&&!M(y)&&(this.g.u=y),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!M(w)&&(this.g.G=w,y=this.h,y!==null&&w in y&&(y=this.h,w in y&&delete y[w])),this.j=new Vr(this)}_(Dn,kt),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Jl(this.g)},Dn.prototype.o=function(y){var w=this.g;if(typeof y=="string"){var N={};N.__data__=y,y=N}else this.v&&(N={},N.__data__=ts(y),y=N);w.i.push(new Xt(w.Ya++,y)),w.I==3&&gr(w)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,Dn.Z.N.call(this)};function Gu(y){we.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var w=y.__sm__;if(w){e:{for(const N in w){y=N;break e}y=void 0}(this.i=y)&&(y=this.i,w=w!==null&&y in w?w[y]:void 0),this.data=w}else this.data=y}_(Gu,we);function Hu(){ge.call(this),this.status=1}_(Hu,ge);function Vr(y){this.g=y}_(Vr,Fu),Vr.prototype.ra=function(){jt(this.g,"a")},Vr.prototype.qa=function(y){jt(this.g,new Gu(y))},Vr.prototype.pa=function(y){jt(this.g,new Hu)},Vr.prototype.oa=function(){jt(this.g,"b")},Ai.prototype.createWebChannel=Ai.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,xT=function(){return new Ai},yT=function(){return We()},gT=Ce,mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,ih=yn,Ps.COMPLETE="complete",pT=Ps,me.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",kt.prototype.listen=kt.prototype.J,zc=me,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,mT=bt}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});const b_="@firebase/firestore",__="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Yh("@firebase/firestore");function el(){return no.logLevel}function _e(n,...e){if(no.logLevel<=nt.DEBUG){const t=e.map(i0);no.debug(`Firestore (${Cl}): ${n}`,...t)}}function li(n,...e){if(no.logLevel<=nt.ERROR){const t=e.map(i0);no.error(`Firestore (${Cl}): ${n}`,...t)}}function yl(n,...e){if(no.logLevel<=nt.WARN){const t=e.map(i0);no.warn(`Firestore (${Cl}): ${n}`,...t)}}function i0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,vT(n,s,t)}function vT(n,e,t){let s=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw li(s),new Error(s)}function gt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||vT(e,a,s)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ws{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class Qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Jk{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new si,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new si)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt(typeof s.accessToken=="string",31837,{l:s}),new bT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class Xk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wk{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Xk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class w_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const s=l=>{l.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new w_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new w_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=e3(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function st(n,e){return n<e?-1:n>e?1:0}function pg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return Vp(a)===Vp(l)?st(a,l):Vp(a)?1:-1}return st(n.length,e.length)}const t3=55296,n3=57343;function Vp(n){const e=n.charCodeAt(0);return e>=t3&&e<=n3}function xl(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__name__";class Er{constructor(e,t,s){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Pe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Er.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return st(e.length,t.length)}static compareSegments(e,t){const s=Er.isNumericId(e),a=Er.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Er.extractNumericId(e).compare(Er.extractNumericId(t)):pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class St extends Er{construct(e,t,s){return new St(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const s3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Er{construct(e,t,s){return new Tn(e,t,s)}static isValidIdentifier(e){return s3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E_}static keyField(){return new Tn([E_])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(St.fromString(e))}static fromName(e){return new ke(St.fromString(e).popFirst(5))}static empty(){return new ke(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n,e,t){if(!t)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function r3(n,e,t,s){if(e===!0&&s===!0)throw new be(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T_(n){if(!ke.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function N_(n){if(ke.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function Wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wh(n);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!wT(n))throw new be(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new be(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,A_=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*A_);return new Rt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<S_)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:on("string",Rt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Rt(0,0))}static max(){return new Ue(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function i3(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ue.fromTimestamp(s===1e9?new Rt(t+1,0):new Rt(t,s));return new ua(a,ke.empty(),e)}function a3(n){return new ua(n.readTime,n.key,ou)}class ua{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ua(Ue.min(),ke.empty(),ou)}static max(){return new ua(Ue.max(),ke.empty(),ou)}}function o3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==l3)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,s)=>{t(e)}))}static reject(e){return new de(((t,s)=>{s(e)}))}static waitFor(e){return new de(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=de.resolve(!1);for(const s of e)t=t.next((a=>a?de.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new de(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++h,h===l&&s(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new de(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function u3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=-1;function ef(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function d3(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function h3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C_(e)),e=f3(n.get(t),e);return C_(e)}function f3(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case ET:t+="";break;default:t+=l}}return t}function C_(n){return n+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}}class Jd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??En.RED,this.left=a??En.EMPTY,this.right=l??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new En(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return En.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(e){return new R_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class R_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new ds([])}unionWith(e){let t=new dn(Tn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NT("Invalid base64 string: "+l):l}})(e);return new Nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const m3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const t=m3.exec(n);if(gt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Yt(n.seconds),nanos:Yt(n.nanos)}}function Yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?Nn.fromBase64String(n):Nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",CT="__previous_value__",IT="__local_write_time__";function l0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AT])==null?void 0:s.stringValue)===ST}function tf(n){const e=n.mapValue.fields[CT];return l0(e)?tf(e):e}function lu(n){const e=da(n.mapValue.fields[IT].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,s,a,l,u,h,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ih="(default)";class cu{constructor(e,t){this.projectId=e,this.database=t||Ih}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",g3="__max__",Xd={mapValue:{}},kT="__vector__",Rh="value";function fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?l0(n)?4:x3(n)?9007199254740991:y3(n)?10:11:Pe(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=fa(n);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=da(a.timestampValue),h=da(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ha(a.bytesValue).isEqual(ha(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Yt(a.geoPointValue.latitude)===Yt(l.geoPointValue.latitude)&&Yt(a.geoPointValue.longitude)===Yt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Yt(a.integerValue)===Yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Yt(a.doubleValue),h=Yt(l.doubleValue);return u===h?Ch(u)===Ch(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return xl(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(I_(u)!==I_(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Dr(u[p],h[p])))return!1;return!0})(n,e);default:return Pe(52216,{left:n})}}function uu(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function vl(n,e){if(n===e)return 0;const t=fa(n),s=fa(e);if(t!==s)return st(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=Yt(l.integerValue||l.doubleValue),p=Yt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return k_(n.timestampValue,e.timestampValue);case 4:return k_(lu(n),lu(e));case 5:return pg(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=ha(l),p=ha(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const v=st(h[m],p[m]);if(v!==0)return v}return st(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=st(Yt(l.latitude),Yt(u.latitude));return h!==0?h:st(Yt(l.longitude),Yt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return M_(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var E,S,D,G;const h=l.fields||{},p=u.fields||{},m=(E=h[Rh])==null?void 0:E.arrayValue,v=(S=p[Rh])==null?void 0:S.arrayValue,_=st(((D=m==null?void 0:m.values)==null?void 0:D.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return _!==0?_:M_(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Xd.mapValue&&u===Xd.mapValue)return 0;if(l===Xd.mapValue)return 1;if(u===Xd.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const E=pg(p[_],v[_]);if(E!==0)return E;const S=vl(h[p[_]],m[v[_]]);if(S!==0)return S}return st(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function k_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const t=da(n),s=da(e),a=st(t.seconds,s.seconds);return a!==0?a:st(t.nanos,s.nanos)}function M_(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=vl(t[a],s[a]);if(l)return l}return st(t.length,s.length)}function bl(n){return gg(n)}function gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=da(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ha(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=gg(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${gg(t.fields[u])}`;return a+"}"})(n.mapValue):Pe(61005,{value:n})}function ah(n){switch(fa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+ah(e):16;case 5:return 2*n.stringValue.length;case 6:return ha(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+ah(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return ya(s.fields,((l,u)=>{a+=l.length+ah(u)})),a})(n.mapValue);default:throw Pe(13486,{value:n})}}function D_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yg(n){return!!n&&"integerValue"in n}function c0(n){return!!n&&"arrayValue"in n}function P_(n){return!!n&&"nullValue"in n}function j_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function y3(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RT])==null?void 0:s.stringValue)===kT}function Yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ya(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Yc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return{...n}}function x3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===g3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Tn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=Yc(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ya(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Jn(Yc(this.value))}}function MT(n){const e=[];return ya(n.fields,((t,s)=>{const a=new Tn([t]);if(oh(s)){const l=MT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Rn(e,0,Ue.min(),Ue.min(),Ue.min(),Jn.empty(),0)}static newFoundDocument(e,t,s,a){return new Rn(e,1,t,Ue.min(),s,a,0)}static newNoDocument(e,t){return new Rn(e,2,t,Ue.min(),Ue.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,Ue.min(),Ue.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function L_(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=ke.comparator(ke.fromName(u.referenceValue),t.key):s=vl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function V_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t="asc"){this.field=e,this.dir=t}}function v3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class an extends DT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new _3(e,t,s):t==="array-contains"?new T3(e,s):t==="in"?new N3(e,s):t==="not-in"?new S3(e,s):t==="array-contains-any"?new A3(e,s):new an(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new w3(e,s):new E3(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vl(t,this.value)):t!==null&&fa(this.value)===fa(t)&&this.matchesComparison(vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends DT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return PT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PT(n){return n.op==="and"}function jT(n){return b3(n)&&PT(n)}function b3(n){for(const e of n.filters)if(e instanceof Js)return!1;return!0}function xg(n){if(n instanceof an)return n.field.canonicalString()+n.op.toString()+bl(n.value);if(jT(n))return n.filters.map((e=>xg(e))).join(",");{const e=n.filters.map((t=>xg(t))).join(",");return`${n.op}(${e})`}}function LT(n,e){return n instanceof an?(function(s,a){return a instanceof an&&s.op===a.op&&s.field.isEqual(a.field)&&Dr(s.value,a.value)})(n,e):n instanceof Js?(function(s,a){return a instanceof Js&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&LT(u,a.filters[h])),!0):!1})(n,e):void Pe(19439)}function VT(n){return n instanceof an?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(n):n instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(VT).join(" ,")+"}"})(n):"Filter"}class _3 extends an{constructor(e,t,s){super(e,t,s),this.key=ke.fromName(s.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class w3 extends an{constructor(e,t){super(e,"in",t),this.keys=UT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class E3 extends an{constructor(e,t){super(e,"not-in",t),this.keys=UT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ke.fromName(s.referenceValue)))}class T3 extends an{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return c0(t)&&uu(t.arrayValue,this.value)}}class N3 extends an{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}}class S3 extends an{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uu(this.value.arrayValue,t)}}class A3 extends an{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!c0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>uu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function U_(n,e=null,t=[],s=[],a=null,l=null,u=null){return new C3(n,e,t,s,a,l,u)}function u0(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>xg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>bl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>bl(s))).join(",")),e.Te=t}return e.Te}function d0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!v3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V_(n.startAt,e.startAt)&&V_(n.endAt,e.endAt)}function vg(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I3(n,e,t,s,a,l,u,h){return new kl(n,e,t,s,a,l,u,h)}function nf(n){return new kl(n)}function O_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OT(n){return n.collectionGroup!==null}function Qc(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new dn(Tn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new du(l,s))})),t.has(Tn.keyField().canonicalString())||e.Ie.push(new du(Tn.keyField(),s))}return e.Ie}function Cr(n){const e=qe(n);return e.Ee||(e.Ee=R3(e,Qc(n))),e.Ee}function R3(n,e){if(n.limitType==="F")return U_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new du(a.field,l)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return U_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function bg(n,e){const t=n.filters.concat([e]);return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,e,t){return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return d0(Cr(n),Cr(e))&&n.limitType===e.limitType}function qT(n){return`${u0(Cr(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>VT(a))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>bl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>bl(a))).join(",")),`Target(${s})`})(Cr(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ke.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of Qc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const m=L_(u,h,p);return u.inclusive?m<=0:m<0})(s.startAt,Qc(s),a)||s.endAt&&!(function(u,h,p){const m=L_(u,h,p);return u.inclusive?m>=0:m>0})(s.endAt,Qc(s),a))})(n,e)}function k3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zT(n){return(e,t)=>{let s=!1;for(const a of Qc(n)){const l=M3(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function M3(n,e,t){const s=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),m=h.data.field(l);return p!==null&&m!==null?vl(p,m):Pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new Vt(ke.comparator);function ci(){return D3}const FT=new Vt(ke.comparator);function Fc(...n){let e=FT;for(const t of n)e=e.insert(t.key,t);return e}function GT(n){let e=FT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ya(){return Jc()}function HT(){return Jc()}function Jc(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const P3=new Vt(ke.comparator),j3=new dn(ke.comparator);function rt(...n){let e=j3;for(const t of n)e=e.add(t);return e}const L3=new dn(st);function V3(){return L3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function BT(n){return{integerValue:""+n}}function $T(n,e){return d3(e)?BT(e):h0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function U3(n,e,t){return n instanceof hu?(function(a,l){const u={fields:{[AT]:{stringValue:ST},[IT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&l0(l)&&(l=tf(l)),l&&(u.fields[CT]=l),{mapValue:u}})(t,e):n instanceof _l?YT(n,e):n instanceof fu?QT(n,e):(function(a,l){const u=KT(a,l),h=q_(u)+q_(a.Ae);return yg(u)&&yg(a.Ae)?BT(h):h0(a.serializer,h)})(n,e)}function O3(n,e,t){return n instanceof _l?YT(n,e):n instanceof fu?QT(n,e):t}function KT(n,e){return n instanceof mu?(function(s){return yg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class hu extends af{}class _l extends af{constructor(e){super(),this.elements=e}}function YT(n,e){const t=JT(e);for(const s of n.elements)t.some((a=>Dr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class fu extends af{constructor(e){super(),this.elements=e}}function QT(n,e){let t=JT(e);for(const s of n.elements)t=t.filter((a=>!Dr(a,s)));return{arrayValue:{values:t}}}class mu extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function q_(n){return Yt(n.integerValue||n.doubleValue)}function JT(n){return c0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.field=e,this.transform=t}}function q3(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof _l&&a instanceof _l||s instanceof fu&&a instanceof fu?xl(s.elements,a.elements,Dr):s instanceof mu&&a instanceof mu?Dr(s.Ae,a.Ae):s instanceof hu&&a instanceof hu})(n.transform,e.transform)}class z3{constructor(e,t){this.version=e,this.transformResults=t}}class Is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Is}static exists(e){return new Is(void 0,e)}static updateTime(e){return new Is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class of{}function XT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new m0(n.key,Is.none()):new _u(n.key,n.data,Is.none());{const t=n.data,s=Jn.empty();let a=new dn(Tn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new xa(n.key,s,new ds(a.toArray()),Is.none())}}function F3(n,e,t){n instanceof _u?(function(a,l,u){const h=a.value.clone(),p=F_(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof xa?(function(a,l,u){if(!lh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=F_(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(WT(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Xc(n,e,t,s){return n instanceof _u?(function(l,u,h,p){if(!lh(l.precondition,u))return h;const m=l.value.clone(),v=G_(l.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof xa?(function(l,u,h,p){if(!lh(l.precondition,u))return h;const m=G_(l.fieldTransforms,p,u),v=u.data;return v.setAll(WT(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return lh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function G3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=KT(s.transform,a||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(s.field,l))}return t||null}function z_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&xl(s,a,((l,u)=>q3(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends of{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class xa extends of{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function F_(n,e,t){const s=new Map;gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,O3(u,h,t[a]))}return s}function G_(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,U3(l,u,e))}return s}class m0 extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H3 extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&F3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Xc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Xc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=HT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=XT(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rt())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,((t,s)=>z_(t,s)))&&xl(this.baseMutations,e.baseMutations,((t,s)=>z_(t,s)))}}class p0{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){gt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return P3})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new p0(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,ot;function Y3(n){switch(n){case ce.OK:return Pe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function ZT(n){if(n===void 0)return li("GRPC error has no .code"),ce.UNKNOWN;switch(n){case sn.OK:return ce.OK;case sn.CANCELLED:return ce.CANCELLED;case sn.UNKNOWN:return ce.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ce.INTERNAL;case sn.UNAVAILABLE:return ce.UNAVAILABLE;case sn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case sn.NOT_FOUND:return ce.NOT_FOUND;case sn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case sn.ABORTED:return ce.ABORTED;case sn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case sn.DATA_LOSS:return ce.DATA_LOSS;default:return Pe(39323,{code:n})}}(ot=sn||(sn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=new aa([4294967295,4294967295],0);function H_(n){const e=Q3().encode(n),t=new fT;return t.update(e),new Uint8Array(t.digest())}function B_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new aa([t,s],0),new aa([a,l],0)]}class g0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(s<0)throw new Gc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(aa.fromNumber(s)));return a.compare(J3)===1&&(a=new aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=H_(e),[s,a]=B_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new g0(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=H_(e),[s,a]=B_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lf(Ue.min(),a,new Vt(st),ci(),rt())}}class wu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wu(s,t,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class eN{constructor(e,t){this.targetId=e,this.Ce=t}}class tN{constructor(e,t,s=Nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class $_{constructor(){this.ve=0,this.Fe=K_(),this.Me=Nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),t=rt(),s=rt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Pe(38017,{changeType:l})}})),new wu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=K_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X3{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=Wd(),this.He=Wd(),this.Ye=new Vt(st)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(vg(l))if(s===0){const u=new ke(l.path);this.et(t,u,Rn.newNoDocument(u,Ue.min()))}else gt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=ha(s).toUint8Array()}catch(p){if(p instanceof NT)return yl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new g0(u,a,l)}catch(p){return yl(p instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&vg(h.target)){const p=new ke(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Rn.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=rt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new lf(e,t,this.Ye,this.je,s);return this.je=ci(),this.Je=Wd(),this.He=Wd(),this.Ye=new Vt(st),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dn(st),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dn(st),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wd(){return new Vt(ke.comparator)}function K_(){return new Vt(ke.comparator)}const W3={asc:"ASCENDING",desc:"DESCENDING"},Z3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eM={and:"AND",or:"OR"};class tM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _g(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nM(n,e){return Dh(n,e.toTimestamp())}function Ir(n){return gt(!!n,49232),Ue.fromTimestamp((function(t){const s=da(t);return new Rt(s.seconds,s.nanos)})(n))}function y0(n,e){return wg(n,e).canonicalString()}function wg(n,e){const t=(function(a){return new St(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sN(n){const e=St.fromString(n);return gt(lN(e),10190,{key:e.toString()}),e}function Eg(n,e){return y0(n.databaseId,e.path)}function Up(n,e){const t=sN(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(iN(t))}function rN(n,e){return y0(n.databaseId,e)}function sM(n){const e=sN(n);return e.length===4?St.emptyPath():iN(e)}function Tg(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iN(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Y_(n,e,t){return{name:Eg(n,e),fields:t.value.mapValue.fields}}function rM(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Pe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(gt(v===void 0||typeof v=="string",58123),Nn.fromBase64String(v||"")):(gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Nn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?ce.UNKNOWN:ZT(m.code);return new be(v,m.message||"")})(u);t=new tN(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Up(n,s.document.name),l=Ir(s.document.updateTime),u=s.document.createTime?Ir(s.document.createTime):Ue.min(),h=new Jn({mapValue:{fields:s.document.fields}}),p=Rn.newFoundDocument(a,l,u,h),m=s.targetIds||[],v=s.removedTargetIds||[];t=new ch(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Up(n,s.document),l=s.readTime?Ir(s.readTime):Ue.min(),u=Rn.newNoDocument(a,l),h=s.removedTargetIds||[];t=new ch([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Up(n,s.document),l=s.removedTargetIds||[];t=new ch([],l,a,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new K3(a,l),h=s.targetId;t=new eN(h,u)}}return t}function iM(n,e){let t;if(e instanceof _u)t={update:Y_(n,e.key,e.value)};else if(e instanceof m0)t={delete:Eg(n,e.key)};else if(e instanceof xa)t={update:Y_(n,e.key,e.data),updateMask:mM(e.fieldMask)};else{if(!(e instanceof H3))return Pe(16599,{Vt:e.type});t={verify:Eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof hu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof _l)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof mu)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Pe(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:nM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe(27497)})(n,e.precondition)),t}function aM(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Ir(a.updateTime):Ir(l);return u.isEqual(Ue.min())&&(u=Ir(l)),new z3(u,a.transformResults||[])})(t,e)))):[]}function oM(n,e){return{documents:[rN(n,e.path)]}}function lM(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=rN(n,a);const l=(function(m){if(m.length!==0)return oN(Js.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(E){return{field:nl(E.field),direction:dM(E.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=_g(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function cM(n){let e=sM(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){gt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const E=aN(_);return E instanceof Js&&jT(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((E=>(function(D){return new du(sl(D.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let E;return E=typeof _=="object"?_.value:_,ef(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(_){const E=!!_.before,S=_.values||[];return new kh(S,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const E=!_.before,S=_.values||[];return new kh(S,E)})(t.endAt)),I3(e,a,u,l,h,"F",p,m)}function uM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=sl(t.unaryFilter.field);return an.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=sl(t.unaryFilter.field);return an.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sl(t.unaryFilter.field);return an.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=sl(t.unaryFilter.field);return an.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return an.create(sl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((s=>aN(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(t.compositeFilter.op))})(n):Pe(30097,{filter:n})}function dM(n){return W3[n]}function hM(n){return Z3[n]}function fM(n){return eM[n]}function nl(n){return{fieldPath:n.canonicalString()}}function sl(n){return Tn.fromServerFormat(n.fieldPath)}function oN(n){return n instanceof an?(function(t){if(t.op==="=="){if(j_(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(P_(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(j_(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(P_(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:hM(t.op),value:t.value}}})(n):n instanceof Js?(function(t){const s=t.getFilters().map((a=>oN(a)));return s.length===1?s[0]:{compositeFilter:{op:fM(t.op),filters:s}}})(n):Pe(54877,{filter:n})}function mM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t,s,a,l=Ue.min(),u=Ue.min(),h=Nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.yt=e}}function gM(n){const e=cM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.Cn=new xM}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ua.min())}updateCollectionGroup(e,t,s){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class xM{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new dn(St.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new dn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cN=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(cN,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wl(0)}static cr(){return new wl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LruGarbageCollector",vM=1048576;function X_([n,e],[t,s]){const a=st(n,t);return a===0?st(e,s):a}class bM{constructor(e){this.Ir=e,this.buffer=new dn(X_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();X_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _M{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(J_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rl(t)?_e(J_,"Ignoring IndexedDB error during garbage collection: ",t):await Il(t)}await this.Vr(3e5)}))}}class wM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(Zh.ce);const s=new bM(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Q_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),el()<=nt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function EM(n,e){return new wM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?de.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Xc(s.mutation,a,ds.empty(),Rt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,rt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=rt()){const a=Ya();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=Fc();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Ya();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,rt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=ci();const u=Jc(),h=(function(){return Jc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof xa)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Xc(v.mutation,m,v.mutation.getFieldMask(),Rt.now())):u.set(m.key,ds.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>h.set(m,new NM(v,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Jc();let a=new Vt(((u,h)=>u-h)),l=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||ds.empty();v=h.applyToLocalView(m,v),s.set(p,v);const _=(a.get(h.batchId)||rt()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,v=p.value,_=HT();v.forEach((E=>{if(!l.has(E)){const S=XT(t.get(E),s.get(E));S!==null&&_.set(E,S),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return de.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):de.resolve(Ya());let h=ou,p=l;return u.next((m=>de.forEach(m,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?de.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{p=p.insert(v,E)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,rt()))).next((v=>({batchId:h,changes:GT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((s=>{let a=Fc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Fc();return this.indexManager.getCollectionParents(e,l).next((h=>de.forEach(h,(p=>{const m=(function(_,E){return new kl(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next((v=>{v.forEach(((_,E)=>{u=u.insert(_,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,Rn.newInvalidDocument(v)))}));let h=Fc();return u.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&Xc(v.mutation,m,ds.empty(),Rt.now()),rf(t,m)&&(h=h.insert(p,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ir(a.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:gM(a.bundledQuery),readTime:Ir(a.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.overlays=new Vt(ke.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ya();return de.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),de.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),de.resolve()}getOverlaysForCollection(e,t,s){const a=Ya(),l=t.length+1,u=new ke(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return de.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Vt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Ya(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Ya(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=a)););return de.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new $3(t,s));let l=this.qr.get(t);l===void 0&&(l=rt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.Qr=new dn(pn.$r),this.Ur=new dn(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new pn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ke(new St([])),s=new pn(t,e),a=new pn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new St([])),s=new pn(t,e),a=new pn(t,e+1);let l=rt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new pn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||st(e.Yr,t.Yr)}static Kr(e,t){return st(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dn(pn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new B3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new pn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?o0:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new pn(t,0),a=new pn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new dn(st);return t.forEach((a=>{const l=new pn(a,0),u=new pn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),de.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ke.isDocumentKey(l)||(l=l.child(""));const u=new pn(new ke(l),0);let h=new dn(st);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Yr)),!0)}),u),de.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return de.forEach(t.mutations,(a=>{const l=new pn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new pn(t,0),a=this.Zr.firstAfterOrEqual(s);return de.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.ri=e,this.docs=(function(){return new Vt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return de.resolve(s?s.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let s=ci();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Rn.newInvalidDocument(a))})),de.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ci();const u=t.path,h=new ke(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||o3(a3(v),s)<=0||(a.has(v.key)||rf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Pe(9500)}ii(e,t){return de.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new MM(this)}getSize(e){return de.resolve(this.size)}}class MM extends TM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.persistence=e,this.si=new uo((t=>u0(t)),d0),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new x0,this.targetCount=0,this.ai=wl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),de.waitFor(l).next((()=>a))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return de.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),de.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return de.resolve(s)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new IM,this.referenceDelegate=e(this),this.Pi=new DM(this),this.indexManager=new yM,this.remoteDocumentCache=(function(a){return new kM(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new pM(t),this.Ii=new AM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new RM(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){_e("MemoryPersistence","Starting transaction:",e);const a=new PM(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return de.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class PM extends c3{constructor(e){super(),this.currentSequenceNumber=e}}class v0{constructor(e){this.persistence=e,this.Ri=new x0,this.Vi=null}static mi(e){return new v0(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),de.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(s=>{const a=ke.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.pi=new uo((s=>h3(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=EM(this,t)}static mi(e,t){return new Ph(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?de.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,Ue.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ah(e.data.value)),t}br(e,t,s){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return de.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=rt(),a=rt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new b0(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lR()?8:u3(Mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new jM;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(el()<=nt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(el()<=nt.DEBUG&&_e("QueryEngine","Query:",tl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(el()<=nt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(t))):de.resolve())}ys(e,t){if(O_(t))return de.resolve(null);let s=Cr(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Mh(t,null,"F"),s=Cr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=rt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,h);return this.Cs(t,m,u,p.readTime)?this.ys(e,Mh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,a){return O_(t)||a.isEqual(Ue.min())?de.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?de.resolve(null):(el()<=nt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),tl(t)),this.vs(e,u,t,i3(a,ou)).next((h=>h)))}))}Ds(e,t){let s=new dn(zT(e));return t.forEach(((a,l)=>{rf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return el()<=nt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",tl(t)),this.ps.getDocumentsMatchingQuery(e,t,ua.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="LocalStore",VM=3e8;class UM{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Vt(st),this.xs=new uo((l=>u0(l)),d0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OM(n,e,t,s){return new UM(n,e,t,s)}async function dN(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=rt();for(const m of a){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function qM(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,m,v){const _=m.batch,E=_.keys();let S=de.resolve();return E.forEach((D=>{S=S.next((()=>v.getEntry(p,D))).next((G=>{const F=m.docVersions.get(D);gt(F!==null,48541),G.version.compareTo(F)<0&&(_.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=rt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function hN(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function zM(n,e){const t=qe(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const E=a.get(_);if(!E)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let S=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(Nn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,s)),a=a.insert(_,S),(function(G,F,ee){return G.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=VM?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(E,S,v)&&h.push(t.Pi.updateTargetData(l,S))}));let p=ci(),m=rt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(FM(l,u,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(Ue.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(v)}return de.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function FM(n,e,t){let s=rt(),a=rt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ci();return t.forEach(((h,p)=>{const m=l.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):_e(_0,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function GM(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=o0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function HM(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,de.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new ta(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Ng(n,e,t){const s=qe(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Rl(u))throw u;_e(_0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function W_(n,e,t){const s=qe(n);let a=Ue.min(),l=rt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const _=qe(p),E=_.xs.get(v);return E!==void 0?de.resolve(_.Ms.get(E)):_.Pi.getTargetData(m,v)})(s,u,Cr(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:Ue.min(),t?l:rt()))).next((h=>(BM(s,k3(e),h),{documents:h,Qs:l})))))}function BM(n,e,t){let s=n.Os.get(e)||Ue.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Z_{constructor(){this.activeTargetIds=V3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $M{constructor(){this.Mo=new Z_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Z_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="ConnectivityMonitor";class t1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(e1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(e1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd=null;function Sg(){return Zd===null?Zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zd++,"0x"+Zd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="RestConnection",YM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Sg(),h=this.zo(e,t.toUriEncodedString());_e(Op,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:m}=new URL(h),v=Nl(m);return this.Jo(e,h,p,s,v).then((_=>(_e(Op,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw yl(Op,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=YM[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class XM extends QM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Sg();return new Promise(((h,p)=>{const m=new mT;m.setWithCredentials(!0),m.listenOnce(pT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ih.NO_ERROR:const _=m.getResponseJson();_e(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case ih.TIMEOUT:_e(Cn,`RPC '${e}' ${u} timed out`),p(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const E=m.getStatus();if(_e(Cn,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S==null?void 0:S.error;if(D&&D.status&&D.message){const G=(function(ee){const ne=ee.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ne)>=0?ne:ce.UNKNOWN})(D.status);p(new be(G,D.message))}else p(new be(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new be(ce.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{_e(Cn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);_e(Cn,`RPC '${e}' ${u} sending request:`,a),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=Sg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xT(),h=yT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");_e(Cn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let E=!1,S=!1;const D=new JM({Yo:F=>{S?_e(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(E||(_e(Cn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),_e(Cn,`RPC '${e}' stream ${a} sending:`,F),_.send(F))},Zo:()=>_.close()}),G=(F,ee,ne)=>{F.listen(ee,(K=>{try{ne(K)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return G(_,zc.EventType.OPEN,(()=>{S||(_e(Cn,`RPC '${e}' stream ${a} transport opened.`),D.o_())})),G(_,zc.EventType.CLOSE,(()=>{S||(S=!0,_e(Cn,`RPC '${e}' stream ${a} transport closed`),D.a_(),this.E_(_))})),G(_,zc.EventType.ERROR,(F=>{S||(S=!0,yl(Cn,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),D.a_(new be(ce.UNAVAILABLE,"The operation could not be completed")))})),G(_,zc.EventType.MESSAGE,(F=>{var ee;if(!S){const ne=F.data[0];gt(!!ne,16349);const K=ne,ae=(K==null?void 0:K.error)||((ee=K[0])==null?void 0:ee.error);if(ae){_e(Cn,`RPC '${e}' stream ${a} received error:`,ae);const Z=ae.status;let z=(function(R){const P=sn[R];if(P!==void 0)return ZT(P)})(Z),I=ae.message;z===void 0&&(z=ce.INTERNAL,I="Unknown error status: "+Z+" with message "+ae.message),S=!0,D.a_(new be(z,I)),_.close()}else _e(Cn,`RPC '${e}' stream ${a} received:`,ne),D.u_(ne)}})),G(h,gT.STAT_EVENT,(F=>{F.stat===mg.PROXY?_e(Cn,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===mg.NOPROXY&&_e(Cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){return new tM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&_e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="PersistentStream";class mN{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new be(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(n1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(n1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WM extends mN{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rM(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ue.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?Ir(u.readTime):Ue.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Tg(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=vg(p)?{documents:oM(l,p)}:{query:lM(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=nN(l,u.resumeToken);const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ue.min())>0){h.readTime=Dh(l,u.snapshotVersion.toTimestamp());const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=uM(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.q_(t)}}class ZM extends mN{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aM(e.writeResults,e.commitTime),s=Ir(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Tg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>iM(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{}class t6 extends e6{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,wg(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ce.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,wg(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ce.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class n6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class s6{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{ho(this)&&(_e(so,"Restarting streams for network reachability change."),await(async function(p){const m=qe(p);m.Ea.add(4),await Eu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await uf(m)})(this))}))})),this.Ra=new n6(s,a)}}async function uf(n){if(ho(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function pN(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),N0(t)?T0(t):Ml(t).O_()&&E0(t,e))}function w0(n,e){const t=qe(n),s=Ml(t);t.Ia.delete(e),s.O_()&&gN(t,e),t.Ia.size===0&&(s.O_()?s.L_():ho(t)&&t.Ra.set("Unknown"))}function E0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(n).Y_(e)}function gN(n,e){n.Va.Ue(e),Ml(n).Z_(e)}function T0(n){n.Va=new X3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ml(n).start(),n.Ra.ua()}function N0(n){return ho(n)&&!Ml(n).x_()&&n.Ia.size>0}function ho(n){return qe(n).Ea.size===0}function yN(n){n.Va=void 0}async function r6(n){n.Ra.set("Online")}async function i6(n){n.Ia.forEach(((e,t)=>{E0(n,e)}))}async function a6(n,e){yN(n),N0(n)?(n.Ra.ha(e),T0(n)):n.Ra.set("Unknown")}async function o6(n,e,t){if(n.Ra.set("Online"),e instanceof tN&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){_e(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jh(n,s)}else if(e instanceof ch?n.Va.Ze(e):e instanceof eN?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const s=await hN(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Nn.EMPTY_BYTE_STRING,v.snapshotVersion)),gN(l,p);const _=new ta(v.target,p,m,v.sequenceNumber);E0(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){_e(so,"Failed to raise snapshot:",s),await jh(n,s)}}async function jh(n,e,t){if(!Rl(e))throw e;n.Ea.add(1),await Eu(n),n.Ra.set("Offline"),t||(t=()=>hN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(so,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function xN(n,e){return e().catch((t=>jh(n,t,e)))}async function df(n){const e=qe(n),t=ma(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:o0;for(;l6(e);)try{const a=await GM(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,c6(e,a)}catch(a){await jh(e,a)}vN(e)&&bN(e)}function l6(n){return ho(n)&&n.Ta.length<10}function c6(n,e){n.Ta.push(e);const t=ma(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vN(n){return ho(n)&&!ma(n).x_()&&n.Ta.length>0}function bN(n){ma(n).start()}async function u6(n){ma(n).ra()}async function d6(n){const e=ma(n);for(const t of n.Ta)e.ea(t.mutations)}async function h6(n,e,t){const s=n.Ta.shift(),a=p0.from(s,e,t);await xN(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await df(n)}async function f6(n,e){e&&ma(n).X_&&await(async function(s,a){if((function(u){return Y3(u)&&u!==ce.ABORTED})(a.code)){const l=s.Ta.shift();ma(s).B_(),await xN(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await df(s)}})(n,e),vN(n)&&bN(n)}async function s1(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),_e(so,"RemoteStore received new credentials");const s=ho(t);t.Ea.add(3),await Eu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function m6(n,e){const t=qe(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await Eu(t),t.Ra.set("Unknown"))}function Ml(n){return n.ma||(n.ma=(function(t,s,a){const l=qe(t);return l.sa(),new WM(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:r6.bind(null,n),t_:i6.bind(null,n),r_:a6.bind(null,n),H_:o6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),N0(n)?T0(n):n.Ra.set("Unknown")):(await n.ma.stop(),yN(n))}))),n.ma}function ma(n){return n.fa||(n.fa=(function(t,s,a){const l=qe(t);return l.sa(),new ZM(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:u6.bind(null,n),r_:f6.bind(null,n),ta:d6.bind(null,n),na:h6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await df(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(so,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new S0(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function A0(n,e){if(li("AsyncQueue",`${e}: ${n}`),Rl(n))return new be(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ke.comparator(t.key,s.key):(t,s)=>ke.comparator(t.key,s.key),this.keyedMap=Fc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new dl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.ga=new Vt(ke.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class El{constructor(e,t,s,a,l,u,h,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new El(e,t,dl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class g6{constructor(){this.queries=i1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=qe(t),l=a.queries;a.queries=i1(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new be(ce.ABORTED,"Firestore shutting down"))}}function i1(){return new uo((n=>qT(n)),sf)}async function C0(n,e){const t=qe(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new p6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=A0(u,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&R0(t)}async function I0(n,e){const t=qe(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function y6(n,e){const t=qe(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&R0(t)}function x6(n,e,t){const s=qe(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function R0(n){n.Ca.forEach((e=>{e.next()}))}var Ag,a1;(a1=Ag||(Ag={})).Ma="default",a1.Cache="cache";class k0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new El(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.key=e}}class wN{constructor(e){this.key=e}}class v6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=zT(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new r1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const E=a.get(v),S=rf(this.query,_)?_:null,D=!!E&&this.mutatedKeys.has(E.key),G=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let F=!1;E&&S?E.data.isEqual(S.data)?D!==G&&(s.track({type:3,doc:S}),F=!0):this.su(E,S)||(s.track({type:2,doc:S}),F=!0,(p&&this.eu(S,p)>0||m&&this.eu(S,m)<0)&&(h=!0)):!E&&S?(s.track({type:0,doc:S}),F=!0):E&&!S&&(s.track({type:1,doc:E}),F=!0,(p||m)&&(h=!0)),F&&(S?(u=u.add(S),l=G?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(S,D){const G=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:F})}};return G(S)-G(D)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,m=p!==this.Za;return this.Za=p,u.length!==0||m?{snapshot:new El(this.query,e.tu,l,u,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new wN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new _N(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=rt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return El.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const M0="SyncEngine";class b6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class _6{constructor(e){this.key=e,this.hu=!1}}class w6{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new uo((h=>qT(h)),sf),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(ke.comparator),this.Au=new Map,this.Ru=new x0,this.Vu={},this.mu=new Map,this.fu=wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E6(n,e,t=!0){const s=CN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await EN(s,e,t,!0),a}async function T6(n,e){const t=CN(n);await EN(t,e,!0,!1)}async function EN(n,e,t,s){const a=await HM(n.localStore,Cr(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await N6(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&pN(n.remoteStore,a),h}async function N6(n,e,t,s,a){n.pu=(_,E,S)=>(async function(G,F,ee,ne){let K=F.view.ru(ee);K.Cs&&(K=await W_(G.localStore,F.query,!1).then((({documents:I})=>F.view.ru(I,K))));const ae=ne&&ne.targetChanges.get(F.targetId),Z=ne&&ne.targetMismatches.get(F.targetId)!=null,z=F.view.applyChanges(K,G.isPrimaryClient,ae,Z);return l1(G,F.targetId,z.au),z.snapshot})(n,_,E,S);const l=await W_(n.localStore,e,!0),u=new v6(e,l.Qs),h=u.ru(l.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,p);l1(n,t,m.au);const v=new b6(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function S6(n,e,t){const s=qe(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!sf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ng(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&w0(s.remoteStore,a.targetId),Cg(s,a.targetId)})).catch(Il)):(Cg(s,a.targetId),await Ng(s.localStore,a.targetId,!0))}async function A6(n,e){const t=qe(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),w0(t.remoteStore,s.targetId))}async function C6(n,e,t){const s=j6(n);try{const a=await(function(u,h){const p=qe(u),m=Rt.now(),v=h.reduce(((S,D)=>S.add(D.key)),rt());let _,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let D=ci(),G=rt();return p.Ns.getEntries(S,v).next((F=>{D=F,D.forEach(((ee,ne)=>{ne.isValidDocument()||(G=G.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(S,D))).next((F=>{_=F;const ee=[];for(const ne of h){const K=G3(ne,_.get(ne.key).overlayedDocument);K!=null&&ee.push(new xa(ne.key,K,MT(K.value.mapValue),Is.exists(!0)))}return p.mutationQueue.addMutationBatch(S,m,ee,h)})).next((F=>{E=F;const ee=F.applyToLocalDocumentSet(_,G);return p.documentOverlayCache.saveOverlays(S,F.batchId,ee)}))})).then((()=>({batchId:E.batchId,changes:GT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let m=u.Vu[u.currentUser.toKey()];m||(m=new Vt(st)),m=m.insert(h,p),u.Vu[u.currentUser.toKey()]=m})(s,a.batchId,t),await Tu(s,a.changes),await df(s.remoteStore)}catch(a){const l=A0(a,"Failed to persist write");t.reject(l)}}async function TN(n,e){const t=qe(n);try{const s=await zM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?gt(u.hu,14607):a.removedDocuments.size>0&&(gt(u.hu,42227),u.hu=!1))})),await Tu(t,s,e)}catch(s){await Il(s)}}function o1(n,e,t){const s=qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=qe(u);p.onlineState=h;let m=!1;p.queries.forEach(((v,_)=>{for(const E of _.Sa)E.va(h)&&(m=!0)})),m&&R0(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function I6(n,e,t){const s=qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new Vt(ke.comparator);u=u.insert(l,Rn.newNoDocument(l,Ue.min()));const h=rt().add(l),p=new lf(Ue.min(),new Map,new Vt(st),u,h);await TN(s,p),s.du=s.du.remove(l),s.Au.delete(e),D0(s)}else await Ng(s.localStore,e,!1).then((()=>Cg(s,e,t))).catch(Il)}async function R6(n,e){const t=qe(n),s=e.batch.batchId;try{const a=await qM(t.localStore,e);SN(t,s,null),NN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tu(t,a)}catch(a){await Il(a)}}async function k6(n,e,t){const s=qe(n);try{const a=await(function(u,h){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,h).next((_=>(gt(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);SN(s,e,t),NN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tu(s,a)}catch(a){await Il(a)}}function NN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function SN(n,e,t){const s=qe(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||AN(n,s)}))}function AN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(w0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),D0(n))}function l1(n,e,t){for(const s of t)s instanceof _N?(n.Ru.addReference(s.key,e),M6(n,s)):s instanceof wN?(_e(M0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||AN(n,s.key)):Pe(19791,{wu:s})}function M6(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(_e(M0,"New document in limbo: "+t),n.Eu.add(s),D0(n))}function D0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(St.fromString(e)),s=n.fu.next();n.Au.set(s,new _6(t)),n.du=n.du.insert(t,s),pN(n.remoteStore,new ta(Cr(nf(t.path)),s,"TargetPurposeLimboResolution",Zh.ce))}}async function Tu(n,e,t){const s=qe(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){a.push(m);const _=b0.As(p.targetId,m);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,m){const v=qe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>de.forEach(m,(E=>de.forEach(E.Es,(S=>v.persistence.referenceDelegate.addReference(_,E.targetId,S))).next((()=>de.forEach(E.ds,(S=>v.persistence.referenceDelegate.removeReference(_,E.targetId,S)))))))))}catch(_){if(!Rl(_))throw _;_e(_0,"Failed to update sequence numbers: "+_)}for(const _ of m){const E=_.targetId;if(!_.fromCache){const S=v.Ms.get(E),D=S.snapshotVersion,G=S.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(E,G)}}})(s.localStore,l))}async function D6(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){_e(M0,"User change. New user:",e.toKey());const s=await dN(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new be(ce.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tu(t,s.Ls)}}function P6(n,e){const t=qe(n),s=t.Au.get(e);if(s&&s.hu)return rt().add(s.key);{let a=rt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function CN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I6.bind(null,e),e.Pu.H_=y6.bind(null,e.eventManager),e.Pu.yu=x6.bind(null,e.eventManager),e}function j6(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k6.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OM(this.persistence,new LM,e.initialUser,this.serializer)}Cu(e){return new uN(v0.mi,this.serializer)}Du(e){return new $M}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class L6 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _M(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new uN((s=>Ph.mi(s,t)),this.serializer)}}class Ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>o1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=D6.bind(null,this.syncEngine),await m6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g6})()}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=(function(l){return new XM(l)})(e.databaseInfo);return(function(l,u,h,p){return new t6(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new s6(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>o1(this.syncEngine,t,0)),(function(){return t1.v()?new t1:new KM})())}createSyncEngine(e,t){return(function(a,l,u,h,p,m,v){const _=new w6(a,l,u,h,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=qe(a);_e(so,"RemoteStore shutting down."),l.Ea.add(5),await Eu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class V6{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=In.UNAUTHENTICATED,this.clientId=a0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{_e(pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(_e(pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=A0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zp(n,e){n.asyncQueue.verifyOperationInProgress(),_e(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await dN(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function c1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await U6(n);_e(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>s1(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>s1(e.remoteStore,a))),n._onlineComponents=e}async function U6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(pa,"Using user provided OfflineComponentProvider");try{await zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;yl("Error using user provided cache. Falling back to memory cache: "+t),await zp(n,new Lh)}}else _e(pa,"Using default OfflineComponentProvider"),await zp(n,new L6(void 0));return n._offlineComponents}async function IN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(pa,"Using user provided OnlineComponentProvider"),await c1(n,n._uninitializedComponentsProvider._online)):(_e(pa,"Using default OnlineComponentProvider"),await c1(n,new Ig))),n._onlineComponents}function O6(n){return IN(n).then((e=>e.syncEngine))}async function Vh(n){const e=await IN(n),t=e.eventManager;return t.onListen=E6.bind(null,e.syncEngine),t.onUnlisten=S6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A6.bind(null,e.syncEngine),t}function q6(n,e,t={}){const s=new si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new P0({next:E=>{v.Nu(),u.enqueueAndForget((()=>I0(l,_)));const S=E.docs.has(h);!S&&E.fromCache?m.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&p&&p.source==="server"?m.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new k0(nf(h.path),v,{includeMetadataChanges:!0,qa:!0});return C0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}function z6(n,e,t={}){const s=new si;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new P0({next:E=>{v.Nu(),u.enqueueAndForget((()=>I0(l,_))),E.fromCache&&p.source==="server"?m.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new k0(h,v,{includeMetadataChanges:!0,qa:!0});return C0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firestore.googleapis.com",d1=!0;class h1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=d1}else this.host=e.host,this.ssl=e.ssl??d1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vM)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Yk;switch(s.type){case"firstParty":return new Wk(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=u1.get(t);s&&(_e("ComponentProvider","Removing Datastore"),u1.delete(t),s.terminate())})(this),Promise.resolve()}}function F6(n,e,t,s={}){var m;n=Wn(n,hf);const a=Nl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(wE(`https://${h}`),EE("Firestore",!0)),l.host!==kN&&l.host!==h&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!ii(p,u)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=In.MOCK_USER;else{v=eR(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new be(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new In(E)}n._authCredentials=new Qk(new bT(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(bu(t,Gt._jsonSchema))return new Gt(e,s||null,new ke(St.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:on("string",Gt._jsonSchemaVersion),referencePath:on("string")};class oa extends mi{constructor(e,t,s){super(e,t,nf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ke(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function ln(n,e,...t){if(n=Ht(n),_T("collection","path",e),n instanceof hf){const s=St.fromString(e,...t);return N_(s),new oa(n,null,s)}{if(!(n instanceof Gt||n instanceof oa))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(St.fromString(e,...t));return N_(s),new oa(n.firestore,null,s)}}function Xs(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=a0.newId()),_T("doc","path",e),n instanceof hf){const s=St.fromString(e,...t);return T_(s),new Gt(n,null,new ke(s))}{if(!(n instanceof Gt||n instanceof oa))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(St.fromString(e,...t));return T_(s),new Gt(n.firestore,n instanceof oa?n.converter:null,new ke(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="AsyncQueue";class m1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fN(this,"async_queue_retry"),this._c=()=>{const s=qp();s&&_e(f1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=qp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rl(e))throw e;_e(f1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",p1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=S0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Pe(47125,{Pc:p1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function p1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class ui extends hf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new m1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m1(e),this._firestoreClient=void 0,await e}}}function G6(n,e){const t=typeof n=="object"?n:Jg(),s=typeof n=="string"?n:Ih,a=co(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=WI("firestore");l&&F6(a,...l)}return a}function ff(n){if(n._terminated)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H6(n),n._firestoreClient}function H6(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,m,v){return new p3(h,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,RN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new V6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._byteString=e}static fromBase64String(e){try{return new As(Nn.fromBase64String(e))}catch(t){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new As(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:As._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,As._jsonSchema))return As.fromBase64String(e.bytes)}}As._jsonSchemaVersion="firestore/bytes/1.0",As._jsonSchema={type:on("string",As._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rr._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Rr._jsonSchema))return new Rr(e.latitude,e.longitude)}}Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:on("string",Rr._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new kr(e.vectorValues);throw new be(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:on("string",kr._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=/^__.*__$/;class $6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class MN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class pf{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(DN(this.Ac)&&B6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K6{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}Cc(e,t,s,a=!1){return new pf({Ac:e,methodName:t,Dc:s,path:Tn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gf(n){const e=n._freezeSettings(),t=cf(n._databaseId);return new K6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);U0("Data must be an object, but it was:",u,s);const h=jN(s,u);let p,m;if(l.merge)p=new ds(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const E=Rg(e,_,t);if(!u.contains(E))throw new be(ce.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);VN(v,E)||v.push(E)}p=new ds(v),m=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=u.fieldTransforms;return new $6(new Jn(h),p,m)}class yf extends Dl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function Y6(n,e,t){return new pf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class j0 extends Dl{_toFieldTransform(e){return new f0(e.path,new hu)}isEqual(e){return e instanceof j0}}class L0 extends Dl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Y6(this,e,!0),s=this.vc.map((l=>Pl(l,t))),a=new _l(s);return new f0(e.path,a)}isEqual(e){return e instanceof L0&&ii(this.vc,e.vc)}}class V0 extends Dl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new mu(e.serializer,$T(e.serializer,this.Fc));return new f0(e.path,t)}isEqual(e){return e instanceof V0&&this.Fc===e.Fc}}function Q6(n,e,t,s){const a=n.Cc(1,e,t);U0("Data must be an object, but it was:",a,s);const l=[],u=Jn.empty();ya(s,((p,m)=>{const v=O0(e,p,t);m=Ht(m);const _=a.yc(v);if(m instanceof yf)l.push(v);else{const E=Pl(m,_);E!=null&&(l.push(v),u.set(v,E))}}));const h=new ds(l);return new MN(u,h,a.fieldTransforms)}function J6(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Rg(e,s,t)],p=[a];if(l.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)h.push(Rg(e,l[E])),p.push(l[E+1]);const m=[],v=Jn.empty();for(let E=h.length-1;E>=0;--E)if(!VN(m,h[E])){const S=h[E];let D=p[E];D=Ht(D);const G=u.yc(S);if(D instanceof yf)m.push(S);else{const F=Pl(D,G);F!=null&&(m.push(S),v.set(S,F))}}const _=new ds(m);return new MN(v,_,u.fieldTransforms)}function X6(n,e,t,s=!1){return Pl(t,n.Cc(s?4:3,e))}function Pl(n,e){if(LN(n=Ht(n)))return U0("Unsupported field value:",e,n),jN(n,e);if(n instanceof Dl)return(function(s,a){if(!DN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Pl(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Ht(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $T(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Rt.fromDate(s);return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Rt){const l=new Rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Rr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof As)return{bytesValue:nN(a.serializer,s._byteString)};if(s instanceof Gt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:y0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof kr)return(function(u,h){return{mapValue:{fields:{[RT]:{stringValue:kT},[Rh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return h0(h.serializer,m)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Wh(s)}`)})(n,e)}function jN(n,e){const t={};return TT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(n,((s,a)=>{const l=Pl(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function LN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof Rr||n instanceof As||n instanceof Gt||n instanceof Dl||n instanceof kr)}function U0(n,e,t){if(!LN(t)||!wT(t)){const s=Wh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Rg(n,e,t){if((e=Ht(e))instanceof mf)return e._internalPath;if(typeof e=="string")return O0(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const W6=new RegExp("[~\\*/\\[\\]]");function O0(n,e,t){if(e.search(W6)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mf(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new be(ce.INVALID_ARGUMENT,h+n+p)}function VN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Z6 extends UN{data(){return super.data()}}function xf(n,e){return typeof e=="string"?O0(n,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q0{}class z0 extends q0{}function Ln(n,e,...t){let s=[];e instanceof q0&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof F0)).length,h=l.filter((p=>p instanceof vf)).length;if(u>1||u>0&&h>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class vf extends z0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new vf(e,t,s)}_apply(e){const t=this._parse(e);return qN(e._query,t),new mi(e.firestore,e.converter,bg(e._query,t))}_parse(e){const t=gf(e.firestore);return(function(l,u,h,p,m,v,_){let E;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){x1(_,v);const D=[];for(const G of _)D.push(y1(p,l,G));E={arrayValue:{values:D}}}else E=y1(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||x1(_,v),E=X6(h,u,_,v==="in"||v==="not-in");return an.create(m,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $s(n,e,t){const s=e,a=xf("where",n);return vf._create(a,s,t)}class F0 extends q0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new F0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)qN(u,p),u=bg(u,p)})(e._query,t),new mi(e.firestore,e.converter,bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class G0 extends z0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new G0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(l,u)})(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new kl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function il(n,e="asc"){const t=e,s=xf("orderBy",n);return G0._create(s,t)}class H0 extends z0{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new H0(e,t,s)}_apply(e){return new mi(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function eh(n){return H0._create("limit",n,"F")}function y1(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OT(e)&&t.indexOf("/")!==-1)throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(St.fromString(t));if(!ke.isDocumentKey(s))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return D_(n,new ke(s))}if(t instanceof Gt)return D_(n,t._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function x1(n,e){if(!Array.isArray(n)||n.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qN(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eD{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ya(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Rh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>Yt(u.doubleValue)));return new kr(t)}convertGeoPoint(e){return new Rr(Yt(e.latitude),Yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const t=da(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=St.fromString(e);gt(lN(s),9688,{name:e});const a=new cu(s.get(1),s.get(3)),l=new ke(s.popFirst(5));return a.isEqual(t)||li(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ja extends UN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ja._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ja._jsonSchema={type:on("string",Ja._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class uh extends Ja{data(e={}){return super.data(e)}}class Xa{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Hc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new uh(this._firestore,this._userDataWriter,s.key,s,new Hc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new uh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Hc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new uh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Hc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:tD(h.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=a0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){n=Wn(n,Gt);const e=Wn(n.firestore,ui);return q6(ff(e),n._key).then((t=>GN(e,n,t)))}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:on("string",Xa._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class B0 extends eD{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Xn(n){n=Wn(n,mi);const e=Wn(n.firestore,ui),t=ff(e),s=new B0(e);return ON(n._query),z6(t,n._query).then((a=>new Xa(e,s,n,a)))}function $0(n,e,t){n=Wn(n,Gt);const s=Wn(n.firestore,ui),a=zN(n.converter,e,t);return _f(s,[PN(gf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Is.none())])}function bf(n,e,t,...s){n=Wn(n,Gt);const a=Wn(n.firestore,ui),l=gf(a);let u;return u=typeof(e=Ht(e))=="string"||e instanceof mf?J6(l,"updateDoc",n._key,e,t,s):Q6(l,"updateDoc",n._key,e),_f(a,[u.toMutation(n._key,Is.exists(!0))])}function nD(n){return _f(Wn(n.firestore,ui),[new m0(n._key,Is.none())])}function Nu(n,e){const t=Wn(n.firestore,ui),s=Xs(n),a=zN(n.converter,e);return _f(t,[PN(gf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Is.exists(!1))]).then((()=>s))}function sD(n,...e){var p,m,v;n=Ht(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||g1(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(g1(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(m=_.error)==null?void 0:m.bind(_),e[s+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,u,h;if(n instanceof Gt)u=Wn(n.firestore,ui),h=nf(n._key.path),l={next:_=>{e[s]&&e[s](GN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=Wn(n,mi);u=Wn(_.firestore,ui),h=_._query;const E=new B0(u);l={next:S=>{e[s]&&e[s](new Xa(u,E,_,S))},error:e[s+1],complete:e[s+2]},ON(n._query)}return(function(E,S,D,G){const F=new P0(G),ee=new k0(S,F,D);return E.asyncQueue.enqueueAndForget((async()=>C0(await Vh(E),ee))),()=>{F.Nu(),E.asyncQueue.enqueueAndForget((async()=>I0(await Vh(E),ee)))}})(ff(u),h,a,l)}function _f(n,e){return(function(s,a){const l=new si;return s.asyncQueue.enqueueAndForget((async()=>C6(await O6(s),a,l))),l.promise})(ff(n),e)}function GN(n,e,t){const s=t.docs.get(e._key),a=new B0(n);return new Ja(n,a,e._key,s,new Hc(t.hasPendingWrites,t.fromCache),e.converter)}function ro(){return new j0("serverTimestamp")}function rD(...n){return new L0("arrayUnion",n)}function kg(n){return new V0("increment",n)}(function(e,t=!0){(function(a){Cl=a})(Sl),Mr(new Ys("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new ui(new Jk(s.getProvider("auth-internal")),new Zk(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(m.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Cs(b_,__,e),Cs(b_,__,"esm2020")})();const HN="@firebase/installations",K0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1e4,$N=`w:${K0}`,KN="FIS_v2",iD="https://firebaseinstallations.googleapis.com/v1",aD=3600*1e3,oD="installations",lD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},io=new lo(oD,lD,cD);function YN(n){return n instanceof Ws&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN({projectId:n}){return`${iD}/projects/${n}/installations`}function JN(n){return{token:n.token,requestStatus:2,expiresIn:dD(n.expiresIn),creationTime:Date.now()}}async function XN(n,e){const s=(await e.json()).error;return io.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function WN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function uD(n,{refreshToken:e}){const t=WN(n);return t.append("Authorization",hD(e)),t}async function ZN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function dD(n){return Number(n.replace("s","000"))}function hD(n){return`${KN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=QN(n),a=WN(n),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={fid:t,authVersion:KN,appId:n.appId,sdkVersion:$N},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await ZN(()=>fetch(s,h));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:JN(m.authToken)}}else throw await XN("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^[cdef][\w-]{21}$/,Mg="";function gD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=yD(n);return pD.test(t)?t:Mg}catch{return Mg}}function yD(n){return mD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new Map;function n2(n,e){const t=wf(n);s2(t,e),xD(t,e)}function s2(n,e){const t=t2.get(n);if(t)for(const s of t)s(e)}function xD(n,e){const t=vD();t&&t.postMessage({key:n,fid:e}),bD()}let Qa=null;function vD(){return!Qa&&"BroadcastChannel"in self&&(Qa=new BroadcastChannel("[Firebase] FID Change"),Qa.onmessage=n=>{s2(n.data.key,n.data.fid)}),Qa}function bD(){t2.size===0&&Qa&&(Qa.close(),Qa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="firebase-installations-database",wD=1,ao="firebase-installations-store";let Fp=null;function Y0(){return Fp||(Fp=IE(_D,wD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ao)}}})),Fp}async function Oh(n,e){const t=wf(n),a=(await Y0()).transaction(ao,"readwrite"),l=a.objectStore(ao),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&n2(n,e.fid),e}async function r2(n){const e=wf(n),s=(await Y0()).transaction(ao,"readwrite");await s.objectStore(ao).delete(e),await s.done}async function Ef(n,e){const t=wf(n),a=(await Y0()).transaction(ao,"readwrite"),l=a.objectStore(ao),u=await l.get(t),h=e(u);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&n2(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(n){let e;const t=await Ef(n.appConfig,s=>{const a=ED(s),l=TD(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Mg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function ED(n){const e=n||{fid:gD(),registrationStatus:0};return i2(e)}function TD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(io.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=ND(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SD(n)}:{installationEntry:e}}async function ND(n,e){try{const t=await fD(n,e);return Oh(n.appConfig,t)}catch(t){throw YN(t)&&t.customData.serverCode===409?await r2(n.appConfig):await Oh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function SD(n){let e=await v1(n.appConfig);for(;e.registrationStatus===1;)await e2(100),e=await v1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Q0(n);return s||t}return e}function v1(n){return Ef(n,e=>{if(!e)throw io.create("installation-not-found");return i2(e)})}function i2(n){return AD(n)?{fid:n.fid,registrationStatus:0}:n}function AD(n){return n.registrationStatus===1&&n.registrationTime+BN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD({appConfig:n,heartbeatServiceProvider:e},t){const s=ID(n,t),a=uD(n,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={installation:{sdkVersion:$N,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await ZN(()=>fetch(s,h));if(p.ok){const m=await p.json();return JN(m)}else throw await XN("Generate Auth Token",p)}function ID(n,{fid:e}){return`${QN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(n,e=!1){let t;const s=await Ef(n.appConfig,l=>{if(!a2(l))throw io.create("not-registered");const u=l.authToken;if(!e&&MD(u))return l;if(u.requestStatus===1)return t=RD(n,e),l;{if(!navigator.onLine)throw io.create("app-offline");const h=PD(l);return t=kD(n,h),h}});return t?await t:s.authToken}async function RD(n,e){let t=await b1(n.appConfig);for(;t.authToken.requestStatus===1;)await e2(100),t=await b1(n.appConfig);const s=t.authToken;return s.requestStatus===0?J0(n,e):s}function b1(n){return Ef(n,e=>{if(!a2(e))throw io.create("not-registered");const t=e.authToken;return jD(t)?{...e,authToken:{requestStatus:0}}:e})}async function kD(n,e){try{const t=await CD(n,e),s={...e,authToken:t};return await Oh(n.appConfig,s),t}catch(t){if(YN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await r2(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Oh(n.appConfig,s)}throw t}}function a2(n){return n!==void 0&&n.registrationStatus===2}function MD(n){return n.requestStatus===2&&!DD(n)}function DD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+aD}function PD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function jD(n){return n.requestStatus===1&&n.requestTime+BN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n){const e=n,{installationEntry:t,registrationPromise:s}=await Q0(e);return s?s.catch(console.error):J0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e=!1){const t=n;return await UD(t),(await J0(t,e)).token}async function UD(n){const{registrationPromise:e}=await Q0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){if(!n||!n.options)throw Gp("App Configuration");if(!n.name)throw Gp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Gp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Gp(n){return io.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="installations",qD="installations-internal",zD=n=>{const e=n.getProvider("app").getImmediate(),t=OD(e),s=co(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},FD=n=>{const e=n.getProvider("app").getImmediate(),t=co(e,o2).getImmediate();return{getId:()=>LD(t),getToken:a=>VD(t,a)}};function GD(){Mr(new Ys(o2,zD,"PUBLIC")),Mr(new Ys(qD,FD,"PRIVATE"))}GD();Cs(HN,K0);Cs(HN,K0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="analytics",HD="firebase_id",BD="origin",$D=60*1e3,KD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",X0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new Yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hs=new lo("analytics","Analytics",YD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){if(!n.startsWith(X0)){const e=hs.create("invalid-gtag-resource",{gtagURL:n});return Vn.warn(e.message),""}return n}function l2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function JD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function XD(n,e){const t=JD("firebase-js-sdk-policy",{createScriptURL:QD}),s=document.createElement("script"),a=`${X0}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function WD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function ZD(n,e,t,s,a,l){const u=s[a];try{if(u)await e[u];else{const p=(await l2(t)).find(m=>m.measurementId===a);p&&await e[p.appId]}}catch(h){Vn.error(h)}n("config",a,l)}async function eP(n,e,t,s,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await l2(t);for(const p of u){const m=h.find(_=>_.measurementId===p),v=m&&e[m.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,a||{})}catch(l){Vn.error(l)}}function tP(n,e,t,s){async function a(l,...u){try{if(l==="event"){const[h,p]=u;await eP(n,e,t,h,p)}else if(l==="config"){const[h,p]=u;await ZD(n,e,t,s,h,p)}else if(l==="consent"){const[h,p]=u;n("consent",h,p)}else if(l==="get"){const[h,p,m]=u;n("get",h,p,m)}else if(l==="set"){const[h]=u;n("set",h)}else n(l,...u)}catch(h){Vn.error(h)}}return a}function nP(n,e,t,s,a){let l=function(...u){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=tP(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function sP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(X0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=30,iP=1e3;class aP{constructor(e={},t=iP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const c2=new aP;function oP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function lP(n){var u;const{appId:e,apiKey:t}=n,s={method:"GET",headers:oP(t)},a=KD.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let h="";try{const p=await l.json();(u=p.error)!=null&&u.message&&(h=p.error.message)}catch{}throw hs.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function cP(n,e=c2,t){const{appId:s,apiKey:a,measurementId:l}=n.options;if(!s)throw hs.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw hs.create("no-api-key")}const u=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new hP;return setTimeout(async()=>{h.abort()},$D),u2({appId:s,apiKey:a,measurementId:l},u,h,e)}async function u2(n,{throttleEndTimeMillis:e,backoffCount:t},s,a=c2){var h;const{appId:l,measurementId:u}=n;try{await uP(s,e)}catch(p){if(u)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:u};throw p}try{const p=await lP(n);return a.deleteThrottleMetadata(l),p}catch(p){const m=p;if(!dP(m)){if(a.deleteThrottleMetadata(l),u)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:l,measurementId:u};throw p}const v=Number((h=m==null?void 0:m.customData)==null?void 0:h.httpStatus)===503?Bb(t,a.intervalMillis,rP):Bb(t,a.intervalMillis),_={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return a.setThrottleMetadata(l,_),Vn.debug(`Calling attemptFetch again in ${v} millis`),u2(n,_,s,a)}}function uP(n,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),s(hs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function dP(n){if(!(n instanceof Ws)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class hP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function fP(n,e,t,s,a){if(a&&a.global){n("event",t,s);return}else{const l=await e,u={...s,send_to:l};n("event",t,u)}}async function mP(n,e,t,s){if(s&&s.global){const a={};for(const l of Object.keys(t))a[`user_properties.${l}`]=t[l];return n("set",a),Promise.resolve()}else{const a=await e;n("config",a,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(){if(NE())try{await SE()}catch(n){return Vn.warn(hs.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Vn.warn(hs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gP(n,e,t,s,a,l,u){const h=cP(n);h.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Vn.error(E)),e.push(h);const p=pP().then(E=>{if(E)return s.getId()}),[m,v]=await Promise.all([h,p]);sP(l)||XD(l,m.measurementId),a("js",new Date);const _=(u==null?void 0:u.config)??{};return _[BD]="firebase",_.update=!0,v!=null&&(_[HD]=v),a("config",m.measurementId,_),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.app=e}_delete(){return delete hl[this.app.options.appId],Promise.resolve()}}let hl={},_1=[];const w1={};let Hp="dataLayer",xP="gtag",E1,W0,T1=!1;function vP(){const n=[];if(TE()&&n.push("This is a browser extension environment."),cR()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=hs.create("invalid-analytics-context",{errorInfo:e});Vn.warn(t.message)}}function bP(n,e,t){vP();const s=n.options.appId;if(!s)throw hs.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hs.create("no-api-key");if(hl[s]!=null)throw hs.create("already-exists",{id:s});if(!T1){WD(Hp);const{wrappedGtag:l,gtagCore:u}=nP(hl,_1,w1,Hp,xP);W0=l,E1=u,T1=!0}return hl[s]=gP(n,_1,w1,e,E1,Hp,t),new yP(n)}function _P(n=Jg()){n=Ht(n);const e=co(n,qh);return e.isInitialized()?e.getImmediate():wP(n)}function wP(n,e={}){const t=co(n,qh);if(t.isInitialized()){const a=t.getImmediate();if(ii(e,t.getOptions()))return a;throw hs.create("already-initialized")}return t.initialize({options:e})}function EP(n,e,t){n=Ht(n),mP(W0,hl[n.app.options.appId],e,t).catch(s=>Vn.error(s))}function TP(n,e,t,s){n=Ht(n),fP(W0,hl[n.app.options.appId],e,t,s).catch(a=>Vn.error(a))}const N1="@firebase/analytics",S1="0.10.19";function NP(){Mr(new Ys(qh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return bP(s,a,t)},"PUBLIC")),Mr(new Ys("analytics-internal",n,"PRIVATE")),Cs(N1,S1),Cs(N1,S1,"esm2020");function n(e){try{const t=e.getProvider(qh).getImmediate();return{logEvent:(s,a,l)=>TP(t,s,a,l),setUserProperties:(s,a)=>EP(t,s,a)}}catch(t){throw hs.create("interop-component-reg-failed",{reason:t})}}}NP();const SP={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Z0=RE(SP),Wc=$k(Z0),pt=G6(Z0);_P(Z0);const d2=H.createContext(void 0),AP=({children:n})=>{const[e,t]=H.useState(null),[s,a]=H.useState(!0),l=(p,m)=>{const v=`teacher-${m.split("@")[0]}`;let _="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";p.includes("")?_="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":p.includes("")&&(_="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:v,email:m,displayName:p,role:"teacher",avatar:_,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",p),localStorage.setItem("teacherEmail",m)},u=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await j5(Wc)}catch(p){console.error("Logout error",p)}},h=async p=>{if(e)try{let m={...p};if(p.firstName!==void 0||p.lastName!==void 0){const v=p.firstName!==void 0?p.firstName:e.firstName||"",_=p.lastName!==void 0?p.lastName:e.lastName||"";m.displayName=`${v} ${_}`.trim()}if(t(v=>v?{...v,...m}:null),e.role!=="teacher"){const v=Xs(pt,"users",e.uid);await $0(v,m,{merge:!0})}}catch(m){throw console.error("Error updating profile:",m),m}};return H.useEffect(()=>{const p=localStorage.getItem("isTeacher")==="true";if(p){const v=localStorage.getItem("teacherName")||"",_=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";l(v,_),a(!1);return}const m=P5(Wc,async v=>{if(v)try{const _=Xs(pt,"users",v.uid),E=await FN(_);if(E.exists()){const S=E.data();(v.email==="q@gmail.com"||v.email==="yazan22@gmail.com")&&(S.totalXP=25e3,S.quizzesCompleted=500),t({uid:v.uid,email:v.email||"",displayName:S.displayName||`${S.firstName||""} ${S.lastName||""}`.trim()||"Student",firstName:S.firstName,lastName:S.lastName,age:S.age,role:S.role,grade:S.grade,phone:S.phone,address:S.address,school:S.school,gender:S.gender,avatar:S.avatar,profileBackground:S.profileBackground,genderChanged:S.genderChanged,aptitudeResults:S.aptitudeResults,performanceAnalysis:S.performanceAnalysis})}else t({uid:v.uid,email:v.email||"",displayName:"User",role:"student"})}catch(_){console.error("Error fetching user profile:",_)}else p||t(null);a(!1)});return()=>m()},[]),o.jsx(d2.Provider,{value:{user:e,loading:s,logout:u,setTeacherSession:l,updateUserProfile:h},children:!s&&n})},ks=()=>{const n=H.useContext(d2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},CP=({onLoginClick:n,onNavigate:e,onLogoutClick:t})=>{const[s,a]=H.useState(!1),[l,u]=H.useState(!1),{user:h}=ks();H.useEffect(()=>{const m=()=>{window.scrollY>10?u(!0):u(!1)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const p=m=>{e(m),a(!1),window.scrollTo({top:0,behavior:"smooth"})};return o.jsxs("nav",{className:`w-full z-50 sticky top-0 transition-all duration-500 ${l?"bg-gray-950 shadow-lg":"bg-transparent shadow-none"}`,children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>p("HOME"),children:[o.jsx("div",{className:"p-1 bg-white/5 rounded-full group-hover:bg-white/10 transition-colors",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"  ",className:"w-10 h-10 md:w-12 md:h-12 rounded-full object-cover border-2 border-white/10 shadow-sm"})}),o.jsx("span",{className:"text-xl md:text-2xl font-black text-white tracking-tight drop-shadow-sm",children:""})]}),o.jsx("div",{className:"hidden md:flex items-center justify-center flex-1 px-4 lg:px-8",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-full border transition-all duration-500 ${l?"bg-gray-900/50 border-white/5 backdrop-blur-sm":"bg-white/5 border-white/5 backdrop-blur-sm"}`,children:[o.jsxs("button",{onClick:()=>p("HOME"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(yh,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("QUIZZES"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(Zn,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("LESSONS_EXPLANATIONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(nu,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("LESSONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(Ks,{className:"w-4 h-4"})," "]})]})}),o.jsx("div",{className:"hidden md:flex items-center gap-3",children:h?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>p("PROFILE"),className:"flex items-center gap-2 text-white hover:bg-white/10 px-3 py-1.5 rounded-full transition-all font-bold border border-transparent hover:border-white/10",title:" ",children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center border border-white/20",children:h.avatar?o.jsx("img",{src:h.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:h.displayName.split(" ")[0]})]}),h.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>p("QUESTION_BANK"),className:"bg-white/10 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all border border-white/10",title:" ",children:o.jsx(la,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>p("TEACHER_DASHBOARD"),className:"bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all shadow-lg border border-blue-400/50",title:" ",children:o.jsx(ph,{className:"w-5 h-5"})})]}),o.jsx("button",{onClick:t,className:"bg-red-500/10 text-red-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition-all border border-red-500/20",title:"",children:o.jsx(tu,{className:"w-4 h-4"})})]}):o.jsxs("button",{onClick:n,className:"bg-gradient-to-r from-emerald-600 to-teal-700 text-white px-5 py-2 rounded-full font-bold hover:shadow-[0_0_15px_rgba(16,185,129,0.4)] transition-all shadow-md flex items-center gap-2 transform hover:scale-105 border border-emerald-500/30 text-sm",children:[o.jsx(eg,{className:"w-4 h-4"})," "]})}),o.jsx("div",{className:"md:hidden flex items-center gap-2",children:o.jsx("button",{onClick:()=>a(!s),className:"text-white hover:text-emerald-200 p-2 transition-colors",children:s?o.jsx(Nr,{className:"w-7 h-7"}):o.jsx(KC,{className:"w-7 h-7"})})})]})}),s&&o.jsx("div",{className:"md:hidden bg-gray-950/95 backdrop-blur-xl border-t border-white/10 shadow-xl absolute w-full z-50 animate-fade-in h-screen overflow-y-auto pb-20",children:o.jsxs("div",{className:"px-4 pt-2 pb-6 space-y-2",children:[h&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-white/5 rounded-2xl border border-white/10 mt-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden border border-white/20",children:h.avatar?o.jsx("img",{src:h.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):h.displayName.charAt(0)}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-white text-lg",children:h.displayName}),o.jsx("span",{className:"text-sm text-gray-400",children:h.email})]})]}),o.jsxs("button",{onClick:()=>p("HOME"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(yh,{className:"w-5 h-5 text-emerald-400"})," "]}),o.jsxs("button",{onClick:()=>p("QUIZZES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Zn,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("LESSONS_EXPLANATIONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(nu,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("LESSONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Ks,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("CONTACT_TEACHER"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Bg,{className:"w-5 h-5 text-emerald-400"}),"   "]}),o.jsxs("button",{onClick:()=>p("ABOUT_PLATFORM"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(RC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("SERVICES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(cE,{className:"w-5 h-5 text-emerald-400"})," "]}),h&&o.jsxs("button",{onClick:()=>p("PROFILE"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(iC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsx("div",{className:"border-t border-white/10 my-2 pt-2"}),h?o.jsxs("div",{className:"space-y-3 mt-2",children:[h.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>p("TEACHER_DASHBOARD"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-md flex items-center justify-center gap-2",children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]}),o.jsxs("button",{onClick:()=>p("QUESTION_BANK"),className:"w-full bg-gray-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2",children:[o.jsx(la,{className:"w-5 h-5"})," "]})]}),o.jsxs("button",{onClick:()=>{a(!1),t()},className:"w-full bg-red-900/20 text-red-400 border border-red-900/30 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-red-900/40",children:[o.jsx(tu,{className:"w-5 h-5"})," "]})]}):o.jsxs("button",{onClick:()=>{a(!1),n()},className:"w-full mt-2 bg-gradient-to-r from-emerald-600 to-teal-700 text-white py-3 rounded-xl font-black text-lg shadow-lg flex items-center justify-center gap-2",children:[o.jsx(eg,{className:"w-6 h-6"})," "]})]})})]})},IP=({onStartQuiz:n,onLoginClick:e,onNavigate:t})=>{const{user:s}=ks(),[a,l]=H.useState(!1),u=()=>{l(!0),setTimeout(()=>l(!1),3e3)},h=()=>{s?t("QUIZZES"):u()},p=()=>{s?t("LESSONS"):u()},m=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return o.jsxs("section",{className:"relative w-full min-h-[calc(100vh-80px)] flex items-center justify-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300",children:[a&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[o.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:o.jsx(mh,{className:"w-6 h-6 text-red-200"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),o.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),o.jsx("button",{onClick:()=>l(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:o.jsx(Nr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{l(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-0 w-full relative z-10 flex flex-col items-center text-center",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/40 border border-emerald-800 px-4 py-2 rounded-full shadow-lg backdrop-blur-md",children:[o.jsx(sa,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})}),o.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",o.jsx("br",{}),o.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",o.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:o.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),o.jsx("br",{}),"  "]}),o.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["         ",o.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),o.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[o.jsxs("button",{onClick:h,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Zn,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(nu,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:p,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Ks,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:()=>t("PLATFORM_DEFINITION"),className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(ti,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"   "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Bg,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsx("div",{className:"w-full mt-2",children:s?o.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-800/80 backdrop-blur-sm border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[o.jsx(jn,{className:"w-5 h-5"})," "]}):o.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(eg,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(Tr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},Bp=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),$p=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),RP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),A1=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],kP=({onNavigate:n})=>{const[e,t]=H.useState([0,1,2]),[s,a]=H.useState(!0);H.useEffect(()=>{const h=setInterval(()=>{a(!1),setTimeout(()=>{const p=[];for(;p.length<3;){const m=Math.floor(Math.random()*A1.length);p.includes(m)||p.push(m)}t(p),a(!0)},500)},5e3);return()=>clearInterval(h)},[]);const l=h=>{switch(h){case"whatsapp":return o.jsx(Bp,{className:"w-5 h-5 text-white"});case"messenger":return o.jsx(RP,{className:"w-5 h-5 text-white"});case"telegram":return o.jsx($p,{className:"w-5 h-5 text-white"});default:return null}},u=h=>{switch(h){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}};return o.jsx("section",{className:"py-20 relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),o.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(ng,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Zp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx($p,{className:"w-6 h-6"})})]})]})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(ng,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Zp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx($p,{className:"w-6 h-6"})})]})]})]})]}),o.jsx("div",{className:"text-center mb-12",children:o.jsxs("button",{onClick:()=>n("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[o.jsx(Wa,{className:"w-6 h-6"}),"  ",o.jsx(fh,{className:"w-6 h-6"})]})}),o.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map((h,p)=>{const m=A1[h];return o.jsx("div",{className:`transform transition-all duration-500 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-lg border border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-white/10 transition-all",children:[o.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-white/5 border-b border-r border-white/5 transform rotate-45"}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:m.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white",children:m.name}),o.jsx("span",{className:"text-xs text-gray-500 font-medium",children:m.time})]})]}),o.jsx("div",{className:`w-8 h-8 rounded-full ${u(m.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:l(m.platform)})]}),o.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',m.text,'"']})]})},`${m.id}-${p}`)})})]})]})})},C1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=H.useState(!1),h=H.useRef(null);H.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":l?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(Za,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(oo,{className:"w-3 h-3"})]},v)})})]})},MP=({isOpen:n,onClose:e})=>{const[t,s]=H.useState("ROLE_SELECTION"),[a,l]=H.useState(!1),[u,h]=H.useState(null),[p,m]=H.useState(null),{setTeacherSession:v}=ks(),[_,E]=H.useState(""),[S,D]=H.useState(""),[G,F]=H.useState(""),[ee,ne]=H.useState(""),[K,ae]=H.useState(""),[Z,z]=H.useState(""),[I,A]=H.useState(""),[R,P]=H.useState(""),[j,U]=H.useState(""),[M,$e]=H.useState("male"),[Ke,X]=H.useState(""),[fe,Te]=H.useState("");if(!n)return null;const Ve=()=>{s("ROLE_SELECTION"),h(null),m(null),E(""),D(""),F(""),ne(""),ae(""),z(""),A(""),P(""),U(""),$e("male"),Te(""),X(""),l(!1)},Le=()=>{Ve(),e()},O=ze=>{ze.preventDefault(),h(null),l(!0),setTimeout(()=>{_==="2001"?(v(".   ","yazan@etqan.edu"),m("   !"),setTimeout(()=>Le(),1500)):_==="2003"?(v(".   ","majd@etqan.edu"),m("    !"),setTimeout(()=>Le(),1500)):(h("   "),l(!1))},800)},J=async ze=>{ze.preventDefault(),h(null),l(!0);try{await k5(Wc,S.trim(),G),m("   !"),setTimeout(()=>Le(),1500)}catch(ht){console.error(ht),h("      "),l(!1)}},V=async ze=>{ze.preventDefault(),h(null),l(!0);try{const at=(await R5(Wc,R.trim(),j)).user,Ut="",lt=I==="university"&&Ke?Ke:"";await $0(Xs(pt,"users",at.uid),{firstName:ee,lastName:K,age:Z,grade:I,gender:M,school:lt,avatar:Ut,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:R.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),m("   !"),setTimeout(()=>Le(),1500)}catch(ht){console.error(ht),ht.code==="auth/email-already-in-use"?h("   "):ht.code==="auth/weak-password"?h("   "):h("    .    ."),l(!1)}},re=async ze=>{ze.preventDefault(),h(null),l(!0);try{await I5(Wc,fe.trim()),m("   !")}catch(ht){console.error(ht),ht.code==="auth/user-not-found"?h("    "):ht.code==="auth/invalid-email"?h("    "):ht.code==="auth/too-many-requests"?h("           ."):h("          .")}finally{l(!1)}},he=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ae=()=>o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),o.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:o.jsx(jn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),o.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:o.jsx(ri,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Ie=()=>o.jsxs("form",{onSubmit:O,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ka,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsx("input",{type:"password",value:_,onChange:ze=>E(ze.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),Ye=()=>o.jsxs("form",{onSubmit:J,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:S,onChange:ze=>D(ze.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(tg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"password",value:G,onChange:ze=>F(ze.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),o.jsx(Ka,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),o.jsx("div",{className:"text-left",children:o.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",o.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),je=()=>{const ze=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(at=>({label:` ${at}`,value:at.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],ht=[{label:"",value:"male"},{label:"",value:"female"}];return o.jsxs("form",{onSubmit:V,className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:ee,onChange:at=>ne(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:K,onChange:at=>ae(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx("input",{type:"number",value:Z,onChange:at=>z(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx(C1,{options:ht,value:M,onChange:at=>$e(at),placeholder:" "})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),o.jsx(C1,{options:ze,value:I,onChange:at=>A(at),placeholder:"  / "})]}),I==="university"&&o.jsxs("div",{className:"space-y-1 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),o.jsx("input",{type:"text",value:Ke,onChange:at=>X(at.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"email",value:R,onChange:at=>P(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"password",value:j,onChange:at=>U(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},gn=()=>o.jsxs("form",{onSubmit:re,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",o.jsx("strong",{children:""}),"  "]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:fe,onChange:ze=>Te(ze.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(tg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),o.jsx("div",{className:"text-center mt-4",children:o.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[o.jsx(fh,{className:"w-4 h-4"}),"  "]})})]});return o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Le}),o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[a&&!p&&o.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),o.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:o.jsx(rn,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),o.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:he()}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),o.jsx("button",{onClick:Le,disabled:a,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:o.jsx(Nr,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!p&&t!=="FORGOT_PASSWORD"&&o.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:a,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[o.jsx(Cp,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-bold",children:""})]}),o.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:p?o.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:o.jsx(oo,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:p}),t==="FORGOT_PASSWORD"&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[o.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[o.jsx(mh,{className:"w-5 h-5"}),"  :"]}),o.jsxs("p",{className:"leading-relaxed",children:["         ",o.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),o.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),m(null)):Le()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):o.jsxs(o.Fragment,{children:[t==="ROLE_SELECTION"&&Ae(),t==="TEACHER_LOGIN"&&Ie(),t==="STUDENT_LOGIN"&&Ye(),t==="STUDENT_SIGNUP"&&je(),t==="FORGOT_PASSWORD"&&gn(),u&&o.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[o.jsx(mh,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsx("span",{className:"font-medium",children:u})]})]})})]})]})},DP=()=>{const{user:n}=ks(),[e,t]=H.useState(!1),[s,a]=H.useState(null),[l,u]=H.useState("MCQ"),[h,p]=H.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[m,v]=H.useState([]),[_,E]=H.useState(null),[S,D]=H.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[G,F]=H.useState(""),[ee,ne]=H.useState(!1),[K,ae]=H.useState([]),[Z,z]=H.useState(!1),[I,A]=H.useState(""),R=(V,re)=>{D(he=>({...he,[V]:re}))},P=(V,re)=>{const he=[...S.options];he[V]=re,D(Ae=>({...Ae,options:he}))},j=()=>{if(!S.question.trim()){alert("   ");return}if((l==="MCQ"||l==="READING")&&S.options.some(he=>!he.trim())){alert("   ");return}if(l==="READING"&&!S.passageContent.trim()){alert("   ");return}if(l==="REORDER"&&!G.trim()){alert("    ");return}let V=[];if(l==="TF")V=["",""];else if(l==="REORDER"){if(V=G.split(" ").filter(he=>he.trim().length>0),V.length<2){alert("       ");return}}else V=S.options;const re={id:_||Date.now(),question:S.question,options:V,correctAnswer:S.correctAnswer,explanation:S.explanation||"",type:l};l==="READING"&&(re.passageContent=S.passageContent,re.generalInstruction=S.generalInstruction,re.passageFontSize=S.passageFontSize),_?(v(m.map(he=>he.id===_?re:he)),E(null)):v([...m,re]),U()},U=()=>{D({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),F(""),E(null),u("MCQ")},M=V=>{const re=m.find(he=>he.id===V);re&&(E(V),u(re.type||"MCQ"),re.type==="REORDER"?(F(re.options.join(" ")),D({question:re.question,options:["","","",""],correctAnswer:re.correctAnswer,explanation:re.explanation||"",passageContent:re.passageContent||"",generalInstruction:re.generalInstruction||"",passageFontSize:re.passageFontSize||"md"})):(D({question:re.question,options:re.type==="TF"?["","","",""]:re.options.length>=4?re.options:[...re.options,...Array(4-re.options.length).fill("")],correctAnswer:re.correctAnswer,explanation:re.explanation||"",passageContent:re.passageContent||"",generalInstruction:re.generalInstruction||"",passageFontSize:re.passageFontSize||"md"}),F("")),window.scrollTo({top:0,behavior:"smooth"}))},$e=()=>{U()},Ke=V=>{window.confirm("      ")&&(v(m.filter(re=>re.id!==V)),_===V&&U())},X=async()=>{if(!h.title||!h.grade){alert("     ");return}if(m.length===0){alert("     ");return}t(!0);try{const V={title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:m,createdBy:(n==null?void 0:n.uid)||"teacher",teacherName:(n==null?void 0:n.displayName)||"",description:h.description||"",duration:parseInt(h.duration)||30,questionDuration:h.questionDuration?parseInt(h.questionDuration):void 0};if(s){const re=Xs(pt,"quizzes",s);await bf(re,{...V,updatedAt:ro()}),alert("    !")}else await Nu(ln(pt,"quizzes"),{...V,createdAt:ro()}),alert("    !");p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),U()}catch(V){console.error("Error saving quiz:",V),alert("   ")}finally{t(!1)}},fe=()=>{window.confirm("        .")&&(p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),U())},Te=async()=>{z(!0);try{const V=Ln(ln(pt,"quizzes"),il("createdAt","desc")),re=await Xn(V);ae(re.docs.map(he=>({id:he.id,...he.data()})))}catch(V){console.error(V)}z(!1)},Ve=()=>{Te(),ne(!0)},Le=V=>{m.length>0&&!window.confirm("         .")||(a(V.id||null),p({title:V.title,subject:V.subject,grade:V.grade,category:V.category||"Language",description:V.description||"",duration:V.duration?V.duration.toString():"30",questionDuration:V.questionDuration?V.questionDuration.toString():""}),v(V.questions),ne(!1),U(),window.scrollTo({top:0,behavior:"smooth"}))},O=K.filter(V=>V.title.toLowerCase().includes(I.toLowerCase())||V.grade.includes(I)),J=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:o.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:o.jsx(Ob,{className:"w-10 h-10 text-blue-400"})}),o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),o.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",n==null?void 0:n.displayName]})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:Ve,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[o.jsx(Xp,{className:"w-5 h-5"})," "]})})]})})}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(Zn,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),o.jsx("button",{onClick:fe,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:o.jsx(Nr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:V=>p({...h,title:V.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx($g,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.subject,onChange:V=>p({...h,subject:V.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"English",children:"English"}),o.jsx("option",{value:"Science",children:""}),o.jsx("option",{value:"Math",children:""})]})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),o.jsxs("div",{className:"relative",children:[o.jsx(ri,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.grade,onChange:V=>p({...h,grade:V.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",className:"text-gray-400",children:" "}),o.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(V=>o.jsxs("option",{value:V.toString(),children:[" ",V]},V))}),o.jsx("optgroup",{label:" ",children:o.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(Za,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"col-span-2 md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),o.jsxs("div",{className:"relative",children:[o.jsx(mE,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.category,onChange:V=>p({...h,category:V.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),o.jsx("option",{value:"General",children:"  (General Quiz)"})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(Za,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(Bh,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),o.jsx("input",{type:"number",min:"1",value:h.duration,onChange:V=>p({...h,duration:V.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(pE,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),o.jsx("input",{type:"number",min:"5",value:h.questionDuration,onChange:V=>p({...h,questionDuration:V.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),o.jsx("textarea",{value:h.description,onChange:V=>p({...h,description:V.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(ph,{className:"w-5 h-5 text-blue-400"})}),_?" ":" "]}),o.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[o.jsx("button",{onClick:()=>u("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsx("button",{onClick:()=>u("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsxs("button",{onClick:()=>u("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(Ks,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>u("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(dE,{className:"w-4 h-4"})," "]})]})]}),o.jsxs("div",{className:"space-y-6",children:[l==="READING"&&o.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[o.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[o.jsx(AI,{className:"w-5 h-5"})," "]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),o.jsx("input",{type:"text",value:S.generalInstruction,onChange:V=>R("generalInstruction",V.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),o.jsx("textarea",{value:S.passageContent,onChange:V=>R("passageContent",V.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),o.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[o.jsx(VI,{className:"w-4 h-4"}),"   (  )"]}),o.jsx("div",{className:"flex gap-3",children:J.map(V=>o.jsx("button",{onClick:()=>R("passageFontSize",V.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${S.passageFontSize===V.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:V.label},V.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:l==="READING"?"  ":l==="REORDER"?"/ ":" "}),o.jsxs("div",{className:"relative",children:[o.jsx(ti,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),o.jsx("input",{type:"text",value:S.question,onChange:V=>R("question",V.target.value),placeholder:l==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),l==="MCQ"||l==="READING"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.options.map((V,re)=>o.jsxs("div",{className:`relative group transition-all duration-300 ${S.correctAnswer===re?"scale-[1.02]":""}`,children:[o.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[o.jsxs("span",{className:`text-xs font-bold ${S.correctAnswer===re?"text-blue-400":"text-gray-400"}`,children:[" ",re+1]}),o.jsx("button",{onClick:()=>R("correctAnswer",re),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${S.correctAnswer===re?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:S.correctAnswer===re?" ":" "})]}),o.jsx("input",{type:"text",value:V,onChange:he=>P(re,he.target.value),placeholder:`  ${re+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${re===S.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},re))}):l==="REORDER"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),o.jsx("input",{type:"text",dir:"ltr",value:G,onChange:V=>F(V.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),G&&o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:G.split(" ").filter(V=>V.trim()).map((V,re)=>o.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:V},re))}),o.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("button",{onClick:()=>R("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===0&&o.jsx(Qn,{className:"w-6 h-6"})," (True)"]}),o.jsxs("button",{onClick:()=>R("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===1&&o.jsx(Qn,{className:"w-6 h-6"})," (False)"]})]}),o.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[o.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),o.jsx("textarea",{value:S.explanation,onChange:V=>R("explanation",V.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm"})]}),o.jsxs("div",{className:"flex gap-3",children:[_&&o.jsxs("button",{onClick:$e,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[o.jsx(fE,{className:"w-5 h-5"})," "]}),o.jsx("button",{onClick:j,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${_?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:_?o.jsxs(o.Fragment,{children:[o.jsx(na,{className:"w-5 h-5"})," "]}):o.jsxs(o.Fragment,{children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"sticky top-24 space-y-6",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[o.jsx(na,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:m.length})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:h.category})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsxs("span",{className:"font-bold text-white",children:[h.duration," "]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?o.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),o.jsxs("button",{onClick:X,disabled:e||m.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||m.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):s?o.jsx(hE,{className:"w-5 h-5"}):o.jsx(Qn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),m.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:o.jsx(Ob,{className:"w-4 h-4 text-blue-400"})}),"  (",m.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:m.map((V,re)=>o.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${_===V.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:re+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:V.question}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:V.type==="REORDER"?"":V.options.length===2?"/":V.passageContent?"":""})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[o.jsxs("button",{onClick:()=>M(V.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(rg,{className:"w-3.5 h-3.5"}),""]}),o.jsx("div",{className:"w-px h-3 bg-gray-600"}),o.jsxs("button",{onClick:()=>Ke(V.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(ig,{className:"w-3.5 h-3.5"}),""]})]})]},V.id))})]})]})})]})}),ee&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(Xp,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),o.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(Nr,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:o.jsxs("div",{className:"relative",children:[o.jsx(ca,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),o.jsx("input",{type:"text",placeholder:"   ...",value:I,onChange:V=>A(V.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:Z?o.jsx("div",{className:"flex justify-center py-10",children:o.jsx(rn,{className:"w-8 h-8 animate-spin text-emerald-600"})}):O.length===0?o.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(V=>o.jsxs("div",{onClick:()=>Le(V),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:V.subject}),o.jsx("span",{className:"text-xs text-gray-400",children:V.grade})]}),o.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:V.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(ti,{className:"w-3 h-3"}),V.questions.length," "]})]},V.id))})})]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PP,jP;function LP(){return{geminiUrl:PP,vertexUrl:jP}}function VP(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=LP();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function UP(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Dg(n,a,l,0,u)}}function Dg(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])Dg(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of h)p[m]=u[m];for(const[m,v]of Object.entries(p)){const _=[];for(const E of t.slice(s))E==="*"?_.push(m):_.push(E);g(u,_,v)}for(const m of h)delete u[m]}}else{const u=n;l in u&&Dg(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ey(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OP(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function qP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],FP(u)),e}function zP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],GP(u)),e}function FP(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>HP(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function GP(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>BP(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function HP(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],XP(t)),e}function BP(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],WP(t)),e}function $P(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function KP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function YP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],QP(u)),e}function QP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function h2(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],JP(u)),e}function JP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function XP(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],ey(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function WP(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],ey(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var I1;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(I1||(I1={}));var R1;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(R1||(R1={}));var k1;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(k1||(k1={}));var Nt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Nt||(Nt={}));var M1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(M1||(M1={}));var D1;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(D1||(D1={}));var P1;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(P1||(P1={}));var j1;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(j1||(j1={}));var L1;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(L1||(L1={}));var V1;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(V1||(V1={}));var U1;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(U1||(U1={}));var O1;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(O1||(O1={}));var q1;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(q1||(q1={}));var z1;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(z1||(z1={}));var F1;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(F1||(F1={}));var G1;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(G1||(G1={}));var H1;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(H1||(H1={}));var B1;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(B1||(B1={}));var $1;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($1||($1={}));var zh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(zh||(zh={}));var K1;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(K1||(K1={}));var Y1;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Y1||(Y1={}));var Q1;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Q1||(Q1={}));var Pg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pg||(Pg={}));var J1;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(J1||(J1={}));var X1;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(X1||(X1={}));var W1;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(W1||(W1={}));var Z1;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Z1||(Z1={}));var ew;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ew||(ew={}));var tw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tw||(tw={}));var nw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(nw||(nw={}));var sw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(sw||(sw={}));var rw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(rw||(rw={}));var iw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(iw||(iw={}));var aw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(aw||(aw={}));var ow;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ow||(ow={}));var lw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lw||(lw={}));var cw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cw||(cw={}));var uw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(uw||(uw={}));var dw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(dw||(dw={}));var hw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(hw||(hw={}));var fw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(fw||(fw={}));var mw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mw||(mw={}));var pw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(pw||(pw={}));var gw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(gw||(gw={}));var yw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(yw||(yw={}));var xw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xw||(xw={}));var vw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(vw||(vw={}));var bw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(bw||(bw={}));var _w;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_w||(_w={}));var ww;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ww||(ww={}));var Ew;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ew||(Ew={}));var Tw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tw||(Tw={}));var Nw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Nw||(Nw={}));var al;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(al||(al={}));class jg{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Vc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const E of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[S,D]of Object.entries(E))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(D!==null||D!==void 0)&&_.push(S);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,m+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[E,S]of Object.entries(_))E!=="inlineData"&&(S!==null||S!==void 0)&&v.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Sw{}class Aw{}class ZP{}class ej{}class tj{}class nj{}class Cw{}class Iw{}class Rw{}class sj{}class Fh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Fh;let a;const l=e;return t?a=zP(l):a=qP(l),Object.assign(s,a),s}}class kw{}class Mw{}class Dw{}class rj{}class ij{}class aj{}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ty,l=YP(e);return Object.assign(s,l),s}}class oj{}class lj{}class cj{}class Pw{}class uj{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class dj{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ny{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ny,l=h2(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function f2(n,e){const t=dt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function m2(n){return Array.isArray(n)?n.map(e=>Gh(e)):[Gh(n)]}function Gh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function p2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function g2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jw(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function y2(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>jw(e)):[jw(n)]}function Lg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Lw(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Vw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function kn(n){if(n==null)throw new Error("ContentUnion is required");return Lg(n)?n:{role:"user",parts:y2(n)}}function sy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=kn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=kn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>kn(t)):[kn(e)]}function Rs(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Lw(n)||Vw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[kn(n)]}const e=[],t=[],s=Lg(n[0]);for(const a of n){const l=Lg(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Lw(a)||Vw(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:y2(t)}),e}function hj(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Nt).includes(t[0].toUpperCase())?t[0].toUpperCase():Nt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Nt).includes(s.toUpperCase())?s.toUpperCase():Nt.TYPE_UNSPECIFIED})}}function fl(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&hj(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Nt).includes(h.toUpperCase())?h.toUpperCase():Nt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=fl(h);else if(s.includes(u)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push(fl(m))}e[u]=p}else if(a.includes(u)){const p={};for(const[m,v]of Object.entries(h))p[m]=fl(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function ry(n){return fl(n)}function iy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ay(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function jl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fl(e.response));return n}function Ll(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function fj(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function gi(n,e){if(typeof e!="string")throw new Error("name must be a string");return fj(n,e,"cachedContents")}function x2(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function va(n){return ey(n)}function mj(n){return n!=null&&typeof n=="object"&&"name"in n}function pj(n){return n!=null&&typeof n=="object"&&"video"in n}function gj(n){return n!=null&&typeof n=="object"&&"uri"in n}function v2(n){var e;let t;if(mj(n)&&(t=n.name),!(gj(n)&&(t=n.uri,t===void 0))&&!(pj(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function b2(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function _2(n){for(const e of["models","tunedModels","publisherModels"])if(yj(n,e))return n[e];return[]}function yj(n,e){return n!==null&&typeof n=="object"&&e in n}function xj(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function vj(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=xj(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function w2(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function bj(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function E2(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Vl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function T2(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _j(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>t9(u))),g(e,["inlinedResponses"],l)}const a=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function wj(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Ej(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function dh(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["metadata","state"]);a!=null&&g(e,["state"],T2(a));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=f(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],_j(E2(m))),e}function Vg(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["state"]);a!=null&&g(e,["state"],T2(a));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const _=f(n,["inputConfig"]);_!=null&&g(e,["src"],Tj(_));const E=f(n,["outputConfig"]);E!=null&&g(e,["dest"],wj(E2(E)));const S=f(n,["completionStats"]);return S!=null&&g(e,["completionStats"],S),e}function Tj(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Nj(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>e9(n,u))),g(t,["requests","requests"],l)}return t}function Sj(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Aj(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Cj(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Ij(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Rj(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],kj(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["safetyRatings"],E)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function kj(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function N2(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>l9(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Mj(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Dj(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],Ej(bj(a))),t}function Uw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],Nj(n,w2(n,a)));const l=f(e,["config"]);return l!=null&&Mj(l,t),t}function Pj(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],dt(n,s));const a=f(e,["src"]);a!=null&&g(t,["inputConfig"],Sj(w2(n,a)));const l=f(e,["config"]);return l!=null&&Dj(l,t),t}function jj(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function Lj(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],Gj(n,a));const l=f(e,["config"]);return l!=null&&jj(l,t),t}function Vj(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Uj(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Oj(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function qj(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function zj(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=sy(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(g(t,["_self"],Fj(a,t)),UP(t,{"requests[].*":"requests[].request.*"})),t}function Fj(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Gj(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=f(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],zj(n,a)),t}function Hj(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Bj(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $j(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Kj(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],N2(kn(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&g(s,["logprobs"],E);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const D=f(e,["frequencyPenalty"]);D!=null&&g(s,["frequencyPenalty"],D);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],ry(ee));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(s,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let U=K;Array.isArray(U)&&(U=U.map(M=>c9(M))),g(t,["safetySettings"],U)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let U=Ll(ae);Array.isArray(U)&&(U=U.map(M=>d9(jl(M)))),g(t,["tools"],U)}const Z=f(e,["toolConfig"]);if(t!==void 0&&Z!=null&&g(t,["toolConfig"],u9(Z)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);t!==void 0&&z!=null&&g(t,["cachedContent"],gi(n,z));const I=f(e,["responseModalities"]);I!=null&&g(s,["responseModalities"],I);const A=f(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],iy(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],Zj(j)),s}function Yj(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Rj(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function Qj(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Jj(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Vl(n,s)),t}function Xj(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Wj(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Zj(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function e9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let h=Rs(a);Array.isArray(h)&&(h=h.map(p=>N2(p))),g(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],Kj(n,u,f(t,["request"],{}))),t}function t9(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],Yj(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function n9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function s9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function r9(n){const e={},t=f(n,["config"]);return t!=null&&n9(t,e),e}function i9(n){const e={},t=f(n,["config"]);return t!=null&&s9(t,e),e}function a9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>dh(u))),g(e,["batchJobs"],l)}return e}function o9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Vg(u))),g(e,["batchJobs"],l)}return e}function l9(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Hj(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],Bj(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],Aj(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function c9(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function u9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],$j(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function d9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],Xj(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],Wj(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var di;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(di||(di={}));class fo{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h9 extends pi{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new fo(di.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Uw(this.apiClient,e),s=t._url,a=ve("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const S=_.request;S.systemInstruction=E,_.request=S}m.push(_)}return h.requests=m,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Pj(this.apiClient,e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=Uw(this.apiClient,e);return h=ve("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>dh(v))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Lj(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>dh(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Jj(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=Qj(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>dh(v))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=Ij(this.apiClient,e);u=ve("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Cj(this.apiClient,e);u=ve("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=i9(e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=o9(v),E=new Pw;return Object.assign(E,_),E})}else{const m=r9(e);return h=ve("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=a9(v),E=new Pw;return Object.assign(E,_),E})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Uj(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>qj(v))}else{const m=Vj(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>Oj(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f9(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ow(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>L9(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function m9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Rs(u);Array.isArray(v)&&(v=v.map(_=>Ow(_))),g(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],Ow(kn(h)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>U9(_))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],V9(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function p9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Rs(u);Array.isArray(_)&&(_=_.map(E=>E)),g(e,["contents"],_)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],kn(h));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>O9(E))),g(e,["tools"],_)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function g9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],f2(n,s));const a=f(e,["config"]);return a!=null&&m9(a,t),t}function y9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],f2(n,s));const a=f(e,["config"]);return a!=null&&p9(a,t),t}function x9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function v9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function b9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function _9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function w9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function E9(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function T9(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function N9(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function S9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function A9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function C9(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function I9(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function R9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function k9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function M9(n){const e={},t=f(n,["config"]);return t!=null&&R9(t,e),e}function D9(n){const e={},t=f(n,["config"]);return t!=null&&k9(t,e),e}function P9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function j9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function L9(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],w9(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],E9(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],f9(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function V9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],T9(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function U9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],C9(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],I9(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function O9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>N9(E))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function q9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function z9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function F9(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],gi(n,s));const a=f(e,["config"]);return a!=null&&q9(a,t),t}function G9(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],gi(n,s));const a=f(e,["config"]);return a!=null&&z9(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H9 extends pi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new fo(di.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=y9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=g9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=A9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=S9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=v9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=_9(v),E=new Mw;return Object.assign(E,_),E})}else{const m=x9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=b9(v),E=new Mw;return Object.assign(E,_),E})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=G9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=F9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=D9(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=j9(v),E=new Dw;return Object.assign(E,_),E})}else{const m=M9(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=P9(v),E=new Dw;return Object.assign(E,_),E})}}}function qw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(n){return this instanceof It?(this.v=n,this):new It(n)}function ml(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(S){return function(D){return Promise.resolve(D).then(S,_)}}function h(S,D){s[S]&&(a[S]=function(G){return new Promise(function(F,ee){l.push([S,G,F,ee])>1||p(S,G)})},D&&(a[S]=D(a[S])))}function p(S,D){try{m(s[S](D))}catch(G){E(l[0][3],G)}}function m(S){S.value instanceof It?Promise.resolve(S.value.v).then(v,_):E(l[0][2],S)}function v(S){p("next",S)}function _(S){p("throw",S)}function E(S,D){S(D),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Zc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qw=="function"?qw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(m){l({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B9(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:S2(t)}function S2(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $9(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!S2(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class K9{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Y9(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Y9{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),$9(l)}async sendMessage(e){var t;await this.sendPromise;const s=kn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,m=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(_))!==null&&h!==void 0?h:[]);const S=m?[m]:[];this.recordHistory(s,S,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=kn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?zw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,a;return ml(this,arguments,function*(){var u,h,p,m;const v=[];try{for(var _=!0,E=Zc(e),S;S=yield It(E.next()),u=S.done,!u;_=!0){m=S.value,_=!1;const D=m;if(B9(D)){const G=(a=(s=D.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;G!==void 0&&v.push(G)}yield yield It(D)}}catch(D){h={error:D}}finally{try{!_&&!u&&(p=E.return)&&(yield It(p.call(E)))}finally{if(h)throw h.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...zw(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q9(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function J9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function X9(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],v2(t)),e}function W9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Z9(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],v2(t)),e}function e8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function t8(n){const e={},t=f(n,["config"]);return t!=null&&e8(t,e),e}function n8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s8 extends pi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new fo(di.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=t8(e);return l=ve("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=n8(p),v=new oj;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Q9(e);return l=ve("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=J9(p),v=new lj;return Object.assign(v,m),v})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z9(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=X9(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=W9(p),v=new cj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hh(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function r8(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>b8(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function i8(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function a8(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function o8(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function l8(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const E=f(n,["responseLogprobs"]);E!=null&&g(e,["responseLogprobs"],E);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const D=f(n,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const G=f(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const ne=f(n,["speechConfig"]);ne!=null&&g(e,["speechConfig"],A2(ne));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const ae=f(n,["temperature"]);ae!=null&&g(e,["temperature"],ae);const Z=f(n,["thinkingConfig"]);Z!=null&&g(e,["thinkingConfig"],Z);const z=f(n,["topK"]);z!=null&&g(e,["topK"],z);const I=f(n,["topP"]);if(I!=null&&g(e,["topP"],I),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function c8(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function u8(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function d8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],ay(_));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=f(n,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],r8(kn(D)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let z=Ll(G);Array.isArray(z)&&(z=z.map(I=>w8(jl(I)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],_8(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const Z=f(n,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),t}function h8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],l8(s));const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],A2(ay(_)));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=f(n,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],kn(D));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let z=Ll(G);Array.isArray(z)&&(z=z.map(I=>E8(jl(I)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],F);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const Z=f(n,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),t}function f8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],dt(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],d8(a,t)),t}function m8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],dt(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],h8(a,t)),t}function p8(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function g8(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function y8(n){const e={},t=f(n,["media"]);if(t!=null){let m=m2(t);Array.isArray(m)&&(m=m.map(v=>hh(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],hh(g2(s)));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],hh(p2(l)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function x8(n){const e={},t=f(n,["media"]);if(t!=null){let m=m2(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],g2(s));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],p2(l));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function v8(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=f(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],T8(u));const h=f(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function b8(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],i8(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],a8(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],hh(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function _8(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function A2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function w8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],c8(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],u8(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function E8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>o8(E))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function T8(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=f(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=f(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=f(n,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(D=>D)),g(e,["promptTokensDetails"],S)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(D=>D)),g(e,["cacheTokensDetails"],S)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(D=>D)),g(e,["responseTokensDetails"],S)}const _=f(n,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(D=>D)),g(e,["toolUsePromptTokensDetails"],S)}const E=f(n,["trafficType"]);return E!=null&&g(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N8(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function S8(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],A8(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["safetyRatings"],E)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function A8(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function C8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let l=Rs(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function I8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function R8(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],k8(s)),e}function k8(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Nf(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>qL(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function M8(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function D8(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function P8(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],kn(s));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>M2(h))),g(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],NL(l)),t}function j8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let u=Rs(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&D8(l),t}function L8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let u=Rs(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&P8(l,t),t}function V8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=f(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function U8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function O8(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],dt(n,s)),t}function q8(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],dt(n,s)),t}function z8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function F8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function G8(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const E=f(n,["includeRaiReason"]);e!==void 0&&E!=null&&g(e,["parameters","includeRaiReason"],E);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const D=f(n,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const ne=f(n,["editMode"]);e!==void 0&&ne!=null&&g(e,["parameters","editMode"],ne);const K=f(n,["baseSteps"]);return e!==void 0&&K!=null&&g(e,["parameters","editConfig","baseSteps"],K),t}function H8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>$L(p))),g(t,["instances[0]","referenceImages"],h)}const u=f(e,["config"]);return u!=null&&G8(u,t),t}function B8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function $8(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function K8(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function Y8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let h=sy(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&$8(l,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],dt(n,u)),t}function Q8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let u=sy(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&K8(l,t),t}function J8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function X8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>R8(u))),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function W8(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function Z8(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eL(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tL(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function sL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Nf(kn(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&g(s,["logprobs"],E);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const D=f(e,["frequencyPenalty"]);D!=null&&g(s,["frequencyPenalty"],D);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],ry(ee));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(s,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let U=K;Array.isArray(U)&&(U=U.map(M=>KL(M))),g(t,["safetySettings"],U)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let U=Ll(ae);Array.isArray(U)&&(U=U.map(M=>eV(jl(M)))),g(t,["tools"],U)}const Z=f(e,["toolConfig"]);if(t!==void 0&&Z!=null&&g(t,["toolConfig"],ZL(Z)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);t!==void 0&&z!=null&&g(t,["cachedContent"],gi(n,z));const I=f(e,["responseModalities"]);I!=null&&g(s,["responseModalities"],I);const A=f(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],iy(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],RL(j)),s}function rL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],kn(a));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&g(s,["logprobs"],E);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const D=f(e,["frequencyPenalty"]);D!=null&&g(s,["frequencyPenalty"],D);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],ry(ee));const ne=f(e,["responseJsonSchema"]);ne!=null&&g(s,["responseJsonSchema"],ne);const K=f(e,["routingConfig"]);K!=null&&g(s,["routingConfig"],K);const ae=f(e,["modelSelectionConfig"]);ae!=null&&g(s,["modelConfig"],ae);const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let X=Z;Array.isArray(X)&&(X=X.map(fe=>fe)),g(t,["safetySettings"],X)}const z=f(e,["tools"]);if(t!==void 0&&z!=null){let X=Ll(z);Array.isArray(X)&&(X=X.map(fe=>M2(jl(fe)))),g(t,["tools"],X)}const I=f(e,["toolConfig"]);t!==void 0&&I!=null&&g(t,["toolConfig"],I);const A=f(e,["labels"]);t!==void 0&&A!=null&&g(t,["labels"],A);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],gi(n,R));const P=f(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const j=f(e,["mediaResolution"]);j!=null&&g(s,["mediaResolution"],j);const U=f(e,["speechConfig"]);U!=null&&g(s,["speechConfig"],k2(iy(U)));const M=f(e,["audioTimestamp"]);M!=null&&g(s,["audioTimestamp"],M);const $e=f(e,["thinkingConfig"]);$e!=null&&g(s,["thinkingConfig"],$e);const Ke=f(e,["imageConfig"]);return Ke!=null&&g(s,["imageConfig"],kL(Ke)),s}function Fw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let u=Rs(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],sL(n,l,t)),t}function Gw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["contents"]);if(a!=null){let u=Rs(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],rL(n,l,t)),t}function Hw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>S8(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function Bw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const a=f(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=f(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function iL(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const E=f(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=f(n,["imageSize"]);if(e!==void 0&&S!=null&&g(e,["parameters","sampleImageSize"],S),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function aL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const E=f(n,["includeRaiReason"]);e!==void 0&&E!=null&&g(e,["parameters","includeRaiReason"],E);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const D=f(n,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const ne=f(n,["imageSize"]);e!==void 0&&ne!=null&&g(e,["parameters","sampleImageSize"],ne);const K=f(n,["enhancePrompt"]);return e!==void 0&&K!=null&&g(e,["parameters","enhancePrompt"],K),t}function oL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&iL(l,t),t}function lL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&aL(l,t),t}function cL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>_L(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],I2(a)),e}function uL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Sf(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],R2(a)),e}function dL(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Af(v));const _=f(n,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>fV(S))),g(e,["instances[0]","referenceImages"],E)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function hL(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const E=f(n,["negativePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","negativePrompt"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const D=f(n,["generateAudio"]);e!==void 0&&D!=null&&g(e,["parameters","generateAudio"],D);const G=f(n,["lastFrame"]);e!==void 0&&G!=null&&g(e,["instances[0]","lastFrame"],Zs(G));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let K=F;Array.isArray(K)&&(K=K.map(ae=>mV(ae))),g(e,["instances[0]","referenceImages"],K)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],hV(ee));const ne=f(n,["compressionQuality"]);return e!==void 0&&ne!=null&&g(e,["parameters","compressionQuality"],ne),t}function fL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],yL(u)),e}function mL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],xL(u)),e}function pL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Af(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],D2(u));const h=f(e,["source"]);h!=null&&vL(h,t);const p=f(e,["config"]);return p!=null&&dL(p,t),t}function gL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Zs(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],P2(u));const h=f(e,["source"]);h!=null&&bL(h,t);const p=f(e,["config"]);return p!=null&&hL(p,t),t}function yL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>EL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function xL(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>TL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function vL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Af(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],D2(l)),t}function bL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Zs(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],P2(l)),t}function _L(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],ML(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],I2(a)),e}function Sf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],C2(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);a!=null&&g(e,["safetyAttributes"],R2(a));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function wL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],C2(t));const s=f(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function EL(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],uV(t)),e}function TL(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],dV(t)),e}function NL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const E=f(n,["responseLogprobs"]);E!=null&&g(e,["responseLogprobs"],E);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const D=f(n,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const G=f(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const ne=f(n,["speechConfig"]);ne!=null&&g(e,["speechConfig"],k2(ne));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const ae=f(n,["temperature"]);ae!=null&&g(e,["temperature"],ae);const Z=f(n,["thinkingConfig"]);Z!=null&&g(e,["thinkingConfig"],Z);const z=f(n,["topK"]);z!=null&&g(e,["topK"],z);const I=f(n,["topP"]);if(I!=null&&g(e,["topP"],I),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function SL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],dt(n,s)),t}function AL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],dt(n,s)),t}function CL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function IL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function RL(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kL(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=f(n,["outputMimeType"]);a!=null&&g(e,["imageOutputOptions","mimeType"],a);const l=f(n,["outputCompressionQuality"]);return l!=null&&g(e,["imageOutputOptions","compressionQuality"],l),e}function ML(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],va(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function C2(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],va(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Af(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],va(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Zs(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],va(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function DL(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],b2(n,h)),s}function PL(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],b2(n,h)),s}function jL(n,e){const t={},s=f(e,["config"]);return s!=null&&DL(n,s,t),t}function LL(n,e){const t={},s=f(e,["config"]);return s!=null&&PL(n,s,t),t}function VL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=_2(a);Array.isArray(l)&&(l=l.map(u=>Ug(u))),g(e,["models"],l)}return e}function UL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=_2(a);Array.isArray(l)&&(l=l.map(u=>Og(u))),g(e,["models"],l)}return e}function OL(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=f(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function Ug(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],tV(u));const h=f(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=f(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const E=f(n,["topP"]);E!=null&&g(e,["topP"],E);const S=f(n,["topK"]);S!=null&&g(e,["topK"],S);const D=f(n,["thinking"]);return D!=null&&g(e,["thinking"],D),e}function Og(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>W8(E))),g(e,["endpoints"],_)}const h=f(n,["labels"]);h!=null&&g(e,["labels"],h);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],nV(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),g(e,["checkpoints"],_)}return e}function qL(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Z8(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],eL(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],N8(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function zL(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],Zs(t)),e}function FL(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=f(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const E=f(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const S=f(n,["labels"]);return e!==void 0&&S!=null&&g(e,["labels"],S),t}function GL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["source"]);a!=null&&BL(a,t);const l=f(e,["config"]);return l!=null&&FL(l,t),t}function HL(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Sf(a))),g(e,["generatedImages"],s)}return e}function BL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Zs(a));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>zL(h))),g(e,["instances[0]","productImages"],u)}return t}function $L(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Zs(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=f(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],OL(l));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],M8(u));const h=f(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function I2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function R2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function KL(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function YL(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],Zs(t)),e}function QL(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function JL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["source"]);a!=null&&WL(a,t);const l=f(e,["config"]);return l!=null&&QL(l,t),t}function XL(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>wL(a))),g(e,["generatedMasks"],s)}return e}function WL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Zs(a));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],YL(l)),t}function k2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ZL(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],tL(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function eV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],CL(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],IL(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function M2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>nL(E))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function tV(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function nV(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function sV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function rV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function iV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],dt(n,s));const a=f(e,["config"]);return a!=null&&sV(a,t),t}function aV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["config"]);return a!=null&&rV(a,t),t}function oV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const E=f(n,["numberOfImages"]);e!==void 0&&E!=null&&g(e,["parameters","sampleCount"],E);const S=f(n,["mode"]);return e!==void 0&&S!=null&&g(e,["parameters","mode"],S),t}function lV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],dt(n,s));const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],Zs(a));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&oV(u,t),t}function cV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function uV(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],va(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function dV(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],va(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function hV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],Zs(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function fV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Af(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function mV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Zs(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function D2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],va(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function P2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],va(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pV="Content-Type",gV="X-Server-Timeout",yV="User-Agent",qg="x-goog-api-client",xV="1.30.0",vV=`google-genai-sdk/${xV}`,bV="v1beta1",_V="v1beta",$w=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wV{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:bV,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:_V,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&EV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Kw(a),new jg(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Kw(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var t;return ml(this,arguments,function*(){const a=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:p}=yield It(a.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const E=JSON.parse(JSON.stringify(_.error)),S=E.status,D=E.code,G=`got status: ${S}. ${JSON.stringify(_)}`;if(D>=400&&D<600)throw new Tf({message:G,status:D})}}catch(_){if(_.name==="ApiError")throw _}u+=m;let v=u.match($w);for(;v;){const _=v[1];try{const E=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield It(new jg(E)),u=u.slice(v[0].length),v=u.match($w)}catch(E){throw new Error(`exception parsing stream chunk ${_}. ${E}`)}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=vV+" "+this.clientOptions.userAgentExtra;return e[yV]=t,e[qg]=t,e[pV]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(gV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},m=this.getFileName(e),v=ve("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&s.customMetadata&&(_.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(_.chunkingConfig=s.chunkingConfig);const E=await this.fetchUploadUrl(m,h,p,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Kw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new Tf({message:a,status:t}):new Error(a)}}function EV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TV="mcp_used/unknown";let NV=!1;function j2(n){for(const e of n)if(SV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return NV}function L2(n){var e;const t=(e=n[qg])!==null&&e!==void 0?e:"";n[qg]=(t+` ${TV}`).trimStart()}function SV(n){return n!==null&&typeof n=="object"&&n instanceof oy}function AV(n,e=100){return ml(this,arguments,function*(){let s,a=0;for(;a<e;){const l=yield It(n.listTools({cursor:s}));for(const u of l.tools)yield yield It(u),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class oy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new oy(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var h=!0,p=(t=void 0,Zc(AV(v))),m;m=await p.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const _=a;u.push(_);const E=_.name;if(l[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);l[E]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),vj(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CV(n,e,t){const s=new dj;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class IV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=MV(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(K=>{m=K}),_=e.callbacks,E=function(){m({})},S=this.apiClient,D={onopen:E,onmessage:K=>{CV(S,_.onmessage,K)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(K){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(K){}},G=this.webSocketFactory.create(p,kV(u),D);G.connect(),await v;const ne={setup:{model:dt(this.apiClient,e.model)}};return G.send(JSON.stringify(ne)),new RV(G,this.apiClient)}}class RV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=g8(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=p8(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(al.PLAY)}pause(){this.sendPlaybackControl(al.PAUSE)}stop(){this.sendPlaybackControl(al.STOP)}resetContext(){this.sendPlaybackControl(al.RESET_CONTEXT)}close(){this.conn.close()}}function kV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function MV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PV(n,e,t){const s=new uj;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=v8(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class jV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new IV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&j2(e.config.tools)&&L2(_);const E=OV(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v);else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",j="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",j="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${j}=${R}`}let S=()=>{};const D=new Promise(R=>{S=R}),G=e.callbacks,F=function(){var R;(R=G==null?void 0:G.onopen)===null||R===void 0||R.call(G),S({})},ee=this.apiClient,ne={onopen:F,onmessage:R=>{PV(ee,G.onmessage,R)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=G==null?void 0:G.onclose)!==null&&s!==void 0?s:function(R){}},K=this.webSocketFactory.create(v,UV(E),ne);K.connect(),await D;let ae=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();ae=`projects/${R}/locations/${P}/`+ae}let Z={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zh.AUDIO]}:e.config.responseModalities=[zh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],I=[];for(const R of z)if(this.isCallableTool(R)){const P=R;I.push(await P.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const A={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=m8(this.apiClient,A):Z=f8(this.apiClient,A),delete Z.config,K.send(JSON.stringify(Z)),new VV(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const LV={turnComplete:!0};class VV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Rs(t.turns),e.isVertexAI()||(s=s.map(a=>Nf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(DV)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},LV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:x8(e)}:t={realtimeInput:y8(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function UV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function OV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yw=10;function Qw(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(pl(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function pl(n){return"callTool"in n&&typeof n.callTool=="function"}function qV(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>pl(a)))!==null&&s!==void 0?s:!1}function Jw(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(pl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function Xw(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zV extends pi{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!qV(t)||Qw(t.config))return await this.generateContentInternal(p);const m=Jw(t);if(m.length>0){const G=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let v,_;const E=Rs(p.contents),S=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:Yw;let D=0;for(;D<S&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const G=v.candidates[0].content,F=[];for(const ee of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(pl(ee)){const K=await ee.callTool(v.functionCalls);F.push(...K)}D++,_={role:"user",parts:F},p.contents=Rs(p.contents),p.contents.push(G),p.contents.push(_),Xw(p.config)&&(E.push(G),E.push(_))}return Xw(p.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),Qw(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=Jw(t);if(p.length>0){const _=p.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new fo(di.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>pl(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&j2(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),L2(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(pl(u)){const h=u,p=await h.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Yw;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){var E,S;return ml(this,arguments,function*(){for(var D,G,F,ee;h<l;){u&&(h++,u=!1);const Z=yield It(m.processParamsMaybeAddMcpUsage(_)),z=yield It(m.generateContentStreamInternal(Z)),I=[],A=[];try{for(var ne=!0,K=(G=void 0,Zc(z)),ae;ae=yield It(K.next()),D=ae.done,!D;ne=!0){ee=ae.value,ne=!1;const R=ee;if(yield yield It(R),R.candidates&&(!((E=R.candidates[0])===null||E===void 0)&&E.content)){A.push(R.candidates[0].content);for(const P of(S=R.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const j=yield It(v.get(P.functionCall.name).callTool([P.functionCall]));I.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){G={error:R}}finally{try{!ne&&!D&&(F=K.return)&&(yield It(F.call(K)))}finally{if(G)throw G.error}}if(I.length>0){u=!0;const R=new Vc;R.candidates=[{content:{role:"user",parts:I}}],yield yield It(R);const P=[];P.push(...A),P.push({role:"user",parts:I});const j=Rs(_.contents).concat(P);_.contents=j}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Gw(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=Bw(v),E=new Vc;return Object.assign(E,_),E})}else{const m=Fw(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=Hw(v),E=new Vc;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Gw(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return ml(this,arguments,function*(){var E,S,D,G;try{for(var F=!0,ee=Zc(_),ne;ne=yield It(ee.next()),E=ne.done,!E;F=!0){G=ne.value,F=!1;const K=G,ae=Bw(yield It(K.json()));ae.sdkHttpResponse={headers:K.headers};const Z=new Vc;Object.assign(Z,ae),yield yield It(Z)}}catch(K){S={error:K}}finally{try{!F&&!E&&(D=ee.return)&&(yield It(D.call(ee)))}finally{if(S)throw S.error}}})})}else{const m=Fw(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return ml(this,arguments,function*(){var E,S,D,G;try{for(var F=!0,ee=Zc(_),ne;ne=yield It(ee.next()),E=ne.done,!E;F=!0){G=ne.value,F=!1;const K=G,ae=Hw(yield It(K.json()));ae.sdkHttpResponse={headers:K.headers};const Z=new Vc;Object.assign(Z,ae),yield yield It(Z)}}catch(K){S={error:K}}finally{try{!F&&!E&&(D=ee.return)&&(yield It(D.call(ee)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Q8(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=X8(v),E=new Sw;return Object.assign(E,_),E})}else{const m=Y8(this.apiClient,e);return h=ve("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=J8(v),E=new Sw;return Object.assign(E,_),E})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=lL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=uL(v),E=new Aw;return Object.assign(E,_),E})}else{const m=oL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=cL(v),E=new Aw;return Object.assign(E,_),E})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=H8(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=B8(p),v=new ZP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=lV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=cV(p),v=new ej;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=GL(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=HL(p),v=new tj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=JL(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=XL(p),v=new nj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=AL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=SL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=LL(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=UL(v),E=new Cw;return Object.assign(E,_),E})}else{const m=jL(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=VL(v),E=new Cw;return Object.assign(E,_),E})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=aV(this.apiClient,e);return h=ve("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=iV(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=q8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=F8(v),E=new Iw;return Object.assign(E,_),E})}else{const m=O8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=z8(v),E=new Iw;return Object.assign(E,_),E})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=L8(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=U8(v),E=new Rw;return Object.assign(E,_),E})}else{const m=j8(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=V8(v),E=new Rw;return Object.assign(E,_),E})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=C8(this.apiClient,e);return l=ve("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=I8(p),v=new sj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=gL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=mL(v),E=new Fh;return Object.assign(E,_),E})}else{const m=pL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const _=fL(v),E=new Fh;return Object.assign(E,_),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV extends pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=KP(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=$P(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=OP(e);return l=ve("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function HV(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>ZV(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function BV(n,e,t){const s={},a=f(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],WV(n,h));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function $V(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],BV(n,s,t)),t}function KV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function YV(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function JV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function XV(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],ay(_));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const D=f(n,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],HV(kn(D)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let z=Ll(G);Array.isArray(z)&&(z=z.map(I=>tU(jl(I)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],eU(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const Z=f(n,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),t}function WV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],dt(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],XV(a,t)),t}function ZV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],KV(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],YV(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],GV(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function eU(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],QV(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],JV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function sU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=nU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class rU extends pi{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=$V(this.apiClient,e);l=ve("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=sU(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iU(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function aU(n){const e={},t=f(n,["config"]);return t!=null&&iU(t,e),e}function oU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function lU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&oU(s,e),e}function cU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function uU(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=f(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function dU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],fU(u)),e}function hU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=f(n,["config"]);return a!=null&&uU(a,e),e}function fU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function mU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function pU(n){const e={},t=f(n,["config"]);return t!=null&&mU(t,e),e}function gU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function yU(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function xU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&yU(s,e),e}function vU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function _U(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&bU(s,e),e}function wU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function EU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function TU(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&EU(s,e),e}function NU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SU extends pi{constructor(e){super(),this.apiClient=e,this.list=async t=>new fo(di.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=wU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_U(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=TU(e);return l=ve("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=NU(p),v=new rj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AU extends pi{constructor(e,t=new SU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new fo(di.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lU(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=gU(p),v=new ij;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xU(e);return l=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=vU(p),v=new aj;return Object.assign(v,m),v})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hU(e);return l=ve("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=dU(p),v=new ty;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function IU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function RU(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function kU(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec"],Ww(S))}else if(a==="PREFERENCE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec"],Ww(S))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(h==="PREFERENCE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(p==="PREFERENCE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(m==="PREFERENCE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(v==="PREFERENCE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const E=f(n,["beta"]);return e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function MU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&GU(l);const u=f(n,["config"]);return u!=null&&RU(u,t),t}function DU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&HU(l,t,e);const u=f(n,["config"]);return u!=null&&kU(u,t,e),t}function PU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function jU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function LU(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function VU(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function UU(n,e){const t={},s=f(n,["config"]);return s!=null&&LU(s,t),t}function OU(n,e){const t={},s=f(n,["config"]);return s!=null&&VU(s,t),t}function qU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>V2(h))),g(t,["tuningJobs"],u)}return t}function zU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>zg(h))),g(t,["tuningJobs"],u)}return t}function FU(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const a=f(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function GU(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function HU(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function V2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],x2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const _=f(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const E=f(n,["_self"]);return E!=null&&g(t,["tunedModel"],FU(E)),t}function zg(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],x2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const _=f(n,["description"]);_!=null&&g(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const S=f(n,["tunedModel"]);S!=null&&g(t,["tunedModel"],S);const D=f(n,["preTunedModel"]);D!=null&&g(t,["preTunedModel"],D);const G=f(n,["supervisedTuningSpec"]);G!=null&&g(t,["supervisedTuningSpec"],G);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&g(t,["preferenceOptimizationSpec"],F);const ee=f(n,["tuningDataStats"]);ee!=null&&g(t,["tuningDataStats"],ee);const ne=f(n,["encryptionSpec"]);ne!=null&&g(t,["encryptionSpec"],ne);const K=f(n,["partnerModelTuningSpec"]);K!=null&&g(t,["partnerModelTuningSpec"],K);const ae=f(n,["customBaseModel"]);ae!=null&&g(t,["customBaseModel"],ae);const Z=f(n,["experiment"]);Z!=null&&g(t,["experiment"],Z);const z=f(n,["labels"]);z!=null&&g(t,["labels"],z);const I=f(n,["outputUri"]);I!=null&&g(t,["outputUri"],I);const A=f(n,["pipelineJob"]);A!=null&&g(t,["pipelineJob"],A);const R=f(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const P=f(n,["tunedModelDisplayName"]);P!=null&&g(t,["tunedModelDisplayName"],P);const j=f(n,["veoTuningSpec"]);return j!=null&&g(t,["veoTuningSpec"],j),t}function BU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const h=f(n,["error"]);return h!=null&&g(t,["error"],h),t}function Ww(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=f(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $U extends pi{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new fo(di.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Pg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=jU(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>zg(v))}else{const m=PU(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>V2(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=OU(e);return h=ve("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=zU(v),E=new kw;return Object.assign(E,_),E})}else{const m=UU(e);return h=ve("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=qU(v),E=new kw;return Object.assign(E,_),E})}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=IU(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=CU(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=DU(e,e);return l=ve("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>zg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MU(e);return l=ve("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>BU(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YU=1024*1024*8,QU=3,JU=1e3,XU=2,Hh="x-goog-upload-status";async function WU(n,e,t){var s;const a=await U2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Hh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function ZU(n,e,t){var s;const a=await U2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Hh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=h2(l),h=new ny;return Object.assign(h,u),h}async function U2(n,e,t){var s,a;let l=0,u=0,h=new jg(new Response),p="upload";for(l=n.size;u<l;){const m=Math.min(YU,l-u),v=n.slice(u,u+m);u+m>=l&&(p+=", finalize");let _=0,E=JU;for(;_<QU&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Hh]));)_++,await t7(E),E=E*XU;if(u+=m,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Hh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function e7(n){return{size:n.size,type:n.type}}function t7(n){return new Promise(e=>setTimeout(e,n))}class n7{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WU(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await e7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s7{create(e,t,s){return new r7(e,t,s)}}class r7{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zw="x-goog-api-key";class i7{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Zw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Zw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a7="gl-node/";class o7{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=VP(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new i7(this.apiKey);this.apiClient=new wV({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:a7+"web",uploader:new n7,downloader:new KU}),this.models=new zV(this.apiClient),this.live=new jV(this.apiClient,a,new s7),this.batches=new h9(this.apiClient),this.chats=new K9(this.models,this.apiClient),this.caches=new H9(this.apiClient),this.files=new s8(this.apiClient),this.operations=new FV(this.apiClient),this.authTokens=new rU(this.apiClient),this.tunings=new $U(this.apiClient),this.fileSearchStores=new AU(this.apiClient)}}var l7={};const O2=new o7({apiKey:l7.API_KEY}),eE={5:`Level: A1-A1+. 
  Grammar: Verb to be, have/has, Present Simple (description/routine), Plurals, Possessive adjectives, There is/are, Prepositions of place, Imperatives.
  Skills: Short texts (40-70 words), identify simple ideas (name, place, time), understand short instructions.`,6:`Level: A1+-A2.
  Grammar: Present Simple (Strong), Past Simple (Regular only), Countable/Uncountable, Quantifiers (some, any), Can/Can't, Comparative adjectives, Adverbs of frequency.
  Skills: Short/Medium texts, simple past events, Wh-questions, describing people/places.`,7:`Level: A2.
  Grammar: Past Simple (Regular/Irregular), Future (will/going to), Present Continuous, Comparative & Superlative, Object pronouns, Adverbs (quickly...), Simple connectors.
  Skills: Texts 120-150 words, sequence of events, detailed descriptions, simple opinions.`,8:`Level: A2-A2+ (Start of B1).
  Grammar: Present Perfect, Past Continuous, Zero & First Conditionals, Modals (must, should), Passive (simple), Relative clauses.
  Skills: Texts 150-200 words, specific info extraction, cause/effect, main idea.`,9:`Level: A2+-B1.
  Grammar: Present Perfect (Advanced), Past Perfect, Future forms, Passive (Present/Past), Reported Speech (say/tell), Conditionals (0+1), Too/Enough, Gerunds/Infinitives.
  Skills: Medium texts analysis, multiple opinions, evidence extraction, main idea + details.`,10:`Level: B1.
  Grammar: Passive (Advanced), Reported Speech (Advanced), Modals of obligation/deduction, Second Conditional, Relative Pronouns.
  Skills: Short academic texts, analyzing scientific/social articles, summarizing, linking paragraphs.`,11:`Level: B1+-B2.
  Grammar: Conditionals (0-3), Mixed Conditionals (Basic), Passive (All tenses), Modals (Advice, Obligation, Prediction), Reduced Relative Clauses, Perfect tenses.
  Skills: Long text analysis, arguments & evidence, comparing viewpoints, context clues.`,12:`Level: B2 (Tawjihi Standard).
  Grammar: Advanced Passive, Advanced Conditionals (Mixed), Reported Speech (Full), Modals of speculation/deduction, Reduced clauses, Nominalization, Cohesive devices.
  Skills: Complex academic texts, inference, interpretation, primary vs secondary ideas, advanced paraphrasing, logical arguments.`,General:`Level: B2+ (University Level).
  Grammar: Advanced Structure, Complex Sentences, Academic Vocabulary, Nuanced Grammar Points.
  Skills: Critical Reading, Logical Reasoning, Argument Analysis, Advanced Comprehension.`},c7=async n=>{try{const e="gemini-2.5-flash",t=eE[n]||eE.General,a=`Generate a comprehensive English Aptitude Assessment for Grade ${n}.
    Total 15 Multiple Choice Questions.
    
    Strictly follow this curriculum:
    ${t}
    
    Distribution:
    - 5 Questions: Grammar (Focus on the specific tenses/rules listed above). Tag as 'Grammar'.
    - 5 Questions: Vocabulary (Contextual usage appropriate for level). Tag as 'Vocabulary'.
    - 3 Questions: Reading Comprehension (Short passage approx 3-5 sentences). Tag as 'Reading'.
    - 2 Questions: Writing Mechanics (Punctuation, Structure, Linking words). Tag as 'Writing'.
    
    Ensure questions are varied and challenging for the level.
    The output must be JSON.
    Language: English (Questions and Options). Explanation should be in Arabic for better student understanding.
    `,u=(await O2.models.generateContent({model:e,contents:a,config:{responseMimeType:"application/json",responseSchema:{type:Nt.ARRAY,items:{type:Nt.OBJECT,properties:{id:{type:Nt.INTEGER},question:{type:Nt.STRING},options:{type:Nt.ARRAY,items:{type:Nt.STRING}},correctAnswer:{type:Nt.INTEGER},explanation:{type:Nt.STRING},skill:{type:Nt.STRING,enum:["Grammar","Vocabulary","Reading","Writing"]},passageContent:{type:Nt.STRING}},required:["id","question","options","correctAnswer","skill"]}}}})).text;return u?JSON.parse(u):[]}catch(e){throw console.error("Error generating aptitude test:",e),new Error("Failed to generate assessment.")}},u7=async(n,e)=>{try{const t="gemini-2.5-flash",s=`
    Act as a senior academic advisor. Analyze the following student performance data to provide a comprehensive, personalized report.
    
    Data Source 1: Aptitude Test Result
    ${JSON.stringify(n)}
    
    Data Source 2: Regular Quiz History (Last 5-10 quizzes)
    ${JSON.stringify(e.slice(0,10))}
    
    Task:
    1. Analyze the Aptitude Test strengths and weaknesses.
    2. Cross-reference with Regular Quiz History. Look for patterns (e.g., "Aptitude showed weak Grammar, and student failed 3 Grammar quizzes" OR "Aptitude showed weak Vocabulary but student is improving in recent Vocabulary quizzes").
    3. Provide specific, actionable advice.
    
    Output Format (JSON):
    - generalAnalysis: A motivating paragraph summarizing their level.
    - strengths: List of 3-4 key strengths.
    - weaknesses: List of 3-4 specific areas to improve (be precise).
    - improvementPlan: List of 4 actionable steps.
    
    Language: Arabic (Formal but encouraging).
    `,l=(await O2.models.generateContent({model:t,contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Nt.OBJECT,properties:{generalAnalysis:{type:Nt.STRING},strengths:{type:Nt.ARRAY,items:{type:Nt.STRING}},weaknesses:{type:Nt.ARRAY,items:{type:Nt.STRING}},improvementPlan:{type:Nt.ARRAY,items:{type:Nt.STRING}}},required:["generalAnalysis","strengths","weaknesses","improvementPlan"]}}})).text;if(!l)throw new Error("No analysis generated");const u=JSON.parse(l);return{generatedAt:new Date,...u}}catch(t){throw console.error("Error generating student report:",t),new Error("Failed to generate student report.")}},Kp=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:Gg},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Zn},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ca},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:Wa},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:$h},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Tl}],d7=[{id:"first_step",title:" ",desc:"   ",icon:Gg,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:n=>n.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%  ",icon:sa,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:n=>n.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5 ",icon:Zn,color:"text-blue-500",bg:"bg-blue-500/10",condition:n=>n.quizzesCompleted>=5},{id:"expert",title:" ",desc:" 10 ",icon:ol,color:"text-purple-500",bg:"bg-purple-500/10",condition:n=>n.quizzesCompleted>=10},{id:"high_level",title:" ",desc:"  5",icon:$h,color:"text-orange-500",bg:"bg-orange-500/10",condition:n=>n.level>=5},{id:"master",title:" ",desc:"  10",icon:Tl,color:"text-red-500",bg:"bg-red-500/10",condition:n=>n.level>=10}],h7=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],Yp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],tE=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=H.useState(!1),h=H.useRef(null);H.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":l?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-600"}`,children:p?p.label:s}),o.jsx(Za,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-blue-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(oo,{className:"w-3 h-3"})]},v)})})]})},f7=({onNavigate:n})=>{const{user:e,updateUserProfile:t}=ks(),[s,a]=H.useState(!1),[l,u]=H.useState(null),[h,p]=H.useState(!1),[m,v]=H.useState(!1),[_,E]=H.useState((e==null?void 0:e.avatar)||""),[S,D]=H.useState((e==null?void 0:e.profileBackground)||Yp[0].url),[G,F]=H.useState([]),[ee,ne]=H.useState(!0),[K,ae]=H.useState(0),[Z,z]=H.useState(1),[I,A]=H.useState(Kp[0]),[R,P]=H.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1}),[j,U]=H.useState([]),[M,$e]=H.useState(""),[Ke,X]=H.useState(!1),[fe,Te]=H.useState("50"),[Ve,Le]=H.useState(null),[O,J]=H.useState(!1),[V,re]=H.useState(""),[he,Ae]=H.useState(!1),[Ie,Ye]=H.useState([]),[je,gn]=H.useState(null),[ze,ht]=H.useState(!1),[at,Ut]=H.useState(!1),[lt,Ot]=H.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});H.useEffect(()=>{if(e){if(Ot(ie=>({...ie,firstName:e.firstName||ie.firstName,lastName:e.lastName||ie.lastName,gender:e.gender||ie.gender,grade:e.grade||ie.grade,school:e.school||ie.school})),e.avatar&&E(e.avatar),e.profileBackground&&D(e.profileBackground),e.aptitudeResults){const ie=[...e.aptitudeResults].sort((xe,Fe)=>new Date(Fe.date).getTime()-new Date(xe.date).getTime());Ye(ie)}e.performanceAnalysis&&gn(e.performanceAnalysis)}},[e]),H.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){ne(!1),X(!0);try{const xe=Ln(ln(pt,"users"),$s("role","==","student")),Mt=(await Xn(xe)).docs.map(cn=>({id:cn.id,...cn.data()}));U(Mt)}catch(xe){console.error("Error fetching students:",xe)}finally{X(!1)}return}try{const xe=Ln(ln(pt,"quiz_results"),$s("userId","==",e.uid)),Fe=await Xn(xe),Mt=[];let cn=0,Ds=!1;Fe.forEach(qn=>{const yn=qn.data();Mt.push({id:qn.id,...qn.data()});let Ps=10+yn.percentage*2;yn.passed&&(Ps+=50),yn.percentage===100&&(Ps+=100,Ds=!0),cn+=Math.round(Ps)}),Mt.sort((qn,yn)=>{var ir,fs;const Ps=((ir=qn.createdAt)==null?void 0:ir.seconds)||0,_a=((fs=yn.createdAt)==null?void 0:fs.seconds)||0;return Ps-_a}),F(Mt);let rr=cn;try{const qn=Xs(pt,"users",e.uid),yn=await FN(qn);yn.exists()&&yn.data().totalXP!==void 0?rr=yn.data().totalXP:e.totalXP!==void 0&&(rr=e.totalXP)}catch{e.totalXP!==void 0&&(rr=e.totalXP)}ae(rr);const On=Math.floor(rr/500)+1;z(On);const Pr=[...Kp].reverse().find(qn=>On>=qn.minLevel)||Kp[0];A(Pr),P({quizzesCompleted:Mt.length,hasPerfectScore:Ds,level:On})}catch(xe){console.error(xe)}finally{ne(!1)}}})()},[e]);const er=async ie=>{ie.preventDefault(),a(!0),u(null);try{let xe={...lt};lt.grade==="university"&&lt.universityName&&(xe.school=lt.universityName),delete xe.universityName,await t(xe),u("   !"),setTimeout(()=>u(null),3e3)}catch(xe){console.error(xe),alert("   ")}finally{a(!1)}},tr=async()=>{a(!0);try{await t({avatar:_}),p(!1)}catch(ie){console.error(ie)}finally{a(!1)}},kt=async()=>{a(!0);try{await t({profileBackground:S}),v(!1)}catch(ie){console.error(ie)}finally{a(!1)}},Sn=je!=null&&je.generatedAt?je.generatedAt.toDate?je.generatedAt.toDate():je.generatedAt.seconds?new Date(je.generatedAt.seconds*1e3):new Date(je.generatedAt):null,yi=Sn?Math.floor((new Date().getTime()-Sn.getTime())/(1e3*60*60*24)):999,nr=yi<7,qt=7-yi,Ms=async()=>{if(!Ie.length&&!G.length){Ut(!0);return}ht(!0);try{const ie=Ie.length>0?Ie[0]:null,xe=G.slice(-10),Fe=await u7(ie,xe);gn(Fe),await t({performanceAnalysis:Fe})}catch(ie){console.error("Failed to generate report:",ie),alert("       .")}finally{ht(!1)}},sr=async(ie,xe)=>{if(!ie)return;const Fe=parseInt(fe);if(isNaN(Fe)||Fe<=0){alert("    ");return}if(window.confirm(`     ${Fe}   ${xe}`)){a(!0),Le(null);try{const Mt=Xs(pt,"users",ie);await bf(Mt,{totalXP:kg(Fe)}),U(cn=>cn.map(Ds=>Ds.id===ie?{...Ds,totalXP:(Ds.totalXP||0)+Fe}:Ds)),Le(`  ${Fe} XP  ${xe} !`),setTimeout(()=>Le(null),3e3)}catch(Mt){console.error(Mt),alert("    ")}finally{a(!1)}}},es=async()=>{if(!V.trim()){alert("   ");return}Ae(!0);try{await Nu(ln(pt,"announcements"),{title:V,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:ro()}),alert("   "),re(""),J(!1)}catch(ie){console.error(ie),alert("   ")}finally{Ae(!1)}},ts=j.filter(ie=>(ie.displayName||"").toLowerCase().includes(M.toLowerCase())||(ie.email||"").toLowerCase().includes(M.toLowerCase())),ba=ie=>ie?ie.startsWith("http")?{backgroundImage:`url(${ie})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${Yp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},xi=ie=>!ie||ie.startsWith("http")?"bg-no-repeat bg-center":ie,Un=G.slice(-10).map(ie=>ie.percentage),me=Un.length>0?Math.max(...Un):0,Se=Un.length>0?Math.min(...Un):0,we=Un.length>0?Math.round(Un.reduce((ie,xe)=>ie+xe,0)/Un.length):0,ge=G.length,Ce=(Z-1)*500,Xe=Math.min(100,Math.max(0,(K-Ce)/500*100)),We="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Qt=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ie=>({label:` ${ie}`,value:ie.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Ze=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-full h-full p-4 text-gray-400"})}),o.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:o.jsx(Qn,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"text-center md:text-right space-y-2",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),o.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[o.jsx(tg,{className:"w-4 h-4 text-blue-500"}),e.email]}),o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[o.jsx(ri,{className:"w-3.5 h-3.5"})," "]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-12",children:[o.jsxs("button",{onClick:()=>n&&n("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:o.jsx(xC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:o.jsx(la,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:o.jsx(uC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:o.jsx(nu,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>J(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:o.jsx(Bc,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[o.jsx(ol,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),Ve&&o.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[o.jsx(Qn,{className:"w-4 h-4"})," ",Ve]})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx(ca,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"   ...",value:M,onChange:ie=>$e(ie.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),o.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:Ke?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(rn,{className:"w-8 h-8 animate-spin text-blue-500"})}):M===""?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):ts.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):ts.map(ie=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ie.avatar?o.jsx("img",{src:ie.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-5 h-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:ie.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[o.jsx(gh,{className:"w-3 h-3"})," ",ie.totalXP||0]}),o.jsxs("span",{children:[" ",ie.email]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:fe,onChange:xe=>Te(xe.target.value),children:[o.jsx("option",{value:"10",children:"+10 XP"}),o.jsx("option",{value:"50",children:"+50 XP"}),o.jsx("option",{value:"100",children:"+100 XP"}),o.jsx("option",{value:"200",children:"+200 XP"}),o.jsx("option",{value:"500",children:"+500 XP"})]}),o.jsx("button",{onClick:()=>sr(ie.id,ie.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:o.jsx(fI,{className:"w-4 h-4"})})]})]},ie.id))})]})]}),O&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:o.jsx(Bc,{className:"w-6 h-6 text-orange-400"})}),o.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),o.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:o.jsx(Nr,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:V,onChange:ie=>re(ie.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),o.jsxs("button",{onClick:es,disabled:he,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[he?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"})," "]})]})]})})]}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[at&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm shadow-2xl border border-gray-700 p-8 text-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-r from-purple-500 to-pink-500"}),o.jsx("div",{className:"w-20 h-20 bg-purple-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-purple-500/30",children:o.jsx(Ip,{className:"w-10 h-10 text-purple-400"})}),o.jsx("h3",{className:"text-xl font-black text-white mb-3",children:"   "}),o.jsx("p",{className:"text-gray-400 mb-8 text-sm leading-relaxed",children:"              ."}),o.jsx("button",{onClick:()=>Ut(!1),className:"w-full bg-gray-800 hover:bg-gray-700 text-white py-3 rounded-xl font-bold transition-colors border border-gray-600",children:" "})]})}),h&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(jn,{className:"w-5 h-5 text-purple-500"}),"  "]}),o.jsx("button",{onClick:()=>p(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-3 gap-3",children:h7.map((ie,xe)=>{const Fe=Z<ie.minLevel;return o.jsxs("button",{onClick:()=>!Fe&&E(ie.url),disabled:Fe,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${_===ie.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Fe?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[o.jsx("img",{src:ie.url,alt:`Avatar ${xe}`,className:"w-full h-full object-cover"}),Fe&&o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[o.jsx(Ka,{className:"w-4 h-4 mb-0.5"}),o.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ie.minLevel]})]}),!Fe&&_===ie.url&&o.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:o.jsx(Qn,{className:"w-3 h-3"})})]},xe)})})}),o.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:o.jsxs("button",{onClick:tr,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"}),"  "]})})]})}),m&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(zb,{className:"w-6 h-6 text-emerald-500"}),"  "]}),o.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(Nr,{className:"w-6 h-6 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Yp.map((ie,xe)=>{const Fe=Z<ie.minLevel,Mt=S===ie.url;return o.jsxs("button",{onClick:()=>!Fe&&D(ie.url),disabled:Fe,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Mt?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Fe?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ie.url})`}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Fe?o.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[o.jsx(Ka,{className:"w-4 h-4 text-white"}),o.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ie.minLevel]})]}):Mt&&o.jsx(Qn,{className:"w-8 h-8 text-white drop-shadow-md"})}),o.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:o.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ie.name})})]},xe)})})}),o.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),o.jsx("button",{onClick:kt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[o.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${xi(e==null?void 0:e.profileBackground)}`,style:ba(e==null?void 0:e.profileBackground),children:[o.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[o.jsx(zb,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${I.color}`,children:[o.jsx(I.icon,{className:"w-4 h-4"})," ",I.title]})]}),o.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>p(!0),children:[o.jsx("div",{className:"w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] border-gray-800 shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center",children:e!=null&&e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-16 h-16 text-gray-500"})}),o.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:o.jsx(tI,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm font-medium mb-6",children:[o.jsx("span",{children:e==null?void 0:e.email}),o.jsx("span",{className:"text-gray-300",children:""}),o.jsxs("span",{className:"text-emerald-400 font-bold flex items-center gap-1",children:[o.jsx(ol,{className:"w-3 h-3"}),"  ",Z]})]})]}),o.jsxs("form",{onSubmit:er,className:"space-y-6 border-t border-gray-700 pt-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(jn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:lt.firstName,onChange:ie=>Ot({...lt,firstName:ie.target.value}),className:We})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:lt.lastName,onChange:ie=>Ot({...lt,lastName:ie.target.value}),className:We})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx(tE,{options:Ze,value:lt.gender,onChange:ie=>!(e!=null&&e.genderChanged)&&Ot({...lt,gender:ie}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&o.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[o.jsx(Ka,{className:"w-3 h-3"}),"        "]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:lt.phone,onChange:ie=>Ot({...lt,phone:ie.target.value}),className:We})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:lt.address,onChange:ie=>Ot({...lt,address:ie.target.value}),className:We})]}),o.jsx("div",{className:"md:col-span-2 mt-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(ri,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:lt.school,onChange:ie=>Ot({...lt,school:ie.target.value}),className:We})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx(tE,{options:Qt,value:lt.grade,onChange:ie=>Ot({...lt,grade:ie}),placeholder:" "})]}),lt.grade==="university"&&o.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),o.jsx("input",{type:"text",value:lt.universityName||lt.school,onChange:ie=>Ot({...lt,universityName:ie.target.value}),placeholder:"   ...",className:`${We} border-blue-500 bg-blue-900/10`})]})]}),o.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[l&&o.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[o.jsx(Qn,{className:"w-4 h-4"})," ",l]}),o.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"}),"  "]})]})]})]})]}),Ie.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-8 bg-gray-800/50 border-b border-gray-700",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(gl,{className:"w-6 h-6 text-blue-400"}),"  "]}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-2xl p-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl -mr-10 -mt-10"}),o.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6 relative z-10",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold text-sm mb-2",children:[o.jsx(eu,{className:"w-4 h-4"})," : ",new Date(Ie[0].date).toLocaleDateString("ar-EG")]}),o.jsx("h4",{className:"text-2xl font-black text-white mb-4",children:"    "}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ie[0].weaknesses.length>0?Ie[0].weaknesses.map((ie,xe)=>o.jsx("span",{className:"bg-red-900/30 text-red-300 px-3 py-1 rounded-lg text-sm font-bold border border-red-900/50",children:ie},xe)):o.jsx("span",{className:"bg-emerald-900/30 text-emerald-300 px-3 py-1 rounded-lg text-sm font-bold border border-emerald-900/50",children:"     !"})})]}),o.jsxs("div",{className:"md:w-1/3 bg-gray-900/50 rounded-xl p-4 border border-gray-700",children:[o.jsx("h5",{className:"text-xs font-bold text-gray-400 mb-3 uppercase",children:"  "}),o.jsx("ul",{className:"space-y-2",children:Ie[0].recommendations.slice(0,2).map((ie,xe)=>o.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-300",children:[o.jsx(su,{className:"w-3 h-3 text-yellow-500 shrink-0 mt-0.5"}),ie]},xe))})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-400",children:"  "}),Ie.slice(1).map((ie,xe)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${ie.score>=75?"bg-emerald-900/30 text-emerald-400":"bg-yellow-900/30 text-yellow-400"}`,children:[ie.score,"%"]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-white text-sm",children:ie.subject}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(ie.date).toLocaleDateString("ar-EG")})]})]}),o.jsx("div",{className:"text-xs text-gray-400 font-medium",children:ie.grade})]},xe)),Ie.length<=1&&o.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"   "})]})]})]})]}),o.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[o.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),o.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:o.jsx(I.icon,{className:"w-8 h-8 text-white"})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",Z]}),o.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[o.jsx(gh,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",K,"   (XP)"]})]})]})}),o.jsxs("div",{className:"relative mb-8",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[o.jsx("span",{children:I.title}),o.jsxs("span",{children:["  ",Z+1]})]}),o.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:o.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Xe}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),o.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[o.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[o.jsx(Tl,{className:"w-4 h-4 text-yellow-300"}),"  "]}),o.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:I.title}),o.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[o.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:o.jsx(HC,{className:"w-5 h-5 text-yellow-400"})})," "]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:d7.map((ie,xe)=>{const Fe=ie.condition(R);return o.jsxs("div",{className:`relative p-3 rounded-xl border flex flex-col items-center text-center transition-all ${Fe?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md":"bg-gray-800/50 border-gray-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-2 ${Fe?ie.bg:"bg-gray-700"}`,children:o.jsx(ie.icon,{className:`w-6 h-6 ${Fe?ie.color:"text-gray-400"}`})}),o.jsx("h4",{className:"font-bold text-xs text-gray-200 mb-1",children:ie.title}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-tight",children:ie.desc}),!Fe&&o.jsx("div",{className:"absolute inset-0 bg-gray-900/50 backdrop-blur-[1px] rounded-xl flex items-center justify-center",children:o.jsx(Ka,{className:"w-4 h-4 text-gray-400"})})]},xe)})})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(DI,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),ee?o.jsx("div",{className:"h-48 flex items-center justify-center",children:o.jsx(rn,{className:"w-6 h-6 animate-spin text-emerald-500"})}):o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:o.jsx(ol,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[me,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:o.jsx(uE,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-red-400",children:[Se,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:o.jsx(gC,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsx("div",{className:"font-black text-lg text-blue-400",children:ge})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:o.jsx(rI,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),o.jsxs("div",{className:"font-black text-lg text-purple-400",children:[we,"%"]})]})]})]})})]})]})]}),o.jsxs("div",{className:"mt-8 bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-8 bg-gradient-to-r from-gray-800/80 to-gray-900/50 border-b border-gray-700 flex flex-col md:flex-row justify-between items-center gap-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 flex items-center gap-3 mb-2",children:[o.jsx(Ip,{className:"w-7 h-7 text-purple-400"})," "]}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-md",children:"            ."})]}),o.jsxs("button",{onClick:Ms,disabled:ze||je&&nr,className:`bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-purple-900/30 transition-all flex items-center gap-2 min-w-[180px] justify-center ${je&&nr?"opacity-60 cursor-not-allowed bg-gray-700 hover:bg-gray-700 shadow-none":""}`,children:[ze?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(Kg,{className:"w-5 h-5"}),je?nr?`   ${qt} `:" ":"  "]})]}),o.jsx("div",{className:"p-8",children:je?o.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[o.jsxs("div",{className:"bg-purple-900/10 p-6 rounded-2xl border border-purple-500/20 relative",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"bg-purple-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-sm",children:" "}),o.jsxs("div",{className:"flex items-center gap-2 text-purple-300 bg-purple-900/20 px-3 py-1 rounded-lg border border-purple-500/20 text-xs font-bold",children:[o.jsx(eu,{className:"w-3.5 h-3.5"})," : ",Sn==null?void 0:Sn.toLocaleDateString("ar-EG")]})]}),o.jsx("p",{className:"text-gray-200 leading-loose font-medium",children:je.generalAnalysis})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-2xl border border-emerald-500/20",children:[o.jsxs("h4",{className:"font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[o.jsx(oo,{className:"w-5 h-5"})," "]}),o.jsx("ul",{className:"space-y-3",children:je.strengths.map((ie,xe)=>o.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mt-1.5 shrink-0"}),ie]},xe))})]}),o.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-2xl border border-red-500/20",children:[o.jsxs("h4",{className:"font-bold text-red-400 mb-4 flex items-center gap-2",children:[o.jsx(su,{className:"w-5 h-5"}),"  "]}),o.jsx("ul",{className:"space-y-3",children:je.weaknesses.map((ie,xe)=>o.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 shrink-0"}),ie]},xe))})]})]}),o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-blue-500/30 shadow-lg",children:[o.jsxs("h4",{className:"font-bold text-blue-400 mb-6 flex items-center gap-2 text-lg",children:[o.jsx(Ks,{className:"w-5 h-5"}),"  "]}),o.jsx("div",{className:"space-y-4",children:je.improvementPlan.map((ie,xe)=>o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-900/30 rounded-full flex items-center justify-center text-blue-400 font-bold text-sm border border-blue-500/30 shrink-0",children:xe+1}),o.jsx("div",{className:"p-3 bg-gray-900 rounded-xl border border-gray-700 text-gray-300 text-sm leading-relaxed flex-1",children:ie})]},xe))})]})]}):o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-700",children:o.jsx(Ip,{className:"w-10 h-10 text-gray-600"})}),o.jsx("p",{className:"font-medium",children:"      ."}),o.jsx("p",{className:"text-xs mt-2 opacity-70",children:"       ."})]})})]})]})},m7=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],Qp=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=H.useState(!1),h=H.useRef(null);H.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(Za,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(oo,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},p7=({onBack:n})=>{const{user:e}=ks(),[t,s]=H.useState("SELECTION"),[a,l]=H.useState(""),[u,h]=H.useState(""),[p,m]=H.useState("All"),[v,_]=H.useState([]),[E,S]=H.useState(!1),[D,G]=H.useState(null),[F,ee]=H.useState(0),[ne,K]=H.useState({}),[ae,Z]=H.useState(1800),[z,I]=H.useState(null),[A,R]=H.useState(!1),[P,j]=H.useState(0),[U,M]=H.useState({}),[$e,Ke]=H.useState(!1),[X,fe]=H.useState(null),[Te,Ve]=H.useState(!1),[Le,O]=H.useState(!1),[J,V]=H.useState(!1),[re,he]=H.useState(0),[Ae,Ie]=H.useState(!1),[Ye,je]=H.useState(null);H.useEffect(()=>{window.scrollTo(0,0)},[t]),H.useEffect(()=>{u?gn():_([])},[u]),H.useEffect(()=>{let me;return t==="ACTIVE"&&ae>0&&(me=setInterval(()=>{Z(Se=>Se<=1?(tr(),0):Se-1)},1e3)),()=>clearInterval(me)},[t,ae]),H.useEffect(()=>{let me;return t==="ACTIVE"&&(D!=null&&D.questionDuration)&&z!==null&&(z>0?me=setInterval(()=>{I(Se=>Se!==null&&Se>0?Se-1:0)},1e3):z===0&&er()),()=>clearInterval(me)},[t,D,z]),H.useEffect(()=>{D!=null&&D.questionDuration?I(D.questionDuration):I(null)},[F,D]),H.useEffect(()=>{if(t!=="ACTIVE")return;const me=()=>{he(Ce=>{const Xe=Ce+1;return Xe===1?O(!0):Xe>=2&&(O(!1),V(!0)),Xe})},Se=()=>{document.hidden&&me()},we=Ce=>{(Ce.key==="PrintScreen"||Ce.ctrlKey&&Ce.key==="p"||Ce.metaKey&&Ce.shiftKey)&&(Ce.preventDefault(),me())},ge=Ce=>Ce.preventDefault();return document.addEventListener("visibilitychange",Se),document.addEventListener("keydown",we),document.addEventListener("contextmenu",ge),document.addEventListener("copy",ge),document.addEventListener("paste",ge),document.addEventListener("cut",ge),document.addEventListener("selectstart",ge),()=>{document.removeEventListener("visibilitychange",Se),document.removeEventListener("keydown",we),document.removeEventListener("contextmenu",ge),document.removeEventListener("copy",ge),document.removeEventListener("paste",ge),document.removeEventListener("cut",ge),document.removeEventListener("selectstart",ge)}},[t]);const gn=async()=>{S(!0);try{const me=Ln(ln(pt,"quizzes"),$s("grade","==",u)),Se=await Xn(me),we=[];Se.forEach(ge=>{we.push({id:ge.id,...ge.data()})}),_(we)}catch(me){console.error("Error fetching quizzes:",me)}finally{S(!1)}},ze=Array.from(new Set(v.map(me=>me.subject))),ht=v.filter(me=>{const Se=a?me.subject===a:!0,we=p&&p!=="All"?me.category===p:!0;return Se&&we}),at=me=>{fe(me),Ke(!0)},Ut=me=>{if(!me.questions||me.questions.length===0){alert("      ");return}const we=[...me.questions].sort(()=>Math.random()-.5).map(We=>{if(We.type==="MCQ"||We.type==="TF"){const Qt=We.options.map((xe,Fe)=>({opt:xe,originalIndex:Fe}));Qt.sort(()=>Math.random()-.5);const Ze=Qt.map(xe=>xe.opt),ie=Qt.findIndex(xe=>xe.originalIndex===We.correctAnswer);return{...We,options:Ze,correctAnswer:ie}}return We}),ge={...me,questions:we},Ce={};we.forEach((We,Qt)=>{if(We.type==="REORDER"){const Ze=We.options.map((ie,xe)=>xe);for(let ie=Ze.length-1;ie>0;ie--){const xe=Math.floor(Math.random()*(ie+1));[Ze[ie],Ze[xe]]=[Ze[xe],Ze[ie]]}Ce[Qt]=Ze}}),M(Ce),G(ge),ee(0),K({});const Xe=me.duration?me.duration*60:1800;Z(Xe),j(0),he(0),V(!1),Ke(!1),fe(null),s("ACTIVE")},lt=()=>{X&&Ut(X)},Ot=me=>{K(Se=>({...Se,[F]:me}))},er=()=>{D&&(I(null),F<D.questions.length-1?ee(me=>me+1):tr())},tr=async()=>{if(!D||!e){s("RESULT");return}R(!0);const me=jt(),Se=Math.round(me/D.questions.length*100);let we=0;try{const ge=Ln(ln(pt,"quiz_results"),$s("userId","==",e.uid),$s("quizId","==",D.id));(await Xn(ge)).empty?we=me*30:we=me*1}catch(ge){console.error("Error checking previous attempts:",ge),we=me*1}j(we);try{await Nu(ln(pt,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:D.id||"unknown",quizTitle:D.title,subject:D.subject,score:me,totalQuestions:D.questions.length,percentage:Se,passed:Se>=50,earnedXP:we,createdAt:ro()});const ge=Xs(pt,"users",e.uid);await $0(ge,{totalXP:kg(we),quizzesCompleted:kg(1),lastQuizDate:ro(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(ge){console.error("Error saving quiz result:",ge)}finally{R(!1),s("RESULT")}},kt=me=>{const Se=Math.floor(me/60),we=me%60;return`${Se}:${we<10?"0":""}${we}`},jt=()=>{if(!D)return 0;let me=0;return D.questions.forEach((Se,we)=>{if(Se.type==="REORDER"){const ge=ne[we];if(ge&&ge.length===Se.options.length){let Ce=!0;for(let Xe=0;Xe<Se.options.length;Xe++)if(ge[Xe]!==Xe){Ce=!1;break}Ce&&me++}}else ne[we]===Se.correctAnswer&&me++}),me},Sn=()=>{Ve(!0)},yi=()=>{Ve(!1),s("SELECTION")},nr=()=>{V(!1),s("SELECTION")},qt=me=>{je(me),Ie(!0)},Ms=()=>{if(Ie(!1),Ye==="REVIEW")s("REVIEW");else if(Ye==="RETAKE"){const me=v.find(Se=>Se.id===(D==null?void 0:D.id));me?Ut(me):s("SELECTION")}else Ye==="LIST"?s("SELECTION"):Ye==="HOME"&&n();je(null)},sr=(me,Se)=>{const we=ne[F]||[];Ot(Se?[...we,me]:we.filter(ge=>ge!==me))},es=({title:me,message:Se,onConfirm:we,onCancel:ge,icon:Ce=ti,confirmText:Xe="",cancelText:We="",confirmColor:Qt="emerald"})=>o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:ge}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${Qt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:o.jsx(Ce,{className:`w-10 h-10 ${Qt==="red"?"text-red-500":"text-emerald-500"}`})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:me}),o.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Se}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:we,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${Qt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:Xe}),o.jsx("button",{onClick:ge,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:We})]})]})]}),ts=()=>{const me=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ge=>({label:` ${ge}`,value:ge.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],Se=[{label:"  ",value:""},...ze.map(ge=>({label:String(ge),value:String(ge)}))],we=m7.map(ge=>({label:ge.label,value:ge.id}));return o.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[o.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(ri,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),o.jsx(Qp,{options:me,value:u,onChange:ge=>{h(ge),l(""),m("All")},placeholder:"--    --"})]}),o.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(Zn,{className:"w-5 h-5 text-emerald-400"})})," "]}),o.jsx(Qp,{options:Se,value:a,onChange:l,placeholder:u?" ":"   ",disabled:!u})]})]}),u&&o.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:o.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(mE,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),o.jsx(Qp,{options:we,value:p,onChange:m,placeholder:"  "})]})}),u&&o.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[o.jsx(qb,{className:"w-5 h-5"})," "]}),E?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(rn,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ca,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):ht.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ca,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ht.map(ge=>o.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ge.subject}),ge.category&&o.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ge.category==="General"?"General Quiz":ge.category})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsxs("span",{className:"text-gray-500 text-xs",children:[ge.questions.length," "]}),o.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ge.duration?`${ge.duration} `:"30 "})]})]}),o.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ge.title}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[o.jsx(xh,{className:"w-3 h-3"}),o.jsx("span",{children:ge.grade==="English Major - QOU"?"  ":` ${ge.grade}`})]}),o.jsxs("button",{onClick:()=>at(ge),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",o.jsx(fh,{className:"w-4 h-4"})]})]},ge.id))})]}),$e&&o.jsx(es,{title:"  ",message:`   ${X==null?void 0:X.title} `,onConfirm:lt,onCancel:()=>Ke(!1),confirmText:" ",cancelText:"",icon:ti})]})},ba=()=>{if(!D||!D.questions||!D.questions[F])return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[o.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),o.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const me=D.questions[F],Se=me.type==="REORDER";let we=!1;if(Se){const Ze=ne[F];we=Ze!==void 0&&Ze.length===me.options.length}else we=ne[F]!==void 0;const ge=F===D.questions.length-1,Ce=D.subject.toLowerCase().includes("english")||D.subject.includes("")||D.subject.includes(""),Xe=Ce?"ltr":"rtl",We=Ce?"text-left":"text-right",Qt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[me.passageFontSize||"md"];return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:Ze=>Ze.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[J&&o.jsx(es,{title:"   ",message:"      .   .",onConfirm:nr,onCancel:()=>{},confirmText:"",cancelText:"",icon:sg,confirmColor:"red"}),Le&&!J&&o.jsx(es,{title:" !",message:"     .   .",onConfirm:()=>O(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:su,confirmColor:"red"}),Te&&o.jsx(es,{title:" ",message:"       .",onConfirm:yi,onCancel:()=>Ve(!1),confirmText:" ",cancelText:"",icon:tu,confirmColor:"red"}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:Sn,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(tu,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${ae<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[o.jsx(Bh,{className:"w-4 h-4"}),kt(ae)]})}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[F+1," / ",D.questions.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(F+1)/D.questions.length*100}%`}})})]}),z!==null&&D.questionDuration&&o.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4",children:[o.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-1000 linear ${z<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${z/D.questionDuration*100}%`}})}),o.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",z," "]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Xe,children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:D.title}),o.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Se?o.jsx(dE,{className:"w-4 h-4 text-emerald-500"}):o.jsx(Ka,{className:"w-4 h-4 text-gray-300"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[me.passageContent&&o.jsxs("div",{className:"mb-8",children:[me.generalInstruction&&o.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${We}`,children:me.generalInstruction}),o.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${We}`,children:o.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${Qt}`,children:me.passageContent})})]}),o.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${We}`,children:me.question}),Se?o.jsxs("div",{className:"space-y-6",dir:"ltr",children:[o.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(ne[F]||[]).map((Ze,ie)=>o.jsx("button",{onClick:()=>sr(Ze,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:me.options[Ze]},`ans-${ie}`)),(!ne[F]||ne[F].length===0)&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),o.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(U[F]||[]).filter(Ze=>!(ne[F]||[]).includes(Ze)).map((Ze,ie)=>o.jsx("button",{onClick:()=>sr(Ze,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:me.options[Ze]},`bank-${ie}`))}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>Ot([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[o.jsx(fE,{className:"w-3 h-3"})," "]})})]}):o.jsx("div",{className:"space-y-3",children:me.options.map((Ze,ie)=>o.jsxs("button",{onClick:()=>Ot(ie),className:`w-full ${We} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${ne[F]===ie?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[o.jsx("span",{className:`text-base font-bold ${ne[F]===ie?"text-emerald-300":"text-gray-300"}`,children:Ze}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${ne[F]===ie?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:ne[F]===ie&&o.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},ie))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{onClick:er,disabled:!we||A,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!we||A?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:A?o.jsxs(o.Fragment,{children:["  ",o.jsx(rn,{className:"w-5 h-5 animate-spin"})]}):o.jsxs(o.Fragment,{children:[ge?" ":" ",Xe==="rtl"?o.jsx(fh,{className:"w-5 h-5"}):o.jsx(Lt,{className:"w-5 h-5"})]})})})]})]})},xi=()=>{if(!D)return null;const me=jt(),Se=D.questions.length,we=Math.round(me/Se*100);let ge="text-red-500",Ce="from-red-500 to-pink-600",Xe=oC;we>=90?(ge="text-emerald-500",Ce="from-emerald-400 to-teal-600",Xe=Tl):we>=75?(ge="text-blue-500",Ce="from-blue-400 to-indigo-600",Xe=Wa):we>=50&&(ge="text-yellow-500",Ce="from-yellow-400 to-orange-500",Xe=oo);const We=Xe;return o.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"w-full max-w-md bg-gray-900 rounded-[2.5rem] shadow-2xl overflow-hidden relative border border-gray-700",children:[o.jsxs("div",{className:`relative pt-12 pb-16 px-6 text-center bg-gradient-to-br ${Ce}`,children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-24 h-24 mx-auto bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-4 shadow-lg ring-4 ring-white/10",children:o.jsx(We,{className:"w-12 h-12 text-white"})}),o.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:we>=90?"!":we>=50?"!":" "}),o.jsx("p",{className:"text-white/90 font-medium text-sm mb-6",children:D.title}),o.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-6 py-2 rounded-full border border-white/20 shadow-lg",children:[o.jsx(gh,{className:"w-5 h-5 text-yellow-300 fill-yellow-300 animate-pulse"}),o.jsxs("span",{className:"font-black text-white text-lg",children:["+",P," XP"]})]})]}),o.jsx("div",{className:"absolute -bottom-1 left-0 w-full overflow-hidden leading-[0]",children:o.jsx("svg",{className:"relative block w-[calc(100%+1.3px)] h-[50px]","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:o.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z",className:"fill-gray-900"})})})]}),o.jsxs("div",{className:"px-6 pb-8 -mt-6 relative z-10",children:[o.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-lg border border-gray-700 p-6 text-center mb-6 transform -translate-y-4",children:[o.jsx("div",{className:"text-sm text-gray-400 font-bold uppercase tracking-wider mb-2",children:" "}),o.jsx("div",{className:"flex justify-center items-baseline gap-1",children:o.jsxs("span",{className:`text-6xl font-black ${ge}`,children:[we,"%"]})}),o.jsxs("div",{className:"text-gray-400 font-medium mt-1 text-sm",children:[me,"     ",Se]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-2xl border border-emerald-800 text-center",children:[o.jsx("div",{className:"text-emerald-400 font-black text-2xl mb-1",children:me}),o.jsx("div",{className:"text-xs text-gray-400 font-bold",children:" "})]}),o.jsxs("div",{className:"bg-red-900/20 p-4 rounded-2xl border border-red-800 text-center",children:[o.jsx("div",{className:"text-red-400 font-black text-2xl mb-1",children:Se-me}),o.jsx("div",{className:"text-xs text-gray-400 font-bold",children:" "})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>qt("REVIEW"),className:"w-full py-4 bg-white text-gray-900 font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95",children:[o.jsx(Wp,{className:"w-5 h-5"}),"  "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>qt("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-sm",children:[o.jsx(hE,{className:"w-4 h-4"}),"  "]}),o.jsxs("button",{onClick:()=>qt("LIST"),className:"py-3 bg-gray-800 text-white font-bold rounded-2xl hover:bg-gray-700 transition-colors flex items-center justify-center gap-2 text-sm border border-gray-700",children:[o.jsx(qb,{className:"w-4 h-4"})," "]})]}),o.jsxs("button",{onClick:()=>qt("HOME"),className:"w-full py-3 text-gray-400 hover:text-gray-200 font-bold text-sm transition-colors flex items-center justify-center gap-2",children:[o.jsx(yh,{className:"w-4 h-4"}),"  "]})]})]})]})})},Un=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Wp,{className:"w-5 h-5 text-emerald-400"})," "]}),o.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[o.jsx(Lt,{className:"w-4 h-4"})," "]})]}),o.jsx("div",{className:"space-y-6",children:D==null?void 0:D.questions.map((me,Se)=>{const we=me.type==="REORDER";let ge=!1,Ce=null;if(we){const Xe=ne[Se];Xe?(Ce=Xe.map(We=>me.options[We]).join(" "),ge=Xe.length===me.options.length&&Xe.every((We,Qt)=>We===Qt)):(Ce="  ",ge=!1)}else{const Xe=ne[Se];ge=Xe===me.correctAnswer,Ce=Xe!==void 0?me.options[Xe]:"  "}return o.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ge?"border-gray-700":"border-red-900/50"}`,children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ge?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Se+1}),o.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:me.question})]}),o.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ge?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),o.jsx("span",{className:"font-bold",children:Ce})]}),!ge&&o.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),o.jsx("span",{className:"font-bold text-emerald-400",children:we?me.options.join(" "):me.options[me.correctAnswer]})]}),me.explanation&&o.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[o.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[o.jsx(ti,{className:"w-3 h-3"}),":"]}),o.jsx("p",{className:"leading-relaxed opacity-90",children:me.explanation})]})]},me.id)})})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),ts()]}),t==="ACTIVE"&&ba(),t==="RESULT"&&xi(),t==="REVIEW"&&Un(),Ae&&o.jsx(es,{title:"  ",message:Ye==="REVIEW"?"   ":Ye==="RETAKE"?"     ":Ye==="LIST"?"    ":"    ",onConfirm:Ms,onCancel:()=>Ie(!1),confirmText:"",cancelText:"",icon:WC})]})},g7=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),y7=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),x7=({onBack:n})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"#",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:o.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),o.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(cE,{className:"w-4 h-4"}),t.school]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ng,{className:"w-4 h-4"}),t.location]})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[o.jsx(sa,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("h3",{className:"font-bold text-white",children:" "})]}),o.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[o.jsx(Wa,{className:`w-5 h-5 text-${t.color}-400`})," "]}),o.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((a,l)=>o.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:a},l))})]})]}),o.jsx("div",{className:"pt-6 border-t border-white/5",children:o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:o.jsx(Zp,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:o.jsx(g7,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:o.jsx(y7,{className:"w-5 h-5"})})]})})]},s))})]})]})},v7=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[o.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",o.jsx("br",{}),"   "]}),o.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:o.jsx(Wp,{className:"w-8 h-8 text-blue-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:o.jsx(Yg,{className:"w-8 h-8 text-emerald-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),o.jsxs("div",{className:"mb-20",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:xI,title:" ",desc:"       ."},{icon:SC,title:" ",desc:"           ."},{icon:uE,title:" ",desc:"         ."},{icon:qI,title:" ",desc:"          ."}].map((e,t)=>o.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[o.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:o.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),o.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),b7=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:""})]})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:o.jsxs("div",{className:"bg-gray-900 p-12 rounded-3xl shadow-xl border border-white/5 max-w-md w-full flex flex-col items-center transform hover:scale-105 transition-transform duration-300",children:[o.jsx("div",{className:"w-24 h-24 bg-emerald-900/20 rounded-full flex items-center justify-center mb-6 animate-bounce border border-emerald-500/20",children:o.jsx(Bh,{className:"w-12 h-12 text-emerald-400"})}),o.jsx("h1",{className:"text-4xl font-black text-white mb-3",children:""}),o.jsx("p",{className:"text-gray-400 text-lg font-medium",children:"        "})]})})]}),nE=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=H.useState(!1),h=H.useRef(null);H.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(Za,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(oo,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},_7=({onBack:n})=>{const[e,t]=H.useState(""),[s,a]=H.useState(""),[l,u]=H.useState("SELECTION"),[h,p]=H.useState(["handouts"]),[m,v]=H.useState([]),[_,E]=H.useState(!1);H.useEffect(()=>{l==="CONTENT"&&s&&e&&S()},[l,s,e]);const S=async()=>{E(!0);try{const Z=Ln(ln(pt,"study_materials"),$s("grade","==",s),$s("subject","==",e)),z=await Xn(Z),I=[];z.forEach(A=>{I.push({id:A.id,...A.data()})}),I.sort((A,R)=>{var U,M;const P=((U=A.createdAt)==null?void 0:U.seconds)||0;return(((M=R.createdAt)==null?void 0:M.seconds)||0)-P}),v(I)}catch(Z){console.error("Error fetching materials:",Z)}finally{E(!1)}},D=()=>{e&&s&&u("CONTENT")},G=Z=>{p(z=>z.includes(Z)?z.filter(I=>I!==Z):[...z,Z])},F=()=>{const Z=m.filter(A=>A.category==="handouts"),z=m.filter(A=>A.category==="worksheets"),I=m.filter(A=>A.category==="exams");return[{id:"handouts",title:" ",files:Z},{id:"worksheets",title:" ",files:z},{id:"exams",title:" ",files:I}]},ee=Z=>Z?(Z.toDate?Z.toDate():new Date(Z.seconds*1e3)).toLocaleDateString("ar-EG"):"",ne=F(),K=()=>{const Z=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(I=>({label:` ${I}`,value:I.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],z=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return o.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),o.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),o.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),o.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:o.jsx(Uc,{className:"w-10 h-10 text-white drop-shadow-md"})}),o.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),o.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[o.jsxs("div",{className:"group relative z-20",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:o.jsx(Zn,{className:"w-5 h-5 text-emerald-400"})})," "]}),o.jsx(nE,{options:z,value:e,onChange:t,placeholder:" "})]}),o.jsxs("div",{className:"group relative z-10",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:o.jsx(ri,{className:"w-5 h-5 text-teal-400"})})," "]}),o.jsx(nE,{options:Z,value:s,onChange:a,placeholder:" "})]})]}),o.jsxs("button",{onClick:D,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[o.jsx(ca,{className:"w-6 h-6"})," "]})]})})]})},ae=()=>o.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[o.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Ks,{className:"w-8 h-8 text-emerald-400"})}),o.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",o.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("button",{onClick:()=>u("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[o.jsx(Lt,{className:"w-5 h-5"})," "]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[o.jsx(Uc,{className:"w-3.5 h-3.5"}),ne.reduce((Z,z)=>Z+z.files.length,0)," "]})]}),_?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(rn,{className:"w-10 h-10 animate-spin text-emerald-400"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):o.jsx("div",{className:"space-y-4",children:ne.map(Z=>{const z=h.includes(Z.id);return o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("button",{onClick:()=>G(Z.id),className:`w-full flex items-center justify-between p-5 transition-colors ${z?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2.5 rounded-xl ${z?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:o.jsx(Uc,{className:"w-6 h-6"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-bold text-base text-white block",children:Z.title}),o.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[Z.files.length," "]})]})]}),o.jsx("div",{className:`transition-transform duration-300 ${z?"rotate-180":""}`,children:o.jsx(Za,{className:"w-5 h-5 text-gray-400"})})]}),z&&o.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:Z.files.length===0?o.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[o.jsx(Uc,{className:"w-10 h-10 mb-2 opacity-20"}),o.jsx("p",{className:"text-sm font-medium",children:"       "})]}):o.jsx("div",{className:"divide-y divide-gray-700/50",children:Z.files.map((I,A)=>o.jsxs("div",{onClick:()=>I.url&&window.open(I.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:o.jsx(Ks,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[o.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:I.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[o.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:I.size}),o.jsx("span",{children:""}),o.jsx("span",{children:ee(I.createdAt)})]})]})]}),o.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:o.jsx(Xp,{className:"w-5 h-5"})})]},A))})})]},Z.id)})}),o.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[o.jsx(mh,{className:"w-4 h-4 text-emerald-500 shrink-0"}),o.jsx("span",{children:"      PDF  "})]})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),l==="SELECTION"?K():ae()]})},sE=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),rE=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),w7=({onBack:n})=>{const e=t=>{let s="";switch(t){case"message":s="       .";break;case"question":s="       ...";break;case"review":s="      .";break;case"inquiry":s="    .";break;default:s="  ."}const a=`https://wa.me/972568401548?text=${encodeURIComponent(s)}`;window.open(a,"_blank")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[o.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[o.jsxs("div",{className:"absolute top-6 left-6 z-30 md:top-10 md:left-10 flex items-center gap-2 md:gap-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[o.jsx(Lt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[o.jsx("span",{className:"text-gray-300",children:""}),o.jsx("span",{className:"text-gray-500",children:"/"}),o.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),o.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[o.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),o.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),o.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"  .             ."})]})]}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[o.jsxs("button",{onClick:()=>e("message"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-emerald-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center text-emerald-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Bg,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-emerald-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"   "})]})]})]}),o.jsxs("button",{onClick:()=>e("question"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-blue-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/20 rounded-2xl flex items-center justify-center text-blue-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(ti,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-blue-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("review"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-purple-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-pink-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-purple-900/20 rounded-2xl flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(bC,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-purple-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("inquiry"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-orange-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-amber-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-900/20 rounded-2xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(xh,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-emerald-400 to-teal-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-emerald-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"     ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(sE,{className:"w-5 h-5"}),""]}),o.jsxs("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(rE,{className:"w-5 h-5"}),""]})]})]})]}),o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-blue-400 to-indigo-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-blue-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"      ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("button",{className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(sE,{className:"w-5 h-5"}),""]}),o.jsxs("button",{className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(rE,{className:"w-5 h-5"}),""]})]})]})]})]})]})]})},iE=[{minLevel:1,title:" ",icon:Gg},{minLevel:5,title:" ",icon:Zn},{minLevel:10,title:"",icon:ca},{minLevel:15,title:" ",icon:Wa},{minLevel:20,title:"",icon:$h},{minLevel:30,title:"",icon:Tl}],E7=({onLoginClick:n})=>{const[e,t]=H.useState([]),[s,a]=H.useState(!0),{user:l}=ks(),[u,h]=H.useState(0),[p,m]=H.useState(null),[v,_]=H.useState(null),[E,S]=H.useState(!1);H.useEffect(()=>{const ae=Ln(ln(pt,"users"),$s("role","==","student")),Z=sD(ae,I=>{const A=[];I.forEach(R=>{const P=R.data();A.push({uid:R.id,...P})}),A.sort((R,P)=>(Number(P.totalXP)||0)-(Number(R.totalXP)||0)),t(A.slice(0,10)),a(!1)},I=>{console.error("Error fetching leaderboard:",I),a(!1)});return(async()=>{try{const I=Ln(ln(pt,"quizzes")),A=await Xn(I);h(A.size)}catch(I){console.error("Error fetching quizzes count:",I)}})(),()=>Z()},[]);const D=async ae=>{m(ae),S(!0),_(null);try{const Z=Ln(ln(pt,"quiz_results"),$s("userId","==",ae.uid)),z=await Xn(Z);let I=0,A=0;z.forEach(P=>{const j=P.data();j.percentage!==void 0&&(I+=j.percentage,A++)});const R=A>0?Math.round(I/A):0;_({average:R,totalQuizzes:A})}catch(Z){console.error("Error fetching student stats",Z)}finally{S(!1)}},G=ae=>{switch(ae){case 0:return"bg-gradient-to-b from-yellow-400 to-yellow-600 text-white shadow-lg shadow-yellow-500/30 border border-yellow-300 scale-110";case 1:return"bg-gradient-to-b from-slate-300 to-slate-500 text-white shadow-md border border-slate-300";case 2:return"bg-gradient-to-b from-orange-400 to-orange-600 text-white shadow-md border border-orange-300";case 9:return"bg-gray-800 text-gray-400 border border-gray-700";default:return"bg-gray-700 text-gray-200 border border-gray-600"}},F=ae=>o.jsx("span",{className:"font-black text-sm font-mono",children:ae+1}),ee=ae=>{const Z=Math.floor(ae/500)+1,z=[...iE].reverse().find(I=>Z>=I.minLevel)||iE[0];return{level:Z,rank:z}},ne=e.reduce((ae,Z)=>ae+(Z.quizzesCompleted||0),0),K=ne*8;return o.jsxs("section",{className:"py-12 md:py-16 relative overflow-hidden",children:[p&&o.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>m(null)}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative shadow-2xl animate-fade-in-up overflow-hidden border border-white/10",children:[o.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white z-20 transition-colors backdrop-blur-sm",children:o.jsx(Nr,{className:"w-5 h-5"})}),o.jsx("div",{className:"h-32 bg-gray-800 relative"}),o.jsxs("div",{className:"px-8 pb-8 -mt-16 relative z-10 text-center",children:[o.jsx("div",{className:"w-32 h-32 mx-auto rounded-full p-1.5 bg-gray-900 shadow-2xl mb-4 ring-4 ring-gray-800",children:o.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-4 border-gray-700 bg-gray-800",children:p.avatar?o.jsx("img",{src:p.avatar,alt:p.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx(jn,{className:"w-12 h-12 text-gray-500"})})})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:p.displayName}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm flex items-center justify-center gap-1 mb-6",children:[o.jsx(xh,{className:"w-4 h-4"}),p.school||" "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[o.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[oE.createElement(ee(p.totalXP||0).rank.icon,{className:"w-5 h-5 text-indigo-400"}),o.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase",children:""})]}),o.jsx("div",{className:"font-black text-white text-sm",children:ee(p.totalXP||0).rank.title}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[" ",ee(p.totalXP||0).level]})]}),o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:E?o.jsx("div",{className:"flex justify-center py-2",children:o.jsx(rn,{className:"w-5 h-5 animate-spin text-emerald-500"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(sa,{className:"w-5 h-5 text-emerald-400 fill-emerald-400"}),o.jsx("span",{className:"text-xs font-bold text-emerald-400 uppercase",children:" "})]}),o.jsxs("div",{className:"font-black text-white text-xl",children:[(v==null?void 0:v.average)||0,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[(v==null?void 0:v.totalQuizzes)||0," "]})]})})]}),o.jsxs("div",{className:"bg-gray-800/30 border border-white/10 border-dashed rounded-xl p-5 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gray-800 text-yellow-500 px-3 py-1 rounded-full text-[10px] font-bold shadow-sm flex items-center gap-1 border border-white/10 z-10",children:[o.jsx(Wa,{className:"w-3 h-3"})," "]}),o.jsxs("p",{className:"text-sm text-gray-300 leading-relaxed font-medium mt-2 mb-6 relative z-10",children:["     / ",o.jsx("span",{className:"font-bold text-white underline decoration-yellow-600",children:p.displayName}),"      /   ."]}),o.jsxs("div",{className:"flex justify-around items-end pt-4 border-t border-white/10 relative z-10",children:[o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-2xl text-emerald-500/80 absolute -bottom-3 left-1/2 -translate-x-1/2 -rotate-6 whitespace-nowrap pointer-events-none opacity-90",children:"Yazan. A.K"})]}),o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-5xl text-blue-600/80 absolute -bottom-6 left-1/2 -translate-x-1/2 -rotate-12 whitespace-nowrap pointer-events-none scale-110",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"Majd. H"})]})]})]})]})]})]}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-24 relative z-10",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 backdrop-blur-md rounded-3xl shadow-lg border border-white/10 mb-5 transform -rotate-3 hover:rotate-0 transition-transform duration-300",children:o.jsx(ol,{className:"w-8 h-8 text-indigo-400"})}),o.jsx("h2",{className:"text-4xl font-black text-white mb-3 tracking-tight drop-shadow-lg",children:" "}),o.jsx("p",{className:"text-gray-400 text-base font-medium max-w-md mx-auto",children:"        "})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-[2.5rem] border border-white/10 shadow-2xl p-4 md:p-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2/3 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50 blur-sm"}),s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-900 rounded-full blur-xl opacity-50 animate-pulse"}),o.jsx(rn,{className:"w-12 h-12 animate-spin text-indigo-400 relative z-10"})]}),o.jsx("p",{className:"text-gray-400 font-bold mt-6 text-sm animate-pulse",children:"  ..."})]}):e.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-xl",children:o.jsx(Wa,{className:"w-10 h-10 text-gray-500"})}),o.jsx("h3",{className:"text-2xl font-black text-gray-300 mb-3",children:"  "}),o.jsx("p",{className:"text-gray-500 font-medium mb-8 text-sm",children:"       !"}),!l&&o.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transform hover:-translate-y-1",children:[o.jsx(Kg,{className:"w-4 h-4"}),"  "]})]}):o.jsx("div",{className:"space-y-3",children:e.map((ae,Z)=>o.jsxs("div",{onClick:()=>D(ae),className:`flex items-center p-3 rounded-2xl transition-all duration-300 cursor-pointer group border ${(l==null?void 0:l.uid)===ae.uid?"bg-indigo-900/30 border-indigo-500/50 shadow-[0_0_15px_rgba(99,102,241,0.2)] z-10 relative":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[o.jsx("div",{className:"w-10 flex justify-center shrink-0",children:o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shadow-sm transition-transform group-hover:scale-110 ${G(Z)}`,children:F(Z)})}),o.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden border-2 shadow-sm shrink-0 mx-3 border-gray-700 group-hover:border-white/30 transition-colors bg-gray-800 relative",children:[ae.avatar?o.jsx("img",{src:ae.avatar,alt:ae.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(jn,{className:"w-5 h-5 text-gray-500"})}),Z===0&&o.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-500 drop-shadow-sm",children:o.jsx(Tl,{className:"w-4 h-4 fill-yellow-500"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:`font-bold text-sm md:text-base truncate group-hover:text-indigo-300 transition-colors ${(l==null?void 0:l.uid)===ae.uid?"text-indigo-300":Z===0?"text-yellow-200":"text-white"}`,children:ae.displayName}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 mt-0.5",children:[o.jsx(xh,{className:"w-3 h-3 shrink-0"}),o.jsx("span",{className:"truncate max-w-[120px] md:max-w-xs",children:ae.school||" "})]})]}),o.jsx("div",{className:"shrink-0 pl-2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border shrink-0 transition-all ${Z===0?"bg-yellow-500/10 border-yellow-500/20":"bg-black/20 border-white/5 group-hover:bg-indigo-900/20"}`,children:[o.jsx("span",{className:`font-black text-xs md:text-sm ${Z===0?"text-yellow-200":"text-white"}`,children:ae.totalXP||0}),o.jsx(gh,{className:`w-3 h-3 md:w-3.5 md:h-3.5 ${Z===0?"text-yellow-400 fill-yellow-400":Z<3?"text-orange-500 fill-orange-500":"text-gray-600"}`})]})})]},ae.uid))})]})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-24 relative z-10",children:o.jsxs("div",{className:"relative overflow-hidden rounded-[3rem] bg-white/[0.02] backdrop-blur-sm shadow-xl border border-white/5 group",children:[o.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-indigo-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-emerald-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"relative z-10 p-8 md:p-12",children:o.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12",children:[o.jsxs("div",{className:"text-center lg:text-right max-w-lg",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-emerald-400 text-sm font-bold mb-6 backdrop-blur-sm shadow-sm",children:[o.jsx(jA,{className:"w-4 h-4 animate-pulse"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white mb-6 leading-tight",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:""}),"  !"]}),o.jsx("p",{className:"text-gray-400 text-lg leading-relaxed font-medium",children:"              ."})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full lg:w-auto",children:[o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-emerald-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-emerald-400 group-hover/stat:text-emerald-300 transition-colors",children:o.jsx(la,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:u.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-emerald-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-amber-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-amber-400 group-hover/stat:text-amber-300 transition-colors",children:o.jsx(ol,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:ne.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-amber-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-rose-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-rose-400 group-hover/stat:text-rose-300 transition-colors",children:o.jsx(pE,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:K.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-rose-300/60 uppercase tracking-wider",children:" "})]})]})]})})]})})]})},T7=({onBack:n})=>{const[e,t]=H.useState([]),[s,a]=H.useState(!0),[l,u]=H.useState(""),[h,p]=H.useState(null),[m,v]=H.useState(!1);H.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const z=Ln(ln(pt,"quizzes"),il("createdAt","desc")),A=(await Xn(z)).docs.map(R=>({id:R.id,...R.data()}));t(A)}catch(z){console.error("Error fetching quizzes:",z)}finally{a(!1)}},E=z=>{p({category:"Language",...z})},S=async(z,I)=>{if(z.stopPropagation(),!I){alert(":   ");return}if(window.confirm("  "))try{await nD(Xs(pt,"quizzes",I)),t(A=>A.filter(R=>R.id!==I))}catch(A){console.error("Error deleting quiz:",A),alert("   : "+A.message)}},D=(z,I)=>{h&&p({...h,[z]:I})},G=(z,I,A)=>{if(!h)return;const R=[...h.questions];R[z]={...R[z],[I]:A},p({...h,questions:R})},F=(z,I,A)=>{if(!h)return;const R=[...h.questions],P=[...R[z].options];P[I]=A,R[z]={...R[z],options:P},p({...h,questions:R})},ee=z=>{if(h&&window.confirm("      ")){const I=h.questions.filter((A,R)=>R!==z);p({...h,questions:I})}},ne=async()=>{if(!(!h||!h.id)){if(h.questions.length===0){alert("     !");return}v(!0);try{const z=Xs(pt,"quizzes",h.id);await bf(z,{title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:h.questions}),t(I=>I.map(A=>A.id===h.id?h:A)),p(null),alert("   ")}catch(z){console.error("Error updating quiz:",z),alert("   ")}finally{v(!1)}}},K=e.filter(z=>z.title.toLowerCase().includes(l.toLowerCase())||z.teacherName&&z.teacherName.toLowerCase().includes(l.toLowerCase())),ae=z=>z?(z.toDate?z.toDate():new Date(z.seconds*1e3)).toLocaleDateString("ar-EG"):"",Z="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),o.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[o.jsx("button",{onClick:n,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]}),o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),o.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[o.jsx(ca,{className:"w-5 h-5 text-gray-300 mr-2"}),o.jsx("input",{type:"text",placeholder:"    ...",value:l,onChange:z=>u(z.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?o.jsx("div",{className:"flex justify-center items-center py-20",children:o.jsx(rn,{className:"w-10 h-10 animate-spin text-blue-400"})}):K.length===0?o.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(la,{className:"w-8 h-8 text-gray-500"})}),o.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),o.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(z=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[o.jsxs("div",{className:"p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:z.subject}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>E(z),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:o.jsx(rg,{className:"w-4 h-4"})}),o.jsx("button",{onClick:I=>S(I,z.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:o.jsx(ig,{className:"w-4 h-4"})})]})]}),o.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:z.title}),z.category&&o.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:z.category}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[o.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",z.grade]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[o.jsx(eu,{className:"w-3 h-3"}),ae(z.createdAt)]})]})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:o.jsx(jn,{className:"w-4 h-4"})}),o.jsx("p",{className:"text-sm font-bold text-gray-300",children:z.teacherName||""})]}),o.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[o.jsx(ti,{className:"w-3 h-3"}),z.questions.length," "]})]})]},z.id))})}),h&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(rg,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),o.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(Nr,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(la,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:z=>D("title",z.target.value),className:Z})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("input",{type:"text",value:h.subject,onChange:z=>D("subject",z.target.value),className:Z})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("select",{value:h.grade,onChange:z=>D("grade",z.target.value),className:Z,children:[5,6,7,8,9,10,11,12].map(z=>o.jsxs("option",{value:z,children:[" ",z]},z))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),o.jsxs("select",{value:h.category||"Language",onChange:z=>D("category",z.target.value),className:Z,children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5 text-blue-400"})," (",h.questions.length,")"]}),o.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),h.questions.map((z,I)=>o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[o.jsx("button",{onClick:()=>ee(I),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:o.jsx(ig,{className:"w-5 h-5"})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",I+1]}),o.jsx("input",{type:"text",dir:"ltr",value:z.question,onChange:A=>G(I,"question",A.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:z.options.map((A,R)=>o.jsxs("div",{className:"relative",children:[o.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[o.jsxs("span",{children:[" ",R+1]}),o.jsxs("button",{onClick:()=>G(I,"correctAnswer",R),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${z.correctAnswer===R?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[z.correctAnswer===R?o.jsx(Qn,{className:"w-3 h-3"}):o.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),z.correctAnswer===R?" ":" "]})]}),o.jsx("input",{type:"text",dir:"ltr",value:A,onChange:P=>F(I,R,P.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${z.correctAnswer===R?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},R))}),o.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[o.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),o.jsx("textarea",{value:z.explanation||"",onChange:A=>G(I,"explanation",A.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},I))]})]}),o.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[o.jsx("button",{onClick:()=>p(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),o.jsxs("button",{onClick:ne,disabled:m,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[m?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"})," "]})]})]})})]})},N7=[{id:"grammar",title:" (Grammar)",icon:la,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Zn,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:Hg,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:$g,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],S7=({onBack:n})=>{const[e,t]=H.useState("INTRO"),[s,a]=H.useState(""),[l,u]=H.useState(null),[h,p]=H.useState([]),[m,v]=H.useState(!1),[_,E]=H.useState(null);H.useEffect(()=>{window.scrollTo(0,0)},[e]);const S=()=>t("GRADES"),D=A=>{a(A),t("CATEGORIES")},G=A=>{u(A),t("TOPICS")},F=A=>{E(A),t("DETAILS")};H.useEffect(()=>{e==="TOPICS"&&s&&l&&ee()},[e,s,l]);const ee=async()=>{v(!0);try{const A=Ln(ln(pt,"explanations"),$s("grade","==",s),$s("category","==",l==null?void 0:l.id)),R=await Xn(A),P=[];R.forEach(j=>{P.push({id:j.id,...j.data()})}),P.sort((j,U)=>{var Ke,X;const M=((Ke=j.createdAt)==null?void 0:Ke.seconds)||0;return(((X=U.createdAt)==null?void 0:X.seconds)||0)-M}),p(P)}catch(A){console.error("Error fetching explanations:",A)}finally{v(!1)}},ne=A=>A?(A.toDate?A.toDate():new Date(A.seconds*1e3)).toLocaleDateString("ar-EG"):"",K=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[o.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),o.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),o.jsxs("button",{onClick:S,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",o.jsx(Lt,{className:"w-6 h-6"})]})]}),o.jsx("div",{className:"p-6 text-center relative z-10",children:o.jsxs("button",{onClick:n,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[o.jsx(yh,{className:"w-4 h-4"})," "]})})]}),ae=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>t("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>t("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(A=>o.jsxs("button",{onClick:()=>D(A.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:o.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:A})}),o.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",A]})]},A)),o.jsxs("button",{onClick:()=>D("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:o.jsx(ri,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),o.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),Z=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>t("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>t("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:" "}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N7.map(A=>o.jsx("button",{onClick:()=>G(A),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${A.color} group-hover:scale-110 transition-transform`,children:o.jsx(A.icon,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-black text-white mb-1",children:A.title}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:A.desc})]}),o.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:o.jsx(Tr,{className:"w-5 h-5 text-gray-400"})})]})},A.id))})})]}),z=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>t("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>t("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:l==null?void 0:l.title})]})}),o.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:m?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(rn,{className:"w-8 h-8 animate-spin text-emerald-400"})}):h.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),o.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",o.jsx("span",{className:"text-emerald-600 font-bold",children:l==null?void 0:l.title}),"    ."]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[o.jsx(GA,{className:"w-4 h-4"}),"     "]})]})}):o.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.map(A=>o.jsxs("button",{onClick:()=>F(A),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:o.jsx(Ks,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:A.title}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(eu,{className:"w-3 h-3"}),ne(A.createdAt)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(jn,{className:"w-3 h-3"}),A.teacherName]})]})]})]}),o.jsx(Tr,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},A.id))})})]}),I=()=>_?o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>t("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>t("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:l==null?void 0:l.title}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white truncate",children:_.title})]})}),o.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-6 md:p-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:s==="English Major - QOU"?"":` ${s}`}),o.jsx(Tr,{className:"w-4 h-4"}),o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:l==null?void 0:l.title})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",children:_.title}),o.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",children:_.content})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{className:"w-4 h-4"}),o.jsxs("span",{children:[": ",o.jsx("span",{className:"font-bold",children:_.teacherName})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(eu,{className:"w-4 h-4"}),o.jsx("span",{children:ne(_.createdAt)})]})]})]})})]}):null;return o.jsxs(o.Fragment,{children:[e==="INTRO"&&K(),e==="GRADES"&&ae(),e==="CATEGORIES"&&Z(),e==="TOPICS"&&z(),e==="DETAILS"&&I()]})},A7=[{id:"grammar",title:" (Grammar)",icon:la},{id:"reading",title:" (Reading)",icon:Zn},{id:"vocabulary",title:" (Vocabulary)",icon:Hg},{id:"writing",title:" (Writing)",icon:$g}],C7=({onBack:n,onNavigate:e})=>{const{user:t}=ks(),[s,a]=H.useState(""),[l,u]=H.useState(""),[h,p]=H.useState(""),[m,v]=H.useState(""),[_,E]=H.useState(!1),[S,D]=H.useState(!1),G=async()=>{if(!s||!l||!h||!m){alert("    ");return}E(!0);try{await Nu(ln(pt,"explanations"),{grade:s,category:l,subject:"English",title:h,content:m,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:ro()}),D(!0),setTimeout(()=>{D(!1),p(""),v("")},2e3)}catch(ee){console.error("Error saving explanation:",ee),alert("   ")}finally{E(!1)}},F=()=>{n?n():e("HOME")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:S?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(Qn,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),o.jsx("button",{onClick:()=>D(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(ee=>o.jsxs("button",{onClick:()=>a(ee.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${s===ee.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",ee]},ee)),o.jsx("button",{onClick:()=>a("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${s==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   ()"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:A7.map(ee=>o.jsxs("button",{onClick:()=>u(ee.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${l===ee.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${l===ee.id?"bg-purple-800":"bg-gray-700"}`,children:o.jsx(ee.icon,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold",children:ee.title})]},ee.id))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),o.jsx("input",{type:"text",value:h,onChange:ee=>p(ee.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("textarea",{value:m,onChange:ee=>v(ee.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),o.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:o.jsxs("button",{onClick:G,disabled:_,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[_?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"}),"  "]})})]})})})]})},I7=[{id:"handouts",title:" ",icon:Ks,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Uc,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Zn,color:"text-purple-400",bg:"bg-purple-900/20"}],R7=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],k7=({onBack:n,onNavigate:e})=>{const{user:t}=ks(),[s,a]=H.useState(""),[l,u]=H.useState(""),[h,p]=H.useState(""),[m,v]=H.useState(""),[_,E]=H.useState(""),[S,D]=H.useState(!1),[G,F]=H.useState(!1),ee=async()=>{if(!s||!l||!h||!m||!_){alert("    ");return}if(!_.startsWith("http")){alert("        http  https");return}D(!0);try{await Nu(ln(pt,"study_materials"),{grade:s,subject:l,category:h,title:m,url:_,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:ro()}),F(!0),setTimeout(()=>{F(!1),v(""),E("")},2e3)}catch(K){console.error("Error saving file:",K),alert("   ")}finally{D(!1)}},ne=()=>{n?n():e("PROFILE")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:ne,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:ne,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:G?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(Qn,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),o.jsx("button",{onClick:()=>F(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(ri,{className:"w-4 h-4 text-blue-500"})," "]}),o.jsxs("select",{value:s,onChange:K=>a(K.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(K=>o.jsxs("option",{value:K.toString(),children:[" ",K]},K)),o.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(Zn,{className:"w-4 h-4 text-blue-500"}),""]}),o.jsxs("select",{value:l,onChange:K=>u(K.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),R7.map(K=>o.jsx("option",{value:K.id,children:K.title},K.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:I7.map(K=>o.jsxs("button",{onClick:()=>p(K.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${h===K.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${K.bg}`,children:o.jsx(K.icon,{className:`w-6 h-6 ${K.color}`})}),o.jsx("span",{className:"font-bold text-sm",children:K.title})]},K.id))})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:m,onChange:K=>v(K.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(jC,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),o.jsx("input",{type:"url",value:_,onChange:K=>E(K.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),o.jsx("div",{className:"pt-4 flex justify-end",children:o.jsxs("button",{onClick:ee,disabled:S,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[S?o.jsx(rn,{className:"w-5 h-5 animate-spin"}):o.jsx(na,{className:"w-5 h-5"}),"  "]})})]})})})]})},Jp=[{text:"            .",author:" ",color:"from-emerald-400 to-teal-500",bg:"bg-emerald-500"},{text:"               .",author:"",color:"from-blue-400 to-indigo-500",bg:"bg-blue-500"},{text:"        .",author:" ",color:"from-yellow-400 to-amber-500",bg:"bg-amber-500"},{text:"     .",author:" ",color:"from-rose-400 to-pink-500",bg:"bg-rose-500"},{text:"          .",author:" ",color:"from-purple-400 to-violet-500",bg:"bg-purple-500"},{text:"     .",author:" ",color:"from-cyan-400 to-sky-500",bg:"bg-cyan-500"},{text:"     .",author:" ",color:"from-red-400 to-orange-500",bg:"bg-red-500"},{text:"     .",author:" ",color:"from-orange-400 to-yellow-500",bg:"bg-orange-500"},{text:"     .",author:" ",color:"from-teal-400 to-emerald-500",bg:"bg-teal-500"},{text:"    .",author:" ",color:"from-indigo-400 to-blue-500",bg:"bg-indigo-500"}],M7=()=>{const[n,e]=H.useState(0),[t,s]=H.useState(!0);H.useEffect(()=>{const u=setInterval(()=>{s(!1),setTimeout(()=>{e(h=>(h+1)%Jp.length),s(!0)},500)},1e4);return()=>clearInterval(u)},[]);const a=Jp[n],l=()=>{navigator.clipboard.writeText(`"${a.text}" - ${a.author}`),alert("  !")};return o.jsxs("div",{className:"py-20 bg-gradient-to-b from-slate-900 to-gray-950 relative overflow-hidden border-t border-gray-800",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-10 left-1/4 w-1 h-1 bg-white rounded-full animate-[ping_3s_infinite]"}),o.jsx("div",{className:"absolute bottom-20 right-1/3 w-1.5 h-1.5 bg-yellow-400 rounded-full animate-[ping_5s_infinite]"}),o.jsx("div",{className:"absolute top-1/2 left-10 w-2 h-2 bg-blue-400 rounded-full animate-[bounce_4s_infinite] opacity-20"}),o.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full bg-gradient-to-r ${a.color} blur-[150px] opacity-10 transition-colors duration-1000`})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-[3rem] p-8 md:p-12 text-center relative group hover:bg-white/10 transition-all duration-500 shadow-2xl",children:[o.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:o.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${a.color} flex items-center justify-center shadow-lg transform rotate-3 group-hover:rotate-0 transition-transform`,children:o.jsx(aI,{className:"w-6 h-6 text-white fill-white"})})}),o.jsxs("div",{className:`transition-all duration-500 ease-in-out transform ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[o.jsxs("h2",{className:`text-2xl md:text-4xl font-black leading-relaxed tracking-wide bg-clip-text text-transparent bg-gradient-to-r ${a.color} mb-6 drop-shadow-sm`,children:['"',a.text,'"']}),o.jsxs("p",{className:"text-gray-400 font-bold text-lg flex items-center justify-center gap-2",children:[o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`}),a.author,o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`})]})]}),o.jsx("button",{onClick:l,className:"absolute top-6 right-6 p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:" ",children:o.jsx(pI,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center gap-2 mt-10",children:Jp.map((u,h)=>o.jsx("button",{onClick:()=>{s(!1),setTimeout(()=>{e(h),s(!0)},300)},className:`h-1.5 rounded-full transition-all duration-700 ${h===n?`w-8 ${u.bg}`:"w-1.5 bg-gray-700 hover:bg-gray-500"}`},h))})]})})]})},D7=()=>o.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:o.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:o.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),o.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),o.jsx("div",{className:"relative",children:o.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),P7=({onLoginClick:n})=>o.jsxs("section",{className:"py-32 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),o.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[o.jsx(Kg,{className:"w-4 h-4"}),o.jsx("span",{children:"  "})]}),o.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",o.jsx("br",{}),o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),o.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),o.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:o.jsxs("button",{onClick:n,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",o.jsx(Lt,{className:"w-6 h-6"})]})})]})]}),j7=()=>o.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),o.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[o.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),o.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[o.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),L7=()=>{const[n,e]=H.useState([]),[t,s]=H.useState(!0),[a,l]=H.useState(0);H.useEffect(()=>{(async()=>{try{const E=Ln(ln(pt,"quizzes"),il("createdAt","desc"),eh(2)),S=Ln(ln(pt,"study_materials"),il("createdAt","desc"),eh(2)),D=Ln(ln(pt,"explanations"),il("createdAt","desc"),eh(2)),G=Ln(ln(pt,"announcements"),il("createdAt","desc"),eh(2)),[F,ee,ne,K]=await Promise.all([Xn(E),Xn(S),Xn(D),Xn(G)]),ae=[];K.forEach(Z=>{const z=Z.data();ae.push({id:Z.id,type:"general",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),F.forEach(Z=>{const z=Z.data();ae.push({id:Z.id,type:"quiz",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ee.forEach(Z=>{const z=Z.data();ae.push({id:Z.id,type:"file",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ne.forEach(Z=>{const z=Z.data();ae.push({id:Z.id,type:"explanation",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ae.sort((Z,z)=>{var R,P;const I=((R=Z.date)==null?void 0:R.seconds)||0;return(((P=z.date)==null?void 0:P.seconds)||0)-I}),e(ae.slice(0,10))}catch(E){console.error("Error fetching announcements:",E)}finally{s(!1)}})()},[]),H.useEffect(()=>{if(n.length<=1)return;const _=setInterval(()=>{l(E=>(E+1)%n.length)},4e3);return()=>clearInterval(_)},[n.length]);const u=_=>_?(_.toDate?_.toDate():new Date(_.seconds*1e3)).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit"}):"",h=_=>{switch(_){case"quiz":return o.jsx(Zn,{className:"w-3 h-3 text-yellow-400"});case"file":return o.jsx(Ks,{className:"w-3 h-3 text-blue-400"});case"explanation":return o.jsx(nu,{className:"w-3 h-3 text-purple-400"});case"general":return o.jsx(qA,{className:"w-3 h-3 text-red-400"});default:return o.jsx(Bc,{className:"w-3 h-3 text-emerald-400"})}},p=_=>{switch(_){case"quiz":return"";case"file":return"";case"explanation":return"";case"general":return"";default:return""}};if(t||n.length===0)return null;const m=n[a],v=[...n,...n,...n];return o.jsxs("div",{className:"w-full bg-gray-900 border-t border-b border-emerald-900/30 relative overflow-hidden py-2",dir:"rtl",children:[o.jsxs("div",{className:"md:hidden flex items-center justify-between px-3 h-12",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-emerald-900/20 text-emerald-400 px-2 py-1 rounded-lg text-[10px] font-bold border border-emerald-500/20 shrink-0 ml-2",children:[o.jsx(Bc,{className:"w-3 h-3"}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsxs("div",{className:"flex items-center gap-3 animate-fade-in w-full",children:[o.jsx("div",{className:"shrink-0 pt-1",children:h(m.type)}),o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 justify-center gap-0.5",children:[o.jsx("span",{className:"text-xs font-bold text-gray-200 truncate block w-full",children:m.title}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 w-full",children:[o.jsxs("span",{className:"truncate flex items-center gap-1",children:[o.jsx(jn,{className:"w-3 h-3"})," ",m.teacherName]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"whitespace-nowrap font-mono",children:u(m.date)})]})]})]},m.id)})]}),o.jsxs("div",{className:"hidden md:flex items-center relative z-10 h-10",children:[o.jsx("div",{className:"absolute right-0 z-20 h-full flex items-center pr-4 pl-6 bg-gradient-to-l from-gray-900 via-gray-900 to-transparent",children:o.jsxs("div",{className:"flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm",children:[o.jsx(Bc,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]})}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsx("div",{className:"whitespace-nowrap flex items-center animate-ticker pr-32 will-change-transform",children:v.map((_,E)=>o.jsxs("div",{className:"inline-flex items-center bg-gray-800 border border-gray-700 rounded-full pl-4 pr-2 py-1 gap-3 mx-3 hover:bg-gray-750 transition-colors cursor-default",children:[o.jsxs("div",{className:"bg-gray-700 rounded-full px-2 py-0.5 flex items-center gap-1.5",children:[h(_.type),o.jsx("span",{className:"text-[10px] font-bold text-emerald-400",children:p(_.type)})]}),o.jsx("span",{className:"text-xs text-gray-200 font-bold",children:_.title}),o.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-600 pr-3 mr-1 text-gray-400",children:[o.jsx(jn,{className:"w-3 h-3"}),o.jsx("span",{className:"text-[10px] font-medium",children:_.teacherName})]}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono border-r border-gray-600 pr-2 mr-1",children:u(_.date)})]},`${_.id}-${E}`))})})]}),o.jsx("style",{children:`
            .animate-ticker {
                animation: ticker 80s linear infinite;
            }
            @keyframes ticker {
                0% { transform: translateX(0); }
                100% { transform: translateX(50%); } 
            }
            .animate-ticker:hover {
                animation-play-state: paused;
            }
        `})]})},q2=()=>{const n=H.useRef(null);return H.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,a=window.innerWidth,l=window.innerHeight;const u=a<768?150:400,h=.1,p=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=a,e.height=l;const m=[];for(let E=0;E<u;E++)m.push({x:Math.random()*a,y:Math.random()*l,z:Math.random()*a,size:Math.random()*2,color:p[Math.floor(Math.random()*p.length)],alpha:Math.random()});const v=()=>{a=window.innerWidth,l=window.innerHeight,e.width=a,e.height=l};window.addEventListener("resize",v);const _=()=>{t.clearRect(0,0,a,l),m.forEach(E=>{Math.random()>.99&&(E.alpha=Math.random()),E.y-=h*(E.size*.5),E.y<0&&(E.y=l,E.x=Math.random()*a),t.beginPath(),t.fillStyle=`rgba(${E.color}, ${E.alpha})`,t.arc(E.x,E.y,E.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),o.jsx("canvas",{ref:n,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},V7=({onBack:n})=>{const e=[{icon:gl,title:" ",desc:"              ."},{icon:bI,title:" 24/7",desc:"                 ."},{icon:$h,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Ks,title:" ",desc:"           ."}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx(q2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[o.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[o.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),o.jsx(sa,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),o.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),o.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),o.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:o.jsx(Yg,{className:"w-8 h-8 text-blue-400"})})," "]}),o.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[o.jsx("p",{children:'  ""         .                    .'}),o.jsxs("p",{children:["       ",o.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:o.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),o.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(Qn,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),o.jsx("div",{className:"mt-16 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",o.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},U7=({onBack:n,onLoginRequest:e})=>{const{user:t}=ks(),[s,a]=H.useState("SUBJECT_SELECT"),[l,u]=H.useState(""),[h,p]=H.useState(""),[m,v]=H.useState([]),[_,E]=H.useState(0),[S,D]=H.useState([]),[G,F]=H.useState(!1),[ee,ne]=H.useState(0),[K,ae]=H.useState(!1),[Z,z]=H.useState(!1),[I,A]=H.useState(!1),[R,P]=H.useState(null);H.useEffect(()=>{window.scrollTo(0,0)},[s]),H.useEffect(()=>{if(s!=="TESTING")return;const J=()=>{ne(he=>{const Ae=he+1;return Ae===1?ae(!0):Ae>=2&&(ae(!1),z(!0)),Ae})},V=()=>{document.hidden&&J()},re=he=>{(he.key==="PrintScreen"||he.ctrlKey&&he.key==="p"||he.metaKey&&he.shiftKey)&&(he.preventDefault(),J())};return document.addEventListener("visibilitychange",V),window.addEventListener("keydown",re),()=>{document.removeEventListener("visibilitychange",V),window.removeEventListener("keydown",re)}},[s]);const j=J=>{if(!t){e();return}u(J),a("GRADE_SELECT")},U=async J=>{p(J),a("TESTING"),F(!0),ne(0);try{const V=await c7(J);v(V),D(new Array(V.length).fill(-1))}catch(V){console.error(V),alert("       "),a("GRADE_SELECT")}finally{F(!1)}},M=J=>{const V=[...S];V[_]=J,D(V),setTimeout(()=>{_<m.length-1?E(re=>re+1):X(V)},400)},$e=()=>{A(!1),a("GRADE_SELECT")},Ke=()=>{z(!1),a("GRADE_SELECT")},X=async J=>{a("ANALYZING");const V={Grammar:{correct:0,total:0},Vocabulary:{correct:0,total:0},Reading:{correct:0,total:0},Writing:{correct:0,total:0}};let re=0;m.forEach((ze,ht)=>{const at=J[ht]===ze.correctAnswer;at&&re++;const Ut=ze.skill||"Grammar";V[Ut]&&(V[Ut].total++,at&&V[Ut].correct++)});const he={Grammar:V.Grammar.total?Math.round(V.Grammar.correct/V.Grammar.total*100):0,Vocabulary:V.Vocabulary.total?Math.round(V.Vocabulary.correct/V.Vocabulary.total*100):0,Reading:V.Reading.total?Math.round(V.Reading.correct/V.Reading.total*100):0,Writing:V.Writing.total?Math.round(V.Writing.correct/V.Writing.total*100):0},Ae=[],Ie=[],Ye=[];Object.entries(he).forEach(([ze,ht])=>{ht>=75?Ae.push(ze):ht<50&&(Ie.push(ze),ze==="Grammar"&&Ye.push("     ."),ze==="Vocabulary"&&Ye.push("       ."),ze==="Reading"&&Ye.push("      ."),ze==="Writing"&&Ye.push("      ."))}),Ie.length===0&&Ye.push(" !     .");const je=Math.round(re/m.length*100),gn={id:Date.now().toString(),date:new Date().toISOString(),subject:l,grade:h,score:je,totalQuestions:m.length,skillsAnalysis:he,strengths:Ae,weaknesses:Ie,recommendations:Ye};if(P(gn),t)try{const ze=Xs(pt,"users",t.uid);await bf(ze,{aptitudeResults:rD(gn)})}catch(ze){console.error("Error saving aptitude result:",ze)}setTimeout(()=>{a("RESULT")},2e3)},fe=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:" "}),o.jsx("p",{className:"text-gray-400",children:"      "})]}),o.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.jsxs("button",{onClick:()=>j("English"),className:"bg-gray-900 border-2 border-emerald-500/50 p-6 rounded-3xl hover:scale-[1.02] transition-all group relative overflow-hidden flex flex-col items-center justify-center",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/10 rounded-full -mr-10 -mt-10 group-hover:bg-emerald-500/20 transition-colors"}),o.jsx("div",{className:"w-20 h-20 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-4 text-emerald-400",children:o.jsx(Hg,{className:"w-10 h-10"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"English Language"})]})})]}),Te=()=>o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in-up",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-3",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[[9,10,11,12].map(J=>o.jsxs("button",{onClick:()=>U(J.toString()),className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 flex items-center justify-center text-blue-400 group-hover:bg-blue-900/30 transition-colors",children:o.jsx(ri,{className:"w-6 h-6"})}),o.jsxs("span",{className:"font-black text-xl text-white",children:[" ",J]})]}),o.jsx(Lt,{className:"w-5 h-5 text-gray-600 group-hover:text-white transform group-hover:translate-x-1 transition-all"})]},J)),o.jsxs("button",{onClick:()=>U("General"),className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-indigo-900 to-purple-900 p-6 rounded-2xl border border-indigo-500/50 hover:border-indigo-400 hover:shadow-lg transition-all group flex items-center justify-between relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),o.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-white/10 flex items-center justify-center text-white shadow-inner",children:o.jsx(gl,{className:"w-7 h-7"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"font-black text-xl text-white",children:"  "}),o.jsx("p",{className:"text-xs text-indigo-200 mt-1",children:"  (  B2+)"})]})]}),o.jsx(Lt,{className:"w-5 h-5 text-white transform group-hover:translate-x-1 transition-all relative z-10"})]}),o.jsxs("div",{className:"col-span-1 sm:col-span-2 mt-4 pt-4 border-t border-white/5",children:[o.jsx("p",{className:"text-center text-xs text-gray-500 mb-4",children:" "}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[5,6,7,8].map(J=>o.jsx("button",{onClick:()=>U(J.toString()),className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800 hover:border-gray-600 transition-all text-center",children:o.jsxs("span",{className:"font-bold text-gray-400 text-sm",children:[" ",J]})},J))})]})]})]}),Ve=()=>{if(G)return o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-6 relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-500/30 border-t-emerald-500 animate-spin"}),o.jsx(gl,{className:"w-10 h-10 text-emerald-400 animate-pulse"})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"    "}),o.jsx("p",{className:"text-gray-400 text-sm max-w-xs mx-auto mb-2",children:"      ..."}),o.jsx("p",{className:"text-xs text-emerald-500/80 font-medium bg-emerald-900/10 px-3 py-1 rounded-full animate-pulse",children:"      "})]});const J=m[_],V=(_+1)/m.length*100;return o.jsxs("div",{className:"fixed inset-0 bg-gray-950 z-50 flex flex-col select-none",style:{userSelect:"none"},children:[K&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-500 rounded-2xl p-6 max-w-sm text-center shadow-2xl",children:[o.jsx(sg,{className:"w-16 h-16 mx-auto text-red-200 mb-4"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" !"}),o.jsx("p",{className:"text-red-100 text-sm mb-6",children:"          ."}),o.jsx("button",{onClick:()=>ae(!1),className:"bg-white text-red-900 px-6 py-2 rounded-lg font-bold w-full",children:""})]})}),Z&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/90 backdrop-blur-xl",children:o.jsxs("div",{className:"bg-gray-900 border-2 border-red-600 rounded-3xl p-8 max-w-sm text-center shadow-2xl",children:[o.jsx("div",{className:"w-20 h-20 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-600",children:o.jsx(sg,{className:"w-10 h-10 text-red-500"})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"   "}),o.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"      ."}),o.jsx("button",{onClick:Ke,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-xl font-bold w-full transition-colors",children:" "})]})}),I&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-6 max-w-sm text-center shadow-xl",children:[o.jsx(su,{className:"w-12 h-12 mx-auto text-yellow-500 mb-4"}),o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"     ."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:$e,className:"flex-1 bg-red-600 text-white py-2 rounded-lg font-bold",children:" "}),o.jsx("button",{onClick:()=>A(!1),className:"flex-1 bg-gray-700 text-white py-2 rounded-lg font-bold",children:""})]})]})}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(tu,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-mono text-sm bg-emerald-900/20 px-4 py-1.5 rounded-full border border-emerald-900/50",children:[o.jsx(Bh,{className:"w-4 h-4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[_+1," / ",m.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${V}%`}})})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center p-6 overflow-y-auto max-w-3xl mx-auto w-full",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:"ltr",children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:["  - ",l]}),o.jsx("div",{className:"bg-blue-900/30 p-1.5 rounded-lg shadow-sm border border-blue-800/50",children:o.jsx("span",{className:"text-xs font-bold text-blue-300 px-2",children:J.skill||"General"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[J.passageContent&&o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"bg-blue-900/20 p-5 rounded-2xl border border-blue-800 text-left max-h-[35vh] overflow-y-auto custom-scrollbar",children:o.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-medium text-base leading-relaxed break-words",children:J.passageContent})})}),o.jsx("h3",{className:"text-lg md:text-2xl font-black text-white leading-relaxed mb-8 text-left break-words",children:J.question}),o.jsx("div",{className:"space-y-3",dir:"ltr",children:J.options.map((re,he)=>o.jsxs("button",{onClick:()=>M(he),className:`w-full p-4 rounded-xl border-2 text-left font-medium transition-all hover:scale-[1.01] active:scale-[0.99] flex items-center justify-between group ${S[_]===he?"border-emerald-500 bg-emerald-900/30 text-emerald-100 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 text-gray-300 shadow-sm"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("span",{className:`inline-flex w-8 h-8 rounded-full border-2 text-sm font-bold items-center justify-center shrink-0 transition-colors ${S[_]===he?"border-emerald-500 bg-emerald-600 text-white":"border-gray-600 text-gray-500 group-hover:border-gray-400"}`,children:String.fromCharCode(65+he)}),o.jsx("span",{className:"break-words",children:re})]}),S[_]===he&&o.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full shadow-sm animate-fade-in shrink-0"})]},he))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end opacity-50 pointer-events-none",children:o.jsxs("button",{className:"bg-gray-800 text-gray-500 px-6 py-3 rounded-xl font-bold flex items-center gap-2",children:["  ",o.jsx(Lt,{className:"w-4 h-4"})]})})]})]})},Le=()=>o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"mb-8 relative",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full animate-pulse"}),o.jsx(QA,{className:"w-20 h-20 text-blue-400 relative z-10 animate-bounce"})]}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"    ..."})]}),O=()=>R?o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in pb-20",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"inline-block p-6 rounded-full bg-gray-800 border border-gray-700 mb-4 shadow-lg",children:o.jsxs("div",{className:`text-5xl font-black ${R.score>=75?"text-emerald-400":R.score>=50?"text-yellow-400":"text-red-400"}`,children:[R.score,"%"]})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Object.entries(R.skillsAnalysis).map(([J,V],re)=>{const he=V;return o.jsxs("div",{className:"bg-gray-900 p-5 rounded-2xl border border-gray-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-gray-300 font-bold",children:J}),o.jsxs("span",{className:`text-sm font-black ${he>=70?"text-green-400":he>=40?"text-yellow-400":"text-red-400"}`,children:[he,"%"]})]}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:o.jsx("div",{className:`h-full rounded-full ${he>=70?"bg-green-500":he>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${he}%`}})})]},re)})}),o.jsxs("div",{className:"space-y-6",children:[R.strengths.length>0&&o.jsxs("div",{className:"bg-emerald-900/10 border border-emerald-500/20 p-6 rounded-2xl",children:[o.jsxs("h3",{className:"font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[o.jsx(II,{className:"w-5 h-5"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:R.strengths.map((J,V)=>o.jsx("span",{className:"bg-emerald-900/40 text-emerald-200 px-3 py-1 rounded-lg text-sm font-medium border border-emerald-500/30",children:J},V))})]}),R.recommendations.length>0&&o.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-2xl shadow-lg",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Yg,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsx("ul",{className:"space-y-3",children:R.recommendations.map((J,V)=>o.jsxs("li",{className:"flex items-start gap-3 text-gray-300 text-sm leading-relaxed bg-gray-800 p-3 rounded-xl border border-gray-700",children:[o.jsx(su,{className:"w-4 h-4 text-yellow-500 shrink-0 mt-0.5"}),J]},V))})]})]}),o.jsx("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl mt-8 shadow-lg transition-all",children:"  "})]}):null;return o.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100",children:[s!=="TESTING"&&o.jsxs("div",{className:"p-4 flex items-center justify-between bg-gray-900/50 backdrop-blur-md sticky top-0 z-30 border-b border-white/5",children:[o.jsx("button",{onClick:n,className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold text-sm text-gray-300",children:s==="SUBJECT_SELECT"?" ":s==="GRADE_SELECT"?" ":""}),o.jsx("div",{className:"w-9"})]}),s==="SUBJECT_SELECT"&&fe(),s==="GRADE_SELECT"&&Te(),s==="TESTING"&&Ve(),s==="ANALYZING"&&Le(),s==="RESULT"&&O()]})},O7=({onNavigate:n,onLoginRequest:e})=>{const{user:t}=ks(),s=()=>{t?n("APTITUDE_TEST"):e()};return o.jsx("section",{className:"py-20 bg-gray-950 relative overflow-hidden border-t border-white/5",children:o.jsx("div",{className:"max-w-5xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 backdrop-blur-md rounded-[3rem] p-8 md:p-12 border border-indigo-500/20 shadow-2xl flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-[100px] -mr-20 -mt-20 group-hover:bg-indigo-600/30 transition-colors"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[100px] -ml-20 -mb-20 group-hover:bg-purple-600/30 transition-colors"}),o.jsxs("div",{className:"flex-1 text-center md:text-right",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-sm font-bold mb-6",children:[o.jsx(gl,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6 leading-tight",children:["  ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:""})]}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed font-medium mb-8",children:"                          ."}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:o.jsxs("button",{onClick:s,className:"bg-white text-indigo-950 px-8 py-4 rounded-2xl font-black text-lg hover:bg-indigo-50 transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2 group/btn",children:["  ",o.jsx(Tr,{className:"w-5 h-5 group-hover/btn:-translate-x-1 transition-transform"})]})})]}),o.jsx("div",{className:"w-full md:w-1/3 flex justify-center relative",children:o.jsxs("div",{className:"relative w-64 h-64",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full opacity-20 blur-2xl animate-pulse"}),o.jsxs("div",{className:"relative bg-gray-900 rounded-3xl border border-indigo-500/30 p-6 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-all duration-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx(sa,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(sa,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(sa,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),o.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-1 rounded",children:" "})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-3/4"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-full"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-5/6"})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx(gl,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:" "}),o.jsx("div",{className:"text-sm font-bold text-white",children:" "})]})]})]})]})})]})})})};function q7(){const[n,e]=H.useState("HOME"),[t,s]=H.useState(!1),[a,l]=H.useState(!1),u=H.useRef({}),h=H.useRef(!1),{logout:p}=ks();H.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const _=E=>{E.state&&E.state.view?(h.current=!0,e(E.state.view)):(h.current=!0,e("HOME"))};return window.addEventListener("popstate",_),()=>window.removeEventListener("popstate",_)},[]),H.useEffect(()=>{if(h.current){const _=u.current[n]||0;setTimeout(()=>window.scrollTo(0,_),0)}else window.scrollTo(0,0)},[n]);const m=_=>{_!==n&&(u.current[n]=window.scrollY,h.current=!1,window.history.pushState({view:_},"",""),e(_))},v=async()=>{l(!0),setTimeout(async()=>{await p(),l(!1),m("HOME")},1e3)};return o.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[n==="HOME"&&o.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[o.jsx(q2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),a&&o.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:o.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx(CP,{onLoginClick:()=>s(!0),onNavigate:m,onLogoutClick:v}),o.jsxs("main",{className:"flex-grow",children:[n==="HOME"&&o.jsxs(o.Fragment,{children:[o.jsx(IP,{onStartQuiz:()=>m("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:m}),o.jsx(kP,{onNavigate:m}),o.jsx(L7,{}),o.jsx(E7,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(O7,{onNavigate:m,onLoginRequest:()=>s(!0)}),o.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),o.jsx(D7,{}),o.jsx(P7,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(j7,{}),o.jsx(M7,{})]}),n==="ABOUT_PLATFORM"&&o.jsx(v7,{onBack:()=>m("HOME")}),n==="PLATFORM_DEFINITION"&&o.jsx(V7,{onBack:()=>m("HOME")}),n==="SERVICES"&&o.jsx(b7,{onBack:()=>m("HOME")}),n==="TEACHER_CV"&&o.jsx(x7,{onBack:()=>m("HOME")}),n==="PROFILE"&&o.jsx(f7,{onNavigate:m}),n==="TEACHER_DASHBOARD"&&o.jsx(DP,{}),n==="QUESTION_BANK"&&o.jsx(T7,{onBack:()=>m("HOME")}),n==="TEACHER_EXPLANATIONS"&&o.jsx(C7,{onNavigate:m,onBack:()=>m("PROFILE")}),n==="TEACHER_UPLOAD_FILES"&&o.jsx(k7,{onNavigate:m,onBack:()=>m("PROFILE")}),n==="QUIZZES"&&o.jsx(p7,{onBack:()=>m("HOME")}),n==="LESSONS"&&o.jsx(_7,{onBack:()=>m("HOME")}),n==="LESSONS_EXPLANATIONS"&&o.jsx(S7,{onBack:()=>m("HOME")}),n==="CONTACT_TEACHER"&&o.jsx(w7,{onBack:()=>m("HOME")}),n==="APTITUDE_TEST"&&o.jsx(U7,{onBack:()=>m("HOME"),onLoginRequest:()=>s(!0)})]}),o.jsx(MP,{isOpen:t,onClose:()=>s(!1)}),o.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),o.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const z2=document.getElementById("root");if(!z2)throw new Error("Could not find root element to mount to");const z7=CA.createRoot(z2);z7.render(o.jsx(oE.StrictMode,{children:o.jsx(AP,{children:o.jsx(q7,{})})}));
