(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function I2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vg={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function u4(){if(ew)return pu;ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var tw;function d4(){return tw||(tw=1,Vg.exports=u4()),Vg.exports}var i=d4(),Pg={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function h4(){if(nw)return qe;nw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function R(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,B={};function de(C,U,P){this.props=C,this.context=U,this.refs=B,this.updater=P||M}de.prototype.isReactComponent={},de.prototype.setState=function(C,U){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,U,"setState")},de.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ce(){}ce.prototype=de.prototype;function oe(C,U,P){this.props=C,this.context=U,this.refs=B,this.updater=P||M}var we=oe.prototype=new ce;we.constructor=oe,W(we,de.prototype),we.isPureReactComponent=!0;var ge=Array.isArray;function G(){}var S={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function A(C,U,P){var ee=P.ref;return{$$typeof:r,type:C,key:U,ref:ee!==void 0?ee:null,props:P}}function O(C,U){return A(C.type,U,C.props)}function D(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function z(C){var U={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(P){return U[P]})}var I=/\/+/g;function he(C,U){return typeof C=="object"&&C!==null&&C.key!=null?z(""+C.key):U.toString(36)}function fe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(G,G):(C.status="pending",C.then(function(U){C.status==="pending"&&(C.status="fulfilled",C.value=U)},function(U){C.status==="pending"&&(C.status="rejected",C.reason=U)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function F(C,U,P,ee,be){var Re=typeof C;(Re==="undefined"||Re==="boolean")&&(C=null);var ze=!1;if(C===null)ze=!0;else switch(Re){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(C.$$typeof){case r:case e:ze=!0;break;case v:return ze=C._init,F(ze(C._payload),U,P,ee,be)}}if(ze)return be=be(C),ze=ee===""?"."+he(C,0):ee,ge(be)?(P="",ze!=null&&(P=ze.replace(I,"$&/")+"/"),F(be,U,P,"",function(Et){return Et})):be!=null&&(D(be)&&(be=O(be,P+(be.key==null||C&&C.key===be.key?"":(""+be.key).replace(I,"$&/")+"/")+ze)),U.push(be)),1;ze=0;var it=ee===""?".":ee+":";if(ge(C))for(var ke=0;ke<C.length;ke++)ee=C[ke],Re=it+he(ee,ke),ze+=F(ee,U,P,Re,be);else if(ke=R(C),typeof ke=="function")for(C=ke.call(C),ke=0;!(ee=C.next()).done;)ee=ee.value,Re=it+he(ee,ke++),ze+=F(ee,U,P,Re,be);else if(Re==="object"){if(typeof C.then=="function")return F(fe(C),U,P,ee,be);throw U=String(C),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ze}function le(C,U,P){if(C==null)return C;var ee=[],be=0;return F(C,ee,"","",function(Re){return U.call(P,Re,be++)}),ee}function Y(C){if(C._status===-1){var U=C._result;U=U(),U.then(function(P){(C._status===0||C._status===-1)&&(C._status=1,C._result=P)},function(P){(C._status===0||C._status===-1)&&(C._status=2,C._result=P)}),C._status===-1&&(C._status=0,C._result=U)}if(C._status===1)return C._result.default;throw C._result}var re=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ee={map:le,forEach:function(C,U,P){le(C,function(){U.apply(this,arguments)},P)},count:function(C){var U=0;return le(C,function(){U++}),U},toArray:function(C){return le(C,function(U){return U})||[]},only:function(C){if(!D(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return qe.Activity=w,qe.Children=Ee,qe.Component=de,qe.Fragment=t,qe.Profiler=l,qe.PureComponent=oe,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,qe.__COMPILER_RUNTIME={__proto__:null,c:function(C){return S.H.useMemoCache(C)}},qe.cache=function(C){return function(){return C.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(C,U,P){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ee=W({},C.props),be=C.key;if(U!=null)for(Re in U.key!==void 0&&(be=""+U.key),U)!j.call(U,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&U.ref===void 0||(ee[Re]=U[Re]);var Re=arguments.length-2;if(Re===1)ee.children=P;else if(1<Re){for(var ze=Array(Re),it=0;it<Re;it++)ze[it]=arguments[it+2];ee.children=ze}return A(C.type,be,ee)},qe.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},qe.createElement=function(C,U,P){var ee,be={},Re=null;if(U!=null)for(ee in U.key!==void 0&&(Re=""+U.key),U)j.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(be[ee]=U[ee]);var ze=arguments.length-2;if(ze===1)be.children=P;else if(1<ze){for(var it=Array(ze),ke=0;ke<ze;ke++)it[ke]=arguments[ke+2];be.children=it}if(C&&C.defaultProps)for(ee in ze=C.defaultProps,ze)be[ee]===void 0&&(be[ee]=ze[ee]);return A(C,Re,be)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(C){return{$$typeof:f,render:C}},qe.isValidElement=D,qe.lazy=function(C){return{$$typeof:v,_payload:{_status:-1,_result:C},_init:Y}},qe.memo=function(C,U){return{$$typeof:x,type:C,compare:U===void 0?null:U}},qe.startTransition=function(C){var U=S.T,P={};S.T=P;try{var ee=C(),be=S.S;be!==null&&be(P,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(G,re)}catch(Re){re(Re)}finally{U!==null&&P.types!==null&&(U.types=P.types),S.T=U}},qe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},qe.use=function(C){return S.H.use(C)},qe.useActionState=function(C,U,P){return S.H.useActionState(C,U,P)},qe.useCallback=function(C,U){return S.H.useCallback(C,U)},qe.useContext=function(C){return S.H.useContext(C)},qe.useDebugValue=function(){},qe.useDeferredValue=function(C,U){return S.H.useDeferredValue(C,U)},qe.useEffect=function(C,U){return S.H.useEffect(C,U)},qe.useEffectEvent=function(C){return S.H.useEffectEvent(C)},qe.useId=function(){return S.H.useId()},qe.useImperativeHandle=function(C,U,P){return S.H.useImperativeHandle(C,U,P)},qe.useInsertionEffect=function(C,U){return S.H.useInsertionEffect(C,U)},qe.useLayoutEffect=function(C,U){return S.H.useLayoutEffect(C,U)},qe.useMemo=function(C,U){return S.H.useMemo(C,U)},qe.useOptimistic=function(C,U){return S.H.useOptimistic(C,U)},qe.useReducer=function(C,U,P){return S.H.useReducer(C,U,P)},qe.useRef=function(C){return S.H.useRef(C)},qe.useState=function(C){return S.H.useState(C)},qe.useSyncExternalStore=function(C,U,P){return S.H.useSyncExternalStore(C,U,P)},qe.useTransition=function(){return S.H.useTransition()},qe.version="19.2.0",qe}var sw;function ax(){return sw||(sw=1,Pg.exports=h4()),Pg.exports}var V=ax();const C2=I2(V);var Lg={exports:{}},xu={},zg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function f4(){return rw||(rw=1,(function(r){function e(F,le){var Y=F.length;F.push(le);e:for(;0<Y;){var re=Y-1>>>1,Ee=F[re];if(0<l(Ee,le))F[re]=le,F[Y]=Ee,Y=re;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var le=F[0],Y=F.pop();if(Y!==le){F[0]=Y;e:for(var re=0,Ee=F.length,C=Ee>>>1;re<C;){var U=2*(re+1)-1,P=F[U],ee=U+1,be=F[ee];if(0>l(P,Y))ee<Ee&&0>l(be,P)?(F[re]=be,F[ee]=Y,re=ee):(F[re]=P,F[U]=Y,re=U);else if(ee<Ee&&0>l(be,Y))F[re]=be,F[ee]=Y,re=ee;else break e}}return le}function l(F,le){var Y=F.sortIndex-le.sortIndex;return Y!==0?Y:F.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],v=1,w=null,N=3,R=!1,M=!1,W=!1,B=!1,de=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function we(F){for(var le=t(x);le!==null;){if(le.callback===null)s(x);else if(le.startTime<=F)s(x),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(x)}}function ge(F){if(W=!1,we(F),!M)if(t(g)!==null)M=!0,G||(G=!0,z());else{var le=t(x);le!==null&&fe(ge,le.startTime-F)}}var G=!1,S=-1,j=5,A=-1;function O(){return B?!0:!(r.unstable_now()-A<j)}function D(){if(B=!1,G){var F=r.unstable_now();A=F;var le=!0;try{e:{M=!1,W&&(W=!1,ce(S),S=-1),R=!0;var Y=N;try{t:{for(we(F),w=t(g);w!==null&&!(w.expirationTime>F&&O());){var re=w.callback;if(typeof re=="function"){w.callback=null,N=w.priorityLevel;var Ee=re(w.expirationTime<=F);if(F=r.unstable_now(),typeof Ee=="function"){w.callback=Ee,we(F),le=!0;break t}w===t(g)&&s(g),we(F)}else s(g);w=t(g)}if(w!==null)le=!0;else{var C=t(x);C!==null&&fe(ge,C.startTime-F),le=!1}}break e}finally{w=null,N=Y,R=!1}le=void 0}}finally{le?z():G=!1}}}var z;if(typeof oe=="function")z=function(){oe(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,he=I.port2;I.port1.onmessage=D,z=function(){he.postMessage(null)}}else z=function(){de(D,0)};function fe(F,le){S=de(function(){F(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(F){switch(N){case 1:case 2:case 3:var le=3;break;default:le=N}var Y=N;N=le;try{return F()}finally{N=Y}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(F,le){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=N;N=F;try{return le()}finally{N=Y}},r.unstable_scheduleCallback=function(F,le,Y){var re=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,F){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Y+Ee,F={id:v++,callback:le,priorityLevel:F,startTime:Y,expirationTime:Ee,sortIndex:-1},Y>re?(F.sortIndex=Y,e(x,F),t(g)===null&&F===t(x)&&(W?(ce(S),S=-1):W=!0,fe(ge,Y-re))):(F.sortIndex=Ee,e(g,F),M||R||(M=!0,G||(G=!0,z()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var le=N;return function(){var Y=N;N=le;try{return F.apply(this,arguments)}finally{N=Y}}}})(Ug)),Ug}var aw;function m4(){return aw||(aw=1,zg.exports=f4()),zg.exports}var Bg={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function g4(){if(iw)return Rn;iw=1;var r=ax();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(g,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,v)},Rn.flushSync=function(g){var x=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=v,s.d.f()}},Rn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},Rn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Rn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,R=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:R}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:R,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Rn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},Rn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Rn.preloadModule=function(g,x){if(typeof g=="string")if(x){var v=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},Rn.requestFormReset=function(g){s.d.r(g)},Rn.unstable_batchedUpdates=function(g,x){return g(x)},Rn.useFormState=function(g,x,v){return d.H.useFormState(g,x,v)},Rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Rn.version="19.2.0",Rn}var lw;function p4(){if(lw)return Bg.exports;lw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bg.exports=g4(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function x4(){if(ow)return xu;ow=1;var r=m4(),e=ax(),t=p4();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,E=m.child;E;){if(E===o){b=!0,o=m,u=p;break}if(E===u){b=!0,u=m,o=p;break}E=E.sibling}if(!b){for(E=p.child;E;){if(E===o){b=!0,o=p,u=m;break}if(E===u){b=!0,u=p,o=m;break}E=E.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function v(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=v(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function he(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case de:return"Profiler";case B:return"StrictMode";case ge:return"Suspense";case G:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case oe:return n.displayName||"Context";case ce:return(n._context.displayName||"Context")+".Consumer";case we:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return a=n.displayName||null,a!==null?a:he(n.type)||"Memo";case j:a=n._payload,n=n._init;try{return he(n(a))}catch{}}return null}var fe=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},re=[],Ee=-1;function C(n){return{current:n}}function U(n){0>Ee||(n.current=re[Ee],re[Ee]=null,Ee--)}function P(n,a){Ee++,re[Ee]=n.current,n.current=a}var ee=C(null),be=C(null),Re=C(null),ze=C(null);function it(n,a){switch(P(Re,a),P(be,n),P(ee,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?N1(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=N1(a),n=E1(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}U(ee),P(ee,n)}function ke(){U(ee),U(be),U(Re)}function Et(n){n.memoizedState!==null&&P(ze,n);var a=ee.current,o=E1(a,n.type);a!==o&&(P(be,n),P(ee,o))}function pt(n){be.current===n&&(U(ee),U(be)),ze.current===n&&(U(ze),hu._currentValue=Y)}var Rt,lt;function _n(n){if(Rt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",lt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+n+lt}var ws=!1;function _s(n,a){if(!n||ws)return"";ws=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var X=Z}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(Z){X=Z}n.call(ae.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],E=p[1];if(b&&E){var k=b.split(`
`),Q=E.split(`
`);for(m=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===k.length||m===Q.length)for(u=k.length-1,m=Q.length-1;1<=u&&0<=m&&k[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(k[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||k[u]!==Q[m]){var ne=`
`+k[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=m);break}}}finally{ws=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?_n(o):""}function ar(n,a){switch(n.tag){case 26:case 27:case 5:return _n(n.type);case 16:return _n("Lazy");case 13:return n.child!==a&&a!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return _s(n.type,!1);case 11:return _s(n.type.render,!1);case 1:return _s(n.type,!0);case 31:return _n("Activity");default:return""}}function Vr(n){try{var a="",o=null;do a+=ar(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,gn=r.unstable_cancelCallback,_a=r.unstable_shouldYield,Na=r.unstable_requestPaint,Vt=r.unstable_now,Ns=r.unstable_getCurrentPriorityLevel,ir=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,Nn=r.unstable_NormalPriority,Ea=r.unstable_LowPriority,Ta=r.unstable_IdlePriority,ie=r.log,Xe=r.unstable_setDisableYieldValue,Be=null,Ye=null;function qt(n){if(typeof ie=="function"&&Xe(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Be,n)}catch{}}var nt=Math.clz32?Math.clz32:lr,Lr=Math.log,Ln=Math.LN2;function lr(n){return n>>>=0,n===0?32:31-(Lr(n)/Ln|0)|0}var Hn=256,ue=262144,_e=4194304;function Ie(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ye(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~p,u!==0?m=Ie(u):(b&=E,b!==0?m=Ie(b):o||(o=E&~n,o!==0&&(m=Ie(o))))):(E=u&~p,E!==0?m=Ie(E):b!==0?m=Ie(b):o||(o=u&~n,o!==0&&(m=Ie(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Pe(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Je(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var n=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),n}function ut(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function rt(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ft(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,k=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var ne=31-nt(o),ae=1<<ne;E[ne]=0,k[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var Z=X[ne];Z!==null&&(Z.lane&=-536870913)}o&=~ae}u!==0&&pn(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function pn(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-nt(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Di(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-nt(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function yc(n,a){var o=a&-a;return o=(o&42)!==0?1:Oi(o),(o&(n.suspendedLanes|a))!==0?0:o}function Oi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Id(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:K1(n.type))}function Bs(n,a){var o=le.p;try{return le.p=n,a()}finally{le.p=o}}var qs=Math.random().toString(36).slice(2),en="__reactFiber$"+qs,xn="__reactProps$"+qs,or="__reactContainer$"+qs,Vl="__reactEvents$"+qs,qm="__reactListeners$"+qs,Cd="__reactHandles$"+qs,Rd="__reactResources$"+qs,cr="__reactMarker$"+qs;function Pl(n){delete n[en],delete n[xn],delete n[Vl],delete n[qm],delete n[Cd]}function ur(n){var a=n[en];if(a)return a;for(var o=n.parentNode;o;){if(a=o[or]||o[en]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=R1(n);n!==null;){if(o=n[en])return o;n=R1(n)}return a}n=o,o=n.parentNode}return null}function Es(n){if(n=n[en]||n[or]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function rs(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function dr(n){var a=n[Rd];return a||(a=n[Rd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(n){n[cr]=!0}var bc=new Set,vc={};function hr(n,a){fr(n,a),fr(n+"Capture",a)}function fr(n,a){for(vc[n]=a,n=0;n<a.length;n++)bc.add(a[n])}var wc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},Nc={};function kd(n){return Ot.call(Nc,n)?!0:Ot.call(_c,n)?!1:wc.test(n)?Nc[n]=!0:(_c[n]=!0,!1)}function Ll(n,a,o){if(kd(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function as(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function nn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function yn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sa(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ec(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function xt(n){if(!n._valueTracker){var a=Sa(n)?"checked":"value";n._valueTracker=Ec(n,a,""+n[a])}}function Mi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Sa(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vi=/[\n"\\]/g;function Gn(n){return n.replace(Vi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zl(n,a,o,u,m,p,b,E){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+yn(a)):n.value!==""+yn(a)&&(n.value=""+yn(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Tc(n,b,yn(a)):o!=null?Tc(n,b,yn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+yn(E):n.removeAttribute("name")}function Dd(n,a,o,u,m,p,b,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){xt(n);return}o=o!=null?""+yn(o):"",a=a!=null?""+yn(a):o,E||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),xt(n)}function Tc(n,a,o){a==="number"&&mr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ja(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+yn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Od(n,a,o){if(a!=null&&(a=""+yn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+yn(o):""}function Aa(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(fe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=yn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),xt(n)}function $n(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var Md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||Md.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function jc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Sc(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Sc(n,p,a[p])}function Ul(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(n){return Ia.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fs(){}var Ac=null;function Ts(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ca=null,gr=null;function Pi(n){var a=Es(n);if(a&&(n=a.stateNode)){var o=n[xn]||null;e:switch(n=a.stateNode,a.type){case"input":if(zl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Gn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[xn]||null;if(!m)throw Error(s(90));zl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Mi(u)}break e;case"textarea":Od(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&ja(n,!!o.multiple,a,!1)}}}var ql=!1;function Ra(n,a,o){if(ql)return n(a,o);ql=!0;try{var u=n(a);return u}finally{if(ql=!1,(Ca!==null||gr!==null)&&(Ih(),Ca&&(a=Ca,n=gr,gr=Ca=null,Pi(a),n)))for(a=0;a<n.length;a++)Pi(n[a])}}function Hs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[xn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Li=!1;if(Ss)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){Li=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{Li=!1}var pr=null,Ic=null,zi=null;function Cc(){if(zi)return zi;var n,a=Ic,o=a.length,u,m="value"in pr?pr.value:pr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return zi=m.slice(n,1<u?1-u:void 0)}function Ui(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ur(){return!0}function Gs(){return!1}function En(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ur:Gs,this.isPropagationStopped=Gs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=En(Br),ka=w({},Br,{view:0,detail:0}),Rc=En(ka),Da,Fl,yr,Hl=w({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yr&&(yr&&n.type==="mousemove"?(Da=n.screenX-yr.screenX,Fl=n.screenY-yr.screenY):Fl=Da=0,yr=n),Da)},movementY:function(n){return"movementY"in n?n.movementY:Fl}}),kc=En(Hl),Bi=w({},Hl,{dataTransfer:0}),Pd=En(Bi),Ld=w({},ka,{relatedTarget:0}),qi=En(Ld),Dc=w({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),zd=En(Dc),Gl=w({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ud=En(Gl),Bd=w({},Br,{data:0}),br=En(Bd),qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Hd[n])?!!a[n]:!1}function Oa(){return Gd}var zn=w({},ka,{key:function(n){if(n.key){var a=qd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Ui(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oa,charCode:function(n){return n.type==="keypress"?Ui(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ui(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$d=En(zn),Kd=w({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=En(Kd),h=w({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oa}),y=En(h),_=w({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=En(_),$=w({},Hl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=En($),ve=w({},Br,{newState:0,oldState:0}),Fe=En(ve),Xt=[9,13,27,32],dt=Ss&&"CompositionEvent"in window,Pt=null;Ss&&"documentMode"in document&&(Pt=document.documentMode);var js=Ss&&"TextEvent"in window&&!Pt,vr=Ss&&(!dt||Pt&&8<Pt&&11>=Pt),$s=" ",Ks=!1;function Fi(n,a){switch(n){case"keyup":return Xt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $l(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Kl=!1;function OS(n,a){switch(n){case"compositionend":return $l(a);case"keypress":return a.which!==32?null:(Ks=!0,$s);case"textInput":return n=a.data,n===$s&&Ks?null:n;default:return null}}function MS(n,a){if(Kl)return n==="compositionend"||!dt&&Fi(n,a)?(n=Cc(),zi=Ic=pr=null,Kl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vr&&a.locale!=="ko"?null:a.data;default:return null}}var VS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!VS[n.type]:a==="textarea"}function My(n,a,o,u){Ca?gr?gr.push(u):gr=[u]:Ca=u,a=Vh(a,"onChange"),0<a.length&&(o=new xr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Oc=null,Mc=null;function PS(n){x1(n,0)}function Qd(n){var a=rs(n);if(Mi(a))return n}function Vy(n,a){if(n==="change")return a}var Py=!1;if(Ss){var Fm;if(Ss){var Hm="oninput"in document;if(!Hm){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),Hm=typeof Ly.oninput=="function"}Fm=Hm}else Fm=!1;Py=Fm&&(!document.documentMode||9<document.documentMode)}function zy(){Oc&&(Oc.detachEvent("onpropertychange",Uy),Mc=Oc=null)}function Uy(n){if(n.propertyName==="value"&&Qd(Mc)){var a=[];My(a,Mc,n,Ts(n)),Ra(PS,a)}}function LS(n,a,o){n==="focusin"?(zy(),Oc=a,Mc=o,Oc.attachEvent("onpropertychange",Uy)):n==="focusout"&&zy()}function zS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qd(Mc)}function US(n,a){if(n==="click")return Qd(a)}function BS(n,a){if(n==="input"||n==="change")return Qd(a)}function qS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var is=typeof Object.is=="function"?Object.is:qS;function Vc(n,a){if(is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ot.call(a,m)||!is(n[m],a[m]))return!1}return!0}function By(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qy(n,a){var o=By(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=By(o)}}function Fy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Fy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Hy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=mr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=mr(n.document)}return a}function Gm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var FS=Ss&&"documentMode"in document&&11>=document.documentMode,Ql=null,$m=null,Pc=null,Km=!1;function Gy(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Km||Ql==null||Ql!==mr(u)||(u=Ql,"selectionStart"in u&&Gm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pc&&Vc(Pc,u)||(Pc=u,u=Vh($m,"onSelect"),0<u.length&&(a=new xr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Ql)))}function Hi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Xl={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Qm={},$y={};Ss&&($y=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Gi(n){if(Qm[n])return Qm[n];if(!Xl[n])return n;var a=Xl[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in $y)return Qm[n]=a[o];return n}var Ky=Gi("animationend"),Qy=Gi("animationiteration"),Xy=Gi("animationstart"),HS=Gi("transitionrun"),GS=Gi("transitionstart"),$S=Gi("transitioncancel"),Yy=Gi("transitionend"),Jy=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function Qs(n,a){Jy.set(n,a),hr(a,[n])}var Xd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},As=[],Yl=0,Ym=0;function Yd(){for(var n=Yl,a=Ym=Yl=0;a<n;){var o=As[a];As[a++]=null;var u=As[a];As[a++]=null;var m=As[a];As[a++]=null;var p=As[a];if(As[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Wy(o,m,p)}}function Jd(n,a,o,u){As[Yl++]=n,As[Yl++]=a,As[Yl++]=o,As[Yl++]=u,Ym|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Jm(n,a,o,u){return Jd(n,a,o,u),Wd(n)}function $i(n,a){return Jd(n,null,null,a),Wd(n)}function Wy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-nt(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function Wd(n){if(50<au)throw au=0,ig=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Jl={};function KS(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(n,a,o,u){return new KS(n,a,o,u)}function Wm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fr(n,a){var o=n.alternate;return o===null?(o=ls(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Zy(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Zd(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")Wm(n)&&(b=1);else if(typeof n=="string")b=Wj(n,o,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=ls(31,o,a,m),n.elementType=A,n.lanes=p,n;case W:return Ki(o.children,m,p,a);case B:b=8,m|=24;break;case de:return n=ls(12,o,a,m|2),n.elementType=de,n.lanes=p,n;case ge:return n=ls(13,o,a,m),n.elementType=ge,n.lanes=p,n;case G:return n=ls(19,o,a,m),n.elementType=G,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oe:b=10;break e;case ce:b=9;break e;case we:b=11;break e;case S:b=14;break e;case j:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=ls(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function Ki(n,a,o,u){return n=ls(7,n,u,a),n.lanes=o,n}function Zm(n,a,o){return n=ls(6,n,null,a),n.lanes=o,n}function eb(n){var a=ls(18,null,null,0);return a.stateNode=n,a}function e0(n,a,o){return a=ls(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var tb=new WeakMap;function Is(n,a){if(typeof n=="object"&&n!==null){var o=tb.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Vr(a)},tb.set(n,a),a)}return{value:n,source:a,stack:Vr(a)}}var Wl=[],Zl=0,eh=null,Lc=0,Cs=[],Rs=0,Ma=null,wr=1,_r="";function Hr(n,a){Wl[Zl++]=Lc,Wl[Zl++]=eh,eh=n,Lc=a}function nb(n,a,o){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,Ma=n;var u=wr;n=_r;var m=32-nt(u)-1;u&=~(1<<m),o+=1;var p=32-nt(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,wr=1<<32-nt(a)+m|o<<m|u,_r=p+n}else wr=1<<p|o<<m|u,_r=n}function t0(n){n.return!==null&&(Hr(n,1),nb(n,1,0))}function n0(n){for(;n===eh;)eh=Wl[--Zl],Wl[Zl]=null,Lc=Wl[--Zl],Wl[Zl]=null;for(;n===Ma;)Ma=Cs[--Rs],Cs[Rs]=null,_r=Cs[--Rs],Cs[Rs]=null,wr=Cs[--Rs],Cs[Rs]=null}function sb(n,a){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,wr=a.id,_r=a.overflow,Ma=n}var Tn=null,kt=null,st=!1,Va=null,ks=!1,s0=Error(s(519));function Pa(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zc(Is(a,n)),s0}function rb(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[en]=n,a[xn]=u,o){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(o=0;o<lu.length;o++)Qe(lu[o],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Dd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Aa(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||w1(a.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=Fs),a=!0):a=!1,a||Pa(n,!0)}function ab(n){for(Tn=n.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Tn=Tn.return}}function eo(n){if(n!==Tn)return!1;if(!st)return ab(n),st=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||wg(n.type,n.memoizedProps)),o=!o),o&&kt&&Pa(n),ab(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=C1(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=C1(n)}else a===27?(a=kt,Ja(n.type)?(n=Sg,Sg=null,kt=n):kt=a):kt=Tn?Os(n.stateNode.nextSibling):null;return!0}function Qi(){kt=Tn=null,st=!1}function r0(){var n=Va;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),Va=null),n}function zc(n){Va===null?Va=[n]:Va.push(n)}var a0=C(null),Xi=null,Gr=null;function La(n,a,o){P(a0,a._currentValue),a._currentValue=o}function $r(n){n._currentValue=a0.current,U(a0)}function i0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function l0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=m;for(var k=0;k<a.length;k++)if(E.context===a[k]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),i0(p.return,o,n),u||(b=null);break e}p=E.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),i0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function to(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=m.type;is(m.pendingProps.value,b.value)||(n!==null?n.push(E):n=[E])}}else if(m===ze.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(hu):n=[hu])}m=m.return}n!==null&&l0(a,n,o,u),a.flags|=262144}function th(n){for(n=n.firstContext;n!==null;){if(!is(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Yi(n){Xi=n,Gr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Sn(n){return ib(Xi,n)}function nh(n,a){return Xi===null&&Yi(n),ib(n,a)}function ib(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Gr===null){if(n===null)throw Error(s(308));Gr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Gr=Gr.next=a;return o}var QS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},XS=r.unstable_scheduleCallback,YS=r.unstable_NormalPriority,sn={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function o0(){return{controller:new QS,data:new Map,refCount:0}}function Uc(n){n.refCount--,n.refCount===0&&XS(YS,function(){n.controller.abort()})}var Bc=null,c0=0,no=0,so=null;function JS(n,a){if(Bc===null){var o=Bc=[];c0=0,no=hg(),so={status:"pending",value:void 0,then:function(u){o.push(u)}}}return c0++,a.then(lb,lb),a}function lb(){if(--c0===0&&Bc!==null){so!==null&&(so.status="fulfilled");var n=Bc;Bc=null,no=0,so=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function WS(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ob=F.S;F.S=function(n,a){Gv=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&JS(n,a),ob!==null&&ob(n,a)};var Ji=C(null);function u0(){var n=Ji.current;return n!==null?n:It.pooledCache}function sh(n,a){a===null?P(Ji,Ji.current):P(Ji,a.pool)}function cb(){var n=u0();return n===null?null:{parent:sn._currentValue,pool:n}}var ro=Error(s(460)),d0=Error(s(474)),rh=Error(s(542)),ah={then:function(){}};function ub(n){return n=n.status,n==="fulfilled"||n==="rejected"}function db(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Fs,Fs),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,fb(n),n;default:if(typeof a.status=="string")a.then(Fs,Fs);else{if(n=It,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,fb(n),n}throw Zi=a,ro}}function Wi(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Zi=o,ro):o}}var Zi=null;function hb(){if(Zi===null)throw Error(s(459));var n=Zi;return Zi=null,n}function fb(n){if(n===ro||n===rh)throw Error(s(483))}var ao=null,qc=0;function ih(n){var a=qc;return qc+=1,ao===null&&(ao=[]),db(ao,n,a)}function Fc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function lh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function mb(n){function a(q,L){if(n){var K=q.deletions;K===null?(q.deletions=[L],q.flags|=16):K.push(L)}}function o(q,L){if(!n)return null;for(;L!==null;)a(q,L),L=L.sibling;return null}function u(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function m(q,L){return q=Fr(q,L),q.index=0,q.sibling=null,q}function p(q,L,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<L?(q.flags|=67108866,L):K):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function E(q,L,K,se){return L===null||L.tag!==6?(L=Zm(K,q.mode,se),L.return=q,L):(L=m(L,K),L.return=q,L)}function k(q,L,K,se){var De=K.type;return De===W?ne(q,L,K.props.children,se,K.key):L!==null&&(L.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===j&&Wi(De)===L.type)?(L=m(L,K.props),Fc(L,K),L.return=q,L):(L=Zd(K.type,K.key,K.props,null,q.mode,se),Fc(L,K),L.return=q,L)}function Q(q,L,K,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=e0(K,q.mode,se),L.return=q,L):(L=m(L,K.children||[]),L.return=q,L)}function ne(q,L,K,se,De){return L===null||L.tag!==7?(L=Ki(K,q.mode,se,De),L.return=q,L):(L=m(L,K),L.return=q,L)}function ae(q,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Zm(""+L,q.mode,K),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return K=Zd(L.type,L.key,L.props,null,q.mode,K),Fc(K,L),K.return=q,K;case M:return L=e0(L,q.mode,K),L.return=q,L;case j:return L=Wi(L),ae(q,L,K)}if(fe(L)||z(L))return L=Ki(L,q.mode,K,null),L.return=q,L;if(typeof L.then=="function")return ae(q,ih(L),K);if(L.$$typeof===oe)return ae(q,nh(q,L),K);lh(q,L)}return null}function X(q,L,K,se){var De=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return De!==null?null:E(q,L,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===De?k(q,L,K,se):null;case M:return K.key===De?Q(q,L,K,se):null;case j:return K=Wi(K),X(q,L,K,se)}if(fe(K)||z(K))return De!==null?null:ne(q,L,K,se,null);if(typeof K.then=="function")return X(q,L,ih(K),se);if(K.$$typeof===oe)return X(q,L,nh(q,K),se);lh(q,K)}return null}function Z(q,L,K,se,De){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(K)||null,E(L,q,""+se,De);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case R:return q=q.get(se.key===null?K:se.key)||null,k(L,q,se,De);case M:return q=q.get(se.key===null?K:se.key)||null,Q(L,q,se,De);case j:return se=Wi(se),Z(q,L,K,se,De)}if(fe(se)||z(se))return q=q.get(K)||null,ne(L,q,se,De,null);if(typeof se.then=="function")return Z(q,L,K,ih(se),De);if(se.$$typeof===oe)return Z(q,L,K,nh(L,se),De);lh(L,se)}return null}function Se(q,L,K,se){for(var De=null,ot=null,Ae=L,Ge=L=0,Ze=null;Ae!==null&&Ge<K.length;Ge++){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ct=X(q,Ae,K[Ge],se);if(ct===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ct.alternate===null&&a(q,Ae),L=p(ct,L,Ge),ot===null?De=ct:ot.sibling=ct,ot=ct,Ae=Ze}if(Ge===K.length)return o(q,Ae),st&&Hr(q,Ge),De;if(Ae===null){for(;Ge<K.length;Ge++)Ae=ae(q,K[Ge],se),Ae!==null&&(L=p(Ae,L,Ge),ot===null?De=Ae:ot.sibling=Ae,ot=Ae);return st&&Hr(q,Ge),De}for(Ae=u(Ae);Ge<K.length;Ge++)Ze=Z(Ae,q,Ge,K[Ge],se),Ze!==null&&(n&&Ze.alternate!==null&&Ae.delete(Ze.key===null?Ge:Ze.key),L=p(Ze,L,Ge),ot===null?De=Ze:ot.sibling=Ze,ot=Ze);return n&&Ae.forEach(function(ni){return a(q,ni)}),st&&Hr(q,Ge),De}function Me(q,L,K,se){if(K==null)throw Error(s(151));for(var De=null,ot=null,Ae=L,Ge=L=0,Ze=null,ct=K.next();Ae!==null&&!ct.done;Ge++,ct=K.next()){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ni=X(q,Ae,ct.value,se);if(ni===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ni.alternate===null&&a(q,Ae),L=p(ni,L,Ge),ot===null?De=ni:ot.sibling=ni,ot=ni,Ae=Ze}if(ct.done)return o(q,Ae),st&&Hr(q,Ge),De;if(Ae===null){for(;!ct.done;Ge++,ct=K.next())ct=ae(q,ct.value,se),ct!==null&&(L=p(ct,L,Ge),ot===null?De=ct:ot.sibling=ct,ot=ct);return st&&Hr(q,Ge),De}for(Ae=u(Ae);!ct.done;Ge++,ct=K.next())ct=Z(Ae,q,Ge,ct.value,se),ct!==null&&(n&&ct.alternate!==null&&Ae.delete(ct.key===null?Ge:ct.key),L=p(ct,L,Ge),ot===null?De=ct:ot.sibling=ct,ot=ct);return n&&Ae.forEach(function(c4){return a(q,c4)}),st&&Hr(q,Ge),De}function At(q,L,K,se){if(typeof K=="object"&&K!==null&&K.type===W&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var De=K.key;L!==null;){if(L.key===De){if(De=K.type,De===W){if(L.tag===7){o(q,L.sibling),se=m(L,K.props.children),se.return=q,q=se;break e}}else if(L.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===j&&Wi(De)===L.type){o(q,L.sibling),se=m(L,K.props),Fc(se,K),se.return=q,q=se;break e}o(q,L);break}else a(q,L);L=L.sibling}K.type===W?(se=Ki(K.props.children,q.mode,se,K.key),se.return=q,q=se):(se=Zd(K.type,K.key,K.props,null,q.mode,se),Fc(se,K),se.return=q,q=se)}return b(q);case M:e:{for(De=K.key;L!==null;){if(L.key===De)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){o(q,L.sibling),se=m(L,K.children||[]),se.return=q,q=se;break e}else{o(q,L);break}else a(q,L);L=L.sibling}se=e0(K,q.mode,se),se.return=q,q=se}return b(q);case j:return K=Wi(K),At(q,L,K,se)}if(fe(K))return Se(q,L,K,se);if(z(K)){if(De=z(K),typeof De!="function")throw Error(s(150));return K=De.call(K),Me(q,L,K,se)}if(typeof K.then=="function")return At(q,L,ih(K),se);if(K.$$typeof===oe)return At(q,L,nh(q,K),se);lh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(o(q,L.sibling),se=m(L,K),se.return=q,q=se):(o(q,L),se=Zm(K,q.mode,se),se.return=q,q=se),b(q)):o(q,L)}return function(q,L,K,se){try{qc=0;var De=At(q,L,K,se);return ao=null,De}catch(Ae){if(Ae===ro||Ae===rh)throw Ae;var ot=ls(29,Ae,null,q.mode);return ot.lanes=se,ot.return=q,ot}finally{}}}var el=mb(!0),gb=mb(!1),za=!1;function h0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ua(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ba(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ht&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=Wd(n),Wy(n,null,o),a}return Jd(n,u,a,o),Wd(n)}function Hc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Di(n,o)}}function m0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var g0=!1;function Gc(){if(g0){var n=so;if(n!==null)throw n}}function $c(n,a,o,u){g0=!1;var m=n.updateQueue;za=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var k=E,Q=k.next;k.next=null,b===null?p=Q:b.next=Q,b=k;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=k))}if(p!==null){var ae=m.baseState;b=0,ne=Q=k=null,E=p;do{var X=E.lane&-536870913,Z=X!==E.lane;if(Z?(We&X)===X:(u&X)===X){X!==0&&X===no&&(g0=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=n,Me=E;X=a;var At=o;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){ae=Se.call(At,ae,X);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,X=typeof Se=="function"?Se.call(At,ae,X):Se,X==null)break e;ae=w({},ae,X);break e;case 2:za=!0}}X=E.callback,X!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=Z,k=ae):ne=ne.next=Z,b|=X;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);ne===null&&(k=ae),m.baseState=k,m.firstBaseUpdate=Q,m.lastBaseUpdate=ne,p===null&&(m.shared.lanes=0),$a|=b,n.lanes=b,n.memoizedState=ae}}function pb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function xb(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)pb(o[n],a)}var io=C(null),oh=C(0);function yb(n,a){n=ta,P(oh,n),P(io,a),ta=n|a.baseLanes}function p0(){P(oh,ta),P(io,io.current)}function x0(){ta=oh.current,U(io),U(oh)}var os=C(null),Ds=null;function qa(n){var a=n.alternate;P(Yt,Yt.current&1),P(os,n),Ds===null&&(a===null||io.current!==null||a.memoizedState!==null)&&(Ds=n)}function y0(n){P(Yt,Yt.current),P(os,n),Ds===null&&(Ds=n)}function bb(n){n.tag===22?(P(Yt,Yt.current),P(os,n),Ds===null&&(Ds=n)):Fa()}function Fa(){P(Yt,Yt.current),P(os,os.current)}function cs(n){U(os),Ds===n&&(Ds=null),U(Yt)}var Yt=C(0);function ch(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Eg(o)||Tg(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kr=0,He=null,St=null,rn=null,uh=!1,lo=!1,tl=!1,dh=0,Kc=0,oo=null,ZS=0;function Gt(){throw Error(s(321))}function b0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!is(n[o],a[o]))return!1;return!0}function v0(n,a,o,u,m,p){return Kr=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=n===null||n.memoizedState===null?nv:M0,tl=!1,p=o(u,m),tl=!1,lo&&(p=wb(a,o,u,m)),vb(n),p}function vb(n){F.H=Yc;var a=St!==null&&St.next!==null;if(Kr=0,rn=St=He=null,uh=!1,Kc=0,oo=null,a)throw Error(s(300));n===null||an||(n=n.dependencies,n!==null&&th(n)&&(an=!0))}function wb(n,a,o,u){He=n;var m=0;do{if(lo&&(oo=null),Kc=0,lo=!1,25<=m)throw Error(s(301));if(m+=1,rn=St=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=sv,p=a(o,u)}while(lo);return p}function ej(){var n=F.H,a=n.useState()[0];return a=typeof a.then=="function"?Qc(a):a,n=n.useState()[0],(St!==null?St.memoizedState:null)!==n&&(He.flags|=1024),a}function w0(){var n=dh!==0;return dh=0,n}function _0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function N0(n){if(uh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}uh=!1}Kr=0,rn=St=He=null,lo=!1,Kc=dh=0,oo=null}function Un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=n:rn=rn.next=n,rn}function Jt(){if(St===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=St.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,St=n;else{if(n===null)throw He.alternate===null?Error(s(467)):Error(s(310));St=n,n={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?He.memoizedState=rn=n:rn=rn.next=n}return rn}function hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qc(n){var a=Kc;return Kc+=1,oo===null&&(oo=[]),n=db(oo,n,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?nv:M0),n}function fh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Qc(n);if(n.$$typeof===oe)return Sn(n)}throw Error(s(438,String(n)))}function E0(n){var a=null,o=He.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=hh(),He.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=O;return a.index++,o}function Qr(n,a){return typeof a=="function"?a(n):a}function mh(n){var a=Jt();return T0(a,St,n)}function T0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var E=b=null,k=null,Q=a,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(We&ae)===ae:(Kr&ae)===ae){var X=Q.revertLane;if(X===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===no&&(ne=!0);else if((Kr&X)===X){Q=Q.next,X===no&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(E=k=ae,b=p):k=k.next=ae,He.lanes|=X,$a|=X;ae=Q.action,tl&&o(p,ae),p=Q.hasEagerState?Q.eagerState:o(p,ae)}else X={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(E=k=X,b=p):k=k.next=X,He.lanes|=ae,$a|=ae;Q=Q.next}while(Q!==null&&Q!==a);if(k===null?b=p:k.next=E,!is(p,n.memoizedState)&&(an=!0,ne&&(o=so,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=k,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function S0(n){var a=Jt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);is(p,a.memoizedState)||(an=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function _b(n,a,o){var u=He,m=Jt(),p=st;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!is((St||m).memoizedState,o);if(b&&(m.memoizedState=o,an=!0),m=m.queue,I0(Tb.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,co(9,{destroy:void 0},Eb.bind(null,u,m,o,a),null),It===null)throw Error(s(349));p||(Kr&127)!==0||Nb(u,a,o)}return o}function Nb(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=He.updateQueue,a===null?(a=hh(),He.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function Eb(n,a,o,u){a.value=o,a.getSnapshot=u,Sb(a)&&jb(n)}function Tb(n,a,o){return o(function(){Sb(a)&&jb(n)})}function Sb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!is(n,o)}catch{return!0}}function jb(n){var a=$i(n,2);a!==null&&Jn(a,n,2)}function j0(n){var a=Un();if(typeof n=="function"){var o=n;if(n=o(),tl){qt(!0);try{o()}finally{qt(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:n},a}function Ab(n,a,o,u){return n.baseState=o,T0(n,St,typeof u=="function"?u:Qr)}function tj(n,a,o,u,m){if(xh(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};F.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,Ib(a,p)):(p.next=o.next,a.pending=o.next=p)}}function Ib(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=F.T,b={};F.T=b;try{var E=o(m,u),k=F.S;k!==null&&k(b,E),Cb(n,a,E)}catch(Q){A0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),F.T=p}}else try{p=o(m,u),Cb(n,a,p)}catch(Q){A0(n,a,Q)}}function Cb(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Rb(n,a,u)},function(u){return A0(n,a,u)}):Rb(n,a,o)}function Rb(n,a,o){a.status="fulfilled",a.value=o,kb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Ib(n,o)))}function A0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,kb(a),a=a.next;while(a!==u)}n.action=null}function kb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Db(n,a){return a}function Ob(n,a){if(st){var o=It.formState;if(o!==null){e:{var u=He;if(st){if(kt){t:{for(var m=kt,p=ks;m.nodeType!==8;){if(!p){m=null;break t}if(m=Os(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){kt=Os(m.nextSibling),u=m.data==="F!";break e}}Pa(u)}u=!1}u&&(a=o[0])}}return o=Un(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Db,lastRenderedState:a},o.queue=u,o=Zb.bind(null,He,u),u.dispatch=o,u=j0(!1),p=O0.bind(null,He,!1,u.queue),u=Un(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=tj.bind(null,He,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Mb(n){var a=Jt();return Vb(a,St,n)}function Vb(n,a,o){if(a=T0(n,a,Db)[0],n=mh(Qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Qc(a)}catch(b){throw b===ro?rh:b}else u=a;a=Jt();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&(He.flags|=2048,co(9,{destroy:void 0},nj.bind(null,m,o),null)),[u,p,n]}function nj(n,a){n.action=a}function Pb(n){var a=Jt(),o=St;if(o!==null)return Vb(a,o,n);Jt(),a=a.memoizedState,o=Jt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function co(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=He.updateQueue,a===null&&(a=hh(),He.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Lb(){return Jt().memoizedState}function gh(n,a,o,u){var m=Un();He.flags|=n,m.memoizedState=co(1|a,{destroy:void 0},o,u===void 0?null:u)}function ph(n,a,o,u){var m=Jt();u=u===void 0?null:u;var p=m.memoizedState.inst;St!==null&&u!==null&&b0(u,St.memoizedState.deps)?m.memoizedState=co(a,p,o,u):(He.flags|=n,m.memoizedState=co(1|a,p,o,u))}function zb(n,a){gh(8390656,8,n,a)}function I0(n,a){ph(2048,8,n,a)}function sj(n){He.flags|=4;var a=He.updateQueue;if(a===null)a=hh(),He.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Ub(n){var a=Jt().memoizedState;return sj({ref:a,nextImpl:n}),function(){if((ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Bb(n,a){return ph(4,2,n,a)}function qb(n,a){return ph(4,4,n,a)}function Fb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Hb(n,a,o){o=o!=null?o.concat([n]):null,ph(4,4,Fb.bind(null,a,n),o)}function C0(){}function Gb(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&b0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function $b(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&b0(a,u[1]))return u[0];if(u=n(),tl){qt(!0);try{n()}finally{qt(!1)}}return o.memoizedState=[u,a],u}function R0(n,a,o){return o===void 0||(Kr&1073741824)!==0&&(We&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Kv(),He.lanes|=n,$a|=n,o)}function Kb(n,a,o,u){return is(o,a)?o:io.current!==null?(n=R0(n,o,u),is(n,a)||(an=!0),n):(Kr&42)===0||(Kr&1073741824)!==0&&(We&261930)===0?(an=!0,n.memoizedState=o):(n=Kv(),He.lanes|=n,$a|=n,a)}function Qb(n,a,o,u,m){var p=le.p;le.p=p!==0&&8>p?p:8;var b=F.T,E={};F.T=E,O0(n,!1,a,o);try{var k=m(),Q=F.S;if(Q!==null&&Q(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ne=WS(k,u);Xc(n,a,ne,hs(n))}else Xc(n,a,u,hs(n))}catch(ae){Xc(n,a,{then:function(){},status:"rejected",reason:ae},hs())}finally{le.p=p,b!==null&&E.types!==null&&(b.types=E.types),F.T=b}}function rj(){}function k0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=Xb(n).queue;Qb(n,m,a,Y,o===null?rj:function(){return Yb(n),o(u)})}function Xb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:Y},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Yb(n){var a=Xb(n);a.next===null&&(a=n.alternate.memoizedState),Xc(n,a.next.queue,{},hs())}function D0(){return Sn(hu)}function Jb(){return Jt().memoizedState}function Wb(){return Jt().memoizedState}function aj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=hs();n=Ua(o);var u=Ba(a,n,o);u!==null&&(Jn(u,a,o),Hc(u,a,o)),a={cache:o0()},n.payload=a;return}a=a.return}}function ij(n,a,o){var u=hs();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xh(n)?ev(a,o):(o=Jm(n,a,o,u),o!==null&&(Jn(o,n,u),tv(o,a,u)))}function Zb(n,a,o){var u=hs();Xc(n,a,o,u)}function Xc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(xh(n))ev(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,E=p(b,o);if(m.hasEagerState=!0,m.eagerState=E,is(E,b))return Jd(n,a,m,0),It===null&&Yd(),!1}catch{}finally{}if(o=Jm(n,a,m,u),o!==null)return Jn(o,n,u),tv(o,a,u),!0}return!1}function O0(n,a,o,u){if(u={lane:2,revertLane:hg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xh(n)){if(a)throw Error(s(479))}else a=Jm(n,o,u,2),a!==null&&Jn(a,n,2)}function xh(n){var a=n.alternate;return n===He||a!==null&&a===He}function ev(n,a){lo=uh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function tv(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Di(n,o)}}var Yc={readContext:Sn,use:fh,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};Yc.useEffectEvent=Gt;var nv={readContext:Sn,use:fh,useCallback:function(n,a){return Un().memoizedState=[n,a===void 0?null:a],n},useContext:Sn,useEffect:zb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,gh(4194308,4,Fb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return gh(4194308,4,n,a)},useInsertionEffect:function(n,a){gh(4,2,n,a)},useMemo:function(n,a){var o=Un();a=a===void 0?null:a;var u=n();if(tl){qt(!0);try{n()}finally{qt(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Un();if(o!==void 0){var m=o(a);if(tl){qt(!0);try{o(a)}finally{qt(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=ij.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var a=Un();return n={current:n},a.memoizedState=n},useState:function(n){n=j0(n);var a=n.queue,o=Zb.bind(null,He,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:C0,useDeferredValue:function(n,a){var o=Un();return R0(o,n,a)},useTransition:function(){var n=j0(!1);return n=Qb.bind(null,He,n.queue,!0,!1),Un().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=He,m=Un();if(st){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),It===null)throw Error(s(349));(We&127)!==0||Nb(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,zb(Tb.bind(null,u,p,n),[n]),u.flags|=2048,co(9,{destroy:void 0},Eb.bind(null,u,p,o,a),null),o},useId:function(){var n=Un(),a=It.identifierPrefix;if(st){var o=_r,u=wr;o=(u&~(1<<32-nt(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=dh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=ZS++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:D0,useFormState:Ob,useActionState:Ob,useOptimistic:function(n){var a=Un();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=O0.bind(null,He,!0,o),o.dispatch=a,[n,a]},useMemoCache:E0,useCacheRefresh:function(){return Un().memoizedState=aj.bind(null,He)},useEffectEvent:function(n){var a=Un(),o={impl:n};return a.memoizedState=o,function(){if((ht&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},M0={readContext:Sn,use:fh,useCallback:Gb,useContext:Sn,useEffect:I0,useImperativeHandle:Hb,useInsertionEffect:Bb,useLayoutEffect:qb,useMemo:$b,useReducer:mh,useRef:Lb,useState:function(){return mh(Qr)},useDebugValue:C0,useDeferredValue:function(n,a){var o=Jt();return Kb(o,St.memoizedState,n,a)},useTransition:function(){var n=mh(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Qc(n),a]},useSyncExternalStore:_b,useId:Jb,useHostTransitionStatus:D0,useFormState:Mb,useActionState:Mb,useOptimistic:function(n,a){var o=Jt();return Ab(o,St,n,a)},useMemoCache:E0,useCacheRefresh:Wb};M0.useEffectEvent=Ub;var sv={readContext:Sn,use:fh,useCallback:Gb,useContext:Sn,useEffect:I0,useImperativeHandle:Hb,useInsertionEffect:Bb,useLayoutEffect:qb,useMemo:$b,useReducer:S0,useRef:Lb,useState:function(){return S0(Qr)},useDebugValue:C0,useDeferredValue:function(n,a){var o=Jt();return St===null?R0(o,n,a):Kb(o,St.memoizedState,n,a)},useTransition:function(){var n=S0(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Qc(n),a]},useSyncExternalStore:_b,useId:Jb,useHostTransitionStatus:D0,useFormState:Pb,useActionState:Pb,useOptimistic:function(n,a){var o=Jt();return St!==null?Ab(o,St,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:E0,useCacheRefresh:Wb};sv.useEffectEvent=Ub;function V0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:w({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var P0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=hs(),m=Ua(u);m.payload=a,o!=null&&(m.callback=o),a=Ba(n,m,u),a!==null&&(Jn(a,n,u),Hc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=hs(),m=Ua(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ba(n,m,u),a!==null&&(Jn(a,n,u),Hc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=hs(),u=Ua(o);u.tag=2,a!=null&&(u.callback=a),a=Ba(n,u,o),a!==null&&(Jn(a,n,o),Hc(a,n,o))}};function rv(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Vc(o,u)||!Vc(m,p):!0}function av(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&P0.enqueueReplaceState(a,a.state,null)}function nl(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=w({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function iv(n){Xd(n)}function lv(n){console.error(n)}function ov(n){Xd(n)}function yh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function cv(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function L0(n,a,o){return o=Ua(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(n,a)},o}function uv(n){return n=Ua(n),n.tag=3,n}function dv(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){cv(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){cv(a,o,u),typeof m!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function lj(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&to(a,o,m,!0),o=os.current,o!==null){switch(o.tag){case 31:case 13:return Ds===null?Ch():o.alternate===null&&$t===0&&($t=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===ah?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),cg(n,u,m)),!1;case 22:return o.flags|=65536,u===ah?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),cg(n,u,m)),!1}throw Error(s(435,o.tag))}return cg(n,u,m),Ch(),!1}if(st)return a=os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==s0&&(n=Error(s(422),{cause:u}),zc(Is(n,o)))):(u!==s0&&(a=Error(s(423),{cause:u}),zc(Is(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Is(u,o),m=L0(n.stateNode,u,m),m0(n,m),$t!==4&&($t=2)),!1;var p=Error(s(520),{cause:u});if(p=Is(p,o),ru===null?ru=[p]:ru.push(p),$t!==4&&($t=2),a===null)return!0;u=Is(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=L0(o.stateNode,u,n),m0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ka===null||!Ka.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=uv(m),dv(m,n,o,u),m0(o,m),!1}o=o.return}while(o!==null);return!1}var z0=Error(s(461)),an=!1;function jn(n,a,o,u){a.child=n===null?gb(a,null,o,u):el(a,n.child,o,u)}function hv(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return Yi(a),u=v0(n,a,o,b,p,m),E=w0(),n!==null&&!an?(_0(n,a,m),Xr(n,a,m)):(st&&E&&t0(a),a.flags|=1,jn(n,a,u,m),a.child)}function fv(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!Wm(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,mv(n,a,p,u,m)):(n=Zd(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!K0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:Vc,o(b,u)&&n.ref===a.ref)return Xr(n,a,m)}return a.flags|=1,n=Fr(p,u),n.ref=a.ref,n.return=a,a.child=n}function mv(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Vc(p,u)&&n.ref===a.ref)if(an=!1,a.pendingProps=u=p,K0(n,m))(n.flags&131072)!==0&&(an=!0);else return a.lanes=n.lanes,Xr(n,a,m)}return U0(n,a,o,u,m)}function gv(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return pv(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&sh(a,p!==null?p.cachePool:null),p!==null?yb(a,p):p0(),bb(a);else return u=a.lanes=536870912,pv(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(sh(a,p.cachePool),yb(a,p),Fa(),a.memoizedState=null):(n!==null&&sh(a,null),p0(),Fa());return jn(n,a,m,o),a.child}function Jc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function pv(n,a,o,u,m){var p=u0();return p=p===null?null:{parent:sn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&sh(a,null),p0(),bb(a),n!==null&&to(n,a,u,!0),a.childLanes=m,null}function bh(n,a){return a=wh({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function xv(n,a,o){return el(a,n.child,null,o),n=bh(a,a.pendingProps),n.flags|=2,cs(a),a.memoizedState=null,n}function oj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(st){if(u.mode==="hidden")return n=bh(a,u),a.lanes=536870912,Jc(null,n);if(y0(a),(n=kt)?(n=I1(n,ks),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=eb(n),o.return=a,a.child=o,Tn=a,kt=null)):n=null,n===null)throw Pa(a);return a.lanes=536870912,null}return bh(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(y0(a),m)if(a.flags&256)a.flags&=-257,a=xv(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(an||to(n,a,o,!1),m=(o&n.childLanes)!==0,an||m){if(u=It,u!==null&&(b=yc(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,$i(n,b),Jn(u,n,b),z0;Ch(),a=xv(n,a,o)}else n=p.treeContext,kt=Os(b.nextSibling),Tn=a,st=!0,Va=null,ks=!1,n!==null&&sb(a,n),a=bh(a,u),a.flags|=4096;return a}return n=Fr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function vh(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function U0(n,a,o,u,m){return Yi(a),o=v0(n,a,o,u,void 0,m),u=w0(),n!==null&&!an?(_0(n,a,m),Xr(n,a,m)):(st&&u&&t0(a),a.flags|=1,jn(n,a,o,m),a.child)}function yv(n,a,o,u,m,p){return Yi(a),a.updateQueue=null,o=wb(a,u,o,m),vb(n),u=w0(),n!==null&&!an?(_0(n,a,p),Xr(n,a,p)):(st&&u&&t0(a),a.flags|=1,jn(n,a,o,p),a.child)}function bv(n,a,o,u,m){if(Yi(a),a.stateNode===null){var p=Jl,b=o.contextType;typeof b=="object"&&b!==null&&(p=Sn(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=P0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},h0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?Sn(b):Jl,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(V0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&P0.enqueueReplaceState(p,p.state,null),$c(a,u,p,m),Gc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var E=a.memoizedProps,k=nl(o,E);p.props=k;var Q=p.context,ne=o.contextType;b=Jl,typeof ne=="object"&&ne!==null&&(b=Sn(ne));var ae=o.getDerivedStateFromProps;ne=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||Q!==b)&&av(a,p,u,b),za=!1;var X=a.memoizedState;p.state=X,$c(a,u,p,m),Gc(),Q=a.memoizedState,E||X!==Q||za?(typeof ae=="function"&&(V0(a,o,ae,u),Q=a.memoizedState),(k=za||rv(a,o,k,u,X,Q,b))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=k):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,f0(n,a),b=a.memoizedProps,ne=nl(o,b),p.props=ne,ae=a.pendingProps,X=p.context,Q=o.contextType,k=Jl,typeof Q=="object"&&Q!==null&&(k=Sn(Q)),E=o.getDerivedStateFromProps,(Q=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ae||X!==k)&&av(a,p,u,k),za=!1,X=a.memoizedState,p.state=X,$c(a,u,p,m),Gc();var Z=a.memoizedState;b!==ae||X!==Z||za||n!==null&&n.dependencies!==null&&th(n.dependencies)?(typeof E=="function"&&(V0(a,o,E,u),Z=a.memoizedState),(ne=za||rv(a,o,ne,u,X,Z,k)||n!==null&&n.dependencies!==null&&th(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Z,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Z,k)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=Z),p.props=u,p.state=Z,p.context=k,u=ne):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,vh(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=el(a,n.child,null,m),a.child=el(a,null,o,m)):jn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=Xr(n,a,m),n}function vv(n,a,o,u){return Qi(),a.flags|=256,jn(n,a,o,u),a.child}var B0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function q0(n){return{baseLanes:n,cachePool:cb()}}function F0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=ds),n}function wv(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(st){if(m?qa(a):Fa(),(n=kt)?(n=I1(n,ks),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=eb(n),o.return=a,a.child=o,Tn=a,kt=null)):n=null,n===null)throw Pa(a);return Tg(n)?a.lanes=32:a.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(Fa(),m=a.mode,E=wh({mode:"hidden",children:E},m),u=Ki(u,m,o,null),E.return=a,u.return=a,E.sibling=u,a.child=E,u=a.child,u.memoizedState=q0(o),u.childLanes=F0(n,b,o),a.memoizedState=B0,Jc(null,u)):(qa(a),H0(a,E))}var k=n.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(p)a.flags&256?(qa(a),a.flags&=-257,a=G0(n,a,o)):a.memoizedState!==null?(Fa(),a.child=n.child,a.flags|=128,a=null):(Fa(),E=u.fallback,m=a.mode,u=wh({mode:"visible",children:u.children},m),E=Ki(E,m,o,null),E.flags|=2,u.return=a,E.return=a,u.sibling=E,a.child=u,el(a,n.child,null,o),u=a.child,u.memoizedState=q0(o),u.childLanes=F0(n,b,o),a.memoizedState=B0,a=Jc(null,u));else if(qa(a),Tg(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,zc({value:u,source:null,stack:null}),a=G0(n,a,o)}else if(an||to(n,a,o,!1),b=(o&n.childLanes)!==0,an||b){if(b=It,b!==null&&(u=yc(b,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,$i(n,u),Jn(b,n,u),z0;Eg(E)||Ch(),a=G0(n,a,o)}else Eg(E)?(a.flags|=192,a.child=n.child,a=null):(n=k.treeContext,kt=Os(E.nextSibling),Tn=a,st=!0,Va=null,ks=!1,n!==null&&sb(a,n),a=H0(a,u.children),a.flags|=4096);return a}return m?(Fa(),E=u.fallback,m=a.mode,k=n.child,Q=k.sibling,u=Fr(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,Q!==null?E=Fr(Q,E):(E=Ki(E,m,o,null),E.flags|=2),E.return=a,u.return=a,u.sibling=E,a.child=u,Jc(null,u),u=a.child,E=n.child.memoizedState,E===null?E=q0(o):(m=E.cachePool,m!==null?(k=sn._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=cb(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=F0(n,b,o),a.memoizedState=B0,Jc(n.child,u)):(qa(a),o=n.child,n=o.sibling,o=Fr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function H0(n,a){return a=wh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function wh(n,a){return n=ls(22,n,null,a),n.lanes=0,n}function G0(n,a,o){return el(a,n.child,null,o),n=H0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function _v(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),i0(n.return,a,o)}function $0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function Nv(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=Yt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,P(Yt,b),jn(n,a,u,o),u=st?Lc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_v(n,o,a);else if(n.tag===19)_v(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&ch(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),$0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&ch(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}$0(a,!0,o,null,p,u);break;case"together":$0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Xr(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),$a|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(to(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Fr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Fr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function K0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&th(n)))}function cj(n,a,o){switch(a.tag){case 3:it(a,a.stateNode.containerInfo),La(a,sn,n.memoizedState.cache),Qi();break;case 27:case 5:Et(a);break;case 4:it(a,a.stateNode.containerInfo);break;case 10:La(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,y0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(qa(a),a.flags|=128,null):(o&a.child.childLanes)!==0?wv(n,a,o):(qa(a),n=Xr(n,a,o),n!==null?n.sibling:null);qa(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(to(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return Nv(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),P(Yt,Yt.current),u)break;return null;case 22:return a.lanes=0,gv(n,a,o,a.pendingProps);case 24:La(a,sn,n.memoizedState.cache)}return Xr(n,a,o)}function Ev(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)an=!0;else{if(!K0(n,o)&&(a.flags&128)===0)return an=!1,cj(n,a,o);an=(n.flags&131072)!==0}else an=!1,st&&(a.flags&1048576)!==0&&nb(a,Lc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Wi(a.elementType),a.type=n,typeof n=="function")Wm(n)?(u=nl(n,u),a.tag=1,a=bv(null,a,n,u,o)):(a.tag=0,a=U0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===we){a.tag=11,a=hv(null,a,n,u,o);break e}else if(m===S){a.tag=14,a=fv(null,a,n,u,o);break e}}throw a=he(n)||n,Error(s(306,a,""))}}return a;case 0:return U0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=nl(u,a.pendingProps),bv(n,a,u,m,o);case 3:e:{if(it(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,f0(n,a),$c(a,u,null,o);var b=a.memoizedState;if(u=b.cache,La(a,sn,u),u!==p.cache&&l0(a,[sn],o,!0),Gc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=vv(n,a,u,o);break e}else if(u!==m){m=Is(Error(s(424)),a),zc(m),a=vv(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=Os(n.firstChild),Tn=a,st=!0,Va=null,ks=!0,o=gb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qi(),u===m){a=Xr(n,a,o);break e}jn(n,a,u,o)}a=a.child}return a;case 26:return vh(n,a),n===null?(o=M1(a.type,null,a.pendingProps,null))?a.memoizedState=o:st||(o=a.type,n=a.pendingProps,u=Ph(Re.current).createElement(o),u[en]=a,u[xn]=n,An(u,o,n),tn(u),a.stateNode=u):a.memoizedState=M1(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Et(a),n===null&&st&&(u=a.stateNode=k1(a.type,a.pendingProps,Re.current),Tn=a,ks=!0,m=kt,Ja(a.type)?(Sg=m,kt=Os(u.firstChild)):kt=m),jn(n,a,a.pendingProps.children,o),vh(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&st&&((m=u=kt)&&(u=zj(u,a.type,a.pendingProps,ks),u!==null?(a.stateNode=u,Tn=a,kt=Os(u.firstChild),ks=!1,m=!0):m=!1),m||Pa(a)),Et(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,wg(m,p)?u=null:b!==null&&wg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=v0(n,a,ej,null,null,o),hu._currentValue=m),vh(n,a),jn(n,a,u,o),a.child;case 6:return n===null&&st&&((n=o=kt)&&(o=Uj(o,a.pendingProps,ks),o!==null?(a.stateNode=o,Tn=a,kt=null,n=!0):n=!1),n||Pa(a)),null;case 13:return wv(n,a,o);case 4:return it(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=el(a,null,u,o):jn(n,a,u,o),a.child;case 11:return hv(n,a,a.type,a.pendingProps,o);case 7:return jn(n,a,a.pendingProps,o),a.child;case 8:return jn(n,a,a.pendingProps.children,o),a.child;case 12:return jn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,La(a,a.type,u.value),jn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Yi(a),m=Sn(m),u=u(m),a.flags|=1,jn(n,a,u,o),a.child;case 14:return fv(n,a,a.type,a.pendingProps,o);case 15:return mv(n,a,a.type,a.pendingProps,o);case 19:return Nv(n,a,o);case 31:return oj(n,a,o);case 22:return gv(n,a,o,a.pendingProps);case 24:return Yi(a),u=Sn(sn),n===null?(m=u0(),m===null&&(m=It,p=o0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},h0(a),La(a,sn,m)):((n.lanes&o)!==0&&(f0(n,a),$c(a,null,null,o),Gc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),La(a,sn,u)):(u=p.cache,La(a,sn,u),u!==m.cache&&l0(a,[sn],o,!0))),jn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Yr(n){n.flags|=4}function Q0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Jv())n.flags|=8192;else throw Zi=ah,d0}else n.flags&=-16777217}function Tv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!U1(a))if(Jv())n.flags|=8192;else throw Zi=ah,d0}function _h(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?mt():536870912,n.lanes|=a,mo|=a)}function Wc(n,a){if(!st)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Dt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function uj(n,a,o){var u=a.pendingProps;switch(n0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),$r(sn),ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(eo(a)?Yr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,r0())),Dt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(Yr(a),p!==null?(Dt(a),Tv(a,p)):(Dt(a),Q0(a,m,null,u,o))):p?p!==n.memoizedState?(Yr(a),Dt(a),Tv(a,p)):(Dt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Yr(a),Dt(a),Q0(a,m,n,u,o)),null;case 27:if(pt(a),o=Re.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}n=ee.current,eo(a)?rb(a):(n=k1(m,u,o),a.stateNode=n,Yr(a))}return Dt(a),null;case 5:if(pt(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}if(p=ee.current,eo(a))rb(a);else{var b=Ph(Re.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[en]=a,p[xn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(An(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yr(a)}}return Dt(a),Q0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Re.current,eo(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Tn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[en]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||w1(n.nodeValue,o)),n||Pa(a,!0)}else n=Ph(n).createTextNode(u),n[en]=a,a.stateNode=n}return Dt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=eo(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[en]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),n=!1}else o=r0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(cs(a),a):(cs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=eo(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[en]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),m=!1}else m=r0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(cs(a),a):(cs(a),null)}return cs(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),_h(a,a.updateQueue),Dt(a),null);case 4:return ke(),n===null&&pg(a.stateNode.containerInfo),Dt(a),null;case 10:return $r(a.type),Dt(a),null;case 19:if(U(Yt),u=a.memoizedState,u===null)return Dt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)Wc(u,!1);else{if($t!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=ch(n),p!==null){for(a.flags|=128,Wc(u,!1),n=p.updateQueue,a.updateQueue=n,_h(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)Zy(o,n),o=o.sibling;return P(Yt,Yt.current&1|2),st&&Hr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Vt()>jh&&(a.flags|=128,m=!0,Wc(u,!1),a.lanes=4194304)}else{if(!m)if(n=ch(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,_h(a,n),Wc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!st)return Dt(a),null}else 2*Vt()-u.renderingStartTime>jh&&o!==536870912&&(a.flags|=128,m=!0,Wc(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Vt(),n.sibling=null,o=Yt.current,P(Yt,m?o&1|2:o&1),st&&Hr(a,u.treeForkCount),n):(Dt(a),null);case 22:case 23:return cs(a),x0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),o=a.updateQueue,o!==null&&_h(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&U(Ji),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),$r(sn),Dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function dj(n,a){switch(n0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return $r(sn),ke(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return pt(a),null;case 31:if(a.memoizedState!==null){if(cs(a),a.alternate===null)throw Error(s(340));Qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(cs(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return U(Yt),null;case 4:return ke(),null;case 10:return $r(a.type),null;case 22:case 23:return cs(a),x0(),n!==null&&U(Ji),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return $r(sn),null;case 25:return null;default:return null}}function Sv(n,a){switch(n0(a),a.tag){case 3:$r(sn),ke();break;case 26:case 27:case 5:pt(a);break;case 4:ke();break;case 31:a.memoizedState!==null&&cs(a);break;case 13:cs(a);break;case 19:U(Yt);break;case 10:$r(a.type);break;case 22:case 23:cs(a),x0(),n!==null&&U(Ji);break;case 24:$r(sn)}}function Zc(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(E){bt(a,a.return,E)}}function Ha(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,m=a;var k=o,Q=E;try{Q()}catch(ne){bt(m,k,ne)}}}u=u.next}while(u!==p)}}catch(ne){bt(a,a.return,ne)}}function jv(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{xb(a,o)}catch(u){bt(n,n.return,u)}}}function Av(n,a,o){o.props=nl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){bt(n,a,u)}}function eu(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){bt(n,a,m)}}function Nr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){bt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){bt(n,a,m)}else o.current=null}function Iv(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){bt(n,n.return,m)}}function X0(n,a,o){try{var u=n.stateNode;Dj(u,n.type,o,a),u[xn]=a}catch(m){bt(n,n.return,m)}}function Cv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ja(n.type)||n.tag===4}function Y0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Cv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ja(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function J0(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Fs));else if(u!==4&&(u===27&&Ja(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(J0(n,a,o),n=n.sibling;n!==null;)J0(n,a,o),n=n.sibling}function Nh(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&Ja(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Nh(n,a,o),n=n.sibling;n!==null;)Nh(n,a,o),n=n.sibling}function Rv(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);An(a,u,o),a[en]=n,a[xn]=o}catch(p){bt(n,n.return,p)}}var Jr=!1,ln=!1,W0=!1,kv=typeof WeakSet=="function"?WeakSet:Set,bn=null;function hj(n,a){if(n=n.containerInfo,bg=Hh,n=Hy(n),Gm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,E=-1,k=-1,Q=0,ne=0,ae=n,X=null;t:for(;;){for(var Z;ae!==o||m!==0&&ae.nodeType!==3||(E=b+m),ae!==p||u!==0&&ae.nodeType!==3||(k=b+u),ae.nodeType===3&&(b+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)X=ae,ae=Z;for(;;){if(ae===n)break t;if(X===o&&++Q===m&&(E=b),X===p&&++ne===u&&(k=b),(Z=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=Z}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(vg={focusedElem:n,selectionRange:o},Hh=!1,bn=a;bn!==null;)if(a=bn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,bn=n;else for(;bn!==null;){switch(a=bn,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=nl(o.type,m);n=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Me){bt(o,o.return,Me)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Ng(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ng(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,bn=n;break}bn=a.return}}function Dv(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zr(n,o),u&4&&Zc(5,o);break;case 1:if(Zr(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){bt(o,o.return,b)}else{var m=nl(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){bt(o,o.return,b)}}u&64&&jv(o),u&512&&eu(o,o.return);break;case 3:if(Zr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{xb(n,a)}catch(b){bt(o,o.return,b)}}break;case 27:a===null&&u&4&&Rv(o);case 26:case 5:Zr(n,o),a===null&&u&4&&Iv(o),u&512&&eu(o,o.return);break;case 12:Zr(n,o);break;case 31:Zr(n,o),u&4&&Vv(n,o);break;case 13:Zr(n,o),u&4&&Pv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=wj.bind(null,o),Bj(n,o))));break;case 22:if(u=o.memoizedState!==null||Jr,!u){a=a!==null&&a.memoizedState!==null||ln,m=Jr;var p=ln;Jr=u,(ln=a)&&!p?ea(n,o,(o.subtreeFlags&8772)!==0):Zr(n,o),Jr=m,ln=p}break;case 30:break;default:Zr(n,o)}}function Ov(n){var a=n.alternate;a!==null&&(n.alternate=null,Ov(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Pl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Lt=null,Kn=!1;function Wr(n,a,o){for(o=o.child;o!==null;)Mv(n,a,o),o=o.sibling}function Mv(n,a,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:ln||Nr(o,a),Wr(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ln||Nr(o,a);var u=Lt,m=Kn;Ja(o.type)&&(Lt=o.stateNode,Kn=!1),Wr(n,a,o),cu(o.stateNode),Lt=u,Kn=m;break;case 5:ln||Nr(o,a);case 6:if(u=Lt,m=Kn,Lt=null,Wr(n,a,o),Lt=u,Kn=m,Lt!==null)if(Kn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(o.stateNode)}catch(p){bt(o,a,p)}else try{Lt.removeChild(o.stateNode)}catch(p){bt(o,a,p)}break;case 18:Lt!==null&&(Kn?(n=Lt,j1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_o(n)):j1(Lt,o.stateNode));break;case 4:u=Lt,m=Kn,Lt=o.stateNode.containerInfo,Kn=!0,Wr(n,a,o),Lt=u,Kn=m;break;case 0:case 11:case 14:case 15:Ha(2,o,a),ln||Ha(4,o,a),Wr(n,a,o);break;case 1:ln||(Nr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Av(o,a,u)),Wr(n,a,o);break;case 21:Wr(n,a,o);break;case 22:ln=(u=ln)||o.memoizedState!==null,Wr(n,a,o),ln=u;break;default:Wr(n,a,o)}}function Vv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(o){bt(a,a.return,o)}}}function Pv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(o){bt(a,a.return,o)}}function fj(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new kv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new kv),a;default:throw Error(s(435,n.tag))}}function Eh(n,a){var o=fj(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=_j.bind(null,n,u);u.then(m,m)}})}function Qn(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Ja(E.type)){Lt=E.stateNode,Kn=!1;break e}break;case 5:Lt=E.stateNode,Kn=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,Kn=!0;break e}E=E.return}if(Lt===null)throw Error(s(160));Mv(p,b,m),Lt=null,Kn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Lv(a,n),a=a.sibling}var Xs=null;function Lv(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(a,n),Xn(n),u&4&&(Ha(3,n,n.return),Zc(3,n),Ha(5,n,n.return));break;case 1:Qn(a,n),Xn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&64&&Jr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Xs;if(Qn(a,n),Xn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[cr]||p[en]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),An(p,u,o),p[en]=n,tn(p),u=p;break e;case"link":var b=L1("link","href",m).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(p=b[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}p=m.createElement(u),An(p,u,o),m.head.appendChild(p);break;case"meta":if(b=L1("meta","content",m).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(p=b[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}p=m.createElement(u),An(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[en]=n,tn(p),u=p}n.stateNode=u}else z1(m,n.type,n.stateNode);else n.stateNode=P1(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?z1(m,n.type,n.stateNode):P1(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&X0(n,n.memoizedProps,o.memoizedProps)}break;case 27:Qn(a,n),Xn(n),u&512&&(ln||o===null||Nr(o,o.return)),o!==null&&u&4&&X0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Qn(a,n),Xn(n),u&512&&(ln||o===null||Nr(o,o.return)),n.flags&32){m=n.stateNode;try{$n(m,"")}catch(Se){bt(n,n.return,Se)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,X0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(W0=!0);break;case 6:if(Qn(a,n),Xn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Se){bt(n,n.return,Se)}}break;case 3:if(Uh=null,m=Xs,Xs=Lh(a.containerInfo),Qn(a,n),Xs=m,Xn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{_o(a.containerInfo)}catch(Se){bt(n,n.return,Se)}W0&&(W0=!1,zv(n));break;case 4:u=Xs,Xs=Lh(n.stateNode.containerInfo),Qn(a,n),Xn(n),Xs=u;break;case 12:Qn(a,n),Xn(n);break;case 31:Qn(a,n),Xn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Eh(n,u)));break;case 13:Qn(a,n),Xn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sh=Vt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Eh(n,u)));break;case 22:m=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,Q=Jr,ne=ln;if(Jr=Q||m,ln=ne||k,Qn(a,n),ln=ne,Jr=Q,Xn(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||k||Jr||ln||sl(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){k=o=a;try{if(p=k.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=k.stateNode;var ae=k.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){bt(k,k.return,Se)}}}else if(a.tag===6){if(o===null){k=a;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(Se){bt(k,k.return,Se)}}}else if(a.tag===18){if(o===null){k=a;try{var Z=k.stateNode;m?A1(Z,!0):A1(k.stateNode,!1)}catch(Se){bt(k,k.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Eh(n,o))));break;case 19:Qn(a,n),Xn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Eh(n,u)));break;case 30:break;case 21:break;default:Qn(a,n),Xn(n)}}function Xn(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(Cv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=Y0(n);Nh(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&($n(b,""),o.flags&=-33);var E=Y0(n);Nh(n,E,b);break;case 3:case 4:var k=o.stateNode.containerInfo,Q=Y0(n);J0(n,Q,k);break;default:throw Error(s(161))}}catch(ne){bt(n,n.return,ne)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function zv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;zv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Zr(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Dv(n,a.alternate,a),a=a.sibling}function sl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Ha(4,a,a.return),sl(a);break;case 1:Nr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Av(a,a.return,o),sl(a);break;case 27:cu(a.stateNode);case 26:case 5:Nr(a,a.return),sl(a);break;case 22:a.memoizedState===null&&sl(a);break;case 30:sl(a);break;default:sl(a)}n=n.sibling}}function ea(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:ea(m,p,o),Zc(4,p);break;case 1:if(ea(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){bt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var E=u.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)pb(k[m],E)}catch(Q){bt(u,u.return,Q)}}o&&b&64&&jv(p),eu(p,p.return);break;case 27:Rv(p);case 26:case 5:ea(m,p,o),o&&u===null&&b&4&&Iv(p),eu(p,p.return);break;case 12:ea(m,p,o);break;case 31:ea(m,p,o),o&&b&4&&Vv(m,p);break;case 13:ea(m,p,o),o&&b&4&&Pv(m,p);break;case 22:p.memoizedState===null&&ea(m,p,o),eu(p,p.return);break;case 30:break;default:ea(m,p,o)}a=a.sibling}}function Z0(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Uc(o))}function eg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Uc(n))}function Ys(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Uv(n,a,o,u),a=a.sibling}function Uv(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(n,a,o,u),m&2048&&Zc(9,a);break;case 1:Ys(n,a,o,u);break;case 3:Ys(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Uc(n)));break;case 12:if(m&2048){Ys(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,E=p.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){bt(a,a.return,k)}}else Ys(n,a,o,u);break;case 31:Ys(n,a,o,u);break;case 13:Ys(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?Ys(n,a,o,u):tu(n,a):p._visibility&2?Ys(n,a,o,u):(p._visibility|=2,uo(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Z0(b,a);break;case 24:Ys(n,a,o,u),m&2048&&eg(a.alternate,a);break;default:Ys(n,a,o,u)}}function uo(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,E=o,k=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:uo(p,b,E,k,m),Zc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?uo(p,b,E,k,m):tu(p,b):(ne._visibility|=2,uo(p,b,E,k,m)),m&&Q&2048&&Z0(b.alternate,b);break;case 24:uo(p,b,E,k,m),m&&Q&2048&&eg(b.alternate,b);break;default:uo(p,b,E,k,m)}a=a.sibling}}function tu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:tu(o,u),m&2048&&Z0(u.alternate,u);break;case 24:tu(o,u),m&2048&&eg(u.alternate,u);break;default:tu(o,u)}a=a.sibling}}var nu=8192;function ho(n,a,o){if(n.subtreeFlags&nu)for(n=n.child;n!==null;)Bv(n,a,o),n=n.sibling}function Bv(n,a,o){switch(n.tag){case 26:ho(n,a,o),n.flags&nu&&n.memoizedState!==null&&Zj(o,Xs,n.memoizedState,n.memoizedProps);break;case 5:ho(n,a,o);break;case 3:case 4:var u=Xs;Xs=Lh(n.stateNode.containerInfo),ho(n,a,o),Xs=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=nu,nu=16777216,ho(n,a,o),nu=u):ho(n,a,o));break;default:ho(n,a,o)}}function qv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function su(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];bn=u,Hv(u,n)}qv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Fv(n),n=n.sibling}function Fv(n){switch(n.tag){case 0:case 11:case 15:su(n),n.flags&2048&&Ha(9,n,n.return);break;case 3:su(n);break;case 12:su(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Th(n)):su(n);break;default:su(n)}}function Th(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];bn=u,Hv(u,n)}qv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Ha(8,a,a.return),Th(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Th(a));break;default:Th(a)}n=n.sibling}}function Hv(n,a){for(;bn!==null;){var o=bn;switch(o.tag){case 0:case 11:case 15:Ha(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Uc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,bn=u;else e:for(o=n;bn!==null;){u=bn;var m=u.sibling,p=u.return;if(Ov(u),u===o){bn=null;break e}if(m!==null){m.return=p,bn=m;break e}bn=p}}}var mj={getCacheForType:function(n){var a=Sn(sn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return Sn(sn).controller.signal}},gj=typeof WeakMap=="function"?WeakMap:Map,ht=0,It=null,Ke=null,We=0,yt=0,us=null,Ga=!1,fo=!1,tg=!1,ta=0,$t=0,$a=0,rl=0,ng=0,ds=0,mo=0,ru=null,Yn=null,sg=!1,Sh=0,Gv=0,jh=1/0,Ah=null,Ka=null,un=0,Qa=null,go=null,na=0,rg=0,ag=null,$v=null,au=0,ig=null;function hs(){return(ht&2)!==0&&We!==0?We&-We:F.T!==null?hg():Id()}function Kv(){if(ds===0)if((We&536870912)===0||st){var n=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),ds=n}else ds=536870912;return n=os.current,n!==null&&(n.flags|=32),ds}function Jn(n,a,o){(n===It&&(yt===2||yt===9)||n.cancelPendingCommit!==null)&&(po(n,0),Xa(n,We,ds,!1)),rt(n,o),((ht&2)===0||n!==It)&&(n===It&&((ht&2)===0&&(rl|=o),$t===4&&Xa(n,We,ds,!1)),Er(n))}function Qv(n,a,o){if((ht&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Pe(n,a),m=u?yj(n,a):og(n,a,!0),p=u;do{if(m===0){fo&&!u&&Xa(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!pj(o)){m=og(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=n;m=ru;var k=E.current.memoizedState.isDehydrated;if(k&&(po(E,b).flags|=256),b=og(E,b,!1),b!==2){if(tg&&!k){E.errorRecoveryDisabledLanes|=p,rl|=p,m=4;break e}p=Yn,Yn=m,p!==null&&(Yn===null?Yn=p:Yn.push.apply(Yn,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){po(n,0),Xa(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Xa(u,a,ds,!Ga);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Sh+300-Vt(),10<m)){if(Xa(u,a,ds,!Ga),ye(u,0,!0)!==0)break e;na=a,u.timeoutHandle=T1(Xv.bind(null,u,o,Yn,Ah,sg,a,ds,rl,mo,Ga,p,"Throttled",-0,0),m);break e}Xv(u,o,Yn,Ah,sg,a,ds,rl,mo,Ga,p,null,-0,0)}}break}while(!0);Er(n)}function Xv(n,a,o,u,m,p,b,E,k,Q,ne,ae,X,Z){if(n.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fs},Bv(a,p,ae);var Se=(p&62914560)===p?Sh-Vt():(p&4194048)===p?Gv-Vt():0;if(Se=e4(ae,Se),Se!==null){na=p,n.cancelPendingCommit=Se(s1.bind(null,n,a,p,o,u,m,b,E,k,ne,ae,null,X,Z)),Xa(n,p,b,!Q);return}}s1(n,a,p,o,u,m,b,E,k)}function pj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!is(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xa(n,a,o,u){a&=~ng,a&=~rl,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-nt(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&pn(n,o,a)}function Ih(){return(ht&6)===0?(iu(0),!1):!0}function lg(){if(Ke!==null){if(yt===0)var n=Ke.return;else n=Ke,Gr=Xi=null,N0(n),ao=null,qc=0,n=Ke;for(;n!==null;)Sv(n.alternate,n),n=n.return;Ke=null}}function po(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Vj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),na=0,lg(),It=n,Ke=o=Fr(n.current,null),We=a,yt=0,us=null,Ga=!1,fo=Pe(n,a),tg=!1,mo=ds=ng=rl=$a=$t=0,Yn=ru=null,sg=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-nt(u),p=1<<m;a|=n[m],u&=~p}return ta=a,Yd(),o}function Yv(n,a){He=null,F.H=Yc,a===ro||a===rh?(a=hb(),yt=3):a===d0?(a=hb(),yt=4):yt=a===z0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,us=a,Ke===null&&($t=1,yh(n,Is(a,n.current)))}function Jv(){var n=os.current;return n===null?!0:(We&4194048)===We?Ds===null:(We&62914560)===We||(We&536870912)!==0?n===Ds:!1}function Wv(){var n=F.H;return F.H=Yc,n===null?Yc:n}function Zv(){var n=F.A;return F.A=mj,n}function Ch(){$t=4,Ga||(We&4194048)!==We&&os.current!==null||(fo=!0),($a&134217727)===0&&(rl&134217727)===0||It===null||Xa(It,We,ds,!1)}function og(n,a,o){var u=ht;ht|=2;var m=Wv(),p=Zv();(It!==n||We!==a)&&(Ah=null,po(n,a)),a=!1;var b=$t;e:do try{if(yt!==0&&Ke!==null){var E=Ke,k=us;switch(yt){case 8:lg(),b=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(a=!0);var Q=yt;if(yt=0,us=null,xo(n,E,k,Q),o&&fo){b=0;break e}break;default:Q=yt,yt=0,us=null,xo(n,E,k,Q)}}xj(),b=$t;break}catch(ne){Yv(n,ne)}while(!0);return a&&n.shellSuspendCounter++,Gr=Xi=null,ht=u,F.H=m,F.A=p,Ke===null&&(It=null,We=0,Yd()),b}function xj(){for(;Ke!==null;)e1(Ke)}function yj(n,a){var o=ht;ht|=2;var u=Wv(),m=Zv();It!==n||We!==a?(Ah=null,jh=Vt()+500,po(n,a)):fo=Pe(n,a);e:do try{if(yt!==0&&Ke!==null){a=Ke;var p=us;t:switch(yt){case 1:yt=0,us=null,xo(n,a,p,1);break;case 2:case 9:if(ub(p)){yt=0,us=null,t1(a);break}a=function(){yt!==2&&yt!==9||It!==n||(yt=7),Er(n)},p.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:ub(p)?(yt=0,us=null,t1(a)):(yt=0,us=null,xo(n,a,p,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var E=Ke;if(b?U1(b):E.stateNode.complete){yt=0,us=null;var k=E.sibling;if(k!==null)Ke=k;else{var Q=E.return;Q!==null?(Ke=Q,Rh(Q)):Ke=null}break t}}yt=0,us=null,xo(n,a,p,5);break;case 6:yt=0,us=null,xo(n,a,p,6);break;case 8:lg(),$t=6;break e;default:throw Error(s(462))}}bj();break}catch(ne){Yv(n,ne)}while(!0);return Gr=Xi=null,F.H=u,F.A=m,ht=o,Ke!==null?0:(It=null,We=0,Yd(),$t)}function bj(){for(;Ke!==null&&!_a();)e1(Ke)}function e1(n){var a=Ev(n.alternate,n,ta);n.memoizedProps=n.pendingProps,a===null?Rh(n):Ke=a}function t1(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=yv(o,a,a.pendingProps,a.type,void 0,We);break;case 11:a=yv(o,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:N0(a);default:Sv(o,a),a=Ke=Zy(a,ta),a=Ev(o,a,ta)}n.memoizedProps=n.pendingProps,a===null?Rh(n):Ke=a}function xo(n,a,o,u){Gr=Xi=null,N0(a),ao=null,qc=0;var m=a.return;try{if(lj(n,m,a,o,We)){$t=1,yh(n,Is(o,n.current)),Ke=null;return}}catch(p){if(m!==null)throw Ke=m,p;$t=1,yh(n,Is(o,n.current)),Ke=null;return}a.flags&32768?(st||u===1?n=!0:fo||(We&536870912)!==0?n=!1:(Ga=n=!0,(u===2||u===9||u===3||u===6)&&(u=os.current,u!==null&&u.tag===13&&(u.flags|=16384))),n1(a,n)):Rh(a)}function Rh(n){var a=n;do{if((a.flags&32768)!==0){n1(a,Ga);return}n=a.return;var o=uj(a.alternate,a,ta);if(o!==null){Ke=o;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=n}while(a!==null);$t===0&&($t=5)}function n1(n,a){do{var o=dj(n.alternate,n);if(o!==null){o.flags&=32767,Ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=o}while(n!==null);$t=6,Ke=null}function s1(n,a,o,u,m,p,b,E,k){n.cancelPendingCommit=null;do kh();while(un!==0);if((ht&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Ym,Ft(n,o,p,b,E,k),n===It&&(Ke=It=null,We=0),go=a,Qa=n,na=o,rg=p,ag=m,$v=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Nj(Nn,function(){return o1(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,m=le.p,le.p=2,b=ht,ht|=4;try{hj(n,a,o)}finally{ht=b,le.p=m,F.T=u}}un=1,r1(),a1(),i1()}}function r1(){if(un===1){un=0;var n=Qa,a=go,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var u=le.p;le.p=2;var m=ht;ht|=4;try{Lv(a,n);var p=vg,b=Hy(n.containerInfo),E=p.focusedElem,k=p.selectionRange;if(b!==E&&E&&E.ownerDocument&&Fy(E.ownerDocument.documentElement,E)){if(k!==null&&Gm(E)){var Q=k.start,ne=k.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var Z=X.getSelection(),Se=E.textContent.length,Me=Math.min(k.start,Se),At=k.end===void 0?Me:Math.min(k.end,Se);!Z.extend&&Me>At&&(b=At,At=Me,Me=b);var q=qy(E,Me),L=qy(E,At);if(q&&L&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var K=ae.createRange();K.setStart(q.node,q.offset),Z.removeAllRanges(),Me>At?(Z.addRange(K),Z.extend(L.node,L.offset)):(K.setEnd(L.node,L.offset),Z.addRange(K))}}}}for(ae=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var se=ae[E];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Hh=!!bg,vg=bg=null}finally{ht=m,le.p=u,F.T=o}}n.current=a,un=2}}function a1(){if(un===2){un=0;var n=Qa,a=go,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var u=le.p;le.p=2;var m=ht;ht|=4;try{Dv(n,a.alternate,a)}finally{ht=m,le.p=u,F.T=o}}un=3}}function i1(){if(un===4||un===3){un=0,Na();var n=Qa,a=go,o=na,u=$v;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?un=5:(un=0,go=Qa=null,l1(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ka=null),zr(o),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Be,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=F.T,m=le.p,le.p=2,F.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var E=u[b];p(E.value,{componentStack:E.stack})}}finally{F.T=a,le.p=m}}(na&3)!==0&&kh(),Er(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===ig?au++:(au=0,ig=n):au=0,iu(0)}}function l1(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Uc(a)))}function kh(){return r1(),a1(),i1(),o1()}function o1(){if(un!==5)return!1;var n=Qa,a=rg;rg=0;var o=zr(na),u=F.T,m=le.p;try{le.p=32>o?32:o,F.T=null,o=ag,ag=null;var p=Qa,b=na;if(un=0,go=Qa=null,na=0,(ht&6)!==0)throw Error(s(331));var E=ht;if(ht|=4,Fv(p.current),Uv(p,p.current,b,o),ht=E,iu(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Be,p)}catch{}return!0}finally{le.p=m,F.T=u,l1(n,a)}}function c1(n,a,o){a=Is(o,a),a=L0(n.stateNode,a,2),n=Ba(n,a,2),n!==null&&(rt(n,2),Er(n))}function bt(n,a,o){if(n.tag===3)c1(n,n,o);else for(;a!==null;){if(a.tag===3){c1(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ka===null||!Ka.has(u))){n=Is(o,n),o=uv(2),u=Ba(a,o,2),u!==null&&(dv(o,u,a,n),rt(u,2),Er(u));break}}a=a.return}}function cg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new gj;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(tg=!0,m.add(o),n=vj.bind(null,n,a,o),a.then(n,n))}function vj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,It===n&&(We&o)===o&&($t===4||$t===3&&(We&62914560)===We&&300>Vt()-Sh?(ht&2)===0&&po(n,0):ng|=o,mo===We&&(mo=0)),Er(n)}function u1(n,a){a===0&&(a=mt()),n=$i(n,a),n!==null&&(rt(n,a),Er(n))}function wj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),u1(n,o)}function _j(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),u1(n,o)}function Nj(n,a){return Mt(n,a)}var Dh=null,yo=null,ug=!1,Oh=!1,dg=!1,Ya=0;function Er(n){n!==yo&&n.next===null&&(yo===null?Dh=yo=n:yo=yo.next=n),Oh=!0,ug||(ug=!0,Tj())}function iu(n,a){if(!dg&&Oh){dg=!0;do for(var o=!1,u=Dh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,E=u.pingedLanes;p=(1<<31-nt(42|n)+1)-1,p&=m&~(b&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,m1(u,p))}else p=We,p=ye(u,u===It?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Pe(u,p)||(o=!0,m1(u,p));u=u.next}while(o);dg=!1}}function Ej(){d1()}function d1(){Oh=ug=!1;var n=0;Ya!==0&&Mj()&&(n=Ya);for(var a=Vt(),o=null,u=Dh;u!==null;){var m=u.next,p=h1(u,a);p===0?(u.next=null,o===null?Dh=m:o.next=m,m===null&&(yo=o)):(o=u,(n!==0||(p&3)!==0)&&(Oh=!0)),u=m}un!==0&&un!==5||iu(n),Ya!==0&&(Ya=0)}function h1(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-nt(p),E=1<<b,k=m[b];k===-1?((E&o)===0||(E&u)!==0)&&(m[b]=Je(E,a)):k<=a&&(n.expiredLanes|=E),p&=~E}if(a=It,o=We,o=ye(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(yt===2||yt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&gn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Pe(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&gn(u),zr(o)){case 2:case 8:o=Pr;break;case 32:o=Nn;break;case 268435456:o=Ta;break;default:o=Nn}return u=f1.bind(null,n),o=Mt(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&gn(u),n.callbackPriority=2,n.callbackNode=null,2}function f1(n,a){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(kh()&&n.callbackNode!==o)return null;var u=We;return u=ye(n,n===It?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Qv(n,u,a),h1(n,Vt()),n.callbackNode!=null&&n.callbackNode===o?f1.bind(null,n):null)}function m1(n,a){if(kh())return null;Qv(n,a,!0)}function Tj(){Pj(function(){(ht&6)!==0?Mt(ir,Ej):d1()})}function hg(){if(Ya===0){var n=no;n===0&&(n=Hn,Hn<<=1,(Hn&261888)===0&&(Hn=256)),Ya=n}return Ya}function g1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bl(""+n)}function p1(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function Sj(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=g1((m[xn]||null).action),b=u.submitter;b&&(a=(a=b[xn]||null)?g1(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var E=new xr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ya!==0){var k=b?p1(m,b):new FormData(m);k0(o,{pending:!0,data:k,method:m.method,action:p},null,k)}}else typeof p=="function"&&(E.preventDefault(),k=b?p1(m,b):new FormData(m),k0(o,{pending:!0,data:k,method:m.method,action:p},p,k))},currentTarget:m}]})}}for(var fg=0;fg<Xm.length;fg++){var mg=Xm[fg],jj=mg.toLowerCase(),Aj=mg[0].toUpperCase()+mg.slice(1);Qs(jj,"on"+Aj)}Qs(Ky,"onAnimationEnd"),Qs(Qy,"onAnimationIteration"),Qs(Xy,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(HS,"onTransitionRun"),Qs(GS,"onTransitionStart"),Qs($S,"onTransitionCancel"),Qs(Yy,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ij=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function x1(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var E=u[b],k=E.instance,Q=E.currentTarget;if(E=E.listener,k!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Xd(ne)}m.currentTarget=null,p=k}else for(b=0;b<u.length;b++){if(E=u[b],k=E.instance,Q=E.currentTarget,E=E.listener,k!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Xd(ne)}m.currentTarget=null,p=k}}}}function Qe(n,a){var o=a[Vl];o===void 0&&(o=a[Vl]=new Set);var u=n+"__bubble";o.has(u)||(y1(a,n,2,!1),o.add(u))}function gg(n,a,o){var u=0;a&&(u|=4),y1(o,n,u,a)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function pg(n){if(!n[Mh]){n[Mh]=!0,bc.forEach(function(o){o!=="selectionchange"&&(Ij.has(o)||gg(o,!1,n),gg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Mh]||(a[Mh]=!0,gg("selectionchange",!1,a))}}function y1(n,a,o,u){switch(K1(a)){case 2:var m=s4;break;case 8:m=r4;break;default:m=Rg}o=m.bind(null,a,o,n),m=void 0,!Li||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function xg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===m)break;if(b===4)for(b=u.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;E!==null;){if(b=ur(E),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){u=p=b;continue e}E=E.parentNode}}u=u.return}Ra(function(){var Q=p,ne=Ts(o),ae=[];e:{var X=Jy.get(n);if(X!==void 0){var Z=xr,Se=n;switch(n){case"keypress":if(Ui(o)===0)break e;case"keydown":case"keyup":Z=$d;break;case"focusin":Se="focus",Z=qi;break;case"focusout":Se="blur",Z=qi;break;case"beforeblur":case"afterblur":Z=qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=y;break;case Ky:case Qy:case Xy:Z=zd;break;case Yy:Z=T;break;case"scroll":case"scrollend":Z=Rc;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=qr;break;case"toggle":case"beforetoggle":Z=Fe}var Me=(a&4)!==0,At=!Me&&(n==="scroll"||n==="scrollend"),q=Me?X!==null?X+"Capture":null:X;Me=[];for(var L=Q,K;L!==null;){var se=L;if(K=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||K===null||q===null||(se=Hs(L,q),se!=null&&Me.push(ou(L,se,K))),At)break;L=L.return}0<Me.length&&(X=new Z(X,Se,null,o,ne),ae.push({event:X,listeners:Me}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",X&&o!==Ac&&(Se=o.relatedTarget||o.fromElement)&&(ur(Se)||Se[or]))break e;if((Z||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(Se=o.relatedTarget||o.toElement,Z=Q,Se=Se?ur(Se):null,Se!==null&&(At=c(Se),Me=Se.tag,Se!==At||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(Z=null,Se=Q),Z!==Se)){if(Me=kc,se="onMouseLeave",q="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Me=qr,se="onPointerLeave",q="onPointerEnter",L="pointer"),At=Z==null?X:rs(Z),K=Se==null?X:rs(Se),X=new Me(se,L+"leave",Z,o,ne),X.target=At,X.relatedTarget=K,se=null,ur(ne)===Q&&(Me=new Me(q,L+"enter",Se,o,ne),Me.target=K,Me.relatedTarget=At,se=Me),At=se,Z&&Se)t:{for(Me=Cj,q=Z,L=Se,K=0,se=q;se;se=Me(se))K++;se=0;for(var De=L;De;De=Me(De))se++;for(;0<K-se;)q=Me(q),K--;for(;0<se-K;)L=Me(L),se--;for(;K--;){if(q===L||L!==null&&q===L.alternate){Me=q;break t}q=Me(q),L=Me(L)}Me=null}else Me=null;Z!==null&&b1(ae,X,Z,Me,!1),Se!==null&&At!==null&&b1(ae,At,Se,Me,!0)}}e:{if(X=Q?rs(Q):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var ot=Vy;else if(Oy(X))if(Py)ot=BS;else{ot=zS;var Ae=LS}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ul(Q.elementType)&&(ot=Vy):ot=US;if(ot&&(ot=ot(n,Q))){My(ae,ot,o,ne);break e}Ae&&Ae(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Tc(X,"number",X.value)}switch(Ae=Q?rs(Q):window,n){case"focusin":(Oy(Ae)||Ae.contentEditable==="true")&&(Ql=Ae,$m=Q,Pc=null);break;case"focusout":Pc=$m=Ql=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,Gy(ae,o,ne);break;case"selectionchange":if(FS)break;case"keydown":case"keyup":Gy(ae,o,ne)}var Ge;if(dt)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Kl?Fi(n,o)&&(Ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ze="onCompositionStart");Ze&&(vr&&o.locale!=="ko"&&(Kl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Kl&&(Ge=Cc()):(pr=ne,Ic="value"in pr?pr.value:pr.textContent,Kl=!0)),Ae=Vh(Q,Ze),0<Ae.length&&(Ze=new br(Ze,n,null,o,ne),ae.push({event:Ze,listeners:Ae}),Ge?Ze.data=Ge:(Ge=$l(o),Ge!==null&&(Ze.data=Ge)))),(Ge=js?OS(n,o):MS(n,o))&&(Ze=Vh(Q,"onBeforeInput"),0<Ze.length&&(Ae=new br("onBeforeInput","beforeinput",null,o,ne),ae.push({event:Ae,listeners:Ze}),Ae.data=Ge)),Sj(ae,n,Q,o,ne)}x1(ae,a)})}function ou(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Vh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Hs(n,o),m!=null&&u.unshift(ou(n,m,p)),m=Hs(n,a),m!=null&&u.push(ou(n,m,p))),n.tag===3)return u;n=n.return}return[]}function Cj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function b1(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var E=o,k=E.alternate,Q=E.stateNode;if(E=E.tag,k!==null&&k===u)break;E!==5&&E!==26&&E!==27||Q===null||(k=Q,m?(Q=Hs(o,p),Q!=null&&b.unshift(ou(o,Q,k))):m||(Q=Hs(o,p),Q!=null&&b.push(ou(o,Q,k)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var Rj=/\r\n?/g,kj=/\u0000|\uFFFD/g;function v1(n){return(typeof n=="string"?n:""+n).replace(Rj,`
`).replace(kj,"")}function w1(n,a){return a=v1(a),v1(n)===a}function jt(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||$n(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&$n(n,""+u);break;case"className":as(n,"class",u);break;case"tabIndex":as(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":as(n,o,u);break;case"style":jc(n,u,p);break;case"data":if(a!=="object"){as(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Bl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&jt(n,a,"name",m.name,m,null),jt(n,a,"formEncType",m.formEncType,m,null),jt(n,a,"formMethod",m.formMethod,m,null),jt(n,a,"formTarget",m.formTarget,m,null)):(jt(n,a,"encType",m.encType,m,null),jt(n,a,"method",m.method,m,null),jt(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Bl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Bl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Ll(n,"popover",u);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ll(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Vd.get(o)||o,Ll(n,o,u))}}function yg(n,a,o,u,m,p){switch(o){case"style":jc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?$n(n,u):(typeof u=="number"||typeof u=="bigint")&&$n(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[xn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ll(n,o,u)}}}function An(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:jt(n,a,p,b,o,null)}}m&&jt(n,a,"srcSet",o.srcSet,o,null),u&&jt(n,a,"src",o.src,o,null);return;case"input":Qe("invalid",n);var E=p=b=m=null,k=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":m=ne;break;case"type":b=ne;break;case"checked":k=ne;break;case"defaultChecked":Q=ne;break;case"value":p=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:jt(n,a,u,ne,o,null)}}Dd(n,p,E,k,Q,b,m,!1);return;case"select":Qe("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:jt(n,a,m,E,o,null)}a=p,o=b,n.multiple=!!u,a!=null?ja(n,!!u,a,!1):o!=null&&ja(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:jt(n,a,b,E,o,null)}Aa(n,u,m,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:jt(n,a,k,u,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<lu.length;u++)Qe(lu[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:jt(n,a,Q,u,o,null)}return;default:if(Ul(a)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&yg(n,a,ne,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&jt(n,a,E,u,o,null))}function Dj(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,E=null,k=null,Q=null,ne=null;for(Z in o){var ae=o[Z];if(o.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=ae;default:u.hasOwnProperty(Z)||jt(n,a,Z,null,u,ae)}}for(var X in u){var Z=u[X];if(ae=o[X],u.hasOwnProperty(X)&&(Z!=null||ae!=null))switch(X){case"type":p=Z;break;case"name":m=Z;break;case"checked":Q=Z;break;case"defaultChecked":ne=Z;break;case"value":b=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:Z!==ae&&jt(n,a,X,Z,u,ae)}}zl(n,b,E,k,Q,ne,p,m);return;case"select":Z=b=E=X=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":Z=k;default:u.hasOwnProperty(p)||jt(n,a,p,null,u,k)}for(m in u)if(p=u[m],k=o[m],u.hasOwnProperty(m)&&(p!=null||k!=null))switch(m){case"value":X=p;break;case"defaultValue":E=p;break;case"multiple":b=p;default:p!==k&&jt(n,a,m,p,u,k)}a=E,o=b,u=Z,X!=null?ja(n,!!o,X,!1):!!u!=!!o&&(a!=null?ja(n,!!o,a,!0):ja(n,!!o,o?[]:"",!1));return;case"textarea":Z=X=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:jt(n,a,E,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&jt(n,a,b,m,u,p)}Od(n,X,Z);return;case"option":for(var Se in o)if(X=o[Se],o.hasOwnProperty(Se)&&X!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:jt(n,a,Se,null,u,X)}for(k in u)if(X=u[k],Z=o[k],u.hasOwnProperty(k)&&X!==Z&&(X!=null||Z!=null))switch(k){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:jt(n,a,k,X,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)X=o[Me],o.hasOwnProperty(Me)&&X!=null&&!u.hasOwnProperty(Me)&&jt(n,a,Me,null,u,X);for(Q in u)if(X=u[Q],Z=o[Q],u.hasOwnProperty(Q)&&X!==Z&&(X!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:jt(n,a,Q,X,u,Z)}return;default:if(Ul(a)){for(var At in o)X=o[At],o.hasOwnProperty(At)&&X!==void 0&&!u.hasOwnProperty(At)&&yg(n,a,At,void 0,u,X);for(ne in u)X=u[ne],Z=o[ne],!u.hasOwnProperty(ne)||X===Z||X===void 0&&Z===void 0||yg(n,a,ne,X,u,Z);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&jt(n,a,q,null,u,X);for(ae in u)X=u[ae],Z=o[ae],!u.hasOwnProperty(ae)||X===Z||X==null&&Z==null||jt(n,a,ae,X,u,Z)}function _1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Oj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,E=m.duration;if(p&&E&&_1(b)){for(b=0,E=m.responseEnd,u+=1;u<o.length;u++){var k=o[u],Q=k.startTime;if(Q>E)break;var ne=k.transferSize,ae=k.initiatorType;ne&&_1(ae)&&(k=k.responseEnd,b+=ne*(k<E?1:(E-Q)/(k-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var bg=null,vg=null;function Ph(n){return n.nodeType===9?n:n.ownerDocument}function N1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E1(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function wg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _g=null;function Mj(){var n=window.event;return n&&n.type==="popstate"?n===_g?!1:(_g=n,!0):(_g=null,!1)}var T1=typeof setTimeout=="function"?setTimeout:void 0,Vj=typeof clearTimeout=="function"?clearTimeout:void 0,S1=typeof Promise=="function"?Promise:void 0,Pj=typeof queueMicrotask=="function"?queueMicrotask:typeof S1<"u"?function(n){return S1.resolve(null).then(n).catch(Lj)}:T1;function Lj(n){setTimeout(function(){throw n})}function Ja(n){return n==="head"}function j1(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),_o(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")cu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,cu(o);for(var p=o.firstChild;p;){var b=p.nextSibling,E=p.nodeName;p[cr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&cu(n.ownerDocument.body);o=m}while(o);_o(a)}function A1(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Ng(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ng(o),Pl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function zj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[cr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Os(n.nextSibling),n===null)break}return null}function Uj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Os(n.nextSibling),n===null))return null;return n}function I1(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Os(n.nextSibling),n===null))return null;return n}function Eg(n){return n.data==="$?"||n.data==="$~"}function Tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Bj(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Os(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Sg=null;function C1(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Os(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function R1(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function k1(n,a,o){switch(a=Ph(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function cu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Pl(n)}var Ms=new Map,D1=new Set;function Lh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sa=le.d;le.d={f:qj,r:Fj,D:Hj,C:Gj,L:$j,m:Kj,X:Xj,S:Qj,M:Yj};function qj(){var n=sa.f(),a=Ih();return n||a}function Fj(n){var a=Es(n);a!==null&&a.tag===5&&a.type==="form"?Yb(a):sa.r(n)}var bo=typeof document>"u"?null:document;function O1(n,a,o){var u=bo;if(u&&typeof a=="string"&&a){var m=Gn(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),D1.has(m)||(D1.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),An(a,"link",n),tn(a),u.head.appendChild(a)))}}function Hj(n){sa.D(n),O1("dns-prefetch",n,null)}function Gj(n,a){sa.C(n,a),O1("preconnect",n,a)}function $j(n,a,o){sa.L(n,a,o);var u=bo;if(u&&n&&a){var m='link[rel="preload"][as="'+Gn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Gn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Gn(o.imageSizes)+'"]')):m+='[href="'+Gn(n)+'"]';var p=m;switch(a){case"style":p=vo(n);break;case"script":p=wo(n)}Ms.has(p)||(n=w({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Ms.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(uu(p))||a==="script"&&u.querySelector(du(p))||(a=u.createElement("link"),An(a,"link",n),tn(a),u.head.appendChild(a)))}}function Kj(n,a){sa.m(n,a);var o=bo;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Gn(u)+'"][href="'+Gn(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=wo(n)}if(!Ms.has(p)&&(n=w({rel:"modulepreload",href:n},a),Ms.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(du(p)))return}u=o.createElement("link"),An(u,"link",n),tn(u),o.head.appendChild(u)}}}function Qj(n,a,o){sa.S(n,a,o);var u=bo;if(u&&n){var m=dr(u).hoistableStyles,p=vo(n);a=a||"default";var b=m.get(p);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(uu(p)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Ms.get(p))&&jg(n,o);var k=b=u.createElement("link");tn(k),An(k,"link",n),k._p=new Promise(function(Q,ne){k.onload=Q,k.onerror=ne}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,zh(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:E},m.set(p,b)}}}function Xj(n,a){sa.X(n,a);var o=bo;if(o&&n){var u=dr(o).hoistableScripts,m=wo(n),p=u.get(m);p||(p=o.querySelector(du(m)),p||(n=w({src:n,async:!0},a),(a=Ms.get(m))&&Ag(n,a),p=o.createElement("script"),tn(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Yj(n,a){sa.M(n,a);var o=bo;if(o&&n){var u=dr(o).hoistableScripts,m=wo(n),p=u.get(m);p||(p=o.querySelector(du(m)),p||(n=w({src:n,async:!0,type:"module"},a),(a=Ms.get(m))&&Ag(n,a),p=o.createElement("script"),tn(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function M1(n,a,o,u){var m=(m=Re.current)?Lh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=vo(o.href),o=dr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=vo(o.href);var p=dr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(uu(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Ms.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ms.set(n,o),p||Jj(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=wo(o),o=dr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function vo(n){return'href="'+Gn(n)+'"'}function uu(n){return'link[rel="stylesheet"]['+n+"]"}function V1(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function Jj(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),An(a,"link",o),tn(a),n.head.appendChild(a))}function wo(n){return'[src="'+Gn(n)+'"]'}function du(n){return"script[async]"+n}function P1(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+Gn(o.href)+'"]');if(u)return a.instance=u,tn(u),u;var m=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),tn(u),An(u,"style",m),zh(u,o.precedence,n),a.instance=u;case"stylesheet":m=vo(o.href);var p=n.querySelector(uu(m));if(p)return a.state.loading|=4,a.instance=p,tn(p),p;u=V1(o),(m=Ms.get(m))&&jg(u,m),p=(n.ownerDocument||n).createElement("link"),tn(p);var b=p;return b._p=new Promise(function(E,k){b.onload=E,b.onerror=k}),An(p,"link",u),a.state.loading|=4,zh(p,o.precedence,n),a.instance=p;case"script":return p=wo(o.src),(m=n.querySelector(du(p)))?(a.instance=m,tn(m),m):(u=o,(m=Ms.get(p))&&(u=w({},o),Ag(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),tn(m),An(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,zh(u,o.precedence,n));return a.instance}function zh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===a)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function jg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Ag(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Uh=null;function L1(n,a,o){if(Uh===null){var u=new Map,m=Uh=new Map;m.set(o,u)}else m=Uh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[cr]||p[en]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var E=u.get(b);E?E.push(p):u.set(b,[p])}}return u}function z1(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function Wj(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function U1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Zj(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=vo(u.href),p=a.querySelector(uu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Bh.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,tn(p);return}p=a.ownerDocument||a,u=V1(u),(m=Ms.get(m))&&jg(u,m),p=p.createElement("link"),tn(p);var b=p;b._p=new Promise(function(E,k){b.onload=E,b.onerror=k}),An(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Bh.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var Ig=0;function e4(n,a){return n.stylesheets&&n.count===0&&Fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&Ig===0&&(Ig=62500*Oj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ig?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Bh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var qh=null;function Fh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,qh=new Map,a.forEach(t4,n),qh=null,Bh.call(n))}function t4(n,a){if(!(a.state.loading&4)){var o=qh.get(n);if(o)var u=o.get(null);else{o=new Map,qh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=Bh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var hu={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function n4(n,a,o,u,m,p,b,E,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function B1(n,a,o,u,m,p,b,E,k,Q,ne,ae){return n=new n4(n,a,o,b,k,Q,ne,ae,E),a=1,p===!0&&(a|=24),p=ls(3,null,null,a),n.current=p,p.stateNode=n,a=o0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},h0(p),n}function q1(n){return n?(n=Jl,n):Jl}function F1(n,a,o,u,m,p){m=q1(m),u.context===null?u.context=m:u.pendingContext=m,u=Ua(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ba(n,u,a),o!==null&&(Jn(o,n,a),Hc(o,n,a))}function H1(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Cg(n,a){H1(n,a),(n=n.alternate)&&H1(n,a)}function G1(n){if(n.tag===13||n.tag===31){var a=$i(n,67108864);a!==null&&Jn(a,n,67108864),Cg(n,67108864)}}function $1(n){if(n.tag===13||n.tag===31){var a=hs();a=Oi(a);var o=$i(n,a);o!==null&&Jn(o,n,a),Cg(n,a)}}var Hh=!0;function s4(n,a,o,u){var m=F.T;F.T=null;var p=le.p;try{le.p=2,Rg(n,a,o,u)}finally{le.p=p,F.T=m}}function r4(n,a,o,u){var m=F.T;F.T=null;var p=le.p;try{le.p=8,Rg(n,a,o,u)}finally{le.p=p,F.T=m}}function Rg(n,a,o,u){if(Hh){var m=kg(u);if(m===null)xg(n,a,u,Gh,o),Q1(n,u);else if(i4(m,n,a,o,u))u.stopPropagation();else if(Q1(n,u),a&4&&-1<a4.indexOf(n)){for(;m!==null;){var p=Es(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Ie(p.pendingLanes);if(b!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var k=1<<31-nt(b);E.entanglements[1]|=k,b&=~k}Er(p),(ht&6)===0&&(jh=Vt()+500,iu(0))}}break;case 31:case 13:E=$i(p,2),E!==null&&Jn(E,p,2),Ih(),Cg(p,2)}if(p=kg(u),p===null&&xg(n,a,u,Gh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else xg(n,a,u,null,o)}}function kg(n){return n=Ts(n),Dg(n)}var Gh=null;function Dg(n){if(Gh=null,n=ur(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Gh=n,null}function K1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case ir:return 2;case Pr:return 8;case Nn:case Ea:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var Og=!1,Wa=null,Za=null,ei=null,fu=new Map,mu=new Map,ti=[],a4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q1(n,a){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":fu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(a.pointerId)}}function gu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Es(a),a!==null&&G1(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function i4(n,a,o,u,m){switch(a){case"focusin":return Wa=gu(Wa,n,a,o,u,m),!0;case"dragenter":return Za=gu(Za,n,a,o,u,m),!0;case"mouseover":return ei=gu(ei,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return fu.set(p,gu(fu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,mu.set(p,gu(mu.get(p)||null,n,a,o,u,m)),!0}return!1}function X1(n){var a=ur(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Bs(n.priority,function(){$1(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,Bs(n.priority,function(){$1(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $h(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=kg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ac=u,o.target.dispatchEvent(u),Ac=null}else return a=Es(o),a!==null&&G1(a),n.blockedOn=o,!1;a.shift()}return!0}function Y1(n,a,o){$h(n)&&o.delete(a)}function l4(){Og=!1,Wa!==null&&$h(Wa)&&(Wa=null),Za!==null&&$h(Za)&&(Za=null),ei!==null&&$h(ei)&&(ei=null),fu.forEach(Y1),mu.forEach(Y1)}function Kh(n,a){n.blockedOn===a&&(n.blockedOn=null,Og||(Og=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,l4)))}var Qh=null;function J1(n){Qh!==n&&(Qh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Qh===n&&(Qh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Dg(u||o)===null)continue;break}var p=Es(o);p!==null&&(n.splice(a,3),a-=3,k0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function _o(n){function a(k){return Kh(k,n)}Wa!==null&&Kh(Wa,n),Za!==null&&Kh(Za,n),ei!==null&&Kh(ei,n),fu.forEach(a),mu.forEach(a);for(var o=0;o<ti.length;o++){var u=ti[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ti.length&&(o=ti[0],o.blockedOn===null);)X1(o),o.blockedOn===null&&ti.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[xn]||null;if(typeof p=="function")b||J1(o);else if(b){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[xn]||null)E=b.formAction;else if(Dg(m)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),J1(o)}}}function W1(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Mg(n){this._internalRoot=n}Xh.prototype.render=Mg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=hs();F1(o,u,n,a,null,null)},Xh.prototype.unmount=Mg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;F1(n.current,2,null,n,null,null),Ih(),a[or]=null}};function Xh(n){this._internalRoot=n}Xh.prototype.unstable_scheduleHydration=function(n){if(n){var a=Id();n={blockedOn:null,target:n,priority:a};for(var o=0;o<ti.length&&a!==0&&a<ti[o].priority;o++);ti.splice(o,0,n),o===0&&X1(n)}};var Z1=e.version;if(Z1!=="19.2.0")throw Error(s(527,Z1,"19.2.0"));le.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var o4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Be=Yh.inject(o4),Ye=Yh}catch{}}return xu.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=iv,p=lv,b=ov;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=B1(n,1,!1,null,null,o,u,null,m,p,b,W1),n[or]=a.current,pg(n),new Mg(a)},xu.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=iv,b=lv,E=ov,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),a=B1(n,1,!0,a,o??null,u,m,k,p,b,E,W1),a.context=q1(null),o=a.current,u=hs(),u=Oi(u),m=Ua(u),m.callback=null,Ba(o,m,u),o=u,a.current.lanes=o,rt(a,o),Er(a),n[or]=a.current,pg(n),new Xh(a)},xu.version="19.2.0",xu}var cw;function y4(){if(cw)return Lg.exports;cw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lg.exports=x4(),Lg.exports}var b4=y4();const v4=I2(b4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),uw=r=>{const e=_4(r);return e.charAt(0).toUpperCase()+e.slice(1)},R2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),N4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>V.createElement("svg",{ref:g,...E4,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:R2("lucide",l),...!c&&!N4(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,v])=>V.createElement(x,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=V.forwardRef(({className:s,...l},c)=>V.createElement(T4,{ref:c,iconNode:e,className:R2(`lucide-${w4(uw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=uw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dw=pe("activity",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ef=pe("arrow-left",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ut=pe("arrow-right",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],od=pe("award",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Jh=pe("bell",C4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ts=pe("book-open",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],qu=pe("book",k4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],k2=pe("brain",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],M4=pe("briefcase",O4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fu=pe("calendar",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],D2=pe("chart-column",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vl=pe("chevron-down",L4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ra=pe("chevron-left",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qg=pe("chevron-right",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Tf=pe("circle-alert",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ha=pe("circle-check-big",q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wn=pe("circle-check",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G4=pe("circle-play",H4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],hw=pe("circle-plus",$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oa=pe("circle-question-mark",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],X4=pe("circle-user",Q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],J4=pe("circle-x",Y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ix=pe("clock",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],e5=pe("cloud-download",Z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],O2=pe("cloud-upload",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],lc=pe("crown",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pp=pe("download",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xp=pe("eye",r5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],yp=pe("facebook",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],l5=pe("file-check",i5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],c5=pe("file-plus",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],d5=pe("file-search",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ns=pe("file-text",h5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],lx=pe("flag",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Sf=pe("flame",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Do=pe("folder-open",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],x5=pe("globe",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],fa=pe("graduation-cap",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],jf=pe("house",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],M2=pe("info",v5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],im=pe("languages",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Hu=pe("layers",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fw=pe("layout-dashboard",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],T5=pe("link",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],j5=pe("list",S5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vt=pe("loader-circle",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],bp=pe("log-in",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],li=pe("lock",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Af=pe("log-out",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jr=pe("mail",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],vp=pe("map-pin",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],wp=pe("medal",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],mw=pe("megaphone",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],P5=pe("menu",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Bo=pe("message-circle",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],lm=pe("message-square",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Gu=pe("monitor",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],V2=pe("move-right",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],F5=pe("octagon-alert",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],gw=pe("palette",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$5=pe("pen-line",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ox=pe("pen-tool",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],X5=pe("percent",Q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],J5=pe("quote",Y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],om=pe("refresh-cw",W5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],eA=pe("rocket",Z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],P2=pe("rotate-ccw",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gi=pe("save",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],cx=pe("school",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Us=pe("search",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ca=pe("send",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],lA=pe("shield-alert",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],L2=pe("shield-check",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uA=pe("smartphone",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hA=pe("sparkles",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_p=pe("square-pen",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wl=pe("star",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],z2=pe("tag",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ux=pe("target",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],yA=pe("text-align-start",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],vA=pe("timer",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wi=pe("trash-2",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],NA=pe("trending-up",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dx=pe("triangle-alert",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Mo=pe("trophy",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],jA=pe("type",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wn=pe("user",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cm=pe("users",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],RA=pe("wifi-off",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=pe("x",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],um=pe("zap",DA),OA=()=>{};var pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},MA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},B2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,v=c>>2,w=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,R=x&63;g||(R=64,d||(N=64)),s.push(t[v],t[w],t[N],t[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(U2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const w=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||w==null)throw new VA;const N=c<<2|f>>4;if(s.push(N),x!==64){const R=f<<4&240|x>>2;if(s.push(R),w!==64){const M=x<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PA=function(r){const e=U2(r);return B2.encodeByteArray(e,!0)},q2=function(r){return PA(r).replace(/\./g,"")},F2=function(r){try{return B2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=()=>H2().__FIREBASE_DEFAULTS__,zA=()=>{if(typeof process>"u"||typeof pw>"u")return;const r=pw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&F2(r[1]);return e&&JSON.parse(e)},dm=()=>{try{return OA()||LA()||zA()||UA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},BA=r=>{var e,t;return(t=(e=dm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},G2=()=>{var r;return(r=dm())==null?void 0:r.config},$2=r=>{var e;return(e=dm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K2(r){return(await fetch(r,{credentials:"include"})).ok}const Cu={};function FA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?r.emulator.push(e):r.prod.push(e);return r}function HA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let xw=!1;function GA(r,e){if(typeof window>"u"||typeof document>"u"||!oc(window.location.host)||Cu[r]===e||Cu[r]||xw)return;Cu[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=FA().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,R){N.setAttribute("width","24"),N.setAttribute("id",R),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{xw=!0,d()},N}function v(N,R){N.setAttribute("id",R),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=HA(s),R=t("text"),M=document.getElementById(R)||document.createElement("span"),W=t("learnmore"),B=document.getElementById(W)||document.createElement("a"),de=t("preprendIcon"),ce=document.getElementById(de)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const oe=N.element;f(oe),v(B,W);const we=x();g(ce,de),oe.append(ce,M,B,we),document.body.appendChild(oe)}c?(M.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Q2(){var e;const r=(e=dm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XA(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Y2(){return!Q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J2(){return!Q2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function hx(){try{return typeof indexedDB=="object"}catch{return!1}}function W2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function YA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="FirebaseError";class nr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=JA,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dl.prototype.create)}}class Dl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?WA(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new nr(l,f,s)}}function WA(r,e){return r.replace(ZA,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const ZA=/\{\$([^}]+)}/g;function eI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _i(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(yw(c)&&yw(d)){if(!_i(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function yw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Nu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Eu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function tI(r,e){const t=new nI(r,e);return t.subscribe.bind(t)}class nI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");sI(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=Fg),l.error===void 0&&(l.error=Fg),l.complete===void 0&&(l.complete=Fg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Fg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=1e3,aI=2,iI=14400*1e3,lI=.5;function bw(r,e=rI,t=aI){const s=e*Math.pow(t,r),l=Math.round(lI*s*(Math.random()-.5)*2);return Math.min(iI,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(r){return r&&r._delegate?r._delegate:r}class Zs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new qA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uI(e))try{this.getOrInitializeService({instanceIdentifier:ll})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ll){return this.instances.has(e)}getOptions(e=ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ll){return this.component?this.component.multipleInstances?e:ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cI(r){return r===ll?void 0:r}function uI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const hI={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},fI=et.INFO,mI={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},gI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=mI[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hm{constructor(e){this.name=e,this._logLevel=fI,this._logHandler=gI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const pI=(r,e)=>e.some(t=>r instanceof t);let vw,ww;function xI(){return vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yI(){return ww||(ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z2=new WeakMap,Np=new WeakMap,eN=new WeakMap,Hg=new WeakMap,fx=new WeakMap;function bI(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(pi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Z2.set(t,r)}).catch(()=>{}),fx.set(e,r),e}function vI(r){if(Np.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Np.set(r,e)}let Ep={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Np.get(r);if(e==="objectStoreNames")return r.objectStoreNames||eN.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wI(r){Ep=r(Ep)}function _I(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Gg(this),e,...t);return eN.set(s,e.sort?e.sort():[e]),pi(s)}:yI().includes(r)?function(...e){return r.apply(Gg(this),e),pi(Z2.get(this))}:function(...e){return pi(r.apply(Gg(this),e))}}function NI(r){return typeof r=="function"?_I(r):(r instanceof IDBTransaction&&vI(r),pI(r,xI())?new Proxy(r,Ep):r)}function pi(r){if(r instanceof IDBRequest)return bI(r);if(Hg.has(r))return Hg.get(r);const e=NI(r);return e!==r&&(Hg.set(r,e),fx.set(e,r)),e}const Gg=r=>fx.get(r);function tN(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=pi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(pi(d.result),g.oldVersion,g.newVersion,pi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const EI=["get","getKey","getAll","getAllKeys","count"],TI=["put","add","delete","clear"],$g=new Map;function _w(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=TI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||EI.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return $g.set(e,c),c}wI(r=>({...r,get:(e,t,s)=>_w(e,t)||r.get(e,t,s),has:(e,t)=>!!_w(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function jI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",Nw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new hm("@firebase/app"),AI="@firebase/app-compat",II="@firebase/analytics-compat",CI="@firebase/analytics",RI="@firebase/app-check-compat",kI="@firebase/app-check",DI="@firebase/auth",OI="@firebase/auth-compat",MI="@firebase/database",VI="@firebase/data-connect",PI="@firebase/database-compat",LI="@firebase/functions",zI="@firebase/functions-compat",UI="@firebase/installations",BI="@firebase/installations-compat",qI="@firebase/messaging",FI="@firebase/messaging-compat",HI="@firebase/performance",GI="@firebase/performance-compat",$I="@firebase/remote-config",KI="@firebase/remote-config-compat",QI="@firebase/storage",XI="@firebase/storage-compat",YI="@firebase/firestore",JI="@firebase/ai",WI="@firebase/firestore-compat",ZI="firebase",e3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",t3={[Tp]:"fire-core",[AI]:"fire-core-compat",[CI]:"fire-analytics",[II]:"fire-analytics-compat",[kI]:"fire-app-check",[RI]:"fire-app-check-compat",[DI]:"fire-auth",[OI]:"fire-auth-compat",[MI]:"fire-rtdb",[VI]:"fire-data-connect",[PI]:"fire-rtdb-compat",[LI]:"fire-fn",[zI]:"fire-fn-compat",[UI]:"fire-iid",[BI]:"fire-iid-compat",[qI]:"fire-fcm",[FI]:"fire-fcm-compat",[HI]:"fire-perf",[GI]:"fire-perf-compat",[$I]:"fire-rc",[KI]:"fire-rc-compat",[QI]:"fire-gcs",[XI]:"fire-gcs-compat",[YI]:"fire-fst",[WI]:"fire-fst-compat",[JI]:"fire-vertex","fire-js":"fire-js",[ZI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Map,n3=new Map,jp=new Map;function Ew(r,e){try{r.container.addComponent(e)}catch(t){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Or(r){const e=r.name;if(jp.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,r);for(const t of If.values())Ew(t,r);for(const t of n3.values())Ew(t,r);return!0}function Ol(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Vs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Dl("app","Firebase",s3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=e3;function nN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Sp,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw xi.create("bad-app-name",{appName:String(l)});if(t||(t=G2()),!t)throw xi.create("no-options");const c=If.get(l);if(c){if(_i(t,c.options)&&_i(s,c.config))return c;throw xi.create("duplicate-app",{appName:l})}const d=new dI(l);for(const g of jp.values())d.addComponent(g);const f=new r3(t,s,d);return If.set(l,f),f}function sN(r=Sp){const e=If.get(r);if(!e&&r===Sp&&G2())return nN();if(!e)throw xi.create("no-app",{appName:r});return e}function Ls(r,e,t){let s=t3[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(d.join(" "));return}Or(new Zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="firebase-heartbeat-database",i3=1,$u="firebase-heartbeat-store";let Kg=null;function rN(){return Kg||(Kg=tN(a3,i3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($u)}catch(t){console.warn(t)}}}}).catch(r=>{throw xi.create("idb-open",{originalErrorMessage:r.message})})),Kg}async function l3(r){try{const t=(await rN()).transaction($u),s=await t.objectStore($u).get(aN(r));return await t.done,s}catch(e){if(e instanceof nr)ma.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(t.message)}}}async function Tw(r,e){try{const s=(await rN()).transaction($u,"readwrite");await s.objectStore($u).put(e,aN(r)),await s.done}catch(t){if(t instanceof nr)ma.warn(t.message);else{const s=xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ma.warn(s.message)}}}function aN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=1024,c3=30;class u3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h3(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Sw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>c3){const d=f3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ma.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sw(),{heartbeatsToSend:s,unsentEntries:l}=d3(this._heartbeatsCache.heartbeats),c=q2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ma.warn(t),""}}}function Sw(){return new Date().toISOString().substring(0,10)}function d3(r,e=o3){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),jw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),jw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class h3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hx()?W2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Tw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Tw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jw(r){return q2(JSON.stringify({version:2,heartbeats:r})).length}function f3(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(r){Or(new Zs("platform-logger",e=>new SI(e),"PRIVATE")),Or(new Zs("heartbeat",e=>new u3(e),"PRIVATE")),Ls(Tp,Nw,r),Ls(Tp,Nw,"esm2020"),Ls("fire-js","")}m3("");var g3="firebase",p3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(g3,p3,"app");function iN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x3=iN,lN=new Dl("auth","Firebase",iN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new hm("@firebase/auth");function y3(r,...e){Cf.logLevel<=et.WARN&&Cf.warn(`Auth (${cc}): ${r}`,...e)}function of(r,...e){Cf.logLevel<=et.ERROR&&Cf.error(`Auth (${cc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(r,...e){throw mx(r,...e)}function Cr(r,...e){return mx(r,...e)}function oN(r,e,t){const s={...x3(),[e]:t};return new Dl("auth","Firebase",s).create(e,{appName:r.name})}function ua(r){return oN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return lN.create(r,...e)}function Ve(r,e,...t){if(!r)throw mx(e,...t)}function aa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw of(e),new Error(e)}function ga(r,e){r||aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function b3(){return Aw()==="http:"||Aw()==="https:"}function Aw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b3()||X2()||"connection"in navigator)?navigator.onLine:!0}function w3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.shortDelay=e,this.longDelay=t,ga(t>e,"Short delay should be less than long delay!"),this.isMobile=$A()||QA()}get(){return v3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(r,e){ga(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E3=new ud(3e4,6e4);function ya(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ba(r,e,t,s,l={}){return uN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=cd({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return KA()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&oc(r.emulatorConfig.host)&&(x.credentials="include"),cN.fetch()(await dN(r,r.config.apiHost,t,f),x)})}async function uN(r,e,t){r._canInitEmulator=!1;const s={..._3,...e};try{const l=new S3(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Wh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Wh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Wh(r,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw oN(r,v,x);er(r,v)}}catch(l){if(l instanceof nr)throw l;er(r,"network-request-failed",{message:String(l)})}}async function dd(r,e,t,s,l={}){const c=await ba(r,e,t,s,l);return"mfaPendingCredential"in c&&er(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function dN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?gx(r.config,l):`${r.config.apiScheme}://${l}`;return N3.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function T3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Cr(this.auth,"network-request-failed")),E3.get())})}}function Wh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Cr(r,e,s);return l.customData._tokenResponse=t,l}function Iw(r){return r!==void 0&&r.enterprise!==void 0}class j3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return T3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A3(r,e){return ba(r,"GET","/v2/recaptchaConfig",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(r,e){return ba(r,"POST","/v1/accounts:delete",e)}async function Rf(r,e){return ba(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C3(r,e=!1){const t=Bt(r),s=await t.getIdToken(e),l=px(s);Ve(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Ru(Qg(l.auth_time)),issuedAtTime:Ru(Qg(l.iat)),expirationTime:Ru(Qg(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Qg(r){return Number(r)*1e3}function px(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{const l=F2(t);return l?JSON.parse(l):(of("Failed to decode base64 JWT payload"),null)}catch(l){return of("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Cw(r){const e=px(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof nr&&R3(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function R3({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(r){var w;const e=r.auth,t=await r.getIdToken(),s=await Ku(r,Rf(e,{idToken:t}));Ve(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?hN(l.providerUserInfo):[],d=O3(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,v)}async function D3(r){const e=Bt(r);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O3(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function hN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(r,e){const t=await uN(r,{},async()=>{const s=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await dN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&oc(r.emulatorConfig.host)&&(g.credentials="include"),cN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function V3(r,e){return ba(r,"POST","/v2/accounts:revokeToken",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Cw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await M3(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Vo;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Ve(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ve(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ws{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new k3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ip(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return C3(this,e)}reload(){return D3(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ws({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vs(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await Ku(this,I3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:R,providerData:M,stsTokenManager:W}=t;Ve(w&&W,e,"internal-error");const B=Vo.fromJSON(this.name,W);Ve(typeof w=="string",e,"internal-error"),si(s,e.name),si(l,e.name),Ve(typeof N=="boolean",e,"internal-error"),Ve(typeof R=="boolean",e,"internal-error"),si(c,e.name),si(d,e.name),si(f,e.name),si(g,e.name),si(x,e.name),si(v,e.name);const de=new Ws({uid:w,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:R,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:B,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(de.providerData=M.map(ce=>({...ce}))),g&&(de._redirectEventId=g),de}static async _fromIdTokenResponse(e,t,s=!1){const l=new Vo;l.updateFromServerResponse(t);const c=new Ws({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await kf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Ve(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?hN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Vo;f.updateFromIdToken(s);const g=new Ws({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;function ia(r){ga(r instanceof Function,"Expected a class definition");let e=Rw.get(r);return e?(ga(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Rw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fN.type="NONE";const kw=fN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e,t){return`firebase:${r}:${e}:${t}`}class Po{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=cf(this.userKey,l.apiKey,c),this.fullPersistenceKey=cf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?Ws._fromGetAccountInfoResponse(this.auth,t,e):null}return Ws._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Po(ia(kw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ia(kw);const d=cf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const v=await x._get(d);if(v){let w;if(typeof v=="string"){const N=await Rf(e,{idToken:v}).catch(()=>{});if(!N)break;w=await Ws._fromGetAccountInfoResponse(e,N,v)}else w=Ws._fromJSON(e,v);x!==c&&(f=w),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Po(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Po(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bN(e))return"Blackberry";if(vN(e))return"Webos";if(gN(e))return"Safari";if((e.includes("chrome/")||pN(e))&&!e.includes("edge/"))return"Chrome";if(yN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mN(r=fn()){return/firefox\//i.test(r)}function gN(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pN(r=fn()){return/crios\//i.test(r)}function xN(r=fn()){return/iemobile/i.test(r)}function yN(r=fn()){return/android/i.test(r)}function bN(r=fn()){return/blackberry/i.test(r)}function vN(r=fn()){return/webos/i.test(r)}function xx(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function P3(r=fn()){var e;return xx(r)&&!!((e=window.navigator)!=null&&e.standalone)}function L3(){return XA()&&document.documentMode===10}function wN(r=fn()){return xx(r)||yN(r)||vN(r)||bN(r)||/windows phone/i.test(r)||xN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r,e=[]){let t;switch(r){case"Browser":t=Dw(fn());break;case"Worker":t=`${Dw(fn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(r,e={}){return ba(r,"GET","/v2/passwordPolicy",ya(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=6;class q3{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ow(this),this.idTokenSubscription=new Ow(this),this.beforeStateQueue=new z3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),s=await Ws._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Vs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vs(this.app))return Promise.reject(ua(this));const t=e?Bt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vs(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vs(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U3(this),t=new q3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await V3(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Vs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&y3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ji(r){return Bt(r)}class Ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=tI(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H3(r){fm=r}function NN(r){return fm.loadJS(r)}function G3(){return fm.recaptchaEnterpriseScript}function $3(){return fm.gapiScript}function K3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Q3{constructor(){this.enterprise=new X3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class X3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Y3="recaptcha-enterprise",EN="NO_RECAPTCHA";class J3{constructor(e){this.type=Y3,this.auth=ji(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{A3(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new j3(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;Iw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(EN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q3().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&Iw(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=G3();g.length!==0&&(g+=f),NN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Mw(r,e,t,s=!1,l=!1){const c=new J3(r);let d;if(l)d=EN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Df(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Mw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Mw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(r,e){const t=Ol(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(_i(c,e??{}))return l;er(l,"already-initialized")}return t.initialize({options:e})}function Z3(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ia);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function eC(r,e,t){const s=ji(r);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=TN(e),{host:d,port:f}=tC(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},v=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(_i(x,s.config.emulator)&&_i(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,oc(d)?(K2(`${c}//${d}${g}`),GA("Auth",!0)):nC()}function TN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function tC(r){const e=TN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Vw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Vw(d)}}}function Vw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function nC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,t){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function sC(r,e){return ba(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(r,e){return dd(r,"POST","/v1/accounts:signInWithPassword",ya(r,e))}async function aC(r,e){return ba(r,"POST","/v1/accounts:sendOobCode",ya(r,e))}async function iC(r,e){return aC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(r,e){return dd(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}async function oC(r,e){return dd(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends yx{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Qu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Qu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,t,"signInWithPassword",rC);case"emailLink":return lC(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,s,"signUpPassword",sC);case"emailLink":return oC(e,{idToken:t,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r,e){return dd(r,"POST","/v1/accounts:signInWithIdp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="http://localhost";class _l extends yx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new _l(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:cC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dC(r){const e=Nu(Eu(r)).link,t=e?Nu(Eu(e)).deep_link_id:null,s=Nu(Eu(r)).deep_link_id;return(s?Nu(Eu(s)).link:null)||s||t||e||r}class bx{constructor(e){const t=Nu(Eu(e)),s=t.apiKey??null,l=t.oobCode??null,c=uC(t.mode??null);Ve(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=dC(e);try{return new bx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,t){return Qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=bx.parseLink(t);return Ve(s,"argument-error"),Qu._fromEmailAndCode(e,s.code,s.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends SN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends hd{constructor(){super("facebook.com")}static credential(e){return _l._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _l._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends hd{constructor(){super("github.com")}static credential(e){return _l._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends hd{constructor(){super("twitter.com")}static credential(e,t){return _l._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(r,e){return dd(r,"POST","/v1/accounts:signUp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await Ws._fromIdTokenResponse(e,s,l),d=Pw(s);return new Nl({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Pw(s);return new Nl({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Pw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends nr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new Of(e,t,s,l)}}function jN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(r,c,e,s):c})}async function fC(r,e,t=!1){const s=await Ku(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Nl._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e,t=!1){const{auth:s}=r;if(Vs(s.app))return Promise.reject(ua(s));const l="reauthenticate";try{const c=await Ku(r,jN(s,l,e,r),t);Ve(c.idToken,s,"internal-error");const d=px(c.idToken);Ve(d,s,"internal-error");const{sub:f}=d;return Ve(r.uid===f,s,"user-mismatch"),Nl._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&er(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s="signIn",l=await jN(r,s,e),c=await Nl._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function gC(r,e){return AN(ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(r){const e=ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pC(r,e,t){const s=ji(r);await Df(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",iC)}async function xC(r,e,t){if(Vs(r.app))return Promise.reject(ua(r));const s=ji(r),d=await Df(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&IN(r),g}),f=await Nl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function yC(r,e,t){return Vs(r.app)?Promise.reject(ua(r)):gC(Bt(r),uc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IN(r),s})}function bC(r,e,t,s){return Bt(r).onIdTokenChanged(e,t,s)}function vC(r,e,t){return Bt(r).beforeAuthStateChanged(e,t)}function wC(r,e,t,s){return Bt(r).onAuthStateChanged(e,t,s)}function _C(r){return Bt(r).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=1e3,EC=10;class RN extends CN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);L3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,EC):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},NC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RN.type="LOCAL";const TC=RN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN extends CN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kN.type="SESSION";const DN=kN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new mm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await SC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=vx("",20);l.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function AC(r){Rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function IC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function RC(){return ON()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firebaseLocalStorageDb",kC=1,Vf="firebaseLocalStorage",VN="fbase_key";class fd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(r,e){return r.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function DC(){const r=indexedDB.deleteDatabase(MN);return new fd(r).toPromise()}function Cp(){const r=indexedDB.open(MN,kC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Vf,{keyPath:VN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Vf)?e(s):(s.close(),await DC(),e(await Cp()))})})}async function Lw(r,e,t){const s=gm(r,!0).put({[VN]:e,value:t});return new fd(s).toPromise()}async function OC(r,e){const t=gm(r,!1).get(e),s=await new fd(t).toPromise();return s===void 0?null:s.value}function zw(r,e){const t=gm(r,!0).delete(e);return new fd(t).toPromise()}const MC=800,VC=3;class PN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>VC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ON()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(RC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new jC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await Lw(e,Mf,"1"),await zw(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Lw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>OC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=gm(l,!1).getAll();return new fd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PN.type="LOCAL";const PC=PN;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(r,e){return e?ia(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends yx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zC(r){return AN(r.auth,new wx(r),r.bypassAuthState)}function UC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),mC(t,new wx(r),r.bypassAuthState)}async function BC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),fC(t,new wx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zC;case"linkViaPopup":case"linkViaRedirect":return BC;case"reauthViaPopup":case"reauthViaRedirect":return UC;default:er(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new ud(2e3,1e4);class Oo extends LN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qC.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="pendingRedirect",uf=new Map;class HC extends LN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const s=await GC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GC(r,e){const t=QC(e),s=KC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function $C(r,e){uf.set(r._key(),e)}function KC(r){return ia(r._redirectPersistence)}function QC(r){return cf(FC,r.config.apiKey,r.name)}async function XC(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s=ji(r),l=LC(s,e),d=await new HC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=600*1e3;class JC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!zN(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uw(e))}saveEventToCache(e){this.cachedEventUids.add(Uw(e)),this.lastProcessedEventTime=Date.now()}}function Uw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zN({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zN(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(r,e={}){return ba(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tR=/^https?/;async function nR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZC(r);for(const t of e)try{if(sR(t))return}catch{}er(r,"unauthorized-domain")}function sR(r){const e=Ap(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!tR.test(t))return!1;if(eR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new ud(3e4,6e4);function Bw(){const r=Rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function aR(r){return new Promise((e,t)=>{var l,c,d;function s(){Bw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bw(),t(Cr(r,"network-request-failed"))},timeout:rR.get()})}if((c=(l=Rr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Rr().gapi)!=null&&d.load)s();else{const f=K3("iframefcb");return Rr()[f]=()=>{gapi.load?s():t(Cr(r,"network-request-failed"))},NN(`${$3()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw df=null,e})}let df=null;function iR(r){return df=df||aR(r),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new ud(5e3,15e3),oR="__/auth/iframe",cR="emulator/auth/iframe",uR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hR(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gx(e,cR):`https://${r.config.authDomain}/${oR}`,s={apiKey:e.apiKey,appName:r.name,v:cc},l=dR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${cd(s).slice(1)}`}async function fR(r){const e=await iR(r),t=Rr().gapi;return Ve(t,r,"internal-error"),e.open({where:document.body,url:hR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Cr(r,"network-request-failed"),f=Rr().setTimeout(()=>{c(d)},lR.get());function g(){Rr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gR=500,pR=600,xR="_blank",yR="http://localhost";class qw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(r,e,t,s=gR,l=pR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...mR,width:s.toString(),height:l.toString(),top:c,left:d},x=fn().toLowerCase();t&&(f=pN(x)?xR:t),mN(x)&&(e=e||yR,g.scrollbars="yes");const v=Object.entries(g).reduce((N,[R,M])=>`${N}${R}=${M},`,"");if(P3(x)&&f!=="_self")return vR(e||"",f),new qw(null);const w=window.open(e||"",f,v);Ve(w,r,"popup-blocked");try{w.focus()}catch{}return new qw(w)}function vR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="__/auth/handler",_R="emulator/auth/handler",NR=encodeURIComponent("fac");async function Fw(r,e,t,s,l,c){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:cc,eventId:l};if(e instanceof SN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",eI(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))d[v]=w}if(e instanceof hd){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(d.scopes=v.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),x=g?`#${NR}=${encodeURIComponent(g)}`:"";return`${ER(r)}?${cd(f).slice(1)}${x}`}function ER({config:r}){return r.emulator?gx(r,_R):`https://${r.authDomain}/${wR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="webStorageSupport";class TR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DN,this._completeRedirectFn=XC,this._overrideRedirectResult=$C}async _openPopup(e,t,s,l){var d;ga((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Fw(e,t,s,Ap(),l);return bR(e,c,vx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Fw(e,t,s,Ap(),l);return AC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(ga(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await fR(e),s=new JC(e);return t.register("authEvent",l=>(Ve(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xg,{type:Xg},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Xg];c!==void 0&&t(!!c),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wN()||gN()||xx()}}const SR=TR;var Hw="@firebase/auth",Gw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IR(r){Or(new Zs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_N(r)},x=new F3(s,l,c,g);return Z3(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Or(new Zs("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(s=>new jR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Hw,Gw,AR(r)),Ls(Hw,Gw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=300,RR=$2("authIdTokenMaxAge")||CR;let $w=null;const kR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>RR)return;const l=t==null?void 0:t.token;$w!==l&&($w=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function DR(r=sN()){const e=Ol(r,"auth");if(e.isInitialized())return e.getImmediate();const t=W3(r,{popupRedirectResolver:SR,persistence:[PC,TC,DN]}),s=$2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kR(c.toString());vC(t,d,()=>d(t.currentUser)),bC(t,f=>d(f))}}const l=BA("auth");return l&&eC(t,`http://${l}`),t}function OR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}H3({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Cr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",OR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IR("Browser");var Kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,UN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,j){function A(){}A.prototype=j.prototype,S.F=j.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(O,D,z){for(var I=Array(arguments.length-2),he=2;he<arguments.length;he++)I[he-2]=arguments[he];return j.prototype[D].apply(O,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,j,A){A||(A=0);const O=Array(16);if(typeof j=="string")for(var D=0;D<16;++D)O[D]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(D=0;D<16;++D)O[D]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=S.g[0],A=S.g[1],D=S.g[2];let z=S.g[3],I;I=j+(z^A&(D^z))+O[0]+3614090360&4294967295,j=A+(I<<7&4294967295|I>>>25),I=z+(D^j&(A^D))+O[1]+3905402710&4294967295,z=j+(I<<12&4294967295|I>>>20),I=D+(A^z&(j^A))+O[2]+606105819&4294967295,D=z+(I<<17&4294967295|I>>>15),I=A+(j^D&(z^j))+O[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(z^A&(D^z))+O[4]+4118548399&4294967295,j=A+(I<<7&4294967295|I>>>25),I=z+(D^j&(A^D))+O[5]+1200080426&4294967295,z=j+(I<<12&4294967295|I>>>20),I=D+(A^z&(j^A))+O[6]+2821735955&4294967295,D=z+(I<<17&4294967295|I>>>15),I=A+(j^D&(z^j))+O[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(z^A&(D^z))+O[8]+1770035416&4294967295,j=A+(I<<7&4294967295|I>>>25),I=z+(D^j&(A^D))+O[9]+2336552879&4294967295,z=j+(I<<12&4294967295|I>>>20),I=D+(A^z&(j^A))+O[10]+4294925233&4294967295,D=z+(I<<17&4294967295|I>>>15),I=A+(j^D&(z^j))+O[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(z^A&(D^z))+O[12]+1804603682&4294967295,j=A+(I<<7&4294967295|I>>>25),I=z+(D^j&(A^D))+O[13]+4254626195&4294967295,z=j+(I<<12&4294967295|I>>>20),I=D+(A^z&(j^A))+O[14]+2792965006&4294967295,D=z+(I<<17&4294967295|I>>>15),I=A+(j^D&(z^j))+O[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(D^z&(A^D))+O[1]+4129170786&4294967295,j=A+(I<<5&4294967295|I>>>27),I=z+(A^D&(j^A))+O[6]+3225465664&4294967295,z=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(z^j))+O[11]+643717713&4294967295,D=z+(I<<14&4294967295|I>>>18),I=A+(z^j&(D^z))+O[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^z&(A^D))+O[5]+3593408605&4294967295,j=A+(I<<5&4294967295|I>>>27),I=z+(A^D&(j^A))+O[10]+38016083&4294967295,z=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(z^j))+O[15]+3634488961&4294967295,D=z+(I<<14&4294967295|I>>>18),I=A+(z^j&(D^z))+O[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^z&(A^D))+O[9]+568446438&4294967295,j=A+(I<<5&4294967295|I>>>27),I=z+(A^D&(j^A))+O[14]+3275163606&4294967295,z=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(z^j))+O[3]+4107603335&4294967295,D=z+(I<<14&4294967295|I>>>18),I=A+(z^j&(D^z))+O[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^z&(A^D))+O[13]+2850285829&4294967295,j=A+(I<<5&4294967295|I>>>27),I=z+(A^D&(j^A))+O[2]+4243563512&4294967295,z=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(z^j))+O[7]+1735328473&4294967295,D=z+(I<<14&4294967295|I>>>18),I=A+(z^j&(D^z))+O[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(A^D^z)+O[5]+4294588738&4294967295,j=A+(I<<4&4294967295|I>>>28),I=z+(j^A^D)+O[8]+2272392833&4294967295,z=j+(I<<11&4294967295|I>>>21),I=D+(z^j^A)+O[11]+1839030562&4294967295,D=z+(I<<16&4294967295|I>>>16),I=A+(D^z^j)+O[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^z)+O[1]+2763975236&4294967295,j=A+(I<<4&4294967295|I>>>28),I=z+(j^A^D)+O[4]+1272893353&4294967295,z=j+(I<<11&4294967295|I>>>21),I=D+(z^j^A)+O[7]+4139469664&4294967295,D=z+(I<<16&4294967295|I>>>16),I=A+(D^z^j)+O[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^z)+O[13]+681279174&4294967295,j=A+(I<<4&4294967295|I>>>28),I=z+(j^A^D)+O[0]+3936430074&4294967295,z=j+(I<<11&4294967295|I>>>21),I=D+(z^j^A)+O[3]+3572445317&4294967295,D=z+(I<<16&4294967295|I>>>16),I=A+(D^z^j)+O[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^z)+O[9]+3654602809&4294967295,j=A+(I<<4&4294967295|I>>>28),I=z+(j^A^D)+O[12]+3873151461&4294967295,z=j+(I<<11&4294967295|I>>>21),I=D+(z^j^A)+O[15]+530742520&4294967295,D=z+(I<<16&4294967295|I>>>16),I=A+(D^z^j)+O[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(D^(A|~z))+O[0]+4096336452&4294967295,j=A+(I<<6&4294967295|I>>>26),I=z+(A^(j|~D))+O[7]+1126891415&4294967295,z=j+(I<<10&4294967295|I>>>22),I=D+(j^(z|~A))+O[14]+2878612391&4294967295,D=z+(I<<15&4294967295|I>>>17),I=A+(z^(D|~j))+O[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~z))+O[12]+1700485571&4294967295,j=A+(I<<6&4294967295|I>>>26),I=z+(A^(j|~D))+O[3]+2399980690&4294967295,z=j+(I<<10&4294967295|I>>>22),I=D+(j^(z|~A))+O[10]+4293915773&4294967295,D=z+(I<<15&4294967295|I>>>17),I=A+(z^(D|~j))+O[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~z))+O[8]+1873313359&4294967295,j=A+(I<<6&4294967295|I>>>26),I=z+(A^(j|~D))+O[15]+4264355552&4294967295,z=j+(I<<10&4294967295|I>>>22),I=D+(j^(z|~A))+O[6]+2734768916&4294967295,D=z+(I<<15&4294967295|I>>>17),I=A+(z^(D|~j))+O[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~z))+O[4]+4149444226&4294967295,j=A+(I<<6&4294967295|I>>>26),I=z+(A^(j|~D))+O[11]+3174756917&4294967295,z=j+(I<<10&4294967295|I>>>22),I=D+(j^(z|~A))+O[2]+718787259&4294967295,D=z+(I<<15&4294967295|I>>>17),I=A+(z^(D|~j))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+j&4294967295,S.g[1]=S.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+z&4294967295}s.prototype.v=function(S,j){j===void 0&&(j=S.length);const A=j-this.blockSize,O=this.C;let D=this.h,z=0;for(;z<j;){if(D==0)for(;z<=A;)l(this,S,z),z+=this.blockSize;if(typeof S=="string"){for(;z<j;)if(O[D++]=S.charCodeAt(z++),D==this.blockSize){l(this,O),D=0;break}}else for(;z<j;)if(O[D++]=S[z++],D==this.blockSize){l(this,O),D=0;break}}this.h=D,this.o+=j},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var j=1;j<S.length-8;++j)S[j]=0;j=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=j&255,j/=256;for(this.v(S),S=Array(16),j=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)S[j++]=this.g[A]>>>O&255;return S};function c(S,j){var A=f;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=j(S)}function d(S,j){this.h=j;const A=[];let O=!0;for(let D=S.length-1;D>=0;D--){const z=S[D]|0;O&&z==j||(A[D]=z,O=!1)}this.g=A}var f={};function g(S){return-128<=S&&S<128?c(S,function(j){return new d([j|0],j<0?-1:0)}):new d([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return B(x(-S));const j=[];let A=1;for(let O=0;S>=A;O++)j[O]=S/A|0,A*=4294967296;return new d(j,0)}function v(S,j){if(S.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(S.charAt(0)=="-")return B(v(S.substring(1),j));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(j,8));let O=w;for(let z=0;z<S.length;z+=8){var D=Math.min(8,S.length-z);const I=parseInt(S.substring(z,z+D),j);D<8?(D=x(Math.pow(j,D)),O=O.j(D).add(x(I))):(O=O.j(A),O=O.add(x(I)))}return O}var w=g(0),N=g(1),R=g(16777216);r=d.prototype,r.m=function(){if(W(this))return-B(this).m();let S=0,j=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);S+=(O>=0?O:4294967296+O)*j,j*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(W(this))return"-"+B(this).toString(S);const j=x(Math.pow(S,6));var A=this;let O="";for(;;){const D=we(A,j).g;A=de(A,D.j(j));let z=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=D,M(A))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(let j=0;j<S.g.length;j++)if(S.g[j]!=0)return!1;return!0}function W(S){return S.h==-1}r.l=function(S){return S=de(this,S),W(S)?-1:M(S)?0:1};function B(S){const j=S.g.length,A=[];for(let O=0;O<j;O++)A[O]=~S.g[O];return new d(A,~S.h).add(N)}r.abs=function(){return W(this)?B(this):this},r.add=function(S){const j=Math.max(this.g.length,S.g.length),A=[];let O=0;for(let D=0;D<=j;D++){let z=O+(this.i(D)&65535)+(S.i(D)&65535),I=(z>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=I>>>16,z&=65535,I&=65535,A[D]=I<<16|z}return new d(A,A[A.length-1]&-2147483648?-1:0)};function de(S,j){return S.add(B(j))}r.j=function(S){if(M(this)||M(S))return w;if(W(this))return W(S)?B(this).j(B(S)):B(B(this).j(S));if(W(S))return B(this.j(B(S)));if(this.l(R)<0&&S.l(R)<0)return x(this.m()*S.m());const j=this.g.length+S.g.length,A=[];for(var O=0;O<2*j;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const z=this.i(O)>>>16,I=this.i(O)&65535,he=S.i(D)>>>16,fe=S.i(D)&65535;A[2*O+2*D]+=I*fe,ce(A,2*O+2*D),A[2*O+2*D+1]+=z*fe,ce(A,2*O+2*D+1),A[2*O+2*D+1]+=I*he,ce(A,2*O+2*D+1),A[2*O+2*D+2]+=z*he,ce(A,2*O+2*D+2)}for(S=0;S<j;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=j;S<2*j;S++)A[S]=0;return new d(A,0)};function ce(S,j){for(;(S[j]&65535)!=S[j];)S[j+1]+=S[j]>>>16,S[j]&=65535,j++}function oe(S,j){this.g=S,this.h=j}function we(S,j){if(M(j))throw Error("division by zero");if(M(S))return new oe(w,w);if(W(S))return j=we(B(S),j),new oe(B(j.g),B(j.h));if(W(j))return j=we(S,B(j)),new oe(B(j.g),j.h);if(S.g.length>30){if(W(S)||W(j))throw Error("slowDivide_ only works with positive integers.");for(var A=N,O=j;O.l(S)<=0;)A=ge(A),O=ge(O);var D=G(A,1),z=G(O,1);for(O=G(O,2),A=G(A,2);!M(O);){var I=z.add(O);I.l(S)<=0&&(D=D.add(A),z=I),O=G(O,1),A=G(A,1)}return j=de(S,D.j(j)),new oe(D,j)}for(D=w;S.l(j)>=0;){for(A=Math.max(1,Math.floor(S.m()/j.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=x(A),I=z.j(j);W(I)||I.l(S)>0;)A-=O,z=x(A),I=z.j(j);M(z)&&(z=N),D=D.add(z),S=de(S,I)}return new oe(D,S)}r.B=function(S){return we(this,S).h},r.and=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)&S.i(O);return new d(A,this.h&S.h)},r.or=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)|S.i(O);return new d(A,this.h|S.h)},r.xor=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)^S.i(O);return new d(A,this.h^S.h)};function ge(S){const j=S.g.length+1,A=[];for(let O=0;O<j;O++)A[O]=S.i(O)<<1|S.i(O-1)>>>31;return new d(A,S.h)}function G(S,j){const A=j>>5;j%=32;const O=S.g.length-A,D=[];for(let z=0;z<O;z++)D[z]=j>0?S.i(z+A)>>>j|S.i(z+A+1)<<32-j:S.i(z+A);return new d(D,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,UN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=v,yi=d}).apply(typeof Kw<"u"?Kw:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BN,Tu,qN,hf,Rp,FN,HN,GN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],y=y(T),y!=T&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&_.push([T,y[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,J){for(var ve=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ve[Fe-2]=arguments[Fe];return y.prototype[$].apply(T,ve)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const _=Array(y);for(let T=0;T<y;T++)_[T]=h[T];return _}return[]}function M(h,y){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const J=$.length||0;h.length=_+J;for(let ve=0;ve<J;ve++)h[_+ve]=$[ve]}else h.push($)}}class W{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){d.setTimeout(()=>{throw h},0)}function de(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,_){const T=oe.get();T.set(y,_),this.h?this.h.next=T:this.g=T,this.h=T}}var oe=new W(()=>new we,h=>h.reset());class we{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,G=!1,S=new ce,j=()=>{const h=Promise.resolve(void 0);ge=()=>{h.then(A)}};function A(){for(var h;h=de();){try{h.h.call(h.g)}catch(_){B(_)}var y=oe;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}G=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function he(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(he,D),he.prototype.init=function(h,y){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),F=0;function le(h,y,_,T,$){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!T,this.ha=$,this.key=++F,this.da=this.fa=!1}function Y(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,y,_){for(const T in h)y.call(_,h[T],T,h)}function Ee(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function C(h){const y={};for(const _ in h)y[_]=h[_];return y}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,y){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let J=0;J<U.length;J++)_=U[J],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function ee(h){this.src=h,this.g={},this.h=0}ee.prototype.add=function(h,y,_,T,$){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ve=Re(h,y,T,$);return ve>-1?(y=h[ve],_||(y.fa=!1)):(y=new le(y,this.src,J,!!T,$),y.fa=_,h.push(y)),y};function be(h,y){const _=y.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,y,void 0),J;(J=$>=0)&&Array.prototype.splice.call(T,$,1),J&&(Y(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Re(h,y,_,T){for(let $=0;$<h.length;++$){const J=h[$];if(!J.da&&J.listener==y&&J.capture==!!_&&J.ha==T)return $}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),it={};function ke(h,y,_,T,$){if(Array.isArray(y)){for(let J=0;J<y.length;J++)ke(h,y[J],_,T,$);return null}return _=Vr(_),h&&h[fe]?h.J(y,_,f(T)?!!T.capture:!1,$):Et(h,y,_,!1,T,$)}function Et(h,y,_,T,$,J){if(!y)throw Error("Invalid event type");const ve=f($)?!!$.capture:!!$;let Fe=_s(h);if(Fe||(h[ze]=Fe=new ee(h)),_=Fe.add(y,_,T,ve,J),_.proxy)return _;if(T=pt(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)z||($=ve),$===void 0&&($=!1),h.addEventListener(y.toString(),T,$);else if(h.attachEvent)h.attachEvent(_n(y.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function pt(){function h(_){return y.call(h.src,h.listener,_)}const y=ws;return h}function Rt(h,y,_,T,$){if(Array.isArray(y))for(var J=0;J<y.length;J++)Rt(h,y[J],_,T,$);else T=f(T)?!!T.capture:!!T,_=Vr(_),h&&h[fe]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],_=Re(y,_,T,$),_>-1&&(Y(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=_s(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Re(y,_,T,$)),(_=h>-1?y[h]:null)&&lt(_))}function lt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[fe])be(y.i,h);else{var _=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(_,T,h.capture):y.detachEvent?y.detachEvent(_n(_),T):y.addListener&&y.removeListener&&y.removeListener(T),(_=_s(y))?(be(_,h),_.h==0&&(_.src=null,y[ze]=null)):Y(h)}}}function _n(h){return h in it?it[h]:it[h]="on"+h}function ws(h,y){if(h.da)h=!0;else{y=new he(y,this);const _=h.listener,T=h.ha||h.src;h.fa&&lt(h),h=_.call(T,y)}return h}function _s(h){return h=h[ze],h instanceof ee?h:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vr(h){return typeof h=="function"?h:(h[ar]||(h[ar]=function(y){return h.handleEvent(y)}),h[ar])}function Ot(){O.call(this),this.i=new ee(this),this.M=this,this.G=null}w(Ot,O),Ot.prototype[fe]=!0,Ot.prototype.removeEventListener=function(h,y,_,T){Rt(this,h,y,_,T)};function Mt(h,y){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var $=y;y=new D(T,h),P(y,$)}$=!0;let J,ve;if(_)for(ve=_.length-1;ve>=0;ve--)J=y.g=_[ve],$=gn(J,T,!0,y)&&$;if(J=y.g=h,$=gn(J,T,!0,y)&&$,$=gn(J,T,!1,y)&&$,_)for(ve=0;ve<_.length;ve++)J=y.g=_[ve],$=gn(J,T,!1,y)&&$}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let T=0;T<_.length;T++)Y(_[T]);delete h.g[y],h.h--}}this.G=null},Ot.prototype.J=function(h,y,_,T){return this.i.add(String(h),y,!1,_,T)},Ot.prototype.K=function(h,y,_,T){return this.i.add(String(h),y,!0,_,T)};function gn(h,y,_,T){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let J=0;J<y.length;++J){const ve=y[J];if(ve&&!ve.da&&ve.capture==_){const Fe=ve.listener,Xt=ve.ha||ve.src;ve.fa&&be(h.i,ve),$=Fe.call(Xt,T)!==!1&&$}}return $&&!T.defaultPrevented}function _a(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Na(h){h.g=_a(()=>{h.g=null,h.i&&(h.i=!1,Na(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Vt extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){O.call(this),this.h=h,this.g={}}w(Ns,O);var ir=[];function Pr(h){re(h.g,function(y,_){this.g.hasOwnProperty(_)&&lt(y)},h),h.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),Pr(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=d.JSON.stringify,Ea=d.JSON.parse,Ta=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ie(){}function Xe(){}var Be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){D.call(this,"d")}w(Ye,D);function qt(){D.call(this,"c")}w(qt,D);var nt={},Lr=null;function Ln(){return Lr=Lr||new Ot}nt.Ia="serverreachability";function lr(h){D.call(this,nt.Ia,h)}w(lr,D);function Hn(h){const y=Ln();Mt(y,new lr(y))}nt.STAT_EVENT="statevent";function ue(h,y){D.call(this,nt.STAT_EVENT,h),this.stat=y}w(ue,D);function _e(h){const y=Ln();Mt(y,new ue(y,h))}nt.Ja="timingevent";function Ie(h,y){D.call(this,nt.Ja,h),this.size=y}w(Ie,D);function ye(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Pe(){this.g=!0}Pe.prototype.ua=function(){this.g=!1};function Je(h,y,_,T,$,J){h.info(function(){if(h.g)if(J){var ve="",Fe=J.split("&");for(let dt=0;dt<Fe.length;dt++){var Xt=Fe[dt].split("=");if(Xt.length>1){const Pt=Xt[0];Xt=Xt[1];const js=Pt.split("_");ve=js.length>=2&&js[1]=="type"?ve+(Pt+"="+Xt+"&"):ve+(Pt+"=redacted&")}}}else ve=null;else ve=J;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+_+`
`+ve})}function mt(h,y,_,T,$,J,ve){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+_+`
`+J+" "+ve})}function ut(h,y,_,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ft(h,_)+(T?" "+T:"")})}function rt(h,y){h.info(function(){return"TIMEOUT: "+y})}Pe.prototype.info=function(){};function Ft(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var _=J[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let ve=1;ve<T.length;ve++)T[ve]=""}}}}return Nn(J)}catch{return y}}var pn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Di={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yc;function Oi(){}w(Oi,ie),Oi.prototype.g=function(){return new XMLHttpRequest},yc=new Oi;function zr(h){return encodeURIComponent(String(h))}function Id(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Bs(h,y,_,T){this.j=h,this.i=y,this.l=_,this.S=T||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qs}function qs(){this.i=null,this.g="",this.h=!1}var en={},xn={};function or(h,y,_){h.M=1,h.A=Mi(nn(y)),h.u=_,h.R=!0,Vl(h,null)}function Vl(h,y){h.F=Date.now(),cr(h),h.B=nn(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),Ul(_.i,"t",T),h.C=0,_=h.j.L,h.h=new qs,h.g=Hd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Vt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(ir[0]=$.toString()),$=ir);for(let J=0;J<$.length;J++){const ve=ke(_,$[J],T||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=h.J?C(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Hn(),Je(h.i,h.v,h.B,h.l,h.S,h.u)}Bs.prototype.ba=function(h){h=h.target;const y=this.O;y&&Gs(h)==3?y.j():this.Y(h)},Bs.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=Gs(this.g),Xt=this.g.ya(),dt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||Fe!=4||Xt==7||(Xt==8||dt<=0?Hn(3):Hn(2)),ur(this);var y=this.g.ca();this.X=y;var _=qm(this);if(this.o=y==200,mt(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var J=T;break t}}J=null}if(h=J)ut(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dr(this,h);else{this.o=!1,this.m=3,_e(12),rs(this),Es(this);break e}}if(this.R){h=!0;let Pt;for(;!this.K&&this.C<_.length;)if(Pt=Rd(this,_),Pt==xn){Fe==4&&(this.m=4,_e(14),h=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,_e(15),ut(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ut(this.i,this.l,Pt,null),dr(this,Pt);if(Cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_.length!=0||this.h.h||(this.m=1,_e(16),h=!1),this.o=this.o&&h,!h)ut(this.i,this.l,_,"[Invalid Chunked Response]"),rs(this),Es(this);else if(_.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Dc(ve),ve.P=!0,_e(11))}}else ut(this.i,this.l,_,null),dr(this,_);Fe==4&&rs(this),this.o&&!this.K&&(Fe==4?Ud(this.j,this):(this.o=!1,cr(this)))}else Br(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),rs(this),Es(this)}}}catch{}finally{}};function qm(h){if(!Cd(h))return h.g.la();const y=En(h.g);if(y==="")return"";let _="";const T=y.length,$=Gs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return rs(h),Es(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<T;J++)h.h.h=!0,_+=h.h.i.decode(y[J],{stream:!($&&J==T-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Cd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Rd(h,y){var _=h.C,T=y.indexOf(`
`,_);return T==-1?xn:(_=Number(y.substring(_,T)),isNaN(_)?en:(T+=1,T+_>y.length?xn:(y=y.slice(T,T+_),h.C=T+_,y)))}Bs.prototype.cancel=function(){this.K=!0,rs(this)};function cr(h){h.T=Date.now()+h.H,Pl(h,h.H)}function Pl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ye(x(h.aa,h),y)}function ur(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Bs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(rt(this.i,this.B),this.M!=2&&(Hn(),_e(17)),rs(this),this.m=2,Es(this)):Pl(this,this.T-h)};function Es(h){h.j.I==0||h.K||Ud(h.j,h)}function rs(h){ur(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Pr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function dr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||fr(_.h,h))){if(!h.L&&fr(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Gl(_),Da(_);else break e;qi(_),_e(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ye(x(_.Va,_),6e3));hr(_.h)<=1&&_.ta&&(_.ta=void 0)}else br(_,11)}else if((h.L||_.g==h)&&Gl(_),!I(y))for($=_.Ba.g.parse(y),y=0;y<$.length;y++){let dt=$[y];const Pt=dt[0];if(!(Pt<=_.K))if(_.K=Pt,dt=dt[1],_.I==2)if(dt[0]=="c"){_.M=dt[1],_.ba=dt[2];const js=dt[3];js!=null&&(_.ka=js,_.j.info("VER="+_.ka));const vr=dt[4];vr!=null&&(_.za=vr,_.j.info("SVER="+_.za));const $s=dt[5];$s!=null&&typeof $s=="number"&&$s>0&&(T=1.5*$s,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Ks=h.g;if(Ks){const Fi=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var J=T.h;J.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(wc(J,J.h),J.h=null))}if(T.G){const $l=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(T.wa=$l,xt(T.J,T.G,$l))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ve=h;if(T.na=Fd(T,T.L?T.ba:null,T.W),ve.L){_c(T.h,ve);var Fe=ve,Xt=T.O;Xt&&(Fe.H=Xt),Fe.D&&(ur(Fe),cr(Fe)),T.g=ve}else Ld(T);_.i.length>0&&yr(_)}else dt[0]!="stop"&&dt[0]!="close"||br(_,7);else _.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?br(_,7):Rc(_):dt[0]!="noop"&&_.l&&_.l.qa(dt),_.A=0)}}Hn(4)}catch{}}var tn=class{constructor(h,y){this.g=h,this.map=y}};function bc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hr(h){return h.h?1:h.g?h.g.size:0}function fr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function wc(h,y){h.g?h.g.add(y):h.h=y}function _c(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}bc.prototype.cancel=function(){if(this.i=Nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return R(h.i)}var kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,J=null;T>=0?($=h[_].substring(0,T),J=h[_].substring(T+1)):$=h[_],y($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function as(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof as?(this.l=h.l,yn(this,h.j),this.o=h.o,this.g=h.g,Sa(this,h.u),this.h=h.h,Ec(this,Vd(h.i)),this.m=h.m):h&&(y=String(h).match(kd))?(this.l=!1,yn(this,y[1]||"",!0),this.o=mr(y[2]||""),this.g=mr(y[3]||"",!0),Sa(this,y[4]),this.h=mr(y[5]||"",!0),Ec(this,y[6]||"",!0),this.m=mr(y[7]||"")):(this.l=!1,this.i=new Aa(null,this.l))}as.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Vi(y,zl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vi(y,zl,!0),"@"),h.push(zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Vi(_,_.charAt(0)=="/"?Tc:Dd,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Vi(_,Od)),h.join("")},as.prototype.resolve=function(h){const y=nn(this);let _=!!h.j;_?yn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var T=h.h;if(_)Sa(y,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=y.h.lastIndexOf("/");$!=-1&&(T=y.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let ve=0;ve<$.length;){const Fe=$[ve++];Fe=="."?T&&ve==$.length&&J.push(""):Fe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),T&&ve==$.length&&J.push("")):(J.push(Fe),T=!0)}T=J.join("/")}else T=$}return _?y.h=T:_=h.i.toString()!=="",_?Ec(y,Vd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function nn(h){return new as(h)}function yn(h,y,_){h.j=_?mr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Sa(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ec(h,y,_){y instanceof Aa?(h.i=y,Bl(h.i,h.l)):(_||(y=Vi(y,ja)),h.i=new Aa(y,h.l))}function xt(h,y,_){h.i.set(y,_)}function Mi(h){return xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function mr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,Gn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var zl=/[#\/\?@]/g,Dd=/[#\?:]/g,Tc=/[#\?]/g,ja=/[#\?@]/g,Od=/#/g;function Aa(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&Ll(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Aa.prototype,r.add=function(h,y){$n(this),this.i=null,h=Ia(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Md(h,y){$n(h),y=Ia(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sc(h,y){return $n(h),y=Ia(h,y),h.g.has(y)}r.forEach=function(h,y){$n(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(y,$,T,this)},this)},this)};function jc(h,y){$n(h);let _=[];if(typeof y=="string")Sc(h,y)&&(_=_.concat(h.g.get(Ia(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return $n(this),this.i=null,h=Ia(this,h),Sc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=jc(this,h),h.length>0?String(h[0]):y):y};function Ul(h,y,_){Md(h,y),_.length>0&&(h.i=null,h.g.set(Ia(h,y),R(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var _=y[T];const $=zr(_);_=jc(this,_);for(let J=0;J<_.length;J++){let ve=$;_[J]!==""&&(ve+="="+zr(_[J])),h.push(ve)}}return this.i=h.join("&")};function Vd(h){const y=new Aa;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ia(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Bl(h,y){y&&!h.j&&($n(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(Md(this,T),Ul(this,$,_))},h)),h.j=y}function Fs(h,y){const _=new Pe;if(d.Image){const T=new Image;T.onload=v(Ts,_,"TestLoadImage: loaded",!0,y,T),T.onerror=v(Ts,_,"TestLoadImage: error",!1,y,T),T.onabort=v(Ts,_,"TestLoadImage: abort",!1,y,T),T.ontimeout=v(Ts,_,"TestLoadImage: timeout",!1,y,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}function Ac(h,y){const _=new Pe,T=new AbortController,$=setTimeout(()=>{T.abort(),Ts(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:T.signal}).then(J=>{clearTimeout($),J.ok?Ts(_,"TestPingServer: ok",!0,y):Ts(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Ts(_,"TestPingServer: error",!1,y)})}function Ts(h,y,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function Ca(){this.g=new Ta}function gr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(gr,ie),gr.prototype.g=function(){return new Pi(this.i,this.h)};function Pi(h,y){Ot.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Pi,Ot),r=Pi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Hs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ql(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ql(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ra(this):Hs(this),this.readyState==3&&ql(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ra(this))},r.Na=function(h){this.g&&(this.response=h,Ra(this))},r.ga=function(){this.g&&Ra(this)};function Ra(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Hs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Hs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ss(h){let y="";return re(h,function(_,T){y+=T,y+=":",y+=_,y+=`\r
`}),y}function Li(h,y,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ss(_),typeof h=="string"?_!=null&&zr(_):xt(h,y,_))}function Tt(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Tt,Ot);var pr=/^https?$/i,Ic=["POST","PUT"];r=Tt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yc.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){zi(this,J);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const J of T.keys())_.set(J,T.get(J));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ic,y,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ve]of _)this.g.setRequestHeader(J,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){zi(this,J)}};function zi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Cc(h),Ur(h)}function Cc(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Mt(this,"complete"),Mt(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ui(this):this.Xa())},r.Xa=function(){Ui(this)};function Ui(h){if(h.h&&typeof c<"u"){if(h.v&&Gs(h)==4)setTimeout(h.Ca.bind(h),0);else if(Mt(h,"readystatechange"),Gs(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var T;if(T=J===0){let ve=String(h.D).match(kd)[1]||null;!ve&&d.self&&d.self.location&&(ve=d.self.location.protocol.slice(0,-1)),T=!pr.test(ve?ve.toLowerCase():"")}_=T}if(_)Mt(h,"complete"),Mt(h,"success");else{h.o=6;try{var $=Gs(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Cc(h)}}finally{Ur(h)}}}}function Ur(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Mt(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Gs(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ea(y)}};function En(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Br(h){const y={};h=(h.g&&Gs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(I(h[T]))continue;var _=Id(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=y[$]||[];y[$]=J,J.push(_)}Ee(y,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function ka(h){this.za=0,this.i=[],this.j=new Pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xr("baseRetryDelayMs",5e3,h),this.Za=xr("retryDelaySeedMs",1e4,h),this.Ta=xr("forwardChannelMaxRetries",2,h),this.va=xr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new bc(h&&h.concurrentRequestLimit),this.Ba=new Ca,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ka.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,T){_e(0),this.W=h,this.H=y||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Fd(this,null,this.W),yr(this)};function Rc(h){if(Fl(h),h.I==3){var y=h.V++,_=nn(h.J);if(xt(_,"SID",h.M),xt(_,"RID",y),xt(_,"TYPE","terminate"),Bi(h,_),y=new Bs(h,h.j,y),y.M=2,y.A=Mi(nn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Hd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),cr(y)}qd(h)}function Da(h){h.g&&(Dc(h),h.g.cancel(),h.g=null)}function Fl(h){Da(h),h.v&&(d.clearTimeout(h.v),h.v=null),Gl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function yr(h){if(!vc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ge||j(),G||(ge(),G=!0),S.add(y,h),h.D=0}}function Hl(h,y){return hr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ye(x(h.Ea,h,y),Bd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new Bs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=C(J),P(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Pd(this,$,y),_=nn(this.J),xt(_,"RID",h),xt(_,"CVER",22),this.G&&xt(_,"X-HTTP-Session-Id",this.G),Bi(this,_),J&&(this.R?y="headers="+zr(Ss(J))+"&"+y:this.u&&Li(_,this.u,J)),wc(this.h,$),this.Ra&&xt(_,"TYPE","init"),this.S?(xt(_,"$req",y),xt(_,"SID","null"),$.U=!0,or($,_,null)):or($,_,y),this.I=2}}else this.I==3&&(h?kc(this,h):this.i.length==0||vc(this.h)||kc(this))};function kc(h,y){var _;y?_=y.l:_=h.V++;const T=nn(h.J);xt(T,"SID",h.M),xt(T,"RID",_),xt(T,"AID",h.K),Bi(h,T),h.u&&h.o&&Li(T,h.u,h.o),_=new Bs(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Pd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),wc(h.h,_),or(_,T,y)}function Bi(h,y){h.H&&re(h.H,function(_,T){xt(y,T,_)}),h.l&&re({},function(_,T){xt(y,T,_)})}function Pd(h,y,_){_=Math.min(h.i.length,_);const T=h.l?x(h.l.Ka,h.l,h):null;e:{var $=h.i;let Fe=-1;for(;;){const Xt=["count="+_];Fe==-1?_>0?(Fe=$[0].g,Xt.push("ofs="+Fe)):Fe=0:Xt.push("ofs="+Fe);let dt=!0;for(let Pt=0;Pt<_;Pt++){var J=$[Pt].g;const js=$[Pt].map;if(J-=Fe,J<0)Fe=Math.max(0,$[Pt].g-100),dt=!1;else try{J="req"+J+"_"||"";try{var ve=js instanceof Map?js:Object.entries(js);for(const[vr,$s]of ve){let Ks=$s;f($s)&&(Ks=Nn($s)),Xt.push(J+vr+"="+encodeURIComponent(Ks))}}catch(vr){throw Xt.push(J+"type="+encodeURIComponent("_badmap")),vr}}catch{T&&T(js)}}if(dt){ve=Xt.join("&");break e}}ve=void 0}return h=h.i.splice(0,_),y.G=h,ve}function Ld(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ge||j(),G||(ge(),G=!0),S.add(y,h),h.A=0}}function qi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ye(x(h.Da,h),Bd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,zd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ye(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Da(this),zd(this))};function Dc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function zd(h){h.g=new Bs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=nn(h.na);xt(y,"RID","rpc"),xt(y,"SID",h.M),xt(y,"AID",h.K),xt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&xt(y,"TO",h.ia),xt(y,"TYPE","xmlhttp"),Bi(h,y),h.u&&h.o&&Li(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Mi(nn(y)),_.u=null,_.R=!0,Vl(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Da(this),qi(this),_e(19))};function Gl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ud(h,y){var _=null;if(h.g==y){Gl(h),Dc(h),h.g=null;var T=2}else if(fr(h.h,y))_=y.G,_c(h.h,y),T=1;else return;if(h.I!=0){if(y.o)if(T==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;T=Ln(),Mt(T,new Ie(T,_)),yr(h)}else Ld(h);else if($=y.m,$==3||$==0&&y.X>0||!(T==1&&Hl(h,y)||T==2&&qi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),$){case 1:br(h,5);break;case 4:br(h,10);break;case 3:br(h,6);break;default:br(h,2)}}}function Bd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function br(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),T=h.Ua;const $=!T;T=new as(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||yn(T,"https"),Mi(T),$?Fs(T.toString(),_):Ac(T.toString(),_)}else _e(2);h.I=0,h.l&&h.l.pa(y),qd(h),Fl(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function qd(h){if(h.I=0,h.ja=[],h.l){const y=Nc(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Fd(h,y,_){var T=_ instanceof as?nn(_):new as(_);if(T.g!="")y&&(T.g=y+"."+T.g),Sa(T,T.u);else{var $=d.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const J=new as(null);T&&yn(J,T),y&&(J.g=y),$&&Sa(J,$),_&&(J.h=_),T=J}return _=h.G,y=h.wa,_&&y&&xt(T,_,y),xt(T,"VER",h.ka),Bi(h,T),T}function Hd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Tt(new gr({ab:_})):new Tt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gd(){}r=Gd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Oa(){}Oa.prototype.g=function(h,y){return new zn(h,y)};function zn(h,y){Ot.call(this),this.g=new ka(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qr(this)}w(zn,Ot),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Rc(this.g)},zn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Nn(h),h=_);y.i.push(new tn(y.Ya++,h)),y.I==3&&yr(y)},zn.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,zn.Z.N.call(this)};function $d(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w($d,Ye);function Kd(){qt.call(this),this.status=1}w(Kd,qt);function qr(h){this.g=h}w(qr,Gd),qr.prototype.ra=function(){Mt(this.g,"a")},qr.prototype.qa=function(h){Mt(this.g,new $d(h))},qr.prototype.pa=function(h){Mt(this.g,new Kd)},qr.prototype.oa=function(){Mt(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,GN=function(){return new Oa},HN=function(){return Ln()},FN=nt,Rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,hf=pn,Di.COMPLETE="complete",qN=Di,Xe.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Tu=Xe,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,BN=Tt}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const Qw="@firebase/firestore",Xw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new hm("@firebase/firestore");function Io(){return El.logLevel}function me(r,...e){if(El.logLevel<=et.DEBUG){const t=e.map(_x);El.debug(`Firestore (${dc}): ${r}`,...t)}}function Wt(r,...e){if(El.logLevel<=et.ERROR){const t=e.map(_x);El.error(`Firestore (${dc}): ${r}`,...t)}}function Xu(r,...e){if(El.logLevel<=et.WARN){const t=e.map(_x);El.warn(`Firestore (${dc}): ${r}`,...t)}}function _x(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,$N(r,s,t)}function $N(r,e,t){let s=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Wt(s),new Error(s)}function Ce(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||$N(e,l,s)}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class PR{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zs,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ce(typeof s.accessToken=="string",31837,{l:s}),new MR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class LR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new LR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=BR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function kp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Yg(l)===Yg(c)?Le(l,c):Yg(l)?1:-1}return Le(r.length,e.length)}const qR=55296,FR=57343;function Yg(r){const e=r.charCodeAt(0);return e>=qR&&e<=FR}function qo(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function KN(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="__name__";class Tr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Tr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Le(e.length,t.length)}static compareSegments(e,t){const s=Tr.isNumericId(e),l=Tr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class ft extends Tr{construct(e,t,s){return new ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const HR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Tr{construct(e,t,s){return new Ht(e,t,s)}static isValidIdentifier(e){return HR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jw}static keyField(){return new Ht([Jw])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new xe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new xe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(ft.fromString(e))}static fromName(e){return new Ne(ft.fromString(e).popFirst(5))}static empty(){return new Ne(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(r,e,t){if(!t)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function GR(r,e,t,s){if(e===!0&&s===!0)throw new xe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ww(r){if(!Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zw(r){if(Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function XN(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function pm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function hn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pm(r);throw new xe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function $R(r,e){if(e<=0)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function md(r,e){if(!XN(r))throw new xe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new xe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=-62135596800,t_=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*t_);return new wt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<e_)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t_}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(md(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-e_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:cn("string",wt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new wt(0,0))}static max(){return new Oe(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=-1;class Pf{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Dp(r){return r.fields.find((e=>e.kind===2))}function ol(r){return r.fields.filter((e=>e.kind!==2))}Pf.UNKNOWN_ID=-1;class ff{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yu(0,bs.min())}}function YN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Oe.fromTimestamp(s===1e9?new wt(t+1,0):new wt(t,s));return new bs(l,Ne.empty(),e)}function JN(r){return new bs(r.readTime,r.key,Fo)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(Oe.min(),Ne.empty(),Fo)}static max(){return new bs(Oe.max(),Ne.empty(),Fo)}}function Ex(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==WN)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,s)=>{t(e)}))}static reject(e){return new H(((t,s)=>{s(e)}))}static waitFor(e){return new H(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next((l=>l?H.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new H(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((v=>{d[x]=v,++f,f===c&&s(d)}),(v=>l(v)))}}))}static doWhile(e,t){return new H(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="SimpleDb";class xm{static open(e,t,s,l){try{return new xm(t,e.transaction(l,s))}catch(c){throw new ku(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ku(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Tx(s.target.error);this.S.reject(new ku(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(fs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QR(t)}}class bi{static delete(e){return me(fs,"Removing database:",e),ul(H2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!hx())return!1;if(bi.F())return!0;const e=fn(),t=bi.M(e),s=0<t&&t<10,l=eE(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,bi.M(fn())===12.2&&Wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(fs,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new xe(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new xe(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new ku(e,d))},l.onupgradeneeded=c=>{me(fs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{me(fs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=xm.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),H.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(me(fs,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function eE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ul(this.U.delete())}}class ku extends xe{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ii(r){return r.name==="IndexedDbTransactionError"}class QR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(me(fs,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(me(fs,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ul(s)}add(e){return me(fs,"ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next((t=>(t===void 0&&(t=null),me(fs,"GET",this.store.name,e,t),t)))}delete(e){return me(fs,"DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return me(fs,"COUNT",this.store.name),ul(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new H(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new H(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){me(fs,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new H(((s,l)=>{t.onerror=c=>{const d=Tx(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new H(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new KR(f),x=t(f.primaryKey,f.value,g);if(x instanceof H){const v=x.catch((w=>(g.done(),H.reject(w))));s.push(v)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>H.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(r){return new H(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=Tx(s.target.error);t(l)}}))}let n_=!1;function Tx(r){const e=bi.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n_||(n_=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Du="IndexBackfiller";class XR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me(Du,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();me(Du,`Documents written: ${t}`)}catch(t){Ii(t)?me(Du,"Ignoring IndexedDB error during index backfill: ",t):await Ai(t)}await this.re(6e4)}))}}class YR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return H.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return me(Du,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(me(Du,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=JN(c);Ex(d,s)>0&&(s=d)})),new bs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function ym(r){return r==null}function Ju(r){return r===0&&1/r==-1/0}function tE(r){return typeof r=="number"&&Number.isInteger(r)&&!Ju(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="";function Vn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=s_(e)),e=JR(r.get(t),e);return s_(e)}function JR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Lf:t+="";break;default:t+=c}}return t}function s_(r){return r+Lf+""}function Ar(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===Lf&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Lf,c);switch((d<0||d>t)&&Te(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:Te(61167,{path:r})}c=d+2}return new ft(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="remoteDocuments",gd="owner",No="owner",Wu="mutationQueues",WR="userId",Js="mutations",r_="batchId",ml="userMutationsIndex",a_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(r,e){return[r,Vn(e)]}function nE(r,e,t){return[r,Vn(e),t]}const ZR={},Ho="documentMutations",zf="remoteDocumentsV14",e6=["prefixPath","collectionGroup","readTime","documentId"],gf="documentKeyIndex",t6=["prefixPath","collectionGroup","documentId"],sE="collectionGroupIndex",n6=["collectionGroup","readTime","prefixPath","documentId"],Zu="remoteDocumentGlobal",Op="remoteDocumentGlobalKey",Go="targets",rE="queryTargetsIndex",s6=["canonicalId","targetId"],$o="targetDocuments",r6=["targetId","path"],Sx="documentTargetsIndex",a6=["path","targetId"],Uf="targetGlobalKey",xl="targetGlobal",ed="collectionParents",i6=["collectionId","parent"],Ko="clientMetadata",l6="clientId",bm="bundles",o6="bundleId",vm="namedQueries",c6="name",jx="indexConfiguration",u6="indexId",Mp="collectionGroupIndex",d6="collectionGroup",Ou="indexState",h6=["indexId","uid"],aE="sequenceNumberIndex",f6=["uid","sequenceNumber"],Mu="indexEntries",m6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iE="documentKeyIndex",g6=["indexId","uid","orderedDocumentKey"],wm="documentOverlays",p6=["userId","collectionPath","documentId"],Vp="collectionPathOverlayIndex",x6=["userId","collectionPath","largestBatchId"],lE="collectionGroupOverlayIndex",y6=["userId","collectionGroup","largestBatchId"],Ax="globals",b6="name",oE=[Wu,Js,Ho,cl,Go,gd,xl,$o,Ko,Zu,ed,bm,vm],v6=[...oE,wm],cE=[Wu,Js,Ho,zf,Go,gd,xl,$o,Ko,Zu,ed,bm,vm,wm],uE=cE,Ix=[...uE,jx,Ou,Mu],w6=Ix,dE=[...Ix,Ax],_6=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends ZN{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mn(r,e){const t=je(r);return bi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ci(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function N6(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function hE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??In.RED,this.left=l??In.EMPTY,this.right=c??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new In(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return In.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new es([])}unionWith(e){let t=new Nt(Ht.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fE("Invalid base64 string: "+c):c}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const E6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pa(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=E6.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xa(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="server_timestamp",gE="__type__",pE="__previous_value__",xE="__local_write_time__";function Cx(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gE])==null?void 0:s.stringValue)===mE}function _m(r){const e=r.mapValue.fields[pE];return Cx(e)?_m(e):e}function td(r){const e=pa(r.mapValue.fields[xE].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,t,s,l,c,d,f,g,x,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=v}}const Bf="(default)";class Tl{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="__type__",yE="__max__",mi={mapValue:{fields:{__type__:{stringValue:yE}}}},kx="__vector__",Qo="value",pf={nullValue:"NULL_VALUE"};function Ni(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cx(r)?4:bE(r)?9007199254740991:Nm(r)?10:11:Te(28295,{value:r})}function Mr(r,e){if(r===e)return!0;const t=Ni(r);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return td(r).isEqual(td(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=pa(l.timestampValue),f=pa(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return xa(l.bytesValue).isEqual(xa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return zt(l.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return zt(l.integerValue)===zt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=zt(l.doubleValue),f=zt(c.doubleValue);return d===f?Ju(d)===Ju(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return qo(r.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(i_(d)!==i_(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Mr(d[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function nd(r,e){return(r.values||[]).find((t=>Mr(t,e)))!==void 0}function Ei(r,e){if(r===e)return 0;const t=Ni(r),s=Ni(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=zt(c.integerValue||c.doubleValue),g=zt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return o_(r.timestampValue,e.timestampValue);case 4:return o_(td(r),td(e));case 5:return kp(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=xa(c),g=xa(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const v=Le(f[x],g[x]);if(v!==0)return v}return Le(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=Le(zt(c.latitude),zt(d.latitude));return f!==0?f:Le(zt(c.longitude),zt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return c_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,R,M,W;const f=c.fields||{},g=d.fields||{},x=(N=f[Qo])==null?void 0:N.arrayValue,v=(R=g[Qo])==null?void 0:R.arrayValue,w=Le(((M=x==null?void 0:x.values)==null?void 0:M.length)||0,((W=v==null?void 0:v.values)==null?void 0:W.length)||0);return w!==0?w:c_(x,v)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===mi.mapValue&&d===mi.mapValue)return 0;if(c===mi.mapValue)return 1;if(d===mi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},v=Object.keys(x);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const N=kp(g[w],v[w]);if(N!==0)return N;const R=Ei(f[g[w]],x[v[w]]);if(R!==0)return R}return Le(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function o_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=pa(r),s=pa(e),l=Le(t.seconds,s.seconds);return l!==0?l:Le(t.nanos,s.nanos)}function c_(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ei(t[l],s[l]);if(c)return c}return Le(t.length,s.length)}function Xo(r){return Lp(r)}function Lp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=pa(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return xa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ne.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Lp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Lp(t.fields[d])}`;return l+"}"})(r.mapValue):Te(61005,{value:r})}function xf(r){switch(Ni(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_m(r);return e?16+xf(e):16;case 5:return 2*r.stringValue.length;case 6:return xa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+xf(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Ci(s.fields,((c,d)=>{l+=c.length+xf(d)})),l})(r.mapValue);default:throw Te(13486,{value:r})}}function sd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zp(r){return!!r&&"integerValue"in r}function rd(r){return!!r&&"arrayValue"in r}function u_(r){return!!r&&"nullValue"in r}function d_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yf(r){return!!r&&"mapValue"in r}function Nm(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Rx])==null?void 0:s.stringValue)===kx}function Vu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ci(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Vu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(r.arrayValue.values[t]);return e}return{...r}}function bE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===yE}const vE={mapValue:{fields:{[Rx]:{stringValue:kx},[Qo]:{arrayValue:{}}}}};function S6(r){return"nullValue"in r?pf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?sd(Tl.empty(),Ne.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Nm(r)?vE:{mapValue:{}}:Te(35942,{value:r})}function j6(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?sd(Tl.empty(),Ne.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?vE:"mapValue"in r?Nm(r)?{mapValue:{}}:mi:Te(61959,{value:r})}function h_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function f_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=Ht.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Vu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];yf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Ci(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Mn(Vu(this.value))}}function wE(r){const e=[];return Ci(r.fields,((t,s)=>{const l=new Ht([t]);if(yf(s)){const c=wE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Kt(e,0,Oe.min(),Oe.min(),Oe.min(),Mn.empty(),0)}static newFoundDocument(e,t,s,l){return new Kt(e,1,t,Oe.min(),s,l,0)}static newNoDocument(e,t){return new Kt(e,2,t,Oe.min(),Oe.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Oe.min(),Oe.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.position=e,this.inclusive=t}}function m_(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(d.referenceValue),t.key):s=Ei(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function g_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Mr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function A6(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{}class tt extends _E{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new I6(e,t,s):t==="array-contains"?new k6(e,s):t==="in"?new AE(e,s):t==="not-in"?new D6(e,s):t==="array-contains-any"?new O6(e,s):new tt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new C6(e,s):new R6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ei(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Ei(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends _E{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _t(e,t)}matches(e){return Jo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jo(r){return r.op==="and"}function Up(r){return r.op==="or"}function Dx(r){return NE(r)&&Jo(r)}function NE(r){for(const e of r.filters)if(e instanceof _t)return!1;return!0}function Bp(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+Xo(r.value);if(Dx(r))return r.filters.map((e=>Bp(e))).join(",");{const e=r.filters.map((t=>Bp(t))).join(",");return`${r.op}(${e})`}}function EE(r,e){return r instanceof tt?(function(s,l){return l instanceof tt&&s.op===l.op&&s.field.isEqual(l.field)&&Mr(s.value,l.value)})(r,e):r instanceof _t?(function(s,l){return l instanceof _t&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&EE(d,l.filters[f])),!0):!1})(r,e):void Te(19439)}function TE(r,e){const t=r.filters.concat(e);return _t.create(t,r.op)}function SE(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(r):r instanceof _t?(function(t){return t.op.toString()+" {"+t.getFilters().map(SE).join(" ,")+"}"})(r):"Filter"}class I6 extends tt{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class C6 extends tt{constructor(e,t){super(e,"in",t),this.keys=jE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class R6 extends tt{constructor(e,t){super(e,"not-in",t),this.keys=jE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class k6 extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rd(t)&&nd(t.arrayValue,this.value)}}class AE extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nd(this.value.arrayValue,t)}}class D6 extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nd(this.value.arrayValue,t)}}class O6 extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function qp(r,e=null,t=[],s=[],l=null,c=null,d=null){return new M6(r,e,t,s,l,c,d)}function Sl(r){const e=je(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Bp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Xo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Xo(s))).join(",")),e.Te=t}return e.Te}function pd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!A6(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!EE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!g_(r.startAt,e.startAt)&&g_(r.endAt,e.endAt)}function qf(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Ff(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function p_(r,e,t){let s=pf,l=!0;for(const c of Ff(r,e)){let d=pf,f=!0;switch(c.op){case"<":case"<=":d=S6(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=pf}h_({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];h_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function x_(r,e,t){let s=mi,l=!0;for(const c of Ff(r,e)){let d=mi,f=!0;switch(c.op){case">=":case">":d=j6(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=mi}f_({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];f_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IE(r,e,t,s,l,c,d,f){return new hc(r,e,t,s,l,c,d,f)}function xd(r){return new hc(r)}function y_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function CE(r){return r.collectionGroup!==null}function Pu(r){const e=je(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Nt(Ht.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ad(c,s))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new ad(Ht.keyField(),s))}return e.Ie}function ps(r){const e=je(r);return e.Ee||(e.Ee=RE(e,Pu(r))),e.Ee}function V6(r){const e=je(r);return e.de||(e.de=RE(e,r.explicitOrderBy)),e.de}function RE(r,e){if(r.limitType==="F")return qp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ad(l.field,c)}));const t=r.endAt?new Yo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yo(r.startAt.position,r.startAt.inclusive):null;return qp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Fp(r,e){const t=r.filters.concat([e]);return new hc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Hf(r,e,t){return new hc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Em(r,e){return pd(ps(r),ps(e))&&r.limitType===e.limitType}function kE(r){return`${Sl(ps(r))}|lt:${r.limitType}`}function Co(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>SE(l))).join(", ")}]`),ym(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Xo(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Xo(l))).join(",")),`Target(${s})`})(ps(r))}; limitType=${r.limitType})`}function yd(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Pu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=m_(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Pu(s),l)||s.endAt&&!(function(d,f,g){const x=m_(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Pu(s),l))})(r,e)}function DE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function OE(r){return(e,t)=>{let s=!1;for(const l of Pu(r)){const c=P6(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function P6(r,e,t){const s=r.field.isKeyField()?Ne.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ei(g,x):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return hE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=new Ct(Ne.comparator);function gs(){return L6}const ME=new Ct(Ne.comparator);function Su(...r){let e=ME;for(const t of r)e=e.insert(t.key,t);return e}function VE(r){let e=ME;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ir(){return Lu()}function PE(){return Lu()}function Lu(){return new va((r=>r.toString()),((r,e)=>r.isEqual(e)))}const z6=new Ct(Ne.comparator),U6=new Nt(Ne.comparator);function $e(...r){let e=U6;for(const t of r)e=e.add(t);return e}const B6=new Nt(Le);function Ox(){return B6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function LE(r){return{integerValue:""+r}}function zE(r,e){return tE(e)?LE(e):Mx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this._=void 0}}function q6(r,e,t){return r instanceof Wo?(function(l,c){const d={fields:{[gE]:{stringValue:mE},[xE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Cx(c)&&(c=_m(c)),c&&(d.fields[pE]=c),{mapValue:d}})(t,e):r instanceof Zo?BE(r,e):r instanceof ec?qE(r,e):(function(l,c){const d=UE(l,c),f=b_(d)+b_(l.Ae);return zp(d)&&zp(l.Ae)?LE(f):Mx(l.serializer,f)})(r,e)}function F6(r,e,t){return r instanceof Zo?BE(r,e):r instanceof ec?qE(r,e):t}function UE(r,e){return r instanceof tc?(function(s){return zp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Wo extends Tm{}class Zo extends Tm{constructor(e){super(),this.elements=e}}function BE(r,e){const t=FE(e);for(const s of r.elements)t.some((l=>Mr(l,s)))||t.push(s);return{arrayValue:{values:t}}}class ec extends Tm{constructor(e){super(),this.elements=e}}function qE(r,e){let t=FE(e);for(const s of r.elements)t=t.filter((l=>!Mr(l,s)));return{arrayValue:{values:t}}}class tc extends Tm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function b_(r){return zt(r.integerValue||r.doubleValue)}function FE(r){return rd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.field=e,this.transform=t}}function H6(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Zo&&l instanceof Zo||s instanceof ec&&l instanceof ec?qo(s.elements,l.elements,Mr):s instanceof tc&&l instanceof tc?Mr(s.Ae,l.Ae):s instanceof Wo&&l instanceof Wo})(r.transform,e.transform)}class G6{constructor(e,t){this.version=e,this.transformResults=t}}class dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sm{}function HE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new bd(r.key,dn.none()):new fc(r.key,r.data,dn.none());{const t=r.data,s=Mn.empty();let l=new Nt(Ht.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new wa(r.key,s,new es(l.toArray()),dn.none())}}function $6(r,e,t){r instanceof fc?(function(l,c,d){const f=l.value.clone(),g=w_(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof wa?(function(l,c,d){if(!bf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=w_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(GE(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function zu(r,e,t,s){return r instanceof fc?(function(c,d,f,g){if(!bf(c.precondition,d))return f;const x=c.value.clone(),v=__(c.fieldTransforms,g,d);return x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof wa?(function(c,d,f,g){if(!bf(c.precondition,d))return f;const x=__(c.fieldTransforms,g,d),v=d.data;return v.setAll(GE(c)),v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,t,s):(function(c,d,f){return bf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function K6(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=UE(s.transform,l||null);c!=null&&(t===null&&(t=Mn.empty()),t.set(s.field,c))}return t||null}function v_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&qo(s,l,((c,d)=>H6(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class fc extends Sm{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class wa extends Sm{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function GE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function w_(r,e,t){const s=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,F6(d,f,t[l]))}return s}function __(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,q6(c,d,e))}return s}class bd extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $E extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&$6(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=PE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=HE(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((t,s)=>v_(t,s)))&&qo(this.baseMutations,e.baseMutations,((t,s)=>v_(t,s)))}}class Lx{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){Ce(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return z6})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Lx(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,at;function Y6(r){switch(r){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function KE(r){if(r===void 0)return Wt("GRPC error has no .code"),te.UNKNOWN;switch(r){case on.OK:return te.OK;case on.CANCELLED:return te.CANCELLED;case on.UNKNOWN:return te.UNKNOWN;case on.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case on.INTERNAL:return te.INTERNAL;case on.UNAVAILABLE:return te.UNAVAILABLE;case on.UNAUTHENTICATED:return te.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case on.NOT_FOUND:return te.NOT_FOUND;case on.ALREADY_EXISTS:return te.ALREADY_EXISTS;case on.PERMISSION_DENIED:return te.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case on.ABORTED:return te.ABORTED;case on.OUT_OF_RANGE:return te.OUT_OF_RANGE;case on.UNIMPLEMENTED:return te.UNIMPLEMENTED;case on.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:r})}}(at=on||(on={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=new yi([4294967295,4294967295],0);function N_(r){const e=J6().encode(r),t=new UN;return t.update(e),new Uint8Array(t.digest())}function E_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new yi([t,s],0),new yi([l,c],0)]}class Ux{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(s<0)throw new ju(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yi.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(yi.fromNumber(s)));return l.compare(W6)===1&&(l=new yi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=N_(e),[s,l]=E_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ux(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=N_(e),[s,l]=E_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new vd(Oe.min(),l,new Ct(Le),gs(),$e())}}class wd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wd(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class QE{constructor(e,t){this.targetId=e,this.Ce=t}}class XE{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class T_{constructor(){this.ve=0,this.Fe=S_(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Te(38017,{changeType:c})}})),new wd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=S_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z6{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=tf(),this.He=tf(),this.Ye=new Ct(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(qf(c))if(s===0){const d=new Ne(c.path);this.et(t,d,Kt.newNoDocument(d,Oe.min()))}else Ce(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=xa(s).toUint8Array()}catch(g){if(g instanceof fE)return Xu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Ux(d,l,c)}catch(g){return Xu(g instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&qf(f.target)){const g=new Ne(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Kt.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=$e();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new vd(e,t,this.Ye,this.je,s);return this.je=gs(),this.Je=tf(),this.He=tf(),this.Ye=new Ct(Le),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new T_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tf(){return new Ct(Ne.comparator)}function S_(){return new Ct(Ne.comparator)}const ek={asc:"ASCENDING",desc:"DESCENDING"},tk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nk={and:"AND",or:"OR"};class sk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hp(r,e){return r.useProto3Json||ym(e)?e:{value:e}}function nc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rk(r,e){return nc(r,e.toTimestamp())}function Bn(r){return Ce(!!r,49232),Oe.fromTimestamp((function(t){const s=pa(t);return new wt(s.seconds,s.nanos)})(r))}function Bx(r,e){return Gp(r,e).canonicalString()}function Gp(r,e){const t=(function(l){return new ft(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function JE(r){const e=ft.fromString(r);return Ce(aT(e),10190,{key:e.toString()}),e}function Gf(r,e){return Bx(r.databaseId,e.path)}function yl(r,e){const t=JE(e);if(t.get(1)!==r.databaseId.projectId)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ne(eT(t))}function WE(r,e){return Bx(r.databaseId,e)}function ZE(r){const e=JE(r);return e.length===4?ft.emptyPath():eT(e)}function $p(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function eT(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function j_(r,e,t){return{name:Gf(r,e),fields:t.value.mapValue.fields}}function ak(r,e,t){const s=yl(r,e.name),l=Bn(e.updateTime),c=e.createTime?Bn(e.createTime):Oe.min(),d=new Mn({mapValue:{fields:e.fields}}),f=Kt.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function ik(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Te(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,v){return x.useProto3Json?(Ce(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Ce(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const v=x.code===void 0?te.UNKNOWN:KE(x.code);return new xe(v,x.message||"")})(d);t=new XE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=yl(r,s.document.name),c=Bn(s.document.updateTime),d=s.document.createTime?Bn(s.document.createTime):Oe.min(),f=new Mn({mapValue:{fields:s.document.fields}}),g=Kt.newFoundDocument(l,c,d,f),x=s.targetIds||[],v=s.removedTargetIds||[];t=new vf(x,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=yl(r,s.document),c=s.readTime?Bn(s.readTime):Oe.min(),d=Kt.newNoDocument(l,c),f=s.removedTargetIds||[];t=new vf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=yl(r,s.document),c=s.removedTargetIds||[];t=new vf([],c,l,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new X6(l,c),f=s.targetId;t=new QE(f,d)}}return t}function $f(r,e){let t;if(e instanceof fc)t={update:j_(r,e.key,e.value)};else if(e instanceof bd)t={delete:Gf(r,e.key)};else if(e instanceof wa)t={update:j_(r,e.key,e.data),updateMask:fk(e.fieldMask)};else{if(!(e instanceof $E))return Te(16599,{Vt:e.type});t={verify:Gf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof Wo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Zo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof tc)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:rk(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(r,e.precondition)),t}function Kp(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?dn.updateTime(Bn(c.updateTime)):c.exists!==void 0?dn.exists(c.exists):dn.none()})(e.currentDocument):dn.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)Ce(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Wo;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];g=new Zo(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];g=new ec(v)}else"increment"in f?g=new tc(d,f.increment):Te(16584,{proto:f});const x=Ht.fromServerFormat(f.fieldPath);return new Vx(x,g)})(r,l))):[];if(e.update){e.update.name;const l=yl(r,e.update.name),c=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new es(x.map((v=>Ht.fromServerFormat(v))))})(e.updateMask);return new wa(l,c,d,t,s)}return new fc(l,c,t,s)}if(e.delete){const l=yl(r,e.delete);return new bd(l,t)}if(e.verify){const l=yl(r,e.verify);return new $E(l,t)}return Te(1463,{proto:e})}function lk(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Bn(l.updateTime):Bn(c);return d.isEqual(Oe.min())&&(d=Bn(c)),new G6(d,l.transformResults||[])})(t,e)))):[]}function tT(r,e){return{documents:[WE(r,e.path)]}}function qx(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=WE(r,l);const c=(function(x){if(x.length!==0)return rT(_t.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((v=>(function(N){return{field:hi(N.field),direction:uk(N.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Hp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function ok(r,e,t,s){const{ft:l,parent:c}=qx(r,e),d={},f=[];let g=0;return t.forEach((x=>{const v="aggregate_"+g++;d[v]=x.alias,x.aggregateType==="count"?f.push({alias:v,count:{}}):x.aggregateType==="avg"?f.push({alias:v,avg:{field:hi(x.fieldPath)}}):x.aggregateType==="sum"&&f.push({alias:v,sum:{field:hi(x.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:l.structuredQuery},parent:l.parent},gt:d,parent:c}}function nT(r){let e=ZE(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){Ce(s===1,65062);const v=t.from[0];v.allDescendants?l=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(w){const N=sT(w);return N instanceof _t&&Dx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(M){return new ad(Ro(M.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let N;return N=typeof w=="object"?w.value:w,ym(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(w){const N=!!w.before,R=w.values||[];return new Yo(R,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const N=!w.before,R=w.values||[];return new Yo(R,N)})(t.endAt)),IE(e,l,d,c,f,"F",g,x)}function ck(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sT(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ro(t.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ro(t.unaryFilter.field);return tt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ro(t.unaryFilter.field);return tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ro(t.unaryFilter.field);return tt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Ro(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return _t.create(t.compositeFilter.filters.map((s=>sT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function uk(r){return ek[r]}function dk(r){return tk[r]}function hk(r){return nk[r]}function hi(r){return{fieldPath:r.canonicalString()}}function Ro(r){return Ht.fromServerFormat(r.fieldPath)}function rT(r){return r instanceof tt?(function(t){if(t.op==="=="){if(d_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NAN"}};if(u_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(d_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NOT_NAN"}};if(u_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(t.field),op:dk(t.op),value:t.value}}})(r):r instanceof _t?(function(t){const s=t.getFilters().map((l=>rT(l)));return s.length===1?s[0]:{compositeFilter:{op:hk(t.op),filters:s}}})(r):Te(54877,{filter:r})}function fk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,s,l,c=Oe.min(),d=Oe.min(),f=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.yt=e}}function mk(r,e){let t;if(e.document)t=ak(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ne.fromSegments(e.noDocument.path),l=Al(e.noDocument.readTime);t=Kt.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const s=Ne.fromSegments(e.unknownDocument.path),l=Al(e.unknownDocument.version);t=Kt.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new wt(l[0],l[1]);return Oe.fromTimestamp(c)})(e.readTime)),t}function A_(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:Gf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:nc(c,d.version.toTimestamp()),createTime:nc(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:jl(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:jl(e.version)}}return s}function Kf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function jl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Al(r){const e=new wt(r.seconds,r.nanoseconds);return Oe.fromTimestamp(e)}function dl(r,e){const t=(e.baseMutations||[]).map((c=>Kp(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Kp(r.yt,c))),l=wt.fromMillis(e.localWriteTimeMs);return new Px(e.batchId,l,t,s)}function Au(r){const e=Al(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Al(r.lastLimboFreeSnapshotVersion):Oe.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return Ce(d===1,1966,{count:d}),ps(xd(ZE(c.documents[0])))})(r.query):(function(c){return ps(nT(c))})(r.query),new la(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Zt.fromBase64String(r.resumeToken))}function lT(r,e){const t=jl(e.snapshotVersion),s=jl(e.lastLimboFreeSnapshotVersion);let l;l=qf(e.target)?tT(r.yt,e.target):qx(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function oT(r){const e=nT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Hf(e,e.limit,"L"):e}function Jg(r,e){return new zx(e.largestBatchId,Kp(r.yt,e.overlayMutation))}function I_(r,e){const t=e.path.lastSegment();return[r,Vn(e.path.popLast()),t]}function C_(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:jl(s.readTime),documentKey:Vn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{getBundleMetadata(e,t){return R_(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:Al(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return R_(e).put((function(l){return{bundleId:l.id,createTime:jl(Bn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return k_(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:oT(c.bundledQuery),readTime:Al(c.readTime)}})(s)}))}saveNamedQuery(e,t){return k_(e).put((function(l){return{name:l.name,readTime:jl(Bn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function R_(r){return mn(r,bm)}function k_(r){return mn(r,vm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new jm(e,s)}getOverlay(e,t){return yu(e).get(I_(this.userId,t)).next((s=>s?Jg(this.serializer,s):null))}getOverlays(e,t){const s=Ir();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new zx(t,d);l.push(this.St(e,f))})),H.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add(Vn(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(yu(e).Z(Vp,f))})),H.waitFor(c)}getOverlaysForCollection(e,t,s){const l=Ir(),c=Vn(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return yu(e).J(Vp,d).next((f=>{for(const g of f){const x=Jg(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=Ir();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yu(e).ee({index:lE,range:f},((g,x,v)=>{const w=Jg(this.serializer,x);c.size()<l||w.largestBatchId===d?(c.set(w.getKey(),w),d=w.largestBatchId):v.done()})).next((()=>c))}St(e,t){return yu(e).put((function(l,c,d){const[f,g,x]=I_(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:$f(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function yu(r){return mn(r,wm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{bt(e){return mn(e,Ax)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?Zt.fromUint8Array(s):Zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const s=zt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Ju(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=pa(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?bE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Nm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Te(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=Qo,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(zt(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),Ne.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}hl.Kt=new hl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=255;function xk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function D_(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=xk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class yk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=D_(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=D_(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(To),this.sn(255)}_n(){this.an(To),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===To?(this.sn(To),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===To?(this.an(To),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class bk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class bu{constructor(){this.cn=new yk,this.ln=new bk(this.cn),this.hn=new vk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new fl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:wf(this.En),directionalValue:wf(this.dn),orderedDocumentKey:wf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function ri(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=O_(r.En,e.En),t!==0?t:(t=O_(r.dn,e.dn),t!==0?t:Ne.comparator(r.In,e.In)))}function O_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function wf(r){return J2()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function M_(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class V_{constructor(e){this.mn=new Nt(((t,s)=>Ht.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Dp(e);if(t!==void 0&&!this.wn(t))return!1;const s=ol(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Nt(Ht.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new ff(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new ff(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new ff(s.field,s.dir==="asc"?0:1)));return new Pf(Pf.UNKNOWN_ID,this.collectionId,t,Yu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r){var t,s;if(Ce(r instanceof tt||r instanceof _t,20012),r instanceof tt){if(r instanceof AE){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>tt.create(r.field,"==",c))))||[];return _t.create(l,"or")}return r}const e=r.filters.map((l=>cT(l)));return _t.create(e,r.op)}function wk(r){if(r.getFilters().length===0)return[];const e=Yp(cT(r));return Ce(uT(e),7391),Qp(e)||Xp(e)?[e]:e.getFilters()}function Qp(r){return r instanceof tt}function Xp(r){return r instanceof _t&&Dx(r)}function uT(r){return Qp(r)||Xp(r)||(function(t){if(t instanceof _t&&Up(t)){for(const s of t.getFilters())if(!Qp(s)&&!Xp(s))return!1;return!0}return!1})(r)}function Yp(r){if(Ce(r instanceof tt||r instanceof _t,34018),r instanceof tt)return r;if(r.filters.length===1)return Yp(r.filters[0]);const e=r.filters.map((s=>Yp(s)));let t=_t.create(e,r.op);return t=Qf(t),uT(t)?t:(Ce(t instanceof _t,64498),Ce(Jo(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((s,l)=>Fx(s,l))))}function Fx(r,e){let t;return Ce(r instanceof tt||r instanceof _t,38388),Ce(e instanceof tt||e instanceof _t,25473),t=r instanceof tt?e instanceof tt?(function(l,c){return _t.create([l,c],"and")})(r,e):P_(r,e):e instanceof tt?P_(e,r):(function(l,c){if(Ce(l.filters.length>0&&c.filters.length>0,48005),Jo(l)&&Jo(c))return TE(l,c.getFilters());const d=Up(l)?l:c,f=Up(l)?c:l,g=d.filters.map((x=>Fx(x,f)));return _t.create(g,"or")})(r,e),Qf(t)}function P_(r,e){if(Jo(e))return TE(e,r.getFilters());{const t=e.filters.map((s=>Fx(r,s)));return _t.create(t,"or")}}function Qf(r){if(Ce(r instanceof tt||r instanceof _t,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return Qf(e[0]);if(NE(r))return r;const t=e.map((l=>Qf(l))),s=[];return t.forEach((l=>{l instanceof tt?s.push(l):l instanceof _t&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:_t.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Cn=new Hx}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(bs.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Nt(ft.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Nt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="IndexedDbIndexManager",nf=new Uint8Array(0);class Nk{constructor(e,t){this.databaseId=t,this.vn=new Hx,this.Fn=new va((s=>Sl(s)),((s,l)=>pd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:Vn(l)};return z_(e).put(c)}return H.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[KN(t),""],!1,!0);return z_(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(Ar(d.parent))}return s}))}addFieldIndex(e,t){const s=vu(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=jo(e);return c.next((f=>{d.put(C_(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=vu(e),l=jo(e),c=So(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=vu(e),s=So(e),l=jo(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new V_(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=So(e);let l=!0;const c=new Map;return H.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=$e();const f=[];return H.forEach(c,((g,x)=>{me(L_,`Using index ${(function(oe){return`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map((we=>`${we.fieldPath}:${we.kind}`)).join(",")}`})(g)} to execute ${Sl(t)}`);const v=(function(oe,we){const ge=Dp(we);if(ge===void 0)return null;for(const G of Ff(oe,ge.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(x,g),w=(function(oe,we){const ge=new Map;for(const G of ol(we))for(const S of Ff(oe,G.fieldPath))switch(S.op){case"==":case"in":ge.set(G.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ge.set(G.fieldPath.canonicalString(),S.value),Array.from(ge.values())}return null})(x,g),N=(function(oe,we){const ge=[];let G=!0;for(const S of ol(we)){const j=S.kind===0?p_(oe,S.fieldPath,oe.startAt):x_(oe,S.fieldPath,oe.startAt);ge.push(j.value),G&&(G=j.inclusive)}return new Yo(ge,G)})(x,g),R=(function(oe,we){const ge=[];let G=!0;for(const S of ol(we)){const j=S.kind===0?x_(oe,S.fieldPath,oe.endAt):p_(oe,S.fieldPath,oe.endAt);ge.push(j.value),G&&(G=j.inclusive)}return new Yo(ge,G)})(x,g),M=this.On(g,x,N),W=this.On(g,x,R),B=this.Nn(g,x,w),de=this.Bn(g.indexId,v,M,N.inclusive,W,R.inclusive,B);return H.forEach(de,(ce=>s.Y(ce,t.limit).next((oe=>{oe.forEach((we=>{const ge=Ne.fromSegments(we.documentKey);d.has(ge)||(d=d.add(ge),f.push(ge))}))}))))})).next((()=>f))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=wk(_t.create(e.filters,"and")).map((s=>qp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const N=t?this.Ln(t[w/x]):nf,R=this.kn(e,N,s[w%x],l),M=this.qn(e,N,c[w%x],d),W=f.map((B=>this.kn(e,N,B,!0)));v.push(...this.createRange(R,M,W))}return v}kn(e,t,s,l){const c=new fl(e,Ne.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new fl(e,Ne.empty(),t,s);return l?c.An():c}xn(e,t){const s=new V_(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return H.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new Nt(Ht.comparator),v=!1;for(const w of g.filters)for(const N of w.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?v=!0:x=x.add(N.field));for(const w of g.orderBy)w.field.isKeyField()||(x=x.add(w.field));return x.size+(v?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new bu;for(const l of ol(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);hl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new bu;return hl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new bu;return hl.Kt.Dt(sd(this.databaseId,t),s.Pn((function(c){const d=ol(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new bu);let c=0;for(const d of ol(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&rd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);hl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new bu;g.seed(f.un()),hl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof tt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=vu(e),l=jo(e);return(t?s.J(Mp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return H.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(v,w){const N=w?new Yu(w.sequenceNumber,new bs(Al(w.readTime),new Ne(Ar(w.documentKey)),w.largestBatchId)):Yu.empty(),R=v.fields.map((([M,W])=>new ff(Ht.fromServerFormat(M),W)));return new Pf(v.indexId,v.collectionGroup,R,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Le(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=vu(e),c=jo(e);return this.Gn(e).next((d=>l.J(Mp,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(g=>c.put(C_(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return H.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?H.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),H.forEach(f,(g=>this.zn(e,l,g).next((x=>{const v=this.jn(c,g);return x.isEqual(v)?H.resolve():this.Jn(e,c,g,x,v)})))))))}))}Hn(e,t,s,l){return So(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return So(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=So(e);let c=new Nt(ri);return l.ee({index:iE,range:IDBKeyRange.only([s.indexId,this.uid,wf(this.$n(s,t))])},((d,f)=>{c=c.add(new fl(s.indexId,t,M_(f.arrayValue),M_(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new Nt(ri);const l=this.Qn(t,e);if(l==null)return s;const c=Dp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(rd(d))for(const f of d.arrayValue.values||[])s=s.add(new fl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new fl(t.indexId,e.key,nf,l));return s}Jn(e,t,s,l,c){me(L_,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,v,w,N){const R=g.getIterator(),M=x.getIterator();let W=Eo(R),B=Eo(M);for(;W||B;){let de=!1,ce=!1;if(W&&B){const oe=v(W,B);oe<0?ce=!0:oe>0&&(de=!0)}else W!=null?ce=!0:de=!0;de?(w(B),B=Eo(M)):ce?(N(W),W=Eo(R)):(W=Eo(R),B=Eo(M))}})(l,c,ri,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),H.waitFor(d)}Gn(e){let t=1;return jo(e).ee({index:aE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>ri(d,f))).filter(((d,f,g)=>!f||ri(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=ri(d,e),g=ri(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,nf,Ne.empty()),g=l[d+1].Vn(this.uid,nf,Ne.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return ri(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(U_)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||Te(44426))))).next(U_)}}function z_(r){return mn(r,ed)}function So(r){return mn(r,Mu)}function vu(r){return mn(r,jx)}function jo(r){return mn(r,Ou)}function U_(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;Ex(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r,e,t){const s=r.store(Js),l=r.store(Ho),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((v,w,N)=>(f++,N.delete())));c.push(g.next((()=>{Ce(f===1,47070,{batchId:t.batchId})})));const x=[];for(const v of t.mutations){const w=nE(e,v.key.path,t.batchId);c.push(l.delete(w)),x.push(v.key)}return H.waitFor(c).next((()=>x))}function Xf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Te(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(dT,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class Am{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){Ce(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Am(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).ee({index:ml,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=ko(e),d=ai(e);return d.add({}).next((f=>{Ce(typeof f=="number",49019);const g=new Px(f,t,s,l),x=(function(R,M,W){const B=W.baseMutations.map((ce=>$f(R.yt,ce))),de=W.mutations.map((ce=>$f(R.yt,ce)));return{userId:M,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:B,mutations:de}})(this.serializer,this.userId,g),v=[];let w=new Nt(((N,R)=>Le(N.canonicalString(),R.canonicalString())));for(const N of l){const R=nE(this.userId,N.key.path,f);w=w.add(N.key.path.popLast()),v.push(d.put(x)),v.push(c.put(R,ZR))}return w.forEach((N=>{v.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),H.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return ai(e).get(t).next((s=>s?(Ce(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),dl(this.serializer,s)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return ai(e).ee({index:ml,range:l},((d,f,g)=>{f.userId===this.userId&&(Ce(f.batchId>=s,47524,{tr:s}),c=dl(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=pl;return ai(e).ee({index:ml,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,pl],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).J(ml,t).next((s=>s.map((l=>dl(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=mf(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return ko(e).ee({range:l},((d,f,g)=>{const[x,v,w]=d,N=Ar(v);if(x===this.userId&&t.path.isEqual(N))return ai(e).get(w).next((R=>{if(!R)throw Te(61480,{nr:d,batchId:w});Ce(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:w}),c.push(dl(this.serializer,R))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nt(Le);const l=[];return t.forEach((c=>{const d=mf(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=ko(e).ee({range:f},((x,v,w)=>{const[N,R,M]=x,W=Ar(R);N===this.userId&&c.path.isEqual(W)?s=s.add(M):w.done()}));l.push(g)})),H.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=mf(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new Nt(Le);return ko(e).ee({range:d},((g,x,v)=>{const[w,N,R]=g,M=Ar(N);w===this.userId&&s.isPrefixOf(M)?M.length===l&&(f=f.add(R)):v.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(ai(e).get(c).next((d=>{if(d===null)throw Te(35274,{batchId:c});Ce(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(dl(this.serializer,d))})))})),H.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return hT(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return ko(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=Ar(c[1]);l.push(g)}else f.done()})).next((()=>{Ce(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return fT(e,this.userId,t)}_r(e){return mT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:pl,lastStreamToken:""}))}}function fT(r,e,t){const s=mf(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return ko(r).ee({range:c,X:!0},((f,g,x)=>{const[v,w,N]=f;v===e&&w===l&&(d=!0),x.done()})).next((()=>d))}function ai(r){return mn(r,Js)}function ko(r){return mn(r,Ho)}function mT(r){return mn(r,Wu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Il(0)}static cr(){return new Il(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Il(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Oe.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ao(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Ce(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return Ao(e).ee(((d,f)=>{const g=Au(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>H.waitFor(c))).next((()=>l))}forEachTarget(e,t){return Ao(e).ee(((s,l)=>{const c=Au(l);t(c)}))}lr(e){return q_(e).get(Uf).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return q_(e).put(Uf,t)}Pr(e,t){return Ao(e).put(lT(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Sl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Ao(e).ee({range:l,index:rE},((d,f,g)=>{const x=Au(f);pd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=fi(e);return t.forEach((d=>{const f=Vn(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),H.waitFor(l)}removeMatchingKeys(e,t,s){const l=fi(e);return H.forEach(t,(c=>{const d=Vn(c.path);return H.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=fi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=fi(e);let c=$e();return l.ee({range:s,X:!0},((d,f,g)=>{const x=Ar(d[1]),v=new Ne(x);c=c.add(v)})).next((()=>c))}containsKey(e,t){const s=Vn(t.path),l=IDBKeyRange.bound([s],[KN(s)],!1,!0);let c=0;return fi(e).ee({index:Sx,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return Ao(e).get(t).next((s=>s?Au(s):null))}}function Ao(r){return mn(r,Go)}function q_(r){return mn(r,xl)}function fi(r){return mn(r,$o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="LruGarbageCollector",gT=1048576;function H_([r,e],[t,s]){const l=Le(r,t);return l===0?Le(e,s):l}class Tk{constructor(e){this.Ir=e,this.buffer=new Nt(H_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();H_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(F_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?me(F_,"Ignoring IndexedDB error during garbage collection: ",t):await Ai(t)}await this.Vr(3e5)}))}}class Sk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Zn.ce);const s=new Tk(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(B_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(s=w,f=Date.now(),this.removeTargets(e,s,t)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(x=Date.now(),Io()<=et.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-v}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function xT(r,e){return new Sk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t){this.db=e,this.garbageCollector=xT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return sf(e,s)}removeReference(e,t,s){return sf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return sf(e,t)}br(e,t){return(function(l,c){let d=!1;return mT(l).te((f=>fT(l,f,c).next((g=>(g&&(d=!0),H.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Oe.min()),fi(e).delete((function(w){return[0,Vn(w.path)]})(d)))))}));l.push(g)}})).next((()=>H.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return sf(e,t)}Sr(e,t){const s=fi(e);let l,c=Zn.ce;return s.ee({index:Sx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==Zn.ce&&t(new Ne(Ar(l)),c),c=x,l=g):c=Zn.ce})).next((()=>{c!==Zn.ce&&t(new Ne(Ar(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sf(r,e){return fi(r).put((function(s,l){return{targetId:0,path:Vn(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.changes=new va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return al(e).put(s)}removeEntry(e,t,s){return al(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Kf(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=Kt.newInvalidDocument(t);return al(e).ee({index:gf,range:IDBKeyRange.only(wu(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:Kt.newInvalidDocument(t)};return al(e).ee({index:gf,range:IDBKeyRange.only(wu(t))},((l,c)=>{s={document:this.Cr(t,c),size:Xf(c)}})).next((()=>s))}getEntries(e,t){let s=gs();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=gs(),l=new Ct(Ne.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,Xf(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return H.resolve();let l=new Nt(K_);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(wu(l.first()),wu(l.last())),d=l.getIterator();let f=d.getNext();return al(e).ee({index:gf,range:c},((g,x,v)=>{const w=Ne.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&K_(f,w)<0;)s(f,null),f=d.getNext();f&&f.isEqual(w)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?v.j(wu(f)):v.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Kf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return al(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let v=gs();for(const w of x){const N=this.Cr(Ne.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);N.isFoundDocument()&&(yd(t,N)||l.has(N.key))&&(v=v.insert(N.key,N))}return v}))}getAllFromCollectionGroup(e,t,s,l){let c=gs();const d=$_(t,s),f=$_(t,bs.max());return al(e).ee({index:sE,range:IDBKeyRange.bound(d,f,!0)},((g,x,v)=>{const w=this.Cr(Ne.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(w.key,w),c.size===l&&v.done()})).next((()=>c))}newChangeBuffer(e){return new Ik(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return G_(e).get(Op).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return G_(e).put(Op,t)}Cr(e,t){if(t){const s=mk(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Oe.min())))return s}return Kt.newInvalidDocument(e)}}function bT(r){return new Ak(r)}class Ik extends yT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new va((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new Nt(((c,d)=>Le(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=A_(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=Xf(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=A_(this.Nr.serializer,d.convertToNoDocument(Oe.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function G_(r){return mn(r,Zu)}function al(r){return mn(r,zf)}function wu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $_(r,e){const t=e.documentKey.path.toArray();return[r,Kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function K_(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=Le(t[c],s[c]),l)return l;return l=Le(t.length,s.length),l||(l=Le(t[t.length-2],s[s.length-2]),l||Le(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&zu(s.mutation,l,es.empty(),wt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const l=Ir();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Su();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Ir();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=gs();const d=Lu(),f=(function(){return Lu()})();return t.forEach(((g,x)=>{const v=s.get(x.key);l.has(x.key)&&(v===void 0||v.mutation instanceof wa)?c=c.insert(x.key,x):v!==void 0?(d.set(x.key,v.mutation.getFieldMask()),zu(v.mutation,x,v.mutation.getFieldMask(),wt.now())):d.set(x.key,es.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,v)=>d.set(x,v))),t.forEach(((x,v)=>f.set(x,new Ck(v,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Lu();let l=new Ct(((d,f)=>d-f)),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let v=s.get(g)||es.empty();v=f.applyToLocalView(x,v),s.set(g,v);const w=(l.get(f.batchId)||$e()).add(g);l=l.insert(f.batchId,w)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,v=g.value,w=PE();v.forEach((N=>{if(!c.has(N)){const R=HE(t.get(N),s.get(N));R!==null&&w.set(N,R),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return H.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):H.resolve(Ir());let f=Fo,g=c;return d.next((x=>H.forEach(x,((v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(v)?H.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{g=g.insert(v,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,$e()))).next((v=>({batchId:f,changes:VE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let l=Su();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Su();return this.indexManager.getCollectionParents(e,c).next((f=>H.forEach(f,(g=>{const x=(function(w,N){return new hc(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((v=>{v.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const v=x.getKey();d.get(v)===null&&(d=d.insert(v,Kt.newInvalidDocument(v)))}));let f=Su();return d.forEach(((g,x)=>{const v=c.get(g);v!==void 0&&zu(v.mutation,x,es.empty(),wt.now()),yd(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Bn(l.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:oT(l.bundledQuery),readTime:Bn(l.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.overlays=new Ct(Ne.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ir();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),H.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const l=Ir(),c=t.length+1,d=new Ne(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return H.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Ct(((x,v)=>x-v));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let v=c.get(x.largestBatchId);v===null&&(v=Ir(),c=c.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const f=Ir(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,v)=>f.set(x,v))),!(f.size()>=l)););return H.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new zx(t,s));let c=this.qr.get(t);c===void 0&&(c=$e(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.Qr=new Nt(vn.$r),this.Ur=new Nt(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new vn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new vn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ne(new ft([])),s=new vn(t,e),l=new vn(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new ft([])),s=new vn(t,e),l=new vn(t,e+1);let c=$e();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new vn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class vn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(vn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Px(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new vn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(d)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?pl:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new vn(t,0),l=new vn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nt(Le);return t.forEach((l=>{const c=new vn(l,0),d=new vn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const d=new vn(new Ne(c),0);let f=new Nt(Le);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),H.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(t.mutations,(l=>{const c=new vn(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new vn(t,0),l=this.Zr.firstAfterOrEqual(s);return H.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let s=gs();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Kt.newInvalidDocument(l))})),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=gs();const d=t.path,f=new Ne(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:v}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Ex(JN(v),s)<=0||(l.has(v.key)||yd(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Te(9500)}ii(e,t){return H.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Vk(this)}getSize(e){return H.resolve(this.size)}}class Vk extends yT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.persistence=e,this.si=new va((t=>Sl(t)),pd),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Gx,this.targetCount=0,this.ai=Il.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Il(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),H.waitFor(c).next((()=>l))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),H.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zn(0),this.li=!1,this.li=!0,this.hi=new Dk,this.referenceDelegate=e(this),this.Pi=new Pk(this),this.indexManager=new _k,this.remoteDocumentCache=(function(l){return new Mk(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new iT(t),this.Ii=new Rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Ok(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const l=new Lk(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Lk extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.Ri=new Gx,this.Vi=null}static mi(e){return new Im(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const l=Ne.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Oe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.pi=new va((s=>Vn(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=xT(this,t)}static mi(e,t){return new Yf(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?H.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Oe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,s){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return H.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.serializer=e}k(e,t,s,l){const c=new xm("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(gd)})(e),(function(g){g.createObjectStore(Wu,{keyPath:WR}),g.createObjectStore(Js,{keyPath:r_,autoIncrement:!0}).createIndex(ml,a_,{unique:!0}),g.createObjectStore(Ho)})(e),Q_(e),(function(g){g.createObjectStore(cl)})(e));let d=H.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore($o),g.deleteObjectStore(Go),g.deleteObjectStore(xl)})(e),Q_(e)),d=d.next((()=>(function(g){const x=g.store(xl),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oe.min().toTimestamp(),targetCount:0};return x.put(Uf,v)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(Js).J().next((w=>{g.deleteObjectStore(Js),g.createObjectStore(Js,{keyPath:r_,autoIncrement:!0}).createIndex(ml,a_,{unique:!0});const N=x.store(Js),R=w.map((M=>N.put(M)));return H.waitFor(R)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(Ko,{keyPath:l6})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(Zu)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(bm,{keyPath:o6})})(e),(function(g){g.createObjectStore(vm,{keyPath:c6})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(wm,{keyPath:p6});x.createIndex(Vp,x6,{unique:!1}),x.createIndex(lE,y6,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(zf,{keyPath:e6});x.createIndex(gf,t6),x.createIndex(sE,n6)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(cl)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(jx,{keyPath:u6,autoIncrement:!0}).createIndex(Mp,d6,{unique:!1}),g.createObjectStore(Ou,{keyPath:h6}).createIndex(aE,f6,{unique:!1}),g.createObjectStore(Mu,{keyPath:m6}).createIndex(iE,g6,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(Ou).clear()})).next((()=>{t.objectStore(Mu).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Ax,{keyPath:b6})})(e)}))),s<18&&l>=18&&J2()&&(d=d.next((()=>{t.objectStore(Ou).clear()})).next((()=>{t.objectStore(Mu).clear()}))),d}wi(e){let t=0;return e.store(cl).ee(((s,l)=>{t+=Xf(l)})).next((()=>{const s={byteSize:t};return e.store(Zu).put(Op,s)}))}yi(e){const t=e.store(Wu),s=e.store(Js);return t.J().next((l=>H.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,pl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(ml,d).next((f=>H.forEach(f,(g=>{Ce(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=dl(this.serializer,g);return hT(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store($o),s=e.store(cl);return e.store(xl).get(Uf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new ft(d),x=(function(w){return[0,Vn(w)]})(g);c.push(t.get(x).next((v=>v?H.resolve():(w=>t.put({targetId:0,path:Vn(w),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>H.waitFor(c)))}))}bi(e,t){e.createObjectStore(ed,{keyPath:i6});const s=t.store(ed),l=new Hx,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:Vn(g)})}};return t.store(cl).ee({X:!0},((d,f)=>{const g=new ft(d);return c(g.popLast())})).next((()=>t.store(Ho).ee({X:!0},(([d,f,g],x)=>{const v=Ar(f);return c(v.popLast())}))))}Di(e){const t=e.store(Go);return t.ee(((s,l)=>{const c=Au(l),d=lT(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(cl),l=[];return s.ee(((c,d)=>{const f=t.store(zf),g=(function(w){return w.document?new Ne(ft.fromString(w.document.name).popFirst(5)):w.noDocument?Ne.fromSegments(w.noDocument.path):w.unknownDocument?Ne.fromSegments(w.unknownDocument.path):Te(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>H.waitFor(l)))}Fi(e,t){const s=t.store(Js),l=bT(this.serializer),c=new $x(Im.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??$e();dl(this.serializer,g).keys().forEach((v=>x=x.add(v))),f.set(g.userId,x)})),H.forEach(f,((g,x)=>{const v=new Dn(x),w=jm.wt(this.serializer,v),N=c.getIndexManager(v),R=Am.wt(v,this.serializer,N,c.referenceDelegate);return new vT(l,R,w,N).recalculateAndSaveOverlaysForDocumentKeys(new Pp(t,Zn.ce),g).next()}))}))}}function Q_(r){r.createObjectStore($o,{keyPath:r6}).createIndex(Sx,a6,{unique:!0}),r.createObjectStore(Go,{keyPath:"targetId"}).createIndex(rE,s6,{unique:!0}),r.createObjectStore(xl)}const ii="IndexedDbPersistence",Wg=18e5,Zg=5e3,ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Uk="main";class Kx{constructor(e,t,s,l,c,d,f,g,x,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=v,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!Kx.v())throw new xe(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jk(this,l),this.$i=t+Uk,this.serializer=new iT(g),this.Ui=new bi(this.$i,this.Ni,new zk(this.serializer)),this.hi=new pk,this.Pi=new Ek(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bT(this.serializer),this.Ii=new gk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Wt(ii,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,ep);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ii(e))return me(ii,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(ii,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return _u(e).get(No).next((t=>H.resolve(this.es(t))))}ts(e){return rf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Wg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=mn(t,Ko);return s.J().next((l=>{const c=this.ss(l,Wg),d=l.filter((f=>c.indexOf(f)===-1));return H.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):_u(e).get(No).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||rf(e).J().next((s=>this.ss(s,Zg).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&me(ii,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[gd,Ko],(e=>{const t=new Pp(e,Zn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>rf(e).J().next((t=>this.ss(t,Wg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Am.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){me(ii,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?_6:g===17?dE:g===16?w6:g===15?Ix:g===14?uE:g===13?cE:g===12?v6:g===11?oE:void Te(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new Pp(f,this.ci?this.ci.next():Zn.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw Wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new xe(te.FAILED_PRECONDITION,WN);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return _u(e).get(No).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(te.FAILED_PRECONDITION,ep)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _u(e).put(No,t)}static v(){return bi.v()}Zi(e){const t=_u(e);return t.get(No).next((s=>this.es(s)?(me(ii,"Releasing primary lease."),t.delete(No)):H.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Wt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Y2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return me(ii,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Wt(ii,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Wt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _u(r){return mn(r,gd)}function rf(r){return mn(r,Ko)}function wT(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=$e(),l=$e();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Qx(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Y2()?8:eE(fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Bk;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(Io()<=et.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Io()<=et.DEBUG&&me("QueryEngine","Query:",Co(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Io()<=et.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):H.resolve())}ys(e,t){if(y_(t))return H.resolve(null);let s=ps(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Hf(t,null,"F"),s=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=$e(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Hf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return y_(t)||l.isEqual(Oe.min())?H.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?H.resolve(null):(Io()<=et.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Co(t)),this.vs(e,d,t,YN(l,Fo)).next((f=>f)))}))}Ds(e,t){let s=new Nt(OE(e));return t.forEach(((l,c)=>{yd(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return Io()<=et.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LocalStore",qk=3e8;class Fk{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Ct(Le),this.xs=new va((c=>Sl(c)),pd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function NT(r,e,t,s){return new Fk(r,e,t,s)}async function ET(r,e){const t=je(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=$e();for(const x of l){d.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}for(const x of c){f.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function Hk(r,e){const t=je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,v){const w=x.batch,N=w.keys();let R=H.resolve();return N.forEach((M=>{R=R.next((()=>v.getEntry(g,M))).next((W=>{const B=x.docVersions.get(M);Ce(B!==null,48541),W.version.compareTo(B)<0&&(w.applyToRemoteDocument(W,x),W.isValidDocument()&&(W.setReadTime(x.commitVersion),v.addEntry(W)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=$e();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function TT(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Gk(r,e){const t=je(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((v,w)=>{const N=l.get(w);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,w))));let R=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Zt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,s)),l=l.insert(w,R),(function(W,B,de){return W.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=qk?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(N,R,v)&&f.push(t.Pi.updateTargetData(c,R))}));let g=gs(),x=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),f.push($k(c,d,e.documentUpdates).next((v=>{g=v.ks,x=v.qs}))),!s.isEqual(Oe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(v)}return H.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function $k(r,e,t){let s=$e(),l=$e();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=gs();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):me(Xx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function Kk(r,e){const t=je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=pl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Jf(r,e){const t=je(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,H.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new la(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function sc(r,e,t){const s=je(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ii(d))throw d;me(Xx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function Wf(r,e,t){const s=je(r);let l=Oe.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,v){const w=je(g),N=w.xs.get(v);return N!==void 0?H.resolve(w.Ms.get(N)):w.Pi.getTargetData(x,v)})(s,d,ps(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Oe.min(),t?c:$e()))).next((f=>(AT(s,DE(e),f),{documents:f,Qs:c})))))}function ST(r,e){const t=je(r),s=je(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function jT(r,e){const t=je(r),s=t.Os.get(e)||Oe.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,YN(s,Fo),Number.MAX_SAFE_INTEGER))).then((l=>(AT(t,e,l),l)))}function AT(r,e,t){let s=r.Os.get(e)||Oe.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="firestore_clients";function X_(r,e){return`${IT}_${r}_${e}`}const CT="firestore_mutations";function Y_(r,e,t){let s=`${CT}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const RT="firestore_targets";function tp(r,e){return`${RT}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SharedClientState";class Zf{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new xe(l.error.code,l.error.message))),d?new Zf(e,t,l.state,c):(Wt(Sr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new xe(s.error.code,s.error.message))),c?new Uu(e,s.state,l):(Wt(Sr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class em{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Ox();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=tE(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new em(e,c):(Wt(Sr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Yx(t.clientId,t.onlineState):(Wt(Sr,`Failed to parse online state: ${e}`),null)}}class Jp{constructor(){this.activeTargetIds=Ox()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ct(Le),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=X_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Jp),this.ro=new RegExp(`^${IT}_${d}_([^_]*)$`),this.io=new RegExp(`^${CT}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${RT}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(X_(this.persistenceKey,s));if(l){const c=em.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(tp(this.persistenceKey,e));if(l){const c=Uu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me(Sr,"READ",e,t),t}setItem(e,t){me(Sr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){me(Sr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(me(Sr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=Zn.ce;if(c!=null)try{const f=JSON.parse(c);Ce(typeof f=="number",30636,{So:c}),d=f}catch(f){Wt(Sr,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==Zn.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new Zf(this.currentUser,e,t,s),c=Y_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=Y_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=tp(this.persistenceKey,e),c=new Uu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return em.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return Zf.Ws(new Dn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Uu.Ws(l,t)}uo(e){return Yx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);me(Sr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Ox();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class kT{constructor(){this.Mo=new Jp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="ConnectivityMonitor";class W_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(J_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(J_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af=null;function Wp(){return af===null?af=(function(){return 268435456+Math.round(2147483648*Math.random())})():af++,"0x"+af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="RestConnection",Xk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Bf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=Wp(),f=this.zo(e,t.toUriEncodedString());me(sp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),v=oc(x);return this.Jo(e,f,g,s,v).then((w=>(me(sp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Xu(sp,`RPC '${e}' ${d} failed with error: `,w,"url: ",f,"request:",s),w}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=Xk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class Wk extends Yk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=Wp();return new Promise(((f,g)=>{const x=new BN;x.setWithCredentials(!0),x.listenOnce(qN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case hf.NO_ERROR:const w=x.getResponseJson();me(kn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),f(w);break;case hf.TIMEOUT:me(kn,`RPC '${e}' ${d} timed out`),g(new xe(te.DEADLINE_EXCEEDED,"Request time out"));break;case hf.HTTP_ERROR:const N=x.getStatus();if(me(kn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let R=x.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const W=(function(de){const ce=de.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ce)>=0?ce:te.UNKNOWN})(M.status);g(new xe(W,M.message))}else g(new xe(te.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new xe(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{me(kn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(l);me(kn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",v,s,15)}))}T_(e,t,s){const l=Wp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=GN(),f=HN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=c.join("");me(kn,`Creating RPC '${e}' stream ${l}: ${v}`,g);const w=d.createWebChannel(v,g);this.I_(w);let N=!1,R=!1;const M=new Jk({Yo:B=>{R?me(kn,`Not sending because RPC '${e}' stream ${l} is closed:`,B):(N||(me(kn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),N=!0),me(kn,`RPC '${e}' stream ${l} sending:`,B),w.send(B))},Zo:()=>w.close()}),W=(B,de,ce)=>{B.listen(de,(oe=>{try{ce(oe)}catch(we){setTimeout((()=>{throw we}),0)}}))};return W(w,Tu.EventType.OPEN,(()=>{R||(me(kn,`RPC '${e}' stream ${l} transport opened.`),M.o_())})),W(w,Tu.EventType.CLOSE,(()=>{R||(R=!0,me(kn,`RPC '${e}' stream ${l} transport closed`),M.a_(),this.E_(w))})),W(w,Tu.EventType.ERROR,(B=>{R||(R=!0,Xu(kn,`RPC '${e}' stream ${l} transport errored. Name:`,B.name,"Message:",B.message),M.a_(new xe(te.UNAVAILABLE,"The operation could not be completed")))})),W(w,Tu.EventType.MESSAGE,(B=>{var de;if(!R){const ce=B.data[0];Ce(!!ce,16349);const oe=ce,we=(oe==null?void 0:oe.error)||((de=oe[0])==null?void 0:de.error);if(we){me(kn,`RPC '${e}' stream ${l} received error:`,we);const ge=we.status;let G=(function(A){const O=on[A];if(O!==void 0)return KE(O)})(ge),S=we.message;G===void 0&&(G=te.INTERNAL,S="Unknown error status: "+ge+" with message "+we.message),R=!0,M.a_(new xe(G,S)),w.close()}else me(kn,`RPC '${e}' stream ${l} received:`,ce),M.u_(ce)}})),W(f,FN.STAT_EVENT,(B=>{B.stat===Rp.PROXY?me(kn,`RPC '${e}' stream ${l} detected buffering proxy`):B.stat===Rp.NOPROXY&&me(kn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return typeof window<"u"?window:null}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(r){return new sk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class MT{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new xe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zk extends MT{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ik(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Oe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?Bn(d.readTime):Oe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=$p(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=qf(g)?{documents:tT(c,g)}:{query:qx(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=YE(c,d.resumeToken);const x=Hp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Oe.min())>0){f.readTime=nc(c,d.snapshotVersion.toTimestamp());const x=Hp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=ck(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=$p(this.serializer),t.removeTarget=e,this.q_(t)}}class e9 extends MT{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lk(e.writeResults,e.commitTime),s=Bn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=$p(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>$f(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{}class n9 extends t9{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Gp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(te.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Gp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class s9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wt(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="RemoteStore";class r9{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ml(this)&&(me(Cl,"Restarting streams for network reachability change."),await(async function(g){const x=je(g);x.Ea.add(4),await _d(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Rm(x)})(this))}))})),this.Ra=new s9(s,l)}}async function Rm(r){if(Ml(r))for(const e of r.da)await e(!0)}async function _d(r){for(const e of r.da)await e(!1)}function km(r,e){const t=je(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zx(t)?Wx(t):gc(t).O_()&&Jx(t,e))}function rc(r,e){const t=je(r),s=gc(t);t.Ia.delete(e),s.O_()&&VT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ml(t)&&t.Ra.set("Unknown"))}function Jx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(r).Y_(e)}function VT(r,e){r.Va.Ue(e),gc(r).Z_(e)}function Wx(r){r.Va=new Z6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),gc(r).start(),r.Ra.ua()}function Zx(r){return Ml(r)&&!gc(r).x_()&&r.Ia.size>0}function Ml(r){return je(r).Ea.size===0}function PT(r){r.Va=void 0}async function a9(r){r.Ra.set("Online")}async function i9(r){r.Ia.forEach(((e,t)=>{Jx(r,e)}))}async function l9(r,e){PT(r),Zx(r)?(r.Ra.ha(e),Wx(r)):r.Ra.set("Unknown")}async function o9(r,e,t){if(r.Ra.set("Online"),e instanceof XE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){me(Cl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await tm(r,s)}else if(e instanceof vf?r.Va.Ze(e):e instanceof QE?r.Va.st(e):r.Va.tt(e),!t.isEqual(Oe.min()))try{const s=await TT(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(x);v&&c.Ia.set(x,v.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),VT(c,g);const w=new la(v.target,g,x,v.sequenceNumber);Jx(c,w)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){me(Cl,"Failed to raise snapshot:",s),await tm(r,s)}}async function tm(r,e,t){if(!Ii(e))throw e;r.Ea.add(1),await _d(r),r.Ra.set("Offline"),t||(t=()=>TT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(Cl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Rm(r)}))}function LT(r,e){return e().catch((t=>tm(r,t,e)))}async function mc(r){const e=je(r),t=Ti(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pl;for(;c9(e);)try{const l=await Kk(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,u9(e,l)}catch(l){await tm(e,l)}zT(e)&&UT(e)}function c9(r){return Ml(r)&&r.Ta.length<10}function u9(r,e){r.Ta.push(e);const t=Ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function zT(r){return Ml(r)&&!Ti(r).x_()&&r.Ta.length>0}function UT(r){Ti(r).start()}async function d9(r){Ti(r).ra()}async function h9(r){const e=Ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function f9(r,e,t){const s=r.Ta.shift(),l=Lx.from(s,e,t);await LT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await mc(r)}async function m9(r,e){e&&Ti(r).X_&&await(async function(s,l){if((function(d){return Y6(d)&&d!==te.ABORTED})(l.code)){const c=s.Ta.shift();Ti(s).B_(),await LT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await mc(s)}})(r,e),zT(r)&&UT(r)}async function e2(r,e){const t=je(r);t.asyncQueue.verifyOperationInProgress(),me(Cl,"RemoteStore received new credentials");const s=Ml(t);t.Ea.add(3),await _d(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rm(t)}async function Zp(r,e){const t=je(r);e?(t.Ea.delete(2),await Rm(t)):e||(t.Ea.add(2),await _d(t),t.Ra.set("Unknown"))}function gc(r){return r.ma||(r.ma=(function(t,s,l){const c=je(t);return c.sa(),new Zk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:a9.bind(null,r),t_:i9.bind(null,r),r_:l9.bind(null,r),H_:o9.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Zx(r)?Wx(r):r.Ra.set("Unknown")):(await r.ma.stop(),PT(r))}))),r.ma}function Ti(r){return r.fa||(r.fa=(function(t,s,l){const c=je(t);return c.sa(),new e9(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:d9.bind(null,r),r_:m9.bind(null,r),ta:h9.bind(null,r),na:f9.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mc(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Cl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new ey(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(r,e){if(Wt("AsyncQueue",`${e}: ${r}`),Ii(r))return new xe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.ga=new Ct(Ne.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ac{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new ac(e,t,zo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class p9{constructor(){this.queries=n2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=je(t),c=l.queries;l.queries=n2(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new xe(te.ABORTED,"Firestore shutting down"))}}function n2(){return new va((r=>kE(r)),Em)}async function ty(r,e){const t=je(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new g9,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Dm(d,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&sy(t)}async function ny(r,e){const t=je(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function x9(r,e){const t=je(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&sy(t)}function y9(r,e,t){const s=je(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function sy(r){r.Ca.forEach((e=>{e.next()}))}var ex,s2;(s2=ex||(ex={})).Ma="default",s2.Cache="cache";class ry{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new ac(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ex.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class FT{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=OE(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new t2,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((v,w)=>{const N=l.get(v),R=yd(this.query,w)?w:null,M=!!N&&this.mutatedKeys.has(N.key),W=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let B=!1;N&&R?N.data.isEqual(R.data)?M!==W&&(s.track({type:3,doc:R}),B=!0):this.su(N,R)||(s.track({type:2,doc:R}),B=!0,(g&&this.eu(R,g)>0||x&&this.eu(R,x)<0)&&(f=!0)):!N&&R?(s.track({type:0,doc:R}),B=!0):N&&!R&&(s.track({type:1,doc:N}),B=!0,(g||x)&&(f=!0)),B&&(R?(d=d.add(R),c=W?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,w)=>(function(R,M){const W=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:B})}};return W(R)-W(M)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new ac(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new qT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new BT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ac.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pc="SyncEngine";class b9{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class v9{constructor(e){this.key=e,this.hu=!1}}class w9{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new va((f=>kE(f)),Em),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ne.comparator),this.Au=new Map,this.Ru=new Gx,this.Vu={},this.mu=new Map,this.fu=Il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _9(r,e,t=!0){const s=Om(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await HT(s,e,t,!0),l}async function N9(r,e){const t=Om(r);await HT(t,e,!0,!1)}async function HT(r,e,t,s){const l=await Jf(r.localStore,ps(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ay(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&km(r.remoteStore,l),f}async function ay(r,e,t,s,l){r.pu=(w,N,R)=>(async function(W,B,de,ce){let oe=B.view.ru(de);oe.Cs&&(oe=await Wf(W.localStore,B.query,!1).then((({documents:S})=>B.view.ru(S,oe))));const we=ce&&ce.targetChanges.get(B.targetId),ge=ce&&ce.targetMismatches.get(B.targetId)!=null,G=B.view.applyChanges(oe,W.isPrimaryClient,we,ge);return tx(W,B.targetId,G.au),G.snapshot})(r,w,N,R);const c=await Wf(r.localStore,e,!0),d=new FT(e,c.Qs),f=d.ru(c.documents),g=wd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);tx(r,t,x.au);const v=new b9(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function E9(r,e,t){const s=je(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Em(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await sc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&rc(s.remoteStore,l.targetId),ic(s,l.targetId)})).catch(Ai)):(ic(s,l.targetId),await sc(s.localStore,l.targetId,!0))}async function T9(r,e){const t=je(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),rc(t.remoteStore,s.targetId))}async function S9(r,e,t){const s=cy(r);try{const l=await(function(d,f){const g=je(d),x=wt.now(),v=f.reduce(((R,M)=>R.add(M.key)),$e());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let M=gs(),W=$e();return g.Ns.getEntries(R,v).next((B=>{M=B,M.forEach(((de,ce)=>{ce.isValidDocument()||(W=W.add(de))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,M))).next((B=>{w=B;const de=[];for(const ce of f){const oe=K6(ce,w.get(ce.key).overlayedDocument);oe!=null&&de.push(new wa(ce.key,oe,wE(oe.value.mapValue),dn.exists(!0)))}return g.mutationQueue.addMutationBatch(R,x,de,f)})).next((B=>{N=B;const de=B.applyToLocalDocumentSet(w,W);return g.documentOverlayCache.saveOverlays(R,B.batchId,de)}))})).then((()=>({batchId:N.batchId,changes:VE(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Ct(Le)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Ri(s,l.changes),await mc(s.remoteStore)}catch(l){const c=Dm(l,"Failed to persist write");t.reject(c)}}async function GT(r,e){const t=je(r);try{const s=await Gk(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(Ce(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ce(d.hu,14607):l.removedDocuments.size>0&&(Ce(d.hu,42227),d.hu=!1))})),await Ri(t,s,e)}catch(s){await Ai(s)}}function r2(r,e,t){const s=je(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=je(d);g.onlineState=f;let x=!1;g.queries.forEach(((v,w)=>{for(const N of w.Sa)N.va(f)&&(x=!0)})),x&&sy(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function j9(r,e,t){const s=je(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Ct(Ne.comparator);d=d.insert(c,Kt.newNoDocument(c,Oe.min()));const f=$e().add(c),g=new vd(Oe.min(),new Map,new Ct(Le),d,f);await GT(s,g),s.du=s.du.remove(c),s.Au.delete(e),oy(s)}else await sc(s.localStore,e,!1).then((()=>ic(s,e,t))).catch(Ai)}async function A9(r,e){const t=je(r),s=e.batch.batchId;try{const l=await Hk(t.localStore,e);ly(t,s,null),iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ri(t,l)}catch(l){await Ai(l)}}async function I9(r,e,t){const s=je(r);try{const l=await(function(d,f){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let v;return g.mutationQueue.lookupMutationBatch(x,f).next((w=>(Ce(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v))).next((()=>g.localDocuments.getDocuments(x,v)))}))})(s.localStore,e);ly(s,e,t),iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ri(s,l)}catch(l){await Ai(l)}}function iy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ly(r,e,t){const s=je(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function ic(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||$T(r,s)}))}function $T(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(rc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),oy(r))}function tx(r,e,t){for(const s of t)s instanceof BT?(r.Ru.addReference(s.key,e),C9(r,s)):s instanceof qT?(me(pc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||$T(r,s.key)):Te(19791,{wu:s})}function C9(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(me(pc,"New document in limbo: "+t),r.Eu.add(s),oy(r))}function oy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ne(ft.fromString(e)),s=r.fu.next();r.Au.set(s,new v9(t)),r.du=r.du.insert(t,s),km(r.remoteStore,new la(ps(xd(t.path)),s,"TargetPurposeLimboResolution",Zn.ce))}}async function Ri(r,e,t){const s=je(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var v;if((x||t)&&s.isPrimaryClient){const w=x?!x.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(x){l.push(x);const w=Qx.As(g.targetId,x);c.push(w)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const v=je(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>H.forEach(x,(N=>H.forEach(N.Es,(R=>v.persistence.referenceDelegate.addReference(w,N.targetId,R))).next((()=>H.forEach(N.ds,(R=>v.persistence.referenceDelegate.removeReference(w,N.targetId,R)))))))))}catch(w){if(!Ii(w))throw w;me(Xx,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const R=v.Ms.get(N),M=R.snapshotVersion,W=R.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(N,W)}}})(s.localStore,c))}async function R9(r,e){const t=je(r);if(!t.currentUser.isEqual(e)){me(pc,"User change. New user:",e.toKey());const s=await ET(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new xe(te.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ri(t,s.Ls)}}function k9(r,e){const t=je(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let l=$e();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function D9(r,e){const t=je(r),s=await Wf(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&tx(t,e.targetId,l.au),l}async function O9(r,e){const t=je(r);return jT(t.localStore,e).then((s=>Ri(t,s)))}async function M9(r,e,t,s){const l=je(r),c=await(function(f,g){const x=je(f),v=je(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.er(w,g).next((N=>N?x.localDocuments.getDocuments(w,N):H.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await mc(l.remoteStore):t==="acknowledged"||t==="rejected"?(ly(l,e,s||null),iy(l,e),(function(f,g){je(je(f).mutationQueue).ir(g)})(l.localStore,e)):Te(6720,"Unknown batchState",{Su:t}),await Ri(l,c)):me(pc,"Cannot apply mutation batch with id: "+e)}async function V9(r,e){const t=je(r);if(Om(t),cy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await a2(t,s.toArray());t.gu=!0,await Zp(t.remoteStore,!0);for(const c of l)km(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(ic(t,d),sc(t.localStore,d,!0)))),rc(t.remoteStore,d)})),await l,await a2(t,s),(function(d){const f=je(d);f.Au.forEach(((g,x)=>{rc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Ct(Ne.comparator)})(t),t.gu=!1,await Zp(t.remoteStore,!1)}}async function a2(r,e,t){const s=je(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await Jf(s.localStore,ps(g[0]));for(const x of g){const v=s.Tu.get(x),w=await D9(s,v);w.snapshot&&c.push(w.snapshot)}}else{const x=await ST(s.localStore,d);f=await Jf(s.localStore,x),await ay(s,KT(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function KT(r){return IE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function P9(r){return(function(t){return je(je(t).persistence).Ts()})(je(r).localStore)}async function L9(r,e,t,s){const l=je(r);if(l.gu)return void me(pc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await jT(l.localStore,DE(c[0])),f=vd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Zt.EMPTY_BYTE_STRING);await Ri(l,d,f);break}case"rejected":await sc(l.localStore,e,!0),ic(l,e,s);break;default:Te(64155,t)}}async function z9(r,e,t){const s=Om(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){me(pc,"Adding an already active target "+l);continue}const c=await ST(s.localStore,l),d=await Jf(s.localStore,c);await ay(s,KT(c),d.targetId,!1,d.resumeToken),km(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await sc(s.localStore,l,!1).then((()=>{rc(s.remoteStore,l),ic(s,l)})).catch(Ai)}}function Om(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j9.bind(null,e),e.Pu.H_=x9.bind(null,e.eventManager),e.Pu.yu=y9.bind(null,e.eventManager),e}function cy(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I9.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NT(this.persistence,new _T,e.initialUser,this.serializer)}Cu(e){return new $x(Im.mi,this.serializer)}Du(e){return new kT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class U9 extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Yf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pT(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new $x((s=>Yf.mi(s,t)),this.serializer)}}class QT extends id{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cy(this.xu.syncEngine),await mc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return NT(this.persistence,new _T,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new pT(s,e.asyncQueue,t)}Mu(e,t){const s=new YR(t,this.persistence);return new XR(e.asyncQueue,s)}Cu(e){const t=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Kx(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,DT(),_f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new kT}}class B9 extends QT{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof np&&(this.sharedClientState.syncEngine={Co:M9.bind(null,t),vo:L9.bind(null,t),Fo:z9.bind(null,t),Ts:P9.bind(null,t),Do:O9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await V9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=DT();if(!np.v(t))throw new xe(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new np(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class ld{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>r2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=R9.bind(null,this.syncEngine),await Zp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new p9})()}createDatastore(e){const t=Cm(e.databaseInfo.databaseId),s=(function(c){return new Wk(c)})(e.databaseInfo);return(function(c,d,f,g){return new n9(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new r9(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>r2(this.syncEngine,t,0)),(function(){return W_.v()?new W_:new Qk})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,v){const w=new w9(l,c,d,f,g,x);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=je(l);me(Cl,"RemoteStore shutting down."),c.Ea.add(5),await _d(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class q9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Dn.UNAUTHENTICATED,this.clientId=Nx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{me(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(me(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Dm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rp(r,e){r.asyncQueue.verifyOperationInProgress(),me(Si,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await ET(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function i2(r,e){r.asyncQueue.verifyOperationInProgress();const t=await XT(r);me(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>e2(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>e2(e.remoteStore,l))),r._onlineComponents=e}async function XT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Si,"Using user provided OfflineComponentProvider");try{await rp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Xu("Error using user provided cache. Falling back to memory cache: "+t),await rp(r,new id)}}else me(Si,"Using default OfflineComponentProvider"),await rp(r,new U9(void 0));return r._offlineComponents}async function dy(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Si,"Using user provided OnlineComponentProvider"),await i2(r,r._uninitializedComponentsProvider._online)):(me(Si,"Using default OnlineComponentProvider"),await i2(r,new ld))),r._onlineComponents}function F9(r){return XT(r).then((e=>e.localStore))}function H9(r){return dy(r).then((e=>e.syncEngine))}function G9(r){return dy(r).then((e=>e.datastore))}async function nm(r){const e=await dy(r),t=e.eventManager;return t.onListen=_9.bind(null,e.syncEngine),t.onUnlisten=E9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T9.bind(null,e.syncEngine),t}function $9(r,e,t={}){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new uy({next:N=>{v.Nu(),d.enqueueAndForget((()=>ny(c,w)));const R=N.docs.has(f);!R&&N.fromCache?x.reject(new xe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&N.fromCache&&g&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new ry(xd(f.path),v,{includeMetadataChanges:!0,qa:!0});return ty(c,w)})(await nm(r),r.asyncQueue,e,t,s))),s.promise}function K9(r,e){const t=new zs;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await Wf(l,c,!0),g=new FT(c,f.Qs),x=g.ru(f.documents),v=g.applyChanges(x,!1);d.resolve(v.snapshot)}catch(f){const g=Dm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await F9(r),e,t))),t.promise}function YT(r,e,t={}){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new uy({next:N=>{v.Nu(),d.enqueueAndForget((()=>ny(c,w))),N.fromCache&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new ry(f,v,{includeMetadataChanges:!0,qa:!0});return ty(c,w)})(await nm(r),r.asyncQueue,e,t,s))),s.promise}function Q9(r,e,t){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>{try{const l=await G9(r);s.resolve((async function(d,f,g){var W;const x=je(d),{request:v,gt:w,parent:N}=ok(x.serializer,V6(f),g);x.connection.$o||delete v.parent;const R=(await x.Ho("RunAggregationQuery",x.serializer.databaseId,N,v,1)).filter((B=>!!B.result));Ce(R.length===1,64727);const M=(W=R[0].result)==null?void 0:W.aggregateFields;return Object.keys(M).reduce(((B,de)=>(B[w[de]]=M[de],B)),{})})(l,e,t))}catch(l){s.reject(l)}})),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="firestore.googleapis.com",o2=!0;class c2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X9,this.ssl=o2}else this.host=e.host,this.ssl=e.ssl??o2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new VR;switch(s.type){case"firstParty":return new zR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=l2.get(t);s&&(me("ComponentProvider","Removing Datastore"),l2.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sr(this.firestore,e,this._query)}}class Qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(md(t,Qt._jsonSchema))return new Qt(e,s||null,new Ne(ft.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:cn("string",Qt._jsonSchemaVersion),referencePath:cn("string")};class vi extends sr{constructor(e,t,s){super(e,t,xd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ne(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function gt(r,e,...t){if(r=Bt(r),QN("collection","path",e),r instanceof hy){const s=ft.fromString(e,...t);return Zw(s),new vi(r,null,s)}{if(!(r instanceof Qt||r instanceof vi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return Zw(s),new vi(r.firestore,null,s)}}function Fn(r,e,...t){if(r=Bt(r),arguments.length===1&&(e=Nx.newId()),QN("doc","path",e),r instanceof hy){const s=ft.fromString(e,...t);return Ww(s),new Qt(r,null,new Ne(s))}{if(!(r instanceof Qt||r instanceof vi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return Ww(s),new Qt(r.firestore,r instanceof vi?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="AsyncQueue";class d2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OT(this,"async_queue_retry"),this._c=()=>{const s=_f();s&&me(u2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=_f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ii(e))throw e;me(u2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wt("INTERNAL UNHANDLED ERROR: ",h2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=ey.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Te(47125,{Pc:h2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function h2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class vs extends hy{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new d2,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d2(e),this._firestoreClient=void 0,await e}}}function Y9(r,e,t){t||(t=Bf);const s=Ol(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(_i(c,e))return l;throw new xe(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xe(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&oc(e.host)&&K2(e.host),s.initialize({options:e,instanceIdentifier:t})}function ki(r){if(r._terminated)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||J9(r),r._firestoreClient}function J9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,v){return new T6(f,g,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,JT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new q9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Z9{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(Zt.fromBase64String(e))}catch(t){throw new xe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ps(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(md(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:cn("string",Ps._jsonSchemaVersion),bytes:cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if(md(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:cn("string",kr._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(md(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new xe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:cn("string",Dr._jsonSchemaVersion),vectorValues:cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=/^__.*__$/;class t8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new fc(e,this.data,t,this.fieldTransforms)}}class WT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class fy{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZT(this.Ac)&&e8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class n8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Cm(e)}Cc(e,t,s,l=!1){return new fy({Ac:e,methodName:t,Dc:s,path:Ht.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(r){const e=r._freezeSettings(),t=Cm(r._databaseId);return new n8(r._databaseId,!!e.ignoreUndefinedProperties,t)}function my(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);xy("Data must be an object, but it was:",d,s);const f=nS(s,d);let g,x;if(c.merge)g=new es(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const N=nx(e,w,t);if(!d.contains(N))throw new xe(te.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);rS(v,N)||v.push(N)}g=new es(v),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new t8(new Mn(f),g,x)}class Mm extends Ed{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mm}}class gy extends Ed{_toFieldTransform(e){return new Vx(e.path,new Wo)}isEqual(e){return e instanceof gy}}class py extends Ed{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new tc(e.serializer,zE(e.serializer,this.Fc));return new Vx(e.path,t)}isEqual(e){return e instanceof py&&this.Fc===e.Fc}}function eS(r,e,t,s){const l=r.Cc(1,e,t);xy("Data must be an object, but it was:",l,s);const c=[],d=Mn.empty();Ci(s,((g,x)=>{const v=yy(e,g,t);x=Bt(x);const w=l.yc(v);if(x instanceof Mm)c.push(v);else{const N=Sd(x,w);N!=null&&(c.push(v),d.set(v,N))}}));const f=new es(c);return new WT(d,f,l.fieldTransforms)}function tS(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[nx(e,s,t)],g=[l];if(c.length%2!=0)throw new xe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(nx(e,c[N])),g.push(c[N+1]);const x=[],v=Mn.empty();for(let N=f.length-1;N>=0;--N)if(!rS(x,f[N])){const R=f[N];let M=g[N];M=Bt(M);const W=d.yc(R);if(M instanceof Mm)x.push(R);else{const B=Sd(M,W);B!=null&&(x.push(R),v.set(R,B))}}const w=new es(x);return new WT(v,w,d.fieldTransforms)}function s8(r,e,t,s=!1){return Sd(t,r.Cc(s?4:3,e))}function Sd(r,e){if(sS(r=Bt(r)))return xy("Unsupported field value:",e,r),nS(r,e);if(r instanceof Ed)return(function(s,l){if(!ZT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=Sd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return zE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=wt.fromDate(s);return{timestampValue:nc(l.serializer,c)}}if(s instanceof wt){const c=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nc(l.serializer,c)}}if(s instanceof kr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ps)return{bytesValue:YE(l.serializer,s._byteString)};if(s instanceof Qt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Dr)return(function(d,f){return{mapValue:{fields:{[Rx]:{stringValue:kx},[Qo]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Mx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${pm(s)}`)})(r,e)}function nS(r,e){const t={};return hE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(r,((s,l)=>{const c=Sd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function sS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof wt||r instanceof kr||r instanceof Ps||r instanceof Qt||r instanceof Ed||r instanceof Dr)}function xy(r,e,t){if(!sS(t)||!XN(t)){const s=pm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function nx(r,e,t){if((e=Bt(e))instanceof Nd)return e._internalPath;if(typeof e=="string")return yy(r,e);throw sm("Field path arguments must be of type string or ",r,!1,void 0,t)}const r8=new RegExp("[~\\*/\\[\\]]");function yy(r,e,t){if(e.search(r8)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Nd(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sm(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new xe(te.INVALID_ARGUMENT,f+r+g)}function rS(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class a8 extends aS{data(){return super.data()}}function Vm(r,e){return typeof e=="string"?yy(r,e):e instanceof Nd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class vy extends by{}function Pn(r,e,...t){let s=[];e instanceof by&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof wy)).length,f=c.filter((g=>g instanceof Pm)).length;if(d>1||d>0&&f>0)throw new xe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Pm extends vy{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Pm(e,t,s)}_apply(e){const t=this._parse(e);return oS(e._query,t),new sr(e.firestore,e.converter,Fp(e._query,t))}_parse(e){const t=Td(e.firestore);return(function(c,d,f,g,x,v,w){let N;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g2(w,v);const M=[];for(const W of w)M.push(m2(g,c,W));N={arrayValue:{values:M}}}else N=m2(g,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g2(w,v),N=s8(f,d,w,v==="in"||v==="not-in");return tt.create(x,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Cn(r,e,t){const s=e,l=Vm("where",r);return Pm._create(l,s,t)}class wy extends by{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:_t.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)oS(d,g),d=Fp(d,g)})(e._query,t),new sr(e.firestore,e.converter,Fp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends vy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _y(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ad(c,d)})(e._query,this._field,this._direction);return new sr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new hc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function jd(r,e="asc"){const t=e,s=Vm("orderBy",r);return _y._create(s,t)}class Ny extends vy{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ny(e,t,s)}_apply(e){return new sr(e.firestore,e.converter,Hf(e._query,this._limit,this._limitType))}}function lS(r){return $R("limit",r),Ny._create("limit",r,"F")}function m2(r,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new xe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&t.indexOf("/")!==-1)throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ft.fromString(t));if(!Ne.isDocumentKey(s))throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sd(r,new Ne(s))}if(t instanceof Qt)return sd(r,t._key);throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(t)}.`)}function g2(r,e){if(!Array.isArray(r)||r.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oS(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class i8{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ci(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[Qo].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>zt(d.doubleValue)));return new Dr(t)}convertGeoPoint(e){return new kr(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=_m(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const t=pa(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ft.fromString(e);Ce(aT(s),9688,{name:e});const l=new Tl(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return l.isEqual(t)||Wt(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}function l8(){return new W9("count")}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bl extends aS{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",bl._jsonSchema={type:cn("string",bl._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Nf extends bl{data(e={}){return super.data(e)}}class da{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Iu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Nf(this._firestore,this._userDataWriter,s.key,s,new Iu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new Nf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Iu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new Nf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Iu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,v=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),v=d.indexOf(f.doc.key)),{type:o8(f.type),doc:g,oldIndex:x,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(r){r=hn(r,Qt);const e=hn(r.firestore,vs);return $9(ki(e),r._key).then((t=>uS(e,r,t)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:cn("string",da._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class xc extends i8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function ss(r){r=hn(r,sr);const e=hn(r.firestore,vs),t=ki(e),s=new xc(e);return iS(r._query),YT(t,r._query).then((l=>new da(e,s,r,l)))}function c8(r){r=hn(r,sr);const e=hn(r.firestore,vs),t=ki(e),s=new xc(e);return K9(t,r._query).then((l=>new da(e,s,r,l)))}function u8(r){r=hn(r,sr);const e=hn(r.firestore,vs),t=ki(e),s=new xc(e);return YT(t,r._query,{source:"server"}).then((l=>new da(e,s,r,l)))}function Ty(r,e,t){r=hn(r,Qt);const s=hn(r.firestore,vs),l=Ey(r.converter,e,t);return Ad(s,[my(Td(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,dn.none())])}function Lm(r,e,t,...s){r=hn(r,Qt);const l=hn(r.firestore,vs),c=Td(l);let d;return d=typeof(e=Bt(e))=="string"||e instanceof Nd?tS(c,"updateDoc",r._key,e,t,s):eS(c,"updateDoc",r._key,e),Ad(l,[d.toMutation(r._key,dn.exists(!0))])}function zm(r){return Ad(hn(r.firestore,vs),[new bd(r._key,dn.none())])}function tr(r,e){const t=hn(r.firestore,vs),s=Fn(r),l=Ey(r.converter,e);return Ad(t,[my(Td(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then((()=>s))}function d8(r,...e){var g,x,v;r=Bt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||f2(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(f2(e[s])){const w=e[s];e[s]=(g=w.next)==null?void 0:g.bind(w),e[s+1]=(x=w.error)==null?void 0:x.bind(w),e[s+2]=(v=w.complete)==null?void 0:v.bind(w)}let c,d,f;if(r instanceof Qt)d=hn(r.firestore,vs),f=xd(r._key.path),c={next:w=>{e[s]&&e[s](uS(d,r,w))},error:e[s+1],complete:e[s+2]};else{const w=hn(r,sr);d=hn(w.firestore,vs),f=w._query;const N=new xc(d);c={next:R=>{e[s]&&e[s](new da(d,N,w,R))},error:e[s+1],complete:e[s+2]},iS(r._query)}return(function(N,R,M,W){const B=new uy(W),de=new ry(R,B,M);return N.asyncQueue.enqueueAndForget((async()=>ty(await nm(N),de))),()=>{B.Nu(),N.asyncQueue.enqueueAndForget((async()=>ny(await nm(N),de)))}})(ki(d),f,l,c)}function Ad(r,e){return(function(s,l){const c=new zs;return s.asyncQueue.enqueueAndForget((async()=>S9(await H9(s),l,c))),c.promise})(ki(r),e)}function uS(r,e,t){const s=t.docs.get(e._key),l=new xc(r);return new bl(r,l,e._key,s,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}function lf(r){return h8(r,{count:l8()})}function h8(r,e){const t=hn(r.firestore,vs),s=ki(t),l=N6(e,((c,d)=>new Q6(d,c.aggregateType,c._internalFieldPath)));return Q9(s,r._query,l).then((c=>(function(f,g,x){const v=new xc(f);return new Z9(g,v,x)})(t,r,c)))}class f8{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=x8(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function m8(r){return new f8(r)}class g8{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ld.provider,this._offlineComponentProvider={build:t=>new QT(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class p8{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ld.provider,this._offlineComponentProvider={build:t=>new B9(t,e==null?void 0:e.cacheSizeBytes)}}}function x8(r){return new g8(r==null?void 0:r.forceOwnership)}function y8(){return new p8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Td(e)}set(e,t,s){this._verifyNotCommitted();const l=ap(e,this._firestore),c=Ey(l.converter,t,s),d=my(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,dn.none())),this}update(e,t,s,...l){this._verifyNotCommitted();const c=ap(e,this._firestore);let d;return d=typeof(t=Bt(t))=="string"||t instanceof Nd?tS(this._dataReader,"WriteBatch.update",c._key,t,s,l):eS(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ap(e,this._firestore);return this._mutations=this._mutations.concat(new bd(t._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(r,e){if((r=Bt(r)).firestore!==e)throw new xe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function xs(){return new gy("serverTimestamp")}function sx(r){return new py("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(r){return ki(r=hn(r,vs)),new b8(r,(e=>Ad(r,e)))}(function(e,t=!0){(function(l){dc=l})(cc),Or(new Zs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new vs(new PR(s.getProvider("auth-internal")),new UR(d,s.getProvider("app-check-internal")),(function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new xe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(x.options.projectId,v)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ls(Qw,Xw,e),Ls(Qw,Xw,"esm2020")})();const dS="@firebase/installations",Sy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=1e4,fS=`w:${Sy}`,mS="FIS_v2",w8="https://firebaseinstallations.googleapis.com/v1",_8=3600*1e3,N8="installations",E8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rl=new Dl(N8,E8,T8);function gS(r){return r instanceof nr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS({projectId:r}){return`${w8}/projects/${r}/installations`}function xS(r){return{token:r.token,requestStatus:2,expiresIn:j8(r.expiresIn),creationTime:Date.now()}}async function yS(r,e){const s=(await e.json()).error;return Rl.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function bS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function S8(r,{refreshToken:e}){const t=bS(r);return t.append("Authorization",A8(e)),t}async function vS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function j8(r){return Number(r.replace("s","000"))}function A8(r){return`${mS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=pS(r),l=bS(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:mS,appId:r.appId,sdkVersion:fS},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await vS(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:xS(x.authToken)}}else throw await yS("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=/^[cdef][\w-]{21}$/,rx="";function k8(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=D8(r);return R8.test(t)?t:rx}catch{return rx}}function D8(r){return C8(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Map;function NS(r,e){const t=Um(r);ES(t,e),O8(t,e)}function ES(r,e){const t=_S.get(r);if(t)for(const s of t)s(e)}function O8(r,e){const t=M8();t&&t.postMessage({key:r,fid:e}),V8()}let gl=null;function M8(){return!gl&&"BroadcastChannel"in self&&(gl=new BroadcastChannel("[Firebase] FID Change"),gl.onmessage=r=>{ES(r.data.key,r.data.fid)}),gl}function V8(){_S.size===0&&gl&&(gl.close(),gl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="firebase-installations-database",L8=1,kl="firebase-installations-store";let ip=null;function jy(){return ip||(ip=tN(P8,L8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(kl)}}})),ip}async function rm(r,e){const t=Um(r),l=(await jy()).transaction(kl,"readwrite"),c=l.objectStore(kl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&NS(r,e.fid),e}async function TS(r){const e=Um(r),s=(await jy()).transaction(kl,"readwrite");await s.objectStore(kl).delete(e),await s.done}async function Bm(r,e){const t=Um(r),l=(await jy()).transaction(kl,"readwrite"),c=l.objectStore(kl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&NS(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(r){let e;const t=await Bm(r.appConfig,s=>{const l=z8(s),c=U8(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===rx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function z8(r){const e=r||{fid:k8(),registrationStatus:0};return SS(e)}function U8(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Rl.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=B8(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:q8(r)}:{installationEntry:e}}async function B8(r,e){try{const t=await I8(r,e);return rm(r.appConfig,t)}catch(t){throw gS(t)&&t.customData.serverCode===409?await TS(r.appConfig):await rm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function q8(r){let e=await p2(r.appConfig);for(;e.registrationStatus===1;)await wS(100),e=await p2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Ay(r);return s||t}return e}function p2(r){return Bm(r,e=>{if(!e)throw Rl.create("installation-not-found");return SS(e)})}function SS(r){return F8(r)?{fid:r.fid,registrationStatus:0}:r}function F8(r){return r.registrationStatus===1&&r.registrationTime+hS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8({appConfig:r,heartbeatServiceProvider:e},t){const s=G8(r,t),l=S8(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:fS,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await vS(()=>fetch(s,f));if(g.ok){const x=await g.json();return xS(x)}else throw await yS("Generate Auth Token",g)}function G8(r,{fid:e}){return`${pS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(r,e=!1){let t;const s=await Bm(r.appConfig,c=>{if(!jS(c))throw Rl.create("not-registered");const d=c.authToken;if(!e&&Q8(d))return c;if(d.requestStatus===1)return t=$8(r,e),c;{if(!navigator.onLine)throw Rl.create("app-offline");const f=Y8(c);return t=K8(r,f),f}});return t?await t:s.authToken}async function $8(r,e){let t=await x2(r.appConfig);for(;t.authToken.requestStatus===1;)await wS(100),t=await x2(r.appConfig);const s=t.authToken;return s.requestStatus===0?Iy(r,e):s}function x2(r){return Bm(r,e=>{if(!jS(e))throw Rl.create("not-registered");const t=e.authToken;return J8(t)?{...e,authToken:{requestStatus:0}}:e})}async function K8(r,e){try{const t=await H8(r,e),s={...e,authToken:t};return await rm(r.appConfig,s),t}catch(t){if(gS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await TS(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await rm(r.appConfig,s)}throw t}}function jS(r){return r!==void 0&&r.registrationStatus===2}function Q8(r){return r.requestStatus===2&&!X8(r)}function X8(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+_8}function Y8(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function J8(r){return r.requestStatus===1&&r.requestTime+hS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(r){const e=r,{installationEntry:t,registrationPromise:s}=await Ay(e);return s?s.catch(console.error):Iy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(r,e=!1){const t=r;return await eD(t),(await Iy(t,e)).token}async function eD(r){const{registrationPromise:e}=await Ay(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(r){if(!r||!r.options)throw lp("App Configuration");if(!r.name)throw lp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw lp(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function lp(r){return Rl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="installations",nD="installations-internal",sD=r=>{const e=r.getProvider("app").getImmediate(),t=tD(e),s=Ol(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},rD=r=>{const e=r.getProvider("app").getImmediate(),t=Ol(e,AS).getImmediate();return{getId:()=>W8(t),getToken:l=>Z8(t,l)}};function aD(){Or(new Zs(AS,sD,"PUBLIC")),Or(new Zs(nD,rD,"PRIVATE"))}aD();Ls(dS,Sy);Ls(dS,Sy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="analytics",iD="firebase_id",lD="origin",oD=60*1e3,cD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new hm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ys=new Dl("analytics","Analytics",uD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r){if(!r.startsWith(Cy)){const e=ys.create("invalid-gtag-resource",{gtagURL:r});return qn.warn(e.message),""}return r}function IS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function hD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function fD(r,e){const t=hD("firebase-js-sdk-policy",{createScriptURL:dD}),s=document.createElement("script"),l=`${Cy}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function mD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function gD(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await IS(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){qn.error(f)}r("config",l,c)}async function pD(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await IS(t);for(const g of d){const x=f.find(w=>w.measurementId===g),v=x&&e[x.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){qn.error(c)}}function xD(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await pD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await gD(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){qn.error(f)}}return l}function yD(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=xD(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function bD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Cy)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=30,wD=1e3;class _D{constructor(e={},t=wD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CS=new _D;function ND(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function ED(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:ND(t)},l=cD.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw ys.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function TD(r,e=CS,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw ys.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw ys.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new AD;return setTimeout(async()=>{f.abort()},oD),RS({appId:s,apiKey:l,measurementId:c},d,f,e)}async function RS(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=CS){var f;const{appId:c,measurementId:d}=r;try{await SD(s,e)}catch(g){if(d)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await ED(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!jD(x)){if(l.deleteThrottleMetadata(c),d)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const v=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?bw(t,l.intervalMillis,vD):bw(t,l.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return l.setThrottleMetadata(c,w),qn.debug(`Calling attemptFetch again in ${v} millis`),RS(r,w,s,l)}}function SD(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(ys.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jD(r){if(!(r instanceof nr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class AD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ID(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function CD(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(){if(hx())try{await W2()}catch(r){return qn.warn(ys.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return qn.warn(ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kD(r,e,t,s,l,c,d){const f=TD(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>qn.error(N)),e.push(f);const g=RD().then(N=>{if(N)return s.getId()}),[x,v]=await Promise.all([f,g]);bD(c)||fD(c,x.measurementId),l("js",new Date);const w=(d==null?void 0:d.config)??{};return w[lD]="firebase",w.update=!0,v!=null&&(w[iD]=v),l("config",x.measurementId,w),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.app=e}_delete(){return delete Uo[this.app.options.appId],Promise.resolve()}}let Uo={},y2=[];const b2={};let op="dataLayer",OD="gtag",v2,Ry,w2=!1;function MD(){const r=[];if(X2()&&r.push("This is a browser extension environment."),YA()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=ys.create("invalid-analytics-context",{errorInfo:e});qn.warn(t.message)}}function VD(r,e,t){MD();const s=r.options.appId;if(!s)throw ys.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ys.create("no-api-key");if(Uo[s]!=null)throw ys.create("already-exists",{id:s});if(!w2){mD(op);const{wrappedGtag:c,gtagCore:d}=yD(Uo,y2,b2,op,OD);Ry=c,v2=d,w2=!0}return Uo[s]=kD(r,y2,b2,e,v2,op,t),new DD(r)}function PD(r=sN()){r=Bt(r);const e=Ol(r,am);return e.isInitialized()?e.getImmediate():LD(r)}function LD(r,e={}){const t=Ol(r,am);if(t.isInitialized()){const l=t.getImmediate();if(_i(e,t.getOptions()))return l;throw ys.create("already-initialized")}return t.initialize({options:e})}function zD(r,e,t){r=Bt(r),CD(Ry,Uo[r.app.options.appId],e,t).catch(s=>qn.error(s))}function UD(r,e,t,s){r=Bt(r),ID(Ry,Uo[r.app.options.appId],e,t,s).catch(l=>qn.error(l))}const _2="@firebase/analytics",N2="0.10.19";function BD(){Or(new Zs(am,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return VD(s,l,t)},"PUBLIC")),Or(new Zs("analytics-internal",r,"PRIVATE")),Ls(_2,N2),Ls(_2,N2,"esm2020");function r(e){try{const t=e.getProvider(am).getImmediate();return{logEvent:(s,l,c)=>UD(t,s,l,c),setUserProperties:(s,l)=>zD(t,s,l)}}catch(t){throw ys.create("interop-component-reg-failed",{reason:t})}}}BD();const qD={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},ky=nN(qD),Bu=DR(ky),Ue=Y9(ky,{localCache:m8({tabManager:y8()})});PD(ky);const FD=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:i.jsx(RA,{className:"w-10 h-10 text-red-500/80"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[i.jsx(om,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"relative flex py-2 items-center",children:[i.jsx("div",{className:"flex-grow border-t border-gray-700"}),i.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),i.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[i.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),i.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),i.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:i.jsx(Bo,{className:"w-5 h-5"})})]})]})]})]}),i.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},kS=V.createContext(void 0),HD=({children:r})=>{const[e,t]=V.useState(null),[s,l]=V.useState(!0),[c,d]=V.useState(!1),f=(v,w)=>{const N=`teacher-${w.split("@")[0]}`;let R="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";v.includes("")?R="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":v.includes("")&&(R="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:N,email:w,displayName:v,role:"teacher",avatar:R,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",v),localStorage.setItem("teacherEmail",w)},g=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await _C(Bu)}catch(v){console.error("Logout error",v)}},x=async v=>{if(e)try{let w={...v};if(v.firstName!==void 0||v.lastName!==void 0){const N=v.firstName!==void 0?v.firstName:e.firstName||"",R=v.lastName!==void 0?v.lastName:e.lastName||"";w.displayName=`${N} ${R}`.trim()}if(t(N=>N?{...N,...w}:null),e.role!=="teacher"){const N=Fn(Ue,"users",e.uid);await Ty(N,w,{merge:!0})}}catch(w){throw console.error("Error updating profile:",w),w}};return V.useEffect(()=>{const v=setTimeout(()=>{s&&d(!0)},1e4),w=localStorage.getItem("isTeacher")==="true";if(w){const R=localStorage.getItem("teacherName")||"",M=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";f(R,M),l(!1),clearTimeout(v);return}const N=wC(Bu,async R=>{if(R)try{const M=Fn(Ue,"users",R.uid),W=await cS(M);if(W.exists()){const B=W.data();(R.email==="q@gmail.com"||R.email==="yazan22@gmail.com")&&(B.totalXP=25e3,B.quizzesCompleted=500),t({uid:R.uid,email:R.email||"",displayName:B.displayName||`${B.firstName||""} ${B.lastName||""}`.trim()||"Student",firstName:B.firstName,lastName:B.lastName,age:B.age,role:B.role,grade:B.grade,phone:B.phone,address:B.address,school:B.school,gender:B.gender,avatar:B.avatar,profileBackground:B.profileBackground,genderChanged:B.genderChanged})}else t({uid:R.uid,email:R.email||"",displayName:"User",role:"student"})}catch(M){console.error("Error fetching user profile:",M)}else w||t(null);l(!1),clearTimeout(v)});return()=>{N(),clearTimeout(v)}},[]),c?i.jsx(FD,{}):i.jsx(kS.Provider,{value:{user:e,loading:s,logout:g,setTeacherSession:f,updateUserProfile:x},children:s?i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),i.jsx(vt,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),i.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},rr=()=>{const r=V.useContext(kS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},cp=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],GD=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var he;const[s,l]=V.useState(!1),[c,d]=V.useState(!1),{user:f}=rr(),[g,x]=V.useState(!1),[v,w]=V.useState([]),[N,R]=V.useState(0),M=V.useRef(null),[W,B]=V.useState(!1),[de,ce]=V.useState(""),[oe,we]=V.useState("teacher-yazan"),[ge,G]=V.useState(!1),[S,j]=V.useState(!1);V.useEffect(()=>{const fe=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",fe),()=>window.removeEventListener("scroll",fe)},[]),V.useEffect(()=>{const fe=F=>{M.current&&!M.current.contains(F.target)&&x(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]),V.useEffect(()=>{if(!f){w([]);return}const fe=f.role==="teacher"?50:20,F=Pn(gt(Ue,"notifications"),jd("createdAt","desc"),lS(fe)),le=d8(F,Y=>{const re=[];let Ee=0,C=[];try{const U=localStorage.getItem(`viewed_notifs_${f.uid}`);C=U?JSON.parse(U):[]}catch(U){console.error("Error parsing viewed notifications",U)}Y.forEach(U=>{const P=U.data();if(P.recipientId==="all"||P.recipientId===f.uid){const ee=C.includes(U.id),be=P.read===!0,Re=ee||be;Re||Ee++,re.push({id:U.id,...P,read:Re,createdAt:P.createdAt?{seconds:P.createdAt.seconds,nanoseconds:P.createdAt.nanoseconds}:null})}}),w(re),R(Ee)},Y=>{console.error("Error listening to notifications:",Y)});return()=>le()},[f]);const A=async()=>{const fe=!g;if(x(fe),fe&&N>0){const F=[...v],le=F.filter(C=>!C.read),Y=le.map(C=>C.id);if(Y.length===0)return;try{const C=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`),U=C?JSON.parse(C):[],P=new Set([...U,...Y]);localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(Array.from(P)))}catch(C){console.error("Error updating local storage for notifications",C)}const re=F.map(C=>({...C,read:!0}));w(re),R(0);const Ee=le.filter(C=>C.recipientId!=="all");if(Ee.length>0)try{const C=v8(Ue);Ee.forEach(U=>{const P=Fn(Ue,"notifications",U.id);C.update(P,{read:!0})}),await C.commit()}catch(C){console.error("Error batch updating notifications:",C)}}},O=async()=>{if(de.trim()){G(!0);try{const fe=cp.find(F=>F.id===oe);await tr(gt(Ue,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:de,teacherId:oe,teacherName:fe==null?void 0:fe.name,createdAt:xs(),read:!1}),await tr(gt(Ue,"notifications"),{recipientId:oe,title:`   ${(f==null?void 0:f.displayName)||""}`,message:de.substring(0,100)+(de.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:xs(),read:!1}),alert("    !"),ce(""),B(!1),j(!1)}catch(fe){console.error(fe),alert("   ")}finally{G(!1)}}},D=fe=>{switch(fe){case"quiz":return i.jsx(ts,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(ns,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Gu,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(jr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(Jh,{className:"w-4 h-4 text-gray-400"})}},z=fe=>{if(!fe)return"";const F=fe.toDate?fe.toDate():new Date(fe.seconds*1e3);return isNaN(F.getTime())?"":F.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},I=fe=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:I(),children:[i.jsx(jf,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:I(),children:[i.jsx(ts,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:I(),children:[i.jsx(ns,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:I(),children:[i.jsx(qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:I(),children:[i.jsx(Bo,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:M,children:[i.jsxs("button",{onClick:A,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(Jh,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(Jh,{className:"w-4 h-4 text-emerald-400"}),""]}),f.role==="student"&&i.jsxs("button",{onClick:()=>{x(!1),B(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-3 py-1.5 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30 flex items-center gap-1",children:[i.jsx(jr,{className:"w-3 h-3"})," "]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:v.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(Jh,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:v.map(fe=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${fe.read?"":"bg-emerald-900/10"}`,children:[!fe.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:D(fe.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${fe.read?"text-gray-400":"text-white"}`,children:fe.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:fe.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:z(fe.createdAt)})]})]})]},fe.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(Af,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(bp,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(ms,{className:"w-6 h-6"}):i.jsx(P5,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(X4,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(jf,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(cm,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ts,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ns,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(qu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Bo,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(M2,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(Af,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(bp,{className:"w-5 h-5"}),"  "]})})]})})]}),W&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{B(!1),j(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{B(!1),j(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(ms,{className:"w-5 h-5"})}),S?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(oa,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(he=cp.find(fe=>fe.id===oe))==null?void 0:he.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:O,disabled:ge,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:ge?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>j(!1),disabled:ge,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(jr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:cp.map(fe=>i.jsxs("div",{onClick:()=>we(fe.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${oe===fe.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${oe===fe.id?"text-emerald-400":"text-gray-300"}`,children:fe.name}),oe===fe.id&&i.jsx(ha,{className:"w-4 h-4 text-emerald-500"})]},fe.id))})]}),i.jsx("textarea",{value:de,onChange:fe=>ce(fe.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{de.trim()&&j(!0)},disabled:!de.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]})]})]})]})},$D=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=rr(),[l,c]=V.useState(!1),d=()=>{c(!0),setTimeout(()=>c(!1),3e3)},f=()=>{s?t("QUIZZES"):d()},g=()=>{s?t("LESSONS"):d()},x=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(Tf,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:f,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(ts,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(qu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(ns,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Bo,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(Wn,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(bp,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},up=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),dp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),KD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),il=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],QD=({onNavigate:r})=>{const[e,t]=V.useState(0),[s,l]=V.useState(!0);V.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%il.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(up,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(KD,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(dp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(wl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(vp,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(yp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(up,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(dp,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(vp,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(yp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(up,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(dp,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(od,{className:"w-6 h-6"}),"  ",i.jsx(Ef,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("div",{className:"block md:hidden space-y-4",children:[f(il[e]),f(il[(e+1)%il.length])]}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%il.length;return i.jsx("div",{children:f(il[x])},il[x].id)})})]})]})]})})},E2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(vl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(ha,{className:"w-3 h-3"})]},v)})})]})},XD=({isOpen:r,onClose:e})=>{const[t,s]=V.useState("ROLE_SELECTION"),[l,c]=V.useState(!1),[d,f]=V.useState(null),[g,x]=V.useState(null),{setTeacherSession:v}=rr(),[w,N]=V.useState(""),[R,M]=V.useState(""),[W,B]=V.useState(""),[de,ce]=V.useState(""),[oe,we]=V.useState(""),[ge,G]=V.useState(""),[S,j]=V.useState(""),[A,O]=V.useState(""),[D,z]=V.useState(""),[I,he]=V.useState("male"),[fe,F]=V.useState(""),[le,Y]=V.useState("");if(!r)return null;const re=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),M(""),B(""),ce(""),we(""),G(""),j(""),O(""),z(""),he("male"),Y(""),F(""),c(!1)},Ee=()=>{re(),e()},C=pt=>{pt.preventDefault(),f(null),c(!0),setTimeout(()=>{w==="2001"?(v(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>Ee(),1500)):w==="2003"?(v(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>Ee(),1500)):(f("   "),c(!1))},800)},U=async pt=>{pt.preventDefault(),f(null),c(!0);try{await yC(Bu,R.trim(),W),x("   !"),setTimeout(()=>{Ee(),window.location.reload()},1500)}catch(Rt){console.error(Rt),f("      "),c(!1)}},P=async pt=>{pt.preventDefault(),f(null),c(!0);try{const lt=(await xC(Bu,A.trim(),D)).user,_n="",ws=S==="university"&&fe?fe:"";await Ty(Fn(Ue,"users",lt.uid),{firstName:de,lastName:oe,age:ge,grade:S,gender:I,school:ws,avatar:_n,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{Ee(),window.location.reload()},1500)}catch(Rt){console.error(Rt),Rt.code==="auth/email-already-in-use"?f("   "):Rt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},ee=async pt=>{pt.preventDefault(),f(null),c(!0);try{await pC(Bu,le.trim()),x("   !")}catch(Rt){console.error(Rt),Rt.code==="auth/user-not-found"?f("    "):Rt.code==="auth/invalid-email"?f("    "):Rt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},be=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Re=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(Wn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(qg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(fa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(qg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),ze=()=>i.jsxs("form",{onSubmit:C,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(li,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:w,onChange:pt=>N(pt.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),it=()=>i.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:R,onChange:pt=>M(pt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:W,onChange:pt=>B(pt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(li,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),ke=()=>{const pt=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(lt=>({label:` ${lt}`,value:lt.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Rt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:P,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:de,onChange:lt=>ce(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:oe,onChange:lt=>we(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:ge,onChange:lt=>G(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(E2,{options:Rt,value:I,onChange:lt=>he(lt),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(E2,{options:pt,value:S,onChange:lt=>j(lt),placeholder:"  / "})]}),S==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:fe,onChange:lt=>F(lt.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:lt=>O(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:D,onChange:lt=>z(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Et=()=>i.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:le,onChange:pt=>Y(pt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(Ef,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Ee}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),i.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:i.jsx(vt,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),i.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:be()}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),i.jsx("button",{onClick:Ee,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(ms,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(qg,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(ha,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(Tf,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):Ee()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Re(),t==="TEACHER_LOGIN"&&ze(),t==="STUDENT_LOGIN"&&it(),t==="STUDENT_SIGNUP"&&ke(),t==="FORGOT_PASSWORD"&&Et(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(Tf,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},YD=()=>{const{user:r}=rr(),[e,t]=V.useState(!1),[s,l]=V.useState(null),[c,d]=V.useState("MCQ"),[f,g]=V.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[x,v]=V.useState([]),[w,N]=V.useState(null),[R,M]=V.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[W,B]=V.useState(""),[de,ce]=V.useState(!1),[oe,we]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(""),A=(P,ee)=>{M(be=>({...be,[P]:ee}))},O=(P,ee)=>{const be=[...R.options];be[P]=ee,M(Re=>({...Re,options:be}))},D=()=>{if(!R.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&R.options.some(be=>!be.trim())){alert("   ");return}if(c==="READING"&&!R.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!W.trim()){alert("    ");return}let P=[];if(c==="TF")P=["",""];else if(c==="REORDER"){if(P=W.split(" ").filter(be=>be.trim().length>0),P.length<2){alert("       ");return}}else P=R.options;const ee={id:w||Date.now(),question:R.question,options:P,correctAnswer:R.correctAnswer,explanation:R.explanation||"",type:c};c==="READING"&&(ee.passageContent=R.passageContent,ee.generalInstruction=R.generalInstruction,ee.passageFontSize=R.passageFontSize),w?(v(x.map(be=>be.id===w?ee:be)),N(null)):v([...x,ee]),z()},z=()=>{M({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),B(""),N(null),d("MCQ")},I=P=>{const ee=x.find(be=>be.id===P);ee&&(N(P),d(ee.type||"MCQ"),ee.type==="REORDER"?(B(ee.options.join(" ")),M({question:ee.question,options:["","","",""],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"})):(M({question:ee.question,options:ee.type==="TF"?["","","",""]:ee.options.length>=4?ee.options:[...ee.options,...Array(4-ee.options.length).fill("")],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"}),B("")),window.scrollTo({top:0,behavior:"smooth"}))},he=()=>{z()},fe=P=>{window.confirm("      ")&&(v(x.filter(ee=>ee.id!==P)),w===P&&z())},F=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const P={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null};if(s){const ee=Fn(Ue,"quizzes",s);await Lm(ee,{...P,updatedAt:xs()}),alert("    !")}else await tr(gt(Ue,"quizzes"),{...P,createdAt:xs()}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),z()}catch(P){console.error("Error saving quiz:",P),alert("   ")}finally{t(!1)}},le=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),z())},Y=async()=>{G(!0);try{const P=Pn(gt(Ue,"quizzes"),jd("createdAt","desc")),ee=await ss(P);we(ee.docs.map(be=>({id:be.id,...be.data()})))}catch(P){console.error(P)}G(!1)},re=()=>{Y(),ce(!0)},Ee=P=>{x.length>0&&!window.confirm("         .")||(l(P.id||null),g({title:P.title,subject:P.subject,grade:P.grade,category:P.category||"Language",description:P.description||"",duration:P.duration?P.duration.toString():"30",questionDuration:P.questionDuration?P.questionDuration.toString():""}),v(P.questions),ce(!1),z(),window.scrollTo({top:0,behavior:"smooth"}))},C=oe.filter(P=>(P.title?P.title.toLowerCase().includes(S.toLowerCase()):!1)||(P.grade?P.grade.includes(S):!1)),U=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(fw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:re,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(pp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(ts,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:le,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(ms,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:P=>g({...f,title:P.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(ox,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:P=>g({...f,subject:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(fa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:P=>g({...f,grade:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(P=>i.jsxs("option",{value:P.toString(),children:[" ",P]},P))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(vl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx(z2,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:P=>g({...f,category:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(vl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(ix,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:P=>g({...f,duration:P.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(vA,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:P=>g({...f,questionDuration:P.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:P=>g({...f,description:P.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(hw,{className:"w-5 h-5 text-blue-400"})}),w?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(ns,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(V2,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(yA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:R.generalInstruction,onChange:P=>A("generalInstruction",P.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:R.passageContent,onChange:P=>A("passageContent",P.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(jA,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:U.map(P=>i.jsx("button",{onClick:()=>A("passageFontSize",P.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${R.passageFontSize===P.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(oa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:R.question,onChange:P=>A("question",P.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.options.map((P,ee)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${R.correctAnswer===ee?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${R.correctAnswer===ee?"text-blue-400":"text-gray-400"}`,children:[" ",ee+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",ee),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${R.correctAnswer===ee?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:R.correctAnswer===ee?" ":" "})]}),i.jsx("input",{type:"text",value:P,onChange:be=>O(ee,be.target.value),placeholder:`  ${ee+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${ee===R.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},ee))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:W,onChange:P=>B(P.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),W&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:W.split(" ").filter(P=>P.trim()).map((P,ee)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:P},ee))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${R.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[R.correctAnswer===0&&i.jsx(wn,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${R.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[R.correctAnswer===1&&i.jsx(wn,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:R.explanation,onChange:P=>A("explanation",P.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),i.jsxs("div",{className:"flex gap-3",children:[w&&i.jsxs("button",{onClick:he,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(P2,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:D,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${w?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:w?i.jsxs(i.Fragment,{children:[i.jsx(gi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(hw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(gi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:F,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):s?i.jsx(om,{className:"w-5 h-5"}):i.jsx(wn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(fw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((P,ee)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${w===P.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:ee+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:P.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:P.type==="REORDER"?"":P.options.length===2?"/":P.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>I(P.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(_p,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>fe(P.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]}),P.explanation&&i.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",P.explanation]})]},P.id))})]})]})})]})}),de&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(pp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ms,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(Us,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:S,onChange:P=>j(P.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:ge?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):C.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(P=>i.jsxs("div",{onClick:()=>Ee(P),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:P.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:P.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:P.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(oa,{className:"w-3 h-3"}),P.questions.length," "]})]},P.id))})})]})})]})},hp=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:lx},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ts},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:Us},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:od},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:um},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:lc}],JD=[{id:"first_step",title:" ",desc:"   ",icon:lx,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:wl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:ts,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:um,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:Mo,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:Us,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:ux,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:L2,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:eA,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:lc,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],WD=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],fp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],T2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(vl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(ha,{className:"w-3 h-3"})]},v)})})]})},ZD=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=rr(),[s,l]=V.useState(!1),[c,d]=V.useState(null),[f,g]=V.useState(!1),[x,v]=V.useState(!1),[w,N]=V.useState(null),[R,M]=V.useState((e==null?void 0:e.avatar)||""),[W,B]=V.useState((e==null?void 0:e.profileBackground)||fp[0].url),[de,ce]=V.useState([]),[oe,we]=V.useState(!0),[ge,G]=V.useState(0),[S,j]=V.useState(1),[A,O]=V.useState(hp[0]),[D,z]=V.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,he]=V.useState([]),[fe,F]=V.useState(""),[le,Y]=V.useState(!1),[re,Ee]=V.useState("50"),[C,U]=V.useState(null),[P,ee]=V.useState(!1),[be,Re]=V.useState(""),[ze,it]=V.useState(!1),[ke,Et]=V.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});V.useEffect(()=>{e&&(Et(ie=>({...ie,firstName:e.firstName||ie.firstName,lastName:e.lastName||ie.lastName,gender:e.gender||ie.gender,grade:e.grade||ie.grade,school:e.school||ie.school})),e.avatar&&M(e.avatar),e.profileBackground&&B(e.profileBackground))},[e]),V.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){we(!1),Y(!0);try{const Xe=Pn(gt(Ue,"users"),Cn("role","==","student")),Ye=(await ss(Xe)).docs.map(qt=>({id:qt.id,...qt.data()}));he(Ye)}catch(Xe){console.error("Error fetching students:",Xe)}finally{Y(!1)}return}try{const Xe=Pn(gt(Ue,"quiz_results"),Cn("userId","==",e.uid)),Be=await ss(Xe),Ye=[];let qt=0,nt=!1,Lr=0;Be.forEach(ue=>{const _e=ue.data();Ye.push({id:ue.id,...ue.data()});let Ie=10+_e.percentage*2;_e.passed&&(Ie+=50),_e.percentage===100&&(Ie+=100,nt=!0,Lr++),qt+=Math.round(Ie)}),Ye.sort((ue,_e)=>{var Pe,Je;const Ie=((Pe=ue.createdAt)==null?void 0:Pe.seconds)||0,ye=((Je=_e.createdAt)==null?void 0:Je.seconds)||0;return Ie-ye}),ce(Ye);let Ln=qt;try{const ue=Fn(Ue,"users",e.uid),_e=await cS(ue);_e.exists()&&_e.data().totalXP!==void 0?Ln=_e.data().totalXP:e.totalXP!==void 0&&(Ln=e.totalXP)}catch{e.totalXP!==void 0&&(Ln=e.totalXP)}G(Ln);const lr=Math.floor(Ln/500)+1;j(lr);const Hn=[...hp].reverse().find(ue=>lr>=ue.minLevel)||hp[0];O(Hn),z({quizzesCompleted:Ye.length,hasPerfectScore:nt,level:lr,totalXP:Ln,perfectScoresCount:Lr})}catch(Xe){console.error(Xe)}finally{we(!1)}}})()},[e]);const pt=async ie=>{ie.preventDefault(),l(!0),d(null);try{let Xe={...ke};ke.grade==="university"&&ke.universityName&&(Xe.school=ke.universityName),delete Xe.universityName,await t(Xe),d("   !"),setTimeout(()=>d(null),3e3)}catch(Xe){console.error(Xe),alert("   ")}finally{l(!1)}},Rt=async()=>{l(!0);try{await t({avatar:R}),g(!1)}catch(ie){console.error(ie)}finally{l(!1)}},lt=async()=>{l(!0);try{await t({profileBackground:W}),v(!1)}catch(ie){console.error(ie)}finally{l(!1)}},_n=async(ie,Xe)=>{if(!ie)return;const Be=parseInt(re);if(isNaN(Be)||Be<=0){alert("    ");return}if(window.confirm(`     ${Be} XP  ${Xe}`)){l(!0),U(null);try{const Ye=Fn(Ue,"users",ie);await Lm(Ye,{totalXP:sx(Be)}),he(qt=>qt.map(nt=>nt.id===ie?{...nt,totalXP:(nt.totalXP||0)+Be}:nt)),U(`  ${Be} XP  ${Xe} !`),setTimeout(()=>U(null),3e3)}catch(Ye){console.error(Ye),alert("    ")}finally{l(!1)}}},ws=async()=>{if(!be.trim()){alert("   ");return}it(!0);try{await tr(gt(Ue,"announcements"),{title:be,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:xs()}),await tr(gt(Ue,"notifications"),{recipientId:"all",title:"  ",message:be,type:"info",createdAt:xs(),read:!1}),alert("   "),Re(""),ee(!1)}catch(ie){console.error(ie),alert("   ")}finally{it(!1)}},_s=I.filter(ie=>{const Xe=(ie.displayName||"").toLowerCase(),Be=(ie.email||"").toLowerCase(),Ye=fe.toLowerCase();return Xe.includes(Ye)||Be.includes(Ye)}),ar=ie=>ie?ie.startsWith("http")?{backgroundImage:`url(${ie})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${fp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Vr=ie=>!ie||ie.startsWith("http")?"bg-no-repeat bg-center":ie,Ot=ie=>ie<=3?"border-gray-800":ie<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":ie<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":ie<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":ie<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":ie<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":ie<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":ie<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":ie<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":ie<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",Mt=ie=>ie<=3?"text-gray-400":ie<=6?"text-emerald-400 font-bold":ie<=9?"text-blue-400 font-bold":ie<=12?"text-cyan-400 font-black":ie<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":ie<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":ie<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",gn=de.slice(-10).map(ie=>ie.percentage),_a=gn.length>0?Math.max(...gn):0,Na=gn.length>0?Math.min(...gn):0,Vt=gn.length>0?Math.round(gn.reduce((ie,Xe)=>ie+Xe,0)/gn.length):0,Ns=de.length,ir=(S-1)*500,Pr=Math.min(100,Math.max(0,(ge-ir)/500*100)),Nn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Ea=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ie=>({label:` ${ie}`,value:ie.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Ta=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Wn,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(wn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(jr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(fa,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(c5,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(Hu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(O2,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Gu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>ee(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(mw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(lm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(ca,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(Mo,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),C&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(wn,{className:"w-4 h-4"})," ",C]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Us,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:fe,onChange:ie=>F(ie.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:le?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-500"})}):fe===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):_s.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):_s.map(ie=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ie.avatar?i.jsx("img",{src:ie.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Wn,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:ie.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(Sf,{className:"w-3 h-3"})," ",ie.totalXP||0]}),i.jsxs("span",{children:[" ",ie.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:re,onChange:Xe=>Ee(Xe.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>_n(ie.id,ie.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(ca,{className:"w-4 h-4"})})]})]},ie.id))})]})]}),P&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(mw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(ms,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:be,onChange:ie=>Re(ie.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:ws,disabled:ze,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[ze?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Wn,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ms,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:WD.map((ie,Xe)=>{const Be=S<ie.minLevel;return i.jsxs("button",{onClick:()=>!Be&&M(ie.url),disabled:Be,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${R===ie.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Be?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:ie.url,alt:`Avatar ${Xe}`,className:"w-full h-full object-cover"}),Be&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(li,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ie.minLevel]})]}),!Be&&R===ie.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(wn,{className:"w-3 h-3"})})]},Xe)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:Rt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(gw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ms,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:fp.map((ie,Xe)=>{const Be=S<ie.minLevel,Ye=W===ie.url;return i.jsxs("button",{onClick:()=>!Be&&B(ie.url),disabled:Be,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Ye?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Be?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ie.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Be?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(li,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ie.minLevel]})]}):Ye&&i.jsx(wn,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ie.name})})]},Xe)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:lt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Vr(e==null?void 0:e.profileBackground)}`,style:ar(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(gw,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Ot(S)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Wn,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx($5,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${Mt(S)}`,children:[i.jsx(Mo,{className:"w-3 h-3"}),"  ",S]})]})]}),i.jsxs("form",{onSubmit:pt,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Wn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.firstName,onChange:ie=>Et({...ke,firstName:ie.target.value}),className:Nn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.lastName,onChange:ie=>Et({...ke,lastName:ie.target.value}),className:Nn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(T2,{options:Ta,value:ke.gender,onChange:ie=>!(e!=null&&e.genderChanged)&&Et({...ke,gender:ie}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(li,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.phone,onChange:ie=>Et({...ke,phone:ie.target.value}),className:Nn})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:ke.address,onChange:ie=>Et({...ke,address:ie.target.value}),className:Nn})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(fa,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:ke.school,onChange:ie=>Et({...ke,school:ie.target.value}),className:Nn})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(T2,{options:Ea,value:ke.grade,onChange:ie=>Et({...ke,grade:ie}),placeholder:" "})]}),ke.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:ke.universityName||ke.school,onChange:ie=>Et({...ke,universityName:ie.target.value}),placeholder:"   ...",className:`${Nn} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(wn,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-8 h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",S]}),i.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[i.jsx(Sf,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",ge,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-8",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",S+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Pr}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(lc,{className:"w-4 h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(wp,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:JD.map((ie,Xe)=>{const Be=ie.condition(D);return i.jsxs("button",{onClick:()=>N({badge:ie,isUnlocked:Be}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Be?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Be?ie.bg:"bg-gray-700"}`,children:i.jsx(ie.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Be?ie.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:ie.title}),!Be&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(li,{className:"w-2.5 h-2.5 text-gray-500"})})]},Xe)})}),w&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>N(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${w.isUnlocked?w.badge.bg:"bg-gray-700"}`,children:i.jsx(w.badge.icon,{className:`w-6 h-6 ${w.isUnlocked?w.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:w.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${w.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:w.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:w.badge.desc})]}),!w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(li,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(wn,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(NA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),oe?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(vt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Vt>=90?"text-emerald-400":"text-blue-400"}`,children:[Vt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(Mo,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[_a,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(D2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[Na,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(l5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:Ns})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(X5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Vt,"%"]})]})]})]})]})]})]})]})]})},eO=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],mp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(vl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(ha,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},tO=({onBack:r})=>{const{user:e}=rr(),[t,s]=V.useState("SELECTION"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState("All"),[v,w]=V.useState([]),[N,R]=V.useState(!1),[M,W]=V.useState(null),[B,de]=V.useState(0),[ce,oe]=V.useState({}),[we,ge]=V.useState(1800),[G,S]=V.useState(null),[j,A]=V.useState(!1),[O,D]=V.useState(0),[z,I]=V.useState({}),[he,fe]=V.useState(!1),[F,le]=V.useState(null),[Y,re]=V.useState(!1),[Ee,C]=V.useState(!1),[U,P]=V.useState(!1),[ee,be]=V.useState(0),[Re,ze]=V.useState(!1),[it,ke]=V.useState(null),[Et,pt]=V.useState(0),[Rt,lt]=V.useState(""),[_n,ws]=V.useState(!1),[_s,ar]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]),V.useEffect(()=>{d?Vr():w([])},[d]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&we>0&&(ue=setInterval(()=>{ge(_e=>_e<=1?(ir(),0):_e-1)},1e3)),()=>clearInterval(ue)},[t,we]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&(M!=null&&M.questionDuration)&&G!==null&&(G>0?ue=setInterval(()=>{S(_e=>_e!==null&&_e>0?_e-1:0)},1e3):G===0&&Ns()),()=>clearInterval(ue)},[t,M,G]),V.useEffect(()=>{M!=null&&M.questionDuration?S(M.questionDuration):S(null)},[B,M]),V.useEffect(()=>{if(t!=="ACTIVE")return;const ue=()=>{be(Pe=>{const Je=Pe+1;return Je===1?C(!0):Je>=2&&(C(!1),P(!0)),Je})},_e=()=>{document.hidden&&ue()},Ie=Pe=>{(Pe.key==="PrintScreen"||Pe.ctrlKey&&Pe.key==="p"||Pe.metaKey&&Pe.shiftKey)&&(Pe.preventDefault(),ue())},ye=Pe=>Pe.preventDefault();return document.addEventListener("visibilitychange",_e),document.addEventListener("keydown",Ie),document.addEventListener("contextmenu",ye),document.addEventListener("copy",ye),document.addEventListener("paste",ye),document.addEventListener("cut",ye),document.addEventListener("selectstart",ye),()=>{document.removeEventListener("visibilitychange",_e),document.removeEventListener("keydown",Ie),document.removeEventListener("contextmenu",ye),document.removeEventListener("copy",ye),document.removeEventListener("paste",ye),document.removeEventListener("cut",ye),document.removeEventListener("selectstart",ye)}},[t]);const Vr=async()=>{R(!0);try{const ue=Pn(gt(Ue,"quizzes"),Cn("grade","==",d));let _e;try{_e=await c8(ue),_e.empty&&(_e=await u8(ue))}catch{_e=await ss(ue)}const Ie=[];_e.forEach(ye=>{Ie.push({id:ye.id,...ye.data()})}),w(Ie)}catch(ue){console.error("Error fetching quizzes:",ue)}finally{R(!1)}},Ot=Array.from(new Set(v.map(ue=>ue.subject))),Mt=v.filter(ue=>{const _e=l?ue.subject===l:!0,Ie=g&&g!=="All"?ue.category===g:!0;return _e&&Ie}),gn=ue=>{le(ue),fe(!0)},_a=ue=>{if(!ue.questions||ue.questions.length===0){alert("      ");return}const Ie=[...ue.questions].sort(()=>Math.random()-.5).map(mt=>{if(mt.type==="MCQ"||mt.type==="TF"){const ut=mt.options.map((pn,Di)=>({opt:pn,originalIndex:Di}));ut.sort(()=>Math.random()-.5);const rt=ut.map(pn=>pn.opt),Ft=ut.findIndex(pn=>pn.originalIndex===mt.correctAnswer);return{...mt,options:rt,correctAnswer:Ft}}return mt}),ye={...ue,questions:Ie},Pe={};Ie.forEach((mt,ut)=>{if(mt.type==="REORDER"){const rt=mt.options.map((Ft,pn)=>pn);for(let Ft=rt.length-1;Ft>0;Ft--){const pn=Math.floor(Math.random()*(Ft+1));[rt[Ft],rt[pn]]=[rt[pn],rt[Ft]]}Pe[ut]=rt}}),I(Pe),W(ye),de(0),oe({});const Je=ue.duration?ue.duration*60:1800;ge(Je),D(0),be(0),P(!1),pt(0),lt(""),ar(!1),fe(!1),le(null),s("ACTIVE")},Na=()=>{F&&_a(F)},Vt=ue=>{oe(_e=>({..._e,[B]:ue}))},Ns=()=>{M&&(S(null),B<M.questions.length-1?de(ue=>ue+1):ir())},ir=async()=>{if(!M||!e){s("RESULT");return}A(!0);const ue=Ea(),_e=Math.round(ue/M.questions.length*100);let Ie=0;try{const ye=Pn(gt(Ue,"quiz_results"),Cn("userId","==",e.uid),Cn("quizId","==",M.id));(await ss(ye)).empty?Ie=ue*30:Ie=ue*5}catch(ye){console.error("Error checking previous attempts:",ye),Ie=ue*1}D(Ie);try{await tr(gt(Ue,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:M.id||"unknown",quizTitle:M.title,subject:M.subject,score:ue,totalQuestions:M.questions.length,percentage:_e,passed:_e>=50,earnedXP:Ie,createdAt:xs()});const ye=Fn(Ue,"users",e.uid);await Ty(ye,{totalXP:sx(Ie),quizzesCompleted:sx(1),lastQuizDate:xs(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(ye){console.error("Error saving quiz result:",ye)}finally{A(!1),s("RESULT")}},Pr=async()=>{if(Et!==0&&!(!M||!e)){ws(!0);try{await tr(gt(Ue,"reviews"),{type:"quiz",targetId:M.id,targetTitle:M.title,teacherId:M.createdBy||"teacher",teacherName:M.teacherName||"",rating:Et,comment:Rt,studentId:e.uid,studentName:e.displayName,createdAt:xs()}),ar(!0)}catch(ue){console.error("Error saving review:",ue),alert("    ")}finally{ws(!1)}}},Nn=ue=>{const _e=Math.floor(ue/60),Ie=ue%60;return`${_e}:${Ie<10?"0":""}${Ie}`},Ea=()=>{if(!M)return 0;let ue=0;return M.questions.forEach((_e,Ie)=>{if(_e.type==="REORDER"){const ye=ce[Ie];if(ye&&ye.length===_e.options.length){let Pe=!0;for(let Je=0;Je<_e.options.length;Je++)if(ye[Je]!==Je){Pe=!1;break}Pe&&ue++}}else ce[Ie]===_e.correctAnswer&&ue++}),ue},Ta=()=>{re(!0)},ie=()=>{re(!1),s("SELECTION")},Xe=()=>{P(!1),s("SELECTION")},Be=ue=>{ke(ue),ze(!0)},Ye=()=>{if(ze(!1),it==="REVIEW")s("REVIEW");else if(it==="RETAKE"){const ue=v.find(_e=>_e.id===(M==null?void 0:M.id));ue?_a(ue):s("SELECTION")}else it==="LIST"?s("SELECTION"):it==="HOME"&&r();ke(null)},qt=(ue,_e)=>{const Ie=ce[B]||[];Vt(_e?[...Ie,ue]:Ie.filter(ye=>ye!==ue))},nt=({title:ue,message:_e,onConfirm:Ie,onCancel:ye,icon:Pe=oa,confirmText:Je="",cancelText:mt="",confirmColor:ut="emerald",isStatic:rt=!1})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:mt?ye:void 0}),i.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-white/10 shadow-2xl shadow-black/50 ${rt?"":"animate-fade-in-up"}`,children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ut==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Pe,{className:`w-10 h-10 ${ut==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:ue}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:_e}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:Ie,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all shadow-lg ${ut==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"} ${rt?"":"transform hover:scale-105 active:scale-95"} ${mt?"":"max-w-[200px]"}`,children:Je}),mt&&i.jsx("button",{onClick:ye,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:mt})]})]})]}),Lr=()=>{const ue=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ye=>({label:` ${ye}`,value:ye.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],_e=[{label:"  ",value:""},...Ot.map(ye=>({label:String(ye),value:String(ye)}))],Ie=eO.map(ye=>({label:ye.label,value:ye.id}));return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(fa,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(mp,{options:ue,value:d,onChange:ye=>{f(ye),c(""),x("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ts,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(mp,{options:_e,value:l,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(z2,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(mp,{options:Ie,value:g,onChange:x,placeholder:"  "})]})}),d&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(j5,{className:"w-5 h-5"})," "]}),N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Us,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Mt.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Us,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Mt.map(ye=>i.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ye.subject}),ye.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ye.category==="General"?"General Quiz":ye.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[ye.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ye.duration?`${ye.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ye.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(cx,{className:"w-3 h-3"}),i.jsx("span",{children:ye.grade==="English Major - QOU"?"  ":` ${ye.grade}`})]}),i.jsxs("button",{onClick:()=>gn(ye),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",i.jsx(Ef,{className:"w-4 h-4"})]})]},ye.id))})]}),he&&i.jsx(nt,{title:"  ",message:`   ${F==null?void 0:F.title} `,onConfirm:Na,onCancel:()=>fe(!1),confirmText:" ",cancelText:"",icon:oa})]})},Ln=()=>{if(!M||!M.questions||!M.questions[B])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const ue=M.questions[B],_e=ue.type==="REORDER";let Ie=!1;if(_e){const rt=ce[B];Ie=rt!==void 0&&rt.length===ue.options.length}else Ie=ce[B]!==void 0;const ye=B===M.questions.length-1,Pe=M.subject.toLowerCase().includes("english")||M.subject.includes("")||M.subject.includes(""),Je=Pe?"ltr":"rtl",mt=Pe?"text-left":"text-right",ut={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[ue.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:rt=>rt.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),U&&i.jsx(nt,{title:"   ",message:"      .   .",onConfirm:Xe,cancelText:null,confirmText:"",icon:lA,confirmColor:"red",isStatic:!0}),Ee&&!U&&i.jsx(nt,{title:" !",message:"     .   .",onConfirm:()=>C(!1),cancelText:null,confirmText:"",icon:dx,confirmColor:"red",isStatic:!0}),Y&&i.jsx(nt,{title:" ",message:"       .",onConfirm:ie,onCancel:()=>re(!1),confirmText:" ",cancelText:"",icon:Af,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:Ta,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(Af,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${we<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(ix,{className:"w-4 h-4"}),Nn(we)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[B+1," / ",M.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(B+1)/M.questions.length*100}%`}})})]}),G!==null&&M.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${G<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${G/M.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",G," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Je,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:M.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:_e?i.jsx(V2,{className:"w-4 h-4 text-emerald-500"}):i.jsx(li,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[ue.passageContent&&i.jsxs("div",{className:"mb-8",children:[ue.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${mt}`,children:ue.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${mt}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ut}`,children:ue.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${mt}`,children:ue.question}),_e?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(ce[B]||[]).map((rt,Ft)=>i.jsx("button",{onClick:()=>qt(rt,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:ue.options[rt]},`ans-${Ft}`)),(!ce[B]||ce[B].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(z[B]||[]).filter(rt=>!(ce[B]||[]).includes(rt)).map((rt,Ft)=>i.jsx("button",{onClick:()=>qt(rt,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:ue.options[rt]},`bank-${Ft}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>Vt([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(P2,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:ue.options.map((rt,Ft)=>i.jsxs("button",{onClick:()=>Vt(Ft),className:`w-full ${mt} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${ce[B]===Ft?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${ce[B]===Ft?"text-emerald-300":"text-gray-300"}`,children:rt}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${ce[B]===Ft?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:ce[B]===Ft&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Ft))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:Ns,disabled:!Ie||j,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Ie||j?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:j?i.jsxs(i.Fragment,{children:["  ",i.jsx(vt,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[ye?" ":" ",Je==="rtl"?i.jsx(Ef,{className:"w-5 h-5"}):i.jsx(Ut,{className:"w-5 h-5"})]})})})]})]})},lr=()=>{if(!M)return null;const ue=Ea(),_e=M.questions.length,Ie=Math.round(ue/_e*100);let ye="text-red-500",Pe=J4,Je=" ";Ie>=90?(ye="text-emerald-500",Pe=lc,Je="!"):Ie>=75?(ye="text-blue-500",Pe=od,Je="!"):Ie>=50&&(ye="text-yellow-500",Pe=ha,Je=" ");const mt=Pe;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-5 relative overflow-hidden text-center",children:[i.jsxs("div",{className:"flex flex-col items-center mb-4",children:[i.jsx(mt,{className:`w-14 h-14 ${ye} mb-2 drop-shadow-md`}),i.jsx("h2",{className:"text-xl font-black text-white mb-1",children:Je}),i.jsx("p",{className:"text-gray-400 font-medium text-xs mb-2",children:M.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-2 py-0.5 rounded-full border border-gray-700",children:[i.jsx(Sf,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",O," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 text-center mb-5 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:" "}),i.jsxs("span",{className:`text-5xl font-black ${ye}`,children:[Ie,"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>Be("REVIEW"),className:"w-full py-3 bg-white text-gray-900 font-black text-sm rounded-xl hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-md",children:[i.jsx(xp,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>Be("HOME"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(jf,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>Be("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(om,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:_s?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(ha,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(lm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ut=>i.jsx("button",{onClick:()=>pt(ut),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Et===ut?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ut},ut))}),i.jsx("textarea",{value:Rt,onChange:ut=>lt(ut.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Pr,disabled:_n||Et===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Et===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[_n?i.jsx(vt,{className:"w-3 h-3 animate-spin"}):i.jsx(ca,{className:"w-3 h-3"}),""]})]})})]})},Hn=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(xp,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(Ut,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:M==null?void 0:M.questions.map((ue,_e)=>{const Ie=ue.type==="REORDER";let ye=!1,Pe=null;if(Ie){const Je=ce[_e];Je?(Pe=Je.map(mt=>ue.options[mt]).join(" "),ye=Je.length===ue.options.length&&Je.every((mt,ut)=>mt===ut)):(Pe="  ",ye=!1)}else{const Je=ce[_e];ye=Je===ue.correctAnswer,Pe=Je!==void 0?ue.options[Je]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ye?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ye?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:_e+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:ue.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ye?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Pe})]}),!ye&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:Ie?ue.options.join(" "):ue.options[ue.correctAnswer]})]}),ue.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(oa,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:ue.explanation})]})]},ue.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),Lr()]}),t==="ACTIVE"&&Ln(),t==="RESULT"&&lr(),t==="REVIEW"&&Hn(),Re&&i.jsx(nt,{title:"  ",message:it==="REVIEW"?"   ":it==="RETAKE"?"     ":it==="LIST"?"    ":"    ",onConfirm:Ye,onCancel:()=>ze(!1),confirmText:"",cancelText:"",icon:F5})]})},nO=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),sO=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),rO=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(M4,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(vp,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(wl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(od,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(yp,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(nO,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(sO,{className:"w-5 h-5"})})]})})]},s))})]})]})},aO=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(xp,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(ux,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:L2,title:" ",desc:"       ."},{icon:x5,title:" ",desc:"           ."},{icon:D2,title:" ",desc:"         ."},{icon:cm,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),S2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(vl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(ha,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},iO=({onBack:r})=>{const[e,t]=V.useState(""),[s,l]=V.useState(""),[c,d]=V.useState("SELECTION"),[f,g]=V.useState(["handouts"]),[x,v]=V.useState([]),[w,N]=V.useState(!1);V.useEffect(()=>{c==="CONTENT"&&s&&e&&R()},[c,s,e]);const R=async()=>{N(!0);try{const ge=Pn(gt(Ue,"study_materials"),Cn("grade","==",s),Cn("subject","==",e)),G=await ss(ge),S=[];G.forEach(j=>{S.push({id:j.id,...j.data()})}),S.sort((j,A)=>{var z,I;const O=((z=j.createdAt)==null?void 0:z.seconds)||0;return(((I=A.createdAt)==null?void 0:I.seconds)||0)-O}),v(S)}catch(ge){console.error("Error fetching materials:",ge)}finally{N(!1)}},M=()=>{e&&s&&d("CONTENT")},W=ge=>{g(G=>G.includes(ge)?G.filter(S=>S!==ge):[...G,ge])},B=()=>{const ge=x.filter(j=>j.category==="handouts"),G=x.filter(j=>j.category==="worksheets"),S=x.filter(j=>j.category==="exams");return[{id:"handouts",title:" ",files:ge},{id:"worksheets",title:" ",files:G},{id:"exams",title:" ",files:S}]},de=ge=>ge?(ge.toDate?ge.toDate():new Date(ge.seconds*1e3)).toLocaleDateString("ar-EG"):"",ce=B(),oe=()=>{const ge=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(S=>({label:` ${S}`,value:S.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],G=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(Do,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(ts,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(S2,{options:G,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(fa,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(S2,{options:ge,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:M,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(Us,{className:"w-6 h-6"})," "]})]})})]})},we=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(ns,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(Ut,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(Do,{className:"w-3.5 h-3.5"}),ce.reduce((ge,G)=>ge+G.files.length,0)," "]})]}),w?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(vt,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:ce.map(ge=>{const G=f.includes(ge.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>W(ge.id),className:`w-full flex items-center justify-between p-5 transition-colors ${G?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${G?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(Do,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:ge.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[ge.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${G?"rotate-180":""}`,children:i.jsx(vl,{className:"w-5 h-5 text-gray-400"})})]}),G&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:ge.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Do,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:ge.files.map((S,j)=>i.jsxs("div",{onClick:()=>S.url&&window.open(S.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(ns,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:S.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:S.size}),i.jsx("span",{children:""}),i.jsx("span",{children:de(S.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(pp,{className:"w-5 h-5"})})]},j))})})]},ge.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(Tf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?oe():we()]})},lO=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),oO=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],cO=[{id:"inquiry",label:" ",icon:cx,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:oa,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:d5,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:Bo,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],uO=({onBack:r})=>{const[e,t]=V.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(Ut,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:oO.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(ca,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(ms,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),cO.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(lO,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},j2=[{minLevel:1,title:" ",icon:lx,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:ts,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:Us,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:od,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:um,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:lc,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],dO=({onLoginClick:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(null);V.useEffect(()=>{(async()=>{l(!0);const v="etqan_leaderboard_cache_v1",w=1440*60*1e3,N=localStorage.getItem(v),R=Date.now();let M=[],W=!1;if(N)try{const B=JSON.parse(N);R-B.timestamp<w&&(M=B.data,W=!0)}catch(B){console.error("Cache parse error",B)}if(W)t(M);else try{const B=Pn(gt(Ue,"users"),jd("totalXP","desc"),lS(10)),ce=(await ss(B)).docs.map(oe=>({...oe.data(),uid:oe.id}));t(ce),localStorage.setItem(v,JSON.stringify({timestamp:R,data:ce}))}catch(B){console.error("Error fetching leaderboard:",B)}l(!1)})()},[]);const f=x=>{switch(x){case 0:return i.jsx(lc,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return i.jsx(wp,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return i.jsx(wp,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return i.jsx(Mo,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const v=Math.floor((x||0)/500)+1;return[...j2].reverse().find(w=>v>=w.minLevel)||j2[0]};return i.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),i.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[i.jsx(Mo,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"   "})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-3xl",children:i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Sf,{className:"w-5 h-5 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[i.jsx(M2,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),i.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:i.jsx("p",{children:"      !"})}):i.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,v)=>i.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${v===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":v===1?"bg-gray-800/60 border-gray-600/50":v===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${v<3?"text-white":"text-gray-600"}`,children:v<3?f(v):v+1}),i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?i.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):i.jsx(Wn,{className:"w-full h-full p-2 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[i.jsx(fa,{className:"w-3 h-3"}),x.school||" "]})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[i.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),i.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),v===0&&i.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:i.jsxs("span",{className:"flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},v))})]})})})]}),c&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:i.jsx(ms,{className:"w-5 h-5"})}),i.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),i.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[i.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):i.jsx(Wn,{className:"w-full h-full p-6 text-gray-500"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[i.jsx(cx,{className:"w-3 h-3"}),c.school||" "]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[C2.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),i.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),i.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[i.jsx(J5,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),i.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),i.jsx("div",{className:"pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},hO=()=>{const[r,e]=V.useState({students:0,quizzes:0,files:0,explanations:0});V.useEffect(()=>{(async()=>{const l="etqan_impact_stats_v3",d=localStorage.getItem(l),f=Date.now();if(d)try{const{data:g,timestamp:x}=JSON.parse(d);if(f-x<144e5){e(g);return}}catch(g){console.error("Cache parsing error",g)}try{const g=await lf(Pn(gt(Ue,"users"),Cn("role","==","student"))),x=await lf(gt(Ue,"quizzes")),v=await lf(gt(Ue,"study_materials")),w=await lf(gt(Ue,"explanations")),N={students:g.data().count,quizzes:x.data().count,files:v.data().count,explanations:w.data().count};e(N),localStorage.setItem(l,JSON.stringify({data:N,timestamp:f}))}catch(g){console.error("Error fetching impact stats:",g)}})()},[]);const t=[{id:1,label:" ",value:`${r.students}`,icon:cm,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:2,label:" ",value:`${r.quizzes}`,icon:dw,color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20"},{id:3,label:" ",value:`${r.files}`,icon:ns,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:4,label:" ",value:`${r.explanations}`,icon:Gu,color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20"}];return i.jsxs("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:[i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[200px] bg-emerald-900/10 rounded-full blur-[100px] pointer-events-none"}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1 rounded-full bg-emerald-900/20 border border-emerald-500/20 text-emerald-400 text-xs font-bold mb-4",children:[i.jsx(dw,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),i.jsxs("h2",{className:"text-3xl font-black text-white",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:t.map(s=>i.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-md p-6 rounded-3xl border ${s.border} text-center group hover:-translate-y-1 transition-all duration-300 hover:bg-gray-800`,children:[i.jsx("div",{className:`w-12 h-12 mx-auto rounded-2xl flex items-center justify-center mb-4 ${s.bg} ${s.color} shadow-lg group-hover:scale-110 transition-transform`,children:i.jsx(s.icon,{className:"w-6 h-6"})}),i.jsx("div",{className:"text-2xl md:text-3xl font-black text-white mb-1",children:s.value}),i.jsx("div",{className:"text-gray-400 font-bold text-xs md:text-sm",children:s.label})]},s.id))})]})]})},fO=({onBack:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(""),[f,g]=V.useState(null),[x,v]=V.useState(!1);V.useEffect(()=>{w()},[]);const w=async()=>{l(!0);try{const G=Pn(gt(Ue,"quizzes"),jd("createdAt","desc")),j=(await ss(G)).docs.map(A=>({id:A.id,...A.data()}));t(j)}catch(G){console.error("Error fetching quizzes:",G)}finally{l(!1)}},N=G=>{g({category:"Language",...G})},R=async(G,S)=>{if(G.stopPropagation(),!S){alert(":   ");return}if(window.confirm("  "))try{await zm(Fn(Ue,"quizzes",S)),t(j=>j.filter(A=>A.id!==S))}catch(j){console.error("Error deleting quiz:",j),alert("   : "+j.message)}},M=(G,S)=>{f&&g({...f,[G]:S})},W=(G,S,j)=>{if(!f)return;const A=[...f.questions];A[G]={...A[G],[S]:j},g({...f,questions:A})},B=(G,S,j)=>{if(!f)return;const A=[...f.questions],O=[...A[G].options];O[S]=j,A[G]={...A[G],options:O},g({...f,questions:A})},de=G=>{if(f&&window.confirm("      ")){const S=f.questions.filter((j,A)=>A!==G);g({...f,questions:S})}},ce=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}v(!0);try{const G=Fn(Ue,"quizzes",f.id);await Lm(G,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions}),t(S=>S.map(j=>j.id===f.id?f:j)),g(null),alert("   ")}catch(G){console.error("Error updating quiz:",G),alert("   ")}finally{v(!1)}}},oe=e.filter(G=>(G.title?G.title.toLowerCase().includes(c.toLowerCase()):!1)||G.teacherName&&G.teacherName.toLowerCase().includes(c.toLowerCase())),we=G=>G?(G.toDate?G.toDate():new Date(G.seconds*1e3)).toLocaleDateString("ar-EG"):"",ge="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(Us,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:G=>d(G.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(vt,{className:"w-10 h-10 animate-spin text-blue-400"})}):oe.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Hu,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:oe.map(G=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:G.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(G),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(_p,{className:"w-4 h-4"})}),i.jsx("button",{onClick:S=>R(S,G.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:G.title}),G.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:G.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",G.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"}),we(G.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(Wn,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:G.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(oa,{className:"w-3 h-3"}),G.questions.length," "]})]})]},G.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(_p,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ms,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Hu,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:G=>M("title",G.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:G=>M("subject",G.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:G=>M("grade",G.target.value),className:ge,children:[5,6,7,8,9,10,11,12].map(G=>i.jsxs("option",{value:G,children:[" ",G]},G))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:G=>M("category",G.target.value),className:ge,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(oa,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((G,S)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>de(S),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(wi,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",S+1]}),i.jsx("input",{type:"text",dir:"ltr",value:G.question,onChange:j=>W(S,"question",j.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:G.options.map((j,A)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",A+1]}),i.jsxs("button",{onClick:()=>W(S,"correctAnswer",A),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${G.correctAnswer===A?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[G.correctAnswer===A?i.jsx(wn,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),G.correctAnswer===A?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:j,onChange:O=>B(S,A,O.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${G.correctAnswer===A?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},A))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:G.explanation||"",onChange:j=>W(S,"explanation",j.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},S))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:ce,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"})," "]})]})]})})]})},mO=[{id:"grammar",title:" (Grammar)",icon:Hu,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:ts,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:im,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:ox,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],gO=[{id:"English",title:" ",icon:im,color:"text-purple-400",bg:"bg-purple-900/20"}],pO=({onBack:r})=>{const{user:e}=rr(),[t,s]=V.useState("INTRO"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState(null),[v,w]=V.useState([]),[N,R]=V.useState(!1),[M,W]=V.useState(null),[B,de]=V.useState(0),[ce,oe]=V.useState(""),[we,ge]=V.useState(!1),[G,S]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]);const j=()=>s("SUBJECTS"),A=U=>{c(U),s("GRADES")},O=U=>{f(U),s("CATEGORIES")},D=U=>{x(U),s("TOPICS")},z=U=>{W(U),de(0),oe(""),S(!1),s("DETAILS")};V.useEffect(()=>{t==="TOPICS"&&d&&g&&l&&I()},[t,d,g,l]);const I=async()=>{R(!0);try{const U=Pn(gt(Ue,"explanations"),Cn("subject","==",l),Cn("grade","==",d),Cn("category","==",g==null?void 0:g.id)),P=await ss(U),ee=[];P.forEach(be=>{ee.push({id:be.id,...be.data()})}),ee.sort((be,Re)=>{var ke,Et;const ze=((ke=be.createdAt)==null?void 0:ke.seconds)||0;return(((Et=Re.createdAt)==null?void 0:Et.seconds)||0)-ze}),w(ee)}catch(U){console.error("Error fetching explanations:",U)}finally{R(!1)}},he=async()=>{if(B!==0&&!(!M||!e)){ge(!0);try{await tr(gt(Ue,"reviews"),{type:"explanation",targetId:M.id,targetTitle:M.title,teacherId:M.teacherName||"",teacherName:M.teacherName||"",rating:B,comment:ce,studentId:e.uid,studentName:e.displayName,createdAt:xs()}),S(!0)}catch(U){console.error("Error saving review:",U),alert("    ")}finally{ge(!1)}}},fe=U=>U?(U.toDate?U.toDate():new Date(U.seconds*1e3)).toLocaleDateString("ar-EG"):"",F=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:j,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(Ut,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(jf,{className:"w-4 h-4"})," "]})})]}),le=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:gO.map(U=>i.jsxs("button",{onClick:()=>A(U.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${U.bg} ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:U.title})]},U.id))})})]}),Y=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(U=>i.jsxs("button",{onClick:()=>O(U.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:U})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",U]})]},U)),i.jsxs("button",{onClick:()=>O("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(fa,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),re=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mO.map(U=>i.jsx("button",{onClick:()=>D(U),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:U.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:U.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(ra,{className:"w-5 h-5 text-gray-400"})})]})},U.id))})})]}),Ee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(qu,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.map(U=>i.jsxs("button",{onClick:()=>z(U),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(ns,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:U.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"}),fe(U.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Wn,{className:"w-3 h-3"}),U.teacherName]})]})]})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},U.id))})})]}),C=()=>M?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:M.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),i.jsx(ra,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:M.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:M.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wn,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:M.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fu,{className:"w-4 h-4"}),i.jsx("span",{children:fe(M.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:G?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(ha,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(lm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(U=>i.jsx("button",{onClick:()=>de(U),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${B===U?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:U},U))}),i.jsx("textarea",{value:ce,onChange:U=>oe(U.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:he,disabled:we||B===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${B===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[we?i.jsx(vt,{className:"w-4 h-4 animate-spin"}):i.jsx(ca,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[t==="INTRO"&&F(),t==="SUBJECTS"&&le(),t==="GRADES"&&Y(),t==="CATEGORIES"&&re(),t==="TOPICS"&&Ee(),t==="DETAILS"&&C()]})},A2=[{id:"grammar",title:" (Grammar)",icon:Hu},{id:"reading",title:" (Reading)",icon:ts},{id:"vocabulary",title:" (Vocabulary)",icon:im},{id:"writing",title:" (Writing)",icon:ox}],xO=[{id:"English",title:"  (English)",icon:im}],yO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[R,M]=V.useState(!1),[W,B]=V.useState(!1),[de,ce]=V.useState(""),[oe,we]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,z]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}M(!0);try{await tr(gt(Ue,"explanations"),{subject:s,grade:c,category:f,title:x,content:w,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:xs()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(re){console.error("Error saving explanation:",re),alert("   ")}finally{M(!1)}},he=async()=>{if(de.trim()&&t!=null&&t.uid){G(!0),j(!0),we([]);try{const re=Pn(gt(Ue,"explanations"),Cn("title",">=",de),Cn("title","<=",de+"")),Ee=await ss(re),C=[];Ee.forEach(U=>{const P=U.data();P.teacherId===t.uid&&C.push({id:U.id,...P})}),we(C)}catch(re){console.error("Error searching explanations:",re)}finally{G(!1)}}},fe=async()=>{if(A){z(!0);try{await zm(Fn(Ue,"explanations",A)),we(re=>re.filter(Ee=>Ee.id!==A)),O(null)}catch(re){console.error(re),alert("   ")}finally{z(!1)}}},F=()=>{r?r():e("HOME")},le=re=>re?(re.toDate?re.toDate():new Date(re.seconds*1e3)).toLocaleDateString("ar-EG"):"",Y=re=>{const Ee=A2.find(C=>C.id===re);return Ee?Ee.title:re};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Gu,{className:"w-6 h-6 text-purple-500"}),"  "]}),W?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(wn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:xO.map(re=>i.jsxs("button",{onClick:()=>l(re.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===re.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx(re.icon,{className:"w-6 h-6"}),i.jsx("span",{children:re.title})]},re.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(re=>i.jsxs("button",{onClick:()=>d(re.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===re.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",re]},re)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:A2.map(re=>i.jsxs("button",{onClick:()=>g(re.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===re.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===re.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx(re.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:re.title})]},re.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:re=>v(re.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:re=>N(re.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:R,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[R?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:de,onChange:re=>ce(re.target.value),onKeyDown:re=>re.key==="Enter"&&he(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:he,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(vt,{className:"w-4 h-4 animate-spin"}):i.jsx(Us,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),oe.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:oe.map(re=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(ns,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:re.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:re.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y(re.category)}),i.jsx("span",{children:re.grade==="English Major - QOU"?"":` ${re.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"})," ",le(re.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>re.id&&O(re.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]},re.id))}):S&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Gu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(dx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:fe,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?i.jsx(vt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},bO=[{id:"handouts",title:" ",icon:ns,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Do,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:ts,color:"text-purple-400",bg:"bg-purple-900/20"}],vO=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],wO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[R,M]=V.useState(!1),[W,B]=V.useState(!1),[de,ce]=V.useState(""),[oe,we]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,z]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}if(!w.startsWith("http")){alert("        http  https");return}M(!0);try{await tr(gt(Ue,"study_materials"),{grade:s,subject:c,category:f,title:x,url:w,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:xs()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(Y){console.error("Error saving file:",Y),alert("   ")}finally{M(!1)}},he=async()=>{if(de.trim()&&t!=null&&t.uid){G(!0),j(!0),we([]);try{const Y=Pn(gt(Ue,"study_materials"),Cn("title",">=",de),Cn("title","<=",de+"")),re=await ss(Y),Ee=[];re.forEach(C=>{const U=C.data();U.teacherId===t.uid&&Ee.push({id:C.id,...U})}),we(Ee)}catch(Y){console.error("Error searching files:",Y)}finally{G(!1)}}},fe=async()=>{if(A){z(!0);try{await zm(Fn(Ue,"study_materials",A)),we(Y=>Y.filter(re=>re.id!==A)),O(null)}catch(Y){console.error(Y),alert("   ")}finally{z(!1)}}},F=()=>{r?r():e("PROFILE")},le=Y=>Y?(Y.toDate?Y.toDate():new Date(Y.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(O2,{className:"w-6 h-6 text-blue-500"}),"  "]}),W?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(wn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(fa,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:Y=>l(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(Y=>i.jsxs("option",{value:Y.toString(),children:[" ",Y]},Y)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),vO.map(Y=>i.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:bO.map(Y=>i.jsxs("button",{onClick:()=>g(Y.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===Y.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${Y.bg}`,children:i.jsx(Y.icon,{className:`w-6 h-6 ${Y.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:Y.title})]},Y.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:Y=>v(Y.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(T5,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:w,onChange:Y=>N(Y.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:R,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[R?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:de,onChange:Y=>ce(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&he(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:he,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(vt,{className:"w-4 h-4 animate-spin"}):i.jsx(Us,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),oe.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:oe.map(Y=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(ns,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:Y.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y.subject}),i.jsx("span",{children:Y.grade==="English Major - QOU"?"":` ${Y.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"})," ",le(Y.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>Y.id&&O(Y.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]},Y.id))}):S&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(ns,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(dx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:fe,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?i.jsx(vt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},gp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const w={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",R=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${w.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${w.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${w.bgIcon} border ${w.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${w.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${w.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${w.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${R} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${w.border} ${w.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${w.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(Ut,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${w.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${w.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},_O=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(gp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:k2,secondaryIcon:wn,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(gp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:qu,secondaryIcon:G4,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(gp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Do,secondaryIcon:e5,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),NO=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),EO=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(hA,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(Ut,{className:"w-6 h-6"})]})})]})]}),TO=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),Dy=()=>{const r=V.useRef(null);return V.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const v=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",v);const w=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},SO=({onBack:r})=>{const e=[{icon:k2,title:" ",desc:"              ."},{icon:uA,title:" 24/7",desc:"                 ."},{icon:um,title:"  (XP)",desc:"  !    (XP)         ."},{icon:ns,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(Dy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(wl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(ux,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(wn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(wn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(wn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},jO=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(Dy,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(wl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(Ut,{className:"w-5 h-5"})]})]})]}),AO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,l]=V.useState("INBOX"),[c,d]=V.useState([]),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[R,M]=V.useState(!1),[W,B]=V.useState(!1),[de,ce]=V.useState(""),[oe,we]=V.useState([]),[ge,G]=V.useState(!1);V.useEffect(()=>{s==="COMPOSE"?S():j()},[s,t]);const S=async()=>{B(!0);try{const he=Pn(gt(Ue,"users"),Cn("role","==","student")),F=(await ss(he)).docs.map(le=>({id:le.id,...le.data()}));d(F)}catch(he){console.error("Error fetching students",he)}finally{B(!1)}},j=async(he=!1)=>{if(!t)return;const fe=`etqan_inbox_${t.uid}`,F=1440*60*1e3,le=Date.now();if(!he){const Y=localStorage.getItem(fe);if(Y)try{const{data:re,timestamp:Ee}=JSON.parse(Y);if(le-Ee<F){we(re);return}}catch(re){console.error(re)}}G(!0);try{const Y=Pn(gt(Ue,"contact_messages"),Cn("teacherId","==",t.uid)),Ee=(await ss(Y)).docs.map(C=>({id:C.id,...C.data(),createdAt:C.data().createdAt?{seconds:C.data().createdAt.seconds}:null}));Ee.sort((C,U)=>{var be,Re;const P=((be=C.createdAt)==null?void 0:be.seconds)||0;return(((Re=U.createdAt)==null?void 0:Re.seconds)||0)-P}),we(Ee),localStorage.setItem(fe,JSON.stringify({timestamp:le,data:Ee}))}catch(Y){console.error("Error fetching inbox",Y)}finally{G(!1)}},A=async()=>{if(!x||!w){alert("    ");return}if(!f){alert("  ");return}M(!0);try{await tr(gt(Ue,"notifications"),{recipientId:f,title:x,message:w,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:xs(),read:!1}),alert("   !"),v(""),N(""),g(""),ce("")}catch(he){console.error("Error sending message",he),alert("   ")}finally{M(!1)}},O=async he=>{if(window.confirm("      "))try{await zm(Fn(Ue,"contact_messages",he));const fe=oe.filter(Y=>Y.id!==he);we(fe);const F=`etqan_inbox_${t==null?void 0:t.uid}`,le=localStorage.getItem(F);if(le){const Y=JSON.parse(le);Y.data=fe,localStorage.setItem(F,JSON.stringify(Y))}}catch(fe){console.error(fe)}},D=async he=>{try{await Lm(Fn(Ue,"contact_messages",he),{read:!0});const fe=oe.map(Y=>Y.id===he?{...Y,read:!0}:Y);we(fe);const F=`etqan_inbox_${t==null?void 0:t.uid}`,le=localStorage.getItem(F);if(le){const Y=JSON.parse(le);Y.data=fe,localStorage.setItem(F,JSON.stringify(Y))}}catch(fe){console.error(fe)}},z=c.filter(he=>{const fe=he.displayName?he.displayName.toLowerCase():"",F=he.email?he.email.toLowerCase():"",le=de.toLowerCase();return fe.includes(le)||F.includes(le)}),I=he=>he?(he.toDate?he.toDate():new Date(he.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(jr,{className:"w-5 h-5"})," ",oe.some(he=>!he.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ca,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(cm,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(Us,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:de,onChange:he=>{ce(he.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),de&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:z.map(he=>i.jsxs("div",{onClick:()=>{g(he.id),ce(he.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===he.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:he.avatar?i.jsx("img",{src:he.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(Wn,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:he.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:he.email})]}),f===he.id&&i.jsx(wn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},he.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:he=>v(he.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:he=>N(he.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:R,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[R?i.jsx(vt,{className:"w-5 h-5 animate-spin"}):i.jsx(ca,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(jr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:()=>j(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:i.jsx(om,{className:"w-5 h-5 text-gray-400"})})]}),ge?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(vt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):oe.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(jr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:oe.map(he=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${he.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${he.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:he.studentName?he.studentName.charAt(0).toUpperCase():i.jsx(Wn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${he.read?"text-gray-300":"text-white"}`,children:he.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:he.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(ix,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(he.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:he.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!he.read&&i.jsxs("button",{onClick:()=>D(he.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(wn,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>O(he.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(jr,{className:"w-4 h-4 text-gray-500"})})})]}),!he.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},he.id))})]})})]})})]})},IO=({onBack:r,onNavigate:e})=>{const[t,s]=V.useState([]),[l,c]=V.useState(!0),[d,f]=V.useState("ALL");V.useEffect(()=>{g()},[]);const g=async()=>{c(!0);try{const N=Pn(gt(Ue,"reviews"),jd("createdAt","desc")),M=(await ss(N)).docs.map(W=>({id:W.id,...W.data()}));s(M)}catch(N){console.error("Error fetching reviews:",N)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),v=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",w=t.length>0?(t.reduce((N,R)=>N+R.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ut,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(wl,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:w}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(vt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(lm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:v(N.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((R,M)=>i.jsx(wl,{className:`w-3 h-3 ${M<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},M)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})},CO=({onNavigate:r})=>i.jsxs("section",{className:"py-24 relative overflow-hidden bg-gray-950 border-t border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-900/10 rounded-full blur-[100px]"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-[100px]"})]}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl mb-8 border border-white/10 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:i.jsx(Bo,{className:"w-10 h-10 text-emerald-400"})}),i.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight tracking-tight",children:"   "}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed font-medium",children:"       .         ."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8",children:[i.jsxs("div",{className:"flex items-center -space-x-4 space-x-reverse",children:[i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-20",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shadow-lg relative z-0",children:"+2"})]}),i.jsxs("button",{onClick:()=>r("CONTACT_TEACHER"),className:"group relative bg-white text-gray-900 px-8 py-4 rounded-2xl font-black text-lg hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] flex items-center gap-3 transform hover:-translate-y-1",children:["  ",i.jsx(Ut,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-emerald-600"})]})]})]})]});function RO(){const[r,e]=V.useState("HOME"),[t,s]=V.useState(!1),[l,c]=V.useState(!1),d=V.useRef({}),f=V.useRef(!1),{logout:g}=rr();V.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const w=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]),V.useEffect(()=>{if(f.current){const w=d.current[r]||0;setTimeout(()=>window.scrollTo(0,w),10)}else window.scrollTo(0,0)},[r]);const x=(w,N=!1)=>{if(w===r){w==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:w},"",""),e(w)},v=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},1e3)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(Dy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:i.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(GD,{onLoginClick:()=>s(!0),onNavigate:w=>x(w),onLogoutClick:v}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx($D,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:w=>x(w)}),i.jsx(QD,{onNavigate:w=>x(w)}),i.jsx(dO,{onLoginClick:()=>s(!0)}),i.jsx(hO,{}),i.jsx(jO,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsxs("div",{className:"relative w-full h-px bg-gray-800/50 my-0 overflow-visible z-20",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500 to-transparent h-[1px] opacity-60"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent blur-[2px] opacity-80"})]}),i.jsx(NO,{}),i.jsx(EO,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(TO,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(_O,{onNavigate:w=>x(w)}),i.jsx(CO,{onNavigate:w=>x(w)})]}),r==="ABOUT_PLATFORM"&&i.jsx(aO,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(SO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(rO,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(ZD,{onNavigate:w=>x(w)}),r==="TEACHER_DASHBOARD"&&i.jsx(YD,{}),r==="QUESTION_BANK"&&i.jsx(fO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(yO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(wO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(tO,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&i.jsx(iO,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(pO,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx(uO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(AO,{onNavigate:w=>x(w)}),r==="TEACHER_REVIEWS"&&i.jsx(IO,{onNavigate:w=>x(w)})]}),i.jsx(XD,{isOpen:t,onClose:()=>s(!1)}),i.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),i.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const DS=document.getElementById("root");if(!DS)throw new Error("Could not find root element to mount to");const kO=v4.createRoot(DS);kO.render(i.jsx(C2.StrictMode,{children:i.jsx(HD,{children:i.jsx(RO,{})})}));
