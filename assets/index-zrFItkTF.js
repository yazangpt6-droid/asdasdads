(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function I_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zg={exports:{}},wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function bT(){if(Zv)return wu;Zv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var ew;function vT(){return ew||(ew=1,zg.exports=bT()),zg.exports}var i=vT(),Ug={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function wT(){if(tw)return qe;tw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=E&&D[E]||D["@@iterator"],typeof D=="function"?D:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,P={};function le(D,B,L){this.props=D,this.context=B,this.refs=P,this.updater=L||O}le.prototype.isReactComponent={},le.prototype.setState=function(D,B){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,B,"setState")},le.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function se(){}se.prototype=le.prototype;function te(D,B,L){this.props=D,this.context=B,this.refs=P,this.updater=L||O}var me=te.prototype=new se;me.constructor=te,J(me,le.prototype),me.isPureReactComponent=!0;var ce=Array.isArray;function W(){}var N={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function A(D,B,L){var Y=L.ref;return{$$typeof:r,type:D,key:B,ref:Y!==void 0?Y:null,props:L}}function C(D,B){return A(D.type,B,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function z(D){var B={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(L){return B[L]})}var I=/\/+/g;function ge(D,B){return typeof D=="object"&&D!==null&&D.key!=null?z(""+D.key):B.toString(36)}function Ie(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(W,W):(D.status="pending",D.then(function(B){D.status==="pending"&&(D.status="fulfilled",D.value=B)},function(B){D.status==="pending"&&(D.status="rejected",D.reason=B)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,B,L,Y,fe){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var Re=!1;if(D===null)Re=!0;else switch(Ee){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(D.$$typeof){case r:case e:Re=!0;break;case w:return Re=D._init,G(Re(D._payload),B,L,Y,fe)}}if(Re)return fe=fe(D),Re=Y===""?"."+ge(D,0):Y,ce(fe)?(L="",Re!=null&&(L=Re.replace(I,"$&/")+"/"),G(fe,B,L,"",function(Ye){return Ye})):fe!=null&&(k(fe)&&(fe=C(fe,L+(fe.key==null||D&&D.key===fe.key?"":(""+fe.key).replace(I,"$&/")+"/")+Re)),B.push(fe)),1;Re=0;var Xe=Y===""?".":Y+":";if(ce(D))for(var Se=0;Se<D.length;Se++)Y=D[Se],Ee=Xe+ge(Y,Se),Re+=G(Y,B,L,Ee,fe);else if(Se=R(D),typeof Se=="function")for(D=Se.call(D),Se=0;!(Y=D.next()).done;)Y=Y.value,Ee=Xe+ge(Y,Se++),Re+=G(Y,B,L,Ee,fe);else if(Ee==="object"){if(typeof D.then=="function")return G(Ie(D),B,L,Y,fe);throw B=String(D),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Re}function he(D,B,L){if(D==null)return D;var Y=[],fe=0;return G(D,Y,"","",function(Ee){return B.call(L,Ee,fe++)}),Y}function ee(D){if(D._status===-1){var B=D._result;B=B(),B.then(function(L){(D._status===0||D._status===-1)&&(D._status=1,D._result=L)},function(L){(D._status===0||D._status===-1)&&(D._status=2,D._result=L)}),D._status===-1&&(D._status=0,D._result=B)}if(D._status===1)return D._result.default;throw D._result}var $=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},_e={map:he,forEach:function(D,B,L){he(D,function(){B.apply(this,arguments)},L)},count:function(D){var B=0;return he(D,function(){B++}),B},toArray:function(D){return he(D,function(B){return B})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return qe.Activity=v,qe.Children=_e,qe.Component=le,qe.Fragment=t,qe.Profiler=l,qe.PureComponent=te,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},qe.cache=function(D){return function(){return D.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(D,B,L){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Y=J({},D.props),fe=D.key;if(B!=null)for(Ee in B.key!==void 0&&(fe=""+B.key),B)!T.call(B,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&B.ref===void 0||(Y[Ee]=B[Ee]);var Ee=arguments.length-2;if(Ee===1)Y.children=L;else if(1<Ee){for(var Re=Array(Ee),Xe=0;Xe<Ee;Xe++)Re[Xe]=arguments[Xe+2];Y.children=Re}return A(D.type,fe,Y)},qe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},qe.createElement=function(D,B,L){var Y,fe={},Ee=null;if(B!=null)for(Y in B.key!==void 0&&(Ee=""+B.key),B)T.call(B,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(fe[Y]=B[Y]);var Re=arguments.length-2;if(Re===1)fe.children=L;else if(1<Re){for(var Xe=Array(Re),Se=0;Se<Re;Se++)Xe[Se]=arguments[Se+2];fe.children=Xe}if(D&&D.defaultProps)for(Y in Re=D.defaultProps,Re)fe[Y]===void 0&&(fe[Y]=Re[Y]);return A(D,Ee,fe)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(D){return{$$typeof:f,render:D}},qe.isValidElement=k,qe.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:ee}},qe.memo=function(D,B){return{$$typeof:x,type:D,compare:B===void 0?null:B}},qe.startTransition=function(D){var B=N.T,L={};N.T=L;try{var Y=D(),fe=N.S;fe!==null&&fe(L,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(W,$)}catch(Ee){$(Ee)}finally{B!==null&&L.types!==null&&(B.types=L.types),N.T=B}},qe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},qe.use=function(D){return N.H.use(D)},qe.useActionState=function(D,B,L){return N.H.useActionState(D,B,L)},qe.useCallback=function(D,B){return N.H.useCallback(D,B)},qe.useContext=function(D){return N.H.useContext(D)},qe.useDebugValue=function(){},qe.useDeferredValue=function(D,B){return N.H.useDeferredValue(D,B)},qe.useEffect=function(D,B){return N.H.useEffect(D,B)},qe.useEffectEvent=function(D){return N.H.useEffectEvent(D)},qe.useId=function(){return N.H.useId()},qe.useImperativeHandle=function(D,B,L){return N.H.useImperativeHandle(D,B,L)},qe.useInsertionEffect=function(D,B){return N.H.useInsertionEffect(D,B)},qe.useLayoutEffect=function(D,B){return N.H.useLayoutEffect(D,B)},qe.useMemo=function(D,B){return N.H.useMemo(D,B)},qe.useOptimistic=function(D,B){return N.H.useOptimistic(D,B)},qe.useReducer=function(D,B,L){return N.H.useReducer(D,B,L)},qe.useRef=function(D){return N.H.useRef(D)},qe.useState=function(D){return N.H.useState(D)},qe.useSyncExternalStore=function(D,B,L){return N.H.useSyncExternalStore(D,B,L)},qe.useTransition=function(){return N.H.useTransition()},qe.version="19.2.0",qe}var nw;function ox(){return nw||(nw=1,Ug.exports=wT()),Ug.exports}var V=ox();const C_=I_(V);var Bg={exports:{}},_u={},qg={exports:{}},Fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function _T(){return sw||(sw=1,(function(r){function e(G,he){var ee=G.length;G.push(he);e:for(;0<ee;){var $=ee-1>>>1,_e=G[$];if(0<l(_e,he))G[$]=he,G[ee]=_e,ee=$;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var he=G[0],ee=G.pop();if(ee!==he){G[0]=ee;e:for(var $=0,_e=G.length,D=_e>>>1;$<D;){var B=2*($+1)-1,L=G[B],Y=B+1,fe=G[Y];if(0>l(L,ee))Y<_e&&0>l(fe,L)?(G[$]=fe,G[Y]=ee,$=Y):(G[$]=L,G[B]=ee,$=B);else if(Y<_e&&0>l(fe,ee))G[$]=fe,G[Y]=ee,$=Y;else break e}}return he}function l(G,he){var ee=G.sortIndex-he.sortIndex;return ee!==0?ee:G.id-he.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],w=1,v=null,E=3,R=!1,O=!1,J=!1,P=!1,le=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function me(G){for(var he=t(x);he!==null;){if(he.callback===null)s(x);else if(he.startTime<=G)s(x),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(x)}}function ce(G){if(J=!1,me(G),!O)if(t(g)!==null)O=!0,W||(W=!0,z());else{var he=t(x);he!==null&&Ie(ce,he.startTime-G)}}var W=!1,N=-1,T=5,A=-1;function C(){return P?!0:!(r.unstable_now()-A<T)}function k(){if(P=!1,W){var G=r.unstable_now();A=G;var he=!0;try{e:{O=!1,J&&(J=!1,se(N),N=-1),R=!0;var ee=E;try{t:{for(me(G),v=t(g);v!==null&&!(v.expirationTime>G&&C());){var $=v.callback;if(typeof $=="function"){v.callback=null,E=v.priorityLevel;var _e=$(v.expirationTime<=G);if(G=r.unstable_now(),typeof _e=="function"){v.callback=_e,me(G),he=!0;break t}v===t(g)&&s(g),me(G)}else s(g);v=t(g)}if(v!==null)he=!0;else{var D=t(x);D!==null&&Ie(ce,D.startTime-G),he=!1}}break e}finally{v=null,E=ee,R=!1}he=void 0}}finally{he?z():W=!1}}}var z;if(typeof te=="function")z=function(){te(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ge=I.port2;I.port1.onmessage=k,z=function(){ge.postMessage(null)}}else z=function(){le(k,0)};function Ie(G,he){N=le(function(){G(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(G){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var ee=E;E=he;try{return G()}finally{E=ee}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=E;E=G;try{return he()}finally{E=ee}},r.unstable_scheduleCallback=function(G,he,ee){var $=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?$+ee:$):ee=$,G){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ee+_e,G={id:w++,callback:he,priorityLevel:G,startTime:ee,expirationTime:_e,sortIndex:-1},ee>$?(G.sortIndex=ee,e(x,G),t(g)===null&&G===t(x)&&(J?(se(N),N=-1):J=!0,Ie(ce,ee-$))):(G.sortIndex=_e,e(g,G),O||R||(O=!0,W||(W=!0,z()))),G},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(G){var he=E;return function(){var ee=E;E=he;try{return G.apply(this,arguments)}finally{E=ee}}}})(Fg)),Fg}var rw;function NT(){return rw||(rw=1,qg.exports=_T()),qg.exports}var Hg={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function ET(){if(aw)return Bn;aw=1;var r=ox();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,w){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:x,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Bn.createPortal=function(g,x){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,w)},Bn.flushSync=function(g){var x=d.T,w=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=w,s.d.f()}},Bn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},Bn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Bn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var w=x.as,v=f(w,x.crossOrigin),E=typeof x.integrity=="string"?x.integrity:void 0,R=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;w==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:R}):w==="script"&&s.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:R,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Bn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var w=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},Bn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var w=x.as,v=f(w,x.crossOrigin);s.d.L(g,w,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Bn.preloadModule=function(g,x){if(typeof g=="string")if(x){var w=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},Bn.requestFormReset=function(g){s.d.r(g)},Bn.unstable_batchedUpdates=function(g,x){return g(x)},Bn.useFormState=function(g,x,w){return d.H.useFormState(g,x,w)},Bn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Bn.version="19.2.0",Bn}var iw;function jT(){if(iw)return Hg.exports;iw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hg.exports=ET(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function TT(){if(lw)return _u;lw=1;var r=NT(),e=ox(),t=jT();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,j=m.child;j;){if(j===o){b=!0,o=m,u=p;break}if(j===u){b=!0,u=m,o=p;break}j=j.sibling}if(!b){for(j=p.child;j;){if(j===o){b=!0,o=p,u=m;break}if(j===u){b=!0,u=p,o=m;break}j=j.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function w(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=w(n),a!==null)return a;n=n.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),te=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case J:return"Fragment";case le:return"Profiler";case P:return"StrictMode";case ce:return"Suspense";case W:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case te:return n.displayName||"Context";case se:return(n._context.displayName||"Context")+".Consumer";case me:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return a=n.displayName||null,a!==null?a:ge(n.type)||"Memo";case T:a=n._payload,n=n._init;try{return ge(n(a))}catch{}}return null}var Ie=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},$=[],_e=-1;function D(n){return{current:n}}function B(n){0>_e||(n.current=$[_e],$[_e]=null,_e--)}function L(n,a){_e++,$[_e]=n.current,n.current=a}var Y=D(null),fe=D(null),Ee=D(null),Re=D(null);function Xe(n,a){switch(L(Ee,a),L(fe,n),L(Y,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?_v(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=_v(a),n=Nv(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(Y),L(Y,n)}function Se(){B(Y),B(fe),B(Ee)}function Ye(n){n.memoizedState!==null&&L(Re,n);var a=Y.current,o=Nv(a,n.type);a!==o&&(L(fe,n),L(Y,o))}function st(n){fe.current===n&&(B(Y),B(fe)),Re.current===n&&(B(Re),xu._currentValue=ee)}var mt,rt;function Cn(n){if(mt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);mt=a&&a[1]||"",rt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+n+rt}var Is=!1;function fs(n,a){if(!n||Is)return"";Is=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ne){var X=ne}Reflect.construct(n,[],de)}else{try{de.call()}catch(ne){X=ne}n.call(de.prototype)}}else{try{throw Error()}catch(ne){X=ne}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ne){if(ne&&X&&typeof ne.stack=="string")return[ne.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],j=p[1];if(b&&j){var M=b.split(`
`),Q=j.split(`
`);for(m=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===M.length||m===Q.length)for(u=M.length-1,m=Q.length-1;1<=u&&0<=m&&M[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(M[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||M[u]!==Q[m]){var ae=`
`+M[u].replace(" at new "," at ");return n.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",n.displayName)),ae}while(1<=u&&0<=m);break}}}finally{Is=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Cn(o):""}function or(n,a){switch(n.tag){case 26:case 27:case 5:return Cn(n.type);case 16:return Cn("Lazy");case 13:return n.child!==a&&a!==null?Cn("Suspense Fallback"):Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return fs(n.type,!1);case 11:return fs(n.type.render,!1);case 1:return fs(n.type,!0);case 31:return Cn("Activity");default:return""}}function Hr(n){try{var a="",o=null;do a+=or(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Vt=Object.prototype.hasOwnProperty,gt=r.unstable_scheduleCallback,Wt=r.unstable_cancelCallback,Mi=r.unstable_shouldYield,Gr=r.unstable_requestPaint,Zt=r.unstable_now,$s=r.unstable_getCurrentPriorityLevel,cr=r.unstable_ImmediatePriority,$r=r.unstable_UserBlockingPriority,En=r.unstable_NormalPriority,Vi=r.unstable_LowPriority,Aa=r.unstable_IdlePriority,ue=r.log,ct=r.unstable_setDisableYieldValue,Fe=null,ut=null;function ln(n){if(typeof ue=="function"&&ct(n),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Fe,n)}catch{}}var St=Math.clz32?Math.clz32:Gt,Ht=Math.log,Kn=Math.LN2;function Gt(n){return n>>>=0,n===0?32:31-(Ht(n)/Kn|0)|0}var $t=256,Rn=262144,pt=4194304;function yn(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function on(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var j=u&134217727;return j!==0?(u=j&~p,u!==0?m=yn(u):(b&=j,b!==0?m=yn(b):o||(o=j&~n,o!==0&&(m=yn(o))))):(j=u&~p,j!==0?m=yn(j):b!==0?m=yn(b):o||(o=u&~n,o!==0&&(m=yn(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function jn(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Pi(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kr(){var n=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),n}function oe(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function Ne(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function be(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var j=n.entanglements,M=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var ae=31-St(o),de=1<<ae;j[ae]=0,M[ae]=-1;var X=Q[ae];if(X!==null)for(Q[ae]=null,ae=0;ae<X.length;ae++){var ne=X[ae];ne!==null&&(ne.lane&=-536870913)}o&=~de}u!==0&&Ae(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function Ae(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-St(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Ve(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-St(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function Be(n,a){var o=a&-a;return o=(o&42)!==0?1:He(o),(o&(n.suspendedLanes|a))!==0?0:o}function He(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function dt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function lt(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:$v(n.type))}function xt(n,a){var o=he.p;try{return he.p=n,a()}finally{he.p=o}}var Kt=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Kt,Tn="__reactProps$"+Kt,ur="__reactContainer$"+Kt,Ul="__reactEvents$"+Kt,Gm="__reactListeners$"+Kt,Pd="__reactHandles$"+Kt,Ld="__reactResources$"+Kt,dr="__reactMarker$"+Kt;function Bl(n){delete n[Qt],delete n[Tn],delete n[Ul],delete n[Gm],delete n[Pd]}function hr(n){var a=n[Qt];if(a)return a;for(var o=n.parentNode;o;){if(a=o[ur]||o[Qt]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=Cv(n);n!==null;){if(o=n[Qt])return o;n=Cv(n)}return a}n=o,o=n.parentNode}return null}function Cs(n){if(n=n[Qt]||n[ur]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function ms(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function fr(n){var a=n[Ld];return a||(a=n[Ld]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function cn(n){n[dr]=!0}var Ec=new Set,jc={};function mr(n,a){gr(n,a),gr(n+"Capture",a)}function gr(n,a){for(jc[n]=a,n=0;n<a.length;n++)Ec.add(a[n])}var Tc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sc={},Ac={};function zd(n){return Vt.call(Ac,n)?!0:Vt.call(Sc,n)?!1:Tc.test(n)?Ac[n]=!0:(Sc[n]=!0,!1)}function ql(n,a,o){if(zd(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function gs(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function un(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function Sn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ia(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ic(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function wt(n){if(!n._valueTracker){var a=Ia(n)?"checked":"value";n._valueTracker=Ic(n,a,""+n[a])}}function Li(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Ia(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function pr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var zi=/[\n"\\]/g;function ss(n){return n.replace(zi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fl(n,a,o,u,m,p,b,j){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Sn(a)):n.value!==""+Sn(a)&&(n.value=""+Sn(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Cc(n,b,Sn(a)):o!=null?Cc(n,b,Sn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+Sn(j):n.removeAttribute("name")}function Ud(n,a,o,u,m,p,b,j){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){wt(n);return}o=o!=null?""+Sn(o):"",a=a!=null?""+Sn(a):o,j||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=j?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),wt(n)}function Cc(n,a,o){a==="number"&&pr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ca(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Sn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Bd(n,a,o){if(a!=null&&(a=""+Sn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+Sn(o):""}function Ra(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(Ie(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=Sn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),wt(n)}function rs(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var qd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||qd.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function kc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Rc(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Rc(n,p,a[p])}function Hl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gl(n){return ka.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ks(){}var Dc=null;function Rs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Da=null,xr=null;function Ui(n){var a=Cs(n);if(a&&(n=a.stateNode)){var o=n[Tn]||null;e:switch(n=a.stateNode,a.type){case"input":if(Fl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ss(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[Tn]||null;if(!m)throw Error(s(90));Fl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Li(u)}break e;case"textarea":Bd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Ca(n,!!o.multiple,a,!1)}}}var $l=!1;function Oa(n,a,o){if($l)return n(a,o);$l=!0;try{var u=n(a);return u}finally{if($l=!1,(Da!==null||xr!==null)&&(Vh(),Da&&(a=Da,n=xr,xr=Da=null,Ui(a),n)))for(a=0;a<n.length;a++)Ui(n[a])}}function Qs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[Tn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(ks)try{var At={};Object.defineProperty(At,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch{Bi=!1}var yr=null,Oc=null,qi=null;function Mc(){if(qi)return qi;var n,a=Oc,o=a.length,u,m="value"in yr?yr.value:yr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return qi=m.slice(n,1<u?1-u:void 0)}function Fi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Qr(){return!0}function Ys(){return!1}function kn(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(p):p[j]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qr:Ys,this.isPropagationStopped=Ys,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),a}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=kn(Yr),Ma=v({},Yr,{view:0,detail:0}),Vc=kn(Ma),Va,Kl,vr,Ql=v({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vr&&(vr&&n.type==="mousemove"?(Va=n.screenX-vr.screenX,Kl=n.screenY-vr.screenY):Kl=Va=0,vr=n),Va)},movementY:function(n){return"movementY"in n?n.movementY:Kl}}),Pc=kn(Ql),Hi=v({},Ql,{dataTransfer:0}),Hd=kn(Hi),Gd=v({},Ma,{relatedTarget:0}),Gi=kn(Gd),Lc=v({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),$d=kn(Lc),Yl=v({},Yr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kd=kn(Yl),Qd=v({},Yr,{data:0}),wr=kn(Qd),Yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Jd[n])?!!a[n]:!1}function Pa(){return Wd}var Qn=v({},Ma,{key:function(n){if(n.key){var a=Yd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(n){return n.type==="keypress"?Fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zd=kn(Qn),eh=v({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=kn(eh),h=v({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),y=kn(h),_=v({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=kn(_),H=v({},Ql,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=kn(H),ve=v({},Yr,{newState:0,oldState:0}),Ge=kn(ve),en=[9,13,27,32],yt=ks&&"CompositionEvent"in window,zt=null;ks&&"documentMode"in document&&(zt=document.documentMode);var Ds=ks&&"TextEvent"in window&&!zt,_r=ks&&(!yt||zt&&8<zt&&11>=zt),Xs=" ",Js=!1;function $i(n,a){switch(n){case"keyup":return en.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jl=!1;function F5(n,a){switch(n){case"compositionend":return Xl(a);case"keypress":return a.which!==32?null:(Js=!0,Xs);case"textInput":return n=a.data,n===Xs&&Js?null:n;default:return null}}function H5(n,a){if(Jl)return n==="compositionend"||!yt&&$i(n,a)?(n=Mc(),qi=Oc=yr=null,Jl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _r&&a.locale!=="ko"?null:a.data;default:return null}}var G5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!G5[n.type]:a==="textarea"}function Oy(n,a,o,u){Da?xr?xr.push(u):xr=[u]:Da=u,a=Fh(a,"onChange"),0<a.length&&(o=new br("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var zc=null,Uc=null;function $5(n){pv(n,0)}function th(n){var a=ms(n);if(Li(a))return n}function My(n,a){if(n==="change")return a}var Vy=!1;if(ks){var $m;if(ks){var Km="oninput"in document;if(!Km){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),Km=typeof Py.oninput=="function"}$m=Km}else $m=!1;Vy=$m&&(!document.documentMode||9<document.documentMode)}function Ly(){zc&&(zc.detachEvent("onpropertychange",zy),Uc=zc=null)}function zy(n){if(n.propertyName==="value"&&th(Uc)){var a=[];Oy(a,Uc,n,Rs(n)),Oa($5,a)}}function K5(n,a,o){n==="focusin"?(Ly(),zc=a,Uc=o,zc.attachEvent("onpropertychange",zy)):n==="focusout"&&Ly()}function Q5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return th(Uc)}function Y5(n,a){if(n==="click")return th(a)}function X5(n,a){if(n==="input"||n==="change")return th(a)}function J5(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var ps=typeof Object.is=="function"?Object.is:J5;function Bc(n,a){if(ps(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Vt.call(a,m)||!ps(n[m],a[m]))return!1}return!0}function Uy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function By(n,a){var o=Uy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uy(o)}}function qy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?qy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Fy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=pr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=pr(n.document)}return a}function Qm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var W5=ks&&"documentMode"in document&&11>=document.documentMode,Wl=null,Ym=null,qc=null,Xm=!1;function Hy(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xm||Wl==null||Wl!==pr(u)||(u=Wl,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),qc&&Bc(qc,u)||(qc=u,u=Fh(Ym,"onSelect"),0<u.length&&(a=new br("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Wl)))}function Ki(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Zl={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},Jm={},Gy={};ks&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Qi(n){if(Jm[n])return Jm[n];if(!Zl[n])return n;var a=Zl[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in Gy)return Jm[n]=a[o];return n}var $y=Qi("animationend"),Ky=Qi("animationiteration"),Qy=Qi("animationstart"),Z5=Qi("transitionrun"),ej=Qi("transitionstart"),tj=Qi("transitioncancel"),Yy=Qi("transitionend"),Xy=new Map,Wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wm.push("scrollEnd");function Ws(n,a){Xy.set(n,a),mr(a,[n])}var nh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Os=[],eo=0,Zm=0;function sh(){for(var n=eo,a=Zm=eo=0;a<n;){var o=Os[a];Os[a++]=null;var u=Os[a];Os[a++]=null;var m=Os[a];Os[a++]=null;var p=Os[a];if(Os[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Jy(o,m,p)}}function rh(n,a,o,u){Os[eo++]=n,Os[eo++]=a,Os[eo++]=o,Os[eo++]=u,Zm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function e0(n,a,o,u){return rh(n,a,o,u),ah(n)}function Yi(n,a){return rh(n,null,null,a),ah(n)}function Jy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-St(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function ah(n){if(50<uu)throw uu=0,cg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var to={};function nj(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(n,a,o,u){return new nj(n,a,o,u)}function t0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jr(n,a){var o=n.alternate;return o===null?(o=xs(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Wy(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function ih(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")t0(n)&&(b=1);else if(typeof n=="string")b=lT(n,o,Y.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=xs(31,o,a,m),n.elementType=A,n.lanes=p,n;case J:return Xi(o.children,m,p,a);case P:b=8,m|=24;break;case le:return n=xs(12,o,a,m|2),n.elementType=le,n.lanes=p,n;case ce:return n=xs(13,o,a,m),n.elementType=ce,n.lanes=p,n;case W:return n=xs(19,o,a,m),n.elementType=W,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:b=10;break e;case se:b=9;break e;case me:b=11;break e;case N:b=14;break e;case T:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=xs(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function Xi(n,a,o,u){return n=xs(7,n,u,a),n.lanes=o,n}function n0(n,a,o){return n=xs(6,n,null,a),n.lanes=o,n}function Zy(n){var a=xs(18,null,null,0);return a.stateNode=n,a}function s0(n,a,o){return a=xs(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var eb=new WeakMap;function Ms(n,a){if(typeof n=="object"&&n!==null){var o=eb.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Hr(a)},eb.set(n,a),a)}return{value:n,source:a,stack:Hr(a)}}var no=[],so=0,lh=null,Fc=0,Vs=[],Ps=0,La=null,Nr=1,Er="";function Wr(n,a){no[so++]=Fc,no[so++]=lh,lh=n,Fc=a}function tb(n,a,o){Vs[Ps++]=Nr,Vs[Ps++]=Er,Vs[Ps++]=La,La=n;var u=Nr;n=Er;var m=32-St(u)-1;u&=~(1<<m),o+=1;var p=32-St(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,Nr=1<<32-St(a)+m|o<<m|u,Er=p+n}else Nr=1<<p|o<<m|u,Er=n}function r0(n){n.return!==null&&(Wr(n,1),tb(n,1,0))}function a0(n){for(;n===lh;)lh=no[--so],no[so]=null,Fc=no[--so],no[so]=null;for(;n===La;)La=Vs[--Ps],Vs[Ps]=null,Er=Vs[--Ps],Vs[Ps]=null,Nr=Vs[--Ps],Vs[Ps]=null}function nb(n,a){Vs[Ps++]=Nr,Vs[Ps++]=Er,Vs[Ps++]=La,Nr=a.id,Er=a.overflow,La=n}var Dn=null,Pt=null,at=!1,za=null,Ls=!1,i0=Error(s(519));function Ua(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hc(Ms(a,n)),i0}function sb(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[Qt]=n,a[Tn]=u,o){case"dialog":We("cancel",a),We("close",a);break;case"iframe":case"object":case"embed":We("load",a);break;case"video":case"audio":for(o=0;o<hu.length;o++)We(hu[o],a);break;case"source":We("error",a);break;case"img":case"image":case"link":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"input":We("invalid",a),Ud(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":We("invalid",a);break;case"textarea":We("invalid",a),Ra(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||vv(a.textContent,o)?(u.popover!=null&&(We("beforetoggle",a),We("toggle",a)),u.onScroll!=null&&We("scroll",a),u.onScrollEnd!=null&&We("scrollend",a),u.onClick!=null&&(a.onclick=Ks),a=!0):a=!1,a||Ua(n,!0)}function rb(n){for(Dn=n.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Dn=Dn.return}}function ro(n){if(n!==Dn)return!1;if(!at)return rb(n),at=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Eg(n.type,n.memoizedProps)),o=!o),o&&Pt&&Ua(n),rb(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=Iv(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=Iv(n)}else a===27?(a=Pt,ei(n.type)?(n=Ig,Ig=null,Pt=n):Pt=a):Pt=Dn?Us(n.stateNode.nextSibling):null;return!0}function Ji(){Pt=Dn=null,at=!1}function l0(){var n=za;return n!==null&&(os===null?os=n:os.push.apply(os,n),za=null),n}function Hc(n){za===null?za=[n]:za.push(n)}var o0=D(null),Wi=null,Zr=null;function Ba(n,a,o){L(o0,a._currentValue),a._currentValue=o}function ea(n){n._currentValue=o0.current,B(o0)}function c0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function u0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var j=p;p=m;for(var M=0;M<a.length;M++)if(j.context===a[M]){p.lanes|=o,j=p.alternate,j!==null&&(j.lanes|=o),c0(p.return,o,n),u||(b=null);break e}p=j.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),c0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function ao(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var j=m.type;ps(m.pendingProps.value,b.value)||(n!==null?n.push(j):n=[j])}}else if(m===Re.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(xu):n=[xu])}m=m.return}n!==null&&u0(a,n,o,u),a.flags|=262144}function oh(n){for(n=n.firstContext;n!==null;){if(!ps(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zi(n){Wi=n,Zr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function On(n){return ab(Wi,n)}function ch(n,a){return Wi===null&&Zi(n),ab(n,a)}function ab(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Zr===null){if(n===null)throw Error(s(308));Zr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Zr=Zr.next=a;return o}var sj=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},rj=r.unstable_scheduleCallback,aj=r.unstable_NormalPriority,dn={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function d0(){return{controller:new sj,data:new Map,refCount:0}}function Gc(n){n.refCount--,n.refCount===0&&rj(aj,function(){n.controller.abort()})}var $c=null,h0=0,io=0,lo=null;function ij(n,a){if($c===null){var o=$c=[];h0=0,io=gg(),lo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return h0++,a.then(ib,ib),a}function ib(){if(--h0===0&&$c!==null){lo!==null&&(lo.status="fulfilled");var n=$c;$c=null,io=0,lo=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function lj(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var lb=G.S;G.S=function(n,a){H1=Zt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ij(n,a),lb!==null&&lb(n,a)};var el=D(null);function f0(){var n=el.current;return n!==null?n:Dt.pooledCache}function uh(n,a){a===null?L(el,el.current):L(el,a.pool)}function ob(){var n=f0();return n===null?null:{parent:dn._currentValue,pool:n}}var oo=Error(s(460)),m0=Error(s(474)),dh=Error(s(542)),hh={then:function(){}};function cb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ub(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Ks,Ks),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,hb(n),n;default:if(typeof a.status=="string")a.then(Ks,Ks);else{if(n=Dt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,hb(n),n}throw nl=a,oo}}function tl(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(nl=o,oo):o}}var nl=null;function db(){if(nl===null)throw Error(s(459));var n=nl;return nl=null,n}function hb(n){if(n===oo||n===dh)throw Error(s(483))}var co=null,Kc=0;function fh(n){var a=Kc;return Kc+=1,co===null&&(co=[]),ub(co,n,a)}function Qc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function mh(n,a){throw a.$$typeof===E?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function fb(n){function a(q,U){if(n){var K=q.deletions;K===null?(q.deletions=[U],q.flags|=16):K.push(U)}}function o(q,U){if(!n)return null;for(;U!==null;)a(q,U),U=U.sibling;return null}function u(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function m(q,U){return q=Jr(q,U),q.index=0,q.sibling=null,q}function p(q,U,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<U?(q.flags|=67108866,U):K):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function j(q,U,K,ie){return U===null||U.tag!==6?(U=n0(K,q.mode,ie),U.return=q,U):(U=m(U,K),U.return=q,U)}function M(q,U,K,ie){var Oe=K.type;return Oe===J?ae(q,U,K.props.children,ie,K.key):U!==null&&(U.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&tl(Oe)===U.type)?(U=m(U,K.props),Qc(U,K),U.return=q,U):(U=ih(K.type,K.key,K.props,null,q.mode,ie),Qc(U,K),U.return=q,U)}function Q(q,U,K,ie){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=s0(K,q.mode,ie),U.return=q,U):(U=m(U,K.children||[]),U.return=q,U)}function ae(q,U,K,ie,Oe){return U===null||U.tag!==7?(U=Xi(K,q.mode,ie,Oe),U.return=q,U):(U=m(U,K),U.return=q,U)}function de(q,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=n0(""+U,q.mode,K),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return K=ih(U.type,U.key,U.props,null,q.mode,K),Qc(K,U),K.return=q,K;case O:return U=s0(U,q.mode,K),U.return=q,U;case T:return U=tl(U),de(q,U,K)}if(Ie(U)||z(U))return U=Xi(U,q.mode,K,null),U.return=q,U;if(typeof U.then=="function")return de(q,fh(U),K);if(U.$$typeof===te)return de(q,ch(q,U),K);mh(q,U)}return null}function X(q,U,K,ie){var Oe=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Oe!==null?null:j(q,U,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return K.key===Oe?M(q,U,K,ie):null;case O:return K.key===Oe?Q(q,U,K,ie):null;case T:return K=tl(K),X(q,U,K,ie)}if(Ie(K)||z(K))return Oe!==null?null:ae(q,U,K,ie,null);if(typeof K.then=="function")return X(q,U,fh(K),ie);if(K.$$typeof===te)return X(q,U,ch(q,K),ie);mh(q,K)}return null}function ne(q,U,K,ie,Oe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(K)||null,j(U,q,""+ie,Oe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case R:return q=q.get(ie.key===null?K:ie.key)||null,M(U,q,ie,Oe);case O:return q=q.get(ie.key===null?K:ie.key)||null,Q(U,q,ie,Oe);case T:return ie=tl(ie),ne(q,U,K,ie,Oe)}if(Ie(ie)||z(ie))return q=q.get(K)||null,ae(U,q,ie,Oe,null);if(typeof ie.then=="function")return ne(q,U,K,fh(ie),Oe);if(ie.$$typeof===te)return ne(q,U,K,ch(U,ie),Oe);mh(U,ie)}return null}function Te(q,U,K,ie){for(var Oe=null,ht=null,ke=U,Ke=U=0,et=null;ke!==null&&Ke<K.length;Ke++){ke.index>Ke?(et=ke,ke=null):et=ke.sibling;var ft=X(q,ke,K[Ke],ie);if(ft===null){ke===null&&(ke=et);break}n&&ke&&ft.alternate===null&&a(q,ke),U=p(ft,U,Ke),ht===null?Oe=ft:ht.sibling=ft,ht=ft,ke=et}if(Ke===K.length)return o(q,ke),at&&Wr(q,Ke),Oe;if(ke===null){for(;Ke<K.length;Ke++)ke=de(q,K[Ke],ie),ke!==null&&(U=p(ke,U,Ke),ht===null?Oe=ke:ht.sibling=ke,ht=ke);return at&&Wr(q,Ke),Oe}for(ke=u(ke);Ke<K.length;Ke++)et=ne(ke,q,Ke,K[Ke],ie),et!==null&&(n&&et.alternate!==null&&ke.delete(et.key===null?Ke:et.key),U=p(et,U,Ke),ht===null?Oe=et:ht.sibling=et,ht=et);return n&&ke.forEach(function(ai){return a(q,ai)}),at&&Wr(q,Ke),Oe}function Pe(q,U,K,ie){if(K==null)throw Error(s(151));for(var Oe=null,ht=null,ke=U,Ke=U=0,et=null,ft=K.next();ke!==null&&!ft.done;Ke++,ft=K.next()){ke.index>Ke?(et=ke,ke=null):et=ke.sibling;var ai=X(q,ke,ft.value,ie);if(ai===null){ke===null&&(ke=et);break}n&&ke&&ai.alternate===null&&a(q,ke),U=p(ai,U,Ke),ht===null?Oe=ai:ht.sibling=ai,ht=ai,ke=et}if(ft.done)return o(q,ke),at&&Wr(q,Ke),Oe;if(ke===null){for(;!ft.done;Ke++,ft=K.next())ft=de(q,ft.value,ie),ft!==null&&(U=p(ft,U,Ke),ht===null?Oe=ft:ht.sibling=ft,ht=ft);return at&&Wr(q,Ke),Oe}for(ke=u(ke);!ft.done;Ke++,ft=K.next())ft=ne(ke,q,Ke,ft.value,ie),ft!==null&&(n&&ft.alternate!==null&&ke.delete(ft.key===null?Ke:ft.key),U=p(ft,U,Ke),ht===null?Oe=ft:ht.sibling=ft,ht=ft);return n&&ke.forEach(function(yT){return a(q,yT)}),at&&Wr(q,Ke),Oe}function Rt(q,U,K,ie){if(typeof K=="object"&&K!==null&&K.type===J&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case R:e:{for(var Oe=K.key;U!==null;){if(U.key===Oe){if(Oe=K.type,Oe===J){if(U.tag===7){o(q,U.sibling),ie=m(U,K.props.children),ie.return=q,q=ie;break e}}else if(U.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&tl(Oe)===U.type){o(q,U.sibling),ie=m(U,K.props),Qc(ie,K),ie.return=q,q=ie;break e}o(q,U);break}else a(q,U);U=U.sibling}K.type===J?(ie=Xi(K.props.children,q.mode,ie,K.key),ie.return=q,q=ie):(ie=ih(K.type,K.key,K.props,null,q.mode,ie),Qc(ie,K),ie.return=q,q=ie)}return b(q);case O:e:{for(Oe=K.key;U!==null;){if(U.key===Oe)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){o(q,U.sibling),ie=m(U,K.children||[]),ie.return=q,q=ie;break e}else{o(q,U);break}else a(q,U);U=U.sibling}ie=s0(K,q.mode,ie),ie.return=q,q=ie}return b(q);case T:return K=tl(K),Rt(q,U,K,ie)}if(Ie(K))return Te(q,U,K,ie);if(z(K)){if(Oe=z(K),typeof Oe!="function")throw Error(s(150));return K=Oe.call(K),Pe(q,U,K,ie)}if(typeof K.then=="function")return Rt(q,U,fh(K),ie);if(K.$$typeof===te)return Rt(q,U,ch(q,K),ie);mh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(o(q,U.sibling),ie=m(U,K),ie.return=q,q=ie):(o(q,U),ie=n0(K,q.mode,ie),ie.return=q,q=ie),b(q)):o(q,U)}return function(q,U,K,ie){try{Kc=0;var Oe=Rt(q,U,K,ie);return co=null,Oe}catch(ke){if(ke===oo||ke===dh)throw ke;var ht=xs(29,ke,null,q.mode);return ht.lanes=ie,ht.return=q,ht}finally{}}}var sl=fb(!0),mb=fb(!1),qa=!1;function g0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ha(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=ah(n),Jy(n,null,o),a}return rh(n,u,a,o),ah(n)}function Yc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Ve(n,o)}}function x0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var y0=!1;function Xc(){if(y0){var n=lo;if(n!==null)throw n}}function Jc(n,a,o,u){y0=!1;var m=n.updateQueue;qa=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var M=j,Q=M.next;M.next=null,b===null?p=Q:b.next=Q,b=M;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,j=ae.lastBaseUpdate,j!==b&&(j===null?ae.firstBaseUpdate=Q:j.next=Q,ae.lastBaseUpdate=M))}if(p!==null){var de=m.baseState;b=0,ae=Q=M=null,j=p;do{var X=j.lane&-536870913,ne=X!==j.lane;if(ne?(Ze&X)===X:(u&X)===X){X!==0&&X===io&&(y0=!0),ae!==null&&(ae=ae.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Te=n,Pe=j;X=a;var Rt=o;switch(Pe.tag){case 1:if(Te=Pe.payload,typeof Te=="function"){de=Te.call(Rt,de,X);break e}de=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Pe.payload,X=typeof Te=="function"?Te.call(Rt,de,X):Te,X==null)break e;de=v({},de,X);break e;case 2:qa=!0}}X=j.callback,X!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[X]:ne.push(X))}else ne={lane:X,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ae===null?(Q=ae=ne,M=de):ae=ae.next=ne,b|=X;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;ne=j,j=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ae===null&&(M=de),m.baseState=M,m.firstBaseUpdate=Q,m.lastBaseUpdate=ae,p===null&&(m.shared.lanes=0),Ya|=b,n.lanes=b,n.memoizedState=de}}function gb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function pb(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)gb(o[n],a)}var uo=D(null),gh=D(0);function xb(n,a){n=ca,L(gh,n),L(uo,a),ca=n|a.baseLanes}function b0(){L(gh,ca),L(uo,uo.current)}function v0(){ca=gh.current,B(uo),B(gh)}var ys=D(null),zs=null;function Ga(n){var a=n.alternate;L(tn,tn.current&1),L(ys,n),zs===null&&(a===null||uo.current!==null||a.memoizedState!==null)&&(zs=n)}function w0(n){L(tn,tn.current),L(ys,n),zs===null&&(zs=n)}function yb(n){n.tag===22?(L(tn,tn.current),L(ys,n),zs===null&&(zs=n)):$a()}function $a(){L(tn,tn.current),L(ys,ys.current)}function bs(n){B(ys),zs===n&&(zs=null),B(tn)}var tn=D(0);function ph(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Sg(o)||Ag(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ta=0,$e=null,It=null,hn=null,xh=!1,ho=!1,rl=!1,yh=0,Wc=0,fo=null,oj=0;function Yt(){throw Error(s(321))}function _0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!ps(n[o],a[o]))return!1;return!0}function N0(n,a,o,u,m,p){return ta=p,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=n===null||n.memoizedState===null?t1:L0,rl=!1,p=o(u,m),rl=!1,ho&&(p=vb(a,o,u,m)),bb(n),p}function bb(n){G.H=tu;var a=It!==null&&It.next!==null;if(ta=0,hn=It=$e=null,xh=!1,Wc=0,fo=null,a)throw Error(s(300));n===null||fn||(n=n.dependencies,n!==null&&oh(n)&&(fn=!0))}function vb(n,a,o,u){$e=n;var m=0;do{if(ho&&(fo=null),Wc=0,ho=!1,25<=m)throw Error(s(301));if(m+=1,hn=It=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}G.H=n1,p=a(o,u)}while(ho);return p}function cj(){var n=G.H,a=n.useState()[0];return a=typeof a.then=="function"?Zc(a):a,n=n.useState()[0],(It!==null?It.memoizedState:null)!==n&&($e.flags|=1024),a}function E0(){var n=yh!==0;return yh=0,n}function j0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function T0(n){if(xh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}xh=!1}ta=0,hn=It=$e=null,ho=!1,Wc=yh=0,fo=null}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?$e.memoizedState=hn=n:hn=hn.next=n,hn}function nn(){if(It===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var a=hn===null?$e.memoizedState:hn.next;if(a!==null)hn=a,It=n;else{if(n===null)throw $e.alternate===null?Error(s(467)):Error(s(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},hn===null?$e.memoizedState=hn=n:hn=hn.next=n}return hn}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(n){var a=Wc;return Wc+=1,fo===null&&(fo=[]),n=ub(fo,n,a),a=$e,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?t1:L0),n}function vh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zc(n);if(n.$$typeof===te)return On(n)}throw Error(s(438,String(n)))}function S0(n){var a=null,o=$e.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=bh(),$e.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=C;return a.index++,o}function na(n,a){return typeof a=="function"?a(n):a}function wh(n){var a=nn();return A0(a,It,n)}function A0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var j=b=null,M=null,Q=a,ae=!1;do{var de=Q.lane&-536870913;if(de!==Q.lane?(Ze&de)===de:(ta&de)===de){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),de===io&&(ae=!0);else if((ta&X)===X){Q=Q.next,X===io&&(ae=!0);continue}else de={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(j=M=de,b=p):M=M.next=de,$e.lanes|=X,Ya|=X;de=Q.action,rl&&o(p,de),p=Q.hasEagerState?Q.eagerState:o(p,de)}else X={lane:de,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(j=M=X,b=p):M=M.next=X,$e.lanes|=de,Ya|=de;Q=Q.next}while(Q!==null&&Q!==a);if(M===null?b=p:M.next=j,!ps(p,n.memoizedState)&&(fn=!0,ae&&(o=lo,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=M,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function I0(n){var a=nn(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);ps(p,a.memoizedState)||(fn=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function wb(n,a,o){var u=$e,m=nn(),p=at;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!ps((It||m).memoizedState,o);if(b&&(m.memoizedState=o,fn=!0),m=m.queue,k0(Eb.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||hn!==null&&hn.memoizedState.tag&1){if(u.flags|=2048,mo(9,{destroy:void 0},Nb.bind(null,u,m,o,a),null),Dt===null)throw Error(s(349));p||(ta&127)!==0||_b(u,a,o)}return o}function _b(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=$e.updateQueue,a===null?(a=bh(),$e.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function Nb(n,a,o,u){a.value=o,a.getSnapshot=u,jb(a)&&Tb(n)}function Eb(n,a,o){return o(function(){jb(a)&&Tb(n)})}function jb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!ps(n,o)}catch{return!0}}function Tb(n){var a=Yi(n,2);a!==null&&cs(a,n,2)}function C0(n){var a=Yn();if(typeof n=="function"){var o=n;if(n=o(),rl){ln(!0);try{o()}finally{ln(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:n},a}function Sb(n,a,o,u){return n.baseState=o,A0(n,It,typeof u=="function"?u:na)}function uj(n,a,o,u,m){if(Eh(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};G.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,Ab(a,p)):(p.next=o.next,a.pending=o.next=p)}}function Ab(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=G.T,b={};G.T=b;try{var j=o(m,u),M=G.S;M!==null&&M(b,j),Ib(n,a,j)}catch(Q){R0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),G.T=p}}else try{p=o(m,u),Ib(n,a,p)}catch(Q){R0(n,a,Q)}}function Ib(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Cb(n,a,u)},function(u){return R0(n,a,u)}):Cb(n,a,o)}function Cb(n,a,o){a.status="fulfilled",a.value=o,Rb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Ab(n,o)))}function R0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Rb(a),a=a.next;while(a!==u)}n.action=null}function Rb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function kb(n,a){return a}function Db(n,a){if(at){var o=Dt.formState;if(o!==null){e:{var u=$e;if(at){if(Pt){t:{for(var m=Pt,p=Ls;m.nodeType!==8;){if(!p){m=null;break t}if(m=Us(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Pt=Us(m.nextSibling),u=m.data==="F!";break e}}Ua(u)}u=!1}u&&(a=o[0])}}return o=Yn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kb,lastRenderedState:a},o.queue=u,o=Wb.bind(null,$e,u),u.dispatch=o,u=C0(!1),p=P0.bind(null,$e,!1,u.queue),u=Yn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=uj.bind(null,$e,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Ob(n){var a=nn();return Mb(a,It,n)}function Mb(n,a,o){if(a=A0(n,a,kb)[0],n=wh(na)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Zc(a)}catch(b){throw b===oo?dh:b}else u=a;a=nn();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&($e.flags|=2048,mo(9,{destroy:void 0},dj.bind(null,m,o),null)),[u,p,n]}function dj(n,a){n.action=a}function Vb(n){var a=nn(),o=It;if(o!==null)return Mb(a,o,n);nn(),a=a.memoizedState,o=nn();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function mo(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=$e.updateQueue,a===null&&(a=bh(),$e.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Pb(){return nn().memoizedState}function _h(n,a,o,u){var m=Yn();$e.flags|=n,m.memoizedState=mo(1|a,{destroy:void 0},o,u===void 0?null:u)}function Nh(n,a,o,u){var m=nn();u=u===void 0?null:u;var p=m.memoizedState.inst;It!==null&&u!==null&&_0(u,It.memoizedState.deps)?m.memoizedState=mo(a,p,o,u):($e.flags|=n,m.memoizedState=mo(1|a,p,o,u))}function Lb(n,a){_h(8390656,8,n,a)}function k0(n,a){Nh(2048,8,n,a)}function hj(n){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=bh(),$e.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function zb(n){var a=nn().memoizedState;return hj({ref:a,nextImpl:n}),function(){if((bt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Ub(n,a){return Nh(4,2,n,a)}function Bb(n,a){return Nh(4,4,n,a)}function qb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Fb(n,a,o){o=o!=null?o.concat([n]):null,Nh(4,4,qb.bind(null,a,n),o)}function D0(){}function Hb(n,a){var o=nn();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&_0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function Gb(n,a){var o=nn();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&_0(a,u[1]))return u[0];if(u=n(),rl){ln(!0);try{n()}finally{ln(!1)}}return o.memoizedState=[u,a],u}function O0(n,a,o){return o===void 0||(ta&1073741824)!==0&&(Ze&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=$1(),$e.lanes|=n,Ya|=n,o)}function $b(n,a,o,u){return ps(o,a)?o:uo.current!==null?(n=O0(n,o,u),ps(n,a)||(fn=!0),n):(ta&42)===0||(ta&1073741824)!==0&&(Ze&261930)===0?(fn=!0,n.memoizedState=o):(n=$1(),$e.lanes|=n,Ya|=n,a)}function Kb(n,a,o,u,m){var p=he.p;he.p=p!==0&&8>p?p:8;var b=G.T,j={};G.T=j,P0(n,!1,a,o);try{var M=m(),Q=G.S;if(Q!==null&&Q(j,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ae=lj(M,u);eu(n,a,ae,_s(n))}else eu(n,a,u,_s(n))}catch(de){eu(n,a,{then:function(){},status:"rejected",reason:de},_s())}finally{he.p=p,b!==null&&j.types!==null&&(b.types=j.types),G.T=b}}function fj(){}function M0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=Qb(n).queue;Kb(n,m,a,ee,o===null?fj:function(){return Yb(n),o(u)})}function Qb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:ee},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Yb(n){var a=Qb(n);a.next===null&&(a=n.alternate.memoizedState),eu(n,a.next.queue,{},_s())}function V0(){return On(xu)}function Xb(){return nn().memoizedState}function Jb(){return nn().memoizedState}function mj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=_s();n=Fa(o);var u=Ha(a,n,o);u!==null&&(cs(u,a,o),Yc(u,a,o)),a={cache:d0()},n.payload=a;return}a=a.return}}function gj(n,a,o){var u=_s();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(n)?Zb(a,o):(o=e0(n,a,o,u),o!==null&&(cs(o,n,u),e1(o,a,u)))}function Wb(n,a,o){var u=_s();eu(n,a,o,u)}function eu(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(n))Zb(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,j=p(b,o);if(m.hasEagerState=!0,m.eagerState=j,ps(j,b))return rh(n,a,m,0),Dt===null&&sh(),!1}catch{}finally{}if(o=e0(n,a,m,u),o!==null)return cs(o,n,u),e1(o,a,u),!0}return!1}function P0(n,a,o,u){if(u={lane:2,revertLane:gg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Eh(n)){if(a)throw Error(s(479))}else a=e0(n,o,u,2),a!==null&&cs(a,n,2)}function Eh(n){var a=n.alternate;return n===$e||a!==null&&a===$e}function Zb(n,a){ho=xh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function e1(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Ve(n,o)}}var tu={readContext:On,use:vh,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};tu.useEffectEvent=Yt;var t1={readContext:On,use:vh,useCallback:function(n,a){return Yn().memoizedState=[n,a===void 0?null:a],n},useContext:On,useEffect:Lb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,_h(4194308,4,qb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return _h(4194308,4,n,a)},useInsertionEffect:function(n,a){_h(4,2,n,a)},useMemo:function(n,a){var o=Yn();a=a===void 0?null:a;var u=n();if(rl){ln(!0);try{n()}finally{ln(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Yn();if(o!==void 0){var m=o(a);if(rl){ln(!0);try{o(a)}finally{ln(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=gj.bind(null,$e,n),[u.memoizedState,n]},useRef:function(n){var a=Yn();return n={current:n},a.memoizedState=n},useState:function(n){n=C0(n);var a=n.queue,o=Wb.bind(null,$e,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:D0,useDeferredValue:function(n,a){var o=Yn();return O0(o,n,a)},useTransition:function(){var n=C0(!1);return n=Kb.bind(null,$e,n.queue,!0,!1),Yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=$e,m=Yn();if(at){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),Dt===null)throw Error(s(349));(Ze&127)!==0||_b(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,Lb(Eb.bind(null,u,p,n),[n]),u.flags|=2048,mo(9,{destroy:void 0},Nb.bind(null,u,p,o,a),null),o},useId:function(){var n=Yn(),a=Dt.identifierPrefix;if(at){var o=Er,u=Nr;o=(u&~(1<<32-St(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=yh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=oj++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:V0,useFormState:Db,useActionState:Db,useOptimistic:function(n){var a=Yn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=P0.bind(null,$e,!0,o),o.dispatch=a,[n,a]},useMemoCache:S0,useCacheRefresh:function(){return Yn().memoizedState=mj.bind(null,$e)},useEffectEvent:function(n){var a=Yn(),o={impl:n};return a.memoizedState=o,function(){if((bt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},L0={readContext:On,use:vh,useCallback:Hb,useContext:On,useEffect:k0,useImperativeHandle:Fb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:Gb,useReducer:wh,useRef:Pb,useState:function(){return wh(na)},useDebugValue:D0,useDeferredValue:function(n,a){var o=nn();return $b(o,It.memoizedState,n,a)},useTransition:function(){var n=wh(na)[0],a=nn().memoizedState;return[typeof n=="boolean"?n:Zc(n),a]},useSyncExternalStore:wb,useId:Xb,useHostTransitionStatus:V0,useFormState:Ob,useActionState:Ob,useOptimistic:function(n,a){var o=nn();return Sb(o,It,n,a)},useMemoCache:S0,useCacheRefresh:Jb};L0.useEffectEvent=zb;var n1={readContext:On,use:vh,useCallback:Hb,useContext:On,useEffect:k0,useImperativeHandle:Fb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:Gb,useReducer:I0,useRef:Pb,useState:function(){return I0(na)},useDebugValue:D0,useDeferredValue:function(n,a){var o=nn();return It===null?O0(o,n,a):$b(o,It.memoizedState,n,a)},useTransition:function(){var n=I0(na)[0],a=nn().memoizedState;return[typeof n=="boolean"?n:Zc(n),a]},useSyncExternalStore:wb,useId:Xb,useHostTransitionStatus:V0,useFormState:Vb,useActionState:Vb,useOptimistic:function(n,a){var o=nn();return It!==null?Sb(o,It,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:S0,useCacheRefresh:Jb};n1.useEffectEvent=zb;function z0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var U0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=_s(),m=Fa(u);m.payload=a,o!=null&&(m.callback=o),a=Ha(n,m,u),a!==null&&(cs(a,n,u),Yc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=_s(),m=Fa(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ha(n,m,u),a!==null&&(cs(a,n,u),Yc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=_s(),u=Fa(o);u.tag=2,a!=null&&(u.callback=a),a=Ha(n,u,o),a!==null&&(cs(a,n,o),Yc(a,n,o))}};function s1(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Bc(o,u)||!Bc(m,p):!0}function r1(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&U0.enqueueReplaceState(a,a.state,null)}function al(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=v({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function a1(n){nh(n)}function i1(n){console.error(n)}function l1(n){nh(n)}function jh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function o1(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function B0(n,a,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){jh(n,a)},o}function c1(n){return n=Fa(n),n.tag=3,n}function u1(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){o1(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){o1(a,o,u),typeof m!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function pj(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&ao(a,o,m,!0),o=ys.current,o!==null){switch(o.tag){case 31:case 13:return zs===null?Ph():o.alternate===null&&Xt===0&&(Xt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===hh?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),hg(n,u,m)),!1;case 22:return o.flags|=65536,u===hh?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),hg(n,u,m)),!1}throw Error(s(435,o.tag))}return hg(n,u,m),Ph(),!1}if(at)return a=ys.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==i0&&(n=Error(s(422),{cause:u}),Hc(Ms(n,o)))):(u!==i0&&(a=Error(s(423),{cause:u}),Hc(Ms(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Ms(u,o),m=B0(n.stateNode,u,m),x0(n,m),Xt!==4&&(Xt=2)),!1;var p=Error(s(520),{cause:u});if(p=Ms(p,o),cu===null?cu=[p]:cu.push(p),Xt!==4&&(Xt=2),a===null)return!0;u=Ms(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=B0(o.stateNode,u,n),x0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Xa===null||!Xa.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=c1(m),u1(m,n,o,u),x0(o,m),!1}o=o.return}while(o!==null);return!1}var q0=Error(s(461)),fn=!1;function Mn(n,a,o,u){a.child=n===null?mb(a,null,o,u):sl(a,n.child,o,u)}function d1(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var j in u)j!=="ref"&&(b[j]=u[j])}else b=u;return Zi(a),u=N0(n,a,o,b,p,m),j=E0(),n!==null&&!fn?(j0(n,a,m),sa(n,a,m)):(at&&j&&r0(a),a.flags|=1,Mn(n,a,u,m),a.child)}function h1(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!t0(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,f1(n,a,p,u,m)):(n=ih(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!X0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:Bc,o(b,u)&&n.ref===a.ref)return sa(n,a,m)}return a.flags|=1,n=Jr(p,u),n.ref=a.ref,n.return=a,a.child=n}function f1(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Bc(p,u)&&n.ref===a.ref)if(fn=!1,a.pendingProps=u=p,X0(n,m))(n.flags&131072)!==0&&(fn=!0);else return a.lanes=n.lanes,sa(n,a,m)}return F0(n,a,o,u,m)}function m1(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return g1(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&uh(a,p!==null?p.cachePool:null),p!==null?xb(a,p):b0(),yb(a);else return u=a.lanes=536870912,g1(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(uh(a,p.cachePool),xb(a,p),$a(),a.memoizedState=null):(n!==null&&uh(a,null),b0(),$a());return Mn(n,a,m,o),a.child}function nu(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function g1(n,a,o,u,m){var p=f0();return p=p===null?null:{parent:dn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&uh(a,null),b0(),yb(a),n!==null&&ao(n,a,u,!0),a.childLanes=m,null}function Th(n,a){return a=Ah({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function p1(n,a,o){return sl(a,n.child,null,o),n=Th(a,a.pendingProps),n.flags|=2,bs(a),a.memoizedState=null,n}function xj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(at){if(u.mode==="hidden")return n=Th(a,u),a.lanes=536870912,nu(null,n);if(w0(a),(n=Pt)?(n=Av(n,Ls),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:La!==null?{id:Nr,overflow:Er}:null,retryLane:536870912,hydrationErrors:null},o=Zy(n),o.return=a,a.child=o,Dn=a,Pt=null)):n=null,n===null)throw Ua(a);return a.lanes=536870912,null}return Th(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(w0(a),m)if(a.flags&256)a.flags&=-257,a=p1(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(fn||ao(n,a,o,!1),m=(o&n.childLanes)!==0,fn||m){if(u=Dt,u!==null&&(b=Be(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Yi(n,b),cs(u,n,b),q0;Ph(),a=p1(n,a,o)}else n=p.treeContext,Pt=Us(b.nextSibling),Dn=a,at=!0,za=null,Ls=!1,n!==null&&nb(a,n),a=Th(a,u),a.flags|=4096;return a}return n=Jr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Sh(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function F0(n,a,o,u,m){return Zi(a),o=N0(n,a,o,u,void 0,m),u=E0(),n!==null&&!fn?(j0(n,a,m),sa(n,a,m)):(at&&u&&r0(a),a.flags|=1,Mn(n,a,o,m),a.child)}function x1(n,a,o,u,m,p){return Zi(a),a.updateQueue=null,o=vb(a,u,o,m),bb(n),u=E0(),n!==null&&!fn?(j0(n,a,p),sa(n,a,p)):(at&&u&&r0(a),a.flags|=1,Mn(n,a,o,p),a.child)}function y1(n,a,o,u,m){if(Zi(a),a.stateNode===null){var p=to,b=o.contextType;typeof b=="object"&&b!==null&&(p=On(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=U0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},g0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?On(b):to,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(z0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&U0.enqueueReplaceState(p,p.state,null),Jc(a,u,p,m),Xc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var j=a.memoizedProps,M=al(o,j);p.props=M;var Q=p.context,ae=o.contextType;b=to,typeof ae=="object"&&ae!==null&&(b=On(ae));var de=o.getDerivedStateFromProps;ae=typeof de=="function"||typeof p.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,ae||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j||Q!==b)&&r1(a,p,u,b),qa=!1;var X=a.memoizedState;p.state=X,Jc(a,u,p,m),Xc(),Q=a.memoizedState,j||X!==Q||qa?(typeof de=="function"&&(z0(a,o,de,u),Q=a.memoizedState),(M=qa||s1(a,o,M,u,X,Q,b))?(ae||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=M):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,p0(n,a),b=a.memoizedProps,ae=al(o,b),p.props=ae,de=a.pendingProps,X=p.context,Q=o.contextType,M=to,typeof Q=="object"&&Q!==null&&(M=On(Q)),j=o.getDerivedStateFromProps,(Q=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==de||X!==M)&&r1(a,p,u,M),qa=!1,X=a.memoizedState,p.state=X,Jc(a,u,p,m),Xc();var ne=a.memoizedState;b!==de||X!==ne||qa||n!==null&&n.dependencies!==null&&oh(n.dependencies)?(typeof j=="function"&&(z0(a,o,j,u),ne=a.memoizedState),(ae=qa||s1(a,o,ae,u,X,ne,M)||n!==null&&n.dependencies!==null&&oh(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ne,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ne,M)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ne),p.props=u,p.state=ne,p.context=M,u=ae):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,Sh(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=sl(a,n.child,null,m),a.child=sl(a,null,o,m)):Mn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=sa(n,a,m),n}function b1(n,a,o,u){return Ji(),a.flags|=256,Mn(n,a,o,u),a.child}var H0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G0(n){return{baseLanes:n,cachePool:ob()}}function $0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=ws),n}function v1(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(tn.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(at){if(m?Ga(a):$a(),(n=Pt)?(n=Av(n,Ls),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:La!==null?{id:Nr,overflow:Er}:null,retryLane:536870912,hydrationErrors:null},o=Zy(n),o.return=a,a.child=o,Dn=a,Pt=null)):n=null,n===null)throw Ua(a);return Ag(n)?a.lanes=32:a.lanes=536870912,null}var j=u.children;return u=u.fallback,m?($a(),m=a.mode,j=Ah({mode:"hidden",children:j},m),u=Xi(u,m,o,null),j.return=a,u.return=a,j.sibling=u,a.child=j,u=a.child,u.memoizedState=G0(o),u.childLanes=$0(n,b,o),a.memoizedState=H0,nu(null,u)):(Ga(a),K0(a,j))}var M=n.memoizedState;if(M!==null&&(j=M.dehydrated,j!==null)){if(p)a.flags&256?(Ga(a),a.flags&=-257,a=Q0(n,a,o)):a.memoizedState!==null?($a(),a.child=n.child,a.flags|=128,a=null):($a(),j=u.fallback,m=a.mode,u=Ah({mode:"visible",children:u.children},m),j=Xi(j,m,o,null),j.flags|=2,u.return=a,j.return=a,u.sibling=j,a.child=u,sl(a,n.child,null,o),u=a.child,u.memoizedState=G0(o),u.childLanes=$0(n,b,o),a.memoizedState=H0,a=nu(null,u));else if(Ga(a),Ag(j)){if(b=j.nextSibling&&j.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,Hc({value:u,source:null,stack:null}),a=Q0(n,a,o)}else if(fn||ao(n,a,o,!1),b=(o&n.childLanes)!==0,fn||b){if(b=Dt,b!==null&&(u=Be(b,o),u!==0&&u!==M.retryLane))throw M.retryLane=u,Yi(n,u),cs(b,n,u),q0;Sg(j)||Ph(),a=Q0(n,a,o)}else Sg(j)?(a.flags|=192,a.child=n.child,a=null):(n=M.treeContext,Pt=Us(j.nextSibling),Dn=a,at=!0,za=null,Ls=!1,n!==null&&nb(a,n),a=K0(a,u.children),a.flags|=4096);return a}return m?($a(),j=u.fallback,m=a.mode,M=n.child,Q=M.sibling,u=Jr(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,Q!==null?j=Jr(Q,j):(j=Xi(j,m,o,null),j.flags|=2),j.return=a,u.return=a,u.sibling=j,a.child=u,nu(null,u),u=a.child,j=n.child.memoizedState,j===null?j=G0(o):(m=j.cachePool,m!==null?(M=dn._currentValue,m=m.parent!==M?{parent:M,pool:M}:m):m=ob(),j={baseLanes:j.baseLanes|o,cachePool:m}),u.memoizedState=j,u.childLanes=$0(n,b,o),a.memoizedState=H0,nu(n.child,u)):(Ga(a),o=n.child,n=o.sibling,o=Jr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function K0(n,a){return a=Ah({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Ah(n,a){return n=xs(22,n,null,a),n.lanes=0,n}function Q0(n,a,o){return sl(a,n.child,null,o),n=K0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function w1(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),c0(n.return,a,o)}function Y0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function _1(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=tn.current,j=(b&2)!==0;if(j?(b=b&1|2,a.flags|=128):b&=1,L(tn,b),Mn(n,a,u,o),u=at?Fc:0,!j&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&w1(n,o,a);else if(n.tag===19)w1(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&ph(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),Y0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&ph(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Y0(a,!0,o,null,p,u);break;case"together":Y0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function sa(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Ya|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(ao(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Jr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Jr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function X0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&oh(n)))}function yj(n,a,o){switch(a.tag){case 3:Xe(a,a.stateNode.containerInfo),Ba(a,dn,n.memoizedState.cache),Ji();break;case 27:case 5:Ye(a);break;case 4:Xe(a,a.stateNode.containerInfo);break;case 10:Ba(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,w0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ga(a),a.flags|=128,null):(o&a.child.childLanes)!==0?v1(n,a,o):(Ga(a),n=sa(n,a,o),n!==null?n.sibling:null);Ga(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(ao(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return _1(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),L(tn,tn.current),u)break;return null;case 22:return a.lanes=0,m1(n,a,o,a.pendingProps);case 24:Ba(a,dn,n.memoizedState.cache)}return sa(n,a,o)}function N1(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)fn=!0;else{if(!X0(n,o)&&(a.flags&128)===0)return fn=!1,yj(n,a,o);fn=(n.flags&131072)!==0}else fn=!1,at&&(a.flags&1048576)!==0&&tb(a,Fc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=tl(a.elementType),a.type=n,typeof n=="function")t0(n)?(u=al(n,u),a.tag=1,a=y1(null,a,n,u,o)):(a.tag=0,a=F0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===me){a.tag=11,a=d1(null,a,n,u,o);break e}else if(m===N){a.tag=14,a=h1(null,a,n,u,o);break e}}throw a=ge(n)||n,Error(s(306,a,""))}}return a;case 0:return F0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=al(u,a.pendingProps),y1(n,a,u,m,o);case 3:e:{if(Xe(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,p0(n,a),Jc(a,u,null,o);var b=a.memoizedState;if(u=b.cache,Ba(a,dn,u),u!==p.cache&&u0(a,[dn],o,!0),Xc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=b1(n,a,u,o);break e}else if(u!==m){m=Ms(Error(s(424)),a),Hc(m),a=b1(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Pt=Us(n.firstChild),Dn=a,at=!0,za=null,Ls=!0,o=mb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ji(),u===m){a=sa(n,a,o);break e}Mn(n,a,u,o)}a=a.child}return a;case 26:return Sh(n,a),n===null?(o=Ov(a.type,null,a.pendingProps,null))?a.memoizedState=o:at||(o=a.type,n=a.pendingProps,u=Hh(Ee.current).createElement(o),u[Qt]=a,u[Tn]=n,Vn(u,o,n),cn(u),a.stateNode=u):a.memoizedState=Ov(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Ye(a),n===null&&at&&(u=a.stateNode=Rv(a.type,a.pendingProps,Ee.current),Dn=a,Ls=!0,m=Pt,ei(a.type)?(Ig=m,Pt=Us(u.firstChild)):Pt=m),Mn(n,a,a.pendingProps.children,o),Sh(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&at&&((m=u=Pt)&&(u=Qj(u,a.type,a.pendingProps,Ls),u!==null?(a.stateNode=u,Dn=a,Pt=Us(u.firstChild),Ls=!1,m=!0):m=!1),m||Ua(a)),Ye(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,Eg(m,p)?u=null:b!==null&&Eg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=N0(n,a,cj,null,null,o),xu._currentValue=m),Sh(n,a),Mn(n,a,u,o),a.child;case 6:return n===null&&at&&((n=o=Pt)&&(o=Yj(o,a.pendingProps,Ls),o!==null?(a.stateNode=o,Dn=a,Pt=null,n=!0):n=!1),n||Ua(a)),null;case 13:return v1(n,a,o);case 4:return Xe(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=sl(a,null,u,o):Mn(n,a,u,o),a.child;case 11:return d1(n,a,a.type,a.pendingProps,o);case 7:return Mn(n,a,a.pendingProps,o),a.child;case 8:return Mn(n,a,a.pendingProps.children,o),a.child;case 12:return Mn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Ba(a,a.type,u.value),Mn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Zi(a),m=On(m),u=u(m),a.flags|=1,Mn(n,a,u,o),a.child;case 14:return h1(n,a,a.type,a.pendingProps,o);case 15:return f1(n,a,a.type,a.pendingProps,o);case 19:return _1(n,a,o);case 31:return xj(n,a,o);case 22:return m1(n,a,o,a.pendingProps);case 24:return Zi(a),u=On(dn),n===null?(m=f0(),m===null&&(m=Dt,p=d0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},g0(a),Ba(a,dn,m)):((n.lanes&o)!==0&&(p0(n,a),Jc(a,null,null,o),Xc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ba(a,dn,u)):(u=p.cache,Ba(a,dn,u),u!==m.cache&&u0(a,[dn],o,!0))),Mn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function ra(n){n.flags|=4}function J0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(X1())n.flags|=8192;else throw nl=hh,m0}else n.flags&=-16777217}function E1(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zv(a))if(X1())n.flags|=8192;else throw nl=hh,m0}function Ih(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Kr():536870912,n.lanes|=a,yo|=a)}function su(n,a){if(!at)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Lt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function bj(n,a,o){var u=a.pendingProps;switch(a0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Lt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ea(dn),Se(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ro(a)?ra(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,l0())),Lt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(ra(a),p!==null?(Lt(a),E1(a,p)):(Lt(a),J0(a,m,null,u,o))):p?p!==n.memoizedState?(ra(a),Lt(a),E1(a,p)):(Lt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&ra(a),Lt(a),J0(a,m,n,u,o)),null;case 27:if(st(a),o=Ee.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&ra(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Lt(a),null}n=Y.current,ro(a)?sb(a):(n=Rv(m,u,o),a.stateNode=n,ra(a))}return Lt(a),null;case 5:if(st(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&ra(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Lt(a),null}if(p=Y.current,ro(a))sb(a);else{var b=Hh(Ee.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[Qt]=a,p[Tn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(Vn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ra(a)}}return Lt(a),J0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&ra(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Ee.current,ro(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Dn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[Qt]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||vv(n.nodeValue,o)),n||Ua(a,!0)}else n=Hh(n).createTextNode(u),n[Qt]=a,a.stateNode=n}return Lt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=ro(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Qt]=a}else Ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),n=!1}else o=l0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(bs(a),a):(bs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Lt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=ro(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Qt]=a}else Ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),m=!1}else m=l0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(bs(a),a):(bs(a),null)}return bs(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),Ih(a,a.updateQueue),Lt(a),null);case 4:return Se(),n===null&&bg(a.stateNode.containerInfo),Lt(a),null;case 10:return ea(a.type),Lt(a),null;case 19:if(B(tn),u=a.memoizedState,u===null)return Lt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)su(u,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=ph(n),p!==null){for(a.flags|=128,su(u,!1),n=p.updateQueue,a.updateQueue=n,Ih(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)Wy(o,n),o=o.sibling;return L(tn,tn.current&1|2),at&&Wr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Zt()>Oh&&(a.flags|=128,m=!0,su(u,!1),a.lanes=4194304)}else{if(!m)if(n=ph(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,Ih(a,n),su(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!at)return Lt(a),null}else 2*Zt()-u.renderingStartTime>Oh&&o!==536870912&&(a.flags|=128,m=!0,su(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Zt(),n.sibling=null,o=tn.current,L(tn,m?o&1|2:o&1),at&&Wr(a,u.treeForkCount),n):(Lt(a),null);case 22:case 23:return bs(a),v0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),o=a.updateQueue,o!==null&&Ih(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&B(el),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),ea(dn),Lt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function vj(n,a){switch(a0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return ea(dn),Se(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 31:if(a.memoizedState!==null){if(bs(a),a.alternate===null)throw Error(s(340));Ji()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(bs(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ji()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return B(tn),null;case 4:return Se(),null;case 10:return ea(a.type),null;case 22:case 23:return bs(a),v0(),n!==null&&B(el),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return ea(dn),null;case 25:return null;default:return null}}function j1(n,a){switch(a0(a),a.tag){case 3:ea(dn),Se();break;case 26:case 27:case 5:st(a);break;case 4:Se();break;case 31:a.memoizedState!==null&&bs(a);break;case 13:bs(a);break;case 19:B(tn);break;case 10:ea(a.type);break;case 22:case 23:bs(a),v0(),n!==null&&B(el);break;case 24:ea(dn)}}function ru(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(j){Nt(a,a.return,j)}}function Ka(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,j=b.destroy;if(j!==void 0){b.destroy=void 0,m=a;var M=o,Q=j;try{Q()}catch(ae){Nt(m,M,ae)}}}u=u.next}while(u!==p)}}catch(ae){Nt(a,a.return,ae)}}function T1(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{pb(a,o)}catch(u){Nt(n,n.return,u)}}}function S1(n,a,o){o.props=al(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Nt(n,a,u)}}function au(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){Nt(n,a,m)}}function jr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Nt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Nt(n,a,m)}else o.current=null}function A1(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Nt(n,n.return,m)}}function W0(n,a,o){try{var u=n.stateNode;qj(u,n.type,o,a),u[Tn]=a}catch(m){Nt(n,n.return,m)}}function I1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ei(n.type)||n.tag===4}function Z0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||I1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ei(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function eg(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Ks));else if(u!==4&&(u===27&&ei(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(eg(n,a,o),n=n.sibling;n!==null;)eg(n,a,o),n=n.sibling}function Ch(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&ei(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ch(n,a,o),n=n.sibling;n!==null;)Ch(n,a,o),n=n.sibling}function C1(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Vn(a,u,o),a[Qt]=n,a[Tn]=o}catch(p){Nt(n,n.return,p)}}var aa=!1,mn=!1,tg=!1,R1=typeof WeakSet=="function"?WeakSet:Set,An=null;function wj(n,a){if(n=n.containerInfo,_g=Jh,n=Fy(n),Qm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,j=-1,M=-1,Q=0,ae=0,de=n,X=null;t:for(;;){for(var ne;de!==o||m!==0&&de.nodeType!==3||(j=b+m),de!==p||u!==0&&de.nodeType!==3||(M=b+u),de.nodeType===3&&(b+=de.nodeValue.length),(ne=de.firstChild)!==null;)X=de,de=ne;for(;;){if(de===n)break t;if(X===o&&++Q===m&&(j=b),X===p&&++ae===u&&(M=b),(ne=de.nextSibling)!==null)break;de=X,X=de.parentNode}de=ne}o=j===-1||M===-1?null:{start:j,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ng={focusedElem:n,selectionRange:o},Jh=!1,An=a;An!==null;)if(a=An,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,An=n;else for(;An!==null;){switch(a=An,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Te=al(o.type,m);n=u.getSnapshotBeforeUpdate(Te,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Pe){Nt(o,o.return,Pe)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Tg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,An=n;break}An=a.return}}function k1(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:la(n,o),u&4&&ru(5,o);break;case 1:if(la(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){Nt(o,o.return,b)}else{var m=al(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){Nt(o,o.return,b)}}u&64&&T1(o),u&512&&au(o,o.return);break;case 3:if(la(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{pb(n,a)}catch(b){Nt(o,o.return,b)}}break;case 27:a===null&&u&4&&C1(o);case 26:case 5:la(n,o),a===null&&u&4&&A1(o),u&512&&au(o,o.return);break;case 12:la(n,o);break;case 31:la(n,o),u&4&&M1(n,o);break;case 13:la(n,o),u&4&&V1(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Cj.bind(null,o),Xj(n,o))));break;case 22:if(u=o.memoizedState!==null||aa,!u){a=a!==null&&a.memoizedState!==null||mn,m=aa;var p=mn;aa=u,(mn=a)&&!p?oa(n,o,(o.subtreeFlags&8772)!==0):la(n,o),aa=m,mn=p}break;case 30:break;default:la(n,o)}}function D1(n){var a=n.alternate;a!==null&&(n.alternate=null,D1(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Bl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ut=null,as=!1;function ia(n,a,o){for(o=o.child;o!==null;)O1(n,a,o),o=o.sibling}function O1(n,a,o){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Fe,o)}catch{}switch(o.tag){case 26:mn||jr(o,a),ia(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:mn||jr(o,a);var u=Ut,m=as;ei(o.type)&&(Ut=o.stateNode,as=!1),ia(n,a,o),mu(o.stateNode),Ut=u,as=m;break;case 5:mn||jr(o,a);case 6:if(u=Ut,m=as,Ut=null,ia(n,a,o),Ut=u,as=m,Ut!==null)if(as)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(o.stateNode)}catch(p){Nt(o,a,p)}else try{Ut.removeChild(o.stateNode)}catch(p){Nt(o,a,p)}break;case 18:Ut!==null&&(as?(n=Ut,Tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),To(n)):Tv(Ut,o.stateNode));break;case 4:u=Ut,m=as,Ut=o.stateNode.containerInfo,as=!0,ia(n,a,o),Ut=u,as=m;break;case 0:case 11:case 14:case 15:Ka(2,o,a),mn||Ka(4,o,a),ia(n,a,o);break;case 1:mn||(jr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&S1(o,a,u)),ia(n,a,o);break;case 21:ia(n,a,o);break;case 22:mn=(u=mn)||o.memoizedState!==null,ia(n,a,o),mn=u;break;default:ia(n,a,o)}}function M1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(o){Nt(a,a.return,o)}}}function V1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(o){Nt(a,a.return,o)}}function _j(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new R1),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new R1),a;default:throw Error(s(435,n.tag))}}function Rh(n,a){var o=_j(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=Rj.bind(null,n,u);u.then(m,m)}})}function is(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,j=b;e:for(;j!==null;){switch(j.tag){case 27:if(ei(j.type)){Ut=j.stateNode,as=!1;break e}break;case 5:Ut=j.stateNode,as=!1;break e;case 3:case 4:Ut=j.stateNode.containerInfo,as=!0;break e}j=j.return}if(Ut===null)throw Error(s(160));O1(p,b,m),Ut=null,as=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)P1(a,n),a=a.sibling}var Zs=null;function P1(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:is(a,n),ls(n),u&4&&(Ka(3,n,n.return),ru(3,n),Ka(5,n,n.return));break;case 1:is(a,n),ls(n),u&512&&(mn||o===null||jr(o,o.return)),u&64&&aa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Zs;if(is(a,n),ls(n),u&512&&(mn||o===null||jr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[dr]||p[Qt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),Vn(p,u,o),p[Qt]=n,cn(p),u=p;break e;case"link":var b=Pv("link","href",m).get(u+(o.href||""));if(b){for(var j=0;j<b.length;j++)if(p=b[j],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(j,1);break t}}p=m.createElement(u),Vn(p,u,o),m.head.appendChild(p);break;case"meta":if(b=Pv("meta","content",m).get(u+(o.content||""))){for(j=0;j<b.length;j++)if(p=b[j],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(j,1);break t}}p=m.createElement(u),Vn(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[Qt]=n,cn(p),u=p}n.stateNode=u}else Lv(m,n.type,n.stateNode);else n.stateNode=Vv(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Lv(m,n.type,n.stateNode):Vv(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&W0(n,n.memoizedProps,o.memoizedProps)}break;case 27:is(a,n),ls(n),u&512&&(mn||o===null||jr(o,o.return)),o!==null&&u&4&&W0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(is(a,n),ls(n),u&512&&(mn||o===null||jr(o,o.return)),n.flags&32){m=n.stateNode;try{rs(m,"")}catch(Te){Nt(n,n.return,Te)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,W0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(tg=!0);break;case 6:if(is(a,n),ls(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Te){Nt(n,n.return,Te)}}break;case 3:if(Kh=null,m=Zs,Zs=Gh(a.containerInfo),is(a,n),Zs=m,ls(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{To(a.containerInfo)}catch(Te){Nt(n,n.return,Te)}tg&&(tg=!1,L1(n));break;case 4:u=Zs,Zs=Gh(n.stateNode.containerInfo),is(a,n),ls(n),Zs=u;break;case 12:is(a,n),ls(n);break;case 31:is(a,n),ls(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 13:is(a,n),ls(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dh=Zt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 22:m=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,Q=aa,ae=mn;if(aa=Q||m,mn=ae||M,is(a,n),mn=ae,aa=Q,ls(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||M||aa||mn||il(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){M=o=a;try{if(p=M.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{j=M.stateNode;var de=M.memoizedProps.style,X=de!=null&&de.hasOwnProperty("display")?de.display:null;j.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){Nt(M,M.return,Te)}}}else if(a.tag===6){if(o===null){M=a;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(Te){Nt(M,M.return,Te)}}}else if(a.tag===18){if(o===null){M=a;try{var ne=M.stateNode;m?Sv(ne,!0):Sv(M.stateNode,!1)}catch(Te){Nt(M,M.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rh(n,o))));break;case 19:is(a,n),ls(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Rh(n,u)));break;case 30:break;case 21:break;default:is(a,n),ls(n)}}function ls(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(I1(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=Z0(n);Ch(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&(rs(b,""),o.flags&=-33);var j=Z0(n);Ch(n,j,b);break;case 3:case 4:var M=o.stateNode.containerInfo,Q=Z0(n);eg(n,Q,M);break;default:throw Error(s(161))}}catch(ae){Nt(n,n.return,ae)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function L1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;L1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function la(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)k1(n,a.alternate,a),a=a.sibling}function il(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Ka(4,a,a.return),il(a);break;case 1:jr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&S1(a,a.return,o),il(a);break;case 27:mu(a.stateNode);case 26:case 5:jr(a,a.return),il(a);break;case 22:a.memoizedState===null&&il(a);break;case 30:il(a);break;default:il(a)}n=n.sibling}}function oa(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:oa(m,p,o),ru(4,p);break;case 1:if(oa(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){Nt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var j=u.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)gb(M[m],j)}catch(Q){Nt(u,u.return,Q)}}o&&b&64&&T1(p),au(p,p.return);break;case 27:C1(p);case 26:case 5:oa(m,p,o),o&&u===null&&b&4&&A1(p),au(p,p.return);break;case 12:oa(m,p,o);break;case 31:oa(m,p,o),o&&b&4&&M1(m,p);break;case 13:oa(m,p,o),o&&b&4&&V1(m,p);break;case 22:p.memoizedState===null&&oa(m,p,o),au(p,p.return);break;case 30:break;default:oa(m,p,o)}a=a.sibling}}function ng(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Gc(o))}function sg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Gc(n))}function er(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)z1(n,a,o,u),a=a.sibling}function z1(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:er(n,a,o,u),m&2048&&ru(9,a);break;case 1:er(n,a,o,u);break;case 3:er(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Gc(n)));break;case 12:if(m&2048){er(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,j=p.onPostCommit;typeof j=="function"&&j(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Nt(a,a.return,M)}}else er(n,a,o,u);break;case 31:er(n,a,o,u);break;case 13:er(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?er(n,a,o,u):iu(n,a):p._visibility&2?er(n,a,o,u):(p._visibility|=2,go(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&ng(b,a);break;case 24:er(n,a,o,u),m&2048&&sg(a.alternate,a);break;default:er(n,a,o,u)}}function go(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,j=o,M=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:go(p,b,j,M,m),ru(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?go(p,b,j,M,m):iu(p,b):(ae._visibility|=2,go(p,b,j,M,m)),m&&Q&2048&&ng(b.alternate,b);break;case 24:go(p,b,j,M,m),m&&Q&2048&&sg(b.alternate,b);break;default:go(p,b,j,M,m)}a=a.sibling}}function iu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:iu(o,u),m&2048&&ng(u.alternate,u);break;case 24:iu(o,u),m&2048&&sg(u.alternate,u);break;default:iu(o,u)}a=a.sibling}}var lu=8192;function po(n,a,o){if(n.subtreeFlags&lu)for(n=n.child;n!==null;)U1(n,a,o),n=n.sibling}function U1(n,a,o){switch(n.tag){case 26:po(n,a,o),n.flags&lu&&n.memoizedState!==null&&oT(o,Zs,n.memoizedState,n.memoizedProps);break;case 5:po(n,a,o);break;case 3:case 4:var u=Zs;Zs=Gh(n.stateNode.containerInfo),po(n,a,o),Zs=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=lu,lu=16777216,po(n,a,o),lu=u):po(n,a,o));break;default:po(n,a,o)}}function B1(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function ou(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];An=u,F1(u,n)}B1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)q1(n),n=n.sibling}function q1(n){switch(n.tag){case 0:case 11:case 15:ou(n),n.flags&2048&&Ka(9,n,n.return);break;case 3:ou(n);break;case 12:ou(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,kh(n)):ou(n);break;default:ou(n)}}function kh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];An=u,F1(u,n)}B1(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Ka(8,a,a.return),kh(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,kh(a));break;default:kh(a)}n=n.sibling}}function F1(n,a){for(;An!==null;){var o=An;switch(o.tag){case 0:case 11:case 15:Ka(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,An=u;else e:for(o=n;An!==null;){u=An;var m=u.sibling,p=u.return;if(D1(u),u===o){An=null;break e}if(m!==null){m.return=p,An=m;break e}An=p}}}var Nj={getCacheForType:function(n){var a=On(dn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return On(dn).controller.signal}},Ej=typeof WeakMap=="function"?WeakMap:Map,bt=0,Dt=null,Je=null,Ze=0,_t=0,vs=null,Qa=!1,xo=!1,rg=!1,ca=0,Xt=0,Ya=0,ll=0,ag=0,ws=0,yo=0,cu=null,os=null,ig=!1,Dh=0,H1=0,Oh=1/0,Mh=null,Xa=null,bn=0,Ja=null,bo=null,ua=0,lg=0,og=null,G1=null,uu=0,cg=null;function _s(){return(bt&2)!==0&&Ze!==0?Ze&-Ze:G.T!==null?gg():lt()}function $1(){if(ws===0)if((Ze&536870912)===0||at){var n=Rn;Rn<<=1,(Rn&3932160)===0&&(Rn=262144),ws=n}else ws=536870912;return n=ys.current,n!==null&&(n.flags|=32),ws}function cs(n,a,o){(n===Dt&&(_t===2||_t===9)||n.cancelPendingCommit!==null)&&(vo(n,0),Wa(n,Ze,ws,!1)),Ne(n,o),((bt&2)===0||n!==Dt)&&(n===Dt&&((bt&2)===0&&(ll|=o),Xt===4&&Wa(n,Ze,ws,!1)),Tr(n))}function K1(n,a,o){if((bt&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||jn(n,a),m=u?Sj(n,a):dg(n,a,!0),p=u;do{if(m===0){xo&&!u&&Wa(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!jj(o)){m=dg(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var j=n;m=cu;var M=j.current.memoizedState.isDehydrated;if(M&&(vo(j,b).flags|=256),b=dg(j,b,!1),b!==2){if(rg&&!M){j.errorRecoveryDisabledLanes|=p,ll|=p,m=4;break e}p=os,os=m,p!==null&&(os===null?os=p:os.push.apply(os,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){vo(n,0),Wa(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Wa(u,a,ws,!Qa);break e;case 2:os=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Dh+300-Zt(),10<m)){if(Wa(u,a,ws,!Qa),on(u,0,!0)!==0)break e;ua=a,u.timeoutHandle=Ev(Q1.bind(null,u,o,os,Mh,ig,a,ws,ll,yo,Qa,p,"Throttled",-0,0),m);break e}Q1(u,o,os,Mh,ig,a,ws,ll,yo,Qa,p,null,-0,0)}}break}while(!0);Tr(n)}function Q1(n,a,o,u,m,p,b,j,M,Q,ae,de,X,ne){if(n.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ks},U1(a,p,de);var Te=(p&62914560)===p?Dh-Zt():(p&4194048)===p?H1-Zt():0;if(Te=cT(de,Te),Te!==null){ua=p,n.cancelPendingCommit=Te(nv.bind(null,n,a,p,o,u,m,b,j,M,ae,de,null,X,ne)),Wa(n,p,b,!Q);return}}nv(n,a,p,o,u,m,b,j,M)}function jj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!ps(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wa(n,a,o,u){a&=~ag,a&=~ll,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-St(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&Ae(n,o,a)}function Vh(){return(bt&6)===0?(du(0),!1):!0}function ug(){if(Je!==null){if(_t===0)var n=Je.return;else n=Je,Zr=Wi=null,T0(n),co=null,Kc=0,n=Je;for(;n!==null;)j1(n.alternate,n),n=n.return;Je=null}}function vo(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Gj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ua=0,ug(),Dt=n,Je=o=Jr(n.current,null),Ze=a,_t=0,vs=null,Qa=!1,xo=jn(n,a),rg=!1,yo=ws=ag=ll=Ya=Xt=0,os=cu=null,ig=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-St(u),p=1<<m;a|=n[m],u&=~p}return ca=a,sh(),o}function Y1(n,a){$e=null,G.H=tu,a===oo||a===dh?(a=db(),_t=3):a===m0?(a=db(),_t=4):_t=a===q0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,vs=a,Je===null&&(Xt=1,jh(n,Ms(a,n.current)))}function X1(){var n=ys.current;return n===null?!0:(Ze&4194048)===Ze?zs===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?n===zs:!1}function J1(){var n=G.H;return G.H=tu,n===null?tu:n}function W1(){var n=G.A;return G.A=Nj,n}function Ph(){Xt=4,Qa||(Ze&4194048)!==Ze&&ys.current!==null||(xo=!0),(Ya&134217727)===0&&(ll&134217727)===0||Dt===null||Wa(Dt,Ze,ws,!1)}function dg(n,a,o){var u=bt;bt|=2;var m=J1(),p=W1();(Dt!==n||Ze!==a)&&(Mh=null,vo(n,a)),a=!1;var b=Xt;e:do try{if(_t!==0&&Je!==null){var j=Je,M=vs;switch(_t){case 8:ug(),b=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(a=!0);var Q=_t;if(_t=0,vs=null,wo(n,j,M,Q),o&&xo){b=0;break e}break;default:Q=_t,_t=0,vs=null,wo(n,j,M,Q)}}Tj(),b=Xt;break}catch(ae){Y1(n,ae)}while(!0);return a&&n.shellSuspendCounter++,Zr=Wi=null,bt=u,G.H=m,G.A=p,Je===null&&(Dt=null,Ze=0,sh()),b}function Tj(){for(;Je!==null;)Z1(Je)}function Sj(n,a){var o=bt;bt|=2;var u=J1(),m=W1();Dt!==n||Ze!==a?(Mh=null,Oh=Zt()+500,vo(n,a)):xo=jn(n,a);e:do try{if(_t!==0&&Je!==null){a=Je;var p=vs;t:switch(_t){case 1:_t=0,vs=null,wo(n,a,p,1);break;case 2:case 9:if(cb(p)){_t=0,vs=null,ev(a);break}a=function(){_t!==2&&_t!==9||Dt!==n||(_t=7),Tr(n)},p.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:cb(p)?(_t=0,vs=null,ev(a)):(_t=0,vs=null,wo(n,a,p,7));break;case 5:var b=null;switch(Je.tag){case 26:b=Je.memoizedState;case 5:case 27:var j=Je;if(b?zv(b):j.stateNode.complete){_t=0,vs=null;var M=j.sibling;if(M!==null)Je=M;else{var Q=j.return;Q!==null?(Je=Q,Lh(Q)):Je=null}break t}}_t=0,vs=null,wo(n,a,p,5);break;case 6:_t=0,vs=null,wo(n,a,p,6);break;case 8:ug(),Xt=6;break e;default:throw Error(s(462))}}Aj();break}catch(ae){Y1(n,ae)}while(!0);return Zr=Wi=null,G.H=u,G.A=m,bt=o,Je!==null?0:(Dt=null,Ze=0,sh(),Xt)}function Aj(){for(;Je!==null&&!Mi();)Z1(Je)}function Z1(n){var a=N1(n.alternate,n,ca);n.memoizedProps=n.pendingProps,a===null?Lh(n):Je=a}function ev(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=x1(o,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=x1(o,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:T0(a);default:j1(o,a),a=Je=Wy(a,ca),a=N1(o,a,ca)}n.memoizedProps=n.pendingProps,a===null?Lh(n):Je=a}function wo(n,a,o,u){Zr=Wi=null,T0(a),co=null,Kc=0;var m=a.return;try{if(pj(n,m,a,o,Ze)){Xt=1,jh(n,Ms(o,n.current)),Je=null;return}}catch(p){if(m!==null)throw Je=m,p;Xt=1,jh(n,Ms(o,n.current)),Je=null;return}a.flags&32768?(at||u===1?n=!0:xo||(Ze&536870912)!==0?n=!1:(Qa=n=!0,(u===2||u===9||u===3||u===6)&&(u=ys.current,u!==null&&u.tag===13&&(u.flags|=16384))),tv(a,n)):Lh(a)}function Lh(n){var a=n;do{if((a.flags&32768)!==0){tv(a,Qa);return}n=a.return;var o=bj(a.alternate,a,ca);if(o!==null){Je=o;return}if(a=a.sibling,a!==null){Je=a;return}Je=a=n}while(a!==null);Xt===0&&(Xt=5)}function tv(n,a){do{var o=vj(n.alternate,n);if(o!==null){o.flags&=32767,Je=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Je=n;return}Je=n=o}while(n!==null);Xt=6,Je=null}function nv(n,a,o,u,m,p,b,j,M){n.cancelPendingCommit=null;do zh();while(bn!==0);if((bt&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Zm,be(n,o,p,b,j,M),n===Dt&&(Je=Dt=null,Ze=0),bo=a,Ja=n,ua=o,lg=p,og=m,G1=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,kj(En,function(){return lv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,m=he.p,he.p=2,b=bt,bt|=4;try{wj(n,a,o)}finally{bt=b,he.p=m,G.T=u}}bn=1,sv(),rv(),av()}}function sv(){if(bn===1){bn=0;var n=Ja,a=bo,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=he.p;he.p=2;var m=bt;bt|=4;try{P1(a,n);var p=Ng,b=Fy(n.containerInfo),j=p.focusedElem,M=p.selectionRange;if(b!==j&&j&&j.ownerDocument&&qy(j.ownerDocument.documentElement,j)){if(M!==null&&Qm(j)){var Q=M.start,ae=M.end;if(ae===void 0&&(ae=Q),"selectionStart"in j)j.selectionStart=Q,j.selectionEnd=Math.min(ae,j.value.length);else{var de=j.ownerDocument||document,X=de&&de.defaultView||window;if(X.getSelection){var ne=X.getSelection(),Te=j.textContent.length,Pe=Math.min(M.start,Te),Rt=M.end===void 0?Pe:Math.min(M.end,Te);!ne.extend&&Pe>Rt&&(b=Rt,Rt=Pe,Pe=b);var q=By(j,Pe),U=By(j,Rt);if(q&&U&&(ne.rangeCount!==1||ne.anchorNode!==q.node||ne.anchorOffset!==q.offset||ne.focusNode!==U.node||ne.focusOffset!==U.offset)){var K=de.createRange();K.setStart(q.node,q.offset),ne.removeAllRanges(),Pe>Rt?(ne.addRange(K),ne.extend(U.node,U.offset)):(K.setEnd(U.node,U.offset),ne.addRange(K))}}}}for(de=[],ne=j;ne=ne.parentNode;)ne.nodeType===1&&de.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<de.length;j++){var ie=de[j];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Jh=!!_g,Ng=_g=null}finally{bt=m,he.p=u,G.T=o}}n.current=a,bn=2}}function rv(){if(bn===2){bn=0;var n=Ja,a=bo,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=he.p;he.p=2;var m=bt;bt|=4;try{k1(n,a.alternate,a)}finally{bt=m,he.p=u,G.T=o}}bn=3}}function av(){if(bn===4||bn===3){bn=0,Gr();var n=Ja,a=bo,o=ua,u=G1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,bo=Ja=null,iv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Xa=null),dt(o),a=a.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Fe,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=G.T,m=he.p,he.p=2,G.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var j=u[b];p(j.value,{componentStack:j.stack})}}finally{G.T=a,he.p=m}}(ua&3)!==0&&zh(),Tr(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===cg?uu++:(uu=0,cg=n):uu=0,du(0)}}function iv(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Gc(a)))}function zh(){return sv(),rv(),av(),lv()}function lv(){if(bn!==5)return!1;var n=Ja,a=lg;lg=0;var o=dt(ua),u=G.T,m=he.p;try{he.p=32>o?32:o,G.T=null,o=og,og=null;var p=Ja,b=ua;if(bn=0,bo=Ja=null,ua=0,(bt&6)!==0)throw Error(s(331));var j=bt;if(bt|=4,q1(p.current),z1(p,p.current,b,o),bt=j,du(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Fe,p)}catch{}return!0}finally{he.p=m,G.T=u,iv(n,a)}}function ov(n,a,o){a=Ms(o,a),a=B0(n.stateNode,a,2),n=Ha(n,a,2),n!==null&&(Ne(n,2),Tr(n))}function Nt(n,a,o){if(n.tag===3)ov(n,n,o);else for(;a!==null;){if(a.tag===3){ov(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xa===null||!Xa.has(u))){n=Ms(o,n),o=c1(2),u=Ha(a,o,2),u!==null&&(u1(o,u,a,n),Ne(u,2),Tr(u));break}}a=a.return}}function hg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Ej;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(rg=!0,m.add(o),n=Ij.bind(null,n,a,o),a.then(n,n))}function Ij(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Dt===n&&(Ze&o)===o&&(Xt===4||Xt===3&&(Ze&62914560)===Ze&&300>Zt()-Dh?(bt&2)===0&&vo(n,0):ag|=o,yo===Ze&&(yo=0)),Tr(n)}function cv(n,a){a===0&&(a=Kr()),n=Yi(n,a),n!==null&&(Ne(n,a),Tr(n))}function Cj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),cv(n,o)}function Rj(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),cv(n,o)}function kj(n,a){return gt(n,a)}var Uh=null,_o=null,fg=!1,Bh=!1,mg=!1,Za=0;function Tr(n){n!==_o&&n.next===null&&(_o===null?Uh=_o=n:_o=_o.next=n),Bh=!0,fg||(fg=!0,Oj())}function du(n,a){if(!mg&&Bh){mg=!0;do for(var o=!1,u=Uh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,j=u.pingedLanes;p=(1<<31-St(42|n)+1)-1,p&=m&~(b&~j),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,fv(u,p))}else p=Ze,p=on(u,u===Dt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||jn(u,p)||(o=!0,fv(u,p));u=u.next}while(o);mg=!1}}function Dj(){uv()}function uv(){Bh=fg=!1;var n=0;Za!==0&&Hj()&&(n=Za);for(var a=Zt(),o=null,u=Uh;u!==null;){var m=u.next,p=dv(u,a);p===0?(u.next=null,o===null?Uh=m:o.next=m,m===null&&(_o=o)):(o=u,(n!==0||(p&3)!==0)&&(Bh=!0)),u=m}bn!==0&&bn!==5||du(n),Za!==0&&(Za=0)}function dv(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-St(p),j=1<<b,M=m[b];M===-1?((j&o)===0||(j&u)!==0)&&(m[b]=Pi(j,a)):M<=a&&(n.expiredLanes|=j),p&=~j}if(a=Dt,o=Ze,o=on(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(_t===2||_t===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Wt(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||jn(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&Wt(u),dt(o)){case 2:case 8:o=$r;break;case 32:o=En;break;case 268435456:o=Aa;break;default:o=En}return u=hv.bind(null,n),o=gt(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&Wt(u),n.callbackPriority=2,n.callbackNode=null,2}function hv(n,a){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(zh()&&n.callbackNode!==o)return null;var u=Ze;return u=on(n,n===Dt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(K1(n,u,a),dv(n,Zt()),n.callbackNode!=null&&n.callbackNode===o?hv.bind(null,n):null)}function fv(n,a){if(zh())return null;K1(n,a,!0)}function Oj(){$j(function(){(bt&6)!==0?gt(cr,Dj):uv()})}function gg(){if(Za===0){var n=io;n===0&&(n=$t,$t<<=1,($t&261888)===0&&($t=256)),Za=n}return Za}function mv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Gl(""+n)}function gv(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function Mj(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=mv((m[Tn]||null).action),b=u.submitter;b&&(a=(a=b[Tn]||null)?mv(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var j=new br("action","action",null,u,m);n.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Za!==0){var M=b?gv(m,b):new FormData(m);M0(o,{pending:!0,data:M,method:m.method,action:p},null,M)}}else typeof p=="function"&&(j.preventDefault(),M=b?gv(m,b):new FormData(m),M0(o,{pending:!0,data:M,method:m.method,action:p},p,M))},currentTarget:m}]})}}for(var pg=0;pg<Wm.length;pg++){var xg=Wm[pg],Vj=xg.toLowerCase(),Pj=xg[0].toUpperCase()+xg.slice(1);Ws(Vj,"on"+Pj)}Ws($y,"onAnimationEnd"),Ws(Ky,"onAnimationIteration"),Ws(Qy,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(Z5,"onTransitionRun"),Ws(ej,"onTransitionStart"),Ws(tj,"onTransitionCancel"),Ws(Yy,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function pv(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var j=u[b],M=j.instance,Q=j.currentTarget;if(j=j.listener,M!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(ae){nh(ae)}m.currentTarget=null,p=M}else for(b=0;b<u.length;b++){if(j=u[b],M=j.instance,Q=j.currentTarget,j=j.listener,M!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(ae){nh(ae)}m.currentTarget=null,p=M}}}}function We(n,a){var o=a[Ul];o===void 0&&(o=a[Ul]=new Set);var u=n+"__bubble";o.has(u)||(xv(a,n,2,!1),o.add(u))}function yg(n,a,o){var u=0;a&&(u|=4),xv(o,n,u,a)}var qh="_reactListening"+Math.random().toString(36).slice(2);function bg(n){if(!n[qh]){n[qh]=!0,Ec.forEach(function(o){o!=="selectionchange"&&(Lj.has(o)||yg(o,!1,n),yg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[qh]||(a[qh]=!0,yg("selectionchange",!1,a))}}function xv(n,a,o,u){switch($v(a)){case 2:var m=hT;break;case 8:m=fT;break;default:m=Og}o=m.bind(null,a,o,n),m=void 0,!Bi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function vg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var j=u.stateNode.containerInfo;if(j===m)break;if(b===4)for(b=u.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;j!==null;){if(b=hr(j),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){u=p=b;continue e}j=j.parentNode}}u=u.return}Oa(function(){var Q=p,ae=Rs(o),de=[];e:{var X=Xy.get(n);if(X!==void 0){var ne=br,Te=n;switch(n){case"keypress":if(Fi(o)===0)break e;case"keydown":case"keyup":ne=Zd;break;case"focusin":Te="focus",ne=Gi;break;case"focusout":Te="blur",ne=Gi;break;case"beforeblur":case"afterblur":ne=Gi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case $y:case Ky:case Qy:ne=$d;break;case Yy:ne=S;break;case"scroll":case"scrollend":ne=Vc;break;case"wheel":ne=Z;break;case"copy":case"cut":case"paste":ne=Kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Xr;break;case"toggle":case"beforetoggle":ne=Ge}var Pe=(a&4)!==0,Rt=!Pe&&(n==="scroll"||n==="scrollend"),q=Pe?X!==null?X+"Capture":null:X;Pe=[];for(var U=Q,K;U!==null;){var ie=U;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||q===null||(ie=Qs(U,q),ie!=null&&Pe.push(fu(U,ie,K))),Rt)break;U=U.return}0<Pe.length&&(X=new ne(X,Te,null,o,ae),de.push({event:X,listeners:Pe}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",X&&o!==Dc&&(Te=o.relatedTarget||o.fromElement)&&(hr(Te)||Te[ur]))break e;if((ne||X)&&(X=ae.window===ae?ae:(X=ae.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(Te=o.relatedTarget||o.toElement,ne=Q,Te=Te?hr(Te):null,Te!==null&&(Rt=c(Te),Pe=Te.tag,Te!==Rt||Pe!==5&&Pe!==27&&Pe!==6)&&(Te=null)):(ne=null,Te=Q),ne!==Te)){if(Pe=Pc,ie="onMouseLeave",q="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=Xr,ie="onPointerLeave",q="onPointerEnter",U="pointer"),Rt=ne==null?X:ms(ne),K=Te==null?X:ms(Te),X=new Pe(ie,U+"leave",ne,o,ae),X.target=Rt,X.relatedTarget=K,ie=null,hr(ae)===Q&&(Pe=new Pe(q,U+"enter",Te,o,ae),Pe.target=K,Pe.relatedTarget=Rt,ie=Pe),Rt=ie,ne&&Te)t:{for(Pe=zj,q=ne,U=Te,K=0,ie=q;ie;ie=Pe(ie))K++;ie=0;for(var Oe=U;Oe;Oe=Pe(Oe))ie++;for(;0<K-ie;)q=Pe(q),K--;for(;0<ie-K;)U=Pe(U),ie--;for(;K--;){if(q===U||U!==null&&q===U.alternate){Pe=q;break t}q=Pe(q),U=Pe(U)}Pe=null}else Pe=null;ne!==null&&yv(de,X,ne,Pe,!1),Te!==null&&Rt!==null&&yv(de,Rt,Te,Pe,!0)}}e:{if(X=Q?ms(Q):window,ne=X.nodeName&&X.nodeName.toLowerCase(),ne==="select"||ne==="input"&&X.type==="file")var ht=My;else if(Dy(X))if(Vy)ht=X5;else{ht=Q5;var ke=K5}else ne=X.nodeName,!ne||ne.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Hl(Q.elementType)&&(ht=My):ht=Y5;if(ht&&(ht=ht(n,Q))){Oy(de,ht,o,ae);break e}ke&&ke(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Cc(X,"number",X.value)}switch(ke=Q?ms(Q):window,n){case"focusin":(Dy(ke)||ke.contentEditable==="true")&&(Wl=ke,Ym=Q,qc=null);break;case"focusout":qc=Ym=Wl=null;break;case"mousedown":Xm=!0;break;case"contextmenu":case"mouseup":case"dragend":Xm=!1,Hy(de,o,ae);break;case"selectionchange":if(W5)break;case"keydown":case"keyup":Hy(de,o,ae)}var Ke;if(yt)e:{switch(n){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Jl?$i(n,o)&&(et="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(et="onCompositionStart");et&&(_r&&o.locale!=="ko"&&(Jl||et!=="onCompositionStart"?et==="onCompositionEnd"&&Jl&&(Ke=Mc()):(yr=ae,Oc="value"in yr?yr.value:yr.textContent,Jl=!0)),ke=Fh(Q,et),0<ke.length&&(et=new wr(et,n,null,o,ae),de.push({event:et,listeners:ke}),Ke?et.data=Ke:(Ke=Xl(o),Ke!==null&&(et.data=Ke)))),(Ke=Ds?F5(n,o):H5(n,o))&&(et=Fh(Q,"onBeforeInput"),0<et.length&&(ke=new wr("onBeforeInput","beforeinput",null,o,ae),de.push({event:ke,listeners:et}),ke.data=Ke)),Mj(de,n,Q,o,ae)}pv(de,a)})}function fu(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Fh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Qs(n,o),m!=null&&u.unshift(fu(n,m,p)),m=Qs(n,a),m!=null&&u.push(fu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function zj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function yv(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var j=o,M=j.alternate,Q=j.stateNode;if(j=j.tag,M!==null&&M===u)break;j!==5&&j!==26&&j!==27||Q===null||(M=Q,m?(Q=Qs(o,p),Q!=null&&b.unshift(fu(o,Q,M))):m||(Q=Qs(o,p),Q!=null&&b.push(fu(o,Q,M)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var Uj=/\r\n?/g,Bj=/\u0000|\uFFFD/g;function bv(n){return(typeof n=="string"?n:""+n).replace(Uj,`
`).replace(Bj,"")}function vv(n,a){return a=bv(a),bv(n)===a}function Ct(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||rs(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&rs(n,""+u);break;case"className":gs(n,"class",u);break;case"tabIndex":gs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":gs(n,o,u);break;case"style":kc(n,u,p);break;case"data":if(a!=="object"){gs(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Gl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&Ct(n,a,"name",m.name,m,null),Ct(n,a,"formEncType",m.formEncType,m,null),Ct(n,a,"formMethod",m.formMethod,m,null),Ct(n,a,"formTarget",m.formTarget,m,null)):(Ct(n,a,"encType",m.encType,m,null),Ct(n,a,"method",m.method,m,null),Ct(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Gl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Ks);break;case"onScroll":u!=null&&We("scroll",n);break;case"onScrollEnd":u!=null&&We("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Gl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":We("beforetoggle",n),We("toggle",n),ql(n,"popover",u);break;case"xlinkActuate":un(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":un(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":un(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":un(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":un(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":un(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":un(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":un(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":un(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ql(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fd.get(o)||o,ql(n,o,u))}}function wg(n,a,o,u,m,p){switch(o){case"style":kc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?rs(n,u):(typeof u=="number"||typeof u=="bigint")&&rs(n,""+u);break;case"onScroll":u!=null&&We("scroll",n);break;case"onScrollEnd":u!=null&&We("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[Tn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ql(n,o,u)}}}function Vn(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",n),We("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Ct(n,a,p,b,o,null)}}m&&Ct(n,a,"srcSet",o.srcSet,o,null),u&&Ct(n,a,"src",o.src,o,null);return;case"input":We("invalid",n);var j=p=b=m=null,M=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":m=ae;break;case"type":b=ae;break;case"checked":M=ae;break;case"defaultChecked":Q=ae;break;case"value":p=ae;break;case"defaultValue":j=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:Ct(n,a,u,ae,o,null)}}Ud(n,p,j,M,Q,b,m,!1);return;case"select":We("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(j=o[m],j!=null))switch(m){case"value":p=j;break;case"defaultValue":b=j;break;case"multiple":u=j;default:Ct(n,a,m,j,o,null)}a=p,o=b,n.multiple=!!u,a!=null?Ca(n,!!u,a,!1):o!=null&&Ca(n,!!u,o,!0);return;case"textarea":We("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(j=o[b],j!=null))switch(b){case"value":u=j;break;case"defaultValue":m=j;break;case"children":p=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:Ct(n,a,b,j,o,null)}Ra(n,u,m,p);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ct(n,a,M,u,o,null)}return;case"dialog":We("beforetoggle",n),We("toggle",n),We("cancel",n),We("close",n);break;case"iframe":case"object":We("load",n);break;case"video":case"audio":for(u=0;u<hu.length;u++)We(hu[u],n);break;case"image":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"embed":case"source":case"link":We("error",n),We("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Ct(n,a,Q,u,o,null)}return;default:if(Hl(a)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&wg(n,a,ae,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&Ct(n,a,j,u,o,null))}function qj(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,j=null,M=null,Q=null,ae=null;for(ne in o){var de=o[ne];if(o.hasOwnProperty(ne)&&de!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":M=de;default:u.hasOwnProperty(ne)||Ct(n,a,ne,null,u,de)}}for(var X in u){var ne=u[X];if(de=o[X],u.hasOwnProperty(X)&&(ne!=null||de!=null))switch(X){case"type":p=ne;break;case"name":m=ne;break;case"checked":Q=ne;break;case"defaultChecked":ae=ne;break;case"value":b=ne;break;case"defaultValue":j=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:ne!==de&&Ct(n,a,X,ne,u,de)}}Fl(n,b,j,M,Q,ae,p,m);return;case"select":ne=b=j=X=null;for(p in o)if(M=o[p],o.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":ne=M;default:u.hasOwnProperty(p)||Ct(n,a,p,null,u,M)}for(m in u)if(p=u[m],M=o[m],u.hasOwnProperty(m)&&(p!=null||M!=null))switch(m){case"value":X=p;break;case"defaultValue":j=p;break;case"multiple":b=p;default:p!==M&&Ct(n,a,m,p,u,M)}a=j,o=b,u=ne,X!=null?Ca(n,!!o,X,!1):!!u!=!!o&&(a!=null?Ca(n,!!o,a,!0):Ca(n,!!o,o?[]:"",!1));return;case"textarea":ne=X=null;for(j in o)if(m=o[j],o.hasOwnProperty(j)&&m!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Ct(n,a,j,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Ct(n,a,b,m,u,p)}Bd(n,X,ne);return;case"option":for(var Te in o)if(X=o[Te],o.hasOwnProperty(Te)&&X!=null&&!u.hasOwnProperty(Te))switch(Te){case"selected":n.selected=!1;break;default:Ct(n,a,Te,null,u,X)}for(M in u)if(X=u[M],ne=o[M],u.hasOwnProperty(M)&&X!==ne&&(X!=null||ne!=null))switch(M){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Ct(n,a,M,X,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in o)X=o[Pe],o.hasOwnProperty(Pe)&&X!=null&&!u.hasOwnProperty(Pe)&&Ct(n,a,Pe,null,u,X);for(Q in u)if(X=u[Q],ne=o[Q],u.hasOwnProperty(Q)&&X!==ne&&(X!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:Ct(n,a,Q,X,u,ne)}return;default:if(Hl(a)){for(var Rt in o)X=o[Rt],o.hasOwnProperty(Rt)&&X!==void 0&&!u.hasOwnProperty(Rt)&&wg(n,a,Rt,void 0,u,X);for(ae in u)X=u[ae],ne=o[ae],!u.hasOwnProperty(ae)||X===ne||X===void 0&&ne===void 0||wg(n,a,ae,X,u,ne);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&Ct(n,a,q,null,u,X);for(de in u)X=u[de],ne=o[de],!u.hasOwnProperty(de)||X===ne||X==null&&ne==null||Ct(n,a,de,X,u,ne)}function wv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,j=m.duration;if(p&&j&&wv(b)){for(b=0,j=m.responseEnd,u+=1;u<o.length;u++){var M=o[u],Q=M.startTime;if(Q>j)break;var ae=M.transferSize,de=M.initiatorType;ae&&wv(de)&&(M=M.responseEnd,b+=ae*(M<j?1:(j-Q)/(M-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _g=null,Ng=null;function Hh(n){return n.nodeType===9?n:n.ownerDocument}function _v(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Eg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jg=null;function Hj(){var n=window.event;return n&&n.type==="popstate"?n===jg?!1:(jg=n,!0):(jg=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,Gj=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,$j=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(n){return jv.resolve(null).then(n).catch(Kj)}:Ev;function Kj(n){setTimeout(function(){throw n})}function ei(n){return n==="head"}function Tv(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),To(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")mu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,mu(o);for(var p=o.firstChild;p;){var b=p.nextSibling,j=p.nodeName;p[dr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&mu(n.ownerDocument.body);o=m}while(o);To(a)}function Sv(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Tg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tg(o),Bl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Qj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[dr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Us(n.nextSibling),n===null)break}return null}function Yj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Us(n.nextSibling),n===null))return null;return n}function Av(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Us(n.nextSibling),n===null))return null;return n}function Sg(n){return n.data==="$?"||n.data==="$~"}function Ag(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Xj(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Us(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Ig=null;function Iv(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Us(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function Cv(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function Rv(n,a,o){switch(a=Hh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function mu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Bl(n)}var Bs=new Map,kv=new Set;function Gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var da=he.d;he.d={f:Jj,r:Wj,D:Zj,C:eT,L:tT,m:nT,X:rT,S:sT,M:aT};function Jj(){var n=da.f(),a=Vh();return n||a}function Wj(n){var a=Cs(n);a!==null&&a.tag===5&&a.type==="form"?Yb(a):da.r(n)}var No=typeof document>"u"?null:document;function Dv(n,a,o){var u=No;if(u&&typeof a=="string"&&a){var m=ss(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),kv.has(m)||(kv.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Vn(a,"link",n),cn(a),u.head.appendChild(a)))}}function Zj(n){da.D(n),Dv("dns-prefetch",n,null)}function eT(n,a){da.C(n,a),Dv("preconnect",n,a)}function tT(n,a,o){da.L(n,a,o);var u=No;if(u&&n&&a){var m='link[rel="preload"][as="'+ss(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ss(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ss(o.imageSizes)+'"]')):m+='[href="'+ss(n)+'"]';var p=m;switch(a){case"style":p=Eo(n);break;case"script":p=jo(n)}Bs.has(p)||(n=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Bs.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(gu(p))||a==="script"&&u.querySelector(pu(p))||(a=u.createElement("link"),Vn(a,"link",n),cn(a),u.head.appendChild(a)))}}function nT(n,a){da.m(n,a);var o=No;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ss(u)+'"][href="'+ss(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=jo(n)}if(!Bs.has(p)&&(n=v({rel:"modulepreload",href:n},a),Bs.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pu(p)))return}u=o.createElement("link"),Vn(u,"link",n),cn(u),o.head.appendChild(u)}}}function sT(n,a,o){da.S(n,a,o);var u=No;if(u&&n){var m=fr(u).hoistableStyles,p=Eo(n);a=a||"default";var b=m.get(p);if(!b){var j={loading:0,preload:null};if(b=u.querySelector(gu(p)))j.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Bs.get(p))&&Cg(n,o);var M=b=u.createElement("link");cn(M),Vn(M,"link",n),M._p=new Promise(function(Q,ae){M.onload=Q,M.onerror=ae}),M.addEventListener("load",function(){j.loading|=1}),M.addEventListener("error",function(){j.loading|=2}),j.loading|=4,$h(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:j},m.set(p,b)}}}function rT(n,a){da.X(n,a);var o=No;if(o&&n){var u=fr(o).hoistableScripts,m=jo(n),p=u.get(m);p||(p=o.querySelector(pu(m)),p||(n=v({src:n,async:!0},a),(a=Bs.get(m))&&Rg(n,a),p=o.createElement("script"),cn(p),Vn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function aT(n,a){da.M(n,a);var o=No;if(o&&n){var u=fr(o).hoistableScripts,m=jo(n),p=u.get(m);p||(p=o.querySelector(pu(m)),p||(n=v({src:n,async:!0,type:"module"},a),(a=Bs.get(m))&&Rg(n,a),p=o.createElement("script"),cn(p),Vn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Ov(n,a,o,u){var m=(m=Ee.current)?Gh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Eo(o.href),o=fr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Eo(o.href);var p=fr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(gu(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Bs.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bs.set(n,o),p||iT(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=jo(o),o=fr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Eo(n){return'href="'+ss(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function Mv(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function iT(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Vn(a,"link",o),cn(a),n.head.appendChild(a))}function jo(n){return'[src="'+ss(n)+'"]'}function pu(n){return"script[async]"+n}function Vv(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+ss(o.href)+'"]');if(u)return a.instance=u,cn(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),cn(u),Vn(u,"style",m),$h(u,o.precedence,n),a.instance=u;case"stylesheet":m=Eo(o.href);var p=n.querySelector(gu(m));if(p)return a.state.loading|=4,a.instance=p,cn(p),p;u=Mv(o),(m=Bs.get(m))&&Cg(u,m),p=(n.ownerDocument||n).createElement("link"),cn(p);var b=p;return b._p=new Promise(function(j,M){b.onload=j,b.onerror=M}),Vn(p,"link",u),a.state.loading|=4,$h(p,o.precedence,n),a.instance=p;case"script":return p=jo(o.src),(m=n.querySelector(pu(p)))?(a.instance=m,cn(m),m):(u=o,(m=Bs.get(p))&&(u=v({},o),Rg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),cn(m),Vn(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,$h(u,o.precedence,n));return a.instance}function $h(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var j=u[b];if(j.dataset.precedence===a)p=j;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Cg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Rg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Kh=null;function Pv(n,a,o){if(Kh===null){var u=new Map,m=Kh=new Map;m.set(o,u)}else m=Kh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[dr]||p[Qt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var j=u.get(b);j?j.push(p):u.set(b,[p])}}return u}function Lv(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function lT(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function oT(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Eo(u.href),p=a.querySelector(gu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Qh.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,cn(p);return}p=a.ownerDocument||a,u=Mv(u),(m=Bs.get(m))&&Cg(u,m),p=p.createElement("link"),cn(p);var b=p;b._p=new Promise(function(j,M){b.onload=j,b.onerror=M}),Vn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Qh.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var kg=0;function cT(n,a){return n.stylesheets&&n.count===0&&Xh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Xh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&kg===0&&(kg=62500*Fj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Xh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>kg?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yh=null;function Xh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yh=new Map,a.forEach(uT,n),Yh=null,Qh.call(n))}function uT(n,a){if(!(a.state.loading&4)){var o=Yh.get(n);if(o)var u=o.get(null);else{o=new Map,Yh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=Qh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var xu={$$typeof:te,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function dT(n,a,o,u,m,p,b,j,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oe(0),this.hiddenUpdates=oe(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Uv(n,a,o,u,m,p,b,j,M,Q,ae,de){return n=new dT(n,a,o,b,M,Q,ae,de,j),a=1,p===!0&&(a|=24),p=xs(3,null,null,a),n.current=p,p.stateNode=n,a=d0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},g0(p),n}function Bv(n){return n?(n=to,n):to}function qv(n,a,o,u,m,p){m=Bv(m),u.context===null?u.context=m:u.pendingContext=m,u=Fa(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ha(n,u,a),o!==null&&(cs(o,n,a),Yc(o,n,a))}function Fv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Dg(n,a){Fv(n,a),(n=n.alternate)&&Fv(n,a)}function Hv(n){if(n.tag===13||n.tag===31){var a=Yi(n,67108864);a!==null&&cs(a,n,67108864),Dg(n,67108864)}}function Gv(n){if(n.tag===13||n.tag===31){var a=_s();a=He(a);var o=Yi(n,a);o!==null&&cs(o,n,a),Dg(n,a)}}var Jh=!0;function hT(n,a,o,u){var m=G.T;G.T=null;var p=he.p;try{he.p=2,Og(n,a,o,u)}finally{he.p=p,G.T=m}}function fT(n,a,o,u){var m=G.T;G.T=null;var p=he.p;try{he.p=8,Og(n,a,o,u)}finally{he.p=p,G.T=m}}function Og(n,a,o,u){if(Jh){var m=Mg(u);if(m===null)vg(n,a,u,Wh,o),Kv(n,u);else if(gT(m,n,a,o,u))u.stopPropagation();else if(Kv(n,u),a&4&&-1<mT.indexOf(n)){for(;m!==null;){var p=Cs(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=yn(p.pendingLanes);if(b!==0){var j=p;for(j.pendingLanes|=2,j.entangledLanes|=2;b;){var M=1<<31-St(b);j.entanglements[1]|=M,b&=~M}Tr(p),(bt&6)===0&&(Oh=Zt()+500,du(0))}}break;case 31:case 13:j=Yi(p,2),j!==null&&cs(j,p,2),Vh(),Dg(p,2)}if(p=Mg(u),p===null&&vg(n,a,u,Wh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else vg(n,a,u,null,o)}}function Mg(n){return n=Rs(n),Vg(n)}var Wh=null;function Vg(n){if(Wh=null,n=hr(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Wh=n,null}function $v(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($s()){case cr:return 2;case $r:return 8;case En:case Vi:return 32;case Aa:return 268435456;default:return 32}default:return 32}}var Pg=!1,ti=null,ni=null,si=null,yu=new Map,bu=new Map,ri=[],mT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kv(n,a){switch(n){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":yu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(a.pointerId)}}function vu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Cs(a),a!==null&&Hv(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function gT(n,a,o,u,m){switch(a){case"focusin":return ti=vu(ti,n,a,o,u,m),!0;case"dragenter":return ni=vu(ni,n,a,o,u,m),!0;case"mouseover":return si=vu(si,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return yu.set(p,vu(yu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,bu.set(p,vu(bu.get(p)||null,n,a,o,u,m)),!0}return!1}function Qv(n){var a=hr(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,xt(n.priority,function(){Gv(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,xt(n.priority,function(){Gv(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zh(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Mg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Dc=u,o.target.dispatchEvent(u),Dc=null}else return a=Cs(o),a!==null&&Hv(a),n.blockedOn=o,!1;a.shift()}return!0}function Yv(n,a,o){Zh(n)&&o.delete(a)}function pT(){Pg=!1,ti!==null&&Zh(ti)&&(ti=null),ni!==null&&Zh(ni)&&(ni=null),si!==null&&Zh(si)&&(si=null),yu.forEach(Yv),bu.forEach(Yv)}function ef(n,a){n.blockedOn===a&&(n.blockedOn=null,Pg||(Pg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pT)))}var tf=null;function Xv(n){tf!==n&&(tf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){tf===n&&(tf=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Vg(u||o)===null)continue;break}var p=Cs(o);p!==null&&(n.splice(a,3),a-=3,M0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function To(n){function a(M){return ef(M,n)}ti!==null&&ef(ti,n),ni!==null&&ef(ni,n),si!==null&&ef(si,n),yu.forEach(a),bu.forEach(a);for(var o=0;o<ri.length;o++){var u=ri[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ri.length&&(o=ri[0],o.blockedOn===null);)Qv(o),o.blockedOn===null&&ri.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[Tn]||null;if(typeof p=="function")b||Xv(o);else if(b){var j=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[Tn]||null)j=b.formAction;else if(Vg(m)!==null)continue}else j=b.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),Xv(o)}}}function Jv(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Lg(n){this._internalRoot=n}nf.prototype.render=Lg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=_s();qv(o,u,n,a,null,null)},nf.prototype.unmount=Lg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;qv(n.current,2,null,n,null,null),Vh(),a[ur]=null}};function nf(n){this._internalRoot=n}nf.prototype.unstable_scheduleHydration=function(n){if(n){var a=lt();n={blockedOn:null,target:n,priority:a};for(var o=0;o<ri.length&&a!==0&&a<ri[o].priority;o++);ri.splice(o,0,n),o===0&&Qv(n)}};var Wv=e.version;if(Wv!=="19.2.0")throw Error(s(527,Wv,"19.2.0"));he.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var xT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Fe=sf.inject(xT),ut=sf}catch{}}return _u.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=a1,p=i1,b=l1;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=Uv(n,1,!1,null,null,o,u,null,m,p,b,Jv),n[ur]=a.current,bg(n),new Lg(a)},_u.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=a1,b=i1,j=l1,M=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(M=o.formState)),a=Uv(n,1,!0,a,o??null,u,m,M,p,b,j,Jv),a.context=Bv(null),o=a.current,u=_s(),u=He(u),m=Fa(u),m.callback=null,Ha(o,m,u),o=u,a.current.lanes=o,Ne(a,o),Tr(a),n[ur]=a.current,bg(n),new nf(a)},_u.version="19.2.0",_u}var ow;function ST(){if(ow)return Bg.exports;ow=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bg.exports=TT(),Bg.exports}var AT=ST();const IT=I_(AT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),cw=r=>{const e=RT(r);return e.charAt(0).toUpperCase()+e.slice(1)},R_=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),kT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>V.createElement("svg",{ref:g,...DT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:R_("lucide",l),...!c&&!kT(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,w])=>V.createElement(x,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=V.forwardRef(({className:s,...l},c)=>V.createElement(OT,{ref:c,iconNode:e,className:R_(`lucide-${CT(cw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=cw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],VT=pe("activity",MT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cf=pe("arrow-left",PT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ot=pe("arrow-right",LT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],md=pe("award",zT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BT=pe("ban",UT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],rf=pe("bell",qT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ln=pe("book-open",FT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Qu=pe("book",HT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],cx=pe("brain",GT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],k_=pe("briefcase",$T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Go=pe("calendar",KT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],D_=pe("chart-column",QT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],O_=pe("check",YT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ni=pe("chevron-down",XT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ar=pe("chevron-left",JT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gg=pe("chevron-right",WT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rf=pe("circle-alert",ZT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ya=pe("circle-check-big",eS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pn=pe("circle-check",tS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M_=pe("circle-play",nS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],uw=pe("circle-plus",sS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dr=pe("circle-question-mark",rS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],iS=pe("circle-user",aS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oS=pe("circle-x",lS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ux=pe("clock",cS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],dS=pe("cloud-download",uS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],V_=pe("cloud-upload",hS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],mS=pe("coffee",fS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],P_=pe("copy",gS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],L_=pe("credit-card",pS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Or=pe("crown",xS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vp=pe("download",yS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],z_=pe("ellipsis",bS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wp=pe("eye",vS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],$o=pe("facebook",wS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],NS=pe("file-check",_S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],jS=pe("file-plus",ES);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],SS=pe("file-search",TS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wn=pe("file-text",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],CS=pe("fingerprint-pattern",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],dx=pe("flag",RS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],kf=pe("flame",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Lo=pe("folder-open",DS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],MS=pe("globe",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],zr=pe("graduation-cap",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Yu=pe("house",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U_=pe("info",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],B_=pe("instagram",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],um=pe("languages",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Xu=pe("layers",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],dw=pe("layout-dashboard",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],HS=pe("link",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],$S=pe("list",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ot=pe("loader-circle",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],_p=pe("log-in",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ha=pe("lock",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ju=pe("log-out",XS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cr=pe("mail",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Np=pe("map-pin",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],eA=pe("map",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ep=pe("medal",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],hw=pe("megaphone",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rA=pe("menu",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],El=pe("message-circle",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],dm=pe("message-square",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Ko=pe("monitor",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],q_=pe("move-right",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],uA=pe("octagon-alert",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],fw=pe("palette",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fA=pe("pen-line",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],hx=pe("pen-tool",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],pA=pe("percent",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],yA=pe("quote",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gd=pe("refresh-cw",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],F_=pe("rocket",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H_=pe("rotate-ccw",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pi=pe("save",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],fx=pe("school",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hs=pe("search",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pa=pe("send",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Df=pe("share-2",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],AA=pe("shield-alert",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mx=pe("shield-check",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],RA=pe("smartphone",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],G_=pe("sparkles",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jp=pe("square-pen",DA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jl=pe("star",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$_=pe("tag",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hm=pe("target",VA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],LA=pe("text-align-start",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],UA=pe("timer",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ba=pe("trash-2",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],FA=pe("trending-up",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gx=pe("triangle-alert",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],bl=pe("trophy",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],KA=pe("type",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],YA=pe("user-check",QA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xn=pe("user",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pd=pe("users",JA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ZA=pe("video",WA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],t3=pe("wifi-off",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jn=pe("x",n3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xd=pe("zap",s3),r3=()=>{};var mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},a3=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Q_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,w=c>>2,v=(c&3)<<4|f>>4;let E=(f&15)<<2|x>>6,R=x&63;g||(R=64,d||(E=64)),s.push(t[w],t[v],t[E],t[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(K_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):a3(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const v=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||v==null)throw new i3;const E=c<<2|f>>4;if(s.push(E),x!==64){const R=f<<4&240|x>>2;if(s.push(R),v!==64){const O=x<<6&192|v;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class i3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l3=function(r){const e=K_(r);return Q_.encodeByteArray(e,!0)},Y_=function(r){return l3(r).replace(/\./g,"")},X_=function(r){try{return Q_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=()=>J_().__FIREBASE_DEFAULTS__,c3=()=>{if(typeof process>"u"||typeof mw>"u")return;const r=mw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},u3=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&X_(r[1]);return e&&JSON.parse(e)},fm=()=>{try{return r3()||o3()||c3()||u3()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},d3=r=>{var e,t;return(t=(e=fm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},W_=()=>{var r;return(r=fm())==null?void 0:r.config},Z_=r=>{var e;return(e=fm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eN(r){return(await fetch(r,{credentials:"include"})).ok}const Vu={};function f3(){const r={prod:[],emulator:[]};for(const e of Object.keys(Vu))Vu[e]?r.emulator.push(e):r.prod.push(e);return r}function m3(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let gw=!1;function g3(r,e){if(typeof window>"u"||typeof document>"u"||!fc(window.location.host)||Vu[r]===e||Vu[r]||gw)return;Vu[r]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",c=f3().prod.length>0;function d(){const E=document.getElementById(s);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function x(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{gw=!0,d()},E}function w(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=m3(s),R=t("text"),O=document.getElementById(R)||document.createElement("span"),J=t("learnmore"),P=document.getElementById(J)||document.createElement("a"),le=t("preprendIcon"),se=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const te=E.element;f(te),w(P,J);const me=x();g(se,le),te.append(se,O,P,me),document.body.appendChild(te)}c?(O.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function tN(){var e;const r=(e=fm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function y3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b3(){const r=_n();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sN(){return!tN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rN(){return!tN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function px(){try{return typeof indexedDB=="object"}catch{return!1}}function aN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function v3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="FirebaseError";class lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=w3,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?_3(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new lr(l,f,s)}}function _3(r,e){return r.replace(N3,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const N3=/\{\$([^}]+)}/g;function E3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ei(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(pw(c)&&pw(d)){if(!Ei(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function pw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Iu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Cu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function j3(r,e){const t=new T3(r,e);return t.subscribe.bind(t)}class T3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");S3(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=$g),l.error===void 0&&(l.error=$g),l.complete===void 0&&(l.complete=$g);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S3(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1e3,I3=2,C3=14400*1e3,R3=.5;function xw(r,e=A3,t=I3){const s=e*Math.pow(t,r),l=Math.round(R3*s*(Math.random()-.5)*2);return Math.min(C3,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class rr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new h3;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O3(e))try{this.getOrInitializeService({instanceIdentifier:ul})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ul){return this.instances.has(e)}getOptions(e=ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:D3(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ul){return this.component?this.component.multipleInstances?e:ul:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D3(r){return r===ul?void 0:r}function O3(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const V3={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},P3=tt.INFO,L3={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},z3=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=L3[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=P3,this._logHandler=z3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const U3=(r,e)=>e.some(t=>r instanceof t);let yw,bw;function B3(){return yw||(yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q3(){return bw||(bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iN=new WeakMap,Tp=new WeakMap,lN=new WeakMap,Kg=new WeakMap,xx=new WeakMap;function F3(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(xi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&iN.set(t,r)}).catch(()=>{}),xx.set(e,r),e}function H3(r){if(Tp.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Tp.set(r,e)}let Sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Tp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lN.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function G3(r){Sp=r(Sp)}function $3(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Qg(this),e,...t);return lN.set(s,e.sort?e.sort():[e]),xi(s)}:q3().includes(r)?function(...e){return r.apply(Qg(this),e),xi(iN.get(this))}:function(...e){return xi(r.apply(Qg(this),e))}}function K3(r){return typeof r=="function"?$3(r):(r instanceof IDBTransaction&&H3(r),U3(r,B3())?new Proxy(r,Sp):r)}function xi(r){if(r instanceof IDBRequest)return F3(r);if(Kg.has(r))return Kg.get(r);const e=K3(r);return e!==r&&(Kg.set(r,e),xx.set(e,r)),e}const Qg=r=>xx.get(r);function oN(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=xi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(xi(d.result),g.oldVersion,g.newVersion,xi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const Q3=["get","getKey","getAll","getAllKeys","count"],Y3=["put","add","delete","clear"],Yg=new Map;function vw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=Y3.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Q3.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return Yg.set(e,c),c}G3(r=>({...r,get:(e,t,s)=>vw(e,t)||r.get(e,t,s),has:(e,t)=>!!vw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J3(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function J3(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ap="@firebase/app",ww="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new mm("@firebase/app"),W3="@firebase/app-compat",Z3="@firebase/analytics-compat",eI="@firebase/analytics",tI="@firebase/app-check-compat",nI="@firebase/app-check",sI="@firebase/auth",rI="@firebase/auth-compat",aI="@firebase/database",iI="@firebase/data-connect",lI="@firebase/database-compat",oI="@firebase/functions",cI="@firebase/functions-compat",uI="@firebase/installations",dI="@firebase/installations-compat",hI="@firebase/messaging",fI="@firebase/messaging-compat",mI="@firebase/performance",gI="@firebase/performance-compat",pI="@firebase/remote-config",xI="@firebase/remote-config-compat",yI="@firebase/storage",bI="@firebase/storage-compat",vI="@firebase/firestore",wI="@firebase/ai",_I="@firebase/firestore-compat",NI="firebase",EI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="[DEFAULT]",jI={[Ap]:"fire-core",[W3]:"fire-core-compat",[eI]:"fire-analytics",[Z3]:"fire-analytics-compat",[nI]:"fire-app-check",[tI]:"fire-app-check-compat",[sI]:"fire-auth",[rI]:"fire-auth-compat",[aI]:"fire-rtdb",[iI]:"fire-data-connect",[lI]:"fire-rtdb-compat",[oI]:"fire-fn",[cI]:"fire-fn-compat",[uI]:"fire-iid",[dI]:"fire-iid-compat",[hI]:"fire-fcm",[fI]:"fire-fcm-compat",[mI]:"fire-perf",[gI]:"fire-perf-compat",[pI]:"fire-rc",[xI]:"fire-rc-compat",[yI]:"fire-gcs",[bI]:"fire-gcs-compat",[vI]:"fire-fst",[_I]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[NI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new Map,TI=new Map,Cp=new Map;function _w(r,e){try{r.container.addComponent(e)}catch(t){va.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ur(r){const e=r.name;if(Cp.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,r);for(const t of Of.values())_w(t,r);for(const t of TI.values())_w(t,r);return!0}function Ll(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function qs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Pl("app","Firebase",SI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=EI;function cN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Ip,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw yi.create("bad-app-name",{appName:String(l)});if(t||(t=W_()),!t)throw yi.create("no-options");const c=Of.get(l);if(c){if(Ei(t,c.options)&&Ei(s,c.config))return c;throw yi.create("duplicate-app",{appName:l})}const d=new M3(l);for(const g of Cp.values())d.addComponent(g);const f=new AI(t,s,d);return Of.set(l,f),f}function uN(r=Ip){const e=Of.get(r);if(!e&&r===Ip&&W_())return cN();if(!e)throw yi.create("no-app",{appName:r});return e}function Hs(r,e,t){let s=jI[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(d.join(" "));return}Ur(new rr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebase-heartbeat-database",CI=1,Wu="firebase-heartbeat-store";let Xg=null;function dN(){return Xg||(Xg=oN(II,CI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(r=>{throw yi.create("idb-open",{originalErrorMessage:r.message})})),Xg}async function RI(r){try{const t=(await dN()).transaction(Wu),s=await t.objectStore(Wu).get(hN(r));return await t.done,s}catch(e){if(e instanceof lr)va.warn(e.message);else{const t=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});va.warn(t.message)}}}async function Nw(r,e){try{const s=(await dN()).transaction(Wu,"readwrite");await s.objectStore(Wu).put(e,hN(r)),await s.done}catch(t){if(t instanceof lr)va.warn(t.message);else{const s=yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});va.warn(s.message)}}}function hN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1024,DI=30;class OI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Ew();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>DI){const d=PI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){va.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ew(),{heartbeatsToSend:s,unsentEntries:l}=MI(this._heartbeatsCache.heartbeats),c=Y_(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return va.warn(t),""}}}function Ew(){return new Date().toISOString().substring(0,10)}function MI(r,e=kI){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),jw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),jw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class VI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return px()?aN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jw(r){return Y_(JSON.stringify({version:2,heartbeats:r})).length}function PI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){Ur(new rr("platform-logger",e=>new X3(e),"PRIVATE")),Ur(new rr("heartbeat",e=>new OI(e),"PRIVATE")),Hs(Ap,ww,r),Hs(Ap,ww,"esm2020"),Hs("fire-js","")}LI("");var zI="firebase",UI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(zI,UI,"app");function fN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BI=fN,mN=new Pl("auth","Firebase",fN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new mm("@firebase/auth");function qI(r,...e){Mf.logLevel<=tt.WARN&&Mf.warn(`Auth (${mc}): ${r}`,...e)}function mf(r,...e){Mf.logLevel<=tt.ERROR&&Mf.error(`Auth (${mc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(r,...e){throw yx(r,...e)}function Mr(r,...e){return yx(r,...e)}function gN(r,e,t){const s={...BI(),[e]:t};return new Pl("auth","Firebase",s).create(e,{appName:r.name})}function xa(r){return gN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return mN.create(r,...e)}function Le(r,e,...t){if(!r)throw yx(e,...t)}function fa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw mf(e),new Error(e)}function wa(r,e){r||fa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function FI(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FI()||nN()||"connection"in navigator)?navigator.onLine:!0}function GI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t){this.shortDelay=e,this.longDelay=t,wa(t>e,"Short delay should be less than long delay!"),this.isMobile=p3()||y3()}get(){return HI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r,e){wa(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QI=new bd(3e4,6e4);function Ea(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ja(r,e,t,s,l={}){return xN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=yd({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return x3()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&fc(r.emulatorConfig.host)&&(x.credentials="include"),pN.fetch()(await yN(r,r.config.apiHost,t,f),x)})}async function xN(r,e,t){r._canInitEmulator=!1;const s={...$I,...e};try{const l=new XI(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw af(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw af(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw af(r,"user-disabled",d);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw gN(r,w,x);ar(r,w)}}catch(l){if(l instanceof lr)throw l;ar(r,"network-request-failed",{message:String(l)})}}async function vd(r,e,t,s,l={}){const c=await ja(r,e,t,s,l);return"mfaPendingCredential"in c&&ar(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function yN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?bx(r.config,l):`${r.config.apiScheme}://${l}`;return KI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function YI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Mr(this.auth,"network-request-failed")),QI.get())})}}function af(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Mr(r,e,s);return l.customData._tokenResponse=t,l}function Sw(r){return r!==void 0&&r.enterprise!==void 0}class JI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WI(r,e){return ja(r,"GET","/v2/recaptchaConfig",Ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e){return ja(r,"POST","/v1/accounts:delete",e)}async function Vf(r,e){return ja(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e6(r,e=!1){const t=Ft(r),s=await t.getIdToken(e),l=vx(s);Le(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Pu(Jg(l.auth_time)),issuedAtTime:Pu(Jg(l.iat)),expirationTime:Pu(Jg(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Jg(r){return Number(r)*1e3}function vx(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const l=X_(t);return l?JSON.parse(l):(mf("Failed to decode base64 JWT payload"),null)}catch(l){return mf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Aw(r){const e=vx(r);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof lr&&t6(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function t6({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pu(this.lastLoginAt),this.creationTime=Pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(r){var v;const e=r.auth,t=await r.getIdToken(),s=await Zu(r,Vf(e,{idToken:t}));Le(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(v=l.providerUserInfo)!=null&&v.length?bN(l.providerUserInfo):[],d=r6(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new kp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,w)}async function s6(r){const e=Ft(r);await Pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r6(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function bN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(r,e){const t=await xN(r,{},async()=>{const s=yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await yN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&fc(r.emulatorConfig.host)&&(g.credentials="include"),pN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function i6(r,e){return ja(r,"POST","/v2/accounts:revokeToken",Ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Aw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=Aw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await a6(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Uo;return s&&(Le(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Le(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Le(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return fa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){Le(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new n6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new kp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Zu(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return e6(this,e)}reload(){return s6(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Pf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(xa(this.auth));const e=await this.getIdToken();return await Zu(this,ZI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:R,providerData:O,stsTokenManager:J}=t;Le(v&&J,e,"internal-error");const P=Uo.fromJSON(this.name,J);Le(typeof v=="string",e,"internal-error"),ii(s,e.name),ii(l,e.name),Le(typeof E=="boolean",e,"internal-error"),Le(typeof R=="boolean",e,"internal-error"),ii(c,e.name),ii(d,e.name),ii(f,e.name),ii(g,e.name),ii(x,e.name),ii(w,e.name);const le=new nr({uid:v,auth:e,email:l,emailVerified:E,displayName:s,isAnonymous:R,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:P,createdAt:x,lastLoginAt:w});return O&&Array.isArray(O)&&(le.providerData=O.map(se=>({...se}))),g&&(le._redirectEventId=g),le}static async _fromIdTokenResponse(e,t,s=!1){const l=new Uo;l.updateFromServerResponse(t);const c=new nr({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Pf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Le(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?bN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Uo;f.updateFromIdToken(s);const g=new nr({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new kp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;function ma(r){wa(r instanceof Function,"Expected a class definition");let e=Iw.get(r);return e?(wa(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Iw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vN.type="NONE";const Cw=vN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r,e,t){return`firebase:${r}:${e}:${t}`}class Bo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=gf(this.userKey,l.apiKey,c),this.fullPersistenceKey=gf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?nr._fromGetAccountInfoResponse(this.auth,t,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Bo(ma(Cw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ma(Cw);const d=gf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const w=await x._get(d);if(w){let v;if(typeof w=="string"){const E=await Vf(e,{idToken:w}).catch(()=>{});if(!E)break;v=await nr._fromGetAccountInfoResponse(e,E,w)}else v=nr._fromJSON(e,w);x!==c&&(f=v),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Bo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Bo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TN(e))return"Blackberry";if(SN(e))return"Webos";if(_N(e))return"Safari";if((e.includes("chrome/")||NN(e))&&!e.includes("edge/"))return"Chrome";if(jN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function wN(r=_n()){return/firefox\//i.test(r)}function _N(r=_n()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NN(r=_n()){return/crios\//i.test(r)}function EN(r=_n()){return/iemobile/i.test(r)}function jN(r=_n()){return/android/i.test(r)}function TN(r=_n()){return/blackberry/i.test(r)}function SN(r=_n()){return/webos/i.test(r)}function wx(r=_n()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function l6(r=_n()){var e;return wx(r)&&!!((e=window.navigator)!=null&&e.standalone)}function o6(){return b3()&&document.documentMode===10}function AN(r=_n()){return wx(r)||jN(r)||SN(r)||TN(r)||/windows phone/i.test(r)||EN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r,e=[]){let t;switch(r){case"Browser":t=Rw(_n());break;case"Worker":t=`${Rw(_n())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(r,e={}){return ja(r,"GET","/v2/passwordPolicy",Ea(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=6;class h6{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??d6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kw(this),this.idTokenSubscription=new kw(this),this.beforeStateQueue=new c6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ma(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),s=await nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(qs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(xa(this));const t=e?Ft(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ma(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u6(this),t=new h6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await i6(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ma(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[ma(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&qI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ci(r){return Ft(r)}class kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=j3(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m6(r){gm=r}function CN(r){return gm.loadJS(r)}function g6(){return gm.recaptchaEnterpriseScript}function p6(){return gm.gapiScript}function x6(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class y6{constructor(){this.enterprise=new b6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class b6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const v6="recaptcha-enterprise",RN="NO_RECAPTCHA";class w6{constructor(e){this.type=v6,this.auth=Ci(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{WI(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new JI(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;Sw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(RN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y6().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&Sw(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=g6();g.length!==0&&(g+=f),CN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Dw(r,e,t,s=!1,l=!1){const c=new w6(r);let d;if(l)d=RN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Lf(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Dw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Dw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(r,e){const t=Ll(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(Ei(c,e??{}))return l;ar(l,"already-initialized")}return t.initialize({options:e})}function N6(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ma);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function E6(r,e,t){const s=Ci(r);Le(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=kN(e),{host:d,port:f}=j6(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Le(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Le(Ei(x,s.config.emulator)&&Ei(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,fc(d)?(eN(`${c}//${d}${g}`),g3("Auth",!0)):T6()}function kN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function j6(r){const e=kN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Ow(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Ow(d)}}}function Ow(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function T6(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fa("not implemented")}_getIdTokenResponse(e){return fa("not implemented")}_linkToIdToken(e,t){return fa("not implemented")}_getReauthenticationResolver(e){return fa("not implemented")}}async function S6(r,e){return ja(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(r,e){return vd(r,"POST","/v1/accounts:signInWithPassword",Ea(r,e))}async function I6(r,e){return ja(r,"POST","/v1/accounts:sendOobCode",Ea(r,e))}async function C6(r,e){return I6(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(r,e){return vd(r,"POST","/v1/accounts:signInWithEmailLink",Ea(r,e))}async function k6(r,e){return vd(r,"POST","/v1/accounts:signInWithEmailLink",Ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends _x{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new ed(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ed(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(e,t,"signInWithPassword",A6);case"emailLink":return R6(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(e,s,"signUpPassword",S6);case"emailLink":return k6(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r,e){return vd(r,"POST","/v1/accounts:signInWithIdp",Ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="http://localhost";class Tl extends _x{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new Tl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,qo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:D6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M6(r){const e=Iu(Cu(r)).link,t=e?Iu(Cu(e)).deep_link_id:null,s=Iu(Cu(r)).deep_link_id;return(s?Iu(Cu(s)).link:null)||s||t||e||r}class Nx{constructor(e){const t=Iu(Cu(e)),s=t.apiKey??null,l=t.oobCode??null,c=O6(t.mode??null);Le(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=M6(e);try{return new Nx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,t){return ed._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Nx.parseLink(t);return Le(s,"argument-error"),ed._fromEmailAndCode(e,s.code,s.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends DN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends wd{constructor(){super("facebook.com")}static credential(e){return Tl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Tl._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return di.credential(t,s)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends wd{constructor(){super("github.com")}static credential(e){return Tl._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends wd{constructor(){super("twitter.com")}static credential(e,t){return Tl._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return fi.credential(t,s)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(r,e){return vd(r,"POST","/v1/accounts:signUp",Ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await nr._fromIdTokenResponse(e,s,l),d=Mw(s);return new Sl({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Mw(s);return new Sl({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Mw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends lr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new zf(e,t,s,l)}}function ON(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(r,c,e,s):c})}async function P6(r,e,t=!1){const s=await Zu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Sl._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(r,e,t=!1){const{auth:s}=r;if(qs(s.app))return Promise.reject(xa(s));const l="reauthenticate";try{const c=await Zu(r,ON(s,l,e,r),t);Le(c.idToken,s,"internal-error");const d=vx(c.idToken);Le(d,s,"internal-error");const{sub:f}=d;return Le(r.uid===f,s,"user-mismatch"),Sl._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ar(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(r,e,t=!1){if(qs(r.app))return Promise.reject(xa(r));const s="signIn",l=await ON(r,s,e),c=await Sl._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function z6(r,e){return MN(Ci(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(r){const e=Ci(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U6(r,e,t){const s=Ci(r);await Lf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",C6)}async function B6(r,e,t){if(qs(r.app))return Promise.reject(xa(r));const s=Ci(r),d=await Lf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",V6).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&VN(r),g}),f=await Sl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function q6(r,e,t){return qs(r.app)?Promise.reject(xa(r)):z6(Ft(r),gc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&VN(r),s})}function F6(r,e,t,s){return Ft(r).onIdTokenChanged(e,t,s)}function H6(r,e,t){return Ft(r).beforeAuthStateChanged(e,t)}function G6(r,e,t,s){return Ft(r).onAuthStateChanged(e,t,s)}function $6(r){return Ft(r).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=1e3,Q6=10;class LN extends PN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);o6()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Q6):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},K6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LN.type="LOCAL";const Y6=LN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN extends PN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zN.type="SESSION";const UN=zN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new pm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await X6(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=Ex("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(v){const E=v;if(E.data.eventId===x)switch(E.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(E.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function W6(r){Vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function Z6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function tC(){return BN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebaseLocalStorageDb",nC=1,Bf="firebaseLocalStorage",FN="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xm(r,e){return r.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function sC(){const r=indexedDB.deleteDatabase(qN);return new _d(r).toPromise()}function Dp(){const r=indexedDB.open(qN,nC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Bf,{keyPath:FN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Bf)?e(s):(s.close(),await sC(),e(await Dp()))})})}async function Vw(r,e,t){const s=xm(r,!0).put({[FN]:e,value:t});return new _d(s).toPromise()}async function rC(r,e){const t=xm(r,!1).get(e),s=await new _d(t).toPromise();return s===void 0?null:s.value}function Pw(r,e){const t=xm(r,!0).delete(e);return new _d(t).toPromise()}const aC=800,iC=3;class HN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>iC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pm._getInstance(tC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await Z6(),!this.activeServiceWorker)return;this.sender=new J6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dp();return await Vw(e,Uf,"1"),await Pw(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Vw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>rC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Pw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=xm(l,!1).getAll();return new _d(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HN.type="LOCAL";const lC=HN;new bd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r,e){return e?ma(e):(Le(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends _x{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cC(r){return MN(r.auth,new jx(r),r.bypassAuthState)}function uC(r){const{auth:e,user:t}=r;return Le(t,e,"internal-error"),L6(t,new jx(r),r.bypassAuthState)}async function dC(r){const{auth:e,user:t}=r;return Le(t,e,"internal-error"),P6(t,new jx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cC;case"linkViaPopup":case"linkViaRedirect":return dC;case"reauthViaPopup":case"reauthViaRedirect":return uC;default:ar(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new bd(2e3,1e4);class zo extends GN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=Ex();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hC.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="pendingRedirect",pf=new Map;class mC extends GN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const s=await gC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gC(r,e){const t=yC(e),s=xC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function pC(r,e){pf.set(r._key(),e)}function xC(r){return ma(r._redirectPersistence)}function yC(r){return gf(fC,r.config.apiKey,r.name)}async function bC(r,e,t=!1){if(qs(r.app))return Promise.reject(xa(r));const s=Ci(r),l=oC(s,e),d=await new mC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=600*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_C(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!$N(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Mr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lw(e))}saveEventToCache(e){this.cachedEventUids.add(Lw(e)),this.lastProcessedEventTime=Date.now()}}function Lw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function $N({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _C(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $N(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(r,e={}){return ja(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jC=/^https?/;async function TC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NC(r);for(const t of e)try{if(SC(t))return}catch{}ar(r,"unauthorized-domain")}function SC(r){const e=Rp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!jC.test(t))return!1;if(EC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new bd(3e4,6e4);function zw(){const r=Vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function IC(r){return new Promise((e,t)=>{var l,c,d;function s(){zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zw(),t(Mr(r,"network-request-failed"))},timeout:AC.get()})}if((c=(l=Vr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Vr().gapi)!=null&&d.load)s();else{const f=x6("iframefcb");return Vr()[f]=()=>{gapi.load?s():t(Mr(r,"network-request-failed"))},CN(`${p6()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw xf=null,e})}let xf=null;function CC(r){return xf=xf||IC(r),xf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new bd(5e3,15e3),kC="__/auth/iframe",DC="emulator/auth/iframe",OC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(r){const e=r.config;Le(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?bx(e,DC):`https://${r.config.authDomain}/${kC}`,s={apiKey:e.apiKey,appName:r.name,v:mc},l=MC.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${yd(s).slice(1)}`}async function PC(r){const e=await CC(r),t=Vr().gapi;return Le(t,r,"internal-error"),e.open({where:document.body,url:VC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OC,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Mr(r,"network-request-failed"),f=Vr().setTimeout(()=>{c(d)},RC.get());function g(){Vr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,UC=600,BC="_blank",qC="http://localhost";class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FC(r,e,t,s=zC,l=UC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...LC,width:s.toString(),height:l.toString(),top:c,left:d},x=_n().toLowerCase();t&&(f=NN(x)?BC:t),wN(x)&&(e=e||qC,g.scrollbars="yes");const w=Object.entries(g).reduce((E,[R,O])=>`${E}${R}=${O},`,"");if(l6(x)&&f!=="_self")return HC(e||"",f),new Uw(null);const v=window.open(e||"",f,w);Le(v,r,"popup-blocked");try{v.focus()}catch{}return new Uw(v)}function HC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__/auth/handler",$C="emulator/auth/handler",KC=encodeURIComponent("fac");async function Bw(r,e,t,s,l,c){Le(r.config.authDomain,r,"auth-domain-config-required"),Le(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:mc,eventId:l};if(e instanceof DN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",E3(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,v]of Object.entries({}))d[w]=v}if(e instanceof wd){const w=e.getScopes().filter(v=>v!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),x=g?`#${KC}=${encodeURIComponent(g)}`:"";return`${QC(r)}?${yd(f).slice(1)}${x}`}function QC({config:r}){return r.emulator?bx(r,$C):`https://${r.authDomain}/${GC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="webStorageSupport";class YC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UN,this._completeRedirectFn=bC,this._overrideRedirectResult=pC}async _openPopup(e,t,s,l){var d;wa((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Bw(e,t,s,Rp(),l);return FC(e,c,Ex())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Bw(e,t,s,Rp(),l);return W6(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(wa(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await PC(e),s=new wC(e);return t.register("authEvent",l=>(Le(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wg,{type:Wg},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Wg];c!==void 0&&t(!!c),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AN()||_N()||wx()}}const XC=YC;var qw="@firebase/auth",Fw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZC(r){Ur(new rr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Le(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IN(r)},x=new f6(s,l,c,g);return N6(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ur(new rr("auth-internal",e=>{const t=Ci(e.getProvider("auth").getImmediate());return(s=>new JC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(qw,Fw,WC(r)),Hs(qw,Fw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=300,tR=Z_("authIdTokenMaxAge")||eR;let Hw=null;const nR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>tR)return;const l=t==null?void 0:t.token;Hw!==l&&(Hw=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function sR(r=uN()){const e=Ll(r,"auth");if(e.isInitialized())return e.getImmediate();const t=_6(r,{popupRedirectResolver:XC,persistence:[lC,Y6,UN]}),s=Z_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=nR(c.toString());H6(t,d,()=>d(t.currentUser)),F6(t,f=>d(f))}}const l=d3("auth");return l&&E6(t,`http://${l}`),t}function rR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}m6({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Mr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",rR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZC("Browser");var Gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,KN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function A(){}A.prototype=T.prototype,N.F=T.prototype,N.prototype=new A,N.prototype.constructor=N,N.D=function(C,k,z){for(var I=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)I[ge-2]=arguments[ge];return T.prototype[k].apply(C,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,T,A){A||(A=0);const C=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)C[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;k<16;++k)C[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=N.g[0],A=N.g[1],k=N.g[2];let z=N.g[3],I;I=T+(z^A&(k^z))+C[0]+3614090360&4294967295,T=A+(I<<7&4294967295|I>>>25),I=z+(k^T&(A^k))+C[1]+3905402710&4294967295,z=T+(I<<12&4294967295|I>>>20),I=k+(A^z&(T^A))+C[2]+606105819&4294967295,k=z+(I<<17&4294967295|I>>>15),I=A+(T^k&(z^T))+C[3]+3250441966&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(z^A&(k^z))+C[4]+4118548399&4294967295,T=A+(I<<7&4294967295|I>>>25),I=z+(k^T&(A^k))+C[5]+1200080426&4294967295,z=T+(I<<12&4294967295|I>>>20),I=k+(A^z&(T^A))+C[6]+2821735955&4294967295,k=z+(I<<17&4294967295|I>>>15),I=A+(T^k&(z^T))+C[7]+4249261313&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(z^A&(k^z))+C[8]+1770035416&4294967295,T=A+(I<<7&4294967295|I>>>25),I=z+(k^T&(A^k))+C[9]+2336552879&4294967295,z=T+(I<<12&4294967295|I>>>20),I=k+(A^z&(T^A))+C[10]+4294925233&4294967295,k=z+(I<<17&4294967295|I>>>15),I=A+(T^k&(z^T))+C[11]+2304563134&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(z^A&(k^z))+C[12]+1804603682&4294967295,T=A+(I<<7&4294967295|I>>>25),I=z+(k^T&(A^k))+C[13]+4254626195&4294967295,z=T+(I<<12&4294967295|I>>>20),I=k+(A^z&(T^A))+C[14]+2792965006&4294967295,k=z+(I<<17&4294967295|I>>>15),I=A+(T^k&(z^T))+C[15]+1236535329&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(k^z&(A^k))+C[1]+4129170786&4294967295,T=A+(I<<5&4294967295|I>>>27),I=z+(A^k&(T^A))+C[6]+3225465664&4294967295,z=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(z^T))+C[11]+643717713&4294967295,k=z+(I<<14&4294967295|I>>>18),I=A+(z^T&(k^z))+C[0]+3921069994&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^z&(A^k))+C[5]+3593408605&4294967295,T=A+(I<<5&4294967295|I>>>27),I=z+(A^k&(T^A))+C[10]+38016083&4294967295,z=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(z^T))+C[15]+3634488961&4294967295,k=z+(I<<14&4294967295|I>>>18),I=A+(z^T&(k^z))+C[4]+3889429448&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^z&(A^k))+C[9]+568446438&4294967295,T=A+(I<<5&4294967295|I>>>27),I=z+(A^k&(T^A))+C[14]+3275163606&4294967295,z=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(z^T))+C[3]+4107603335&4294967295,k=z+(I<<14&4294967295|I>>>18),I=A+(z^T&(k^z))+C[8]+1163531501&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^z&(A^k))+C[13]+2850285829&4294967295,T=A+(I<<5&4294967295|I>>>27),I=z+(A^k&(T^A))+C[2]+4243563512&4294967295,z=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(z^T))+C[7]+1735328473&4294967295,k=z+(I<<14&4294967295|I>>>18),I=A+(z^T&(k^z))+C[12]+2368359562&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(A^k^z)+C[5]+4294588738&4294967295,T=A+(I<<4&4294967295|I>>>28),I=z+(T^A^k)+C[8]+2272392833&4294967295,z=T+(I<<11&4294967295|I>>>21),I=k+(z^T^A)+C[11]+1839030562&4294967295,k=z+(I<<16&4294967295|I>>>16),I=A+(k^z^T)+C[14]+4259657740&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^z)+C[1]+2763975236&4294967295,T=A+(I<<4&4294967295|I>>>28),I=z+(T^A^k)+C[4]+1272893353&4294967295,z=T+(I<<11&4294967295|I>>>21),I=k+(z^T^A)+C[7]+4139469664&4294967295,k=z+(I<<16&4294967295|I>>>16),I=A+(k^z^T)+C[10]+3200236656&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^z)+C[13]+681279174&4294967295,T=A+(I<<4&4294967295|I>>>28),I=z+(T^A^k)+C[0]+3936430074&4294967295,z=T+(I<<11&4294967295|I>>>21),I=k+(z^T^A)+C[3]+3572445317&4294967295,k=z+(I<<16&4294967295|I>>>16),I=A+(k^z^T)+C[6]+76029189&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^z)+C[9]+3654602809&4294967295,T=A+(I<<4&4294967295|I>>>28),I=z+(T^A^k)+C[12]+3873151461&4294967295,z=T+(I<<11&4294967295|I>>>21),I=k+(z^T^A)+C[15]+530742520&4294967295,k=z+(I<<16&4294967295|I>>>16),I=A+(k^z^T)+C[2]+3299628645&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(k^(A|~z))+C[0]+4096336452&4294967295,T=A+(I<<6&4294967295|I>>>26),I=z+(A^(T|~k))+C[7]+1126891415&4294967295,z=T+(I<<10&4294967295|I>>>22),I=k+(T^(z|~A))+C[14]+2878612391&4294967295,k=z+(I<<15&4294967295|I>>>17),I=A+(z^(k|~T))+C[5]+4237533241&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~z))+C[12]+1700485571&4294967295,T=A+(I<<6&4294967295|I>>>26),I=z+(A^(T|~k))+C[3]+2399980690&4294967295,z=T+(I<<10&4294967295|I>>>22),I=k+(T^(z|~A))+C[10]+4293915773&4294967295,k=z+(I<<15&4294967295|I>>>17),I=A+(z^(k|~T))+C[1]+2240044497&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~z))+C[8]+1873313359&4294967295,T=A+(I<<6&4294967295|I>>>26),I=z+(A^(T|~k))+C[15]+4264355552&4294967295,z=T+(I<<10&4294967295|I>>>22),I=k+(T^(z|~A))+C[6]+2734768916&4294967295,k=z+(I<<15&4294967295|I>>>17),I=A+(z^(k|~T))+C[13]+1309151649&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~z))+C[4]+4149444226&4294967295,T=A+(I<<6&4294967295|I>>>26),I=z+(A^(T|~k))+C[11]+3174756917&4294967295,z=T+(I<<10&4294967295|I>>>22),I=k+(T^(z|~A))+C[2]+718787259&4294967295,k=z+(I<<15&4294967295|I>>>17),I=A+(z^(k|~T))+C[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+z&4294967295}s.prototype.v=function(N,T){T===void 0&&(T=N.length);const A=T-this.blockSize,C=this.C;let k=this.h,z=0;for(;z<T;){if(k==0)for(;z<=A;)l(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<T;)if(C[k++]=N.charCodeAt(z++),k==this.blockSize){l(this,C),k=0;break}}else for(;z<T;)if(C[k++]=N[z++],k==this.blockSize){l(this,C),k=0;break}}this.h=k,this.o+=T},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;T=this.o*8;for(var A=N.length-8;A<N.length;++A)N[A]=T&255,T/=256;for(this.v(N),N=Array(16),T=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)N[T++]=this.g[A]>>>C&255;return N};function c(N,T){var A=f;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=T(N)}function d(N,T){this.h=T;const A=[];let C=!0;for(let k=N.length-1;k>=0;k--){const z=N[k]|0;C&&z==T||(A[k]=z,C=!1)}this.g=A}var f={};function g(N){return-128<=N&&N<128?c(N,function(T){return new d([T|0],T<0?-1:0)}):new d([N|0],N<0?-1:0)}function x(N){if(isNaN(N)||!isFinite(N))return v;if(N<0)return P(x(-N));const T=[];let A=1;for(let C=0;N>=A;C++)T[C]=N/A|0,A*=4294967296;return new d(T,0)}function w(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return P(w(N.substring(1),T));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(T,8));let C=v;for(let z=0;z<N.length;z+=8){var k=Math.min(8,N.length-z);const I=parseInt(N.substring(z,z+k),T);k<8?(k=x(Math.pow(T,k)),C=C.j(k).add(x(I))):(C=C.j(A),C=C.add(x(I)))}return C}var v=g(0),E=g(1),R=g(16777216);r=d.prototype,r.m=function(){if(J(this))return-P(this).m();let N=0,T=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);N+=(C>=0?C:4294967296+C)*T,T*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(J(this))return"-"+P(this).toString(N);const T=x(Math.pow(N,6));var A=this;let C="";for(;;){const k=me(A,T).g;A=le(A,k.j(T));let z=((A.g.length>0?A.g[0]:A.h)>>>0).toString(N);if(A=k,O(A))return z+C;for(;z.length<6;)z="0"+z;C=z+C}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(let T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function J(N){return N.h==-1}r.l=function(N){return N=le(this,N),J(N)?-1:O(N)?0:1};function P(N){const T=N.g.length,A=[];for(let C=0;C<T;C++)A[C]=~N.g[C];return new d(A,~N.h).add(E)}r.abs=function(){return J(this)?P(this):this},r.add=function(N){const T=Math.max(this.g.length,N.g.length),A=[];let C=0;for(let k=0;k<=T;k++){let z=C+(this.i(k)&65535)+(N.i(k)&65535),I=(z>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);C=I>>>16,z&=65535,I&=65535,A[k]=I<<16|z}return new d(A,A[A.length-1]&-2147483648?-1:0)};function le(N,T){return N.add(P(T))}r.j=function(N){if(O(this)||O(N))return v;if(J(this))return J(N)?P(this).j(P(N)):P(P(this).j(N));if(J(N))return P(this.j(P(N)));if(this.l(R)<0&&N.l(R)<0)return x(this.m()*N.m());const T=this.g.length+N.g.length,A=[];for(var C=0;C<2*T;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let k=0;k<N.g.length;k++){const z=this.i(C)>>>16,I=this.i(C)&65535,ge=N.i(k)>>>16,Ie=N.i(k)&65535;A[2*C+2*k]+=I*Ie,se(A,2*C+2*k),A[2*C+2*k+1]+=z*Ie,se(A,2*C+2*k+1),A[2*C+2*k+1]+=I*ge,se(A,2*C+2*k+1),A[2*C+2*k+2]+=z*ge,se(A,2*C+2*k+2)}for(N=0;N<T;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=T;N<2*T;N++)A[N]=0;return new d(A,0)};function se(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function te(N,T){this.g=N,this.h=T}function me(N,T){if(O(T))throw Error("division by zero");if(O(N))return new te(v,v);if(J(N))return T=me(P(N),T),new te(P(T.g),P(T.h));if(J(T))return T=me(N,P(T)),new te(P(T.g),T.h);if(N.g.length>30){if(J(N)||J(T))throw Error("slowDivide_ only works with positive integers.");for(var A=E,C=T;C.l(N)<=0;)A=ce(A),C=ce(C);var k=W(A,1),z=W(C,1);for(C=W(C,2),A=W(A,2);!O(C);){var I=z.add(C);I.l(N)<=0&&(k=k.add(A),z=I),C=W(C,1),A=W(A,1)}return T=le(N,k.j(T)),new te(k,T)}for(k=v;N.l(T)>=0;){for(A=Math.max(1,Math.floor(N.m()/T.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),z=x(A),I=z.j(T);J(I)||I.l(N)>0;)A-=C,z=x(A),I=z.j(T);O(z)&&(z=E),k=k.add(z),N=le(N,I)}return new te(k,N)}r.B=function(N){return me(this,N).h},r.and=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let C=0;C<T;C++)A[C]=this.i(C)&N.i(C);return new d(A,this.h&N.h)},r.or=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let C=0;C<T;C++)A[C]=this.i(C)|N.i(C);return new d(A,this.h|N.h)},r.xor=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let C=0;C<T;C++)A[C]=this.i(C)^N.i(C);return new d(A,this.h^N.h)};function ce(N){const T=N.g.length+1,A=[];for(let C=0;C<T;C++)A[C]=N.i(C)<<1|N.i(C-1)>>>31;return new d(A,N.h)}function W(N,T){const A=T>>5;T%=32;const C=N.g.length-A,k=[];for(let z=0;z<C;z++)k[z]=T>0?N.i(z+A)>>>T|N.i(z+A+1)<<32-T:N.i(z+A);return new d(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,KN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=w,bi=d}).apply(typeof Gw<"u"?Gw:typeof self<"u"?self:typeof window<"u"?window:{});var lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QN,Ru,YN,yf,Op,XN,JN,WN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof lf=="object"&&lf];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in _))break e;_=_[H]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function w(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function v(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(S,H,Z){for(var ve=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ve[Ge-2]=arguments[Ge];return y.prototype[H].apply(S,ve)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function O(h,y){for(let S=1;S<arguments.length;S++){const H=arguments[S];var _=typeof H;if(_=_!="object"?_:H?Array.isArray(H)?"array":_:"null",_=="array"||_=="object"&&typeof H.length=="number"){_=h.length||0;const Z=H.length||0;h.length=_+Z;for(let ve=0;ve<Z;ve++)h[_+ve]=H[ve]}else h.push(H)}}class J{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(h){d.setTimeout(()=>{throw h},0)}function le(){var h=N;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class se{constructor(){this.h=this.g=null}add(y,_){const S=te.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new J(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,W=!1,N=new se,T=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(A)}};function A(){for(var h;h=le();){try{h.h.call(h.g)}catch(_){P(_)}var y=te;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function ge(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(ge,k),ge.prototype.init=function(h,y){const _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),G=0;function he(h,y,_,S,H){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=H,this.key=++G,this.da=this.fa=!1}function ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function $(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function _e(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function D(h){const y={};for(const _ in h)y[_]=h[_];return y}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,y){let _,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(_ in S)h[_]=S[_];for(let Z=0;Z<B.length;Z++)_=B[Z],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function Y(h){this.src=h,this.g={},this.h=0}Y.prototype.add=function(h,y,_,S,H){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const ve=Ee(h,y,S,H);return ve>-1?(y=h[ve],_||(y.fa=!1)):(y=new he(y,this.src,Z,!!S,H),y.fa=_,h.push(y)),y};function fe(h,y){const _=y.type;if(_ in h.g){var S=h.g[_],H=Array.prototype.indexOf.call(S,y,void 0),Z;(Z=H>=0)&&Array.prototype.splice.call(S,H,1),Z&&(ee(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ee(h,y,_,S){for(let H=0;H<h.length;++H){const Z=h[H];if(!Z.da&&Z.listener==y&&Z.capture==!!_&&Z.ha==S)return H}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),Xe={};function Se(h,y,_,S,H){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Se(h,y[Z],_,S,H);return null}return _=Hr(_),h&&h[Ie]?h.J(y,_,f(S)?!!S.capture:!1,H):Ye(h,y,_,!1,S,H)}function Ye(h,y,_,S,H,Z){if(!y)throw Error("Invalid event type");const ve=f(H)?!!H.capture:!!H;let Ge=fs(h);if(Ge||(h[Re]=Ge=new Y(h)),_=Ge.add(y,_,S,ve,Z),_.proxy)return _;if(S=st(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)z||(H=ve),H===void 0&&(H=!1),h.addEventListener(y.toString(),S,H);else if(h.attachEvent)h.attachEvent(Cn(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function h(_){return y.call(h.src,h.listener,_)}const y=Is;return h}function mt(h,y,_,S,H){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)mt(h,y[Z],_,S,H);else S=f(S)?!!S.capture:!!S,_=Hr(_),h&&h[Ie]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],_=Ee(y,_,S,H),_>-1&&(ee(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=fs(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,_,S,H)),(_=h>-1?y[h]:null)&&rt(_))}function rt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ie])fe(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(Cn(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=fs(y))?(fe(_,h),_.h==0&&(_.src=null,y[Re]=null)):ee(h)}}}function Cn(h){return h in Xe?Xe[h]:Xe[h]="on"+h}function Is(h,y){if(h.da)h=!0;else{y=new ge(y,this);const _=h.listener,S=h.ha||h.src;h.fa&&rt(h),h=_.call(S,y)}return h}function fs(h){return h=h[Re],h instanceof Y?h:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hr(h){return typeof h=="function"?h:(h[or]||(h[or]=function(y){return h.handleEvent(y)}),h[or])}function Vt(){C.call(this),this.i=new Y(this),this.M=this,this.G=null}v(Vt,C),Vt.prototype[Ie]=!0,Vt.prototype.removeEventListener=function(h,y,_,S){mt(this,h,y,_,S)};function gt(h,y){var _,S=h.G;if(S)for(_=[];S;S=S.G)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var H=y;y=new k(S,h),L(y,H)}H=!0;let Z,ve;if(_)for(ve=_.length-1;ve>=0;ve--)Z=y.g=_[ve],H=Wt(Z,S,!0,y)&&H;if(Z=y.g=h,H=Wt(Z,S,!0,y)&&H,H=Wt(Z,S,!1,y)&&H,_)for(ve=0;ve<_.length;ve++)Z=y.g=_[ve],H=Wt(Z,S,!1,y)&&H}Vt.prototype.N=function(){if(Vt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let S=0;S<_.length;S++)ee(_[S]);delete h.g[y],h.h--}}this.G=null},Vt.prototype.J=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},Vt.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function Wt(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let Z=0;Z<y.length;++Z){const ve=y[Z];if(ve&&!ve.da&&ve.capture==_){const Ge=ve.listener,en=ve.ha||ve.src;ve.fa&&fe(h.i,ve),H=Ge.call(en,S)!==!1&&H}}return H&&!S.defaultPrevented}function Mi(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Gr(h){h.g=Mi(()=>{h.g=null,h.i&&(h.i=!1,Gr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zt extends C{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(h){C.call(this),this.h=h,this.g={}}v($s,C);var cr=[];function $r(h){$(h.g,function(y,_){this.g.hasOwnProperty(_)&&rt(y)},h),h.g={}}$s.prototype.N=function(){$s.Z.N.call(this),$r(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=d.JSON.stringify,Vi=d.JSON.parse,Aa=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ue(){}function ct(){}var Fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ut(){k.call(this,"d")}v(ut,k);function ln(){k.call(this,"c")}v(ln,k);var St={},Ht=null;function Kn(){return Ht=Ht||new Vt}St.Ia="serverreachability";function Gt(h){k.call(this,St.Ia,h)}v(Gt,k);function $t(h){const y=Kn();gt(y,new Gt(y))}St.STAT_EVENT="statevent";function Rn(h,y){k.call(this,St.STAT_EVENT,h),this.stat=y}v(Rn,k);function pt(h){const y=Kn();gt(y,new Rn(y,h))}St.Ja="timingevent";function yn(h,y){k.call(this,St.Ja,h),this.size=y}v(yn,k);function on(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Pi(h,y,_,S,H,Z){h.info(function(){if(h.g)if(Z){var ve="",Ge=Z.split("&");for(let yt=0;yt<Ge.length;yt++){var en=Ge[yt].split("=");if(en.length>1){const zt=en[0];en=en[1];const Ds=zt.split("_");ve=Ds.length>=2&&Ds[1]=="type"?ve+(zt+"="+en+"&"):ve+(zt+"=redacted&")}}}else ve=null;else ve=Z;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+y+`
`+_+`
`+ve})}function Kr(h,y,_,S,H,Z,ve){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+y+`
`+_+`
`+Z+" "+ve})}function oe(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+be(h,_)+(S?" "+S:"")})}function Ne(h,y){h.info(function(){return"TIMEOUT: "+y})}jn.prototype.info=function(){};function be(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var _=Z[h];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ve=1;ve<S.length;ve++)S[ve]=""}}}}return En(Z)}catch{return y}}var Ae={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ve={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Be;function He(){}v(He,ue),He.prototype.g=function(){return new XMLHttpRequest},Be=new He;function dt(h){return encodeURIComponent(String(h))}function lt(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function xt(h,y,_,S){this.j=h,this.i=y,this.l=_,this.S=S||1,this.V=new $s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kt}function Kt(){this.i=null,this.g="",this.h=!1}var Qt={},Tn={};function ur(h,y,_){h.M=1,h.A=Li(un(y)),h.u=_,h.R=!0,Ul(h,null)}function Ul(h,y){h.F=Date.now(),dr(h),h.B=un(h.A);var _=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Hl(_.i,"t",S),h.C=0,_=h.j.L,h.h=new Kt,h.g=Jd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Zt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,S=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(cr[0]=H.toString()),H=cr);for(let Z=0;Z<H.length;Z++){const ve=Se(_,H[Z],S||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),$t(),Pi(h.i,h.v,h.B,h.l,h.S,h.u)}xt.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ys(h)==3?y.j():this.Y(h)},xt.prototype.Y=function(h){try{if(h==this.g)e:{const Ge=Ys(this.g),en=this.g.ya(),yt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||kn(this.g)))){this.K||Ge!=4||en==7||(en==8||yt<=0?$t(3):$t(2)),hr(this);var y=this.g.ca();this.X=y;var _=Gm(this);if(this.o=y==200,Kr(this.i,this.v,this.B,this.l,this.S,Ge,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var Z=S;break t}}Z=null}if(h=Z)oe(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fr(this,h);else{this.o=!1,this.m=3,pt(12),ms(this),Cs(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<_.length;)if(zt=Ld(this,_),zt==Tn){Ge==4&&(this.m=4,pt(14),h=!1),oe(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Qt){this.m=4,pt(15),oe(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else oe(this.i,this.l,zt,null),fr(this,zt);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||_.length!=0||this.h.h||(this.m=1,pt(16),h=!1),this.o=this.o&&h,!h)oe(this.i,this.l,_,"[Invalid Chunked Response]"),ms(this),Cs(this);else if(_.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Lc(ve),ve.P=!0,pt(11))}}else oe(this.i,this.l,_,null),fr(this,_);Ge==4&&ms(this),this.o&&!this.K&&(Ge==4?Kd(this.j,this):(this.o=!1,dr(this)))}else Yr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),ms(this),Cs(this)}}}catch{}finally{}};function Gm(h){if(!Pd(h))return h.g.la();const y=kn(h.g);if(y==="")return"";let _="";const S=y.length,H=Ys(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ms(h),Cs(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<S;Z++)h.h.h=!0,_+=h.h.i.decode(y[Z],{stream:!(H&&Z==S-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Pd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ld(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?Tn:(_=Number(y.substring(_,S)),isNaN(_)?Qt:(S+=1,S+_>y.length?Tn:(y=y.slice(S,S+_),h.C=S+_,y)))}xt.prototype.cancel=function(){this.K=!0,ms(this)};function dr(h){h.T=Date.now()+h.H,Bl(h,h.H)}function Bl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=on(x(h.aa,h),y)}function hr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}xt.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ne(this.i,this.B),this.M!=2&&($t(),pt(17)),ms(this),this.m=2,Cs(this)):Bl(this,this.T-h)};function Cs(h){h.j.I==0||h.K||Kd(h.j,h)}function ms(h){hr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,$r(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function fr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||gr(_.h,h))){if(!h.L&&gr(_.h,h)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Yl(_),Va(_);else break e;Gi(_),pt(18)}}else _.xa=H[1],0<_.xa-_.K&&H[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=on(x(_.Va,_),6e3));mr(_.h)<=1&&_.ta&&(_.ta=void 0)}else wr(_,11)}else if((h.L||_.g==h)&&Yl(_),!I(y))for(H=_.Ba.g.parse(y),y=0;y<H.length;y++){let yt=H[y];const zt=yt[0];if(!(zt<=_.K))if(_.K=zt,yt=yt[1],_.I==2)if(yt[0]=="c"){_.M=yt[1],_.ba=yt[2];const Ds=yt[3];Ds!=null&&(_.ka=Ds,_.j.info("VER="+_.ka));const _r=yt[4];_r!=null&&(_.za=_r,_.j.info("SVER="+_.za));const Xs=yt[5];Xs!=null&&typeof Xs=="number"&&Xs>0&&(S=1.5*Xs,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Js=h.g;if(Js){const $i=Js.g?Js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var Z=S.h;Z.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Tc(Z,Z.h),Z.h=null))}if(S.G){const Xl=Js.g?Js.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(S.wa=Xl,wt(S.J,S.G,Xl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var ve=h;if(S.na=Xd(S,S.L?S.ba:null,S.W),ve.L){Sc(S.h,ve);var Ge=ve,en=S.O;en&&(Ge.H=en),Ge.D&&(hr(Ge),dr(Ge)),S.g=ve}else Gd(S);_.i.length>0&&vr(_)}else yt[0]!="stop"&&yt[0]!="close"||wr(_,7);else _.I==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?wr(_,7):Vc(_):yt[0]!="noop"&&_.l&&_.l.qa(yt),_.A=0)}}$t(4)}catch{}}var cn=class{constructor(h,y){this.g=h,this.map=y}};function Ec(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function mr(h){return h.h?1:h.g?h.g.size:0}function gr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Tc(h,y){h.g?h.g.add(y):h.h=y}function Sc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ec.prototype.cancel=function(){if(this.i=Ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ac(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return R(h.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ql(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const S=h[_].indexOf("=");let H,Z=null;S>=0?(H=h[_].substring(0,S),Z=h[_].substring(S+1)):H=h[_],y(H,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function gs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof gs?(this.l=h.l,Sn(this,h.j),this.o=h.o,this.g=h.g,Ia(this,h.u),this.h=h.h,Ic(this,Fd(h.i)),this.m=h.m):h&&(y=String(h).match(zd))?(this.l=!1,Sn(this,y[1]||"",!0),this.o=pr(y[2]||""),this.g=pr(y[3]||"",!0),Ia(this,y[4]),this.h=pr(y[5]||"",!0),Ic(this,y[6]||"",!0),this.m=pr(y[7]||"")):(this.l=!1,this.i=new Ra(null,this.l))}gs.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(zi(y,Fl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(zi(y,Fl,!0),"@"),h.push(dt(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(zi(_,_.charAt(0)=="/"?Cc:Ud,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",zi(_,Bd)),h.join("")},gs.prototype.resolve=function(h){const y=un(this);let _=!!h.j;_?Sn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var S=h.h;if(_)Ia(y,h.u);else if(_=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=y.h.lastIndexOf("/");H!=-1&&(S=y.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const Z=[];for(let ve=0;ve<H.length;){const Ge=H[ve++];Ge=="."?S&&ve==H.length&&Z.push(""):Ge==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),S&&ve==H.length&&Z.push("")):(Z.push(Ge),S=!0)}S=Z.join("/")}else S=H}return _?y.h=S:_=h.i.toString()!=="",_?Ic(y,Fd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function un(h){return new gs(h)}function Sn(h,y,_){h.j=_?pr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ia(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ic(h,y,_){y instanceof Ra?(h.i=y,Gl(h.i,h.l)):(_||(y=zi(y,Ca)),h.i=new Ra(y,h.l))}function wt(h,y,_){h.i.set(y,_)}function Li(h){return wt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function pr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,ss),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ss(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fl=/[#\/\?@]/g,Ud=/[#\?:]/g,Cc=/[#\?]/g,Ca=/[#\?@]/g,Bd=/#/g;function Ra(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function rs(h){h.g||(h.g=new Map,h.h=0,h.i&&ql(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Ra.prototype,r.add=function(h,y){rs(this),this.i=null,h=ka(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function qd(h,y){rs(h),y=ka(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Rc(h,y){return rs(h),y=ka(h,y),h.g.has(y)}r.forEach=function(h,y){rs(this),this.g.forEach(function(_,S){_.forEach(function(H){h.call(y,H,S,this)},this)},this)};function kc(h,y){rs(h);let _=[];if(typeof y=="string")Rc(h,y)&&(_=_.concat(h.g.get(ka(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return rs(this),this.i=null,h=ka(this,h),Rc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=kc(this,h),h.length>0?String(h[0]):y):y};function Hl(h,y,_){qd(h,y),_.length>0&&(h.i=null,h.g.set(ka(h,y),R(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const H=dt(_);_=kc(this,_);for(let Z=0;Z<_.length;Z++){let ve=H;_[Z]!==""&&(ve+="="+dt(_[Z])),h.push(ve)}}return this.i=h.join("&")};function Fd(h){const y=new Ra;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ka(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Gl(h,y){y&&!h.j&&(rs(h),h.i=null,h.g.forEach(function(_,S){const H=S.toLowerCase();S!=H&&(qd(this,S),Hl(this,H,_))},h)),h.j=y}function Ks(h,y){const _=new jn;if(d.Image){const S=new Image;S.onload=w(Rs,_,"TestLoadImage: loaded",!0,y,S),S.onerror=w(Rs,_,"TestLoadImage: error",!1,y,S),S.onabort=w(Rs,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=w(Rs,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Dc(h,y){const _=new jn,S=new AbortController,H=setTimeout(()=>{S.abort(),Rs(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Z=>{clearTimeout(H),Z.ok?Rs(_,"TestPingServer: ok",!0,y):Rs(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Rs(_,"TestPingServer: error",!1,y)})}function Rs(h,y,_,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(_)}catch{}}function Da(){this.g=new Aa}function xr(h){this.i=h.Sb||null,this.h=h.ab||!1}v(xr,ue),xr.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(h,y){Vt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ui,Vt),r=Ui.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Qs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Oa(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$l(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function $l(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Oa(this):Qs(this),this.readyState==3&&$l(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Oa(this))},r.Na=function(h){this.g&&(this.response=h,Oa(this))},r.ga=function(){this.g&&Oa(this)};function Oa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Qs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Qs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ks(h){let y="";return $(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Bi(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=ks(_),typeof h=="string"?_!=null&&dt(_):wt(h,y,_))}function At(h){Vt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(At,Vt);var yr=/^https?$/i,Oc=["POST","PUT"];r=At.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Be.g(),this.g.onreadystatechange=E(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){qi(this,Z);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)_.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())_.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Oc,y,void 0)>=0)||S||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ve]of _)this.g.setRequestHeader(Z,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){qi(this,Z)}};function qi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Mc(h),Qr(h)}function Mc(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),Qr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qr(this,!0)),At.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Fi(this):this.Xa())},r.Xa=function(){Fi(this)};function Fi(h){if(h.h&&typeof c<"u"){if(h.v&&Ys(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),Ys(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=Z===0){let ve=String(h.D).match(zd)[1]||null;!ve&&d.self&&d.self.location&&(ve=d.self.location.protocol.slice(0,-1)),S=!yr.test(ve?ve.toLowerCase():"")}_=S}if(_)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var H=Ys(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Mc(h)}}finally{Qr(h)}}}}function Qr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||gt(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Ys(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Ys(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Vi(y)}};function kn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yr(h){const y={};h=(h.g&&Ys(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(I(h[S]))continue;var _=lt(h[S]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=y[H]||[];y[H]=Z,Z.push(_)}_e(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Ma(h){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=br("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=br("baseRetryDelayMs",5e3,h),this.Za=br("retryDelaySeedMs",1e4,h),this.Ta=br("forwardChannelMaxRetries",2,h),this.va=br("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ec(h&&h.concurrentRequestLimit),this.Ba=new Da,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ma.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,S){pt(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Xd(this,null,this.W),vr(this)};function Vc(h){if(Kl(h),h.I==3){var y=h.V++,_=un(h.J);if(wt(_,"SID",h.M),wt(_,"RID",y),wt(_,"TYPE","terminate"),Hi(h,_),y=new xt(h,h.j,y),y.M=2,y.A=Li(un(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Jd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),dr(y)}Yd(h)}function Va(h){h.g&&(Lc(h),h.g.cancel(),h.g=null)}function Kl(h){Va(h),h.v&&(d.clearTimeout(h.v),h.v=null),Yl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function vr(h){if(!jc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ce||T(),W||(ce(),W=!0),N.add(y,h),h.D=0}}function Ql(h,y){return mr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=on(x(h.Ea,h,y),Qd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new xt(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=D(Z),L(Z,this.U)):Z=this.U),this.u!==null||this.R||(H.J=Z,Z=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Hd(this,H,y),_=un(this.J),wt(_,"RID",h),wt(_,"CVER",22),this.G&&wt(_,"X-HTTP-Session-Id",this.G),Hi(this,_),Z&&(this.R?y="headers="+dt(ks(Z))+"&"+y:this.u&&Bi(_,this.u,Z)),Tc(this.h,H),this.Ra&&wt(_,"TYPE","init"),this.S?(wt(_,"$req",y),wt(_,"SID","null"),H.U=!0,ur(H,_,null)):ur(H,_,y),this.I=2}}else this.I==3&&(h?Pc(this,h):this.i.length==0||jc(this.h)||Pc(this))};function Pc(h,y){var _;y?_=y.l:_=h.V++;const S=un(h.J);wt(S,"SID",h.M),wt(S,"RID",_),wt(S,"AID",h.K),Hi(h,S),h.u&&h.o&&Bi(S,h.u,h.o),_=new xt(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Hd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Tc(h.h,_),ur(_,S,y)}function Hi(h,y){h.H&&$(h.H,function(_,S){wt(y,S,_)}),h.l&&$({},function(_,S){wt(y,S,_)})}function Hd(h,y,_){_=Math.min(h.i.length,_);const S=h.l?x(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ge=-1;for(;;){const en=["count="+_];Ge==-1?_>0?(Ge=H[0].g,en.push("ofs="+Ge)):Ge=0:en.push("ofs="+Ge);let yt=!0;for(let zt=0;zt<_;zt++){var Z=H[zt].g;const Ds=H[zt].map;if(Z-=Ge,Z<0)Ge=Math.max(0,H[zt].g-100),yt=!1;else try{Z="req"+Z+"_"||"";try{var ve=Ds instanceof Map?Ds:Object.entries(Ds);for(const[_r,Xs]of ve){let Js=Xs;f(Xs)&&(Js=En(Xs)),en.push(Z+_r+"="+encodeURIComponent(Js))}}catch(_r){throw en.push(Z+"type="+encodeURIComponent("_badmap")),_r}}catch{S&&S(Ds)}}if(yt){ve=en.join("&");break e}}ve=void 0}return h=h.i.splice(0,_),y.G=h,ve}function Gd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ce||T(),W||(ce(),W=!0),N.add(y,h),h.A=0}}function Gi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=on(x(h.Da,h),Qd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,$d(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=on(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Va(this),$d(this))};function Lc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function $d(h){h.g=new xt(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=un(h.na);wt(y,"RID","rpc"),wt(y,"SID",h.M),wt(y,"AID",h.K),wt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&wt(y,"TO",h.ia),wt(y,"TYPE","xmlhttp"),Hi(h,y),h.u&&h.o&&Bi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Li(un(y)),_.u=null,_.R=!0,Ul(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Va(this),Gi(this),pt(19))};function Yl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Kd(h,y){var _=null;if(h.g==y){Yl(h),Lc(h),h.g=null;var S=2}else if(gr(h.h,y))_=y.G,Sc(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;S=Kn(),gt(S,new yn(S,_)),vr(h)}else Gd(h);else if(H=y.m,H==3||H==0&&y.X>0||!(S==1&&Ql(h,y)||S==2&&Gi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),H){case 1:wr(h,5);break;case 4:wr(h,10);break;case 3:wr(h,6);break;default:wr(h,2)}}}function Qd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function wr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),S=h.Ua;const H=!S;S=new gs(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Sn(S,"https"),Li(S),H?Ks(S.toString(),_):Dc(S.toString(),_)}else pt(2);h.I=0,h.l&&h.l.pa(y),Yd(h),Kl(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Yd(h){if(h.I=0,h.ja=[],h.l){const y=Ac(h.h);(y.length!=0||h.i.length!=0)&&(O(h.ja,y),O(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Xd(h,y,_){var S=_ instanceof gs?un(_):new gs(_);if(S.g!="")y&&(S.g=y+"."+S.g),Ia(S,S.u);else{var H=d.location;S=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const Z=new gs(null);S&&Sn(Z,S),y&&(Z.g=y),H&&Ia(Z,H),_&&(Z.h=_),S=Z}return _=h.G,y=h.wa,_&&y&&wt(S,_,y),wt(S,"VER",h.ka),Hi(h,S),S}function Jd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new At(new xr({ab:_})):new At(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wd(){}r=Wd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Pa(){}Pa.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){Vt.call(this),this.g=new Ma(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Xr(this)}v(Qn,Vt),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Vc(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=En(h),h=_);y.i.push(new cn(y.Ya++,h)),y.I==3&&vr(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,Qn.Z.N.call(this)};function Zd(h){ut.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(Zd,ut);function eh(){ln.call(this),this.status=1}v(eh,ln);function Xr(h){this.g=h}v(Xr,Wd),Xr.prototype.ra=function(){gt(this.g,"a")},Xr.prototype.qa=function(h){gt(this.g,new Zd(h))},Xr.prototype.pa=function(h){gt(this.g,new eh)},Xr.prototype.oa=function(){gt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,WN=function(){return new Pa},JN=function(){return Kn()},XN=St,Op={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,yf=Ae,Ve.COMPLETE="complete",YN=Ve,ct.EventType=Fe,Fe.OPEN="a",Fe.CLOSE="b",Fe.ERROR="c",Fe.MESSAGE="d",Vt.prototype.listen=Vt.prototype.J,Ru=ct,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,QN=At}).apply(typeof lf<"u"?lf:typeof self<"u"?self:typeof window<"u"?window:{});const $w="@firebase/firestore",Kw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new mm("@firebase/firestore");function Do(){return Al.logLevel}function xe(r,...e){if(Al.logLevel<=tt.DEBUG){const t=e.map(Tx);Al.debug(`Firestore (${pc}): ${r}`,...t)}}function sn(r,...e){if(Al.logLevel<=tt.ERROR){const t=e.map(Tx);Al.error(`Firestore (${pc}): ${r}`,...t)}}function td(r,...e){if(Al.logLevel<=tt.WARN){const t=e.map(Tx);Al.warn(`Firestore (${pc}): ${r}`,...t)}}function Tx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,ZN(r,s,t)}function ZN(r,e,t){let s=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw sn(s),new Error(s)}function De(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||ZN(e,l,s)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fn.UNAUTHENTICATED)))}shutdown(){}}class lR{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new sr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new sr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(De(typeof s.accessToken=="string",31837,{l:s}),new aR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class oR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new oR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){De(this.o===void 0,3512);const s=c=>{c.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(De(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=dR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Mp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Zg(l)===Zg(c)?ze(l,c):Zg(l)?1:-1}return ze(r.length,e.length)}const hR=55296,fR=57343;function Zg(r){const e=r.charCodeAt(0);return e>=hR&&e<=fR}function Qo(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function e4(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="__name__";class Sr{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Sr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return ze(e.length,t.length)}static compareSegments(e,t){const s=Sr.isNumericId(e),l=Sr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Sr.extractNumericId(e).compare(Sr.extractNumericId(t)):Mp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class vt extends Sr{construct(e,t,s){return new vt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Sr{construct(e,t,s){return new qt(e,t,s)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yw}static keyField(){return new qt([Yw])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(vt.fromString(e))}static fromName(e){return new we(vt.fromString(e).popFirst(5))}static empty(){return new we(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(r,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function gR(r,e,t,s){if(e===!0&&s===!0)throw new ye(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Xw(r){if(!we.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jw(r){if(we.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function n4(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ym(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je(12329,{type:typeof r})}function ts(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ym(r);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function pR(r,e){if(e<=0)throw new ye(re.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Nd(r,e){if(!n4(r))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=-62135596800,Zw=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Zw);return new Et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ww)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zw}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nd(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:xn("string",Et._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Et(0,0))}static max(){return new Me(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;class qf{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Vp(r){return r.fields.find((e=>e.kind===2))}function dl(r){return r.fields.filter((e=>e.kind!==2))}qf.UNKNOWN_ID=-1;class bf{constructor(e,t){this.fieldPath=e,this.kind=t}}class nd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nd(0,As.min())}}function s4(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Me.fromTimestamp(s===1e9?new Et(t+1,0):new Et(t,s));return new As(l,we.empty(),e)}function r4(r){return new As(r.readTime,r.key,Yo)}class As{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new As(Me.min(),we.empty(),Yo)}static max(){return new As(Me.max(),we.empty(),Yo)}}function Ax(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==a4)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,s)=>{t(e)}))}static reject(e){return new F(((t,s)=>{s(e)}))}static waitFor(e){return new F(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=F.resolve(!1);for(const s of e)t=t.next((l=>l?F.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new F(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((w=>{d[x]=w,++f,f===c&&s(d)}),(w=>l(w)))}}))}static doWhile(e,t){return new F(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="SimpleDb";class bm{static open(e,t,s,l){try{return new bm(t,e.transaction(l,s))}catch(c){throw new Lu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Ix(s.target.error);this.S.reject(new Lu(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(xe(Ns,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yR(t)}}class vi{static delete(e){return xe(Ns,"Removing database:",e),fl(J_().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!px())return!1;if(vi.F())return!0;const e=_n(),t=vi.M(e),s=0<t&&t<10,l=l4(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,vi.M(_n())===12.2&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(xe(Ns,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new Lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new ye(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new ye(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Lu(e,d))},l.onupgradeneeded=c=>{xe(Ns,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{xe(Ns,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=bm.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),F.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(xe(Ns,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function l4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class xR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return fl(this.U.delete())}}class Lu extends ye{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ki(r){return r.name==="IndexedDbTransactionError"}class yR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(xe(Ns,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(xe(Ns,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),fl(s)}add(e){return xe(Ns,"ADD",this.store.name,e,e),fl(this.store.add(e))}get(e){return fl(this.store.get(e)).next((t=>(t===void 0&&(t=null),xe(Ns,"GET",this.store.name,e,t),t)))}delete(e){return xe(Ns,"DELETE",this.store.name,e),fl(this.store.delete(e))}count(){return xe(Ns,"COUNT",this.store.name),fl(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new F(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new F(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){xe(Ns,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new F(((s,l)=>{t.onerror=c=>{const d=Ix(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new F(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new xR(f),x=t(f.primaryKey,f.value,g);if(x instanceof F){const w=x.catch((v=>(g.done(),F.reject(v))));s.push(w)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>F.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fl(r){return new F(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=Ix(s.target.error);t(l)}}))}let e2=!1;function Ix(r){const e=vi.M(_n());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e2||(e2=!0,setTimeout((()=>{throw s}),0)),s}}return r}const zu="IndexBackfiller";class bR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){xe(zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();xe(zu,`Documents written: ${t}`)}catch(t){ki(t)?xe(zu,"Ignoring IndexedDB error during index backfill: ",t):await Ri(t)}await this.re(6e4)}))}}class vR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return F.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return xe(zu,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(xe(zu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=r4(c);Ax(d,s)>0&&(s=d)})),new As(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}us.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=-1;function vm(r){return r==null}function sd(r){return r===0&&1/r==-1/0}function o4(r){return typeof r=="number"&&Number.isInteger(r)&&!sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="";function $n(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=t2(e)),e=wR(r.get(t),e);return t2(e)}function wR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Ff:t+="";break;default:t+=c}}return t}function t2(r){return r+Ff+""}function Rr(r){const e=r.length;if(De(e>=2,64408,{path:r}),e===2)return De(r.charAt(0)===Ff&&r.charAt(1)==="",56145,{path:r}),vt.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Ff,c);switch((d<0||d>t)&&je(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:je(61167,{path:r})}c=d+2}return new vt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="remoteDocuments",Ed="owner",So="owner",rd="mutationQueues",_R="userId",tr="mutations",n2="batchId",xl="userMutationsIndex",s2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(r,e){return[r,$n(e)]}function c4(r,e,t){return[r,$n(e),t]}const NR={},Xo="documentMutations",Hf="remoteDocumentsV14",ER=["prefixPath","collectionGroup","readTime","documentId"],wf="documentKeyIndex",jR=["prefixPath","collectionGroup","documentId"],u4="collectionGroupIndex",TR=["collectionGroup","readTime","prefixPath","documentId"],ad="remoteDocumentGlobal",Pp="remoteDocumentGlobalKey",Jo="targets",d4="queryTargetsIndex",SR=["canonicalId","targetId"],Wo="targetDocuments",AR=["targetId","path"],Cx="documentTargetsIndex",IR=["path","targetId"],Gf="targetGlobalKey",wl="targetGlobal",id="collectionParents",CR=["collectionId","parent"],Zo="clientMetadata",RR="clientId",wm="bundles",kR="bundleId",_m="namedQueries",DR="name",Rx="indexConfiguration",OR="indexId",Lp="collectionGroupIndex",MR="collectionGroup",Uu="indexState",VR=["indexId","uid"],h4="sequenceNumberIndex",PR=["uid","sequenceNumber"],Bu="indexEntries",LR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],f4="documentKeyIndex",zR=["indexId","uid","orderedDocumentKey"],Nm="documentOverlays",UR=["userId","collectionPath","documentId"],zp="collectionPathOverlayIndex",BR=["userId","collectionPath","largestBatchId"],m4="collectionGroupOverlayIndex",qR=["userId","collectionGroup","largestBatchId"],kx="globals",FR="name",g4=[rd,tr,Xo,hl,Jo,Ed,wl,Wo,Zo,ad,id,wm,_m],HR=[...g4,Nm],p4=[rd,tr,Xo,Hf,Jo,Ed,wl,Wo,Zo,ad,id,wm,_m,Nm],x4=p4,Dx=[...x4,Rx,Uu,Bu],GR=Dx,y4=[...Dx,kx],$R=y4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends i4{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Nn(r,e){const t=Ce(r);return vi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Di(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function b4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new of(this.root,e,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new of(this.root,e,this.comparator,!0)}}class of{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??Pn.RED,this.left=l??Pn.EMPTY,this.right=c??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new Pn(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Pn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a2(this.data.getIterator())}getIteratorFrom(e){return new a2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class a2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ao(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new ds([])}unionWith(e){let t=new Tt(qt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new v4("Invalid base64 string: "+c):c}})(e);return new an(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const KR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(r){if(De(!!r,39018),typeof r=="string"){let e=0;const t=KR.exec(r);if(De(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bt(r.seconds),nanos:Bt(r.nanos)}}function Bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Na(r){return typeof r=="string"?an.fromBase64String(r):an.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="server_timestamp",_4="__type__",N4="__previous_value__",E4="__local_write_time__";function Ox(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[_4])==null?void 0:s.stringValue)===w4}function Em(r){const e=r.mapValue.fields[N4];return Ox(e)?Em(e):e}function ld(r){const e=_a(r.mapValue.fields[E4].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t,s,l,c,d,f,g,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=w}}const $f="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||$f}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="__type__",j4="__max__",gi={mapValue:{fields:{__type__:{stringValue:j4}}}},Vx="__vector__",ec="value",_f={nullValue:"NULL_VALUE"};function ji(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ox(r)?4:T4(r)?9007199254740991:jm(r)?10:11:je(28295,{value:r})}function Br(r,e){if(r===e)return!0;const t=ji(r);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ld(r).isEqual(ld(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=_a(l.timestampValue),f=_a(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Na(l.bytesValue).isEqual(Na(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Bt(l.geoPointValue.latitude)===Bt(c.geoPointValue.latitude)&&Bt(l.geoPointValue.longitude)===Bt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Bt(l.integerValue)===Bt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Bt(l.doubleValue),f=Bt(c.doubleValue);return d===f?sd(d)===sd(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Qo(r.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(r2(d)!==r2(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Br(d[g],f[g])))return!1;return!0})(r,e);default:return je(52216,{left:r})}}function od(r,e){return(r.values||[]).find((t=>Br(t,e)))!==void 0}function Ti(r,e){if(r===e)return 0;const t=ji(r),s=ji(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=Bt(c.integerValue||c.doubleValue),g=Bt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return i2(r.timestampValue,e.timestampValue);case 4:return i2(ld(r),ld(e));case 5:return Mp(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=Na(c),g=Na(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const w=ze(f[x],g[x]);if(w!==0)return w}return ze(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=ze(Bt(c.latitude),Bt(d.latitude));return f!==0?f:ze(Bt(c.longitude),Bt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return l2(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var E,R,O,J;const f=c.fields||{},g=d.fields||{},x=(E=f[ec])==null?void 0:E.arrayValue,w=(R=g[ec])==null?void 0:R.arrayValue,v=ze(((O=x==null?void 0:x.values)==null?void 0:O.length)||0,((J=w==null?void 0:w.values)==null?void 0:J.length)||0);return v!==0?v:l2(x,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gi.mapValue&&d===gi.mapValue)return 0;if(c===gi.mapValue)return 1;if(d===gi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},w=Object.keys(x);g.sort(),w.sort();for(let v=0;v<g.length&&v<w.length;++v){const E=Mp(g[v],w[v]);if(E!==0)return E;const R=Ti(f[g[v]],x[w[v]]);if(R!==0)return R}return ze(g.length,w.length)})(r.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function i2(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=_a(r),s=_a(e),l=ze(t.seconds,s.seconds);return l!==0?l:ze(t.nanos,s.nanos)}function l2(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ti(t[l],s[l]);if(c)return c}return ze(t.length,s.length)}function tc(r){return Bp(r)}function Bp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=_a(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Na(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Bp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Bp(t.fields[d])}`;return l+"}"})(r.mapValue):je(61005,{value:r})}function Nf(r){switch(ji(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(r);return e?16+Nf(e):16;case 5:return 2*r.stringValue.length;case 6:return Na(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Nf(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Di(s.fields,((c,d)=>{l+=c.length+Nf(d)})),l})(r.mapValue);default:throw je(13486,{value:r})}}function cd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function qp(r){return!!r&&"integerValue"in r}function ud(r){return!!r&&"arrayValue"in r}function o2(r){return!!r&&"nullValue"in r}function c2(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ef(r){return!!r&&"mapValue"in r}function jm(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Mx])==null?void 0:s.stringValue)===Vx}function qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Di(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=qu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(r.arrayValue.values[t]);return e}return{...r}}function T4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===j4}const S4={mapValue:{fields:{[Mx]:{stringValue:Vx},[ec]:{arrayValue:{}}}}};function YR(r){return"nullValue"in r?_f:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?cd(Il.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?jm(r)?S4:{mapValue:{}}:je(35942,{value:r})}function XR(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?cd(Il.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?S4:"mapValue"in r?jm(r)?{mapValue:{}}:gi:je(61959,{value:r})}function u2(r,e){const t=Ti(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function d2(r,e){const t=Ti(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=qt.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=qu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());Ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];Ef(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Di(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Gn(qu(this.value))}}function A4(r){const e=[];return Di(r.fields,((t,s)=>{const l=new qt([t]);if(Ef(s)){const c=A4(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Jt(e,0,Me.min(),Me.min(),Me.min(),Gn.empty(),0)}static newFoundDocument(e,t,s,l){return new Jt(e,1,t,Me.min(),s,l,0)}static newNoDocument(e,t){return new Jt(e,2,t,Me.min(),Me.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Me.min(),Me.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.position=e,this.inclusive=t}}function h2(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=we.comparator(we.fromName(d.referenceValue),t.key):s=Ti(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function f2(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Br(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function JR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{}class nt extends I4{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new WR(e,t,s):t==="array-contains"?new tk(e,s):t==="in"?new M4(e,s):t==="not-in"?new nk(e,s):t==="array-contains-any"?new sk(e,s):new nt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ZR(e,s):new ek(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ti(t,this.value)):t!==null&&ji(this.value)===ji(t)&&this.matchesComparison(Ti(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends I4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new jt(e,t)}matches(e){return sc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sc(r){return r.op==="and"}function Fp(r){return r.op==="or"}function Px(r){return C4(r)&&sc(r)}function C4(r){for(const e of r.filters)if(e instanceof jt)return!1;return!0}function Hp(r){if(r instanceof nt)return r.field.canonicalString()+r.op.toString()+tc(r.value);if(Px(r))return r.filters.map((e=>Hp(e))).join(",");{const e=r.filters.map((t=>Hp(t))).join(",");return`${r.op}(${e})`}}function R4(r,e){return r instanceof nt?(function(s,l){return l instanceof nt&&s.op===l.op&&s.field.isEqual(l.field)&&Br(s.value,l.value)})(r,e):r instanceof jt?(function(s,l){return l instanceof jt&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&R4(d,l.filters[f])),!0):!1})(r,e):void je(19439)}function k4(r,e){const t=r.filters.concat(e);return jt.create(t,r.op)}function D4(r){return r instanceof nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${tc(t.value)}`})(r):r instanceof jt?(function(t){return t.op.toString()+" {"+t.getFilters().map(D4).join(" ,")+"}"})(r):"Filter"}class WR extends nt{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZR extends nt{constructor(e,t){super(e,"in",t),this.keys=O4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ek extends nt{constructor(e,t){super(e,"not-in",t),this.keys=O4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function O4(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>we.fromName(s.referenceValue)))}class tk extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ud(t)&&od(t.arrayValue,this.value)}}class M4 extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&od(this.value.arrayValue,t)}}class nk extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!od(this.value.arrayValue,t)}}class sk extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ud(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>od(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Gp(r,e=null,t=[],s=[],l=null,c=null,d=null){return new rk(r,e,t,s,l,c,d)}function Cl(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Hp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>tc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>tc(s))).join(",")),e.Te=t}return e.Te}function jd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!JR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!R4(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!f2(r.startAt,e.startAt)&&f2(r.endAt,e.endAt)}function Kf(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Qf(r,e){return r.filters.filter((t=>t instanceof nt&&t.field.isEqual(e)))}function m2(r,e,t){let s=_f,l=!0;for(const c of Qf(r,e)){let d=_f,f=!0;switch(c.op){case"<":case"<=":d=YR(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=_f}u2({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];u2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function g2(r,e,t){let s=gi,l=!0;for(const c of Qf(r,e)){let d=gi,f=!0;switch(c.op){case">=":case">":d=XR(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=gi}d2({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];d2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V4(r,e,t,s,l,c,d,f){return new xc(r,e,t,s,l,c,d,f)}function Tm(r){return new xc(r)}function p2(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function P4(r){return r.collectionGroup!==null}function Fu(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Tt(qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new dd(c,s))})),t.has(qt.keyField().canonicalString())||e.Ie.push(new dd(qt.keyField(),s))}return e.Ie}function js(r){const e=Ce(r);return e.Ee||(e.Ee=ak(e,Fu(r))),e.Ee}function ak(r,e){if(r.limitType==="F")return Gp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new dd(l.field,c)}));const t=r.endAt?new nc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new nc(r.startAt.position,r.startAt.inclusive):null;return Gp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function $p(r,e){const t=r.filters.concat([e]);return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Yf(r,e,t){return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Sm(r,e){return jd(js(r),js(e))&&r.limitType===e.limitType}function L4(r){return`${Cl(js(r))}|lt:${r.limitType}`}function Oo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>D4(l))).join(", ")}]`),vm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>tc(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>tc(l))).join(",")),`Target(${s})`})(js(r))}; limitType=${r.limitType})`}function Td(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):we.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Fu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=h2(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Fu(s),l)||s.endAt&&!(function(d,f,g){const x=h2(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Fu(s),l))})(r,e)}function z4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function U4(r){return(e,t)=>{let s=!1;for(const l of Fu(r)){const c=ik(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function ik(r,e,t){const s=r.field.isKeyField()?we.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ti(g,x):je(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return b4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Mt(we.comparator);function Es(){return lk}const B4=new Mt(we.comparator);function ku(...r){let e=B4;for(const t of r)e=e.insert(t.key,t);return e}function q4(r){let e=B4;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function kr(){return Hu()}function F4(){return Hu()}function Hu(){return new Ta((r=>r.toString()),((r,e)=>r.isEqual(e)))}const ok=new Mt(we.comparator),ck=new Tt(we.comparator);function Qe(...r){let e=ck;for(const t of r)e=e.add(t);return e}const uk=new Tt(ze);function Lx(){return uk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function H4(r){return{integerValue:""+r}}function G4(r,e){return o4(e)?H4(e):zx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this._=void 0}}function dk(r,e,t){return r instanceof rc?(function(l,c){const d={fields:{[_4]:{stringValue:w4},[E4]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Ox(c)&&(c=Em(c)),c&&(d.fields[N4]=c),{mapValue:d}})(t,e):r instanceof ac?K4(r,e):r instanceof ic?Q4(r,e):(function(l,c){const d=$4(l,c),f=x2(d)+x2(l.Ae);return qp(d)&&qp(l.Ae)?H4(f):zx(l.serializer,f)})(r,e)}function hk(r,e,t){return r instanceof ac?K4(r,e):r instanceof ic?Q4(r,e):t}function $4(r,e){return r instanceof lc?(function(s){return qp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class rc extends Am{}class ac extends Am{constructor(e){super(),this.elements=e}}function K4(r,e){const t=Y4(e);for(const s of r.elements)t.some((l=>Br(l,s)))||t.push(s);return{arrayValue:{values:t}}}class ic extends Am{constructor(e){super(),this.elements=e}}function Q4(r,e){let t=Y4(e);for(const s of r.elements)t=t.filter((l=>!Br(l,s)));return{arrayValue:{values:t}}}class lc extends Am{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function x2(r){return Bt(r.integerValue||r.doubleValue)}function Y4(r){return ud(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t){this.field=e,this.transform=t}}function fk(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof ac&&l instanceof ac||s instanceof ic&&l instanceof ic?Qo(s.elements,l.elements,Br):s instanceof lc&&l instanceof lc?Br(s.Ae,l.Ae):s instanceof rc&&l instanceof rc})(r.transform,e.transform)}class mk{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Im{}function X4(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Sd(r.key,wn.none()):new yc(r.key,r.data,wn.none());{const t=r.data,s=Gn.empty();let l=new Tt(qt.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Sa(r.key,s,new ds(l.toArray()),wn.none())}}function gk(r,e,t){r instanceof yc?(function(l,c,d){const f=l.value.clone(),g=b2(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Sa?(function(l,c,d){if(!jf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=b2(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(J4(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Gu(r,e,t,s){return r instanceof yc?(function(c,d,f,g){if(!jf(c.precondition,d))return f;const x=c.value.clone(),w=v2(c.fieldTransforms,g,d);return x.setAll(w),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof Sa?(function(c,d,f,g){if(!jf(c.precondition,d))return f;const x=v2(c.fieldTransforms,g,d),w=d.data;return w.setAll(J4(c)),w.setAll(x),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(r,e,t,s):(function(c,d,f){return jf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function pk(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=$4(s.transform,l||null);c!=null&&(t===null&&(t=Gn.empty()),t.set(s.field,c))}return t||null}function y2(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Qo(s,l,((c,d)=>fk(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yc extends Im{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Sa extends Im{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function J4(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function b2(r,e,t){const s=new Map;De(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,hk(d,f,t[l]))}return s}function v2(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,dk(c,d,e))}return s}class Sd extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W4 extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&gk(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=F4();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=X4(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Me.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,((t,s)=>y2(t,s)))&&Qo(this.baseMutations,e.baseMutations,((t,s)=>y2(t,s)))}}class qx{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){De(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return ok})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new qx(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,it;function yk(r){switch(r){case re.OK:return je(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return je(15467,{code:r})}}function Z4(r){if(r===void 0)return sn("GRPC error has no .code"),re.UNKNOWN;switch(r){case gn.OK:return re.OK;case gn.CANCELLED:return re.CANCELLED;case gn.UNKNOWN:return re.UNKNOWN;case gn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case gn.INTERNAL:return re.INTERNAL;case gn.UNAVAILABLE:return re.UNAVAILABLE;case gn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case gn.NOT_FOUND:return re.NOT_FOUND;case gn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case gn.ABORTED:return re.ABORTED;case gn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case gn.DATA_LOSS:return re.DATA_LOSS;default:return je(39323,{code:r})}}(it=gn||(gn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new bi([4294967295,4294967295],0);function w2(r){const e=bk().encode(r),t=new KN;return t.update(e),new Uint8Array(t.digest())}function _2(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new bi([t,s],0),new bi([l,c],0)]}class Hx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Du(`Invalid padding: ${t}`);if(s<0)throw new Du(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Du(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bi.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(bi.fromNumber(s)));return l.compare(vk)===1&&(l=new bi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=w2(e),[s,l]=_2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Hx(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=w2(e),[s,l]=_2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ad(Me.min(),l,new Mt(ze),Es(),Qe())}}class Id{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Id(s,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class eE{constructor(e,t){this.targetId=e,this.Ce=t}}class tE{constructor(e,t,s=an.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class N2{constructor(){this.ve=0,this.Fe=E2(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),s=Qe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:je(38017,{changeType:c})}})),new Id(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=E2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Es(),this.Je=cf(),this.He=cf(),this.Ye=new Mt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Kf(c))if(s===0){const d=new we(c.path);this.et(t,d,Jt.newNoDocument(d,Me.min()))}else De(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=Na(s).toUint8Array()}catch(g){if(g instanceof v4)return td("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hx(d,l,c)}catch(g){return td(g instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&Kf(f.target)){const g=new we(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Jt.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=Qe();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Ad(e,t,this.Ye,this.je,s);return this.je=Es(),this.Je=cf(),this.He=cf(),this.Ye=new Mt(ze),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new N2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cf(){return new Mt(we.comparator)}function E2(){return new Mt(we.comparator)}const _k={asc:"ASCENDING",desc:"DESCENDING"},Nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ek={and:"AND",or:"OR"};class jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kp(r,e){return r.useProto3Json||vm(e)?e:{value:e}}function oc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Tk(r,e){return oc(r,e.toTimestamp())}function Zn(r){return De(!!r,49232),Me.fromTimestamp((function(t){const s=_a(t);return new Et(s.seconds,s.nanos)})(r))}function Gx(r,e){return Qp(r,e).canonicalString()}function Qp(r,e){const t=(function(l){return new vt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function sE(r){const e=vt.fromString(r);return De(hE(e),10190,{key:e.toString()}),e}function Xf(r,e){return Gx(r.databaseId,e.path)}function _l(r,e){const t=sE(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(iE(t))}function rE(r,e){return Gx(r.databaseId,e)}function aE(r){const e=sE(r);return e.length===4?vt.emptyPath():iE(e)}function Yp(r){return new vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function iE(r){return De(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function j2(r,e,t){return{name:Xf(r,e),fields:t.value.mapValue.fields}}function Sk(r,e,t){const s=_l(r,e.name),l=Zn(e.updateTime),c=e.createTime?Zn(e.createTime):Me.min(),d=new Gn({mapValue:{fields:e.fields}}),f=Jt.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ak(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:je(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,w){return x.useProto3Json?(De(w===void 0||typeof w=="string",58123),an.fromBase64String(w||"")):(De(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),an.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const w=x.code===void 0?re.UNKNOWN:Z4(x.code);return new ye(w,x.message||"")})(d);t=new tE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=_l(r,s.document.name),c=Zn(s.document.updateTime),d=s.document.createTime?Zn(s.document.createTime):Me.min(),f=new Gn({mapValue:{fields:s.document.fields}}),g=Jt.newFoundDocument(l,c,d,f),x=s.targetIds||[],w=s.removedTargetIds||[];t=new Tf(x,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=_l(r,s.document),c=s.readTime?Zn(s.readTime):Me.min(),d=Jt.newNoDocument(l,c),f=s.removedTargetIds||[];t=new Tf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=_l(r,s.document),c=s.removedTargetIds||[];t=new Tf([],c,l,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new xk(l,c),f=s.targetId;t=new eE(f,d)}}return t}function Jf(r,e){let t;if(e instanceof yc)t={update:j2(r,e.key,e.value)};else if(e instanceof Sd)t={delete:Xf(r,e.key)};else if(e instanceof Sa)t={update:j2(r,e.key,e.data),updateMask:Ok(e.fieldMask)};else{if(!(e instanceof W4))return je(16599,{Vt:e.type});t={verify:Xf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof rc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ac)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ic)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof lc)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw je(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Tk(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(r,e.precondition)),t}function Xp(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?wn.updateTime(Zn(c.updateTime)):c.exists!==void 0?wn.exists(c.exists):wn.none()})(e.currentDocument):wn.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)De(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new rc;else if("appendMissingElements"in f){const w=f.appendMissingElements.values||[];g=new ac(w)}else if("removeAllFromArray"in f){const w=f.removeAllFromArray.values||[];g=new ic(w)}else"increment"in f?g=new lc(d,f.increment):je(16584,{proto:f});const x=qt.fromServerFormat(f.fieldPath);return new Ux(x,g)})(r,l))):[];if(e.update){e.update.name;const l=_l(r,e.update.name),c=new Gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new ds(x.map((w=>qt.fromServerFormat(w))))})(e.updateMask);return new Sa(l,c,d,t,s)}return new yc(l,c,t,s)}if(e.delete){const l=_l(r,e.delete);return new Sd(l,t)}if(e.verify){const l=_l(r,e.verify);return new W4(l,t)}return je(1463,{proto:e})}function Ik(r,e){return r&&r.length>0?(De(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Zn(l.updateTime):Zn(c);return d.isEqual(Me.min())&&(d=Zn(c)),new mk(d,l.transformResults||[])})(t,e)))):[]}function lE(r,e){return{documents:[rE(r,e.path)]}}function oE(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=rE(r,l);const c=(function(x){if(x.length!==0)return dE(jt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((w=>(function(E){return{field:Mo(E.field),direction:Rk(E.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Kp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function cE(r){let e=aE(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){De(s===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(v){const E=uE(v);return E instanceof jt&&Px(E)?E.getFilters():[E]})(t.where));let d=[];t.orderBy&&(d=(function(v){return v.map((E=>(function(O){return new dd(Vo(O.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let E;return E=typeof v=="object"?v.value:v,vm(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(v){const E=!!v.before,R=v.values||[];return new nc(R,E)})(t.startAt));let x=null;return t.endAt&&(x=(function(v){const E=!v.before,R=v.values||[];return new nc(R,E)})(t.endAt)),V4(e,l,d,c,f,"F",g,x)}function Ck(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Vo(t.unaryFilter.field);return nt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Vo(t.unaryFilter.field);return nt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Vo(t.unaryFilter.field);return nt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Vo(t.unaryFilter.field);return nt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nt.create(Vo(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return jt.create(t.compositeFilter.filters.map((s=>uE(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(r):je(30097,{filter:r})}function Rk(r){return _k[r]}function kk(r){return Nk[r]}function Dk(r){return Ek[r]}function Mo(r){return{fieldPath:r.canonicalString()}}function Vo(r){return qt.fromServerFormat(r.fieldPath)}function dE(r){return r instanceof nt?(function(t){if(t.op==="=="){if(c2(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(o2(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c2(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(o2(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:kk(t.op),value:t.value}}})(r):r instanceof jt?(function(t){const s=t.getFilters().map((l=>dE(l)));return s.length===1?s[0]:{compositeFilter:{op:Dk(t.op),filters:s}}})(r):je(54877,{filter:r})}function Ok(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,s,l,c=Me.min(),d=Me.min(),f=an.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.yt=e}}function Mk(r,e){let t;if(e.document)t=Sk(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=we.fromSegments(e.noDocument.path),l=kl(e.noDocument.readTime);t=Jt.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return je(56709);{const s=we.fromSegments(e.unknownDocument.path),l=kl(e.unknownDocument.version);t=Jt.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new Et(l[0],l[1]);return Me.fromTimestamp(c)})(e.readTime)),t}function T2(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:Xf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:oc(c,d.version.toTimestamp()),createTime:oc(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Rl(e.version)};else{if(!e.isUnknownDocument())return je(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Rl(e.version)}}return s}function Wf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Rl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kl(r){const e=new Et(r.seconds,r.nanoseconds);return Me.fromTimestamp(e)}function ml(r,e){const t=(e.baseMutations||[]).map((c=>Xp(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Xp(r.yt,c))),l=Et.fromMillis(e.localWriteTimeMs);return new Bx(e.batchId,l,t,s)}function Ou(r){const e=kl(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?kl(r.lastLimboFreeSnapshotVersion):Me.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return De(d===1,1966,{count:d}),js(Tm(aE(c.documents[0])))})(r.query):(function(c){return js(cE(c))})(r.query),new ga(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,an.fromBase64String(r.resumeToken))}function mE(r,e){const t=Rl(e.snapshotVersion),s=Rl(e.lastLimboFreeSnapshotVersion);let l;l=Kf(e.target)?lE(r.yt,e.target):oE(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function gE(r){const e=cE({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Yf(e,e.limit,"L"):e}function ep(r,e){return new Fx(e.largestBatchId,Xp(r.yt,e.overlayMutation))}function S2(r,e){const t=e.path.lastSegment();return[r,$n(e.path.popLast()),t]}function A2(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Rl(s.readTime),documentKey:$n(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{getBundleMetadata(e,t){return I2(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:kl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return I2(e).put((function(l){return{bundleId:l.id,createTime:Rl(Zn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return C2(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:gE(c.bundledQuery),readTime:kl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return C2(e).put((function(l){return{name:l.name,readTime:Rl(Zn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function I2(r){return Nn(r,wm)}function C2(r){return Nn(r,_m)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Cm(e,s)}getOverlay(e,t){return Nu(e).get(S2(this.userId,t)).next((s=>s?ep(this.serializer,s):null))}getOverlays(e,t){const s=kr();return F.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new Fx(t,d);l.push(this.St(e,f))})),F.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add($n(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(Nu(e).Z(zp,f))})),F.waitFor(c)}getOverlaysForCollection(e,t,s){const l=kr(),c=$n(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Nu(e).J(zp,d).next((f=>{for(const g of f){const x=ep(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=kr();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nu(e).ee({index:m4,range:f},((g,x,w)=>{const v=ep(this.serializer,x);c.size()<l||v.largestBatchId===d?(c.set(v.getKey(),v),d=v.largestBatchId):w.done()})).next((()=>c))}St(e,t){return Nu(e).put((function(l,c,d){const[f,g,x]=S2(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Jf(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function Nu(r){return Nn(r,Nm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{bt(e){return Nn(e,kx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?an.fromUint8Array(s):an.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Bt(e.integerValue));else if("doubleValue"in e){const s=Bt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),sd(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=_a(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Na(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?T4(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):jm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):je(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=ec,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Bt(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}gl.Kt=new gl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=255;function Lk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function R2(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=Lk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class zk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=R2(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=R2(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(Io),this.sn(255)}_n(){this.an(Io),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Io?(this.sn(Io),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Io?(this.an(Io),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class Uk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Bk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eu{constructor(){this.cn=new zk,this.ln=new Uk(this.cn),this.hn=new Bk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new pl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:Sf(this.En),directionalValue:Sf(this.dn),orderedDocumentKey:Sf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function li(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=k2(r.En,e.En),t!==0?t:(t=k2(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function k2(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function Sf(r){return rN()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function D2(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class O2{constructor(e){this.mn=new Tt(((t,s)=>qt.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(De(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Vp(e);if(t!==void 0&&!this.wn(t))return!1;const s=dl(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt(qt.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new bf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new bf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new bf(s.field,s.dir==="asc"?0:1)));return new qf(qf.UNKNOWN_ID,this.collectionId,t,nd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(r){var t,s;if(De(r instanceof nt||r instanceof jt,20012),r instanceof nt){if(r instanceof M4){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>nt.create(r.field,"==",c))))||[];return jt.create(l,"or")}return r}const e=r.filters.map((l=>pE(l)));return jt.create(e,r.op)}function qk(r){if(r.getFilters().length===0)return[];const e=Zp(pE(r));return De(xE(e),7391),Jp(e)||Wp(e)?[e]:e.getFilters()}function Jp(r){return r instanceof nt}function Wp(r){return r instanceof jt&&Px(r)}function xE(r){return Jp(r)||Wp(r)||(function(t){if(t instanceof jt&&Fp(t)){for(const s of t.getFilters())if(!Jp(s)&&!Wp(s))return!1;return!0}return!1})(r)}function Zp(r){if(De(r instanceof nt||r instanceof jt,34018),r instanceof nt)return r;if(r.filters.length===1)return Zp(r.filters[0]);const e=r.filters.map((s=>Zp(s)));let t=jt.create(e,r.op);return t=Zf(t),xE(t)?t:(De(t instanceof jt,64498),De(sc(t),40251),De(t.filters.length>1,57927),t.filters.reduce(((s,l)=>$x(s,l))))}function $x(r,e){let t;return De(r instanceof nt||r instanceof jt,38388),De(e instanceof nt||e instanceof jt,25473),t=r instanceof nt?e instanceof nt?(function(l,c){return jt.create([l,c],"and")})(r,e):M2(r,e):e instanceof nt?M2(e,r):(function(l,c){if(De(l.filters.length>0&&c.filters.length>0,48005),sc(l)&&sc(c))return k4(l,c.getFilters());const d=Fp(l)?l:c,f=Fp(l)?c:l,g=d.filters.map((x=>$x(x,f)));return jt.create(g,"or")})(r,e),Zf(t)}function M2(r,e){if(sc(e))return k4(e,r.getFilters());{const t=e.filters.map((s=>$x(r,s)));return jt.create(t,"or")}}function Zf(r){if(De(r instanceof nt||r instanceof jt,11850),r instanceof nt)return r;const e=r.getFilters();if(e.length===1)return Zf(e[0]);if(C4(r))return r;const t=e.map((l=>Zf(l))),s=[];return t.forEach((l=>{l instanceof nt?s.push(l):l instanceof jt&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:jt.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Cn=new Kx}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(As.min())}updateCollectionGroup(e,t,s){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Kx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Tt(vt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Tt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="IndexedDbIndexManager",uf=new Uint8Array(0);class Hk{constructor(e,t){this.databaseId=t,this.vn=new Kx,this.Fn=new Ta((s=>Cl(s)),((s,l)=>jd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:$n(l)};return P2(e).put(c)}return F.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[e4(t),""],!1,!0);return P2(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(Rr(d.parent))}return s}))}addFieldIndex(e,t){const s=ju(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=Ro(e);return c.next((f=>{d.put(A2(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=ju(e),l=Ro(e),c=Co(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ju(e),s=Co(e),l=Ro(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return F.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new O2(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=Co(e);let l=!0;const c=new Map;return F.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=Qe();const f=[];return F.forEach(c,((g,x)=>{xe(V2,`Using index ${(function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map((me=>`${me.fieldPath}:${me.kind}`)).join(",")}`})(g)} to execute ${Cl(t)}`);const w=(function(te,me){const ce=Vp(me);if(ce===void 0)return null;for(const W of Qf(te,ce.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(x,g),v=(function(te,me){const ce=new Map;for(const W of dl(me))for(const N of Qf(te,W.fieldPath))switch(N.op){case"==":case"in":ce.set(W.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return ce.set(W.fieldPath.canonicalString(),N.value),Array.from(ce.values())}return null})(x,g),E=(function(te,me){const ce=[];let W=!0;for(const N of dl(me)){const T=N.kind===0?m2(te,N.fieldPath,te.startAt):g2(te,N.fieldPath,te.startAt);ce.push(T.value),W&&(W=T.inclusive)}return new nc(ce,W)})(x,g),R=(function(te,me){const ce=[];let W=!0;for(const N of dl(me)){const T=N.kind===0?g2(te,N.fieldPath,te.endAt):m2(te,N.fieldPath,te.endAt);ce.push(T.value),W&&(W=T.inclusive)}return new nc(ce,W)})(x,g),O=this.On(g,x,E),J=this.On(g,x,R),P=this.Nn(g,x,v),le=this.Bn(g.indexId,w,O,E.inclusive,J,R.inclusive,P);return F.forEach(le,(se=>s.Y(se,t.limit).next((te=>{te.forEach((me=>{const ce=we.fromSegments(me.documentKey);d.has(ce)||(d=d.add(ce),f.push(ce))}))}))))})).next((()=>f))}return F.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=qk(jt.create(e.filters,"and")).map((s=>Gp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),w=[];for(let v=0;v<g;++v){const E=t?this.Ln(t[v/x]):uf,R=this.kn(e,E,s[v%x],l),O=this.qn(e,E,c[v%x],d),J=f.map((P=>this.kn(e,E,P,!0)));w.push(...this.createRange(R,O,J))}return w}kn(e,t,s,l){const c=new pl(e,we.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new pl(e,we.empty(),t,s);return l?c.An():c}xn(e,t){const s=new O2(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return F.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new Tt(qt.comparator),w=!1;for(const v of g.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?w=!0:x=x.add(E.field));for(const v of g.orderBy)v.field.isKeyField()||(x=x.add(v.field));return x.size+(w?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new Eu;for(const l of dl(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);gl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new Eu;return gl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new Eu;return gl.Kt.Dt(cd(this.databaseId,t),s.Pn((function(c){const d=dl(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new Eu);let c=0;for(const d of dl(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&ud(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);gl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new Eu;g.seed(f.un()),gl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof nt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=ju(e),l=Ro(e);return(t?s.J(Lp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return F.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(w,v){const E=v?new nd(v.sequenceNumber,new As(kl(v.readTime),new we(Rr(v.documentKey)),v.largestBatchId)):nd.empty(),R=w.fields.map((([O,J])=>new bf(qt.fromServerFormat(O),J)));return new qf(w.indexId,w.collectionGroup,R,E)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:ze(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=ju(e),c=Ro(e);return this.Gn(e).next((d=>l.J(Lp,IDBKeyRange.bound(t,t)).next((f=>F.forEach(f,(g=>c.put(A2(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return F.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?F.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),F.forEach(f,(g=>this.zn(e,l,g).next((x=>{const w=this.jn(c,g);return x.isEqual(w)?F.resolve():this.Jn(e,c,g,x,w)})))))))}))}Hn(e,t,s,l){return Co(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return Co(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=Co(e);let c=new Tt(li);return l.ee({index:f4,range:IDBKeyRange.only([s.indexId,this.uid,Sf(this.$n(s,t))])},((d,f)=>{c=c.add(new pl(s.indexId,t,D2(f.arrayValue),D2(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new Tt(li);const l=this.Qn(t,e);if(l==null)return s;const c=Vp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(ud(d))for(const f of d.arrayValue.values||[])s=s.add(new pl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new pl(t.indexId,e.key,uf,l));return s}Jn(e,t,s,l,c){xe(V2,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,w,v,E){const R=g.getIterator(),O=x.getIterator();let J=Ao(R),P=Ao(O);for(;J||P;){let le=!1,se=!1;if(J&&P){const te=w(J,P);te<0?se=!0:te>0&&(le=!0)}else J!=null?se=!0:le=!0;le?(v(P),P=Ao(O)):se?(E(J),J=Ao(R)):(J=Ao(R),P=Ao(O))}})(l,c,li,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),F.waitFor(d)}Gn(e){let t=1;return Ro(e).ee({index:h4,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>li(d,f))).filter(((d,f,g)=>!f||li(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=li(d,e),g=li(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,uf,we.empty()),g=l[d+1].Vn(this.uid,uf,we.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return li(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(L2)}getMinOffset(e,t){return F.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||je(44426))))).next(L2)}}function P2(r){return Nn(r,id)}function Co(r){return Nn(r,Bu)}function ju(r){return Nn(r,Rx)}function Ro(r){return Nn(r,Uu)}function L2(r){De(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;Ax(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new As(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yE=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(r,e,t){const s=r.store(tr),l=r.store(Xo),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((w,v,E)=>(f++,E.delete())));c.push(g.next((()=>{De(f===1,47070,{batchId:t.batchId})})));const x=[];for(const w of t.mutations){const v=c4(e,w.key.path,t.batchId);c.push(l.delete(v)),x.push(w.key)}return F.waitFor(c).next((()=>x))}function em(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw je(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(yE,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class Rm{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){De(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Rm(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).ee({index:xl,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=Po(e),d=oi(e);return d.add({}).next((f=>{De(typeof f=="number",49019);const g=new Bx(f,t,s,l),x=(function(R,O,J){const P=J.baseMutations.map((se=>Jf(R.yt,se))),le=J.mutations.map((se=>Jf(R.yt,se)));return{userId:O,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:P,mutations:le}})(this.serializer,this.userId,g),w=[];let v=new Tt(((E,R)=>ze(E.canonicalString(),R.canonicalString())));for(const E of l){const R=c4(this.userId,E.key.path,f);v=v.add(E.key.path.popLast()),w.push(d.put(x)),w.push(c.put(R,NR))}return v.forEach((E=>{w.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),F.waitFor(w).next((()=>g))}))}lookupMutationBatch(e,t){return oi(e).get(t).next((s=>s?(De(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ml(this.serializer,s)):null))}er(e,t){return this.Xn[t]?F.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return oi(e).ee({index:xl,range:l},((d,f,g)=>{f.userId===this.userId&&(De(f.batchId>=s,47524,{tr:s}),c=ml(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=vl;return oi(e).ee({index:xl,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vl],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).J(xl,t).next((s=>s.map((l=>ml(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=vf(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return Po(e).ee({range:l},((d,f,g)=>{const[x,w,v]=d,E=Rr(w);if(x===this.userId&&t.path.isEqual(E))return oi(e).get(v).next((R=>{if(!R)throw je(61480,{nr:d,batchId:v});De(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:v}),c.push(ml(this.serializer,R))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(ze);const l=[];return t.forEach((c=>{const d=vf(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=Po(e).ee({range:f},((x,w,v)=>{const[E,R,O]=x,J=Rr(R);E===this.userId&&c.path.isEqual(J)?s=s.add(O):v.done()}));l.push(g)})),F.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=vf(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new Tt(ze);return Po(e).ee({range:d},((g,x,w)=>{const[v,E,R]=g,O=Rr(E);v===this.userId&&s.isPrefixOf(O)?O.length===l&&(f=f.add(R)):w.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(oi(e).get(c).next((d=>{if(d===null)throw je(35274,{batchId:c});De(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(ml(this.serializer,d))})))})),F.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return bE(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),F.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return Po(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=Rr(c[1]);l.push(g)}else f.done()})).next((()=>{De(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return vE(e,this.userId,t)}_r(e){return wE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vl,lastStreamToken:""}))}}function vE(r,e,t){const s=vf(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return Po(r).ee({range:c,X:!0},((f,g,x)=>{const[w,v,E]=f;w===e&&v===l&&(d=!0),x.done()})).next((()=>d))}function oi(r){return Nn(r,tr)}function Po(r){return Nn(r,Xo)}function wE(r){return Nn(r,rd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Dl(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Me.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ko(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(De(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return ko(e).ee(((d,f)=>{const g=Ou(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>F.waitFor(c))).next((()=>l))}forEachTarget(e,t){return ko(e).ee(((s,l)=>{const c=Ou(l);t(c)}))}lr(e){return U2(e).get(Gf).next((t=>(De(t!==null,2888),t)))}hr(e,t){return U2(e).put(Gf,t)}Pr(e,t){return ko(e).put(mE(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Cl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return ko(e).ee({range:l,index:d4},((d,f,g)=>{const x=Ou(f);jd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=mi(e);return t.forEach((d=>{const f=$n(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),F.waitFor(l)}removeMatchingKeys(e,t,s){const l=mi(e);return F.forEach(t,(c=>{const d=$n(c.path);return F.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=mi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=mi(e);let c=Qe();return l.ee({range:s,X:!0},((d,f,g)=>{const x=Rr(d[1]),w=new we(x);c=c.add(w)})).next((()=>c))}containsKey(e,t){const s=$n(t.path),l=IDBKeyRange.bound([s],[e4(s)],!1,!0);let c=0;return mi(e).ee({index:Cx,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return ko(e).get(t).next((s=>s?Ou(s):null))}}function ko(r){return Nn(r,Jo)}function U2(r){return Nn(r,wl)}function mi(r){return Nn(r,Wo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="LruGarbageCollector",_E=1048576;function q2([r,e],[t,s]){const l=ze(r,t);return l===0?ze(e,s):l}class $k{constructor(e){this.Ir=e,this.buffer=new Tt(q2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();q2(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NE{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(B2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ki(t)?xe(B2,"Ignoring IndexedDB error during garbage collection: ",t):await Ri(t)}await this.Vr(3e5)}))}}class Kk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(us.ce);const s=new $k(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(z2)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),l=this.params.maximumSequenceNumbersToCollect):l=v,d=Date.now(),this.nthSequenceNumber(e,l)))).next((v=>(s=v,f=Date.now(),this.removeTargets(e,s,t)))).next((v=>(c=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(x=Date.now(),Do()<=tt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(x-g)+`ms
Total Duration: ${x-w}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:v}))))}}function EE(r,e){return new Kk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.db=e,this.garbageCollector=EE(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return df(e,s)}removeReference(e,t,s){return df(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return df(e,t)}br(e,t){return(function(l,c){let d=!1;return wE(l).te((f=>vE(l,f,c).next((g=>(g&&(d=!0),F.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Me.min()),mi(e).delete((function(v){return[0,$n(v.path)]})(d)))))}));l.push(g)}})).next((()=>F.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return df(e,t)}Sr(e,t){const s=mi(e);let l,c=us.ce;return s.ee({index:Cx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==us.ce&&t(new we(Rr(l)),c),c=x,l=g):c=us.ce})).next((()=>{c!==us.ce&&t(new we(Rr(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function df(r,e){return mi(r).put((function(s,l){return{targetId:0,path:$n(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.changes=new Ta((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?F.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ol(e).put(s)}removeEntry(e,t,s){return ol(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Wf(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=Jt.newInvalidDocument(t);return ol(e).ee({index:wf,range:IDBKeyRange.only(Tu(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:Jt.newInvalidDocument(t)};return ol(e).ee({index:wf,range:IDBKeyRange.only(Tu(t))},((l,c)=>{s={document:this.Cr(t,c),size:em(c)}})).next((()=>s))}getEntries(e,t){let s=Es();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=Es(),l=new Mt(we.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,em(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return F.resolve();let l=new Tt(G2);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(Tu(l.first()),Tu(l.last())),d=l.getIterator();let f=d.getNext();return ol(e).ee({index:wf,range:c},((g,x,w)=>{const v=we.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&G2(f,v)<0;)s(f,null),f=d.getNext();f&&f.isEqual(v)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?w.j(Tu(f)):w.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Wf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ol(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let w=Es();for(const v of x){const E=this.Cr(we.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(Td(t,E)||l.has(E.key))&&(w=w.insert(E.key,E))}return w}))}getAllFromCollectionGroup(e,t,s,l){let c=Es();const d=H2(t,s),f=H2(t,As.max());return ol(e).ee({index:u4,range:IDBKeyRange.bound(d,f,!0)},((g,x,w)=>{const v=this.Cr(we.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(v.key,v),c.size===l&&w.done()})).next((()=>c))}newChangeBuffer(e){return new Xk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return F2(e).get(Pp).next((t=>(De(!!t,20021),t)))}Dr(e,t){return F2(e).put(Pp,t)}Cr(e,t){if(t){const s=Mk(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Me.min())))return s}return Jt.newInvalidDocument(e)}}function TE(r){return new Yk(r)}class Xk extends jE{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ta((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new Tt(((c,d)=>ze(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=T2(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=em(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=T2(this.Nr.serializer,d.convertToNoDocument(Me.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),F.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function F2(r){return Nn(r,ad)}function ol(r){return Nn(r,Hf)}function Tu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H2(r,e){const t=e.documentKey.path.toArray();return[r,Wf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G2(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=ze(t[c],s[c]),l)return l;return l=ze(t.length,s.length),l||(l=ze(t[t.length-2],s[s.length-2]),l||ze(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&Gu(s.mutation,l,ds.empty(),Et.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Qe()){const l=kr();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=ku();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=kr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Qe())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=Es();const d=Hu(),f=(function(){return Hu()})();return t.forEach(((g,x)=>{const w=s.get(x.key);l.has(x.key)&&(w===void 0||w.mutation instanceof Sa)?c=c.insert(x.key,x):w!==void 0?(d.set(x.key,w.mutation.getFieldMask()),Gu(w.mutation,x,w.mutation.getFieldMask(),Et.now())):d.set(x.key,ds.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,w)=>d.set(x,w))),t.forEach(((x,w)=>f.set(x,new Jk(w,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Hu();let l=new Mt(((d,f)=>d-f)),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let w=s.get(g)||ds.empty();w=f.applyToLocalView(x,w),s.set(g,w);const v=(l.get(f.batchId)||Qe()).add(g);l=l.insert(f.batchId,v)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,w=g.value,v=F4();w.forEach((E=>{if(!c.has(E)){const R=X4(t.get(E),s.get(E));R!==null&&v.set(E,R),c=c.add(E)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,v))}return F.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return we.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):P4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):F.resolve(kr());let f=Yo,g=c;return d.next((x=>F.forEach(x,((w,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),c.get(w)?F.resolve():this.remoteDocumentCache.getEntry(e,w).next((E=>{g=g.insert(w,E)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,Qe()))).next((w=>({batchId:f,changes:q4(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((s=>{let l=ku();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=ku();return this.indexManager.getCollectionParents(e,c).next((f=>F.forEach(f,(g=>{const x=(function(v,E){return new xc(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((w=>{w.forEach(((v,E)=>{d=d.insert(v,E)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const w=x.getKey();d.get(w)===null&&(d=d.insert(w,Jt.newInvalidDocument(w)))}));let f=ku();return d.forEach(((g,x)=>{const w=c.get(g);w!==void 0&&Gu(w.mutation,x,ds.empty(),Et.now()),Td(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Zn(l.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:gE(l.bundledQuery),readTime:Zn(l.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.overlays=new Mt(we.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const s=kr();return F.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),F.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),F.resolve()}getOverlaysForCollection(e,t,s){const l=kr(),c=t.length+1,d=new we(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return F.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Mt(((x,w)=>x-w));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let w=c.get(x.largestBatchId);w===null&&(w=kr(),c=c.insert(x.largestBatchId,w)),w.set(x.getKey(),x)}}const f=kr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,w)=>f.set(x,w))),!(f.size()>=l)););return F.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Fx(t,s));let c=this.qr.get(t);c===void 0&&(c=Qe(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.Qr=new Tt(In.$r),this.Ur=new Tt(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new In(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new In(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new we(new vt([])),s=new In(t,e),l=new In(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new vt([])),s=new In(t,e),l=new In(t,e+1);let c=Qe();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new In(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class In{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(In.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Bx(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new In(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(d)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return F.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?vl:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new In(t,0),l=new In(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),F.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(ze);return t.forEach((l=>{const c=new In(l,0),d=new In(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),F.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;we.isDocumentKey(c)||(c=c.child(""));const d=new In(new we(c),0);let f=new Tt(ze);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),F.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){De(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return F.forEach(t.mutations,(l=>{const c=new In(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new In(t,0),l=this.Zr.firstAfterOrEqual(s);return F.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.ri=e,this.docs=(function(){return new Mt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return F.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let s=Es();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Jt.newInvalidDocument(l))})),F.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=Es();const d=t.path,f=new we(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:w}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Ax(r4(w),s)<=0||(l.has(w.key)||Td(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return F.resolve(c)}getAllFromCollectionGroup(e,t,s,l){je(9500)}ii(e,t){return F.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new s8(this)}getSize(e){return F.resolve(this.size)}}class s8 extends jE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.persistence=e,this.si=new Ta((t=>Cl(t)),jd),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Qx,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),F.waitFor(c).next((()=>l))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return F.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),F.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),F.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return F.resolve(s)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.ui={},this.overlays={},this.ci=new us(0),this.li=!1,this.li=!0,this.hi=new e8,this.referenceDelegate=e(this),this.Pi=new r8(this),this.indexManager=new Fk,this.remoteDocumentCache=(function(l){return new n8(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fE(t),this.Ii=new Wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new t8(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){xe("MemoryPersistence","Starting transaction:",e);const l=new a8(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return F.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class a8 extends i4{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Ri=new Qx,this.Vi=null}static mi(e){return new km(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),F.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(s=>{const l=we.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class tm{constructor(e,t){this.persistence=e,this.pi=new Ta((s=>$n(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=EE(this,t)}static mi(e,t){return new tm(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?F.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Me.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,s){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return F.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.serializer=e}k(e,t,s,l){const c=new bm("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(Ed)})(e),(function(g){g.createObjectStore(rd,{keyPath:_R}),g.createObjectStore(tr,{keyPath:n2,autoIncrement:!0}).createIndex(xl,s2,{unique:!0}),g.createObjectStore(Xo)})(e),$2(e),(function(g){g.createObjectStore(hl)})(e));let d=F.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(Wo),g.deleteObjectStore(Jo),g.deleteObjectStore(wl)})(e),$2(e)),d=d.next((()=>(function(g){const x=g.store(wl),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return x.put(Gf,w)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(tr).J().next((v=>{g.deleteObjectStore(tr),g.createObjectStore(tr,{keyPath:n2,autoIncrement:!0}).createIndex(xl,s2,{unique:!0});const E=x.store(tr),R=v.map((O=>E.put(O)));return F.waitFor(R)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(Zo,{keyPath:RR})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(ad)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(wm,{keyPath:kR})})(e),(function(g){g.createObjectStore(_m,{keyPath:DR})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(Nm,{keyPath:UR});x.createIndex(zp,BR,{unique:!1}),x.createIndex(m4,qR,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Hf,{keyPath:ER});x.createIndex(wf,jR),x.createIndex(u4,TR)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(hl)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Rx,{keyPath:OR,autoIncrement:!0}).createIndex(Lp,MR,{unique:!1}),g.createObjectStore(Uu,{keyPath:VR}).createIndex(h4,PR,{unique:!1}),g.createObjectStore(Bu,{keyPath:LR}).createIndex(f4,zR,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(Uu).clear()})).next((()=>{t.objectStore(Bu).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(kx,{keyPath:FR})})(e)}))),s<18&&l>=18&&rN()&&(d=d.next((()=>{t.objectStore(Uu).clear()})).next((()=>{t.objectStore(Bu).clear()}))),d}wi(e){let t=0;return e.store(hl).ee(((s,l)=>{t+=em(l)})).next((()=>{const s={byteSize:t};return e.store(ad).put(Pp,s)}))}yi(e){const t=e.store(rd),s=e.store(tr);return t.J().next((l=>F.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,vl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(xl,d).next((f=>F.forEach(f,(g=>{De(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=ml(this.serializer,g);return bE(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(Wo),s=e.store(hl);return e.store(wl).get(Gf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new vt(d),x=(function(v){return[0,$n(v)]})(g);c.push(t.get(x).next((w=>w?F.resolve():(v=>t.put({targetId:0,path:$n(v),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>F.waitFor(c)))}))}bi(e,t){e.createObjectStore(id,{keyPath:CR});const s=t.store(id),l=new Kx,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:$n(g)})}};return t.store(hl).ee({X:!0},((d,f)=>{const g=new vt(d);return c(g.popLast())})).next((()=>t.store(Xo).ee({X:!0},(([d,f,g],x)=>{const w=Rr(f);return c(w.popLast())}))))}Di(e){const t=e.store(Jo);return t.ee(((s,l)=>{const c=Ou(l),d=mE(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(hl),l=[];return s.ee(((c,d)=>{const f=t.store(Hf),g=(function(v){return v.document?new we(vt.fromString(v.document.name).popFirst(5)):v.noDocument?we.fromSegments(v.noDocument.path):v.unknownDocument?we.fromSegments(v.unknownDocument.path):je(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>F.waitFor(l)))}Fi(e,t){const s=t.store(tr),l=TE(this.serializer),c=new Yx(km.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??Qe();ml(this.serializer,g).keys().forEach((w=>x=x.add(w))),f.set(g.userId,x)})),F.forEach(f,((g,x)=>{const w=new Fn(x),v=Cm.wt(this.serializer,w),E=c.getIndexManager(w),R=Rm.wt(w,this.serializer,E,c.referenceDelegate);return new SE(l,R,v,E).recalculateAndSaveOverlaysForDocumentKeys(new Up(t,us.ce),g).next()}))}))}}function $2(r){r.createObjectStore(Wo,{keyPath:AR}).createIndex(Cx,IR,{unique:!0}),r.createObjectStore(Jo,{keyPath:"targetId"}).createIndex(d4,SR,{unique:!0}),r.createObjectStore(wl)}const ci="IndexedDbPersistence",tp=18e5,np=5e3,sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",l8="main";class Xx{constructor(e,t,s,l,c,d,f,g,x,w,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=w,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=E=>Promise.resolve(),!Xx.v())throw new ye(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qk(this,l),this.$i=t+l8,this.serializer=new fE(g),this.Ui=new vi(this.$i,this.Ni,new i8(this.serializer)),this.hi=new Pk,this.Pi=new Gk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TE(this.serializer),this.Ii=new Vk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&sn(ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(re.FAILED_PRECONDITION,sp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new us(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ki(e))return xe(ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe(ci,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Su(e).get(So).next((t=>F.resolve(this.es(t))))}ts(e){return hf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,tp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=Nn(t,Zo);return s.J().next((l=>{const c=this.ss(l,tp),d=l.filter((f=>c.indexOf(f)===-1));return F.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?F.resolve(!0):Su(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ye(re.FAILED_PRECONDITION,sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||hf(e).J().next((s=>this.ss(s,np).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&xe(ci,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ed,Zo],(e=>{const t=new Up(e,us.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>hf(e).J().next((t=>this.ss(t,tp).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Rm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){xe(ci,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?$R:g===17?y4:g===16?GR:g===15?Dx:g===14?x4:g===13?p4:g===12?HR:g===11?g4:void je(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new Up(f,this.ci?this.ci.next():us.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ye(re.FAILED_PRECONDITION,a4);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return Su(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(re.FAILED_PRECONDITION,sp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put(So,t)}static v(){return vi.v()}Zi(e){const t=Su(e);return t.get(So).next((s=>this.es(s)?(xe(ci,"Releasing primary lease."),t.delete(So)):F.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(sn(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;sN()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return xe(ci,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return sn(ci,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Su(r){return Nn(r,Ed)}function hf(r){return Nn(r,Zo)}function AE(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=Qe(),l=Qe();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Jx(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sN()?8:l4(_n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new o8;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(Do()<=tt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Do()<=tt.DEBUG&&xe("QueryEngine","Query:",Oo(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Do()<=tt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(t))):F.resolve())}ys(e,t){if(p2(t))return F.resolve(null);let s=js(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Yf(t,null,"F"),s=js(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Qe(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Yf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return p2(t)||l.isEqual(Me.min())?F.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?F.resolve(null):(Do()<=tt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Oo(t)),this.vs(e,d,t,s4(l,Yo)).next((f=>f)))}))}Ds(e,t){let s=new Tt(U4(e));return t.forEach(((l,c)=>{Td(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return Do()<=tt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.ps.getDocumentsMatchingQuery(e,t,As.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="LocalStore",c8=3e8;class u8{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Mt(ze),this.xs=new Ta((c=>Cl(c)),jd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function CE(r,e,t,s){return new u8(r,e,t,s)}async function RE(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=Qe();for(const x of l){d.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}for(const x of c){f.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function d8(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,w){const v=x.batch,E=v.keys();let R=F.resolve();return E.forEach((O=>{R=R.next((()=>w.getEntry(g,O))).next((J=>{const P=x.docVersions.get(O);De(P!==null,48541),J.version.compareTo(P)<0&&(v.applyToRemoteDocument(J,x),J.isValidDocument()&&(J.setReadTime(x.commitVersion),w.addEntry(J)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Qe();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function kE(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function h8(r,e){const t=Ce(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((w,v)=>{const E=l.get(v);if(!E)return;f.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,v))));let R=E.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(an.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,s)),l=l.insert(v,R),(function(J,P,le){return J.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=c8?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(E,R,w)&&f.push(t.Pi.updateTargetData(c,R))}));let g=Es(),x=Qe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),f.push(f8(c,d,e.documentUpdates).next((w=>{g=w.ks,x=w.qs}))),!s.isEqual(Me.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((v=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(w)}return F.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function f8(r,e,t){let s=Qe(),l=Qe();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Es();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Me.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):xe(Wx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function m8(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function nm(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,F.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new ga(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function cc(r,e,t){const s=Ce(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ki(d))throw d;xe(Wx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function sm(r,e,t){const s=Ce(r);let l=Me.min(),c=Qe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,w){const v=Ce(g),E=v.xs.get(w);return E!==void 0?F.resolve(v.Ms.get(E)):v.Pi.getTargetData(x,w)})(s,d,js(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Me.min(),t?c:Qe()))).next((f=>(ME(s,z4(e),f),{documents:f,Qs:c})))))}function DE(r,e){const t=Ce(r),s=Ce(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function OE(r,e){const t=Ce(r),s=t.Os.get(e)||Me.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,s4(s,Yo),Number.MAX_SAFE_INTEGER))).then((l=>(ME(t,e,l),l)))}function ME(r,e,t){let s=r.Os.get(e)||Me.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firestore_clients";function K2(r,e){return`${VE}_${r}_${e}`}const PE="firestore_mutations";function Q2(r,e,t){let s=`${PE}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const LE="firestore_targets";function rp(r,e){return`${LE}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="SharedClientState";class rm{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new ye(l.error.code,l.error.message))),d?new rm(e,t,l.state,c):(sn(Ir,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $u{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new ye(s.error.code,s.error.message))),c?new $u(e,s.state,l):(sn(Ir,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class am{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Lx();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=o4(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new am(e,c):(sn(Ir,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Zx(t.clientId,t.onlineState):(sn(Ir,`Failed to parse online state: ${e}`),null)}}class ex{constructor(){this.activeTargetIds=Lx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ap{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Mt(ze),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=K2(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ex),this.ro=new RegExp(`^${VE}_${d}_([^_]*)$`),this.io=new RegExp(`^${PE}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${LE}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(K2(this.persistenceKey,s));if(l){const c=am.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(rp(this.persistenceKey,e));if(l){const c=$u.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe(Ir,"READ",e,t),t}setItem(e,t){xe(Ir,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe(Ir,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(xe(Ir,"EVENT",t.key,t.newValue),t.key===this.eo)return void sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=us.ce;if(c!=null)try{const f=JSON.parse(c);De(typeof f=="number",30636,{So:c}),d=f}catch(f){sn(Ir,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==us.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new rm(this.currentUser,e,t,s),c=Q2(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=Q2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=rp(this.persistenceKey,e),c=new $u(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return am.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return rm.Ws(new Fn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return $u.Ws(l,t)}uo(e){return Zx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);xe(Ir,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Lx();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class zE{constructor(){this.Mo=new ex,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ex,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="ConnectivityMonitor";class X2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Y2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Y2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff=null;function tx(){return ff===null?ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():ff++,"0x"+ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="RestConnection",p8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===$f?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=tx(),f=this.zo(e,t.toUriEncodedString());xe(ip,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),w=fc(x);return this.Jo(e,f,g,s,w).then((v=>(xe(ip,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw td(ip,`RPC '${e}' ${d} failed with error: `,v,"url: ",f,"request:",s),v}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=p8[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class b8 extends x8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=tx();return new Promise(((f,g)=>{const x=new QN;x.setWithCredentials(!0),x.listenOnce(YN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case yf.NO_ERROR:const v=x.getResponseJson();xe(qn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),f(v);break;case yf.TIMEOUT:xe(qn,`RPC '${e}' ${d} timed out`),g(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const E=x.getStatus();if(xe(qn,`RPC '${e}' ${d} failed with status:`,E,"response text:",x.getResponseText()),E>0){let R=x.getResponseJson();Array.isArray(R)&&(R=R[0]);const O=R==null?void 0:R.error;if(O&&O.status&&O.message){const J=(function(le){const se=le.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(se)>=0?se:re.UNKNOWN})(O.status);g(new ye(J,O.message))}else g(new ye(re.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new ye(re.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{xe(qn,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);xe(qn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",w,s,15)}))}T_(e,t,s){const l=tx(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=WN(),f=JN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=c.join("");xe(qn,`Creating RPC '${e}' stream ${l}: ${w}`,g);const v=d.createWebChannel(w,g);this.I_(v);let E=!1,R=!1;const O=new y8({Yo:P=>{R?xe(qn,`Not sending because RPC '${e}' stream ${l} is closed:`,P):(E||(xe(qn,`Opening RPC '${e}' stream ${l} transport.`),v.open(),E=!0),xe(qn,`RPC '${e}' stream ${l} sending:`,P),v.send(P))},Zo:()=>v.close()}),J=(P,le,se)=>{P.listen(le,(te=>{try{se(te)}catch(me){setTimeout((()=>{throw me}),0)}}))};return J(v,Ru.EventType.OPEN,(()=>{R||(xe(qn,`RPC '${e}' stream ${l} transport opened.`),O.o_())})),J(v,Ru.EventType.CLOSE,(()=>{R||(R=!0,xe(qn,`RPC '${e}' stream ${l} transport closed`),O.a_(),this.E_(v))})),J(v,Ru.EventType.ERROR,(P=>{R||(R=!0,td(qn,`RPC '${e}' stream ${l} transport errored. Name:`,P.name,"Message:",P.message),O.a_(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),J(v,Ru.EventType.MESSAGE,(P=>{var le;if(!R){const se=P.data[0];De(!!se,16349);const te=se,me=(te==null?void 0:te.error)||((le=te[0])==null?void 0:le.error);if(me){xe(qn,`RPC '${e}' stream ${l} received error:`,me);const ce=me.status;let W=(function(A){const C=gn[A];if(C!==void 0)return Z4(C)})(ce),N=me.message;W===void 0&&(W=re.INTERNAL,N="Unknown error status: "+ce+" with message "+me.message),R=!0,O.a_(new ye(W,N)),v.close()}else xe(qn,`RPC '${e}' stream ${l} received:`,se),O.u_(se)}})),J(f,XN.STAT_EVENT,(P=>{P.stat===Op.PROXY?xe(qn,`RPC '${e}' stream ${l} detected buffering proxy`):P.stat===Op.NOPROXY&&xe(qn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(){return typeof window<"u"?window:null}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r){return new jk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&xe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="PersistentStream";class qE{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new ye(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(J2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(J2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class v8 extends qE{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Ak(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Me.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Me.min():d.readTime?Zn(d.readTime):Me.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Yp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=Kf(g)?{documents:lE(c,g)}:{query:oE(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=nE(c,d.resumeToken);const x=Kp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Me.min())>0){f.readTime=oc(c,d.snapshotVersion.toTimestamp());const x=Kp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=Ck(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Yp(this.serializer),t.removeTarget=e,this.q_(t)}}class w8 extends qE{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ik(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Yp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Jf(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{}class N8 extends _8{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Qp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(re.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Qp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class E8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sn(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="RemoteStore";class j8{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{zl(this)&&(xe(Ol,"Restarting streams for network reachability change."),await(async function(g){const x=Ce(g);x.Ea.add(4),await Cd(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Om(x)})(this))}))})),this.Ra=new E8(s,l)}}async function Om(r){if(zl(r))for(const e of r.da)await e(!0)}async function Cd(r){for(const e of r.da)await e(!1)}function Mm(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ny(t)?ty(t):vc(t).O_()&&ey(t,e))}function uc(r,e){const t=Ce(r),s=vc(t);t.Ia.delete(e),s.O_()&&FE(t,e),t.Ia.size===0&&(s.O_()?s.L_():zl(t)&&t.Ra.set("Unknown"))}function ey(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vc(r).Y_(e)}function FE(r,e){r.Va.Ue(e),vc(r).Z_(e)}function ty(r){r.Va=new wk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),vc(r).start(),r.Ra.ua()}function ny(r){return zl(r)&&!vc(r).x_()&&r.Ia.size>0}function zl(r){return Ce(r).Ea.size===0}function HE(r){r.Va=void 0}async function T8(r){r.Ra.set("Online")}async function S8(r){r.Ia.forEach(((e,t)=>{ey(r,e)}))}async function A8(r,e){HE(r),ny(r)?(r.Ra.ha(e),ty(r)):r.Ra.set("Unknown")}async function I8(r,e,t){if(r.Ra.set("Online"),e instanceof tE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){xe(Ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await im(r,s)}else if(e instanceof Tf?r.Va.Ze(e):e instanceof eE?r.Va.st(e):r.Va.tt(e),!t.isEqual(Me.min()))try{const s=await kE(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(x);w&&c.Ia.set(x,w.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(an.EMPTY_BYTE_STRING,w.snapshotVersion)),FE(c,g);const v=new ga(w.target,g,x,w.sequenceNumber);ey(c,v)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){xe(Ol,"Failed to raise snapshot:",s),await im(r,s)}}async function im(r,e,t){if(!ki(e))throw e;r.Ea.add(1),await Cd(r),r.Ra.set("Offline"),t||(t=()=>kE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(Ol,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Om(r)}))}function GE(r,e){return e().catch((t=>im(r,t,e)))}async function bc(r){const e=Ce(r),t=Si(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vl;for(;C8(e);)try{const l=await m8(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,R8(e,l)}catch(l){await im(e,l)}$E(e)&&KE(e)}function C8(r){return zl(r)&&r.Ta.length<10}function R8(r,e){r.Ta.push(e);const t=Si(r);t.O_()&&t.X_&&t.ea(e.mutations)}function $E(r){return zl(r)&&!Si(r).x_()&&r.Ta.length>0}function KE(r){Si(r).start()}async function k8(r){Si(r).ra()}async function D8(r){const e=Si(r);for(const t of r.Ta)e.ea(t.mutations)}async function O8(r,e,t){const s=r.Ta.shift(),l=qx.from(s,e,t);await GE(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await bc(r)}async function M8(r,e){e&&Si(r).X_&&await(async function(s,l){if((function(d){return yk(d)&&d!==re.ABORTED})(l.code)){const c=s.Ta.shift();Si(s).B_(),await GE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await bc(s)}})(r,e),$E(r)&&KE(r)}async function W2(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),xe(Ol,"RemoteStore received new credentials");const s=zl(t);t.Ea.add(3),await Cd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Om(t)}async function nx(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Om(t)):e||(t.Ea.add(2),await Cd(t),t.Ra.set("Unknown"))}function vc(r){return r.ma||(r.ma=(function(t,s,l){const c=Ce(t);return c.sa(),new v8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:T8.bind(null,r),t_:S8.bind(null,r),r_:A8.bind(null,r),H_:I8.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ny(r)?ty(r):r.Ra.set("Unknown")):(await r.ma.stop(),HE(r))}))),r.ma}function Si(r){return r.fa||(r.fa=(function(t,s,l){const c=Ce(t);return c.sa(),new w8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:k8.bind(null,r),r_:M8.bind(null,r),ta:D8.bind(null,r),na:O8.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await bc(r)):(await r.fa.stop(),r.Ta.length>0&&(xe(Ol,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new sy(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(r,e){if(sn("AsyncQueue",`${e}: ${r}`),ki(r))return new ye(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=ku(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.ga=new Mt(we.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class dc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new dc(e,t,Fo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class P8{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Ce(t),c=l.queries;l.queries=e_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function e_(){return new Ta((r=>L4(r)),Sm)}async function QE(r,e){const t=Ce(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new V8,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Vm(d,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&ry(t)}async function YE(r,e){const t=Ce(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function L8(r,e){const t=Ce(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&ry(t)}function z8(r,e,t){const s=Ce(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function ry(r){r.Ca.forEach((e=>{e.next()}))}var sx,t_;(t_=sx||(sx={})).Ma="default",t_.Cache="cache";class XE{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class ZE{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=U4(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Z2,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,v)=>{const E=l.get(w),R=Td(this.query,v)?v:null,O=!!E&&this.mutatedKeys.has(E.key),J=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let P=!1;E&&R?E.data.isEqual(R.data)?O!==J&&(s.track({type:3,doc:R}),P=!0):this.su(E,R)||(s.track({type:2,doc:R}),P=!0,(g&&this.eu(R,g)>0||x&&this.eu(R,x)<0)&&(f=!0)):!E&&R?(s.track({type:0,doc:R}),P=!0):E&&!R&&(s.track({type:1,doc:E}),P=!0,(g||x)&&(f=!0)),P&&(R?(d=d.add(R),c=J?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,v)=>(function(R,O){const J=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:P})}};return J(R)-J(O)})(w.type,v.type)||this.eu(w.doc,v.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new dc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Z2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new WE(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new JE(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wc="SyncEngine";class U8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class B8{constructor(e){this.key=e,this.hu=!1}}class q8{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ta((f=>L4(f)),Sm),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(we.comparator),this.Au=new Map,this.Ru=new Qx,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function F8(r,e,t=!0){const s=Pm(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await e5(s,e,t,!0),l}async function H8(r,e){const t=Pm(r);await e5(t,e,!0,!1)}async function e5(r,e,t,s){const l=await nm(r.localStore,js(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ay(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&Mm(r.remoteStore,l),f}async function ay(r,e,t,s,l){r.pu=(v,E,R)=>(async function(J,P,le,se){let te=P.view.ru(le);te.Cs&&(te=await sm(J.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,te))));const me=se&&se.targetChanges.get(P.targetId),ce=se&&se.targetMismatches.get(P.targetId)!=null,W=P.view.applyChanges(te,J.isPrimaryClient,me,ce);return rx(J,P.targetId,W.au),W.snapshot})(r,v,E,R);const c=await sm(r.localStore,e,!0),d=new ZE(e,c.Qs),f=d.ru(c.documents),g=Id.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);rx(r,t,x.au);const w=new U8(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function G8(r,e,t){const s=Ce(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Sm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await cc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&uc(s.remoteStore,l.targetId),hc(s,l.targetId)})).catch(Ri)):(hc(s,l.targetId),await cc(s.localStore,l.targetId,!0))}async function $8(r,e){const t=Ce(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),uc(t.remoteStore,s.targetId))}async function K8(r,e,t){const s=cy(r);try{const l=await(function(d,f){const g=Ce(d),x=Et.now(),w=f.reduce(((R,O)=>R.add(O.key)),Qe());let v,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let O=Es(),J=Qe();return g.Ns.getEntries(R,w).next((P=>{O=P,O.forEach(((le,se)=>{se.isValidDocument()||(J=J.add(le))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,O))).next((P=>{v=P;const le=[];for(const se of f){const te=pk(se,v.get(se.key).overlayedDocument);te!=null&&le.push(new Sa(se.key,te,A4(te.value.mapValue),wn.exists(!0)))}return g.mutationQueue.addMutationBatch(R,x,le,f)})).next((P=>{E=P;const le=P.applyToLocalDocumentSet(v,J);return g.documentOverlayCache.saveOverlays(R,P.batchId,le)}))})).then((()=>({batchId:E.batchId,changes:q4(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Mt(ze)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Oi(s,l.changes),await bc(s.remoteStore)}catch(l){const c=Vm(l,"Failed to persist write");t.reject(c)}}async function t5(r,e){const t=Ce(r);try{const s=await h8(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(De(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?De(d.hu,14607):l.removedDocuments.size>0&&(De(d.hu,42227),d.hu=!1))})),await Oi(t,s,e)}catch(s){await Ri(s)}}function n_(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=Ce(d);g.onlineState=f;let x=!1;g.queries.forEach(((w,v)=>{for(const E of v.Sa)E.va(f)&&(x=!0)})),x&&ry(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Q8(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Mt(we.comparator);d=d.insert(c,Jt.newNoDocument(c,Me.min()));const f=Qe().add(c),g=new Ad(Me.min(),new Map,new Mt(ze),d,f);await t5(s,g),s.du=s.du.remove(c),s.Au.delete(e),oy(s)}else await cc(s.localStore,e,!1).then((()=>hc(s,e,t))).catch(Ri)}async function Y8(r,e){const t=Ce(r),s=e.batch.batchId;try{const l=await d8(t.localStore,e);ly(t,s,null),iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Oi(t,l)}catch(l){await Ri(l)}}async function X8(r,e,t){const s=Ce(r);try{const l=await(function(d,f){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let w;return g.mutationQueue.lookupMutationBatch(x,f).next((v=>(De(v!==null,37113),w=v.keys(),g.mutationQueue.removeMutationBatch(x,v)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,w))).next((()=>g.localDocuments.getDocuments(x,w)))}))})(s.localStore,e);ly(s,e,t),iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Oi(s,l)}catch(l){await Ri(l)}}function iy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ly(r,e,t){const s=Ce(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function hc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||n5(r,s)}))}function n5(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(uc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),oy(r))}function rx(r,e,t){for(const s of t)s instanceof JE?(r.Ru.addReference(s.key,e),J8(r,s)):s instanceof WE?(xe(wc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||n5(r,s.key)):je(19791,{wu:s})}function J8(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(xe(wc,"New document in limbo: "+t),r.Eu.add(s),oy(r))}function oy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(vt.fromString(e)),s=r.fu.next();r.Au.set(s,new B8(t)),r.du=r.du.insert(t,s),Mm(r.remoteStore,new ga(js(Tm(t.path)),s,"TargetPurposeLimboResolution",us.ce))}}async function Oi(r,e,t){const s=Ce(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var w;if((x||t)&&s.isPrimaryClient){const v=x?!x.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(x){l.push(x);const v=Jx.As(g.targetId,x);c.push(v)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const w=Ce(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>F.forEach(x,(E=>F.forEach(E.Es,(R=>w.persistence.referenceDelegate.addReference(v,E.targetId,R))).next((()=>F.forEach(E.ds,(R=>w.persistence.referenceDelegate.removeReference(v,E.targetId,R)))))))))}catch(v){if(!ki(v))throw v;xe(Wx,"Failed to update sequence numbers: "+v)}for(const v of x){const E=v.targetId;if(!v.fromCache){const R=w.Ms.get(E),O=R.snapshotVersion,J=R.withLastLimboFreeSnapshotVersion(O);w.Ms=w.Ms.insert(E,J)}}})(s.localStore,c))}async function W8(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){xe(wc,"User change. New user:",e.toKey());const s=await RE(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new ye(re.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oi(t,s.Ls)}}function Z8(r,e){const t=Ce(r),s=t.Au.get(e);if(s&&s.hu)return Qe().add(s.key);{let l=Qe();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function e9(r,e){const t=Ce(r),s=await sm(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&rx(t,e.targetId,l.au),l}async function t9(r,e){const t=Ce(r);return OE(t.localStore,e).then((s=>Oi(t,s)))}async function n9(r,e,t,s){const l=Ce(r),c=await(function(f,g){const x=Ce(f),w=Ce(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(v=>w.er(v,g).next((E=>E?x.localDocuments.getDocuments(v,E):F.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await bc(l.remoteStore):t==="acknowledged"||t==="rejected"?(ly(l,e,s||null),iy(l,e),(function(f,g){Ce(Ce(f).mutationQueue).ir(g)})(l.localStore,e)):je(6720,"Unknown batchState",{Su:t}),await Oi(l,c)):xe(wc,"Cannot apply mutation batch with id: "+e)}async function s9(r,e){const t=Ce(r);if(Pm(t),cy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await s_(t,s.toArray());t.gu=!0,await nx(t.remoteStore,!0);for(const c of l)Mm(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(hc(t,d),cc(t.localStore,d,!0)))),uc(t.remoteStore,d)})),await l,await s_(t,s),(function(d){const f=Ce(d);f.Au.forEach(((g,x)=>{uc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Mt(we.comparator)})(t),t.gu=!1,await nx(t.remoteStore,!1)}}async function s_(r,e,t){const s=Ce(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await nm(s.localStore,js(g[0]));for(const x of g){const w=s.Tu.get(x),v=await e9(s,w);v.snapshot&&c.push(v.snapshot)}}else{const x=await DE(s.localStore,d);f=await nm(s.localStore,x),await ay(s,s5(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function s5(r){return V4(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function r9(r){return(function(t){return Ce(Ce(t).persistence).Ts()})(Ce(r).localStore)}async function a9(r,e,t,s){const l=Ce(r);if(l.gu)return void xe(wc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await OE(l.localStore,z4(c[0])),f=Ad.createSynthesizedRemoteEventForCurrentChange(e,t==="current",an.EMPTY_BYTE_STRING);await Oi(l,d,f);break}case"rejected":await cc(l.localStore,e,!0),hc(l,e,s);break;default:je(64155,t)}}async function i9(r,e,t){const s=Pm(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){xe(wc,"Adding an already active target "+l);continue}const c=await DE(s.localStore,l),d=await nm(s.localStore,c);await ay(s,s5(c),d.targetId,!1,d.resumeToken),Mm(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await cc(s.localStore,l,!1).then((()=>{uc(s.remoteStore,l),hc(s,l)})).catch(Ri)}}function Pm(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=t5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q8.bind(null,e),e.Pu.H_=L8.bind(null,e.eventManager),e.Pu.yu=z8.bind(null,e.eventManager),e}function cy(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X8.bind(null,e),e}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return CE(this.persistence,new IE,e.initialUser,this.serializer)}Cu(e){return new Yx(km.mi,this.serializer)}Du(e){return new zE}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class l9 extends hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){De(this.persistence.referenceDelegate instanceof tm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new NE(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Yx((s=>tm.mi(s,t)),this.serializer)}}class r5 extends hd{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cy(this.xu.syncEngine),await bc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return CE(this.persistence,new IE,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new NE(s,e.asyncQueue,t)}Mu(e,t){const s=new vR(t,this.persistence);return new bR(e.asyncQueue,s)}Cu(e){const t=AE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Xx(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,UE(),Af(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zE}}class o9 extends r5{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ap&&(this.sharedClientState.syncEngine={Co:n9.bind(null,t),vo:a9.bind(null,t),Fo:i9.bind(null,t),Ts:r9.bind(null,t),Do:t9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await s9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=UE();if(!ap.v(t))throw new ye(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=AE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ap(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class fd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>n_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=W8.bind(null,this.syncEngine),await nx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P8})()}createDatastore(e){const t=Dm(e.databaseInfo.databaseId),s=(function(c){return new b8(c)})(e.databaseInfo);return(function(c,d,f,g){return new N8(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new j8(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>n_(this.syncEngine,t,0)),(function(){return X2.v()?new X2:new g8})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,w){const v=new q8(l,c,d,f,g,x);return w&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=Ce(l);xe(Ol,"RemoteStore shutting down."),c.Ea.add(5),await Cd(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}fd.provider={build:()=>new fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class c9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Fn.UNAUTHENTICATED,this.clientId=Sx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{xe(Ai,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(xe(Ai,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Vm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function lp(r,e){r.asyncQueue.verifyOperationInProgress(),xe(Ai,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await RE(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function r_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await i5(r);xe(Ai,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>W2(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>W2(e.remoteStore,l))),r._onlineComponents=e}async function i5(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(Ai,"Using user provided OfflineComponentProvider");try{await lp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===re.FAILED_PRECONDITION||l.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;td("Error using user provided cache. Falling back to memory cache: "+t),await lp(r,new hd)}}else xe(Ai,"Using default OfflineComponentProvider"),await lp(r,new l9(void 0));return r._offlineComponents}async function l5(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(Ai,"Using user provided OnlineComponentProvider"),await r_(r,r._uninitializedComponentsProvider._online)):(xe(Ai,"Using default OnlineComponentProvider"),await r_(r,new fd))),r._onlineComponents}function u9(r){return i5(r).then((e=>e.localStore))}function d9(r){return l5(r).then((e=>e.syncEngine))}async function o5(r){const e=await l5(r),t=e.eventManager;return t.onListen=F8.bind(null,e.syncEngine),t.onUnlisten=G8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=H8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$8.bind(null,e.syncEngine),t}function h9(r,e,t={}){const s=new sr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new a5({next:E=>{w.Nu(),d.enqueueAndForget((()=>YE(c,v)));const R=E.docs.has(f);!R&&E.fromCache?x.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&g&&g.source==="server"?x.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(E)},error:E=>x.reject(E)}),v=new XE(Tm(f.path),w,{includeMetadataChanges:!0,qa:!0});return QE(c,v)})(await o5(r),r.asyncQueue,e,t,s))),s.promise}function f9(r,e){const t=new sr;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await sm(l,c,!0),g=new ZE(c,f.Qs),x=g.ru(f.documents),w=g.applyChanges(x,!1);d.resolve(w.snapshot)}catch(f){const g=Vm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await u9(r),e,t))),t.promise}function c5(r,e,t={}){const s=new sr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new a5({next:E=>{w.Nu(),d.enqueueAndForget((()=>YE(c,v))),E.fromCache&&g.source==="server"?x.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(E)},error:E=>x.reject(E)}),v=new XE(f,w,{includeMetadataChanges:!0,qa:!0});return QE(c,v)})(await o5(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="firestore.googleapis.com",i_=!0;class l_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m9,this.ssl=i_}else this.host=e.host,this.ssl=e.ssl??i_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_E)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u5(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uy{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new iR;switch(s.type){case"firstParty":return new cR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=a_.get(t);s&&(xe("ComponentProvider","Removing Datastore"),a_.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qr(this.firestore,e,this._query)}}class rn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Nd(t,rn._jsonSchema))return new rn(e,s||null,new we(vt.fromString(t.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:xn("string",rn._jsonSchemaVersion),referencePath:xn("string")};class wi extends qr{constructor(e,t,s){super(e,t,Tm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new we(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function kt(r,e,...t){if(r=Ft(r),t4("collection","path",e),r instanceof uy){const s=vt.fromString(e,...t);return Jw(s),new wi(r,null,s)}{if(!(r instanceof rn||r instanceof wi))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...t));return Jw(s),new wi(r.firestore,null,s)}}function Un(r,e,...t){if(r=Ft(r),arguments.length===1&&(e=Sx.newId()),t4("doc","path",e),r instanceof uy){const s=vt.fromString(e,...t);return Xw(s),new rn(r,null,new we(s))}{if(!(r instanceof rn||r instanceof wi))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...t));return Xw(s),new rn(r.firestore,r instanceof wi?r.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="AsyncQueue";class c_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BE(this,"async_queue_retry"),this._c=()=>{const s=Af();s&&xe(o_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Af();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Af();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ki(e))throw e;xe(o_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",u_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=sy.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&je(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Fr extends uy{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new c_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function g9(r,e,t){t||(t=$f);const s=Ll(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(Ei(c,e))return l;throw new ye(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ye(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_E)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fc(e.host)&&eN(e.host),s.initialize({options:e,instanceIdentifier:t})}function _c(r){if(r._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||p9(r),r._firestoreClient}function p9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,w){return new QR(f,g,x,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,u5(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new c9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(an.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fs(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nd(e,Fs._jsonSchema))return Fs.fromBase64String(e.bytes)}}Fs._jsonSchemaVersion="firestore/bytes/1.0",Fs._jsonSchema={type:xn("string",Fs._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(Nd(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:xn("string",Pr._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nd(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Lr(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:xn("string",Lr._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=/^__.*__$/;class y9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class d5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function h5(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:r})}}class dy{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(h5(this.Ac)&&x9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class b9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Dm(e)}Cc(e,t,s,l=!1){return new dy({Ac:e,methodName:t,Dc:s,path:qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(r){const e=r._freezeSettings(),t=Dm(r._databaseId);return new b9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hy(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);gy("Data must be an object, but it was:",d,s);const f=g5(s,d);let g,x;if(c.merge)g=new ds(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const v of c.mergeFields){const E=ax(e,v,t);if(!d.contains(E))throw new ye(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);x5(w,E)||w.push(E)}g=new ds(w),x=d.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,x=d.fieldTransforms;return new y9(new Gn(f),g,x)}class Lm extends kd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lm}}class fy extends kd{_toFieldTransform(e){return new Ux(e.path,new rc)}isEqual(e){return e instanceof fy}}class my extends kd{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new lc(e.serializer,G4(e.serializer,this.Fc));return new Ux(e.path,t)}isEqual(e){return e instanceof my&&this.Fc===e.Fc}}function f5(r,e,t,s){const l=r.Cc(1,e,t);gy("Data must be an object, but it was:",l,s);const c=[],d=Gn.empty();Di(s,((g,x)=>{const w=py(e,g,t);x=Ft(x);const v=l.yc(w);if(x instanceof Lm)c.push(w);else{const E=Od(x,v);E!=null&&(c.push(w),d.set(w,E))}}));const f=new ds(c);return new d5(d,f,l.fieldTransforms)}function m5(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[ax(e,s,t)],g=[l];if(c.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)f.push(ax(e,c[E])),g.push(c[E+1]);const x=[],w=Gn.empty();for(let E=f.length-1;E>=0;--E)if(!x5(x,f[E])){const R=f[E];let O=g[E];O=Ft(O);const J=d.yc(R);if(O instanceof Lm)x.push(R);else{const P=Od(O,J);P!=null&&(x.push(R),w.set(R,P))}}const v=new ds(x);return new d5(w,v,d.fieldTransforms)}function v9(r,e,t,s=!1){return Od(t,r.Cc(s?4:3,e))}function Od(r,e){if(p5(r=Ft(r)))return gy("Unsupported field value:",e,r),g5(r,e);if(r instanceof kd)return(function(s,l){if(!h5(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=Od(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return G4(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Et.fromDate(s);return{timestampValue:oc(l.serializer,c)}}if(s instanceof Et){const c=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:oc(l.serializer,c)}}if(s instanceof Pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Fs)return{bytesValue:nE(l.serializer,s._byteString)};if(s instanceof rn){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Gx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Lr)return(function(d,f){return{mapValue:{fields:{[Mx]:{stringValue:Vx},[ec]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return zx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${ym(s)}`)})(r,e)}function g5(r,e){const t={};return b4(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(r,((s,l)=>{const c=Od(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function p5(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Et||r instanceof Pr||r instanceof Fs||r instanceof rn||r instanceof kd||r instanceof Lr)}function gy(r,e,t){if(!p5(t)||!n4(t)){const s=ym(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ax(r,e,t){if((e=Ft(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return py(r,e);throw lm("Field path arguments must be of type string or ",r,!1,void 0,t)}const w9=new RegExp("[~\\*/\\[\\]]");function py(r,e,t){if(e.search(w9)>=0)throw lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function lm(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new ye(re.INVALID_ARGUMENT,f+r+g)}function x5(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _9 extends y5{data(){return super.data()}}function zm(r,e){return typeof e=="string"?py(r,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class yy extends xy{}function zn(r,e,...t){let s=[];e instanceof xy&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof by)).length,f=c.filter((g=>g instanceof Um)).length;if(d>1||d>0&&f>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Um extends yy{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Um(e,t,s)}_apply(e){const t=this._parse(e);return b5(e._query,t),new qr(e.firestore,e.converter,$p(e._query,t))}_parse(e){const t=Dd(e.firestore);return(function(c,d,f,g,x,w,v){let E;if(x.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){h_(v,w);const O=[];for(const J of v)O.push(d_(g,c,J));E={arrayValue:{values:O}}}else E=d_(g,c,v)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||h_(v,w),E=v9(f,d,v,w==="in"||w==="not-in");return nt.create(x,w,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(r,e,t){const s=e,l=zm("where",r);return Um._create(l,s,t)}class by extends xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)b5(d,g),d=$p(d,g)})(e._query,t),new qr(e.firestore,e.converter,$p(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vy extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vy(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dd(c,d)})(e._query,this._field,this._direction);return new qr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new xc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function Nc(r,e="asc"){const t=e,s=zm("orderBy",r);return vy._create(s,t)}class wy extends yy{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new wy(e,t,s)}_apply(e){return new qr(e.firestore,e.converter,Yf(e._query,this._limit,this._limitType))}}function Ii(r){return pR("limit",r),wy._create("limit",r,"F")}function d_(r,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P4(e)&&t.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vt.fromString(t));if(!we.isDocumentKey(s))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return cd(r,new we(s))}if(t instanceof rn)return cd(r,t._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(t)}.`)}function h_(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b5(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class E9{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Di(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[ec].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Bt(d.doubleValue)));return new Lr(t)}convertGeoPoint(e){return new Pr(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Em(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ld(e));default:return null}}convertTimestamp(e){const t=_a(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vt.fromString(e);De(hE(s),9688,{name:e});const l=new Il(s.get(1),s.get(3)),c=new we(s.popFirst(5));return l.isEqual(t)||sn(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends y5{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Nl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:xn("string",Nl._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class If extends Nl{data(e={}){return super.data(e)}}class _i{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Mu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new If(this._firestore,this._userDataWriter,s.key,s,new Mu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new If(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Mu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new If(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Mu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,w=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),w=d.indexOf(f.doc.key)),{type:j9(f.type),doc:g,oldIndex:x,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_i._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j9(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(r){r=ts(r,rn);const e=ts(r.firestore,Fr);return h9(_c(e),r._key).then((t=>A9(e,r,t)))}_i._jsonSchemaVersion="firestore/querySnapshot/1.0",_i._jsonSchema={type:xn("string",_i._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class Bm extends E9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}function ns(r){r=ts(r,qr);const e=ts(r.firestore,Fr),t=_c(e),s=new Bm(e);return N9(r._query),c5(t,r._query).then((l=>new _i(e,s,r,l)))}function T9(r){r=ts(r,qr);const e=ts(r.firestore,Fr),t=_c(e),s=new Bm(e);return f9(t,r._query).then((l=>new _i(e,s,r,l)))}function S9(r){r=ts(r,qr);const e=ts(r.firestore,Fr),t=_c(e),s=new Bm(e);return c5(t,r._query,{source:"server"}).then((l=>new _i(e,s,r,l)))}function Ey(r,e,t){r=ts(r,rn);const s=ts(r.firestore,Fr),l=_y(r.converter,e,t);return Vd(s,[hy(Dd(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,wn.none())])}function Md(r,e,t,...s){r=ts(r,rn);const l=ts(r.firestore,Fr),c=Dd(l);let d;return d=typeof(e=Ft(e))=="string"||e instanceof Rd?m5(c,"updateDoc",r._key,e,t,s):f5(c,"updateDoc",r._key,e),Vd(l,[d.toMutation(r._key,wn.exists(!0))])}function qm(r){return Vd(ts(r.firestore,Fr),[new Sd(r._key,wn.none())])}function ir(r,e){const t=ts(r.firestore,Fr),s=Un(r),l=_y(r.converter,e);return Vd(t,[hy(Dd(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,wn.exists(!1))]).then((()=>s))}function Vd(r,e){return(function(s,l){const c=new sr;return s.asyncQueue.enqueueAndForget((async()=>K8(await d9(s),l,c))),c.promise})(_c(r),e)}function A9(r,e,t){const s=t.docs.get(e._key),l=new Bm(r);return new Nl(r,l,e._key,s,new Mu(t.hasPendingWrites,t.fromCache),e.converter)}class I9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=D9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function C9(r){return new I9(r)}class R9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=fd.provider,this._offlineComponentProvider={build:t=>new r5(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class k9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=fd.provider,this._offlineComponentProvider={build:t=>new o9(t,e==null?void 0:e.cacheSizeBytes)}}}function D9(r){return new R9(r==null?void 0:r.forceOwnership)}function O9(){return new k9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dd(e)}set(e,t,s){this._verifyNotCommitted();const l=op(e,this._firestore),c=_y(l.converter,t,s),d=hy(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,wn.none())),this}update(e,t,s,...l){this._verifyNotCommitted();const c=op(e,this._firestore);let d;return d=typeof(t=Ft(t))=="string"||t instanceof Rd?m5(this._dataReader,"WriteBatch.update",c._key,t,s,l):f5(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=op(e,this._firestore);return this._mutations=this._mutations.concat(new Sd(t._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function op(r,e){if((r=Ft(r)).firestore!==e)throw new ye(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Ts(){return new fy("serverTimestamp")}function ix(r){return new my("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(r){return _c(r=ts(r,Fr)),new M9(r,(e=>Vd(r,e)))}(function(e,t=!0){(function(l){pc=l})(mc),Ur(new rr("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new Fr(new lR(s.getProvider("auth-internal")),new uR(d,s.getProvider("app-check-internal")),(function(x,w){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(x.options.projectId,w)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Hs($w,Kw,e),Hs($w,Kw,"esm2020")})();const v5="@firebase/installations",jy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=1e4,_5=`w:${jy}`,N5="FIS_v2",P9="https://firebaseinstallations.googleapis.com/v1",L9=3600*1e3,z9="installations",U9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ml=new Pl(z9,U9,B9);function E5(r){return r instanceof lr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5({projectId:r}){return`${P9}/projects/${r}/installations`}function T5(r){return{token:r.token,requestStatus:2,expiresIn:F9(r.expiresIn),creationTime:Date.now()}}async function S5(r,e){const s=(await e.json()).error;return Ml.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function A5({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function q9(r,{refreshToken:e}){const t=A5(r);return t.append("Authorization",H9(e)),t}async function I5(r){const e=await r();return e.status>=500&&e.status<600?r():e}function F9(r){return Number(r.replace("s","000"))}function H9(r){return`${N5} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=j5(r),l=A5(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:N5,appId:r.appId,sdkVersion:_5},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await I5(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:T5(x.authToken)}}else throw await S5("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=/^[cdef][\w-]{21}$/,lx="";function Q9(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=Y9(r);return K9.test(t)?t:lx}catch{return lx}}function Y9(r){return $9(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=new Map;function k5(r,e){const t=Fm(r);D5(t,e),X9(t,e)}function D5(r,e){const t=R5.get(r);if(t)for(const s of t)s(e)}function X9(r,e){const t=J9();t&&t.postMessage({key:r,fid:e}),W9()}let yl=null;function J9(){return!yl&&"BroadcastChannel"in self&&(yl=new BroadcastChannel("[Firebase] FID Change"),yl.onmessage=r=>{D5(r.data.key,r.data.fid)}),yl}function W9(){R5.size===0&&yl&&(yl.close(),yl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="firebase-installations-database",eD=1,Vl="firebase-installations-store";let cp=null;function Ty(){return cp||(cp=oN(Z9,eD,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Vl)}}})),cp}async function om(r,e){const t=Fm(r),l=(await Ty()).transaction(Vl,"readwrite"),c=l.objectStore(Vl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&k5(r,e.fid),e}async function O5(r){const e=Fm(r),s=(await Ty()).transaction(Vl,"readwrite");await s.objectStore(Vl).delete(e),await s.done}async function Hm(r,e){const t=Fm(r),l=(await Ty()).transaction(Vl,"readwrite"),c=l.objectStore(Vl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&k5(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(r){let e;const t=await Hm(r.appConfig,s=>{const l=tD(s),c=nD(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===lx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function tD(r){const e=r||{fid:Q9(),registrationStatus:0};return M5(e)}function nD(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Ml.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=sD(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rD(r)}:{installationEntry:e}}async function sD(r,e){try{const t=await G9(r,e);return om(r.appConfig,t)}catch(t){throw E5(t)&&t.customData.serverCode===409?await O5(r.appConfig):await om(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function rD(r){let e=await f_(r.appConfig);for(;e.registrationStatus===1;)await C5(100),e=await f_(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Sy(r);return s||t}return e}function f_(r){return Hm(r,e=>{if(!e)throw Ml.create("installation-not-found");return M5(e)})}function M5(r){return aD(r)?{fid:r.fid,registrationStatus:0}:r}function aD(r){return r.registrationStatus===1&&r.registrationTime+w5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD({appConfig:r,heartbeatServiceProvider:e},t){const s=lD(r,t),l=q9(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:_5,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await I5(()=>fetch(s,f));if(g.ok){const x=await g.json();return T5(x)}else throw await S5("Generate Auth Token",g)}function lD(r,{fid:e}){return`${j5(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(r,e=!1){let t;const s=await Hm(r.appConfig,c=>{if(!V5(c))throw Ml.create("not-registered");const d=c.authToken;if(!e&&uD(d))return c;if(d.requestStatus===1)return t=oD(r,e),c;{if(!navigator.onLine)throw Ml.create("app-offline");const f=hD(c);return t=cD(r,f),f}});return t?await t:s.authToken}async function oD(r,e){let t=await m_(r.appConfig);for(;t.authToken.requestStatus===1;)await C5(100),t=await m_(r.appConfig);const s=t.authToken;return s.requestStatus===0?Ay(r,e):s}function m_(r){return Hm(r,e=>{if(!V5(e))throw Ml.create("not-registered");const t=e.authToken;return fD(t)?{...e,authToken:{requestStatus:0}}:e})}async function cD(r,e){try{const t=await iD(r,e),s={...e,authToken:t};return await om(r.appConfig,s),t}catch(t){if(E5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await O5(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await om(r.appConfig,s)}throw t}}function V5(r){return r!==void 0&&r.registrationStatus===2}function uD(r){return r.requestStatus===2&&!dD(r)}function dD(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+L9}function hD(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function fD(r){return r.requestStatus===1&&r.requestTime+w5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(r){const e=r,{installationEntry:t,registrationPromise:s}=await Sy(e);return s?s.catch(console.error):Ay(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(r,e=!1){const t=r;return await pD(t),(await Ay(t,e)).token}async function pD(r){const{registrationPromise:e}=await Sy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(r){if(!r||!r.options)throw up("App Configuration");if(!r.name)throw up("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw up(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function up(r){return Ml.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="installations",yD="installations-internal",bD=r=>{const e=r.getProvider("app").getImmediate(),t=xD(e),s=Ll(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},vD=r=>{const e=r.getProvider("app").getImmediate(),t=Ll(e,P5).getImmediate();return{getId:()=>mD(t),getToken:l=>gD(t,l)}};function wD(){Ur(new rr(P5,bD,"PUBLIC")),Ur(new rr(yD,vD,"PRIVATE"))}wD();Hs(v5,jy);Hs(v5,jy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="analytics",_D="firebase_id",ND="origin",ED=60*1e3,jD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new mm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ss=new Pl("analytics","Analytics",TD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(r){if(!r.startsWith(Iy)){const e=Ss.create("invalid-gtag-resource",{gtagURL:r});return es.warn(e.message),""}return r}function L5(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function AD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function ID(r,e){const t=AD("firebase-js-sdk-policy",{createScriptURL:SD}),s=document.createElement("script"),l=`${Iy}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function CD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function RD(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await L5(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){es.error(f)}r("config",l,c)}async function kD(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await L5(t);for(const g of d){const x=f.find(v=>v.measurementId===g),w=x&&e[x.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){es.error(c)}}function DD(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await kD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await RD(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){es.error(f)}}return l}function OD(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=DD(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function MD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Iy)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=30,PD=1e3;class LD{constructor(e={},t=PD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const z5=new LD;function zD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function UD(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:zD(t)},l=jD.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw Ss.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function BD(r,e=z5,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw Ss.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw Ss.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new HD;return setTimeout(async()=>{f.abort()},ED),U5({appId:s,apiKey:l,measurementId:c},d,f,e)}async function U5(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=z5){var f;const{appId:c,measurementId:d}=r;try{await qD(s,e)}catch(g){if(d)return es.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await UD(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!FD(x)){if(l.deleteThrottleMetadata(c),d)return es.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const w=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?xw(t,l.intervalMillis,VD):xw(t,l.intervalMillis),v={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return l.setThrottleMetadata(c,v),es.debug(`Calling attemptFetch again in ${w} millis`),U5(r,v,s,l)}}function qD(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(Ss.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function FD(r){if(!(r instanceof lr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class HD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GD(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function $D(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(){if(px())try{await aN()}catch(r){return es.warn(Ss.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return es.warn(Ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function QD(r,e,t,s,l,c,d){const f=BD(r);f.then(E=>{t[E.measurementId]=E.appId,r.options.measurementId&&E.measurementId!==r.options.measurementId&&es.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>es.error(E)),e.push(f);const g=KD().then(E=>{if(E)return s.getId()}),[x,w]=await Promise.all([f,g]);MD(c)||ID(c,x.measurementId),l("js",new Date);const v=(d==null?void 0:d.config)??{};return v[ND]="firebase",v.update=!0,w!=null&&(v[_D]=w),l("config",x.measurementId,v),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.app=e}_delete(){return delete Ho[this.app.options.appId],Promise.resolve()}}let Ho={},g_=[];const p_={};let dp="dataLayer",XD="gtag",x_,Cy,y_=!1;function JD(){const r=[];if(nN()&&r.push("This is a browser extension environment."),v3()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=Ss.create("invalid-analytics-context",{errorInfo:e});es.warn(t.message)}}function WD(r,e,t){JD();const s=r.options.appId;if(!s)throw Ss.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)es.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ss.create("no-api-key");if(Ho[s]!=null)throw Ss.create("already-exists",{id:s});if(!y_){CD(dp);const{wrappedGtag:c,gtagCore:d}=OD(Ho,g_,p_,dp,XD);Cy=c,x_=d,y_=!0}return Ho[s]=QD(r,g_,p_,e,x_,dp,t),new YD(r)}function ZD(r=uN()){r=Ft(r);const e=Ll(r,cm);return e.isInitialized()?e.getImmediate():e7(r)}function e7(r,e={}){const t=Ll(r,cm);if(t.isInitialized()){const l=t.getImmediate();if(Ei(e,t.getOptions()))return l;throw Ss.create("already-initialized")}return t.initialize({options:e})}function t7(r,e,t){r=Ft(r),$D(Cy,Ho[r.app.options.appId],e,t).catch(s=>es.error(s))}function n7(r,e,t,s){r=Ft(r),GD(Cy,Ho[r.app.options.appId],e,t,s).catch(l=>es.error(l))}const b_="@firebase/analytics",v_="0.10.19";function s7(){Ur(new rr(cm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return WD(s,l,t)},"PUBLIC")),Ur(new rr("analytics-internal",r,"PRIVATE")),Hs(b_,v_),Hs(b_,v_,"esm2020");function r(e){try{const t=e.getProvider(cm).getImmediate();return{logEvent:(s,l,c)=>n7(t,s,l,c),setUserProperties:(s,l)=>t7(t,s,l)}}catch(t){throw Ss.create("interop-component-reg-failed",{reason:t})}}}s7();const r7={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Ry=cN(r7),Ku=sR(Ry),Ue=g9(Ry,{localCache:C9({tabManager:O9()})});ZD(Ry);const a7=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:i.jsx(t3,{className:"w-10 h-10 text-red-500/80"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[i.jsx(gd,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"relative flex py-2 items-center",children:[i.jsx("div",{className:"flex-grow border-t border-gray-700"}),i.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),i.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[i.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),i.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),i.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:i.jsx(El,{className:"w-5 h-5"})})]})]})]})]}),i.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},B5=V.createContext(void 0),i7=({children:r})=>{const[e,t]=V.useState(null),[s,l]=V.useState(!0),[c,d]=V.useState(!1),f=v=>{if(!v.isSubscriber||!v.subscriptionExpiry)return!1;const E=Date.now();let R=0;return v.subscriptionExpiry.seconds?R=v.subscriptionExpiry.seconds*1e3:typeof v.subscriptionExpiry=="string"?R=new Date(v.subscriptionExpiry).getTime():v.subscriptionExpiry instanceof Date&&(R=v.subscriptionExpiry.getTime()),E<R},g=(v,E)=>{const R=`teacher-${E.split("@")[0]}`;let O="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";v.includes("")?O="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":v.includes("")&&(O="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:R,email:E,displayName:v,role:"teacher",avatar:O,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",v),localStorage.setItem("teacherEmail",E)},x=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):(await $6(Ku),e!=null&&e.uid&&localStorage.removeItem(`etqan_user_profile_${e.uid}`))}catch(v){console.error("Logout error",v)}},w=async v=>{if(e)try{let E={...v};if(v.firstName!==void 0||v.lastName!==void 0){const O=v.firstName!==void 0?v.firstName:e.firstName||"",J=v.lastName!==void 0?v.lastName:e.lastName||"";E.displayName=`${O} ${J}`.trim()}const R=e?{...e,...E}:null;if(t(R),R){const O=`etqan_user_profile_${e.uid}`;localStorage.setItem(O,JSON.stringify({data:R,timestamp:Date.now()}))}if(e.role!=="teacher"){const O=Un(Ue,"users",e.uid);await Ey(O,E,{merge:!0})}}catch(E){throw console.error("Error updating profile:",E),E}};return V.useEffect(()=>{const v=setTimeout(()=>{s&&d(!0)},1e4),E=localStorage.getItem("isTeacher")==="true";if(E){const O=localStorage.getItem("teacherName")||"",J=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";g(O,J),l(!1),clearTimeout(v);return}const R=G6(Ku,async O=>{if(O){const J=`etqan_user_profile_${O.uid}`,P=365*24*60*60*1e3,le=Date.now(),se=localStorage.getItem(J);let te=!1;if(se)try{const{data:me,timestamp:ce}=JSON.parse(se);if(le-ce<P){const W=f(me);t({...me,isSubscriber:W}),te=!0}}catch(me){console.error("Profile cache parse error",me)}if(!te)try{const me=Un(Ue,"users",O.uid),ce=await Ny(me);if(ce.exists()){const W=ce.data();(O.email==="q@gmail.com"||O.email==="yazan22@gmail.com")&&(W.totalXP=25e3,W.quizzesCompleted=500);const N=f(W),T={uid:O.uid,email:O.email||"",displayName:W.displayName||`${W.firstName||""} ${W.lastName||""}`.trim()||"Student",firstName:W.firstName,lastName:W.lastName,age:W.age,role:W.role,grade:W.grade,phone:W.phone,address:W.address,school:W.school,gender:W.gender,avatar:W.avatar,profileBackground:W.profileBackground,genderChanged:W.genderChanged,createdAt:W.createdAt?{seconds:W.createdAt.seconds}:null,totalXP:W.totalXP||0,quizzesCompleted:W.quizzesCompleted||0,isSubscriber:N,subscriptionExpiry:W.subscriptionExpiry?{seconds:W.subscriptionExpiry.seconds}:null};t(T),localStorage.setItem(J,JSON.stringify({data:T,timestamp:le}))}else t({uid:O.uid,email:O.email||"",displayName:"User",role:"student",createdAt:{seconds:Math.floor(Date.now()/1e3)},isSubscriber:!1})}catch(me){console.error("Error fetching user profile:",me)}}else E||t(null);l(!1),clearTimeout(v)});return()=>{R(),clearTimeout(v)}},[]),c?i.jsx(a7,{}):i.jsx(B5.Provider,{value:{user:e,loading:s,logout:x,setTeacherSession:g,updateUserProfile:w},children:s?i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),i.jsx(ot,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),i.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},Gs=()=>{const r=V.useContext(B5);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},hp=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],l7=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var ee;const[s,l]=V.useState(!1),[c,d]=V.useState(!1),{user:f}=Gs(),[g,x]=V.useState(!1),[w,v]=V.useState([]),[E,R]=V.useState(0),[O,J]=V.useState(!1),P=V.useRef(null),[le,se]=V.useState(!1),[te,me]=V.useState(""),[ce,W]=V.useState("teacher-yazan"),[N,T]=V.useState(!1),[A,C]=V.useState(!1);V.useEffect(()=>{const $=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",$),()=>window.removeEventListener("scroll",$)},[]),V.useEffect(()=>{const $=_e=>{P.current&&!P.current.contains(_e.target)&&x(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const k=async($=!1)=>{if(!f){v([]);return}const _e=`etqan_notifications_${f.uid}`,D=365*24*60*60*1e3,B=Date.now();if(!$){const L=localStorage.getItem(_e);if(L)try{const{data:Y,timestamp:fe}=JSON.parse(L);if(B-fe<D){z(Y);return}}catch(Y){console.error(Y)}}J(!0);try{const Y=zn(kt(Ue,"notifications"),Nc("createdAt","desc"),Ii(10)),Ee=(await ns(Y)).docs.map(Re=>({id:Re.id,...Re.data(),createdAt:Re.data().createdAt?{seconds:Re.data().createdAt.seconds}:null}));localStorage.setItem(_e,JSON.stringify({data:Ee,timestamp:B})),z(Ee)}catch(L){console.error("Error fetching notifications:",L)}finally{J(!1)}},z=$=>{const _e=[];let D=0,B=[];try{const Y=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`);B=Y?JSON.parse(Y):[]}catch(Y){console.error("Error parsing viewed notifications",Y)}let L=0;f!=null&&f.createdAt&&(f.createdAt.seconds?L=f.createdAt.seconds*1e3:f.createdAt instanceof Date?L=f.createdAt.getTime():typeof f.createdAt=="string"&&(L=new Date(f.createdAt).getTime())),$.forEach(Y=>{const fe=Y.createdAt?Y.createdAt.seconds?Y.createdAt.seconds*1e3:new Date(Y.createdAt).getTime():Date.now(),Ee=Y.recipientId===(f==null?void 0:f.uid),Re=Y.recipientId==="all",Xe=L===0||fe>=L;if(Ee||Re&&Xe){const Se=B.includes(Y.id),Ye=Y.read===!0,st=Se||Ye;st||D++,_e.push({...Y,read:st})}}),v(_e),R(D)};V.useEffect(()=>{k()},[f]);const I=async()=>{const $=!g;if(x($),$&&E>0){const _e=[...w],D=_e.filter(fe=>!fe.read),B=D.map(fe=>fe.id);if(B.length===0)return;try{const fe=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`),Ee=fe?JSON.parse(fe):[],Re=new Set([...Ee,...B]);localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(Array.from(Re)));const Xe=`etqan_notifications_${f==null?void 0:f.uid}`,Se=localStorage.getItem(Xe);if(Se){const Ye=JSON.parse(Se);localStorage.setItem(Xe,JSON.stringify(Ye))}}catch(fe){console.error("Error updating local storage for notifications",fe)}const L=_e.map(fe=>({...fe,read:!0}));v(L),R(0);const Y=D.filter(fe=>fe.recipientId!=="all");if(Y.length>0)try{const fe=V9(Ue);Y.forEach(Ee=>{const Re=Un(Ue,"notifications",Ee.id);fe.update(Re,{read:!0})}),await fe.commit()}catch(fe){console.error("Error batch updating notifications:",fe)}}},ge=async()=>{if(te.trim()){T(!0);try{const $=hp.find(_e=>_e.id===ce);await ir(kt(Ue,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:te,teacherId:ce,teacherName:$==null?void 0:$.name,createdAt:Ts(),read:!1}),await ir(kt(Ue,"notifications"),{recipientId:ce,title:`   ${(f==null?void 0:f.displayName)||""}`,message:te.substring(0,100)+(te.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:Ts(),read:!1}),alert("    !"),me(""),se(!1),C(!1)}catch($){console.error($),alert("   ")}finally{T(!1)}}},Ie=$=>{switch($){case"quiz":return i.jsx(Ln,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(Wn,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Ko,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(Cr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(rf,{className:"w-4 h-4 text-gray-400"})}},G=$=>{if(!$)return"";const _e=$.toDate?$.toDate():new Date($.seconds*1e3);return isNaN(_e.getTime())?"":_e.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},he=$=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:he(),children:[i.jsx(Yu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:he(),children:[i.jsx(Ln,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:he(),children:[i.jsx(Wn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:he(),children:[i.jsx(Qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:he(),children:[i.jsx(El,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:P,children:[i.jsxs("button",{onClick:I,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(rf,{className:`w-5 h-5 ${E>0?"animate-swing":""}`}),E>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:E>9?"+9":E})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(rf,{className:"w-4 h-4 text-emerald-400"}),""]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:$=>{$.stopPropagation(),k(!0)},className:"p-1.5 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white transition-colors",title:"",children:i.jsx(gd,{className:`w-3.5 h-3.5 ${O?"animate-spin text-emerald-500":""}`})}),f.role==="student"&&i.jsx("button",{onClick:()=>{x(!1),se(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-2 py-1 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30",children:i.jsx(Cr,{className:"w-3 h-3"})})]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:O&&w.length===0?i.jsx("div",{className:"p-8 text-center flex justify-center",children:i.jsx(ot,{className:"w-6 h-6 animate-spin text-emerald-500"})}):w.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(rf,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "}),i.jsx("button",{onClick:()=>k(!0),className:"mt-2 text-xs text-blue-400 underline",children:""})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:w.map($=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${$.read?"":"bg-emerald-900/10"}`,children:[!$.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:Ie($.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${$.read?"text-gray-400":"text-white"}`,children:$.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:$.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:G($.createdAt)})]})]})]},$.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(Ju,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(_p,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(Jn,{className:"w-6 h-6"}):i.jsx(rA,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(iS,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Yu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(pd,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Ln,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Wn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Qu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(El,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(U_,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(Ju,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(_p,{className:"w-5 h-5"}),"  "]})})]})})]}),le&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{se(!1),C(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{se(!1),C(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(Jn,{className:"w-5 h-5"})}),A?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Dr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(ee=hp.find($=>$.id===ce))==null?void 0:ee.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ge,disabled:N,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:N?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>C(!1),disabled:N,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Cr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:hp.map($=>i.jsxs("div",{onClick:()=>W($.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${ce===$.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${ce===$.id?"text-emerald-400":"text-gray-300"}`,children:$.name}),ce===$.id&&i.jsx(ya,{className:"w-4 h-4 text-emerald-500"})]},$.id))})]}),i.jsx("textarea",{value:te,onChange:$=>me($.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{te.trim()&&C(!0)},disabled:!te.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(pa,{className:"w-5 h-5"})," "]})]})]})]})]})},o7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),c7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),u7=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=Gs(),[l,c]=V.useState(!1),[d,f]=V.useState(!1),[g,x]=V.useState(!1),w=window.location.origin,v="   -   ",E=()=>{c(!0),setTimeout(()=>c(!1),3e3)},R=()=>{s?t("QUIZZES"):E()},O=()=>{s?t("LESSONS"):E()},J=()=>{t("LESSONS_EXPLANATIONS")},P=()=>{t("SERVICES")},le=()=>{t("CONTACT_TEACHER")},se=()=>{const N=`https://t.me/share/url?url=${encodeURIComponent(w)}&text=${encodeURIComponent(v)}`;window.open(N,"_blank"),f(!1)},te=()=>{const N=`https://wa.me/?text=${encodeURIComponent(v+" "+w)}`;window.open(N,"_blank"),f(!1)},me=()=>{const N=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(w)}`;window.open(N,"_blank"),f(!1)},ce=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:v,url:w}),f(!1)}catch(N){console.log("Error sharing",N)}else W()},W=()=>{navigator.clipboard.writeText(w),x(!0),setTimeout(()=>x(!1),2e3)};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(Rf,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(Jn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:R,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Ln,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:J,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Qu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:O,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Wn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:P,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(k_,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:""})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:le,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(El,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(Xn,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(_p,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(Ar,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})}),i.jsx("div",{className:"relative mt-2 flex justify-center z-50",children:i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-xs font-bold bg-white/5 px-4 py-2 rounded-full border border-white/10 hover:bg-white/10 hover:border-emerald-500/30 group",children:[i.jsx("div",{className:"p-1.5 bg-emerald-500/10 rounded-full group-hover:bg-emerald-500/20 transition-colors",children:i.jsx(Df,{className:"w-3.5 h-3.5 text-emerald-400 group-hover:text-emerald-300"})}),i.jsx("span",{children:"   "})]})}),d&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>f(!1),children:i.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 w-full max-w-sm flex flex-col gap-5 animate-fade-in-up relative",onClick:N=>N.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Df,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Jn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:te,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(o7,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:se,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(c7,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:me,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx($o,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:ce,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(z_,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(B_,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:w}),i.jsxs("button",{onClick:W,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${g?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[g?i.jsx(O_,{className:"w-3.5 h-3.5"}):i.jsx(P_,{className:"w-3.5 h-3.5"}),g?" ":" "]})]})]})})]})]})]})},fp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),mp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),d7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),cl=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],h7=({onNavigate:r})=>{const[e,t]=V.useState(0),[s,l]=V.useState(!0);V.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%cl.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(fp,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(d7,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(mp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(jl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(Np,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx($o,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(fp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(mp,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(Np,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx($o,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(fp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(mp,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(md,{className:"w-6 h-6"}),"  ",i.jsx(Cf,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("div",{className:"block md:hidden space-y-4",children:[f(cl[e]),f(cl[(e+1)%cl.length])]}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%cl.length;return i.jsx("div",{children:f(cl[x])},cl[x].id)})})]})]})]})})},w_=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,v&&i.jsx(ya,{className:"w-3 h-3"})]},w)})})]})},f7=({isOpen:r,onClose:e})=>{const[t,s]=V.useState("ROLE_SELECTION"),[l,c]=V.useState(!1),[d,f]=V.useState(null),[g,x]=V.useState(null),{setTeacherSession:w}=Gs(),[v,E]=V.useState(""),[R,O]=V.useState(""),[J,P]=V.useState(""),[le,se]=V.useState(""),[te,me]=V.useState(""),[ce,W]=V.useState(""),[N,T]=V.useState(""),[A,C]=V.useState(""),[k,z]=V.useState(""),[I,ge]=V.useState("male"),[Ie,G]=V.useState(""),[he,ee]=V.useState("");if(!r)return null;const $=()=>{s("ROLE_SELECTION"),f(null),x(null),E(""),O(""),P(""),se(""),me(""),W(""),T(""),C(""),z(""),ge("male"),ee(""),G(""),c(!1)},_e=()=>{$(),e()},D=st=>{st.preventDefault(),f(null),c(!0),setTimeout(()=>{v==="2001"?(w(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>_e(),1500)):v==="2003"?(w(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>_e(),1500)):(f("   "),c(!1))},800)},B=async st=>{st.preventDefault(),f(null),c(!0);try{await q6(Ku,R.trim(),J),x("   !"),setTimeout(()=>{_e(),window.location.reload()},1500)}catch(mt){console.error(mt),f("      "),c(!1)}},L=async st=>{st.preventDefault(),f(null),c(!0);try{const rt=(await B6(Ku,A.trim(),k)).user,Cn="",Is=N==="university"&&Ie?Ie:"";await Ey(Un(Ue,"users",rt.uid),{firstName:le,lastName:te,age:ce,grade:N,gender:I,school:Is,avatar:Cn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{_e(),window.location.reload()},1500)}catch(mt){console.error(mt),mt.code==="auth/email-already-in-use"?f("   "):mt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},Y=async st=>{st.preventDefault(),f(null),c(!0);try{await U6(Ku,he.trim()),x("   !")}catch(mt){console.error(mt),mt.code==="auth/user-not-found"?f("    "):mt.code==="auth/invalid-email"?f("    "):mt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},fe=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ee=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(Xn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Gg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(zr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Gg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Re=()=>i.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ha,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:v,onChange:st=>E(st.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),Xe=()=>i.jsxs("form",{onSubmit:B,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:R,onChange:st=>O(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Cr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:J,onChange:st=>P(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(ha,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Se=()=>{const st=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(rt=>({label:` ${rt}`,value:rt.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],mt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:L,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:le,onChange:rt=>se(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:te,onChange:rt=>me(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:ce,onChange:rt=>W(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(w_,{options:mt,value:I,onChange:rt=>ge(rt),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(w_,{options:st,value:N,onChange:rt=>T(rt),placeholder:"  / "})]}),N==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:Ie,onChange:rt=>G(rt.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:rt=>C(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:k,onChange:rt=>z(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Ye=()=>i.jsxs("form",{onSubmit:Y,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:he,onChange:st=>ee(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Cr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(Cf,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300",onClick:_e}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-gray-950/95 backdrop-blur-xl z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl border border-white/10 transition-all duration-500",children:[i.jsxs("div",{className:"relative mb-8",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-2xl rounded-full animate-pulse"}),i.jsxs("div",{className:"relative w-24 h-24",children:[i.jsx("div",{className:"absolute inset-0 border-t-4 border-emerald-500 border-solid rounded-full animate-spin"}),i.jsx("div",{className:"absolute inset-2 border-r-4 border-blue-500 border-solid rounded-full animate-spin-reverse"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(Xn,{className:"w-8 h-8 text-white/80"})})]})]}),i.jsx("h4",{className:"text-xl font-black text-white mb-2 tracking-tight animate-pulse",children:fe()}),i.jsxs("p",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:[i.jsx(ot,{className:"w-3 h-3 animate-spin"}),"    ..."]})]}),i.jsx("button",{onClick:_e,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(Jn,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Gg,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(ya,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(Rf,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):_e()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Ee(),t==="TEACHER_LOGIN"&&Re(),t==="STUDENT_LOGIN"&&Xe(),t==="STUDENT_SIGNUP"&&Se(),t==="FORGOT_PASSWORD"&&Ye(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(Rf,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},m7=()=>{const{user:r}=Gs(),[e,t]=V.useState(!1),[s,l]=V.useState(null),[c,d]=V.useState("MCQ"),[f,g]=V.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),[x,w]=V.useState([]),[v,E]=V.useState(null),[R,O]=V.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[J,P]=V.useState(""),[le,se]=V.useState(!1),[te,me]=V.useState([]),[ce,W]=V.useState(!1),[N,T]=V.useState(""),A=(L,Y)=>{O(fe=>({...fe,[L]:Y}))},C=(L,Y)=>{const fe=[...R.options];fe[L]=Y,O(Ee=>({...Ee,options:fe}))},k=()=>{if(!R.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&R.options.some(fe=>!fe.trim())){alert("   ");return}if(c==="READING"&&!R.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!J.trim()){alert("    ");return}let L=[];if(c==="TF")L=["",""];else if(c==="REORDER"){if(L=J.split(" ").filter(fe=>fe.trim().length>0),L.length<2){alert("       ");return}}else L=R.options;const Y={id:v||Date.now(),question:R.question,options:L,correctAnswer:R.correctAnswer,explanation:R.explanation||"",type:c};c==="READING"&&(Y.passageContent=R.passageContent,Y.generalInstruction=R.generalInstruction,Y.passageFontSize=R.passageFontSize),v?(w(x.map(fe=>fe.id===v?Y:fe)),E(null)):w([...x,Y]),z()},z=()=>{O({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),P(""),E(null),d("MCQ")},I=L=>{const Y=x.find(fe=>fe.id===L);Y&&(E(L),d(Y.type||"MCQ"),Y.type==="REORDER"?(P(Y.options.join(" ")),O({question:Y.question,options:["","","",""],correctAnswer:Y.correctAnswer,explanation:Y.explanation||"",passageContent:Y.passageContent||"",generalInstruction:Y.generalInstruction||"",passageFontSize:Y.passageFontSize||"md"})):(O({question:Y.question,options:Y.type==="TF"?["","","",""]:Y.options.length>=4?Y.options:[...Y.options,...Array(4-Y.options.length).fill("")],correctAnswer:Y.correctAnswer,explanation:Y.explanation||"",passageContent:Y.passageContent||"",generalInstruction:Y.generalInstruction||"",passageFontSize:Y.passageFontSize||"md"}),P("")),window.scrollTo({top:0,behavior:"smooth"}))},ge=()=>{z()},Ie=L=>{window.confirm("      ")&&(w(x.filter(Y=>Y.id!==L)),v===L&&z())},G=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const L={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null,isPremium:f.isPremium||!1};if(s){const Y=Un(Ue,"quizzes",s);await Md(Y,{...L,updatedAt:Ts()}),alert("    !")}else await ir(kt(Ue,"quizzes"),{...L,createdAt:Ts()}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),w([]),l(null),z()}catch(L){console.error("Error saving quiz:",L),alert("   ")}finally{t(!1)}},he=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),w([]),l(null),z())},ee=async()=>{W(!0);try{const L="etqan_teacher_import_list",fe=Date.now(),Ee=localStorage.getItem(L);if(Ee){const{data:Ye,timestamp:st}=JSON.parse(Ee);if(fe-st<3e5){me(Ye),W(!1);return}}const Re=zn(kt(Ue,"quizzes"),Nc("createdAt","desc"),Ii(50)),Se=(await ns(Re)).docs.map(Ye=>({id:Ye.id,...Ye.data()}));me(Se),localStorage.setItem(L,JSON.stringify({data:Se,timestamp:fe}))}catch(L){console.error(L)}W(!1)},$=()=>{ee(),se(!0)},_e=L=>{x.length>0&&!window.confirm("         .")||(l(L.id||null),g({title:L.title,subject:L.subject,grade:L.grade,category:L.category||"Language",description:L.description||"",duration:L.duration?L.duration.toString():"30",questionDuration:L.questionDuration?L.questionDuration.toString():"",isPremium:L.isPremium||!1}),w(L.questions),se(!1),z(),window.scrollTo({top:0,behavior:"smooth"}))},D=te.filter(L=>(L.title?L.title.toLowerCase().includes(N.toLowerCase()):!1)||(L.grade?L.grade.includes(N):!1)),B=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(dw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:$,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(vp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(Ln,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:he,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(Jn,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:L=>g({...f,title:L.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(hx,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:L=>g({...f,subject:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(zr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:L=>g({...f,grade:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(L=>i.jsxs("option",{value:L.toString(),children:[" ",L]},L))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ni,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx($_,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:L=>g({...f,category:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ni,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(ux,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:L=>g({...f,duration:L.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(UA,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:L=>g({...f,questionDuration:L.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]}),i.jsx("div",{className:"col-span-2",children:i.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-2xl bg-amber-900/10 border border-amber-500/20 cursor-pointer hover:bg-amber-900/20 transition-colors",children:[i.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${f.isPremium?"bg-amber-500":"bg-gray-600"}`,children:i.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${f.isPremium?"right-1":"right-7"}`})}),i.jsx("input",{type:"checkbox",className:"hidden",checked:f.isPremium,onChange:L=>g({...f,isPremium:L.target.checked})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Or,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),i.jsx("span",{className:"font-bold text-white",children:"  (Premium)"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]})]})})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:L=>g({...f,description:L.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(uw,{className:"w-5 h-5 text-blue-400"})}),v?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(Wn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(q_,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(LA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:R.generalInstruction,onChange:L=>A("generalInstruction",L.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:R.passageContent,onChange:L=>A("passageContent",L.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(KA,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:B.map(L=>i.jsx("button",{onClick:()=>A("passageFontSize",L.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${R.passageFontSize===L.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:L.label},L.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(Dr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:R.question,onChange:L=>A("question",L.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.options.map((L,Y)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${R.correctAnswer===Y?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${R.correctAnswer===Y?"text-blue-400":"text-gray-400"}`,children:[" ",Y+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",Y),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${R.correctAnswer===Y?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:R.correctAnswer===Y?" ":" "})]}),i.jsx("input",{type:"text",value:L,onChange:fe=>C(Y,fe.target.value),placeholder:`  ${Y+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${Y===R.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},Y))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:J,onChange:L=>P(L.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),J&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:J.split(" ").filter(L=>L.trim()).map((L,Y)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:L},Y))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${R.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[R.correctAnswer===0&&i.jsx(pn,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${R.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[R.correctAnswer===1&&i.jsx(pn,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:R.explanation,onChange:L=>A("explanation",L.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),i.jsxs("div",{className:"flex gap-3",children:[v&&i.jsxs("button",{onClick:ge,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(H_,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:k,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${v?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:v?i.jsxs(i.Fragment,{children:[i.jsx(pi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(uw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(pi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:G,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):s?i.jsx(gd,{className:"w-5 h-5"}):i.jsx(pn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(dw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((L,Y)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${v===L.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:Y+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:L.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:L.type==="REORDER"?"":L.options.length===2?"/":L.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>I(L.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(jp,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>Ie(L.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(ba,{className:"w-3.5 h-3.5"}),""]})]}),L.explanation&&i.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",L.explanation]})]},L.id))})]})]})})]})}),le&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(vp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>se(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Jn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(hs,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:N,onChange:L=>T(L.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:ce?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(ot,{className:"w-8 h-8 animate-spin text-emerald-600"})}):D.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(L=>i.jsxs("div",{onClick:()=>_e(L),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:L.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:L.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:L.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(Dr,{className:"w-3 h-3"}),L.questions.length," "]})]},L.id))})})]})})]})},Au=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:dx},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Ln},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:hs},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:md},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:xd},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Or}],g7=[{id:"first_step",title:" ",desc:"   ",icon:dx,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:jl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:Ln,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:xd,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:bl,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:hs,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:hm,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:mx,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:F_,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:Or,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],p7=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],gp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],__=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,v&&i.jsx(ya,{className:"w-3 h-3"})]},w)})})]})},x7=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=Gs(),[s,l]=V.useState(!1),[c,d]=V.useState(null),[f,g]=V.useState(!1),[x,w]=V.useState(!1),[v,E]=V.useState(null),[R,O]=V.useState((e==null?void 0:e.avatar)||""),[J,P]=V.useState((e==null?void 0:e.profileBackground)||gp[0].url),[le,se]=V.useState([]),[te,me]=V.useState(!0),[ce,W]=V.useState(0),[N,T]=V.useState(1),[A,C]=V.useState(Au[0]),[k,z]=V.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,ge]=V.useState([]),[Ie,G]=V.useState(""),[he,ee]=V.useState(!1),[$,_e]=V.useState("50"),[D,B]=V.useState(null),[L,Y]=V.useState(!1),[fe,Ee]=V.useState(""),[Re,Xe]=V.useState(!1),[Se,Ye]=V.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});V.useEffect(()=>{e&&(Ye(ue=>({...ue,firstName:e.firstName||ue.firstName,lastName:e.lastName||ue.lastName,gender:e.gender||ue.gender,grade:e.grade||ue.grade,school:e.school||ue.school})),e.avatar&&O(e.avatar),e.profileBackground&&P(e.profileBackground))},[e]),V.useEffect(()=>{(async()=>{if(!e)return;const ct=`etqan_quiz_history_${e.uid}`,Fe="etqan_all_students_teacher",ut=365*24*60*60*1e3;if(e.role==="teacher"){me(!1),ee(!0);const Ht=localStorage.getItem(Fe),Kn=Date.now();if(Ht)try{const{data:Gt,timestamp:$t}=JSON.parse(Ht);if(Kn-$t<ut){ge(Gt),ee(!1);return}}catch(Gt){console.error(Gt)}try{const Gt=zn(kt(Ue,"users"),vn("role","==","student")),Rn=(await ns(Gt)).docs.map(pt=>({id:pt.id,...pt.data()}));ge(Rn),localStorage.setItem(Fe,JSON.stringify({data:Rn,timestamp:Kn}))}catch(Gt){console.error("Error fetching students:",Gt)}finally{ee(!1)}return}const ln=localStorage.getItem(ct),St=Date.now();if(ln)try{const{history:Ht,totalXP:Kn,rankLevel:Gt,stats:$t,timestamp:Rn}=JSON.parse(ln);if(St-Rn<ut){se(Ht),W(Kn),T(Gt),C(Au.find(pt=>Gt>=pt.minLevel)||Au[0]),z($t),me(!1);return}}catch(Ht){console.error(Ht)}try{const Ht=zn(kt(Ue,"quiz_results"),vn("userId","==",e.uid)),Kn=await ns(Ht),Gt=[];let $t=0,Rn=!1,pt=0;Kn.forEach(oe=>{const Ne=oe.data();Gt.push({id:oe.id,...oe.data(),createdAt:oe.data().createdAt?{seconds:oe.data().createdAt.seconds}:null});let be=10+Ne.percentage*2;Ne.passed&&(be+=50),Ne.percentage===100&&(be+=100,Rn=!0,pt++),$t+=Math.round(be)}),Gt.sort((oe,Ne)=>{const be=oe.createdAt?oe.createdAt.seconds:0;return(Ne.createdAt?Ne.createdAt.seconds:0)-be});const yn=Gt.slice(0,10);let on=$t;try{const oe=Un(Ue,"users",e.uid),Ne=await Ny(oe);Ne.exists()&&Ne.data().totalXP!==void 0?on=Ne.data().totalXP:e.totalXP!==void 0&&(on=e.totalXP)}catch{e.totalXP!==void 0&&(on=e.totalXP)}se(yn),W(on);const jn=Math.floor(on/500)+1;T(jn);const Pi=[...Au].reverse().find(oe=>jn>=oe.minLevel)||Au[0];C(Pi);const Kr={quizzesCompleted:Gt.length,hasPerfectScore:Rn,level:jn,totalXP:on,perfectScoresCount:pt};z(Kr),localStorage.setItem(ct,JSON.stringify({history:yn,totalXP:on,rankLevel:jn,stats:Kr,timestamp:St}))}catch(Ht){console.error(Ht)}finally{me(!1)}})()},[e]);const st=async ue=>{ue.preventDefault(),l(!0),d(null);try{let ct={...Se};Se.grade==="university"&&Se.universityName&&(ct.school=Se.universityName),delete ct.universityName,await t(ct),d("   !"),setTimeout(()=>d(null),3e3)}catch(ct){console.error(ct),alert("   ")}finally{l(!1)}},mt=async()=>{l(!0);try{await t({avatar:R}),g(!1)}catch(ue){console.error(ue)}finally{l(!1)}},rt=async()=>{l(!0);try{await t({profileBackground:J}),w(!1)}catch(ue){console.error(ue)}finally{l(!1)}},Cn=async(ue,ct)=>{if(!ue)return;const Fe=parseInt($);if(isNaN(Fe)||Fe<=0){alert("    ");return}if(window.confirm(`     ${Fe} XP  ${ct}`)){l(!0),B(null);try{const ut=Un(Ue,"users",ue);await Md(ut,{totalXP:ix(Fe)});const ln=I.map(Ht=>Ht.id===ue?{...Ht,totalXP:(Ht.totalXP||0)+Fe}:Ht);ge(ln),localStorage.setItem("etqan_all_students_teacher",JSON.stringify({data:ln,timestamp:Date.now()})),B(`  ${Fe} XP  ${ct} !`),setTimeout(()=>B(null),3e3)}catch(ut){console.error(ut),alert("    ")}finally{l(!1)}}},Is=async()=>{if(!fe.trim()){alert("   ");return}Xe(!0);try{await ir(kt(Ue,"announcements"),{title:fe,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:Ts()}),await ir(kt(Ue,"notifications"),{recipientId:"all",title:"  ",message:fe,type:"info",createdAt:Ts(),read:!1}),alert("   "),Ee(""),Y(!1)}catch(ue){console.error(ue),alert("   ")}finally{Xe(!1)}},fs=I.filter(ue=>{const ct=(ue.displayName||"").toLowerCase(),Fe=(ue.email||"").toLowerCase(),ut=Ie.toLowerCase();return ct.includes(ut)||Fe.includes(ut)}),or=ue=>ue?ue.startsWith("http")?{backgroundImage:`url(${ue})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${gp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Hr=ue=>!ue||ue.startsWith("http")?"bg-no-repeat bg-center":ue,Vt=ue=>ue<=3?"border-gray-800":ue<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":ue<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":ue<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":ue<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":ue<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":ue<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":ue<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":ue<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":ue<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",gt=ue=>ue<=3?"text-gray-400":ue<=6?"text-emerald-400 font-bold":ue<=9?"text-blue-400 font-bold":ue<=12?"text-cyan-400 font-black":ue<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":ue<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":ue<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",Wt=le.slice(0,10).map(ue=>ue.percentage),Mi=Wt.length>0?Math.max(...Wt):0,Gr=Wt.length>0?Math.min(...Wt):0,Zt=Wt.length>0?Math.round(Wt.reduce((ue,ct)=>ue+ct,0)/Wt.length):0,$s=le.length,cr=(N-1)*500,$r=Math.min(100,Math.max(0,(ce-cr)/500*100)),En="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Vi=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ue=>({label:` ${ue}`,value:ue.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Aa=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Xn,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(pn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(Cr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(zr,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(jS,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(Xu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(V_,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Ko,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>Y(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(hw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(dm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(pa,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("SUBSCRIPTION_MANAGEMENT"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-amber-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-amber-900/20 text-amber-400 flex items-center justify-center group-hover:bg-amber-600 group-hover:text-white transition-colors",children:i.jsx(L_,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(bl,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),D&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(pn,{className:"w-4 h-4"})," ",D]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(hs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:Ie,onChange:ue=>G(ue.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:he?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(ot,{className:"w-8 h-8 animate-spin text-blue-500"})}):Ie===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):fs.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):fs.map(ue=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ue.avatar?i.jsx("img",{src:ue.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Xn,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:ue.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(kf,{className:"w-3 h-3"})," ",ue.totalXP||0]}),i.jsxs("span",{children:[" ",ue.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:$,onChange:ct=>_e(ct.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>Cn(ue.id,ue.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(pa,{className:"w-4 h-4"})})]})]},ue.id))})]})]}),L&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(hw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(Jn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:fe,onChange:ue=>Ee(ue.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:Is,disabled:Re,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Re?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Xn,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Jn,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:p7.map((ue,ct)=>{const Fe=N<ue.minLevel;return i.jsxs("button",{onClick:()=>!Fe&&O(ue.url),disabled:Fe,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${R===ue.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Fe?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:ue.url,alt:`Avatar ${ct}`,className:"w-full h-full object-cover"}),Fe&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(ha,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ue.minLevel]})]}),!Fe&&R===ue.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(pn,{className:"w-3 h-3"})})]},ct)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:mt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(fw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Jn,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:gp.map((ue,ct)=>{const Fe=N<ue.minLevel,ut=J===ue.url;return i.jsxs("button",{onClick:()=>!Fe&&P(ue.url),disabled:Fe,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${ut?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Fe?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ue.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Fe?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(ha,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ue.minLevel]})]}):ut&&i.jsx(pn,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ue.name})})]},ct)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:rt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Hr(e==null?void 0:e.profileBackground)}`,style:or(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(fw,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Vt(N)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Xn,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(fA,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-gray-700/50 hover:bg-gray-800 transition-colors group cursor-copy",title:" ",onClick:()=>{navigator.clipboard.writeText((e==null?void 0:e.uid)||""),alert("  ")},children:[i.jsx(CS,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-emerald-400 transition-colors"}),i.jsxs("span",{className:"text-[10px] font-mono text-gray-500 group-hover:text-gray-300 transition-colors tracking-wider",children:["ID: ",e==null?void 0:e.uid.substring(0,8).toUpperCase(),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${gt(N)}`,children:[i.jsx(bl,{className:"w-3 h-3"}),"  ",N]})]})]}),i.jsxs("form",{onSubmit:st,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Xn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Se.firstName,onChange:ue=>Ye({...Se,firstName:ue.target.value}),className:En})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Se.lastName,onChange:ue=>Ye({...Se,lastName:ue.target.value}),className:En})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(__,{options:Aa,value:Se.gender,onChange:ue=>!(e!=null&&e.genderChanged)&&Ye({...Se,gender:ue}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(ha,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Se.phone,onChange:ue=>Ye({...Se,phone:ue.target.value}),className:En})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Se.address,onChange:ue=>Ye({...Se,address:ue.target.value}),className:En})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(zr,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Se.school,onChange:ue=>Ye({...Se,school:ue.target.value}),className:En})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(__,{options:Vi,value:Se.grade,onChange:ue=>Ye({...Se,grade:ue}),placeholder:" "})]}),Se.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:Se.universityName||Se.school,onChange:ue=>Ye({...Se,universityName:ue.target.value}),placeholder:"   ...",className:`${En} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(pn,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-3xl md:rounded-[2.5rem] shadow-2xl p-3 md:p-6 text-white relative overflow-hidden border-2 md:border-4 border-gray-800 ring-2 md:ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-2 md:mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-2 md:p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg md:text-3xl font-black tracking-tight",children:[" ",N]}),i.jsxs("p",{className:"text-indigo-100 text-xs md:text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-2 md:px-3 py-1 rounded-full w-fit",children:[i.jsx(kf,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-orange-400 fill-orange-400"})," ",ce,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-6 md:mb-8",children:[i.jsxs("div",{className:"flex justify-between text-[10px] md:text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",N+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3 md:h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${$r}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 md:p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-xs md:text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(Or,{className:"w-3 h-3 md:w-4 md:h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-base md:text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-[10px] md:text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(Ep,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:g7.map((ue,ct)=>{const Fe=ue.condition(k);return i.jsxs("button",{onClick:()=>E({badge:ue,isUnlocked:Fe}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Fe?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Fe?ue.bg:"bg-gray-700"}`,children:i.jsx(ue.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Fe?ue.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:ue.title}),!Fe&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ha,{className:"w-2.5 h-2.5 text-gray-500"})})]},ct)})}),v&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>E(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(Jn,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${v.isUnlocked?v.badge.bg:"bg-gray-700"}`,children:i.jsx(v.badge.icon,{className:`w-6 h-6 ${v.isUnlocked?v.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:v.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${v.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:v.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:v.badge.desc})]}),!v.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(ha,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),v.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(pn,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(FA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),te?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(ot,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Zt>=90?"text-emerald-400":"text-blue-400"}`,children:[Zt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(bl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[Mi,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(D_,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[Gr,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(NS,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:$s})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(pA,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Zt,"%"]})]})]})]})]})]})]})]})]})},y7=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],pp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,v&&i.jsx(ya,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},b7=({onBack:r})=>{const{user:e}=Gs(),[t,s]=V.useState("SELECTION"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState("All"),[w,v]=V.useState([]),[E,R]=V.useState(!1),[O,J]=V.useState(null),[P,le]=V.useState(0),[se,te]=V.useState({}),[me,ce]=V.useState(1800),[W,N]=V.useState(null),[T,A]=V.useState(!1),[C,k]=V.useState(0),[z,I]=V.useState({}),[ge,Ie]=V.useState(!1),[G,he]=V.useState(null),[ee,$]=V.useState(!1),[_e,D]=V.useState(!1),[B,L]=V.useState(!1),[Y,fe]=V.useState(0),[Ee,Re]=V.useState(!1),[Xe,Se]=V.useState(!1),[Ye,st]=V.useState(null),[mt,rt]=V.useState(0),[Cn,Is]=V.useState(""),[fs,or]=V.useState(!1),[Hr,Vt]=V.useState(!1),[gt,Wt]=V.useState(null),[,Mi]=V.useState(0);V.useEffect(()=>{const oe=setInterval(()=>Mi(Ne=>Ne+1),5e3);return()=>clearInterval(oe)},[]);const Gr=()=>{if(!(e!=null&&e.isSubscriber)||!e.subscriptionExpiry)return!1;const oe=e.subscriptionExpiry.seconds?e.subscriptionExpiry.seconds*1e3:new Date(e.subscriptionExpiry).getTime();return Date.now()<oe};V.useEffect(()=>{window.scrollTo(0,0)},[t]),V.useEffect(()=>{if(e&&t==="SELECTION"){const oe=`quiz_session_${e.uid}`,Ne=localStorage.getItem(oe);if(Ne)try{const be=JSON.parse(Ne);Date.now()-be.timestamp<7200*1e3?Wt(be):localStorage.removeItem(oe)}catch{localStorage.removeItem(oe)}}},[e,t]),V.useEffect(()=>{if(t==="ACTIVE"&&O&&e){const oe={quiz:O,answers:se,index:P,timeLeft:me,reorderShuffles:z,timestamp:Date.now()};localStorage.setItem(`quiz_session_${e.uid}`,JSON.stringify(oe))}},[O,se,P,me,e,t,z]),V.useEffect(()=>{d?Zt():v([])},[d]),V.useEffect(()=>{let oe;return t==="ACTIVE"&&me>0&&(oe=setInterval(()=>{ce(Ne=>Ne<=1?(Fe(),0):Ne-1)},1e3)),()=>clearInterval(oe)},[t,me]),V.useEffect(()=>{let oe;return t==="ACTIVE"&&(O!=null&&O.questionDuration)&&W!==null&&(W>0?oe=setInterval(()=>{N(Ne=>Ne!==null&&Ne>0?Ne-1:0)},1e3):W===0&&ct()),()=>clearInterval(oe)},[t,O,W]),V.useEffect(()=>{O!=null&&O.questionDuration?N(O.questionDuration):N(null)},[P,O]),V.useEffect(()=>{if(t!=="ACTIVE")return;const oe=()=>{fe(Ve=>{const Be=Ve+1;return Be===1?D(!0):Be>=2&&(D(!1),L(!0)),Be})},Ne=()=>{document.hidden&&oe()},be=Ve=>{(Ve.key==="PrintScreen"||Ve.ctrlKey&&Ve.key==="p"||Ve.metaKey&&Ve.shiftKey)&&(Ve.preventDefault(),oe())},Ae=Ve=>Ve.preventDefault();return document.addEventListener("visibilitychange",Ne),document.addEventListener("keydown",be),document.addEventListener("contextmenu",Ae),document.addEventListener("copy",Ae),document.addEventListener("paste",Ae),document.addEventListener("cut",Ae),document.addEventListener("selectstart",Ae),()=>{document.removeEventListener("visibilitychange",Ne),document.removeEventListener("keydown",be),document.removeEventListener("contextmenu",Ae),document.removeEventListener("copy",Ae),document.removeEventListener("paste",Ae),document.removeEventListener("cut",Ae),document.removeEventListener("selectstart",Ae)}},[t]);const Zt=async()=>{R(!0);const oe=`etqan_quizzes_${d}`,Ne=365*24*60*60*1e3,be=localStorage.getItem(oe);if(be)try{const{data:Ae,timestamp:Ve}=JSON.parse(be);if(Date.now()-Ve<Ne){v(Ae),R(!1);return}}catch(Ae){console.error("Cache error",Ae)}try{const Ae=zn(kt(Ue,"quizzes"),vn("grade","==",d));let Ve;try{Ve=await T9(Ae),Ve.empty&&(Ve=await S9(Ae))}catch{Ve=await ns(Ae)}const Be=[];Ve.forEach(He=>{Be.push({id:He.id,...He.data()})}),v(Be),localStorage.setItem(oe,JSON.stringify({data:Be,timestamp:Date.now()}))}catch(Ae){console.error("Error fetching quizzes:",Ae)}finally{R(!1)}},$s=Array.from(new Set(w.map(oe=>oe.subject))),cr=w.filter(oe=>{const Ne=l?oe.subject===l:!0,be=g&&g!=="All"?oe.category===g:!0;return Ne&&be}),$r=oe=>{const Ne=Gr();if(oe.isPremium&&!Ne){Re(!0);return}he(oe),Ie(!0)},En=oe=>{if(!oe.questions||oe.questions.length===0){alert("      ");return}e&&localStorage.removeItem(`quiz_session_${e.uid}`),Wt(null);const be=[...oe.questions].sort(()=>Math.random()-.5).map(He=>{if(He.type==="MCQ"||He.type==="TF"){const dt=He.options.map((Kt,Qt)=>({opt:Kt,originalIndex:Qt}));dt.sort(()=>Math.random()-.5);const lt=dt.map(Kt=>Kt.opt),xt=dt.findIndex(Kt=>Kt.originalIndex===He.correctAnswer);return{...He,options:lt,correctAnswer:xt}}return He}),Ae={...oe,questions:be},Ve={};be.forEach((He,dt)=>{if(He.type==="REORDER"){const lt=He.options.map((xt,Kt)=>Kt);for(let xt=lt.length-1;xt>0;xt--){const Kt=Math.floor(Math.random()*(xt+1));[lt[xt],lt[Kt]]=[lt[Kt],lt[xt]]}Ve[dt]=lt}}),I(Ve),J(Ae),le(0),te({});const Be=oe.duration?oe.duration*60:1800;ce(Be),k(0),fe(0),L(!1),rt(0),Is(""),Vt(!1),Ie(!1),he(null),s("ACTIVE")},Vi=()=>{gt&&(J(gt.quiz),te(gt.answers),le(gt.index),ce(gt.timeLeft),gt.reorderShuffles&&I(gt.reorderShuffles),s("ACTIVE"),Wt(null))},Aa=()=>{G&&En(G)},ue=oe=>{te(Ne=>({...Ne,[P]:oe}))},ct=()=>{O&&(N(null),P<O.questions.length-1?le(oe=>oe+1):Fe())},Fe=async()=>{if(e&&localStorage.removeItem(`quiz_session_${e.uid}`),!O||!e){s("RESULT");return}A(!0);const oe=St(),Ne=Math.round(oe/O.questions.length*100);let be=0;be=oe*30,k(be);try{await ir(kt(Ue,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:O.id||"unknown",quizTitle:O.title,subject:O.subject,score:oe,totalQuestions:O.questions.length,percentage:Ne,passed:Ne>=50,earnedXP:be,createdAt:Ts()});const Ae=Un(Ue,"users",e.uid);await Ey(Ae,{totalXP:ix(be),quizzesCompleted:ix(1),lastQuizDate:Ts(),role:"student",email:e.email,displayName:e.displayName},{merge:!0});const Ve=`etqan_user_profile_${e.uid}`,Be=localStorage.getItem(Ve);if(Be){const{data:He,timestamp:dt}=JSON.parse(Be),lt={...He,totalXP:(He.totalXP||0)+be,quizzesCompleted:(He.quizzesCompleted||0)+1};localStorage.setItem(Ve,JSON.stringify({data:lt,timestamp:dt}))}localStorage.removeItem(`etqan_quiz_history_${e.uid}`)}catch(Ae){console.error("Error saving quiz result:",Ae)}finally{A(!1),s("RESULT")}},ut=async()=>{if(mt!==0&&!(!O||!e)){or(!0);try{await ir(kt(Ue,"reviews"),{type:"quiz",targetId:O.id,targetTitle:O.title,teacherId:O.createdBy||"teacher",teacherName:O.teacherName||"",rating:mt,comment:Cn,studentId:e.uid,studentName:e.displayName,createdAt:Ts()}),Vt(!0)}catch(oe){console.error("Error saving review:",oe),alert("    ")}finally{or(!1)}}},ln=oe=>{const Ne=Math.floor(oe/60),be=oe%60;return`${Ne}:${be<10?"0":""}${be}`},St=()=>{if(!O)return 0;let oe=0;return O.questions.forEach((Ne,be)=>{if(Ne.type==="REORDER"){const Ae=se[be];if(Ae&&Ae.length===Ne.options.length){let Ve=!0;for(let Be=0;Be<Ne.options.length;Be++)if(Ae[Be]!==Be){Ve=!1;break}Ve&&oe++}}else se[be]===Ne.correctAnswer&&oe++}),oe},Ht=()=>{$(!0)},Kn=()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),$(!1),s("SELECTION")},Gt=()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),L(!1),s("SELECTION")},$t=oe=>{st(oe),Se(!0)},Rn=()=>{if(Se(!1),Ye==="REVIEW")s("REVIEW");else if(Ye==="RETAKE"){const oe=w.find(Ne=>Ne.id===(O==null?void 0:O.id));oe?En(oe):s("SELECTION")}else Ye==="LIST"?s("SELECTION"):Ye==="HOME"&&r();st(null)},pt=(oe,Ne)=>{const be=se[P]||[];ue(Ne?[...be,oe]:be.filter(Ae=>Ae!==oe))},yn=({title:oe,message:Ne,onConfirm:be,onCancel:Ae,icon:Ve=Dr,confirmText:Be="",cancelText:He="",confirmColor:dt="emerald",isStatic:lt=!1})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:He?Ae:void 0}),i.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-white/10 shadow-2xl shadow-black/50 ${lt?"":"animate-fade-in-up"}`,children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${dt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Ve,{className:`w-10 h-10 ${dt==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:oe}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Ne}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:be,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all shadow-lg ${dt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"} ${lt?"":"transform hover:scale-105 active:scale-95"} ${He?"":"max-w-[200px]"}`,children:Be}),He&&i.jsx("button",{onClick:Ae,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:He})]})]})]}),on=()=>{const oe=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(be=>({label:` ${be}`,value:be.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],Ne=[{label:"  ",value:""},...$s.map(be=>({label:String(be),value:String(be)}))];return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),gt&&i.jsxs("div",{className:"mb-8 p-4 rounded-3xl bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-purple-500/30 flex flex-col sm:flex-row items-center justify-between gap-4 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-purple-500/20 p-3 rounded-full border border-purple-500/30",children:i.jsx(M_,{className:"w-6 h-6 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),i.jsxs("p",{className:"text-gray-400 text-sm",children:['    "',gt.quiz.title,'"']})]})]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:Vi,className:"flex-1 sm:flex-none bg-purple-600 hover:bg-purple-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-purple-900/30",children:" "}),i.jsx("button",{onClick:()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),Wt(null)},className:"px-4 py-2.5 rounded-xl bg-gray-800 text-gray-400 hover:text-white font-bold transition-colors",children:""})]})]}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(zr,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(pp,{options:oe,value:d,onChange:be=>{f(be),c(""),x("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(Ln,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(pp,{options:Ne,value:l,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx($_,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(pp,{options:y7.map(be=>({label:be.label,value:be.id})),value:g,onChange:x,placeholder:"  "})]})}),d&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx($S,{className:"w-5 h-5"})," "]}),E?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(ot,{className:"w-8 h-8 animate-spin text-emerald-400"})}):w.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(hs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):cr.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(hs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:cr.map(be=>{const Ae=Gr(),Ve=be.isPremium&&!Ae,Be=Ve?"border-amber-500/50":be.isPremium?"border-amber-500":"border-gray-700",He=be.isPremium&&!Ve?"shadow-amber-500/20 shadow-lg":"shadow-sm";return i.jsxs("div",{className:`bg-gray-900 rounded-2xl ${He} border ${Be} p-5 hover:shadow-md transition-all group relative overflow-hidden`,children:[be.isPremium&&i.jsxs("div",{className:"absolute top-0 left-0 bg-gradient-to-br from-amber-400 to-orange-500 text-white text-[10px] font-bold px-3 py-1 rounded-br-xl shadow-md z-10 flex items-center gap-1",children:[i.jsx(Or,{className:"w-3 h-3 fill-white"}),"PREMIUM"]}),i.jsxs("div",{className:"flex justify-between items-start mb-3 mt-4",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:be.subject}),be.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:be.category==="General"?"General Quiz":be.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[be.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:be.duration?`${be.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:be.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(fx,{className:"w-3 h-3"}),i.jsx("span",{children:be.grade==="English Major - QOU"?"  ":` ${be.grade}`})]}),i.jsx("button",{onClick:()=>$r(be),className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all border ${Ve?"bg-gray-800 text-gray-500 border-gray-700 cursor-not-allowed":be.isPremium?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 border-amber-600 shadow-md":"bg-emerald-900/30 text-emerald-400 border-emerald-800 group-hover:bg-emerald-600 group-hover:text-white"}`,children:Ve?i.jsxs(i.Fragment,{children:[i.jsx(ha,{className:"w-4 h-4"})," "]}):i.jsxs(i.Fragment,{children:[" ",i.jsx(Cf,{className:"w-4 h-4"})]})})]},be.id)})})]}),ge&&i.jsx(yn,{title:"  ",message:`   ${G==null?void 0:G.title} `,onConfirm:Aa,onCancel:()=>Ie(!1),confirmText:" ",cancelText:"",icon:Dr}),Ee&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>Re(!1)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-amber-500/30 shadow-2xl shadow-amber-900/20 animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 bg-amber-500/20",children:i.jsx(Or,{className:"w-10 h-10 text-amber-500 fill-amber-500"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:"       .        ."}),i.jsx("button",{onClick:()=>Re(!1),className:"w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg bg-gray-800 hover:bg-gray-700 border border-gray-700",children:""})]})]})]})},jn=()=>{if(!O||!O.questions||!O.questions[P])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const oe=O.questions[P],Ne=oe.type==="REORDER";let be=!1;if(Ne){const lt=se[P];be=lt!==void 0&&lt.length===oe.options.length}else be=se[P]!==void 0;const Ae=P===O.questions.length-1,Ve=O.subject.toLowerCase().includes("english")||O.subject.includes("")||O.subject.includes(""),Be=Ve?"ltr":"rtl",He=Ve?"text-left":"text-right",dt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[oe.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:lt=>lt.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),B&&i.jsx(yn,{title:"   ",message:"      .   .",onConfirm:Gt,cancelText:null,confirmText:"",icon:AA,confirmColor:"red",isStatic:!0}),_e&&!B&&i.jsx(yn,{title:" !",message:"     .   .",onConfirm:()=>D(!1),cancelText:null,confirmText:"",icon:gx,confirmColor:"red",isStatic:!0}),ee&&i.jsx(yn,{title:" ",message:"       .",onConfirm:Kn,onCancel:()=>$(!1),confirmText:" ",cancelText:"",icon:Ju,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:Ht,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(Ju,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${me<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(ux,{className:"w-4 h-4"}),ln(me)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[P+1," / ",O.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(P+1)/O.questions.length*100}%`}})})]}),W!==null&&O.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${W<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${W/O.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",W," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Be,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:O.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Ne?i.jsx(q_,{className:"w-4 h-4 text-emerald-500"}):i.jsx(ha,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[oe.passageContent&&i.jsxs("div",{className:"mb-8",children:[oe.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${He}`,children:oe.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${He}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${dt}`,children:oe.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${He}`,children:oe.question}),Ne?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(se[P]||[]).map((lt,xt)=>i.jsx("button",{onClick:()=>pt(lt,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:oe.options[lt]},`ans-${xt}`)),(!se[P]||se[P].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(z[P]||[]).filter(lt=>!(se[P]||[]).includes(lt)).map((lt,xt)=>i.jsx("button",{onClick:()=>pt(lt,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:oe.options[lt]},`bank-${xt}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>ue([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(H_,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:oe.options.map((lt,xt)=>i.jsxs("button",{onClick:()=>ue(xt),className:`w-full ${He} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 outline-none ${se[P]===xt?"border-emerald-500 bg-emerald-900/30 shadow-md outline-none":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${se[P]===xt?"text-emerald-300":"text-gray-300"}`,children:lt}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${se[P]===xt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:se[P]===xt&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},xt))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:ct,disabled:!be||T,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!be||T?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:T?i.jsxs(i.Fragment,{children:["  ",i.jsx(ot,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[Ae?" ":" ",Be==="rtl"?i.jsx(Cf,{className:"w-5 h-5"}):i.jsx(Ot,{className:"w-5 h-5"})]})})})]})]})},Pi=()=>{if(!O)return null;const oe=St(),Ne=O.questions.length,be=Math.round(oe/Ne*100);let Ae="text-red-500",Ve=oS,Be=" ";be>=90?(Ae="text-emerald-500",Ve=Or,Be="!"):be>=75?(Ae="text-blue-500",Ve=md,Be="!"):be>=50&&(Ae="text-yellow-500",Ve=ya,Be=" ");const He=Ve;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2.5rem] border border-gray-800 p-8 relative overflow-hidden text-center shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx(He,{className:`w-16 h-16 ${Ae} mb-3 drop-shadow-md`}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:Be}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-3",children:O.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-3 py-1 rounded-full border border-gray-700",children:[i.jsx(kf,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",C," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 text-center mb-6 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-2",children:" "}),i.jsxs("span",{className:`text-6xl font-black ${Ae}`,children:[be,"%"]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/50 flex items-center justify-center gap-2 text-gray-400 text-sm font-bold",children:[i.jsx("span",{children:"  :"}),i.jsxs("span",{className:`text-white bg-gray-700 px-3 py-1 rounded-lg ${Ae}`,children:[oe," / ",Ne]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>$t("REVIEW"),className:"w-full py-3.5 bg-orange-500 text-white font-black text-sm rounded-xl hover:bg-orange-600 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-lg shadow-orange-900/20",children:[i.jsx(wp,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>$t("HOME"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(Yu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>$t("RETAKE"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(gd,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:Hr?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(ya,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(dm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(dt=>i.jsx("button",{onClick:()=>rt(dt),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${mt===dt?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:dt},dt))}),i.jsx("textarea",{value:Cn,onChange:dt=>Is(dt.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:ut,disabled:fs||mt===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${mt===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[fs?i.jsx(ot,{className:"w-3 h-3 animate-spin"}):i.jsx(pa,{className:"w-3 h-3"}),""]})]})})]})},Kr=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(wp,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(Ot,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:O==null?void 0:O.questions.map((oe,Ne)=>{const be=oe.type==="REORDER";let Ae=!1,Ve=null;if(be){const Be=se[Ne];Be?(Ve=Be.map(He=>oe.options[He]).join(" "),Ae=Be.length===oe.options.length&&Be.every((He,dt)=>He===dt)):(Ve="  ",Ae=!1)}else{const Be=se[Ne];Ae=Be===oe.correctAnswer,Ve=Be!==void 0?oe.options[Be]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${Ae?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${Ae?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Ne+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:oe.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${Ae?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Ve})]}),!Ae&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:be?oe.options.join(" "):oe.options[oe.correctAnswer]})]}),oe.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(Dr,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:oe.explanation})]})]},oe.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),on()]}),t==="ACTIVE"&&jn(),t==="RESULT"&&Pi(),t==="REVIEW"&&Kr(),Xe&&i.jsx(yn,{title:"  ",message:Ye==="REVIEW"?"   ":Ye==="RETAKE"?"     ":Ye==="LIST"?"    ":"    ",onConfirm:Rn,onCancel:()=>Se(!1),confirmText:"",cancelText:"",icon:uA})]})},v7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),w7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),_7=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(k_,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Np,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(jl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(md,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx($o,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(v7,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(w7,{className:"w-5 h-5"})})]})})]},s))})]})]})},N7=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(wp,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(hm,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:mx,title:" ",desc:"       ."},{icon:MS,title:" ",desc:"           ."},{icon:D_,title:" ",desc:"         ."},{icon:pd,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),N_=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,v&&i.jsx(ya,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},E7=({onBack:r})=>{const[e,t]=V.useState(""),[s,l]=V.useState(""),[c,d]=V.useState("SELECTION"),[f,g]=V.useState(["handouts"]),[x,w]=V.useState([]),[v,E]=V.useState(!1);V.useEffect(()=>{c==="CONTENT"&&s&&e&&R()},[c,s,e]);const R=async()=>{E(!0);const ce=`etqan_materials_${s}_${e}`,W=365*24*60*60*1e3,N=localStorage.getItem(ce);if(N)try{const{data:T,timestamp:A}=JSON.parse(N);if(Date.now()-A<W){w(T),E(!1);return}}catch(T){console.error("Cache parsing error",T)}try{const T=zn(kt(Ue,"study_materials"),vn("grade","==",s),vn("subject","==",e)),A=await ns(T),C=[];A.forEach(k=>{C.push({id:k.id,...k.data()})}),C.sort((k,z)=>{var Ie,G;const I=((Ie=k.createdAt)==null?void 0:Ie.seconds)||0;return(((G=z.createdAt)==null?void 0:G.seconds)||0)-I}),w(C),localStorage.setItem(ce,JSON.stringify({data:C,timestamp:Date.now()}))}catch(T){console.error("Error fetching materials:",T)}finally{E(!1)}},O=()=>{e&&s&&d("CONTENT")},J=ce=>{g(W=>W.includes(ce)?W.filter(N=>N!==ce):[...W,ce])},P=()=>{const ce=x.filter(T=>T.category==="handouts"),W=x.filter(T=>T.category==="worksheets"),N=x.filter(T=>T.category==="exams");return[{id:"handouts",title:" ",files:ce},{id:"worksheets",title:" ",files:W},{id:"exams",title:" ",files:N}]},le=ce=>ce?(ce.toDate?ce.toDate():new Date(ce.seconds*1e3)).toLocaleDateString("ar-EG"):"",se=P(),te=()=>{const ce=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(N=>({label:` ${N}`,value:N.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],W=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(Lo,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(Ln,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(N_,{options:W,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(zr,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(N_,{options:ce,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:O,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(hs,{className:"w-6 h-6"})," "]})]})})]})},me=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Wn,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(Ot,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(Lo,{className:"w-3.5 h-3.5"}),se.reduce((ce,W)=>ce+W.files.length,0)," "]})]}),v?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(ot,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:se.map(ce=>{const W=f.includes(ce.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>J(ce.id),className:`w-full flex items-center justify-between p-5 transition-colors ${W?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${W?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(Lo,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:ce.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[ce.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${W?"rotate-180":""}`,children:i.jsx(Ni,{className:"w-5 h-5 text-gray-400"})})]}),W&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:ce.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Lo,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:ce.files.map((N,T)=>i.jsxs("div",{onClick:()=>N.url&&window.open(N.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(Wn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:N.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:N.size}),i.jsx("span",{children:""}),i.jsx("span",{children:le(N.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(vp,{className:"w-5 h-5"})})]},T))})})]},ce.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(Rf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?te():me()]})},j7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),T7=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],S7=[{id:"inquiry",label:" ",icon:fx,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:Dr,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:SS,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:El,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],A7=({onBack:r})=>{const[e,t]=V.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(Ot,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:T7.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(pa,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(Jn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),S7.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(Ar,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(j7,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},E_=[{minLevel:1,title:" ",icon:dx,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:Ln,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:hs,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:md,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:xd,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:Or,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],I7=({onLoginClick:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(null);V.useEffect(()=>{(async()=>{l(!0);const w="etqan_leaderboard_cache_v2",v=365*24*60*60*1e3,E=localStorage.getItem(w),R=Date.now();let O=[],J=!1;if(E)try{const P=JSON.parse(E);R-P.timestamp<v&&(O=P.data,J=!0)}catch(P){console.error("Cache parse error",P)}if(J)t(O);else try{const P=zn(kt(Ue,"users"),Nc("totalXP","desc"),Ii(5)),se=(await ns(P)).docs.map(te=>({...te.data(),uid:te.id}));t(se),localStorage.setItem(w,JSON.stringify({timestamp:R,data:se}))}catch(P){console.error("Error fetching leaderboard:",P)}l(!1)})()},[]);const f=x=>{switch(x){case 0:return i.jsx(Or,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return i.jsx(Ep,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return i.jsx(Ep,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return i.jsx(bl,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const w=Math.floor((x||0)/500)+1;return[...E_].reverse().find(v=>w>=v.minLevel)||E_[0]};return i.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),i.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[i.jsx(bl,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"    ( 5)"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-3xl",children:i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(kf,{className:"w-5 h-5 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[i.jsx(U_,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(ot,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),i.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:i.jsx("p",{children:"      !"})}):i.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,w)=>i.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${w===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":w===1?"bg-gray-800/60 border-gray-600/50":w===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${w<3?"text-white":"text-gray-600"}`,children:w<3?f(w):w+1}),i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?i.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):i.jsx(Xn,{className:"w-full h-full p-2 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[i.jsx(zr,{className:"w-3 h-3"}),x.school||" "]})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[i.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),i.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),w===0&&i.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:i.jsxs("span",{className:"flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},w))})]})})})]}),c&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:i.jsx(Jn,{className:"w-5 h-5"})}),i.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),i.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[i.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):i.jsx(Xn,{className:"w-full h-full p-6 text-gray-500"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[i.jsx(fx,{className:"w-3 h-3"}),c.school||" "]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[C_.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),i.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),i.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[i.jsx(yA,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),i.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),i.jsx("div",{className:"pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},C7=()=>{const r=[{id:1,label:" ",value:"+500",icon:pd,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",textColor:"text-blue-200"},{id:2,label:" ",value:"+50",icon:Ln,color:"text-emerald-400",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",textColor:"text-emerald-200"},{id:3,label:"",value:"+20",icon:Wn,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",textColor:"text-yellow-200"},{id:4,label:"",value:"+30",icon:Ko,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",textColor:"text-purple-200"}];return i.jsx("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-10",children:[i.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full animate-pulse border border-emerald-500/20",children:i.jsx(VT,{className:"w-6 h-6 text-emerald-500"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:" "})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:r.map(e=>i.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-sm p-6 rounded-3xl border ${e.borderColor} flex flex-col items-center justify-center text-center group hover:bg-gray-900 transition-all duration-300 hover:-translate-y-1 shadow-lg`,children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-4 ${e.bgColor} ${e.color} shadow-lg group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:i.jsx(e.icon,{className:"w-7 h-7"})}),i.jsx("div",{className:`text-3xl md:text-4xl font-black mb-2 ${e.color} drop-shadow-sm`,children:e.value}),i.jsx("div",{className:`font-bold text-sm md:text-base transition-colors ${e.textColor}`,children:e.label})]},e.id))})]})})},R7=({onBack:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(""),[f,g]=V.useState(null),[x,w]=V.useState(!1);V.useEffect(()=>{v()},[]);const v=async()=>{l(!0);const N="etqan_question_bank_v1",T=localStorage.getItem(N);if(T)try{const A=JSON.parse(T);if(A&&Array.isArray(A)){t(A),l(!1);return}}catch(A){console.error("Cache parsing error",A)}try{const A=zn(kt(Ue,"quizzes"),Nc("createdAt","desc"),Ii(50)),k=(await ns(A)).docs.map(z=>({id:z.id,...z.data()}));t(k),localStorage.setItem(N,JSON.stringify(k))}catch(A){console.error("Error fetching quizzes:",A)}finally{l(!1)}},E=N=>{g({category:"Language",...N})},R=N=>{localStorage.setItem("etqan_question_bank_v1",JSON.stringify(N))},O=async(N,T)=>{if(N.stopPropagation(),!T){alert(":   ");return}if(window.confirm("  "))try{await qm(Un(Ue,"quizzes",T));const A=e.filter(C=>C.id!==T);t(A),R(A)}catch(A){console.error("Error deleting quiz:",A),alert("   : "+A.message)}},J=(N,T)=>{f&&g({...f,[N]:T})},P=(N,T,A)=>{if(!f)return;const C=[...f.questions];C[N]={...C[N],[T]:A},g({...f,questions:C})},le=(N,T,A)=>{if(!f)return;const C=[...f.questions],k=[...C[N].options];k[T]=A,C[N]={...C[N],options:k},g({...f,questions:C})},se=N=>{if(f&&window.confirm("      ")){const T=f.questions.filter((A,C)=>C!==N);g({...f,questions:T})}},te=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}w(!0);try{const N=Un(Ue,"quizzes",f.id);await Md(N,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions});const T=e.map(A=>A.id===f.id?f:A);t(T),R(T),g(null),alert("   ")}catch(N){console.error("Error updating quiz:",N),alert("   ")}finally{w(!1)}}},me=e.filter(N=>(N.title?N.title.toLowerCase().includes(c.toLowerCase()):!1)||N.teacherName&&N.teacherName.toLowerCase().includes(c.toLowerCase())),ce=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",W="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(hs,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:N=>d(N.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(ot,{className:"w-10 h-10 animate-spin text-blue-400"})}):me.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Xu,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me.map(N=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:N.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>E(N),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(jp,{className:"w-4 h-4"})}),i.jsx("button",{onClick:T=>O(T,N.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(ba,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:N.title}),N.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:N.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",N.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Go,{className:"w-3 h-3"}),ce(N.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(Xn,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:N.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(Dr,{className:"w-3 h-3"}),N.questions.length," "]})]})]},N.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(jp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Jn,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Xu,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:N=>J("title",N.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:N=>J("subject",N.target.value),className:W})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:N=>J("grade",N.target.value),className:W,children:[5,6,7,8,9,10,11,12].map(N=>i.jsxs("option",{value:N,children:[" ",N]},N))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:N=>J("category",N.target.value),className:W,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Dr,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((N,T)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>se(T),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(ba,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",T+1]}),i.jsx("input",{type:"text",dir:"ltr",value:N.question,onChange:A=>P(T,"question",A.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:N.options.map((A,C)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",C+1]}),i.jsxs("button",{onClick:()=>P(T,"correctAnswer",C),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${N.correctAnswer===C?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[N.correctAnswer===C?i.jsx(pn,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),N.correctAnswer===C?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:A,onChange:k=>le(T,C,k.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${N.correctAnswer===C?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},C))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:N.explanation||"",onChange:A=>P(T,"explanation",A.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},T))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:te,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"})," "]})]})]})})]})},k7=[{id:"grammar",title:" (Grammar)",icon:Xu,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Ln,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:um,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:hx,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],D7=[{id:"English",title:" ",icon:um,color:"text-purple-400",bg:"bg-purple-900/20"}],O7=({onBack:r})=>{const{user:e}=Gs(),[t,s]=V.useState("INTRO"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState(null),[w,v]=V.useState([]),[E,R]=V.useState(!1),[O,J]=V.useState(null),[P,le]=V.useState(0),[se,te]=V.useState(""),[me,ce]=V.useState(!1),[W,N]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]);const T=()=>s("SUBJECTS"),A=B=>{c(B),s("GRADES")},C=B=>{f(B),s("CATEGORIES")},k=B=>{x(B),s("TOPICS")},z=B=>{J(B),le(0),te(""),N(!1),s("DETAILS")};V.useEffect(()=>{t==="TOPICS"&&d&&g&&l&&I()},[t,d,g,l]);const I=async()=>{R(!0);const B=`etqan_explanations_${d}_${l}_${g==null?void 0:g.id}`,L=365*24*60*60*1e3,Y=localStorage.getItem(B);if(Y)try{const{data:fe,timestamp:Ee}=JSON.parse(Y);if(Date.now()-Ee<L){v(fe),R(!1);return}}catch(fe){console.error(fe)}try{const fe=zn(kt(Ue,"explanations"),vn("subject","==",l),vn("grade","==",d),vn("category","==",g==null?void 0:g.id)),Ee=await ns(fe),Re=[];Ee.forEach(Xe=>{Re.push({id:Xe.id,...Xe.data()})}),Re.sort((Xe,Se)=>{var mt,rt;const Ye=((mt=Xe.createdAt)==null?void 0:mt.seconds)||0;return(((rt=Se.createdAt)==null?void 0:rt.seconds)||0)-Ye}),v(Re),localStorage.setItem(B,JSON.stringify({data:Re,timestamp:Date.now()}))}catch(fe){console.error("Error fetching explanations:",fe)}finally{R(!1)}},ge=async()=>{if(P!==0&&!(!O||!e)){ce(!0);try{await ir(kt(Ue,"reviews"),{type:"explanation",targetId:O.id,targetTitle:O.title,teacherId:O.teacherName||"",teacherName:O.teacherName||"",rating:P,comment:se,studentId:e.uid,studentName:e.displayName,createdAt:Ts()}),N(!0)}catch(B){console.error("Error saving review:",B),alert("    ")}finally{ce(!1)}}},Ie=B=>B?(B.toDate?B.toDate():new Date(B.seconds*1e3)).toLocaleDateString("ar-EG"):"",G=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:T,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(Ot,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(Yu,{className:"w-4 h-4"})," "]})})]}),he=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:D7.map(B=>i.jsxs("button",{onClick:()=>A(B.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${B.bg} ${B.color} group-hover:scale-110 transition-transform`,children:i.jsx(B.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:B.title})]},B.id))})})]}),ee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(B=>i.jsxs("button",{onClick:()=>C(B.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:B})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",B]})]},B)),i.jsxs("button",{onClick:()=>C("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(zr,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),$=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k7.map(B=>i.jsx("button",{onClick:()=>k(B),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${B.color} group-hover:scale-110 transition-transform`,children:i.jsx(B.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:B.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:B.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(Ar,{className:"w-5 h-5 text-gray-400"})})]})},B.id))})})]}),_e=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:E?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(ot,{className:"w-8 h-8 animate-spin text-emerald-400"})}):w.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(Qu,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:w.map(B=>i.jsxs("button",{onClick:()=>z(B),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(Wn,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:B.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Go,{className:"w-3 h-3"}),Ie(B.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xn,{className:"w-3 h-3"}),B.teacherName]})]})]})]}),i.jsx(Ar,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},B.id))})})]}),D=()=>O?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:O.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),i.jsx(Ar,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:O.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:O.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:O.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Go,{className:"w-4 h-4"}),i.jsx("span",{children:Ie(O.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:W?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(ya,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(dm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(B=>i.jsx("button",{onClick:()=>le(B),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${P===B?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:B},B))}),i.jsx("textarea",{value:se,onChange:B=>te(B.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:ge,disabled:me||P===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${P===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[me?i.jsx(ot,{className:"w-4 h-4 animate-spin"}):i.jsx(pa,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[t==="INTRO"&&G(),t==="SUBJECTS"&&he(),t==="GRADES"&&ee(),t==="CATEGORIES"&&$(),t==="TOPICS"&&_e(),t==="DETAILS"&&D()]})},j_=[{id:"grammar",title:" (Grammar)",icon:Xu},{id:"reading",title:" (Reading)",icon:Ln},{id:"vocabulary",title:" (Vocabulary)",icon:um},{id:"writing",title:" (Writing)",icon:hx}],M7=[{id:"English",title:"  (English)",icon:um}],V7=({onBack:r,onNavigate:e})=>{const{user:t}=Gs(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,w]=V.useState(""),[v,E]=V.useState(""),[R,O]=V.useState(!1),[J,P]=V.useState(!1),[le,se]=V.useState(""),[te,me]=V.useState([]),[ce,W]=V.useState(!1),[N,T]=V.useState(!1),[A,C]=V.useState(null),[k,z]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!v){alert("    ");return}O(!0);try{await ir(kt(Ue,"explanations"),{subject:s,grade:c,category:f,title:x,content:v,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Ts()}),P(!0),setTimeout(()=>{P(!1),w(""),E("")},2e3)}catch($){console.error("Error saving explanation:",$),alert("   ")}finally{O(!1)}},ge=async()=>{if(le.trim()&&t!=null&&t.uid){W(!0),T(!0),me([]);try{const $=zn(kt(Ue,"explanations"),vn("title",">=",le),vn("title","<=",le+"")),_e=await ns($),D=[];_e.forEach(B=>{const L=B.data();L.teacherId===t.uid&&D.push({id:B.id,...L})}),me(D)}catch($){console.error("Error searching explanations:",$)}finally{W(!1)}}},Ie=async()=>{if(A){z(!0);try{await qm(Un(Ue,"explanations",A)),me($=>$.filter(_e=>_e.id!==A)),C(null)}catch($){console.error($),alert("   ")}finally{z(!1)}}},G=()=>{r?r():e("HOME")},he=$=>$?($.toDate?$.toDate():new Date($.seconds*1e3)).toLocaleDateString("ar-EG"):"",ee=$=>{const _e=j_.find(D=>D.id===$);return _e?_e.title:$};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:G,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:G,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Ko,{className:"w-6 h-6 text-purple-500"}),"  "]}),J?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(pn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>P(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:M7.map($=>i.jsxs("button",{onClick:()=>l($.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===$.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx($.icon,{className:"w-6 h-6"}),i.jsx("span",{children:$.title})]},$.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map($=>i.jsxs("button",{onClick:()=>d($.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===$.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",$]},$)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:j_.map($=>i.jsxs("button",{onClick:()=>g($.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===$.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===$.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx($.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:$.title})]},$.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:$=>w($.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:v,onChange:$=>E($.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:R,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[R?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ba,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:le,onChange:$=>se($.target.value),onKeyDown:$=>$.key==="Enter"&&ge(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:ge,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ce?i.jsx(ot,{className:"w-4 h-4 animate-spin"}):i.jsx(hs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),te.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:te.map($=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(Wn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:$.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:$.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:ee($.category)}),i.jsx("span",{children:$.grade==="English Major - QOU"?"":` ${$.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Go,{className:"w-3 h-3"})," ",he($.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>$.id&&C($.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(ba,{className:"w-4 h-4"})})]},$.id))}):N&&!ce&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Ko,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(gx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ie,disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:k?i.jsx(ot,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>C(null),disabled:k,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},P7=[{id:"handouts",title:" ",icon:Wn,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Lo,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Ln,color:"text-purple-400",bg:"bg-purple-900/20"}],L7=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],z7=({onBack:r,onNavigate:e})=>{const{user:t}=Gs(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,w]=V.useState(""),[v,E]=V.useState(""),[R,O]=V.useState(!1),[J,P]=V.useState(!1),[le,se]=V.useState(""),[te,me]=V.useState([]),[ce,W]=V.useState(!1),[N,T]=V.useState(!1),[A,C]=V.useState(null),[k,z]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!v){alert("    ");return}if(!v.startsWith("http")){alert("        http  https");return}O(!0);try{await ir(kt(Ue,"study_materials"),{grade:s,subject:c,category:f,title:x,url:v,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Ts()}),P(!0),setTimeout(()=>{P(!1),w(""),E("")},2e3)}catch(ee){console.error("Error saving file:",ee),alert("   ")}finally{O(!1)}},ge=async()=>{if(le.trim()&&t!=null&&t.uid){W(!0),T(!0),me([]);try{const ee=zn(kt(Ue,"study_materials"),vn("title",">=",le),vn("title","<=",le+"")),$=await ns(ee),_e=[];$.forEach(D=>{const B=D.data();B.teacherId===t.uid&&_e.push({id:D.id,...B})}),me(_e)}catch(ee){console.error("Error searching files:",ee)}finally{W(!1)}}},Ie=async()=>{if(A){z(!0);try{await qm(Un(Ue,"study_materials",A)),me(ee=>ee.filter($=>$.id!==A)),C(null)}catch(ee){console.error(ee),alert("   ")}finally{z(!1)}}},G=()=>{r?r():e("PROFILE")},he=ee=>ee?(ee.toDate?ee.toDate():new Date(ee.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:G,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:G,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(V_,{className:"w-6 h-6 text-blue-500"}),"  "]}),J?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(pn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>P(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(zr,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:ee=>l(ee.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(ee=>i.jsxs("option",{value:ee.toString(),children:[" ",ee]},ee)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Ln,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:ee=>d(ee.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),L7.map(ee=>i.jsx("option",{value:ee.id,children:ee.title},ee.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:P7.map(ee=>i.jsxs("button",{onClick:()=>g(ee.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===ee.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${ee.bg}`,children:i.jsx(ee.icon,{className:`w-6 h-6 ${ee.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:ee.title})]},ee.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:ee=>w(ee.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(HS,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:v,onChange:ee=>E(ee.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:R,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[R?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ba,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:le,onChange:ee=>se(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&ge(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:ge,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ce?i.jsx(ot,{className:"w-4 h-4 animate-spin"}):i.jsx(hs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),te.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:te.map(ee=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(Wn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:ee.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:ee.subject}),i.jsx("span",{children:ee.grade==="English Major - QOU"?"":` ${ee.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Go,{className:"w-3 h-3"})," ",he(ee.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>ee.id&&C(ee.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(ba,{className:"w-4 h-4"})})]},ee.id))}):N&&!ce&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Wn,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(gx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ie,disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:k?i.jsx(ot,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>C(null),disabled:k,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},xp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const v={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],E=g==="rtl"?"md:flex-row":"md:flex-row-reverse",R=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${E}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${v.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${v.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${v.bgIcon} border ${v.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${v.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${v.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${v.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${R} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${v.border} ${v.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${v.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(Ot,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${v.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${v.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},U7=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(xp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:cx,secondaryIcon:pn,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(xp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:Qu,secondaryIcon:M_,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(xp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Lo,secondaryIcon:dS,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),B7=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),q7=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(G_,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(Ot,{className:"w-6 h-6"})]})})]})]}),F7=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),ky=()=>{const r=V.useRef(null);return V.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let E=0;E<d;E++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const w=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",w);const v=()=>{t.clearRect(0,0,l,c),x.forEach(E=>{Math.random()>.99&&(E.alpha=Math.random()),E.y-=f*(E.size*.5),E.y<0&&(E.y=c,E.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${E.color}, ${E.alpha})`,t.arc(E.x,E.y,E.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(v)};return v(),()=>{window.removeEventListener("resize",w),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},H7=({onBack:r})=>{const e=[{icon:cx,title:" ",desc:"              ."},{icon:RA,title:" 24/7",desc:"                 ."},{icon:xd,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Wn,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(ky,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(jl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(hm,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(pn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(pn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(pn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},G7=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(ky,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(jl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(Ot,{className:"w-5 h-5"})]})]})]}),$7=({onBack:r,onNavigate:e})=>{const{user:t}=Gs(),[s,l]=V.useState("INBOX"),[c,d]=V.useState([]),[f,g]=V.useState(""),[x,w]=V.useState(""),[v,E]=V.useState(""),[R,O]=V.useState(!1),[J,P]=V.useState(!1),[le,se]=V.useState(""),[te,me]=V.useState([]),[ce,W]=V.useState(!1);V.useEffect(()=>{s==="COMPOSE"?N():T()},[s,t]);const N=async()=>{P(!0);try{const ge=zn(kt(Ue,"users"),vn("role","==","student")),G=(await ns(ge)).docs.map(he=>({id:he.id,...he.data()}));d(G)}catch(ge){console.error("Error fetching students",ge)}finally{P(!1)}},T=async(ge=!1)=>{if(!t)return;const Ie=`etqan_inbox_${t.uid}`,G=365*24*60*60*1e3,he=Date.now();if(!ge){const ee=localStorage.getItem(Ie);if(ee)try{const{data:$,timestamp:_e}=JSON.parse(ee);if(he-_e<G){me($);return}}catch($){console.error($)}}W(!0);try{const ee=zn(kt(Ue,"contact_messages"),vn("teacherId","==",t.uid),Nc("createdAt","desc"),Ii(50)),_e=(await ns(ee)).docs.map(D=>({id:D.id,...D.data(),createdAt:D.data().createdAt?{seconds:D.data().createdAt.seconds}:null}));me(_e),localStorage.setItem(Ie,JSON.stringify({timestamp:he,data:_e}))}catch(ee){console.error("Error fetching inbox",ee)}finally{W(!1)}},A=async()=>{if(!x||!v){alert("    ");return}if(!f){alert("  ");return}O(!0);try{await ir(kt(Ue,"notifications"),{recipientId:f,title:x,message:v,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:Ts(),read:!1}),alert("   !"),w(""),E(""),g(""),se("")}catch(ge){console.error("Error sending message",ge),alert("   ")}finally{O(!1)}},C=async ge=>{if(window.confirm("      "))try{await qm(Un(Ue,"contact_messages",ge));const Ie=te.filter(ee=>ee.id!==ge);me(Ie);const G=`etqan_inbox_${t==null?void 0:t.uid}`,he=localStorage.getItem(G);if(he){const ee=JSON.parse(he);ee.data=Ie,localStorage.setItem(G,JSON.stringify(ee))}}catch(Ie){console.error(Ie)}},k=async ge=>{try{await Md(Un(Ue,"contact_messages",ge),{read:!0});const Ie=te.map(ee=>ee.id===ge?{...ee,read:!0}:ee);me(Ie);const G=`etqan_inbox_${t==null?void 0:t.uid}`,he=localStorage.getItem(G);if(he){const ee=JSON.parse(he);ee.data=Ie,localStorage.setItem(G,JSON.stringify(ee))}}catch(Ie){console.error(Ie)}},z=c.filter(ge=>{const Ie=ge.displayName?ge.displayName.toLowerCase():"",G=ge.email?ge.email.toLowerCase():"",he=le.toLowerCase();return Ie.includes(he)||G.includes(he)}),I=ge=>ge?(ge.toDate?ge.toDate():new Date(ge.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(Cr,{className:"w-5 h-5"})," ",te.some(ge=>!ge.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(pa,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(pa,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(pd,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(hs,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:le,onChange:ge=>{se(ge.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),le&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:z.map(ge=>i.jsxs("div",{onClick:()=>{g(ge.id),se(ge.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===ge.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:ge.avatar?i.jsx("img",{src:ge.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(Xn,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:ge.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:ge.email})]}),f===ge.id&&i.jsx(pn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},ge.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:ge=>w(ge.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:v,onChange:ge=>E(ge.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:R,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[R?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(pa,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(Cr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:()=>T(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:i.jsx(gd,{className:"w-5 h-5 text-gray-400"})})]}),ce?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(ot,{className:"w-8 h-8 animate-spin text-emerald-500"})}):te.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(Cr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:te.map(ge=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${ge.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${ge.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:ge.studentName?ge.studentName.charAt(0).toUpperCase():i.jsx(Xn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${ge.read?"text-gray-300":"text-white"}`,children:ge.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:ge.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(ux,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(ge.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:ge.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!ge.read&&i.jsxs("button",{onClick:()=>k(ge.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(pn,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>C(ge.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(ba,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(Cr,{className:"w-4 h-4 text-gray-500"})})})]}),!ge.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},ge.id))})]})})]})})]})},K7=({onBack:r,onNavigate:e})=>{const[t,s]=V.useState([]),[l,c]=V.useState(!0),[d,f]=V.useState("ALL");V.useEffect(()=>{g()},[]);const g=async()=>{c(!0);const E="etqan_teacher_reviews_v1",R=365*24*60*60*1e3,O=Date.now(),J=localStorage.getItem(E);if(J)try{const{data:P,timestamp:le}=JSON.parse(J);if(O-le<R){s(P),c(!1);return}}catch(P){console.error("Cache parsing error",P)}try{const P=zn(kt(Ue,"reviews"),Nc("createdAt","desc"),Ii(50)),se=(await ns(P)).docs.map(te=>({id:te.id,...te.data(),createdAt:te.data().createdAt?{seconds:te.data().createdAt.seconds}:null}));s(se),localStorage.setItem(E,JSON.stringify({timestamp:O,data:se}))}catch(P){console.error("Error fetching reviews:",P)}finally{c(!1)}},x=t.filter(E=>d==="ALL"?!0:d==="QUIZ"?E.type==="quiz":d==="EXPLANATION"?E.type==="explanation":!0),w=E=>E?(E.toDate?E.toDate():new Date(E.seconds*1e3)).toLocaleDateString("ar-EG"):"",v=t.length>0?(t.reduce((E,R)=>E+R.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(jl,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:v}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(ot,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(dm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(E=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[E.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:w(E.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((R,O)=>i.jsx(jl,{className:`w-3 h-3 ${O<Math.round(E.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},O)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",E.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${E.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:E.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:E.targetTitle})]}),E.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',E.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},E.id))})})]})]})},Q7=({onNavigate:r})=>i.jsxs("section",{className:"py-24 relative overflow-hidden bg-gray-950 border-t border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-900/10 rounded-full blur-[100px]"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-[100px]"})]}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl mb-8 border border-white/10 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:i.jsx(El,{className:"w-10 h-10 text-emerald-400"})}),i.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight tracking-tight",children:"   "}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed font-medium",children:"       .         ."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8",children:[i.jsxs("div",{className:"flex items-center -space-x-4 space-x-reverse",children:[i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-20",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shadow-lg relative z-0",children:"+2"})]}),i.jsxs("button",{onClick:()=>r("CONTACT_TEACHER"),className:"group relative bg-white text-gray-900 px-8 py-4 rounded-2xl font-black text-lg hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] flex items-center gap-3 transform hover:-translate-y-1",children:["  ",i.jsx(Ot,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-emerald-600"})]})]})]})]}),yp=()=>i.jsxs("div",{className:"relative w-full h-16 flex items-center justify-center my-8 overflow-hidden",children:[i.jsx("div",{className:"absolute w-full h-px bg-gray-800"}),i.jsx("div",{className:"absolute w-3/4 h-px bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,1)]"}),i.jsx("div",{className:"relative bg-gray-950 p-2 rounded-full border border-emerald-500/30 shadow-[0_0_15px_rgba(16,185,129,0.4)]",children:i.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"})})]}),Y7=()=>{const r=[{icon:eA,title:" ",desc:"     .",color:"text-blue-400",bg:"bg-blue-900/20"},{icon:cx,title:" ",desc:"     .",color:"text-purple-400",bg:"bg-purple-900/20"},{icon:xd,title:" ",desc:"    .",color:"text-yellow-400",bg:"bg-yellow-900/20"},{icon:bl,title:" ",desc:"      .",color:"text-emerald-400",bg:"bg-emerald-900/20"}];return i.jsxs("div",{className:"py-12 px-4 relative",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx("div",{className:"absolute right-8 md:right-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-emerald-500/10 via-emerald-500 to-emerald-500/10 rounded-full"}),i.jsx("div",{className:"space-y-12",children:r.map((e,t)=>i.jsxs("div",{className:"relative flex items-center gap-6 group",children:[i.jsx("div",{className:`relative z-10 w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 border-4 border-gray-950 shadow-xl ${e.bg} transition-transform group-hover:scale-110 duration-300`,children:i.jsx(e.icon,{className:`w-8 h-8 ${e.color}`})}),i.jsxs("div",{className:"flex-1 bg-gray-900/60 backdrop-blur-sm p-5 rounded-2xl border border-white/5 shadow-lg group-hover:border-emerald-500/30 transition-all group-hover:-translate-x-2",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]})]},t))})]})]})},X7=()=>i.jsxs("div",{className:"py-12 px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-900/30 rounded-xl flex items-center justify-center mb-4 text-emerald-400 group-hover:scale-110 transition-transform",children:i.jsx(F_,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-l from-blue-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-xl flex items-center justify-center mb-4 text-blue-400 group-hover:scale-110 transition-transform",children:i.jsx(mx,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-colors"})]}),i.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group text-center md:text-right flex flex-col md:flex-row items-center gap-6",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-400 shrink-0 border border-yellow-500/20 shadow-lg shadow-yellow-900/20 animate-pulse",children:i.jsx(hm,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"          ."})]})]})]})]}),J7=()=>{const[r,e]=V.useState(null),t=[{q:"   ",a:"        ."},{q:"    ",a:'   "  "       .'},{q:"    ",a:'!     "Mobile First"     .'},{q:"  ",a:"           100%."}];return i.jsxs("div",{className:"py-12 px-4 mb-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsx("div",{className:"max-w-2xl mx-auto space-y-3",children:t.map((s,l)=>i.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden transition-all duration-300",children:[i.jsxs("button",{onClick:()=>e(r===l?null:l),className:"w-full p-5 flex items-center justify-between text-right bg-gray-900 hover:bg-gray-800/50 transition-colors",children:[i.jsxs("span",{className:"font-bold text-white text-sm md:text-base flex items-center gap-3",children:[i.jsx(Dr,{className:"w-5 h-5 text-emerald-500"}),s.q]}),i.jsx(Ni,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${r===l?"rotate-180 text-emerald-400":""}`})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${r===l?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:i.jsx("div",{className:"p-5 pt-0 text-gray-400 text-sm leading-relaxed border-t border-gray-800/50",children:s.a})})]},l))}),i.jsx("div",{className:"mt-12 flex justify-center",children:i.jsxs("div",{className:"bg-gray-800/50 px-6 py-3 rounded-full flex items-center gap-3 border border-white/5",children:[i.jsx(mS,{className:"w-5 h-5 text-yellow-500"}),i.jsx("span",{className:"text-gray-300 text-xs font-bold",children:"     "})]})})]})},W7=()=>i.jsxs("div",{className:"relative z-10 w-full bg-gray-950",children:[i.jsx(yp,{}),i.jsx(Y7,{}),i.jsx(yp,{}),i.jsx(X7,{}),i.jsx(yp,{}),i.jsx(J7,{})]}),T_=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),S_=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),Z7=({onNavigate:r})=>{const[e,t]=V.useState(!1),[s,l]=V.useState(!1),c=window.location.origin,d="   -   ",f=()=>{const E=`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${encodeURIComponent(d)}`;window.open(E,"_blank"),t(!1)},g=()=>{const E=`https://wa.me/?text=${encodeURIComponent(d+" "+c)}`;window.open(E,"_blank"),t(!1)},x=()=>{const E=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;window.open(E,"_blank"),t(!1)},w=()=>{navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)},v=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:d,url:c}),t(!1)}catch(E){console.log("Error sharing",E)}else w()};return i.jsxs("footer",{className:"relative overflow-hidden bg-gradient-to-t from-emerald-950 via-gray-900 to-gray-950 pt-16 pb-10 border-t border-emerald-500/30",children:[i.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-64 bg-emerald-500/5 blur-[120px] pointer-events-none"}),i.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 flex flex-col items-center text-center",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-10 hover:scale-105 transition-transform duration-300 cursor-default",children:[i.jsxs("div",{className:"w-14 h-14 bg-gray-900 rounded-2xl flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.2)] border border-emerald-500/30 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/10 group-hover:bg-emerald-500/20 transition-colors"}),i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-8 h-8 rounded-full object-cover"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-3xl font-black text-white tracking-tight block",children:" "}),i.jsx("span",{className:"text-emerald-500 text-xs font-bold tracking-widest uppercase opacity-80",children:"Educational Platform"})]})]}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("HOME"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Yu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("QUIZZES"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Ln,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Wn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS_EXPLANATIONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Ko,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("CONTACT_TEACHER"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(El,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex gap-6 mb-10",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#1877F2] group-hover:border-[#1877F2] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx($o,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#25D366] group-hover:border-[#25D366] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(T_,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#0088cc] group-hover:border-[#0088cc] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(S_,{className:"w-6 h-6"})})})]}),i.jsx("div",{className:"relative mb-10 z-50",children:i.jsxs("button",{onClick:()=>t(!0),className:"group relative flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg hover:shadow-emerald-500/30 hover:-translate-y-1 transition-all active:scale-95",children:[i.jsx(Df,{className:"w-5 h-5"}),"   "]})}),i.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-emerald-900/50 to-transparent mb-8"}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-400",children:["  ",i.jsx("span",{className:"text-emerald-400",children:"   "})]}),i.jsxs("p",{className:"text-[10px] text-gray-600 font-mono dir-ltr",children:[" ",new Date().getFullYear()," Etqan Platform. All rights reserved."]})]})]}),e&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>t(!1),children:i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 flex flex-col gap-5 animate-fade-in-up relative",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Df,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Jn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(T_,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(S_,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx($o,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:v,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(z_,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(B_,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:c}),i.jsxs("button",{onClick:w,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${s?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[s?i.jsx(O_,{className:"w-3.5 h-3.5"}):i.jsx(P_,{className:"w-3.5 h-3.5"}),s?" ":" "]})]})]})})]})},eO=[{id:1,title:"  (VIP)",desc:"   (One-on-One)  Zoom        .",price:" ",icon:ZA,features:["   ","  ","  "],color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/30",buttonColor:"bg-amber-500 hover:bg-amber-600"},{id:2,title:"  ",desc:"       PDF   .",price:" ",icon:Ln,features:["  ","  "," "],color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",buttonColor:"bg-purple-600 hover:bg-purple-700"},{id:3,title:"   ",desc:"         .",price:" ",icon:Go,features:["  ","  ","   "],color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",buttonColor:"bg-emerald-600 hover:bg-emerald-700"}],tO=({onBack:r})=>{const e=t=>{const s=`     "${t}"`;window.open(`https://wa.me/972568401548?text=${encodeURIComponent(s)}`,"_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm backdrop-blur-md bg-opacity-90",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsxs("span",{className:"font-bold text-white flex items-center gap-2",children:[i.jsx(G_,{className:"w-4 h-4 text-amber-400"})," "]})]})}),i.jsxs("div",{className:"relative py-20 px-4 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-gradient-to-b from-gray-900/50 to-gray-950 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 text-amber-400 px-4 py-1.5 rounded-full text-sm font-bold mb-6 animate-fade-in-up",children:[i.jsx(Or,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl tracking-tight leading-tight",children:["   ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400",children:" "})]}),i.jsx("p",{className:"text-gray-300 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed",children:"              ."})]})]}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 pb-24 relative z-10",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:eO.map(t=>i.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 border ${t.border} shadow-2xl relative group hover:-translate-y-2 transition-all duration-500 flex flex-col`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-full h-full ${t.bg} opacity-0 group-hover:opacity-20 transition-opacity duration-500 rounded-[2.5rem]`}),i.jsx("div",{className:`w-16 h-16 rounded-2xl ${t.bg} ${t.color} flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300 border border-white/5`,children:i.jsx(t.icon,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3 group-hover:text-amber-100 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-8 flex-1 font-medium",children:t.desc}),i.jsx("div",{className:"space-y-3 mb-8",children:t.features.map((s,l)=>i.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[i.jsx(pn,{className:`w-5 h-5 ${t.color}`}),i.jsx("span",{children:s})]},l))}),i.jsxs("button",{onClick:()=>e(t.title),className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 ${t.buttonColor} shadow-black/20 group-hover:shadow-amber-500/20`,children:[" ",i.jsx(Ot,{className:"w-5 h-5"})]})]},t.id))}),i.jsx("div",{className:"mt-20 text-center animate-fade-in",children:i.jsxs("p",{className:"text-gray-500 text-sm font-bold flex items-center justify-center gap-2 bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5",children:[i.jsx(zr,{className:"w-5 h-5 text-gray-400"}),"        "]})})]})]})},bp="etqan_sub_management_cache_v3",nO=365*24*60*60*1e3,sO=({onBack:r})=>{const{user:e}=Gs(),[t,s]=V.useState([]),[l,c]=V.useState(""),[d,f]=V.useState(!1),[g,x]=V.useState(null),w=P=>{let le=P.isSubscriber||!1,se=P.subscriptionExpiry,te=null;return se&&(se.seconds?te=new Date(se.seconds*1e3):typeof se=="string"&&(te=new Date(se))),te&&te.getTime()<Date.now()&&(le=!1),{...P,isSubscriber:le,subscriptionExpiry:se}};V.useEffect(()=>{(()=>{const le=localStorage.getItem(bp);if(le)try{const{data:se,timestamp:te}=JSON.parse(le);if(Date.now()-te<nO){const me=se.map(ce=>w(ce));s(me)}}catch(se){console.error("Cache parse error",se)}})()},[]);const v=P=>{s(P),localStorage.setItem(bp,JSON.stringify({data:P,timestamp:Date.now()}))},E=async()=>{if(!l.trim())return;f(!0);const P=l.trim();let le=[];try{const se=Un(Ue,"users",P);try{const te=await Ny(se);te.exists()&&te.data().role==="student"&&le.push({id:te.id,...te.data()})}catch{}if(le.length===0){const te=[zn(kt(Ue,"users"),vn("email","==",P)),zn(kt(Ue,"users"),vn("email",">=",P),vn("email","<=",P+""),Ii(5)),zn(kt(Ue,"users"),vn("displayName",">=",P),vn("displayName","<=",P+""),Ii(5))];(await Promise.all(te.map(ce=>ns(ce)))).forEach(ce=>{ce.forEach(W=>{const N=W.data();N.role==="student"&&(le.find(T=>T.id===W.id)||le.push({id:W.id,...N}))})})}if(le.length>0){const te=new Set(t.map(N=>N.id)),W=[...le.filter(N=>!te.has(N.id)).map(N=>w(N)),...t];v(W)}else alert("          ")}catch(se){console.error("Error searching student",se),alert("   ")}finally{f(!1)}},R=async(P,le)=>{x(P);try{const se=Un(Ue,"users",P),te=!le,me=te?new Date(Date.now()+60*1e3):null;await Md(se,{isSubscriber:te,subscriptionExpiry:me});const ce=t.map(W=>{if(W.id===P){const N=me?{seconds:Math.floor(me.getTime()/1e3)}:null;return{...W,isSubscriber:te,subscriptionExpiry:N}}return W});v(ce)}catch(se){console.error("Error updating subscription",se),alert("    ")}finally{x(null)}},O=()=>{window.confirm("       ")&&(s([]),localStorage.removeItem(bp))},J=P=>{if(!P)return"-";let le;return P.seconds?le=new Date(P.seconds*1e3):le=new Date(P),le.toLocaleDateString("en-GB")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 p-6 md:p-8 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8 border-b border-gray-700 pb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2 mb-2",children:[i.jsx(L_,{className:"w-8 h-8 text-amber-500"}),"  "]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"       (     )"})]}),i.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[i.jsx("div",{className:"relative w-full md:w-80",children:i.jsx("input",{type:"text",placeholder:"    ID...",value:l,onChange:P=>c(P.target.value),onKeyDown:P=>P.key==="Enter"&&E(),className:"w-full px-5 py-3 rounded-xl bg-gray-800 border border-gray-700 focus:border-amber-500 outline-none text-white font-bold transition-all text-sm"})}),i.jsx("button",{onClick:E,disabled:d,className:"bg-amber-600 hover:bg-amber-700 text-white px-4 rounded-xl flex items-center justify-center transition-colors shadow-lg disabled:opacity-50",children:d?i.jsx(ot,{className:"w-5 h-5 animate-spin"}):i.jsx(hs,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 bg-gray-800/20 rounded-3xl border border-dashed border-gray-800",children:[i.jsx(hs,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"       "})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("button",{onClick:O,className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1 bg-red-900/10 px-3 py-1.5 rounded-lg border border-red-900/30 transition-colors",children:[i.jsx(ba,{className:"w-3 h-3"}),"   "]})}),i.jsxs("table",{className:"w-full text-right border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-700 text-gray-400 text-xs uppercase tracking-wider",children:[i.jsx("th",{className:"pb-4 pr-4",children:""}),i.jsx("th",{className:"pb-4",children:" (ID)"}),i.jsx("th",{className:"pb-4",children:" "}),i.jsx("th",{className:"pb-4",children:" "}),i.jsx("th",{className:"pb-4 pl-4 text-left",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-800",children:t.map(P=>i.jsxs("tr",{className:"group hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"py-4 pr-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden border border-gray-600 shrink-0",children:P.avatar?i.jsx("img",{src:P.avatar,className:"w-full h-full object-cover",alt:"avatar"}):i.jsx(pd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-white text-sm",children:P.displayName}),i.jsx("div",{className:"text-xs text-gray-500",children:P.email})]})]})}),i.jsx("td",{className:"py-4 font-mono text-[10px] text-amber-200/70 select-all",children:P.id}),i.jsx("td",{className:"py-4",children:P.isSubscriber?i.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-900/30 text-green-400 px-2.5 py-1 rounded-full text-xs font-bold border border-green-500/20",children:[i.jsx(pn,{className:"w-3 h-3"})," "]}):i.jsx("span",{className:"inline-flex items-center gap-1 bg-gray-700/50 text-gray-400 px-2.5 py-1 rounded-full text-xs font-bold border border-gray-600",children:" "})}),i.jsx("td",{className:"py-4 text-xs text-gray-400 dir-ltr font-mono font-bold",children:J(P.subscriptionExpiry)}),i.jsx("td",{className:"py-4 pl-4 text-left",children:i.jsx("button",{onClick:()=>R(P.id,P.isSubscriber),disabled:g===P.id,className:`px-3 py-2 rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2 ml-auto w-32 ${g===P.id?"bg-gray-700 cursor-not-allowed text-gray-400":P.isSubscriber?"bg-red-900/20 text-red-400 hover:bg-red-900/40 border border-red-900/30":"bg-amber-600 text-white hover:bg-amber-700 shadow-md hover:shadow-amber-900/20"}`,children:g===P.id?i.jsx(ot,{className:"w-3 h-3 animate-spin"}):P.isSubscriber?i.jsxs(i.Fragment,{children:[i.jsx(BT,{className:"w-3 h-3"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(YA,{className:"w-3 h-3"})," ()"]})})})]},P.id))})]})]})})]})})]})},A_=()=>i.jsx("div",{className:"relative w-full h-20 flex items-center justify-center my-6 overflow-hidden pointer-events-none z-20",children:i.jsxs("div",{className:"transform -skew-x-[20deg] flex items-center justify-center w-full max-w-xl opacity-60",children:[i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-transparent via-emerald-500/50 to-emerald-500 rounded-l-full blur-[1px]"}),i.jsxs("div",{className:"relative mx-3 shrink-0",children:[i.jsx("div",{className:"w-3 h-3 bg-gray-950 rounded-full border border-emerald-500/80 shadow-[0_0_15px_rgba(16,185,129,0.6)] flex items-center justify-center relative z-10",children:i.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full animate-pulse"})}),i.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 blur-md rounded-full"})]}),i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-l from-transparent via-emerald-500/50 to-emerald-500 rounded-r-full blur-[1px]"})]})});function rO(){const[r,e]=V.useState("HOME"),[t,s]=V.useState(!1),[l,c]=V.useState(!1),d=V.useRef({}),f=V.useRef(!1),{logout:g}=Gs();V.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const v=E=>{E.state&&E.state.view?(f.current=!0,e(E.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",v),()=>window.removeEventListener("popstate",v)},[]),V.useEffect(()=>{if(f.current){const v=d.current[r]||0;setTimeout(()=>window.scrollTo(0,v),10)}else window.scrollTo(0,0)},[r]);const x=(v,E=!1)=>{if(v===r){v==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=E,window.history.pushState({view:v},"",""),e(v)},w=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},2500)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(ky,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black/90 backdrop-blur-2xl transition-all duration-700 animate-fade-in",children:[i.jsxs("div",{className:"relative scale-150 transform transition-transform duration-700",children:[i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-emerald-500/20 rounded-full blur-[80px] animate-pulse"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-blue-500/10 rounded-full blur-[60px] animate-pulse delay-75"}),i.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_3s_linear_infinite] text-emerald-500/20",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"20 10"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_2s_linear_infinite_reverse] text-emerald-500/60",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60 100",strokeLinecap:"round"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-spin text-blue-500/50",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"32",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"40 40",strokeLinecap:"round"})}),i.jsxs("div",{className:"bg-gray-900 p-4 rounded-full border border-white/10 shadow-2xl relative z-10 animate-bounce-subtle",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-md rounded-full"}),i.jsx(Ju,{className:"w-8 h-8 text-emerald-400 relative z-20"})]})]})]}),i.jsxs("div",{className:"mt-12 text-center space-y-4 animate-slide-up-fade",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 tracking-tight drop-shadow-lg",children:" "}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-emerald-400 text-sm md:text-base font-bold bg-emerald-950/30 px-6 py-2.5 rounded-full border border-emerald-500/20 shadow-lg backdrop-blur-md",children:[i.jsx(ot,{className:"w-4 h-4 animate-spin"}),"    ..."]})]})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(l7,{onLoginClick:()=>s(!0),onNavigate:v=>x(v),onLogoutClick:w}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(u7,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:v=>x(v)}),i.jsx(h7,{onNavigate:v=>x(v)}),i.jsx(I7,{onLoginClick:()=>s(!0)}),i.jsx(A_,{}),i.jsx(C7,{}),i.jsx(A_,{}),i.jsx(G7,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsx(B7,{}),i.jsx(q7,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(F7,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(U7,{onNavigate:v=>x(v)}),i.jsx(W7,{}),i.jsx(Q7,{onNavigate:v=>x(v)})]}),r==="ABOUT_PLATFORM"&&i.jsx(N7,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(H7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(_7,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(x7,{onNavigate:v=>x(v)}),r==="TEACHER_DASHBOARD"&&i.jsx(m7,{}),r==="QUESTION_BANK"&&i.jsx(R7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(V7,{onNavigate:v=>x(v),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(z7,{onNavigate:v=>x(v),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(b7,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&i.jsx(E7,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(O7,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx(A7,{onBack:()=>x("HOME",!0)}),r==="SERVICES"&&i.jsx(tO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx($7,{onNavigate:v=>x(v)}),r==="TEACHER_REVIEWS"&&i.jsx(K7,{onNavigate:v=>x(v)}),r==="SUBSCRIPTION_MANAGEMENT"&&i.jsx(sO,{onBack:()=>x("PROFILE",!0)})]}),i.jsx(f7,{isOpen:t,onClose:()=>s(!1)}),i.jsx(Z7,{onNavigate:v=>x(v)})]})]})}const q5=document.getElementById("root");if(!q5)throw new Error("Could not find root element to mount to");const aO=IT.createRoot(q5);aO.render(i.jsx(C_.StrictMode,{children:i.jsx(i7,{children:i.jsx(rO,{})})}));
