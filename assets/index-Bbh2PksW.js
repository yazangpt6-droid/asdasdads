(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function rE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wp={exports:{}},Uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function gA(){if(Ab)return Uc;Ab=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Uc.Fragment=e,Uc.jsx=t,Uc.jsxs=t,Uc}var Cb;function yA(){return Cb||(Cb=1,wp.exports=gA()),wp.exports}var o=yA(),Ep={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function xA(){if(Ib)return Ve;Ib=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function S(q){return q===null||typeof q!="object"?null:(q=w&&q[w]||q["@@iterator"],typeof q=="function"?q:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,B={};function K(q,J,O){this.props=q,this.context=J,this.refs=B,this.updater=O||V}K.prototype.isReactComponent={},K.prototype.setState=function(q,J){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,J,"setState")},K.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function re(){}re.prototype=K.prototype;function $(q,J,O){this.props=q,this.context=J,this.refs=B,this.updater=O||V}var ie=$.prototype=new re;ie.constructor=$,P(ie,K.prototype),ie.isPureReactComponent=!0;var W=Array.isArray;function G(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(q,J,O){var ne=O.ref;return{$$typeof:n,type:q,key:J,ref:ne!==void 0?ne:null,props:O}}function D(q,J){return I(q.type,J,q.props)}function j(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function U(q){var J={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(O){return J[O]})}var M=/\/+/g;function Fe(q,J){return typeof q=="object"&&q!==null&&q.key!=null?U(""+q.key):J.toString(36)}function $e(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(G,G):(q.status="pending",q.then(function(J){q.status==="pending"&&(q.status="fulfilled",q.value=J)},function(J){q.status==="pending"&&(q.status="rejected",q.reason=J)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ee(q,J,O,ne,fe){var Ee=typeof q;(Ee==="undefined"||Ee==="boolean")&&(q=null);var je=!1;if(q===null)je=!0;else switch(Ee){case"bigint":case"string":case"number":je=!0;break;case"object":switch(q.$$typeof){case n:case e:je=!0;break;case v:return je=q._init,ee(je(q._payload),J,O,ne,fe)}}if(je)return fe=fe(q),je=ne===""?"."+Fe(q,0):ne,W(fe)?(O="",je!=null&&(O=je.replace(M,"$&/")+"/"),ee(fe,J,O,"",function(Ct){return Ct})):fe!=null&&(j(fe)&&(fe=D(fe,O+(fe.key==null||q&&q.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+je)),J.push(fe)),1;je=0;var nt=ne===""?".":ne+":";if(W(q))for(var Ie=0;Ie<q.length;Ie++)ne=q[Ie],Ee=nt+Fe(ne,Ie),je+=ee(ne,J,O,Ee,fe);else if(Ie=S(q),typeof Ie=="function")for(q=Ie.call(q),Ie=0;!(ne=q.next()).done;)ne=ne.value,Ee=nt+Fe(ne,Ie++),je+=ee(ne,J,O,Ee,fe);else if(Ee==="object"){if(typeof q.then=="function")return ee($e(q),J,O,ne,fe);throw J=String(q),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return je}function pe(q,J,O){if(q==null)return q;var ne=[],fe=0;return ee(q,ne,"","",function(Ee){return J.call(O,Ee,fe++)}),ne}function he(q){if(q._status===-1){var J=q._result;J=J(),J.then(function(O){(q._status===0||q._status===-1)&&(q._status=1,q._result=O)},function(O){(q._status===0||q._status===-1)&&(q._status=2,q._result=O)}),q._status===-1&&(q._status=0,q._result=J)}if(q._status===1)return q._result.default;throw q._result}var Pe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Re={map:pe,forEach:function(q,J,O){pe(q,function(){J.apply(this,arguments)},O)},count:function(q){var J=0;return pe(q,function(){J++}),J},toArray:function(q){return pe(q,function(J){return J})||[]},only:function(q){if(!j(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ve.Activity=_,Ve.Children=Re,Ve.Component=K,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=$,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(q){return C.H.useMemoCache(q)}},Ve.cache=function(q){return function(){return q.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(q,J,O){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ne=P({},q.props),fe=q.key;if(J!=null)for(Ee in J.key!==void 0&&(fe=""+J.key),J)!R.call(J,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&J.ref===void 0||(ne[Ee]=J[Ee]);var Ee=arguments.length-2;if(Ee===1)ne.children=O;else if(1<Ee){for(var je=Array(Ee),nt=0;nt<Ee;nt++)je[nt]=arguments[nt+2];ne.children=je}return I(q.type,fe,ne)},Ve.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Ve.createElement=function(q,J,O){var ne,fe={},Ee=null;if(J!=null)for(ne in J.key!==void 0&&(Ee=""+J.key),J)R.call(J,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(fe[ne]=J[ne]);var je=arguments.length-2;if(je===1)fe.children=O;else if(1<je){for(var nt=Array(je),Ie=0;Ie<je;Ie++)nt[Ie]=arguments[Ie+2];fe.children=nt}if(q&&q.defaultProps)for(ne in je=q.defaultProps,je)fe[ne]===void 0&&(fe[ne]=je[ne]);return I(q,Ee,fe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(q){return{$$typeof:h,render:q}},Ve.isValidElement=j,Ve.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:he}},Ve.memo=function(q,J){return{$$typeof:m,type:q,compare:J===void 0?null:J}},Ve.startTransition=function(q){var J=C.T,O={};C.T=O;try{var ne=q(),fe=C.S;fe!==null&&fe(O,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(G,Pe)}catch(Ee){Pe(Ee)}finally{J!==null&&O.types!==null&&(J.types=O.types),C.T=J}},Ve.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ve.use=function(q){return C.H.use(q)},Ve.useActionState=function(q,J,O){return C.H.useActionState(q,J,O)},Ve.useCallback=function(q,J){return C.H.useCallback(q,J)},Ve.useContext=function(q){return C.H.useContext(q)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(q,J){return C.H.useDeferredValue(q,J)},Ve.useEffect=function(q,J){return C.H.useEffect(q,J)},Ve.useEffectEvent=function(q){return C.H.useEffectEvent(q)},Ve.useId=function(){return C.H.useId()},Ve.useImperativeHandle=function(q,J,O){return C.H.useImperativeHandle(q,J,O)},Ve.useInsertionEffect=function(q,J){return C.H.useInsertionEffect(q,J)},Ve.useLayoutEffect=function(q,J){return C.H.useLayoutEffect(q,J)},Ve.useMemo=function(q,J){return C.H.useMemo(q,J)},Ve.useOptimistic=function(q,J){return C.H.useOptimistic(q,J)},Ve.useReducer=function(q,J,O){return C.H.useReducer(q,J,O)},Ve.useRef=function(q){return C.H.useRef(q)},Ve.useState=function(q){return C.H.useState(q)},Ve.useSyncExternalStore=function(q,J,O){return C.H.useSyncExternalStore(q,J,O)},Ve.useTransition=function(){return C.H.useTransition()},Ve.version="19.2.0",Ve}var Rb;function Fg(){return Rb||(Rb=1,Ep.exports=xA()),Ep.exports}var F=Fg();const iE=rE(F);var Tp={exports:{}},Oc={},Np={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function vA(){return kb||(kb=1,(function(n){function e(ee,pe){var he=ee.length;ee.push(pe);e:for(;0<he;){var Pe=he-1>>>1,Re=ee[Pe];if(0<a(Re,pe))ee[Pe]=pe,ee[he]=Re,he=Pe;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var pe=ee[0],he=ee.pop();if(he!==pe){ee[0]=he;e:for(var Pe=0,Re=ee.length,q=Re>>>1;Pe<q;){var J=2*(Pe+1)-1,O=ee[J],ne=J+1,fe=ee[ne];if(0>a(O,he))ne<Re&&0>a(fe,O)?(ee[Pe]=fe,ee[ne]=he,Pe=ne):(ee[Pe]=O,ee[J]=he,Pe=J);else if(ne<Re&&0>a(fe,he))ee[Pe]=fe,ee[ne]=he,Pe=ne;else break e}}return pe}function a(ee,pe){var he=ee.sortIndex-pe.sortIndex;return he!==0?he:ee.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,_=null,w=3,S=!1,V=!1,P=!1,B=!1,K=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ie(ee){for(var pe=t(m);pe!==null;){if(pe.callback===null)s(m);else if(pe.startTime<=ee)s(m),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(m)}}function W(ee){if(P=!1,ie(ee),!V)if(t(p)!==null)V=!0,G||(G=!0,U());else{var pe=t(m);pe!==null&&$e(W,pe.startTime-ee)}}var G=!1,C=-1,R=5,I=-1;function D(){return B?!0:!(n.unstable_now()-I<R)}function j(){if(B=!1,G){var ee=n.unstable_now();I=ee;var pe=!0;try{e:{V=!1,P&&(P=!1,re(C),C=-1),S=!0;var he=w;try{t:{for(ie(ee),_=t(p);_!==null&&!(_.expirationTime>ee&&D());){var Pe=_.callback;if(typeof Pe=="function"){_.callback=null,w=_.priorityLevel;var Re=Pe(_.expirationTime<=ee);if(ee=n.unstable_now(),typeof Re=="function"){_.callback=Re,ie(ee),pe=!0;break t}_===t(p)&&s(p),ie(ee)}else s(p);_=t(p)}if(_!==null)pe=!0;else{var q=t(m);q!==null&&$e(W,q.startTime-ee),pe=!1}}break e}finally{_=null,w=he,S=!1}pe=void 0}}finally{pe?U():G=!1}}}var U;if(typeof $=="function")U=function(){$(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Fe=M.port2;M.port1.onmessage=j,U=function(){Fe.postMessage(null)}}else U=function(){K(j,0)};function $e(ee,pe){C=K(function(){ee(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var he=w;w=pe;try{return ee()}finally{w=he}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(ee,pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=w;w=ee;try{return pe()}finally{w=he}},n.unstable_scheduleCallback=function(ee,pe,he){var Pe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Pe+he:Pe):he=Pe,ee){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=he+Re,ee={id:v++,callback:pe,priorityLevel:ee,startTime:he,expirationTime:Re,sortIndex:-1},he>Pe?(ee.sortIndex=he,e(m,ee),t(p)===null&&ee===t(m)&&(P?(re(C),C=-1):P=!0,$e(W,he-Pe))):(ee.sortIndex=Re,e(p,ee),V||S||(V=!0,G||(G=!0,U()))),ee},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ee){var pe=w;return function(){var he=w;w=pe;try{return ee.apply(this,arguments)}finally{w=he}}}})(Sp)),Sp}var Mb;function bA(){return Mb||(Mb=1,Np.exports=vA()),Np.exports}var Ap={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function _A(){if(Db)return kn;Db=1;var n=Fg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},kn.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},kn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},kn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},kn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:S}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:w,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},kn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},kn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},kn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},kn.requestFormReset=function(p){s.d.r(p)},kn.unstable_batchedUpdates=function(p,m){return p(m)},kn.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},kn.useFormStatus=function(){return u.H.useHostTransitionStatus()},kn.version="19.2.0",kn}var Pb;function wA(){if(Pb)return Ap.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ap.exports=_A(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function EA(){if(jb)return Oc;jb=1;var n=bA(),e=Fg(),t=wA();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(s(188))}function m(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var c=r,d=i;;){var x=c.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){c=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===c)return p(x),r;if(b===d)return p(x),i;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=x,d=b;else{for(var T=!1,A=x.child;A;){if(A===c){T=!0,c=x,d=b;break}if(A===d){T=!0,d=x,c=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===c){T=!0,c=b,d=x;break}if(A===d){T=!0,d=b,c=x;break}A=A.sibling}if(!T)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function Fe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case K:return"Profiler";case B:return"StrictMode";case W:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case V:return"Portal";case $:return r.displayName||"Context";case re:return(r._context.displayName||"Context")+".Consumer";case ie:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return i=r.displayName||null,i!==null?i:Fe(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return Fe(r(i))}catch{}}return null}var $e=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Pe=[],Re=-1;function q(r){return{current:r}}function J(r){0>Re||(r.current=Pe[Re],Pe[Re]=null,Re--)}function O(r,i){Re++,Pe[Re]=r.current,r.current=i}var ne=q(null),fe=q(null),Ee=q(null),je=q(null);function nt(r,i){switch(O(Ee,i),O(fe,r),O(ne,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Jv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Jv(i),r=Xv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(ne),O(ne,r)}function Ie(){J(ne),J(fe),J(Ee)}function Ct(r){r.memoizedState!==null&&O(je,r);var i=ne.current,c=Xv(i,r.type);i!==c&&(O(fe,r),O(ne,c))}function Oe(r){fe.current===r&&(J(ne),J(fe)),je.current===r&&(J(je),Pc._currentValue=he)}var ut,it;function Ht(r){if(ut===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);ut=i&&i[1]||"",it=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+r+it}var Vs=!1;function $n(r,i){if(!r||Vs)return"";Vs=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(se){var Z=se}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(se){Z=se}r.call(ce.prototype)}}else{try{throw Error()}catch(se){Z=se}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(se){if(se&&Z&&typeof se.stack=="string")return[se.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var L=T.split(`
`),X=A.split(`
`);for(x=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;x<X.length&&!X[x].includes("DetermineComponentFrameRoot");)x++;if(d===L.length||x===X.length)for(d=L.length-1,x=X.length-1;1<=d&&0<=x&&L[d]!==X[x];)x--;for(;1<=d&&0<=x;d--,x--)if(L[d]!==X[x]){if(d!==1||x!==1)do if(d--,x--,0>x||L[d]!==X[x]){var ae=`
`+L[d].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=d&&0<=x);break}}}finally{Vs=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ht(c):""}function qn(r,i){switch(r.tag){case 26:case 27:case 5:return Ht(r.type);case 16:return Ht("Lazy");case 13:return r.child!==i&&i!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return $n(r.type,!1);case 11:return $n(r.type.render,!1);case 1:return $n(r.type,!0);case 31:return Ht("Activity");default:return""}}function sr(r){try{var i="",c=null;do i+=qn(r,c),c=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var mt=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,as=n.unstable_cancelCallback,_a=n.unstable_shouldYield,Pr=n.unstable_requestPaint,dn=n.unstable_now,Kn=n.unstable_getCurrentPriorityLevel,zn=n.unstable_ImmediatePriority,rr=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,me=n.unstable_LowPriority,He=n.unstable_IdlePriority,st=n.log,Wt=n.unstable_setDisableYieldValue,$t=null,gt=null;function Zt(r){if(typeof st=="function"&&Wt(r),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode($t,r)}catch{}}var bt=Math.clz32?Math.clz32:In,vs=Math.log,hn=Math.LN2;function In(r){return r>>>=0,r===0?32:31-(vs(r)/hn|0)|0}var pn=256,Us=262144,de=4194304;function Ne(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Se(r,i,c){var d=r.pendingLanes;if(d===0)return 0;var x=0,b=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?x=Ne(d):(T&=A,T!==0?x=Ne(T):c||(c=A&~r,c!==0&&(x=Ne(c))))):(A=d&~b,A!==0?x=Ne(A):T!==0?x=Ne(T):c||(c=d&~r,c!==0&&(x=Ne(c)))),x===0?0:i!==0&&i!==x&&(i&b)===0&&(b=x&-x,c=i&-i,b>=c||b===32&&(c&4194048)!==0)?i:x}function ye(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Qe(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var r=de;return de<<=1,(de&62914560)===0&&(de=4194304),r}function Be(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Kt(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nt(r,i,c,d,x,b){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,L=r.expirationTimes,X=r.hiddenUpdates;for(c=T&~c;0<c;){var ae=31-bt(c),ce=1<<ae;A[ae]=0,L[ae]=-1;var Z=X[ae];if(Z!==null)for(X[ae]=null,ae=0;ae<Z.length;ae++){var se=Z[ae];se!==null&&(se.lane&=-536870913)}c&=~ce}d!==0&&St(r,d,0),b!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=b&~(T&~i))}function St(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-bt(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|c&261930}function Rn(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var d=31-bt(c),x=1<<d;x&i|r[d]&i&&(r[d]|=i),c&=~x}}function wa(r,i){var c=i&-i;return c=(c&42)!==0?1:Ea(c),(c&(r.suspendedLanes|i))!==0?0:c}function Ea(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function jr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Nu(){var r=pe.p;return r!==0?r:(r=window.event,r===void 0?32:bb(r.type))}function Os(r,i){var c=pe.p;try{return pe.p=r,i()}finally{pe.p=c}}var qs=Math.random().toString(36).slice(2),en="__reactFiber$"+qs,gn="__reactProps$"+qs,ir="__reactContainer$"+qs,yo="__reactEvents$"+qs,Cf="__reactListeners$"+qs,Su="__reactHandles$"+qs,Au="__reactResources$"+qs,ar="__reactMarker$"+qs;function xo(r){delete r[en],delete r[gn],delete r[yo],delete r[Cf],delete r[Su]}function or(r){var i=r[en];if(i)return i;for(var c=r.parentNode;c;){if(i=c[ir]||c[en]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=rb(r);r!==null;){if(c=r[en])return c;r=rb(r)}return i}r=c,c=r.parentNode}return null}function bs(r){if(r=r[en]||r[ir]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function os(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function lr(r){var i=r[Au];return i||(i=r[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function tn(r){r[ar]=!0}var zl=new Set,Fl={};function cr(r,i){ur(r,i),ur(r+"Capture",i)}function ur(r,i){for(Fl[r]=i,r=0;r<i.length;r++)zl.add(i[r])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},Hl={};function Cu(r){return mt.call(Hl,r)?!0:mt.call(Bl,r)?!1:Gl.test(r)?Hl[r]=!0:(Bl[r]=!0,!1)}function vo(r,i,c){if(Cu(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function ls(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function nn(r,i,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+d)}}function yn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $l(r,i,c){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return x.call(this)},set:function(T){c=""+T,b.call(this,T)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function yt(r){if(!r._valueTracker){var i=bi(r)?"checked":"value";r._valueTracker=$l(r,i,""+r[i])}}function Ta(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return r&&(d=bi(r)?r.checked?"true":"false":r.value),r=d,r!==c?(i.setValue(r),!0):!1}function dr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Na=/[\n"\\]/g;function Yn(r){return r.replace(Na,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function bo(r,i,c,d,x,b,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+yn(i)):r.value!==""+yn(i)&&(r.value=""+yn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Kl(r,T,yn(i)):c!=null?Kl(r,T,yn(c)):d!=null&&r.removeAttribute("value"),x==null&&b!=null&&(r.defaultChecked=!!b),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+yn(A):r.removeAttribute("name")}function Iu(r,i,c,d,x,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),i!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){yt(r);return}c=c!=null?""+yn(c):"",i=i!=null?""+yn(i):c,A||i===r.value||(r.value=i),r.defaultValue=i}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=A?r.checked:!!d,r.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),yt(r)}function Kl(r,i,c){i==="number"&&dr(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function _i(r,i,c,d){if(r=r.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=i.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&d&&(r[c].defaultSelected=!0)}else{for(c=""+yn(c),i=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,d&&(r[x].defaultSelected=!0);return}i!==null||r[x].disabled||(i=r[x])}i!==null&&(i.selected=!0)}}function Ru(r,i,c){if(i!=null&&(i=""+yn(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+yn(c):""}function wi(r,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(s(92));if($e(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=yn(i),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d),yt(r)}function Qn(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(r,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,c):typeof c!="number"||c===0||ku.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function Ql(r,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var x in i)d=i[x],i.hasOwnProperty(x)&&c[x]!==d&&Yl(r,x,d)}else for(var b in i)i.hasOwnProperty(b)&&Yl(r,b,i[b])}function _o(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wo(r){return Ei.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function zs(){}var Jl=null;function _s(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ti=null,hr=null;function Sa(r){var i=bs(r);if(i&&(r=i.stateNode)){var c=r[gn]||null;e:switch(r=i.stateNode,i.type){case"input":if(bo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Yn(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==r&&d.form===r.form){var x=d[gn]||null;if(!x)throw Error(s(90));bo(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===r.form&&Ta(d)}break e;case"textarea":Ru(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&_i(r,!!c.multiple,i,!1)}}}var Eo=!1;function Ni(r,i,c){if(Eo)return r(i,c);Eo=!0;try{var d=r(i);return d}finally{if(Eo=!1,(Ti!==null||hr!==null)&&(Nd(),Ti&&(i=Ti,r=hr,hr=Ti=null,Sa(i),r)))for(i=0;i<r.length;i++)Sa(r[i])}}function Fs(r,i){var c=r.stateNode;if(c===null)return null;var d=c[gn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aa=!1;if(ws)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Aa=!1}var fr=null,Xl=null,Ca=null;function Wl(){if(Ca)return Ca;var r,i=Xl,c=i.length,d,x="value"in fr?fr.value:fr.textContent,b=x.length;for(r=0;r<c&&i[r]===x[r];r++);var T=c-r;for(d=1;d<=T&&i[c-d]===x[b-d];d++);return Ca=x.slice(r,1<d?1-d:void 0)}function Ia(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Lr(){return!0}function Gs(){return!1}function _n(r){function i(c,d,x,b,T){this._reactName=c,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Lr:Gs,this.isPropagationStopped=Gs,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),i}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=_n(Vr),Si=_({},Vr,{view:0,detail:0}),Zl=_n(Si),Ai,To,pr,No=_({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==pr&&(pr&&r.type==="mousemove"?(Ai=r.screenX-pr.screenX,To=r.screenY-pr.screenY):To=Ai=0,pr=r),Ai)},movementY:function(r){return"movementY"in r?r.movementY:To}}),ec=_n(No),Ra=_({},No,{dataTransfer:0}),Du=_n(Ra),Pu=_({},Si,{relatedTarget:0}),ka=_n(Pu),tc=_({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=_n(tc),So=_({},Vr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Lu=_n(So),Vu=_({},Vr,{data:0}),gr=_n(Vu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=qu[r])?!!i[r]:!1}function Ci(){return zu}var Fn=_({},Si,{key:function(r){if(r.key){var i=Uu[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ia(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ou[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(r){return r.type==="keypress"?Ia(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ia(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fu=_n(Fn),Gu=_({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ur=_n(Gu),y=_({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),E=_n(y),N=_({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=_n(N),Y=_({},No,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),te=_n(Y),xe=_({},Vr,{newState:0,oldState:0}),qe=_n(xe),Yt=[9,13,27,32],ht=ws&&"CompositionEvent"in window,Pt=null;ws&&"documentMode"in document&&(Pt=document.documentMode);var Es=ws&&"TextEvent"in window&&!Pt,yr=ws&&(!ht||Pt&&8<Pt&&11>=Pt),Bs=" ",Hs=!1;function Ma(r,i){switch(r){case"keyup":return Yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ao(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Co=!1;function q2(r,i){switch(r){case"compositionend":return Ao(i);case"keypress":return i.which!==32?null:(Hs=!0,Bs);case"textInput":return r=i.data,r===Bs&&Hs?null:r;default:return null}}function z2(r,i){if(Co)return r==="compositionend"||!ht&&Ma(r,i)?(r=Wl(),Ca=Xl=fr=null,Co=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yr&&i.locale!=="ko"?null:i.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!F2[r.type]:i==="textarea"}function ly(r,i,c,d){Ti?hr?hr.push(d):hr=[d]:Ti=d,i=Md(i,"onChange"),0<i.length&&(c=new mr("onChange","change",null,c,d),r.push({event:c,listeners:i}))}var nc=null,sc=null;function G2(r){Bv(r,0)}function Bu(r){var i=os(r);if(Ta(i))return r}function cy(r,i){if(r==="change")return i}var uy=!1;if(ws){var If;if(ws){var Rf="oninput"in document;if(!Rf){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),Rf=typeof dy.oninput=="function"}If=Rf}else If=!1;uy=If&&(!document.documentMode||9<document.documentMode)}function hy(){nc&&(nc.detachEvent("onpropertychange",fy),sc=nc=null)}function fy(r){if(r.propertyName==="value"&&Bu(sc)){var i=[];ly(i,sc,r,_s(r)),Ni(G2,i)}}function B2(r,i,c){r==="focusin"?(hy(),nc=i,sc=c,nc.attachEvent("onpropertychange",fy)):r==="focusout"&&hy()}function H2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bu(sc)}function $2(r,i){if(r==="click")return Bu(i)}function K2(r,i){if(r==="input"||r==="change")return Bu(i)}function Y2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var cs=typeof Object.is=="function"?Object.is:Y2;function rc(r,i){if(cs(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var x=c[d];if(!mt.call(i,x)||!cs(r[x],i[x]))return!1}return!0}function my(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function py(r,i){var c=my(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=i&&d>=i)return{node:c,offset:i-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=my(c)}}function gy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?gy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function yy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=dr(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=dr(r.document)}return i}function kf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Q2=ws&&"documentMode"in document&&11>=document.documentMode,Io=null,Mf=null,ic=null,Df=!1;function xy(r,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Df||Io==null||Io!==dr(d)||(d=Io,"selectionStart"in d&&kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ic&&rc(ic,d)||(ic=d,d=Md(Mf,"onSelect"),0<d.length&&(i=new mr("onSelect","select",null,i,c),r.push({event:i,listeners:d}),i.target=Io)))}function Da(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var Ro={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Pf={},vy={};ws&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Pa(r){if(Pf[r])return Pf[r];if(!Ro[r])return r;var i=Ro[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in vy)return Pf[r]=i[c];return r}var by=Pa("animationend"),_y=Pa("animationiteration"),wy=Pa("animationstart"),J2=Pa("transitionrun"),X2=Pa("transitionstart"),W2=Pa("transitioncancel"),Ey=Pa("transitionend"),Ty=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function $s(r,i){Ty.set(r,i),cr(i,[r])}var Hu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ts=[],ko=0,Lf=0;function $u(){for(var r=ko,i=Lf=ko=0;i<r;){var c=Ts[i];Ts[i++]=null;var d=Ts[i];Ts[i++]=null;var x=Ts[i];Ts[i++]=null;var b=Ts[i];if(Ts[i++]=null,d!==null&&x!==null){var T=d.pending;T===null?x.next=x:(x.next=T.next,T.next=x),d.pending=x}b!==0&&Ny(c,x,b)}}function Ku(r,i,c,d){Ts[ko++]=r,Ts[ko++]=i,Ts[ko++]=c,Ts[ko++]=d,Lf|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Vf(r,i,c,d){return Ku(r,i,c,d),Yu(r)}function ja(r,i){return Ku(r,null,null,i),Yu(r)}function Ny(r,i,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var x=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(x=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,x&&i!==null&&(x=31-bt(c),r=b.hiddenUpdates,d=r[x],d===null?r[x]=[i]:d.push(i),i.lane=c|536870912),b):null}function Yu(r){if(50<Ac)throw Ac=0,$m=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Mo={};function Z2(r,i,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(r,i,c,d){return new Z2(r,i,c,d)}function Uf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Or(r,i){var c=r.alternate;return c===null?(c=us(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Sy(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Qu(r,i,c,d,x,b){var T=0;if(d=r,typeof r=="function")Uf(r)&&(T=1);else if(typeof r=="string")T=rA(r,c,ne.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=us(31,c,i,x),r.elementType=I,r.lanes=b,r;case P:return La(c.children,x,b,i);case B:T=8,x|=24;break;case K:return r=us(12,c,i,x|2),r.elementType=K,r.lanes=b,r;case W:return r=us(13,c,i,x),r.elementType=W,r.lanes=b,r;case G:return r=us(19,c,i,x),r.elementType=G,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:T=10;break e;case re:T=9;break e;case ie:T=11;break e;case C:T=14;break e;case R:T=16,d=null;break e}T=29,c=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=us(T,c,i,x),i.elementType=r,i.type=d,i.lanes=b,i}function La(r,i,c,d){return r=us(7,r,d,i),r.lanes=c,r}function Of(r,i,c){return r=us(6,r,null,i),r.lanes=c,r}function Ay(r){var i=us(18,null,null,0);return i.stateNode=r,i}function qf(r,i,c){return i=us(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Cy=new WeakMap;function Ns(r,i){if(typeof r=="object"&&r!==null){var c=Cy.get(r);return c!==void 0?c:(i={value:r,source:i,stack:sr(i)},Cy.set(r,i),i)}return{value:r,source:i,stack:sr(i)}}var Do=[],Po=0,Ju=null,ac=0,Ss=[],As=0,Ii=null,xr=1,vr="";function qr(r,i){Do[Po++]=ac,Do[Po++]=Ju,Ju=r,ac=i}function Iy(r,i,c){Ss[As++]=xr,Ss[As++]=vr,Ss[As++]=Ii,Ii=r;var d=xr;r=vr;var x=32-bt(d)-1;d&=~(1<<x),c+=1;var b=32-bt(i)+x;if(30<b){var T=x-x%5;b=(d&(1<<T)-1).toString(32),d>>=T,x-=T,xr=1<<32-bt(i)+x|c<<x|d,vr=b+r}else xr=1<<b|c<<x|d,vr=r}function zf(r){r.return!==null&&(qr(r,1),Iy(r,1,0))}function Ff(r){for(;r===Ju;)Ju=Do[--Po],Do[Po]=null,ac=Do[--Po],Do[Po]=null;for(;r===Ii;)Ii=Ss[--As],Ss[As]=null,vr=Ss[--As],Ss[As]=null,xr=Ss[--As],Ss[As]=null}function Ry(r,i){Ss[As++]=xr,Ss[As++]=vr,Ss[As++]=Ii,xr=i.id,vr=i.overflow,Ii=r}var wn=null,Rt=null,tt=!1,Ri=null,Cs=!1,Gf=Error(s(519));function ki(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(Ns(i,r)),Gf}function ky(r){var i=r.stateNode,c=r.type,d=r.memoizedProps;switch(i[en]=r,i[gn]=d,c){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(c=0;c<Ic.length;c++)Ye(Ic[c],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),Iu(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),wi(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||Yv(i.textContent,c)?(d.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),d.onScroll!=null&&Ye("scroll",i),d.onScrollEnd!=null&&Ye("scrollend",i),d.onClick!=null&&(i.onclick=zs),i=!0):i=!1,i||ki(r,!0)}function My(r){for(wn=r.return;wn;)switch(wn.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:wn=wn.return}}function jo(r){if(r!==wn)return!1;if(!tt)return My(r),tt=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||op(r.type,r.memoizedProps)),c=!c),c&&Rt&&ki(r),My(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Rt=sb(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Rt=sb(r)}else i===27?(i=Rt,Hi(r.type)?(r=hp,hp=null,Rt=r):Rt=i):Rt=wn?Rs(r.stateNode.nextSibling):null;return!0}function Va(){Rt=wn=null,tt=!1}function Bf(){var r=Ri;return r!==null&&(Zn===null?Zn=r:Zn.push.apply(Zn,r),Ri=null),r}function oc(r){Ri===null?Ri=[r]:Ri.push(r)}var Hf=q(null),Ua=null,zr=null;function Mi(r,i,c){O(Hf,i._currentValue),i._currentValue=c}function Fr(r){r._currentValue=Hf.current,J(Hf)}function $f(r,i,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===c)break;r=r.return}}function Kf(r,i,c,d){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var b=x.dependencies;if(b!==null){var T=x.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=x;for(var L=0;L<i.length;L++)if(A.context===i[L]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),$f(b.return,c,r),d||(T=null);break e}b=A.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(s(341));T.lanes|=c,b=T.alternate,b!==null&&(b.lanes|=c),$f(T,c,r),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===r){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function Lo(r,i,c,d){r=null;for(var x=i,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=x.type;cs(x.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(x===je.current){if(T=x.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(Pc):r=[Pc])}x=x.return}r!==null&&Kf(i,r,c,d),i.flags|=262144}function Xu(r){for(r=r.firstContext;r!==null;){if(!cs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Oa(r){Ua=r,zr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function En(r){return Dy(Ua,r)}function Wu(r,i){return Ua===null&&Oa(r),Dy(r,i)}function Dy(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},zr===null){if(r===null)throw Error(s(308));zr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else zr=zr.next=i;return c}var eS=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},tS=n.unstable_scheduleCallback,nS=n.unstable_NormalPriority,sn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new eS,data:new Map,refCount:0}}function lc(r){r.refCount--,r.refCount===0&&tS(nS,function(){r.controller.abort()})}var cc=null,Qf=0,Vo=0,Uo=null;function sS(r,i){if(cc===null){var c=cc=[];Qf=0,Vo=Wm(),Uo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Qf++,i.then(Py,Py),i}function Py(){if(--Qf===0&&cc!==null){Uo!==null&&(Uo.status="fulfilled");var r=cc;cc=null,Vo=0,Uo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function rS(r,i){var c=[],d={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var x=0;x<c.length;x++)(0,c[x])(i)},function(x){for(d.status="rejected",d.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),d}var jy=ee.S;ee.S=function(r,i){xv=dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&sS(r,i),jy!==null&&jy(r,i)};var qa=q(null);function Jf(){var r=qa.current;return r!==null?r:At.pooledCache}function Zu(r,i){i===null?O(qa,qa.current):O(qa,i.pool)}function Ly(){var r=Jf();return r===null?null:{parent:sn._currentValue,pool:r}}var Oo=Error(s(460)),Xf=Error(s(474)),ed=Error(s(542)),td={then:function(){}};function Vy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Uy(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(zs,zs),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,qy(r),r;default:if(typeof i.status=="string")i.then(zs,zs);else{if(r=At,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var x=i;x.status="fulfilled",x.value=d}},function(d){if(i.status==="pending"){var x=i;x.status="rejected",x.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,qy(r),r}throw Fa=i,Oo}}function za(r){try{var i=r._init;return i(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Fa=c,Oo):c}}var Fa=null;function Oy(){if(Fa===null)throw Error(s(459));var r=Fa;return Fa=null,r}function qy(r){if(r===Oo||r===ed)throw Error(s(483))}var qo=null,uc=0;function nd(r){var i=uc;return uc+=1,qo===null&&(qo=[]),Uy(qo,r,i)}function dc(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function sd(r,i){throw i.$$typeof===w?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function zy(r){function i(H,z){if(r){var Q=H.deletions;Q===null?(H.deletions=[z],H.flags|=16):Q.push(z)}}function c(H,z){if(!r)return null;for(;z!==null;)i(H,z),z=z.sibling;return null}function d(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function x(H,z){return H=Or(H,z),H.index=0,H.sibling=null,H}function b(H,z,Q){return H.index=Q,r?(Q=H.alternate,Q!==null?(Q=Q.index,Q<z?(H.flags|=67108866,z):Q):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function T(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function A(H,z,Q,oe){return z===null||z.tag!==6?(z=Of(Q,H.mode,oe),z.return=H,z):(z=x(z,Q),z.return=H,z)}function L(H,z,Q,oe){var Ae=Q.type;return Ae===P?ae(H,z,Q.props.children,oe,Q.key):z!==null&&(z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&za(Ae)===z.type)?(z=x(z,Q.props),dc(z,Q),z.return=H,z):(z=Qu(Q.type,Q.key,Q.props,null,H.mode,oe),dc(z,Q),z.return=H,z)}function X(H,z,Q,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=qf(Q,H.mode,oe),z.return=H,z):(z=x(z,Q.children||[]),z.return=H,z)}function ae(H,z,Q,oe,Ae){return z===null||z.tag!==7?(z=La(Q,H.mode,oe,Ae),z.return=H,z):(z=x(z,Q),z.return=H,z)}function ce(H,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Of(""+z,H.mode,Q),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return Q=Qu(z.type,z.key,z.props,null,H.mode,Q),dc(Q,z),Q.return=H,Q;case V:return z=qf(z,H.mode,Q),z.return=H,z;case R:return z=za(z),ce(H,z,Q)}if($e(z)||U(z))return z=La(z,H.mode,Q,null),z.return=H,z;if(typeof z.then=="function")return ce(H,nd(z),Q);if(z.$$typeof===$)return ce(H,Wu(H,z),Q);sd(H,z)}return null}function Z(H,z,Q,oe){var Ae=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ae!==null?null:A(H,z,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===Ae?L(H,z,Q,oe):null;case V:return Q.key===Ae?X(H,z,Q,oe):null;case R:return Q=za(Q),Z(H,z,Q,oe)}if($e(Q)||U(Q))return Ae!==null?null:ae(H,z,Q,oe,null);if(typeof Q.then=="function")return Z(H,z,nd(Q),oe);if(Q.$$typeof===$)return Z(H,z,Wu(H,Q),oe);sd(H,Q)}return null}function se(H,z,Q,oe,Ae){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(Q)||null,A(z,H,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return H=H.get(oe.key===null?Q:oe.key)||null,L(z,H,oe,Ae);case V:return H=H.get(oe.key===null?Q:oe.key)||null,X(z,H,oe,Ae);case R:return oe=za(oe),se(H,z,Q,oe,Ae)}if($e(oe)||U(oe))return H=H.get(Q)||null,ae(z,H,oe,Ae,null);if(typeof oe.then=="function")return se(H,z,Q,nd(oe),Ae);if(oe.$$typeof===$)return se(H,z,Q,Wu(z,oe),Ae);sd(z,oe)}return null}function we(H,z,Q,oe){for(var Ae=null,ot=null,Te=z,Ge=z=0,Xe=null;Te!==null&&Ge<Q.length;Ge++){Te.index>Ge?(Xe=Te,Te=null):Xe=Te.sibling;var lt=Z(H,Te,Q[Ge],oe);if(lt===null){Te===null&&(Te=Xe);break}r&&Te&&lt.alternate===null&&i(H,Te),z=b(lt,z,Ge),ot===null?Ae=lt:ot.sibling=lt,ot=lt,Te=Xe}if(Ge===Q.length)return c(H,Te),tt&&qr(H,Ge),Ae;if(Te===null){for(;Ge<Q.length;Ge++)Te=ce(H,Q[Ge],oe),Te!==null&&(z=b(Te,z,Ge),ot===null?Ae=Te:ot.sibling=Te,ot=Te);return tt&&qr(H,Ge),Ae}for(Te=d(Te);Ge<Q.length;Ge++)Xe=se(Te,H,Ge,Q[Ge],oe),Xe!==null&&(r&&Xe.alternate!==null&&Te.delete(Xe.key===null?Ge:Xe.key),z=b(Xe,z,Ge),ot===null?Ae=Xe:ot.sibling=Xe,ot=Xe);return r&&Te.forEach(function(Ji){return i(H,Ji)}),tt&&qr(H,Ge),Ae}function ke(H,z,Q,oe){if(Q==null)throw Error(s(151));for(var Ae=null,ot=null,Te=z,Ge=z=0,Xe=null,lt=Q.next();Te!==null&&!lt.done;Ge++,lt=Q.next()){Te.index>Ge?(Xe=Te,Te=null):Xe=Te.sibling;var Ji=Z(H,Te,lt.value,oe);if(Ji===null){Te===null&&(Te=Xe);break}r&&Te&&Ji.alternate===null&&i(H,Te),z=b(Ji,z,Ge),ot===null?Ae=Ji:ot.sibling=Ji,ot=Ji,Te=Xe}if(lt.done)return c(H,Te),tt&&qr(H,Ge),Ae;if(Te===null){for(;!lt.done;Ge++,lt=Q.next())lt=ce(H,lt.value,oe),lt!==null&&(z=b(lt,z,Ge),ot===null?Ae=lt:ot.sibling=lt,ot=lt);return tt&&qr(H,Ge),Ae}for(Te=d(Te);!lt.done;Ge++,lt=Q.next())lt=se(Te,H,Ge,lt.value,oe),lt!==null&&(r&&lt.alternate!==null&&Te.delete(lt.key===null?Ge:lt.key),z=b(lt,z,Ge),ot===null?Ae=lt:ot.sibling=lt,ot=lt);return r&&Te.forEach(function(pA){return i(H,pA)}),tt&&qr(H,Ge),Ae}function Tt(H,z,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:e:{for(var Ae=Q.key;z!==null;){if(z.key===Ae){if(Ae=Q.type,Ae===P){if(z.tag===7){c(H,z.sibling),oe=x(z,Q.props.children),oe.return=H,H=oe;break e}}else if(z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&za(Ae)===z.type){c(H,z.sibling),oe=x(z,Q.props),dc(oe,Q),oe.return=H,H=oe;break e}c(H,z);break}else i(H,z);z=z.sibling}Q.type===P?(oe=La(Q.props.children,H.mode,oe,Q.key),oe.return=H,H=oe):(oe=Qu(Q.type,Q.key,Q.props,null,H.mode,oe),dc(oe,Q),oe.return=H,H=oe)}return T(H);case V:e:{for(Ae=Q.key;z!==null;){if(z.key===Ae)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){c(H,z.sibling),oe=x(z,Q.children||[]),oe.return=H,H=oe;break e}else{c(H,z);break}else i(H,z);z=z.sibling}oe=qf(Q,H.mode,oe),oe.return=H,H=oe}return T(H);case R:return Q=za(Q),Tt(H,z,Q,oe)}if($e(Q))return we(H,z,Q,oe);if(U(Q)){if(Ae=U(Q),typeof Ae!="function")throw Error(s(150));return Q=Ae.call(Q),ke(H,z,Q,oe)}if(typeof Q.then=="function")return Tt(H,z,nd(Q),oe);if(Q.$$typeof===$)return Tt(H,z,Wu(H,Q),oe);sd(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(c(H,z.sibling),oe=x(z,Q),oe.return=H,H=oe):(c(H,z),oe=Of(Q,H.mode,oe),oe.return=H,H=oe),T(H)):c(H,z)}return function(H,z,Q,oe){try{uc=0;var Ae=Tt(H,z,Q,oe);return qo=null,Ae}catch(Te){if(Te===Oo||Te===ed)throw Te;var ot=us(29,Te,null,H.mode);return ot.lanes=oe,ot.return=H,ot}finally{}}}var Ga=zy(!0),Fy=zy(!1),Di=!1;function Wf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Pi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ji(r,i,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ft&2)!==0){var x=d.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),d.pending=i,i=Yu(r),Ny(r,null,c),i}return Ku(r,d,i,c),Yu(r)}function hc(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Rn(r,c)}}function em(r,i){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var x=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?x=b=T:b=b.next=T,c=c.next}while(c!==null);b===null?x=b=i:b=b.next=i}else x=b=i;c={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var tm=!1;function fc(){if(tm){var r=Uo;if(r!==null)throw r}}function mc(r,i,c,d){tm=!1;var x=r.updateQueue;Di=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,X=L.next;L.next=null,T===null?b=X:T.next=X,T=L;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==T&&(A===null?ae.firstBaseUpdate=X:A.next=X,ae.lastBaseUpdate=L))}if(b!==null){var ce=x.baseState;T=0,ae=X=L=null,A=b;do{var Z=A.lane&-536870913,se=Z!==A.lane;if(se?(Je&Z)===Z:(d&Z)===Z){Z!==0&&Z===Vo&&(tm=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var we=r,ke=A;Z=i;var Tt=c;switch(ke.tag){case 1:if(we=ke.payload,typeof we=="function"){ce=we.call(Tt,ce,Z);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ke.payload,Z=typeof we=="function"?we.call(Tt,ce,Z):we,Z==null)break e;ce=_({},ce,Z);break e;case 2:Di=!0}}Z=A.callback,Z!==null&&(r.flags|=64,se&&(r.flags|=8192),se=x.callbacks,se===null?x.callbacks=[Z]:se.push(Z))}else se={lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(X=ae=se,L=ce):ae=ae.next=se,T|=Z;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;se=A,A=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);ae===null&&(L=ce),x.baseState=L,x.firstBaseUpdate=X,x.lastBaseUpdate=ae,b===null&&(x.shared.lanes=0),qi|=T,r.lanes=T,r.memoizedState=ce}}function Gy(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function By(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Gy(c[r],i)}var zo=q(null),rd=q(0);function Hy(r,i){r=Xr,O(rd,r),O(zo,i),Xr=r|i.baseLanes}function nm(){O(rd,Xr),O(zo,zo.current)}function sm(){Xr=rd.current,J(zo),J(rd)}var ds=q(null),Is=null;function Li(r){var i=r.alternate;O(Qt,Qt.current&1),O(ds,r),Is===null&&(i===null||zo.current!==null||i.memoizedState!==null)&&(Is=r)}function rm(r){O(Qt,Qt.current),O(ds,r),Is===null&&(Is=r)}function $y(r){r.tag===22?(O(Qt,Qt.current),O(ds,r),Is===null&&(Is=r)):Vi()}function Vi(){O(Qt,Qt.current),O(ds,ds.current)}function hs(r){J(ds),Is===r&&(Is=null),J(Qt)}var Qt=q(0);function id(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||up(c)||dp(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Gr=0,ze=null,wt=null,rn=null,ad=!1,Fo=!1,Ba=!1,od=0,pc=0,Go=null,iS=0;function qt(){throw Error(s(321))}function im(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!cs(r[c],i[c]))return!1;return!0}function am(r,i,c,d,x,b){return Gr=b,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ee.H=r===null||r.memoizedState===null?Ix:_m,Ba=!1,b=c(d,x),Ba=!1,Fo&&(b=Yy(i,c,d,x)),Ky(r),b}function Ky(r){ee.H=xc;var i=wt!==null&&wt.next!==null;if(Gr=0,rn=wt=ze=null,ad=!1,pc=0,Go=null,i)throw Error(s(300));r===null||an||(r=r.dependencies,r!==null&&Xu(r)&&(an=!0))}function Yy(r,i,c,d){ze=r;var x=0;do{if(Fo&&(Go=null),pc=0,Fo=!1,25<=x)throw Error(s(301));if(x+=1,rn=wt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ee.H=Rx,b=i(c,d)}while(Fo);return b}function aS(){var r=ee.H,i=r.useState()[0];return i=typeof i.then=="function"?gc(i):i,r=r.useState()[0],(wt!==null?wt.memoizedState:null)!==r&&(ze.flags|=1024),i}function om(){var r=od!==0;return od=0,r}function lm(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function cm(r){if(ad){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ad=!1}Gr=0,rn=wt=ze=null,Fo=!1,pc=od=0,Go=null}function Gn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?ze.memoizedState=rn=r:rn=rn.next=r,rn}function Jt(){if(wt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var i=rn===null?ze.memoizedState:rn.next;if(i!==null)rn=i,wt=r;else{if(r===null)throw ze.alternate===null?Error(s(467)):Error(s(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},rn===null?ze.memoizedState=rn=r:rn=rn.next=r}return rn}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(r){var i=pc;return pc+=1,Go===null&&(Go=[]),r=Uy(Go,r,i),i=ze,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,ee.H=i===null||i.memoizedState===null?Ix:_m),r}function cd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gc(r);if(r.$$typeof===$)return En(r)}throw Error(s(438,String(r)))}function um(r){var i=null,c=ze.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(x){return x.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=ld(),ze.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),d=0;d<r;d++)c[d]=D;return i.index++,c}function Br(r,i){return typeof i=="function"?i(r):i}function ud(r){var i=Jt();return dm(i,wt,r)}function dm(r,i,c){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var x=r.baseQueue,b=d.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}i.baseQueue=x=b,d.pending=null}if(b=r.baseState,x===null)r.memoizedState=b;else{i=x.next;var A=T=null,L=null,X=i,ae=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(Je&ce)===ce:(Gr&ce)===ce){var Z=X.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Vo&&(ae=!0);else if((Gr&Z)===Z){X=X.next,Z===Vo&&(ae=!0);continue}else ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(A=L=ce,T=b):L=L.next=ce,ze.lanes|=Z,qi|=Z;ce=X.action,Ba&&c(b,ce),b=X.hasEagerState?X.eagerState:c(b,ce)}else Z={lane:ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(A=L=Z,T=b):L=L.next=Z,ze.lanes|=ce,qi|=ce;X=X.next}while(X!==null&&X!==i);if(L===null?T=b:L.next=A,!cs(b,r.memoizedState)&&(an=!0,ae&&(c=Uo,c!==null)))throw c;r.memoizedState=b,r.baseState=T,r.baseQueue=L,d.lastRenderedState=b}return x===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function hm(r){var i=Jt(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var d=c.dispatch,x=c.pending,b=i.memoizedState;if(x!==null){c.pending=null;var T=x=x.next;do b=r(b,T.action),T=T.next;while(T!==x);cs(b,i.memoizedState)||(an=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),c.lastRenderedState=b}return[b,d]}function Qy(r,i,c){var d=ze,x=Jt(),b=tt;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=i();var T=!cs((wt||x).memoizedState,c);if(T&&(x.memoizedState=c,an=!0),x=x.queue,pm(Wy.bind(null,d,x,r),[r]),x.getSnapshot!==i||T||rn!==null&&rn.memoizedState.tag&1){if(d.flags|=2048,Bo(9,{destroy:void 0},Xy.bind(null,d,x,c,i),null),At===null)throw Error(s(349));b||(Gr&127)!==0||Jy(d,i,c)}return c}function Jy(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=ze.updateQueue,i===null?(i=ld(),ze.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Xy(r,i,c,d){i.value=c,i.getSnapshot=d,Zy(i)&&ex(r)}function Wy(r,i,c){return c(function(){Zy(i)&&ex(r)})}function Zy(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!cs(r,c)}catch{return!0}}function ex(r){var i=ja(r,2);i!==null&&es(i,r,2)}function fm(r){var i=Gn();if(typeof r=="function"){var c=r;if(r=c(),Ba){Zt(!0);try{c()}finally{Zt(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:r},i}function tx(r,i,c,d){return r.baseState=c,dm(r,wt,typeof d=="function"?d:Br)}function oS(r,i,c,d,x){if(fd(r))throw Error(s(485));if(r=i.action,r!==null){var b={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};ee.T!==null?c(!0):b.isTransition=!1,d(b),c=i.pending,c===null?(b.next=i.pending=b,nx(i,b)):(b.next=c.next,i.pending=c.next=b)}}function nx(r,i){var c=i.action,d=i.payload,x=r.state;if(i.isTransition){var b=ee.T,T={};ee.T=T;try{var A=c(x,d),L=ee.S;L!==null&&L(T,A),sx(r,i,A)}catch(X){mm(r,i,X)}finally{b!==null&&T.types!==null&&(b.types=T.types),ee.T=b}}else try{b=c(x,d),sx(r,i,b)}catch(X){mm(r,i,X)}}function sx(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){rx(r,i,d)},function(d){return mm(r,i,d)}):rx(r,i,c)}function rx(r,i,c){i.status="fulfilled",i.value=c,ix(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,nx(r,c)))}function mm(r,i,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,ix(i),i=i.next;while(i!==d)}r.action=null}function ix(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function ax(r,i){return i}function ox(r,i){if(tt){var c=At.formState;if(c!==null){e:{var d=ze;if(tt){if(Rt){t:{for(var x=Rt,b=Cs;x.nodeType!==8;){if(!b){x=null;break t}if(x=Rs(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){Rt=Rs(x.nextSibling),d=x.data==="F!";break e}}ki(d)}d=!1}d&&(i=c[0])}}return c=Gn(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ax,lastRenderedState:i},c.queue=d,c=Sx.bind(null,ze,d),d.dispatch=c,d=fm(!1),b=bm.bind(null,ze,!1,d.queue),d=Gn(),x={state:i,dispatch:null,action:r,pending:null},d.queue=x,c=oS.bind(null,ze,x,b,c),x.dispatch=c,d.memoizedState=r,[i,c,!1]}function lx(r){var i=Jt();return cx(i,wt,r)}function cx(r,i,c){if(i=dm(r,i,ax)[0],r=ud(Br)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=gc(i)}catch(T){throw T===Oo?ed:T}else d=i;i=Jt();var x=i.queue,b=x.dispatch;return c!==i.memoizedState&&(ze.flags|=2048,Bo(9,{destroy:void 0},lS.bind(null,x,c),null)),[d,b,r]}function lS(r,i){r.action=i}function ux(r){var i=Jt(),c=wt;if(c!==null)return cx(i,c,r);Jt(),i=i.memoizedState,c=Jt();var d=c.queue.dispatch;return c.memoizedState=r,[i,d,!1]}function Bo(r,i,c,d){return r={tag:r,create:c,deps:d,inst:i,next:null},i=ze.updateQueue,i===null&&(i=ld(),ze.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,i.lastEffect=r),r}function dx(){return Jt().memoizedState}function dd(r,i,c,d){var x=Gn();ze.flags|=r,x.memoizedState=Bo(1|i,{destroy:void 0},c,d===void 0?null:d)}function hd(r,i,c,d){var x=Jt();d=d===void 0?null:d;var b=x.memoizedState.inst;wt!==null&&d!==null&&im(d,wt.memoizedState.deps)?x.memoizedState=Bo(i,b,c,d):(ze.flags|=r,x.memoizedState=Bo(1|i,b,c,d))}function hx(r,i){dd(8390656,8,r,i)}function pm(r,i){hd(2048,8,r,i)}function cS(r){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=ld(),ze.updateQueue=i,i.events=[r];else{var c=i.events;c===null?i.events=[r]:c.push(r)}}function fx(r){var i=Jt().memoizedState;return cS({ref:i,nextImpl:r}),function(){if((ft&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function mx(r,i){return hd(4,2,r,i)}function px(r,i){return hd(4,4,r,i)}function gx(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function yx(r,i,c){c=c!=null?c.concat([r]):null,hd(4,4,gx.bind(null,i,r),c)}function gm(){}function xx(r,i){var c=Jt();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&im(i,d[1])?d[0]:(c.memoizedState=[r,i],r)}function vx(r,i){var c=Jt();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&im(i,d[1]))return d[0];if(d=r(),Ba){Zt(!0);try{r()}finally{Zt(!1)}}return c.memoizedState=[d,i],d}function ym(r,i,c){return c===void 0||(Gr&1073741824)!==0&&(Je&261930)===0?r.memoizedState=i:(r.memoizedState=c,r=bv(),ze.lanes|=r,qi|=r,c)}function bx(r,i,c,d){return cs(c,i)?c:zo.current!==null?(r=ym(r,c,d),cs(r,i)||(an=!0),r):(Gr&42)===0||(Gr&1073741824)!==0&&(Je&261930)===0?(an=!0,r.memoizedState=c):(r=bv(),ze.lanes|=r,qi|=r,i)}function _x(r,i,c,d,x){var b=pe.p;pe.p=b!==0&&8>b?b:8;var T=ee.T,A={};ee.T=A,bm(r,!1,i,c);try{var L=x(),X=ee.S;if(X!==null&&X(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=rS(L,d);yc(r,i,ae,ps(r))}else yc(r,i,d,ps(r))}catch(ce){yc(r,i,{then:function(){},status:"rejected",reason:ce},ps())}finally{pe.p=b,T!==null&&A.types!==null&&(T.types=A.types),ee.T=T}}function uS(){}function xm(r,i,c,d){if(r.tag!==5)throw Error(s(476));var x=wx(r).queue;_x(r,x,i,he,c===null?uS:function(){return Ex(r),c(d)})}function wx(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:he},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Ex(r){var i=wx(r);i.next===null&&(i=r.alternate.memoizedState),yc(r,i.next.queue,{},ps())}function vm(){return En(Pc)}function Tx(){return Jt().memoizedState}function Nx(){return Jt().memoizedState}function dS(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=ps();r=Pi(c);var d=ji(i,r,c);d!==null&&(es(d,i,c),hc(d,i,c)),i={cache:Yf()},r.payload=i;return}i=i.return}}function hS(r,i,c){var d=ps();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},fd(r)?Ax(i,c):(c=Vf(r,i,c,d),c!==null&&(es(c,r,d),Cx(c,i,d)))}function Sx(r,i,c){var d=ps();yc(r,i,c,d)}function yc(r,i,c,d){var x={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(fd(r))Ax(i,x);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var T=i.lastRenderedState,A=b(T,c);if(x.hasEagerState=!0,x.eagerState=A,cs(A,T))return Ku(r,i,x,0),At===null&&$u(),!1}catch{}finally{}if(c=Vf(r,i,x,d),c!==null)return es(c,r,d),Cx(c,i,d),!0}return!1}function bm(r,i,c,d){if(d={lane:2,revertLane:Wm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},fd(r)){if(i)throw Error(s(479))}else i=Vf(r,c,d,2),i!==null&&es(i,r,2)}function fd(r){var i=r.alternate;return r===ze||i!==null&&i===ze}function Ax(r,i){Fo=ad=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function Cx(r,i,c){if((c&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Rn(r,c)}}var xc={readContext:En,use:cd,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};xc.useEffectEvent=qt;var Ix={readContext:En,use:cd,useCallback:function(r,i){return Gn().memoizedState=[r,i===void 0?null:i],r},useContext:En,useEffect:hx,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,dd(4194308,4,gx.bind(null,i,r),c)},useLayoutEffect:function(r,i){return dd(4194308,4,r,i)},useInsertionEffect:function(r,i){dd(4,2,r,i)},useMemo:function(r,i){var c=Gn();i=i===void 0?null:i;var d=r();if(Ba){Zt(!0);try{r()}finally{Zt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(r,i,c){var d=Gn();if(c!==void 0){var x=c(i);if(Ba){Zt(!0);try{c(i)}finally{Zt(!1)}}}else x=i;return d.memoizedState=d.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},d.queue=r,r=r.dispatch=hS.bind(null,ze,r),[d.memoizedState,r]},useRef:function(r){var i=Gn();return r={current:r},i.memoizedState=r},useState:function(r){r=fm(r);var i=r.queue,c=Sx.bind(null,ze,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:gm,useDeferredValue:function(r,i){var c=Gn();return ym(c,r,i)},useTransition:function(){var r=fm(!1);return r=_x.bind(null,ze,r.queue,!0,!1),Gn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var d=ze,x=Gn();if(tt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),At===null)throw Error(s(349));(Je&127)!==0||Jy(d,i,c)}x.memoizedState=c;var b={value:c,getSnapshot:i};return x.queue=b,hx(Wy.bind(null,d,b,r),[r]),d.flags|=2048,Bo(9,{destroy:void 0},Xy.bind(null,d,b,c,i),null),c},useId:function(){var r=Gn(),i=At.identifierPrefix;if(tt){var c=vr,d=xr;c=(d&~(1<<32-bt(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=od++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=iS++,i="_"+i+"r_"+c.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:vm,useFormState:ox,useActionState:ox,useOptimistic:function(r){var i=Gn();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=bm.bind(null,ze,!0,c),c.dispatch=i,[r,i]},useMemoCache:um,useCacheRefresh:function(){return Gn().memoizedState=dS.bind(null,ze)},useEffectEvent:function(r){var i=Gn(),c={impl:r};return i.memoizedState=c,function(){if((ft&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},_m={readContext:En,use:cd,useCallback:xx,useContext:En,useEffect:pm,useImperativeHandle:yx,useInsertionEffect:mx,useLayoutEffect:px,useMemo:vx,useReducer:ud,useRef:dx,useState:function(){return ud(Br)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Jt();return bx(c,wt.memoizedState,r,i)},useTransition:function(){var r=ud(Br)[0],i=Jt().memoizedState;return[typeof r=="boolean"?r:gc(r),i]},useSyncExternalStore:Qy,useId:Tx,useHostTransitionStatus:vm,useFormState:lx,useActionState:lx,useOptimistic:function(r,i){var c=Jt();return tx(c,wt,r,i)},useMemoCache:um,useCacheRefresh:Nx};_m.useEffectEvent=fx;var Rx={readContext:En,use:cd,useCallback:xx,useContext:En,useEffect:pm,useImperativeHandle:yx,useInsertionEffect:mx,useLayoutEffect:px,useMemo:vx,useReducer:hm,useRef:dx,useState:function(){return hm(Br)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Jt();return wt===null?ym(c,r,i):bx(c,wt.memoizedState,r,i)},useTransition:function(){var r=hm(Br)[0],i=Jt().memoizedState;return[typeof r=="boolean"?r:gc(r),i]},useSyncExternalStore:Qy,useId:Tx,useHostTransitionStatus:vm,useFormState:ux,useActionState:ux,useOptimistic:function(r,i){var c=Jt();return wt!==null?tx(c,wt,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:um,useCacheRefresh:Nx};Rx.useEffectEvent=fx;function wm(r,i,c,d){i=r.memoizedState,c=c(d,i),c=c==null?i:_({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Em={enqueueSetState:function(r,i,c){r=r._reactInternals;var d=ps(),x=Pi(d);x.payload=i,c!=null&&(x.callback=c),i=ji(r,x,d),i!==null&&(es(i,r,d),hc(i,r,d))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var d=ps(),x=Pi(d);x.tag=1,x.payload=i,c!=null&&(x.callback=c),i=ji(r,x,d),i!==null&&(es(i,r,d),hc(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=ps(),d=Pi(c);d.tag=2,i!=null&&(d.callback=i),i=ji(r,d,c),i!==null&&(es(i,r,c),hc(i,r,c))}};function kx(r,i,c,d,x,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,T):i.prototype&&i.prototype.isPureReactComponent?!rc(c,d)||!rc(x,b):!0}function Mx(r,i,c,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==r&&Em.enqueueReplaceState(i,i.state,null)}function Ha(r,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(r=r.defaultProps){c===i&&(c=_({},c));for(var x in r)c[x]===void 0&&(c[x]=r[x])}return c}function Dx(r){Hu(r)}function Px(r){console.error(r)}function jx(r){Hu(r)}function md(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Lx(r,i,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Tm(r,i,c){return c=Pi(c),c.tag=3,c.payload={element:null},c.callback=function(){md(r,i)},c}function Vx(r){return r=Pi(r),r.tag=3,r}function Ux(r,i,c,d){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;r.payload=function(){return x(b)},r.callback=function(){Lx(i,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){Lx(i,c,d),typeof x!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function fS(r,i,c,d,x){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Lo(i,c,x,!0),c=ds.current,c!==null){switch(c.tag){case 31:case 13:return Is===null?Sd():c.alternate===null&&zt===0&&(zt=3),c.flags&=-257,c.flags|=65536,c.lanes=x,d===td?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),Qm(r,d,x)),!1;case 22:return c.flags|=65536,d===td?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),Qm(r,d,x)),!1}throw Error(s(435,c.tag))}return Qm(r,d,x),Sd(),!1}if(tt)return i=ds.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=x,d!==Gf&&(r=Error(s(422),{cause:d}),oc(Ns(r,c)))):(d!==Gf&&(i=Error(s(423),{cause:d}),oc(Ns(i,c))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,d=Ns(d,c),x=Tm(r.stateNode,d,x),em(r,x),zt!==4&&(zt=2)),!1;var b=Error(s(520),{cause:d});if(b=Ns(b,c),Sc===null?Sc=[b]:Sc.push(b),zt!==4&&(zt=2),i===null)return!0;d=Ns(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=x&-x,c.lanes|=r,r=Tm(c.stateNode,d,r),em(c,r),!1;case 1:if(i=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zi===null||!zi.has(b))))return c.flags|=65536,x&=-x,c.lanes|=x,x=Vx(x),Ux(x,r,c,d),em(c,x),!1}c=c.return}while(c!==null);return!1}var Nm=Error(s(461)),an=!1;function Tn(r,i,c,d){i.child=r===null?Fy(i,null,c,d):Ga(i,r.child,c,d)}function Ox(r,i,c,d,x){c=c.render;var b=i.ref;if("ref"in d){var T={};for(var A in d)A!=="ref"&&(T[A]=d[A])}else T=d;return Oa(i),d=am(r,i,c,T,b,x),A=om(),r!==null&&!an?(lm(r,i,x),Hr(r,i,x)):(tt&&A&&zf(i),i.flags|=1,Tn(r,i,d,x),i.child)}function qx(r,i,c,d,x){if(r===null){var b=c.type;return typeof b=="function"&&!Uf(b)&&b.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=b,zx(r,i,b,d,x)):(r=Qu(c.type,null,d,i,i.mode,x),r.ref=i.ref,r.return=i,i.child=r)}if(b=r.child,!Dm(r,x)){var T=b.memoizedProps;if(c=c.compare,c=c!==null?c:rc,c(T,d)&&r.ref===i.ref)return Hr(r,i,x)}return i.flags|=1,r=Or(b,d),r.ref=i.ref,r.return=i,i.child=r}function zx(r,i,c,d,x){if(r!==null){var b=r.memoizedProps;if(rc(b,d)&&r.ref===i.ref)if(an=!1,i.pendingProps=d=b,Dm(r,x))(r.flags&131072)!==0&&(an=!0);else return i.lanes=r.lanes,Hr(r,i,x)}return Sm(r,i,c,d,x)}function Fx(r,i,c,d){var x=d.children,b=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,r!==null){for(d=i.child=r.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,i.child=null;return Gx(r,i,b,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Zu(i,b!==null?b.cachePool:null),b!==null?Hy(i,b):nm(),$y(i);else return d=i.lanes=536870912,Gx(r,i,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Zu(i,b.cachePool),Hy(i,b),Vi(),i.memoizedState=null):(r!==null&&Zu(i,null),nm(),Vi());return Tn(r,i,x,c),i.child}function vc(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Gx(r,i,c,d,x){var b=Jf();return b=b===null?null:{parent:sn._currentValue,pool:b},i.memoizedState={baseLanes:c,cachePool:b},r!==null&&Zu(i,null),nm(),$y(i),r!==null&&Lo(r,i,d,!0),i.childLanes=x,null}function pd(r,i){return i=yd({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Bx(r,i,c){return Ga(i,r.child,null,c),r=pd(i,i.pendingProps),r.flags|=2,hs(i),i.memoizedState=null,r}function mS(r,i,c){var d=i.pendingProps,x=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(tt){if(d.mode==="hidden")return r=pd(i,d),i.lanes=536870912,vc(null,r);if(rm(i),(r=Rt)?(r=nb(r,Cs),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ii!==null?{id:xr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},c=Ay(r),c.return=i,i.child=c,wn=i,Rt=null)):r=null,r===null)throw ki(i);return i.lanes=536870912,null}return pd(i,d)}var b=r.memoizedState;if(b!==null){var T=b.dehydrated;if(rm(i),x)if(i.flags&256)i.flags&=-257,i=Bx(r,i,c);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(an||Lo(r,i,c,!1),x=(c&r.childLanes)!==0,an||x){if(d=At,d!==null&&(T=wa(d,c),T!==0&&T!==b.retryLane))throw b.retryLane=T,ja(r,T),es(d,r,T),Nm;Sd(),i=Bx(r,i,c)}else r=b.treeContext,Rt=Rs(T.nextSibling),wn=i,tt=!0,Ri=null,Cs=!1,r!==null&&Ry(i,r),i=pd(i,d),i.flags|=4096;return i}return r=Or(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function gd(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Sm(r,i,c,d,x){return Oa(i),c=am(r,i,c,d,void 0,x),d=om(),r!==null&&!an?(lm(r,i,x),Hr(r,i,x)):(tt&&d&&zf(i),i.flags|=1,Tn(r,i,c,x),i.child)}function Hx(r,i,c,d,x,b){return Oa(i),i.updateQueue=null,c=Yy(i,d,c,x),Ky(r),d=om(),r!==null&&!an?(lm(r,i,b),Hr(r,i,b)):(tt&&d&&zf(i),i.flags|=1,Tn(r,i,c,b),i.child)}function $x(r,i,c,d,x){if(Oa(i),i.stateNode===null){var b=Mo,T=c.contextType;typeof T=="object"&&T!==null&&(b=En(T)),b=new c(d,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Em,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=d,b.state=i.memoizedState,b.refs={},Wf(i),T=c.contextType,b.context=typeof T=="object"&&T!==null?En(T):Mo,b.state=i.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(wm(i,c,T,d),b.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Em.enqueueReplaceState(b,b.state,null),mc(i,d,b,x),fc(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){b=i.stateNode;var A=i.memoizedProps,L=Ha(c,A);b.props=L;var X=b.context,ae=c.contextType;T=Mo,typeof ae=="object"&&ae!==null&&(T=En(ae));var ce=c.getDerivedStateFromProps;ae=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||X!==T)&&Mx(i,b,d,T),Di=!1;var Z=i.memoizedState;b.state=Z,mc(i,d,b,x),fc(),X=i.memoizedState,A||Z!==X||Di?(typeof ce=="function"&&(wm(i,c,ce,d),X=i.memoizedState),(L=Di||kx(i,c,L,d,Z,X,T))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=X),b.props=d,b.state=X,b.context=T,d=L):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{b=i.stateNode,Zf(r,i),T=i.memoizedProps,ae=Ha(c,T),b.props=ae,ce=i.pendingProps,Z=b.context,X=c.contextType,L=Mo,typeof X=="object"&&X!==null&&(L=En(X)),A=c.getDerivedStateFromProps,(X=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ce||Z!==L)&&Mx(i,b,d,L),Di=!1,Z=i.memoizedState,b.state=Z,mc(i,d,b,x),fc();var se=i.memoizedState;T!==ce||Z!==se||Di||r!==null&&r.dependencies!==null&&Xu(r.dependencies)?(typeof A=="function"&&(wm(i,c,A,d),se=i.memoizedState),(ae=Di||kx(i,c,ae,d,Z,se,L)||r!==null&&r.dependencies!==null&&Xu(r.dependencies))?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,se,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,se,L)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=se),b.props=d,b.state=se,b.context=L,d=ae):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),d=!1)}return b=d,gd(r,i),d=(i.flags&128)!==0,b||d?(b=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,r!==null&&d?(i.child=Ga(i,r.child,null,x),i.child=Ga(i,null,c,x)):Tn(r,i,c,x),i.memoizedState=b.state,r=i.child):r=Hr(r,i,x),r}function Kx(r,i,c,d){return Va(),i.flags|=256,Tn(r,i,c,d),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cm(r){return{baseLanes:r,cachePool:Ly()}}function Im(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=ms),r}function Yx(r,i,c){var d=i.pendingProps,x=!1,b=(i.flags&128)!==0,T;if((T=b)||(T=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),T&&(x=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(tt){if(x?Li(i):Vi(),(r=Rt)?(r=nb(r,Cs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ii!==null?{id:xr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},c=Ay(r),c.return=i,i.child=c,wn=i,Rt=null)):r=null,r===null)throw ki(i);return dp(r)?i.lanes=32:i.lanes=536870912,null}var A=d.children;return d=d.fallback,x?(Vi(),x=i.mode,A=yd({mode:"hidden",children:A},x),d=La(d,x,c,null),A.return=i,d.return=i,A.sibling=d,i.child=A,d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,vc(null,d)):(Li(i),Rm(i,A))}var L=r.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(b)i.flags&256?(Li(i),i.flags&=-257,i=km(r,i,c)):i.memoizedState!==null?(Vi(),i.child=r.child,i.flags|=128,i=null):(Vi(),A=d.fallback,x=i.mode,d=yd({mode:"visible",children:d.children},x),A=La(A,x,c,null),A.flags|=2,d.return=i,A.return=i,d.sibling=A,i.child=d,Ga(i,r.child,null,c),d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,i=vc(null,d));else if(Li(i),dp(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var X=T.dgst;T=X,d=Error(s(419)),d.stack="",d.digest=T,oc({value:d,source:null,stack:null}),i=km(r,i,c)}else if(an||Lo(r,i,c,!1),T=(c&r.childLanes)!==0,an||T){if(T=At,T!==null&&(d=wa(T,c),d!==0&&d!==L.retryLane))throw L.retryLane=d,ja(r,d),es(T,r,d),Nm;up(A)||Sd(),i=km(r,i,c)}else up(A)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Rt=Rs(A.nextSibling),wn=i,tt=!0,Ri=null,Cs=!1,r!==null&&Ry(i,r),i=Rm(i,d.children),i.flags|=4096);return i}return x?(Vi(),A=d.fallback,x=i.mode,L=r.child,X=L.sibling,d=Or(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,X!==null?A=Or(X,A):(A=La(A,x,c,null),A.flags|=2),A.return=i,d.return=i,d.sibling=A,i.child=d,vc(null,d),d=i.child,A=r.child.memoizedState,A===null?A=Cm(c):(x=A.cachePool,x!==null?(L=sn._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=Ly(),A={baseLanes:A.baseLanes|c,cachePool:x}),d.memoizedState=A,d.childLanes=Im(r,T,c),i.memoizedState=Am,vc(r.child,d)):(Li(i),c=r.child,r=c.sibling,c=Or(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=c,i.memoizedState=null,c)}function Rm(r,i){return i=yd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function yd(r,i){return r=us(22,r,null,i),r.lanes=0,r}function km(r,i,c){return Ga(i,r.child,null,c),r=Rm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Qx(r,i,c){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),$f(r.return,i,c)}function Mm(r,i,c,d,x,b){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:x,treeForkCount:b}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=x,T.treeForkCount=b)}function Jx(r,i,c){var d=i.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var T=Qt.current,A=(T&2)!==0;if(A?(T=T&1|2,i.flags|=128):T&=1,O(Qt,T),Tn(r,i,d,c),d=tt?ac:0,!A&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qx(r,c,i);else if(r.tag===19)Qx(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(c=i.child,x=null;c!==null;)r=c.alternate,r!==null&&id(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),Mm(i,!1,x,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(r=x.alternate,r!==null&&id(r)===null){i.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Mm(i,!0,c,null,b,d);break;case"together":Mm(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Hr(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),qi|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(Lo(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,c=Or(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Or(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function Dm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Xu(r)))}function pS(r,i,c){switch(i.tag){case 3:nt(i,i.stateNode.containerInfo),Mi(i,sn,r.memoizedState.cache),Va();break;case 27:case 5:Ct(i);break;case 4:nt(i,i.stateNode.containerInfo);break;case 10:Mi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,rm(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Li(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Yx(r,i,c):(Li(i),r=Hr(r,i,c),r!==null?r.sibling:null);Li(i);break;case 19:var x=(r.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Lo(r,i,c,!1),d=(c&i.childLanes)!==0),x){if(d)return Jx(r,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),O(Qt,Qt.current),d)break;return null;case 22:return i.lanes=0,Fx(r,i,c,i.pendingProps);case 24:Mi(i,sn,r.memoizedState.cache)}return Hr(r,i,c)}function Xx(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)an=!0;else{if(!Dm(r,c)&&(i.flags&128)===0)return an=!1,pS(r,i,c);an=(r.flags&131072)!==0}else an=!1,tt&&(i.flags&1048576)!==0&&Iy(i,ac,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=za(i.elementType),i.type=r,typeof r=="function")Uf(r)?(d=Ha(r,d),i.tag=1,i=$x(null,i,r,d,c)):(i.tag=0,i=Sm(null,i,r,d,c));else{if(r!=null){var x=r.$$typeof;if(x===ie){i.tag=11,i=Ox(null,i,r,d,c);break e}else if(x===C){i.tag=14,i=qx(null,i,r,d,c);break e}}throw i=Fe(r)||r,Error(s(306,i,""))}}return i;case 0:return Sm(r,i,i.type,i.pendingProps,c);case 1:return d=i.type,x=Ha(d,i.pendingProps),$x(r,i,d,x,c);case 3:e:{if(nt(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var b=i.memoizedState;x=b.element,Zf(r,i),mc(i,d,null,c);var T=i.memoizedState;if(d=T.cache,Mi(i,sn,d),d!==b.cache&&Kf(i,[sn],c,!0),fc(),d=T.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=Kx(r,i,d,c);break e}else if(d!==x){x=Ns(Error(s(424)),i),oc(x),i=Kx(r,i,d,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Rt=Rs(r.firstChild),wn=i,tt=!0,Ri=null,Cs=!0,c=Fy(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Va(),d===x){i=Hr(r,i,c);break e}Tn(r,i,d,c)}i=i.child}return i;case 26:return gd(r,i),r===null?(c=lb(i.type,null,i.pendingProps,null))?i.memoizedState=c:tt||(c=i.type,r=i.pendingProps,d=Dd(Ee.current).createElement(c),d[en]=i,d[gn]=r,Nn(d,c,r),tn(d),i.stateNode=d):i.memoizedState=lb(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ct(i),r===null&&tt&&(d=i.stateNode=ib(i.type,i.pendingProps,Ee.current),wn=i,Cs=!0,x=Rt,Hi(i.type)?(hp=x,Rt=Rs(d.firstChild)):Rt=x),Tn(r,i,i.pendingProps.children,c),gd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&tt&&((x=d=Rt)&&(d=HS(d,i.type,i.pendingProps,Cs),d!==null?(i.stateNode=d,wn=i,Rt=Rs(d.firstChild),Cs=!1,x=!0):x=!1),x||ki(i)),Ct(i),x=i.type,b=i.pendingProps,T=r!==null?r.memoizedProps:null,d=b.children,op(x,b)?d=null:T!==null&&op(x,T)&&(i.flags|=32),i.memoizedState!==null&&(x=am(r,i,aS,null,null,c),Pc._currentValue=x),gd(r,i),Tn(r,i,d,c),i.child;case 6:return r===null&&tt&&((r=c=Rt)&&(c=$S(c,i.pendingProps,Cs),c!==null?(i.stateNode=c,wn=i,Rt=null,r=!0):r=!1),r||ki(i)),null;case 13:return Yx(r,i,c);case 4:return nt(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=Ga(i,null,d,c):Tn(r,i,d,c),i.child;case 11:return Ox(r,i,i.type,i.pendingProps,c);case 7:return Tn(r,i,i.pendingProps,c),i.child;case 8:return Tn(r,i,i.pendingProps.children,c),i.child;case 12:return Tn(r,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Mi(i,i.type,d.value),Tn(r,i,d.children,c),i.child;case 9:return x=i.type._context,d=i.pendingProps.children,Oa(i),x=En(x),d=d(x),i.flags|=1,Tn(r,i,d,c),i.child;case 14:return qx(r,i,i.type,i.pendingProps,c);case 15:return zx(r,i,i.type,i.pendingProps,c);case 19:return Jx(r,i,c);case 31:return mS(r,i,c);case 22:return Fx(r,i,c,i.pendingProps);case 24:return Oa(i),d=En(sn),r===null?(x=Jf(),x===null&&(x=At,b=Yf(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=c),x=b),i.memoizedState={parent:d,cache:x},Wf(i),Mi(i,sn,x)):((r.lanes&c)!==0&&(Zf(r,i),mc(i,null,null,c),fc()),x=r.memoizedState,b=i.memoizedState,x.parent!==d?(x={parent:d,cache:d},i.memoizedState=x,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=x),Mi(i,sn,d)):(d=b.cache,Mi(i,sn,d),d!==x.cache&&Kf(i,[sn],c,!0))),Tn(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function $r(r){r.flags|=4}function Pm(r,i,c,d,x){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(Tv())r.flags|=8192;else throw Fa=td,Xf}else r.flags&=-16777217}function Wx(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!fb(i))if(Tv())r.flags|=8192;else throw Fa=td,Xf}function xd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?dt():536870912,r.lanes|=i,Yo|=i)}function bc(r,i){if(!tt)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function kt(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(i)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=d,r.childLanes=c,i}function gS(r,i,c){var d=i.pendingProps;switch(Ff(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(i),null;case 1:return kt(i),null;case 3:return c=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Fr(sn),Ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(jo(i)?$r(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bf())),kt(i),null;case 26:var x=i.type,b=i.memoizedState;return r===null?($r(i),b!==null?(kt(i),Wx(i,b)):(kt(i),Pm(i,x,null,d,c))):b?b!==r.memoizedState?($r(i),kt(i),Wx(i,b)):(kt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&$r(i),kt(i),Pm(i,x,r,d,c)),null;case 27:if(Oe(i),c=Ee.current,x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&$r(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return kt(i),null}r=ne.current,jo(i)?ky(i):(r=ib(x,d,c),i.stateNode=r,$r(i))}return kt(i),null;case 5:if(Oe(i),x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&$r(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return kt(i),null}if(b=ne.current,jo(i))ky(i);else{var T=Dd(Ee.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?T.createElement(x,{is:d.is}):T.createElement(x)}}b[en]=i,b[gn]=d;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=b;e:switch(Nn(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&$r(i)}}return kt(i),Pm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,c),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&$r(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=Ee.current,jo(i)){if(r=i.stateNode,c=i.memoizedProps,d=null,x=wn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}r[en]=i,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Yv(r.nodeValue,c)),r||ki(i,!0)}else r=Dd(r).createTextNode(d),r[en]=i,i.stateNode=r}return kt(i),null;case 31:if(c=i.memoizedState,r===null||r.memoizedState!==null){if(d=jo(i),c!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[en]=i}else Va(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),r=!1}else c=Bf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return i.flags&256?(hs(i),i):(hs(i),null);if((i.flags&128)!==0)throw Error(s(558))}return kt(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=jo(i),d!==null&&d.dehydrated!==null){if(r===null){if(!x)throw Error(s(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[en]=i}else Va(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),x=!1}else x=Bf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return i.flags&256?(hs(i),i):(hs(i),null)}return hs(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,r=r!==null&&r.memoizedState!==null,c&&(d=i.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),c!==r&&c&&(i.child.flags|=8192),xd(i,i.updateQueue),kt(i),null);case 4:return Ie(),r===null&&np(i.stateNode.containerInfo),kt(i),null;case 10:return Fr(i.type),kt(i),null;case 19:if(J(Qt),d=i.memoizedState,d===null)return kt(i),null;if(x=(i.flags&128)!==0,b=d.rendering,b===null)if(x)bc(d,!1);else{if(zt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=id(r),b!==null){for(i.flags|=128,bc(d,!1),r=b.updateQueue,i.updateQueue=r,xd(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)Sy(c,r),c=c.sibling;return O(Qt,Qt.current&1|2),tt&&qr(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&dn()>Ed&&(i.flags|=128,x=!0,bc(d,!1),i.lanes=4194304)}else{if(!x)if(r=id(b),r!==null){if(i.flags|=128,x=!0,r=r.updateQueue,i.updateQueue=r,xd(i,r),bc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!tt)return kt(i),null}else 2*dn()-d.renderingStartTime>Ed&&c!==536870912&&(i.flags|=128,x=!0,bc(d,!1),i.lanes=4194304);d.isBackwards?(b.sibling=i.child,i.child=b):(r=d.last,r!==null?r.sibling=b:i.child=b,d.last=b)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=dn(),r.sibling=null,c=Qt.current,O(Qt,x?c&1|2:c&1),tt&&qr(i,d.treeForkCount),r):(kt(i),null);case 22:case 23:return hs(i),sm(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(kt(i),i.subtreeFlags&6&&(i.flags|=8192)):kt(i),c=i.updateQueue,c!==null&&xd(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),r!==null&&J(qa),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Fr(sn),kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function yS(r,i){switch(Ff(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Fr(sn),Ie(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Oe(i),null;case 31:if(i.memoizedState!==null){if(hs(i),i.alternate===null)throw Error(s(340));Va()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(hs(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Va()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return J(Qt),null;case 4:return Ie(),null;case 10:return Fr(i.type),null;case 22:case 23:return hs(i),sm(),r!==null&&J(qa),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Fr(sn),null;case 25:return null;default:return null}}function Zx(r,i){switch(Ff(i),i.tag){case 3:Fr(sn),Ie();break;case 26:case 27:case 5:Oe(i);break;case 4:Ie();break;case 31:i.memoizedState!==null&&hs(i);break;case 13:hs(i);break;case 19:J(Qt);break;case 10:Fr(i.type);break;case 22:case 23:hs(i),sm(),r!==null&&J(qa);break;case 24:Fr(sn)}}function _c(r,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var x=d.next;c=x;do{if((c.tag&r)===r){d=void 0;var b=c.create,T=c.inst;d=b(),T.destroy=d}c=c.next}while(c!==x)}}catch(A){vt(i,i.return,A)}}function Ui(r,i,c){try{var d=i.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&r)===r){var T=d.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,x=i;var L=c,X=A;try{X()}catch(ae){vt(x,L,ae)}}}d=d.next}while(d!==b)}}catch(ae){vt(i,i.return,ae)}}function ev(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{By(i,c)}catch(d){vt(r,r.return,d)}}}function tv(r,i,c){c.props=Ha(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){vt(r,i,d)}}function wc(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(x){vt(r,i,x)}}function br(r,i){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(x){vt(r,i,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){vt(r,i,x)}else c.current=null}function nv(r){var i=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(x){vt(r,r.return,x)}}function jm(r,i,c){try{var d=r.stateNode;OS(d,r.type,c,i),d[gn]=i}catch(x){vt(r,r.return,x)}}function sv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Hi(r.type)||r.tag===4}function Lm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Hi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Vm(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=zs));else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(Vm(r,i,c),r=r.sibling;r!==null;)Vm(r,i,c),r=r.sibling}function vd(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(vd(r,i,c),r=r.sibling;r!==null;)vd(r,i,c),r=r.sibling}function rv(r){var i=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,x=i.attributes;x.length;)i.removeAttributeNode(x[0]);Nn(i,d,c),i[en]=r,i[gn]=c}catch(b){vt(r,r.return,b)}}var Kr=!1,on=!1,Um=!1,iv=typeof WeakSet=="function"?WeakSet:Set,xn=null;function xS(r,i){if(r=r.containerInfo,ip=qd,r=yy(r),kf(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var T=0,A=-1,L=-1,X=0,ae=0,ce=r,Z=null;t:for(;;){for(var se;ce!==c||x!==0&&ce.nodeType!==3||(A=T+x),ce!==b||d!==0&&ce.nodeType!==3||(L=T+d),ce.nodeType===3&&(T+=ce.nodeValue.length),(se=ce.firstChild)!==null;)Z=ce,ce=se;for(;;){if(ce===r)break t;if(Z===c&&++X===x&&(A=T),Z===b&&++ae===d&&(L=T),(se=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=se}c=A===-1||L===-1?null:{start:A,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(ap={focusedElem:r,selectionRange:c},qd=!1,xn=i;xn!==null;)if(i=xn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,xn=r;else for(;xn!==null;){switch(i=xn,b=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)x=r[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=i,x=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var we=Ha(c.type,x);r=d.getSnapshotBeforeUpdate(we,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(ke){vt(c,c.return,ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)cp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,xn=r;break}xn=i.return}}function av(r,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Qr(r,c),d&4&&_c(5,c);break;case 1:if(Qr(r,c),d&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(T){vt(c,c.return,T)}else{var x=Ha(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(x,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){vt(c,c.return,T)}}d&64&&ev(c),d&512&&wc(c,c.return);break;case 3:if(Qr(r,c),d&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{By(r,i)}catch(T){vt(c,c.return,T)}}break;case 27:i===null&&d&4&&rv(c);case 26:case 5:Qr(r,c),i===null&&d&4&&nv(c),d&512&&wc(c,c.return);break;case 12:Qr(r,c);break;case 31:Qr(r,c),d&4&&cv(r,c);break;case 13:Qr(r,c),d&4&&uv(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=AS.bind(null,c),KS(r,c))));break;case 22:if(d=c.memoizedState!==null||Kr,!d){i=i!==null&&i.memoizedState!==null||on,x=Kr;var b=on;Kr=d,(on=i)&&!b?Jr(r,c,(c.subtreeFlags&8772)!==0):Qr(r,c),Kr=x,on=b}break;case 30:break;default:Qr(r,c)}}function ov(r){var i=r.alternate;i!==null&&(r.alternate=null,ov(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&xo(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var jt=null,Jn=!1;function Yr(r,i,c){for(c=c.child;c!==null;)lv(r,i,c),c=c.sibling}function lv(r,i,c){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount($t,c)}catch{}switch(c.tag){case 26:on||br(c,i),Yr(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:on||br(c,i);var d=jt,x=Jn;Hi(c.type)&&(jt=c.stateNode,Jn=!1),Yr(r,i,c),kc(c.stateNode),jt=d,Jn=x;break;case 5:on||br(c,i);case 6:if(d=jt,x=Jn,jt=null,Yr(r,i,c),jt=d,Jn=x,jt!==null)if(Jn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(c.stateNode)}catch(b){vt(c,i,b)}else try{jt.removeChild(c.stateNode)}catch(b){vt(c,i,b)}break;case 18:jt!==null&&(Jn?(r=jt,eb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),nl(r)):eb(jt,c.stateNode));break;case 4:d=jt,x=Jn,jt=c.stateNode.containerInfo,Jn=!0,Yr(r,i,c),jt=d,Jn=x;break;case 0:case 11:case 14:case 15:Ui(2,c,i),on||Ui(4,c,i),Yr(r,i,c);break;case 1:on||(br(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&tv(c,i,d)),Yr(r,i,c);break;case 21:Yr(r,i,c);break;case 22:on=(d=on)||c.memoizedState!==null,Yr(r,i,c),on=d;break;default:Yr(r,i,c)}}function cv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{nl(r)}catch(c){vt(i,i.return,c)}}}function uv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{nl(r)}catch(c){vt(i,i.return,c)}}function vS(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new iv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new iv),i;default:throw Error(s(435,r.tag))}}function bd(r,i){var c=vS(r);i.forEach(function(d){if(!c.has(d)){c.add(d);var x=CS.bind(null,r,d);d.then(x,x)}})}function Xn(r,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var x=c[d],b=r,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Hi(A.type)){jt=A.stateNode,Jn=!1;break e}break;case 5:jt=A.stateNode,Jn=!1;break e;case 3:case 4:jt=A.stateNode.containerInfo,Jn=!0;break e}A=A.return}if(jt===null)throw Error(s(160));lv(b,T,x),jt=null,Jn=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)dv(i,r),i=i.sibling}var Ks=null;function dv(r,i){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Xn(i,r),Wn(r),d&4&&(Ui(3,r,r.return),_c(3,r),Ui(5,r,r.return));break;case 1:Xn(i,r),Wn(r),d&512&&(on||c===null||br(c,c.return)),d&64&&Kr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var x=Ks;if(Xn(i,r),Wn(r),d&512&&(on||c===null||br(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[ar]||b[en]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),Nn(b,d,c),b[en]=r,tn(b),d=b;break e;case"link":var T=db("link","href",x).get(d+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}b=x.createElement(d),Nn(b,d,c),x.head.appendChild(b);break;case"meta":if(T=db("meta","content",x).get(d+(c.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}b=x.createElement(d),Nn(b,d,c),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[en]=r,tn(b),d=b}r.stateNode=d}else hb(x,r.type,r.stateNode);else r.stateNode=ub(x,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?hb(x,r.type,r.stateNode):ub(x,d,r.memoizedProps)):d===null&&r.stateNode!==null&&jm(r,r.memoizedProps,c.memoizedProps)}break;case 27:Xn(i,r),Wn(r),d&512&&(on||c===null||br(c,c.return)),c!==null&&d&4&&jm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Xn(i,r),Wn(r),d&512&&(on||c===null||br(c,c.return)),r.flags&32){x=r.stateNode;try{Qn(x,"")}catch(we){vt(r,r.return,we)}}d&4&&r.stateNode!=null&&(x=r.memoizedProps,jm(r,x,c!==null?c.memoizedProps:x)),d&1024&&(Um=!0);break;case 6:if(Xn(i,r),Wn(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(we){vt(r,r.return,we)}}break;case 3:if(Ld=null,x=Ks,Ks=Pd(i.containerInfo),Xn(i,r),Ks=x,Wn(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(we){vt(r,r.return,we)}Um&&(Um=!1,hv(r));break;case 4:d=Ks,Ks=Pd(r.stateNode.containerInfo),Xn(i,r),Wn(r),Ks=d;break;case 12:Xn(i,r),Wn(r);break;case 31:Xn(i,r),Wn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 13:Xn(i,r),Wn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(wd=dn()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 22:x=r.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,X=Kr,ae=on;if(Kr=X||x,on=ae||L,Xn(i,r),on=ae,Kr=X,Wn(r),d&8192)e:for(i=r.stateNode,i._visibility=x?i._visibility&-2:i._visibility|1,x&&(c===null||L||Kr||on||$a(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){L=c=i;try{if(b=L.stateNode,x)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=L.stateNode;var ce=L.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(we){vt(L,L.return,we)}}}else if(i.tag===6){if(c===null){L=i;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(we){vt(L,L.return,we)}}}else if(i.tag===18){if(c===null){L=i;try{var se=L.stateNode;x?tb(se,!0):tb(L.stateNode,!1)}catch(we){vt(L,L.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,bd(r,c))));break;case 19:Xn(i,r),Wn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 30:break;case 21:break;default:Xn(i,r),Wn(r)}}function Wn(r){var i=r.flags;if(i&2){try{for(var c,d=r.return;d!==null;){if(sv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var x=c.stateNode,b=Lm(r);vd(r,b,x);break;case 5:var T=c.stateNode;c.flags&32&&(Qn(T,""),c.flags&=-33);var A=Lm(r);vd(r,A,T);break;case 3:case 4:var L=c.stateNode.containerInfo,X=Lm(r);Vm(r,X,L);break;default:throw Error(s(161))}}catch(ae){vt(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function hv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;hv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Qr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)av(r,i.alternate,i),i=i.sibling}function $a(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ui(4,i,i.return),$a(i);break;case 1:br(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&tv(i,i.return,c),$a(i);break;case 27:kc(i.stateNode);case 26:case 5:br(i,i.return),$a(i);break;case 22:i.memoizedState===null&&$a(i);break;case 30:$a(i);break;default:$a(i)}r=r.sibling}}function Jr(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,x=r,b=i,T=b.flags;switch(b.tag){case 0:case 11:case 15:Jr(x,b,c),_c(4,b);break;case 1:if(Jr(x,b,c),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(X){vt(d,d.return,X)}if(d=b,x=d.updateQueue,x!==null){var A=d.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)Gy(L[x],A)}catch(X){vt(d,d.return,X)}}c&&T&64&&ev(b),wc(b,b.return);break;case 27:rv(b);case 26:case 5:Jr(x,b,c),c&&d===null&&T&4&&nv(b),wc(b,b.return);break;case 12:Jr(x,b,c);break;case 31:Jr(x,b,c),c&&T&4&&cv(x,b);break;case 13:Jr(x,b,c),c&&T&4&&uv(x,b);break;case 22:b.memoizedState===null&&Jr(x,b,c),wc(b,b.return);break;case 30:break;default:Jr(x,b,c)}i=i.sibling}}function Om(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&lc(c))}function qm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&lc(r))}function Ys(r,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fv(r,i,c,d),i=i.sibling}function fv(r,i,c,d){var x=i.flags;switch(i.tag){case 0:case 11:case 15:Ys(r,i,c,d),x&2048&&_c(9,i);break;case 1:Ys(r,i,c,d);break;case 3:Ys(r,i,c,d),x&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&lc(r)));break;case 12:if(x&2048){Ys(r,i,c,d),r=i.stateNode;try{var b=i.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){vt(i,i.return,L)}}else Ys(r,i,c,d);break;case 31:Ys(r,i,c,d);break;case 13:Ys(r,i,c,d);break;case 23:break;case 22:b=i.stateNode,T=i.alternate,i.memoizedState!==null?b._visibility&2?Ys(r,i,c,d):Ec(r,i):b._visibility&2?Ys(r,i,c,d):(b._visibility|=2,Ho(r,i,c,d,(i.subtreeFlags&10256)!==0||!1)),x&2048&&Om(T,i);break;case 24:Ys(r,i,c,d),x&2048&&qm(i.alternate,i);break;default:Ys(r,i,c,d)}}function Ho(r,i,c,d,x){for(x=x&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=r,T=i,A=c,L=d,X=T.flags;switch(T.tag){case 0:case 11:case 15:Ho(b,T,A,L,x),_c(8,T);break;case 23:break;case 22:var ae=T.stateNode;T.memoizedState!==null?ae._visibility&2?Ho(b,T,A,L,x):Ec(b,T):(ae._visibility|=2,Ho(b,T,A,L,x)),x&&X&2048&&Om(T.alternate,T);break;case 24:Ho(b,T,A,L,x),x&&X&2048&&qm(T.alternate,T);break;default:Ho(b,T,A,L,x)}i=i.sibling}}function Ec(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,d=i,x=d.flags;switch(d.tag){case 22:Ec(c,d),x&2048&&Om(d.alternate,d);break;case 24:Ec(c,d),x&2048&&qm(d.alternate,d);break;default:Ec(c,d)}i=i.sibling}}var Tc=8192;function $o(r,i,c){if(r.subtreeFlags&Tc)for(r=r.child;r!==null;)mv(r,i,c),r=r.sibling}function mv(r,i,c){switch(r.tag){case 26:$o(r,i,c),r.flags&Tc&&r.memoizedState!==null&&iA(c,Ks,r.memoizedState,r.memoizedProps);break;case 5:$o(r,i,c);break;case 3:case 4:var d=Ks;Ks=Pd(r.stateNode.containerInfo),$o(r,i,c),Ks=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Tc,Tc=16777216,$o(r,i,c),Tc=d):$o(r,i,c));break;default:$o(r,i,c)}}function pv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Nc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];xn=d,yv(d,r)}pv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gv(r),r=r.sibling}function gv(r){switch(r.tag){case 0:case 11:case 15:Nc(r),r.flags&2048&&Ui(9,r,r.return);break;case 3:Nc(r);break;case 12:Nc(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,_d(r)):Nc(r);break;default:Nc(r)}}function _d(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];xn=d,yv(d,r)}pv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ui(8,i,i.return),_d(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,_d(i));break;default:_d(i)}r=r.sibling}}function yv(r,i){for(;xn!==null;){var c=xn;switch(c.tag){case 0:case 11:case 15:Ui(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:lc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,xn=d;else e:for(c=r;xn!==null;){d=xn;var x=d.sibling,b=d.return;if(ov(d),d===c){xn=null;break e}if(x!==null){x.return=b,xn=x;break e}xn=b}}}var bS={getCacheForType:function(r){var i=En(sn),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c},cacheSignal:function(){return En(sn).controller.signal}},_S=typeof WeakMap=="function"?WeakMap:Map,ft=0,At=null,Ke=null,Je=0,xt=0,fs=null,Oi=!1,Ko=!1,zm=!1,Xr=0,zt=0,qi=0,Ka=0,Fm=0,ms=0,Yo=0,Sc=null,Zn=null,Gm=!1,wd=0,xv=0,Ed=1/0,Td=null,zi=null,fn=0,Fi=null,Qo=null,Wr=0,Bm=0,Hm=null,vv=null,Ac=0,$m=null;function ps(){return(ft&2)!==0&&Je!==0?Je&-Je:ee.T!==null?Wm():Nu()}function bv(){if(ms===0)if((Je&536870912)===0||tt){var r=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),ms=r}else ms=536870912;return r=ds.current,r!==null&&(r.flags|=32),ms}function es(r,i,c){(r===At&&(xt===2||xt===9)||r.cancelPendingCommit!==null)&&(Jo(r,0),Gi(r,Je,ms,!1)),Kt(r,c),((ft&2)===0||r!==At)&&(r===At&&((ft&2)===0&&(Ka|=c),zt===4&&Gi(r,Je,ms,!1)),_r(r))}function _v(r,i,c){if((ft&6)!==0)throw Error(s(327));var d=!c&&(i&127)===0&&(i&r.expiredLanes)===0||ye(r,i),x=d?TS(r,i):Ym(r,i,!0),b=d;do{if(x===0){Ko&&!d&&Gi(r,i,0,!1);break}else{if(c=r.current.alternate,b&&!wS(c)){x=Ym(r,i,!1),b=!1;continue}if(x===2){if(b=i,r.errorRecoveryDisabledLanes&b)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=r;x=Sc;var L=A.current.memoizedState.isDehydrated;if(L&&(Jo(A,T).flags|=256),T=Ym(A,T,!1),T!==2){if(zm&&!L){A.errorRecoveryDisabledLanes|=b,Ka|=b,x=4;break e}b=Zn,Zn=x,b!==null&&(Zn===null?Zn=b:Zn.push.apply(Zn,b))}x=T}if(b=!1,x!==2)continue}}if(x===1){Jo(r,0),Gi(r,i,0,!0);break}e:{switch(d=r,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gi(d,i,ms,!Oi);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(x=wd+300-dn(),10<x)){if(Gi(d,i,ms,!Oi),Se(d,0,!0)!==0)break e;Wr=i,d.timeoutHandle=Wv(wv.bind(null,d,c,Zn,Td,Gm,i,ms,Ka,Yo,Oi,b,"Throttled",-0,0),x);break e}wv(d,c,Zn,Td,Gm,i,ms,Ka,Yo,Oi,b,null,-0,0)}}break}while(!0);_r(r)}function wv(r,i,c,d,x,b,T,A,L,X,ae,ce,Z,se){if(r.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zs},mv(i,b,ce);var we=(b&62914560)===b?wd-dn():(b&4194048)===b?xv-dn():0;if(we=aA(ce,we),we!==null){Wr=b,r.cancelPendingCommit=we(Rv.bind(null,r,i,b,c,d,x,T,A,L,ae,ce,null,Z,se)),Gi(r,b,T,!X);return}}Rv(r,i,b,c,d,x,T,A,L)}function wS(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var x=c[d],b=x.getSnapshot;x=x.value;try{if(!cs(b(),x))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(r,i,c,d){i&=~Fm,i&=~Ka,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var x=i;0<x;){var b=31-bt(x),T=1<<b;d[b]=-1,x&=~T}c!==0&&St(r,c,i)}function Nd(){return(ft&6)===0?(Cc(0),!1):!0}function Km(){if(Ke!==null){if(xt===0)var r=Ke.return;else r=Ke,zr=Ua=null,cm(r),qo=null,uc=0,r=Ke;for(;r!==null;)Zx(r.alternate,r),r=r.return;Ke=null}}function Jo(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,FS(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Wr=0,Km(),At=r,Ke=c=Or(r.current,null),Je=i,xt=0,fs=null,Oi=!1,Ko=ye(r,i),zm=!1,Yo=ms=Fm=Ka=qi=zt=0,Zn=Sc=null,Gm=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var x=31-bt(d),b=1<<x;i|=r[x],d&=~b}return Xr=i,$u(),c}function Ev(r,i){ze=null,ee.H=xc,i===Oo||i===ed?(i=Oy(),xt=3):i===Xf?(i=Oy(),xt=4):xt=i===Nm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fs=i,Ke===null&&(zt=1,md(r,Ns(i,r.current)))}function Tv(){var r=ds.current;return r===null?!0:(Je&4194048)===Je?Is===null:(Je&62914560)===Je||(Je&536870912)!==0?r===Is:!1}function Nv(){var r=ee.H;return ee.H=xc,r===null?xc:r}function Sv(){var r=ee.A;return ee.A=bS,r}function Sd(){zt=4,Oi||(Je&4194048)!==Je&&ds.current!==null||(Ko=!0),(qi&134217727)===0&&(Ka&134217727)===0||At===null||Gi(At,Je,ms,!1)}function Ym(r,i,c){var d=ft;ft|=2;var x=Nv(),b=Sv();(At!==r||Je!==i)&&(Td=null,Jo(r,i)),i=!1;var T=zt;e:do try{if(xt!==0&&Ke!==null){var A=Ke,L=fs;switch(xt){case 8:Km(),T=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(i=!0);var X=xt;if(xt=0,fs=null,Xo(r,A,L,X),c&&Ko){T=0;break e}break;default:X=xt,xt=0,fs=null,Xo(r,A,L,X)}}ES(),T=zt;break}catch(ae){Ev(r,ae)}while(!0);return i&&r.shellSuspendCounter++,zr=Ua=null,ft=d,ee.H=x,ee.A=b,Ke===null&&(At=null,Je=0,$u()),T}function ES(){for(;Ke!==null;)Av(Ke)}function TS(r,i){var c=ft;ft|=2;var d=Nv(),x=Sv();At!==r||Je!==i?(Td=null,Ed=dn()+500,Jo(r,i)):Ko=ye(r,i);e:do try{if(xt!==0&&Ke!==null){i=Ke;var b=fs;t:switch(xt){case 1:xt=0,fs=null,Xo(r,i,b,1);break;case 2:case 9:if(Vy(b)){xt=0,fs=null,Cv(i);break}i=function(){xt!==2&&xt!==9||At!==r||(xt=7),_r(r)},b.then(i,i);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Vy(b)?(xt=0,fs=null,Cv(i)):(xt=0,fs=null,Xo(r,i,b,7));break;case 5:var T=null;switch(Ke.tag){case 26:T=Ke.memoizedState;case 5:case 27:var A=Ke;if(T?fb(T):A.stateNode.complete){xt=0,fs=null;var L=A.sibling;if(L!==null)Ke=L;else{var X=A.return;X!==null?(Ke=X,Ad(X)):Ke=null}break t}}xt=0,fs=null,Xo(r,i,b,5);break;case 6:xt=0,fs=null,Xo(r,i,b,6);break;case 8:Km(),zt=6;break e;default:throw Error(s(462))}}NS();break}catch(ae){Ev(r,ae)}while(!0);return zr=Ua=null,ee.H=d,ee.A=x,ft=c,Ke!==null?0:(At=null,Je=0,$u(),zt)}function NS(){for(;Ke!==null&&!_a();)Av(Ke)}function Av(r){var i=Xx(r.alternate,r,Xr);r.memoizedProps=r.pendingProps,i===null?Ad(r):Ke=i}function Cv(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=Hx(c,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=Hx(c,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:cm(i);default:Zx(c,i),i=Ke=Sy(i,Xr),i=Xx(c,i,Xr)}r.memoizedProps=r.pendingProps,i===null?Ad(r):Ke=i}function Xo(r,i,c,d){zr=Ua=null,cm(i),qo=null,uc=0;var x=i.return;try{if(fS(r,x,i,c,Je)){zt=1,md(r,Ns(c,r.current)),Ke=null;return}}catch(b){if(x!==null)throw Ke=x,b;zt=1,md(r,Ns(c,r.current)),Ke=null;return}i.flags&32768?(tt||d===1?r=!0:Ko||(Je&536870912)!==0?r=!1:(Oi=r=!0,(d===2||d===9||d===3||d===6)&&(d=ds.current,d!==null&&d.tag===13&&(d.flags|=16384))),Iv(i,r)):Ad(i)}function Ad(r){var i=r;do{if((i.flags&32768)!==0){Iv(i,Oi);return}r=i.return;var c=gS(i.alternate,i,Xr);if(c!==null){Ke=c;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=r}while(i!==null);zt===0&&(zt=5)}function Iv(r,i){do{var c=yS(r.alternate,r);if(c!==null){c.flags&=32767,Ke=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=c}while(r!==null);zt=6,Ke=null}function Rv(r,i,c,d,x,b,T,A,L){r.cancelPendingCommit=null;do Cd();while(fn!==0);if((ft&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(b=i.lanes|i.childLanes,b|=Lf,Nt(r,c,b,T,A,L),r===At&&(Ke=At=null,Je=0),Qo=i,Fi=r,Wr=c,Bm=b,Hm=x,vv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,IS(xs,function(){return jv(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null,x=pe.p,pe.p=2,T=ft,ft|=4;try{xS(r,i,c)}finally{ft=T,pe.p=x,ee.T=d}}fn=1,kv(),Mv(),Dv()}}function kv(){if(fn===1){fn=0;var r=Fi,i=Qo,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null;var d=pe.p;pe.p=2;var x=ft;ft|=4;try{dv(i,r);var b=ap,T=yy(r.containerInfo),A=b.focusedElem,L=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&gy(A.ownerDocument.documentElement,A)){if(L!==null&&kf(A)){var X=L.start,ae=L.end;if(ae===void 0&&(ae=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(ae,A.value.length);else{var ce=A.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var se=Z.getSelection(),we=A.textContent.length,ke=Math.min(L.start,we),Tt=L.end===void 0?ke:Math.min(L.end,we);!se.extend&&ke>Tt&&(T=Tt,Tt=ke,ke=T);var H=py(A,ke),z=py(A,Tt);if(H&&z&&(se.rangeCount!==1||se.anchorNode!==H.node||se.anchorOffset!==H.offset||se.focusNode!==z.node||se.focusOffset!==z.offset)){var Q=ce.createRange();Q.setStart(H.node,H.offset),se.removeAllRanges(),ke>Tt?(se.addRange(Q),se.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),se.addRange(Q))}}}}for(ce=[],se=A;se=se.parentNode;)se.nodeType===1&&ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var oe=ce[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}qd=!!ip,ap=ip=null}finally{ft=x,pe.p=d,ee.T=c}}r.current=i,fn=2}}function Mv(){if(fn===2){fn=0;var r=Fi,i=Qo,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=ee.T,ee.T=null;var d=pe.p;pe.p=2;var x=ft;ft|=4;try{av(r,i.alternate,i)}finally{ft=x,pe.p=d,ee.T=c}}fn=3}}function Dv(){if(fn===4||fn===3){fn=0,Pr();var r=Fi,i=Qo,c=Wr,d=vv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Qo=Fi=null,Pv(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(zi=null),jr(c),i=i.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot($t,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=ee.T,x=pe.p,pe.p=2,ee.T=null;try{for(var b=r.onRecoverableError,T=0;T<d.length;T++){var A=d[T];b(A.value,{componentStack:A.stack})}}finally{ee.T=i,pe.p=x}}(Wr&3)!==0&&Cd(),_r(r),x=r.pendingLanes,(c&261930)!==0&&(x&42)!==0?r===$m?Ac++:(Ac=0,$m=r):Ac=0,Cc(0)}}function Pv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,lc(i)))}function Cd(){return kv(),Mv(),Dv(),jv()}function jv(){if(fn!==5)return!1;var r=Fi,i=Bm;Bm=0;var c=jr(Wr),d=ee.T,x=pe.p;try{pe.p=32>c?32:c,ee.T=null,c=Hm,Hm=null;var b=Fi,T=Wr;if(fn=0,Qo=Fi=null,Wr=0,(ft&6)!==0)throw Error(s(331));var A=ft;if(ft|=4,gv(b.current),fv(b,b.current,T,c),ft=A,Cc(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot($t,b)}catch{}return!0}finally{pe.p=x,ee.T=d,Pv(r,i)}}function Lv(r,i,c){i=Ns(c,i),i=Tm(r.stateNode,i,2),r=ji(r,i,2),r!==null&&(Kt(r,2),_r(r))}function vt(r,i,c){if(r.tag===3)Lv(r,r,c);else for(;i!==null;){if(i.tag===3){Lv(i,r,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zi===null||!zi.has(d))){r=Ns(c,r),c=Vx(2),d=ji(i,c,2),d!==null&&(Ux(c,d,i,r),Kt(d,2),_r(d));break}}i=i.return}}function Qm(r,i,c){var d=r.pingCache;if(d===null){d=r.pingCache=new _S;var x=new Set;d.set(i,x)}else x=d.get(i),x===void 0&&(x=new Set,d.set(i,x));x.has(c)||(zm=!0,x.add(c),r=SS.bind(null,r,i,c),i.then(r,r))}function SS(r,i,c){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,At===r&&(Je&c)===c&&(zt===4||zt===3&&(Je&62914560)===Je&&300>dn()-wd?(ft&2)===0&&Jo(r,0):Fm|=c,Yo===Je&&(Yo=0)),_r(r)}function Vv(r,i){i===0&&(i=dt()),r=ja(r,i),r!==null&&(Kt(r,i),_r(r))}function AS(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),Vv(r,c)}function CS(r,i){var c=0;switch(r.tag){case 31:case 13:var d=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Vv(r,c)}function IS(r,i){return Vt(r,i)}var Id=null,Wo=null,Jm=!1,Rd=!1,Xm=!1,Bi=0;function _r(r){r!==Wo&&r.next===null&&(Wo===null?Id=Wo=r:Wo=Wo.next=r),Rd=!0,Jm||(Jm=!0,kS())}function Cc(r,i){if(!Xm&&Rd){Xm=!0;do for(var c=!1,d=Id;d!==null;){if(r!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var T=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-bt(42|r)+1)-1,b&=x&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,zv(d,b))}else b=Je,b=Se(d,d===At?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||ye(d,b)||(c=!0,zv(d,b));d=d.next}while(c);Xm=!1}}function RS(){Uv()}function Uv(){Rd=Jm=!1;var r=0;Bi!==0&&zS()&&(r=Bi);for(var i=dn(),c=null,d=Id;d!==null;){var x=d.next,b=Ov(d,i);b===0?(d.next=null,c===null?Id=x:c.next=x,x===null&&(Wo=c)):(c=d,(r!==0||(b&3)!==0)&&(Rd=!0)),d=x}fn!==0&&fn!==5||Cc(r),Bi!==0&&(Bi=0)}function Ov(r,i){for(var c=r.suspendedLanes,d=r.pingedLanes,x=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var T=31-bt(b),A=1<<T,L=x[T];L===-1?((A&c)===0||(A&d)!==0)&&(x[T]=Qe(A,i)):L<=i&&(r.expiredLanes|=A),b&=~A}if(i=At,c=Je,c=Se(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===i&&(xt===2||xt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&as(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||ye(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(d!==null&&as(d),jr(c)){case 2:case 8:c=rr;break;case 32:c=xs;break;case 268435456:c=He;break;default:c=xs}return d=qv.bind(null,r),c=Vt(c,d),r.callbackPriority=i,r.callbackNode=c,i}return d!==null&&d!==null&&as(d),r.callbackPriority=2,r.callbackNode=null,2}function qv(r,i){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Cd()&&r.callbackNode!==c)return null;var d=Je;return d=Se(r,r===At?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(_v(r,d,i),Ov(r,dn()),r.callbackNode!=null&&r.callbackNode===c?qv.bind(null,r):null)}function zv(r,i){if(Cd())return null;_v(r,i,!0)}function kS(){GS(function(){(ft&6)!==0?Vt(zn,RS):Uv()})}function Wm(){if(Bi===0){var r=Vo;r===0&&(r=pn,pn<<=1,(pn&261888)===0&&(pn=256)),Bi=r}return Bi}function Fv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:wo(""+r)}function Gv(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function MS(r,i,c,d,x){if(i==="submit"&&c&&c.stateNode===x){var b=Fv((x[gn]||null).action),T=d.submitter;T&&(i=(i=T[gn]||null)?Fv(i.formAction):T.getAttribute("formAction"),i!==null&&(b=i,T=null));var A=new mr("action","action",null,d,x);r.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Bi!==0){var L=T?Gv(x,T):new FormData(x);xm(c,{pending:!0,data:L,method:x.method,action:b},null,L)}}else typeof b=="function"&&(A.preventDefault(),L=T?Gv(x,T):new FormData(x),xm(c,{pending:!0,data:L,method:x.method,action:b},b,L))},currentTarget:x}]})}}for(var Zm=0;Zm<jf.length;Zm++){var ep=jf[Zm],DS=ep.toLowerCase(),PS=ep[0].toUpperCase()+ep.slice(1);$s(DS,"on"+PS)}$s(by,"onAnimationEnd"),$s(_y,"onAnimationIteration"),$s(wy,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(J2,"onTransitionRun"),$s(X2,"onTransitionStart"),$s(W2,"onTransitionCancel"),$s(Ey,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Bv(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],x=d.event;d=d.listeners;e:{var b=void 0;if(i)for(var T=d.length-1;0<=T;T--){var A=d[T],L=A.instance,X=A.currentTarget;if(A=A.listener,L!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=X;try{b(x)}catch(ae){Hu(ae)}x.currentTarget=null,b=L}else for(T=0;T<d.length;T++){if(A=d[T],L=A.instance,X=A.currentTarget,A=A.listener,L!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=X;try{b(x)}catch(ae){Hu(ae)}x.currentTarget=null,b=L}}}}function Ye(r,i){var c=i[yo];c===void 0&&(c=i[yo]=new Set);var d=r+"__bubble";c.has(d)||(Hv(i,r,2,!1),c.add(d))}function tp(r,i,c){var d=0;i&&(d|=4),Hv(c,r,d,i)}var kd="_reactListening"+Math.random().toString(36).slice(2);function np(r){if(!r[kd]){r[kd]=!0,zl.forEach(function(c){c!=="selectionchange"&&(jS.has(c)||tp(c,!1,r),tp(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[kd]||(i[kd]=!0,tp("selectionchange",!1,i))}}function Hv(r,i,c,d){switch(bb(i)){case 2:var x=cA;break;case 8:x=uA;break;default:x=yp}c=x.bind(null,i,c,r),x=void 0,!Aa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),d?x!==void 0?r.addEventListener(i,c,{capture:!0,passive:x}):r.addEventListener(i,c,!0):x!==void 0?r.addEventListener(i,c,{passive:x}):r.addEventListener(i,c,!1)}function sp(r,i,c,d,x){var b=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var A=d.stateNode.containerInfo;if(A===x)break;if(T===4)for(T=d.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;A!==null;){if(T=or(A),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){d=b=T;continue e}A=A.parentNode}}d=d.return}Ni(function(){var X=b,ae=_s(c),ce=[];e:{var Z=Ty.get(r);if(Z!==void 0){var se=mr,we=r;switch(r){case"keypress":if(Ia(c)===0)break e;case"keydown":case"keyup":se=Fu;break;case"focusin":we="focus",se=ka;break;case"focusout":we="blur",se=ka;break;case"beforeblur":case"afterblur":se=ka;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=E;break;case by:case _y:case wy:se=ju;break;case Ey:se=k;break;case"scroll":case"scrollend":se=Zl;break;case"wheel":se=te;break;case"copy":case"cut":case"paste":se=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ur;break;case"toggle":case"beforetoggle":se=qe}var ke=(i&4)!==0,Tt=!ke&&(r==="scroll"||r==="scrollend"),H=ke?Z!==null?Z+"Capture":null:Z;ke=[];for(var z=X,Q;z!==null;){var oe=z;if(Q=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Q===null||H===null||(oe=Fs(z,H),oe!=null&&ke.push(Rc(z,oe,Q))),Tt)break;z=z.return}0<ke.length&&(Z=new se(Z,we,null,c,ae),ce.push({event:Z,listeners:ke}))}}if((i&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",Z&&c!==Jl&&(we=c.relatedTarget||c.fromElement)&&(or(we)||we[ir]))break e;if((se||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,se?(we=c.relatedTarget||c.toElement,se=X,we=we?or(we):null,we!==null&&(Tt=l(we),ke=we.tag,we!==Tt||ke!==5&&ke!==27&&ke!==6)&&(we=null)):(se=null,we=X),se!==we)){if(ke=ec,oe="onMouseLeave",H="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Ur,oe="onPointerLeave",H="onPointerEnter",z="pointer"),Tt=se==null?Z:os(se),Q=we==null?Z:os(we),Z=new ke(oe,z+"leave",se,c,ae),Z.target=Tt,Z.relatedTarget=Q,oe=null,or(ae)===X&&(ke=new ke(H,z+"enter",we,c,ae),ke.target=Q,ke.relatedTarget=Tt,oe=ke),Tt=oe,se&&we)t:{for(ke=LS,H=se,z=we,Q=0,oe=H;oe;oe=ke(oe))Q++;oe=0;for(var Ae=z;Ae;Ae=ke(Ae))oe++;for(;0<Q-oe;)H=ke(H),Q--;for(;0<oe-Q;)z=ke(z),oe--;for(;Q--;){if(H===z||z!==null&&H===z.alternate){ke=H;break t}H=ke(H),z=ke(z)}ke=null}else ke=null;se!==null&&$v(ce,Z,se,ke,!1),we!==null&&Tt!==null&&$v(ce,Tt,we,ke,!0)}}e:{if(Z=X?os(X):window,se=Z.nodeName&&Z.nodeName.toLowerCase(),se==="select"||se==="input"&&Z.type==="file")var ot=cy;else if(oy(Z))if(uy)ot=K2;else{ot=H2;var Te=B2}else se=Z.nodeName,!se||se.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&_o(X.elementType)&&(ot=cy):ot=$2;if(ot&&(ot=ot(r,X))){ly(ce,ot,c,ae);break e}Te&&Te(r,Z,X),r==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Kl(Z,"number",Z.value)}switch(Te=X?os(X):window,r){case"focusin":(oy(Te)||Te.contentEditable==="true")&&(Io=Te,Mf=X,ic=null);break;case"focusout":ic=Mf=Io=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,xy(ce,c,ae);break;case"selectionchange":if(Q2)break;case"keydown":case"keyup":xy(ce,c,ae)}var Ge;if(ht)e:{switch(r){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Co?Ma(r,c)&&(Xe="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&(yr&&c.locale!=="ko"&&(Co||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Co&&(Ge=Wl()):(fr=ae,Xl="value"in fr?fr.value:fr.textContent,Co=!0)),Te=Md(X,Xe),0<Te.length&&(Xe=new gr(Xe,r,null,c,ae),ce.push({event:Xe,listeners:Te}),Ge?Xe.data=Ge:(Ge=Ao(c),Ge!==null&&(Xe.data=Ge)))),(Ge=Es?q2(r,c):z2(r,c))&&(Xe=Md(X,"onBeforeInput"),0<Xe.length&&(Te=new gr("onBeforeInput","beforeinput",null,c,ae),ce.push({event:Te,listeners:Xe}),Te.data=Ge)),MS(ce,r,X,c,ae)}Bv(ce,i)})}function Rc(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Md(r,i){for(var c=i+"Capture",d=[];r!==null;){var x=r,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Fs(r,c),x!=null&&d.unshift(Rc(r,x,b)),x=Fs(r,i),x!=null&&d.push(Rc(r,x,b))),r.tag===3)return d;r=r.return}return[]}function LS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $v(r,i,c,d,x){for(var b=i._reactName,T=[];c!==null&&c!==d;){var A=c,L=A.alternate,X=A.stateNode;if(A=A.tag,L!==null&&L===d)break;A!==5&&A!==26&&A!==27||X===null||(L=X,x?(X=Fs(c,b),X!=null&&T.unshift(Rc(c,X,L))):x||(X=Fs(c,b),X!=null&&T.push(Rc(c,X,L)))),c=c.return}T.length!==0&&r.push({event:i,listeners:T})}var VS=/\r\n?/g,US=/\u0000|\uFFFD/g;function Kv(r){return(typeof r=="string"?r:""+r).replace(VS,`
`).replace(US,"")}function Yv(r,i){return i=Kv(i),Kv(r)===i}function Et(r,i,c,d,x,b){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Qn(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Qn(r,""+d);break;case"className":ls(r,"class",d);break;case"tabIndex":ls(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(r,c,d);break;case"style":Ql(r,d,b);break;case"data":if(i!=="object"){ls(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=wo(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(i!=="input"&&Et(r,i,"name",x.name,x,null),Et(r,i,"formEncType",x.formEncType,x,null),Et(r,i,"formMethod",x.formMethod,x,null),Et(r,i,"formTarget",x.formTarget,x,null)):(Et(r,i,"encType",x.encType,x,null),Et(r,i,"method",x.method,x,null),Et(r,i,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=wo(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=zs);break;case"onScroll":d!=null&&Ye("scroll",r);break;case"onScrollEnd":d!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=wo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),vo(r,"popover",d);break;case"xlinkActuate":nn(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":nn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":nn(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":nn(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":nn(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":nn(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":nn(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":nn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":nn(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":vo(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Mu.get(c)||c,vo(r,c,d))}}function rp(r,i,c,d,x,b){switch(c){case"style":Ql(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Qn(r,d):(typeof d=="number"||typeof d=="bigint")&&Qn(r,""+d);break;case"onScroll":d!=null&&Ye("scroll",r);break;case"onScrollEnd":d!=null&&Ye("scrollend",r);break;case"onClick":d!=null&&(r.onclick=zs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),i=c.slice(2,x?c.length-7:void 0),b=r[gn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(i,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,d,x);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):vo(r,c,d)}}}function Nn(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var d=!1,x=!1,b;for(b in c)if(c.hasOwnProperty(b)){var T=c[b];if(T!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Et(r,i,b,T,c,null)}}x&&Et(r,i,"srcSet",c.srcSet,c,null),d&&Et(r,i,"src",c.src,c,null);return;case"input":Ye("invalid",r);var A=b=T=x=null,L=null,X=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":x=ae;break;case"type":T=ae;break;case"checked":L=ae;break;case"defaultChecked":X=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:Et(r,i,d,ae,c,null)}}Iu(r,b,A,L,X,T,x,!1);return;case"select":Ye("invalid",r),d=T=b=null;for(x in c)if(c.hasOwnProperty(x)&&(A=c[x],A!=null))switch(x){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":d=A;default:Et(r,i,x,A,c,null)}i=b,c=T,r.multiple=!!d,i!=null?_i(r,!!d,i,!1):c!=null&&_i(r,!!d,c,!0);return;case"textarea":Ye("invalid",r),b=x=d=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":d=A;break;case"defaultValue":x=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Et(r,i,T,A,c,null)}wi(r,d,x,b);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Et(r,i,L,d,c,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(d=0;d<Ic.length;d++)Ye(Ic[d],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(d=c[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Et(r,i,X,d,c,null)}return;default:if(_o(i)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&rp(r,i,ae,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&Et(r,i,A,d,c,null))}function OS(r,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,T=null,A=null,L=null,X=null,ae=null;for(se in c){var ce=c[se];if(c.hasOwnProperty(se)&&ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":L=ce;default:d.hasOwnProperty(se)||Et(r,i,se,null,d,ce)}}for(var Z in d){var se=d[Z];if(ce=c[Z],d.hasOwnProperty(Z)&&(se!=null||ce!=null))switch(Z){case"type":b=se;break;case"name":x=se;break;case"checked":X=se;break;case"defaultChecked":ae=se;break;case"value":T=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,i));break;default:se!==ce&&Et(r,i,Z,se,d,ce)}}bo(r,T,A,L,X,ae,b,x);return;case"select":se=T=A=Z=null;for(b in c)if(L=c[b],c.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":se=L;default:d.hasOwnProperty(b)||Et(r,i,b,null,d,L)}for(x in d)if(b=d[x],L=c[x],d.hasOwnProperty(x)&&(b!=null||L!=null))switch(x){case"value":Z=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==L&&Et(r,i,x,b,d,L)}i=A,c=T,d=se,Z!=null?_i(r,!!c,Z,!1):!!d!=!!c&&(i!=null?_i(r,!!c,i,!0):_i(r,!!c,c?[]:"",!1));return;case"textarea":se=Z=null;for(A in c)if(x=c[A],c.hasOwnProperty(A)&&x!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Et(r,i,A,null,d,x)}for(T in d)if(x=d[T],b=c[T],d.hasOwnProperty(T)&&(x!=null||b!=null))switch(T){case"value":Z=x;break;case"defaultValue":se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&Et(r,i,T,x,d,b)}Ru(r,Z,se);return;case"option":for(var we in c)if(Z=c[we],c.hasOwnProperty(we)&&Z!=null&&!d.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:Et(r,i,we,null,d,Z)}for(L in d)if(Z=d[L],se=c[L],d.hasOwnProperty(L)&&Z!==se&&(Z!=null||se!=null))switch(L){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Et(r,i,L,Z,d,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in c)Z=c[ke],c.hasOwnProperty(ke)&&Z!=null&&!d.hasOwnProperty(ke)&&Et(r,i,ke,null,d,Z);for(X in d)if(Z=d[X],se=c[X],d.hasOwnProperty(X)&&Z!==se&&(Z!=null||se!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Et(r,i,X,Z,d,se)}return;default:if(_o(i)){for(var Tt in c)Z=c[Tt],c.hasOwnProperty(Tt)&&Z!==void 0&&!d.hasOwnProperty(Tt)&&rp(r,i,Tt,void 0,d,Z);for(ae in d)Z=d[ae],se=c[ae],!d.hasOwnProperty(ae)||Z===se||Z===void 0&&se===void 0||rp(r,i,ae,Z,d,se);return}}for(var H in c)Z=c[H],c.hasOwnProperty(H)&&Z!=null&&!d.hasOwnProperty(H)&&Et(r,i,H,null,d,Z);for(ce in d)Z=d[ce],se=c[ce],!d.hasOwnProperty(ce)||Z===se||Z==null&&se==null||Et(r,i,ce,Z,d,se)}function Qv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qS(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var x=c[d],b=x.transferSize,T=x.initiatorType,A=x.duration;if(b&&A&&Qv(T)){for(T=0,A=x.responseEnd,d+=1;d<c.length;d++){var L=c[d],X=L.startTime;if(X>A)break;var ae=L.transferSize,ce=L.initiatorType;ae&&Qv(ce)&&(L=L.responseEnd,T+=ae*(L<A?1:(A-X)/(L-X)))}if(--d,i+=8*(b+T)/(x.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ip=null,ap=null;function Dd(r){return r.nodeType===9?r:r.ownerDocument}function Jv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function op(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lp=null;function zS(){var r=window.event;return r&&r.type==="popstate"?r===lp?!1:(lp=r,!0):(lp=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(r){return Zv.resolve(null).then(r).catch(BS)}:Wv;function BS(r){setTimeout(function(){throw r})}function Hi(r){return r==="head"}function eb(r,i){var c=i,d=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(d===0){r.removeChild(x),nl(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")kc(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,kc(c);for(var b=c.firstChild;b;){var T=b.nextSibling,A=b.nodeName;b[ar]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=T}}else c==="body"&&kc(r.ownerDocument.body);c=x}while(c);nl(i)}function tb(r,i){var c=r;r=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=d}while(c)}function cp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":cp(c),xo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function HS(r,i,c,d){for(;r.nodeType===1;){var x=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[ar])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Rs(r.nextSibling),r===null)break}return null}function $S(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Rs(r.nextSibling),r===null))return null;return r}function nb(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Rs(r.nextSibling),r===null))return null;return r}function up(r){return r.data==="$?"||r.data==="$~"}function dp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function KS(r,i){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Rs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var hp=null;function sb(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(i===0)return Rs(r.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}r=r.nextSibling}return null}function rb(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return r;i--}else c!=="/$"&&c!=="/&"||i++}r=r.previousSibling}return null}function ib(r,i,c){switch(i=Dd(c),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function kc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);xo(r)}var ks=new Map,ab=new Set;function Pd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Zr=pe.d;pe.d={f:YS,r:QS,D:JS,C:XS,L:WS,m:ZS,X:tA,S:eA,M:nA};function YS(){var r=Zr.f(),i=Nd();return r||i}function QS(r){var i=bs(r);i!==null&&i.tag===5&&i.type==="form"?Ex(i):Zr.r(r)}var Zo=typeof document>"u"?null:document;function ob(r,i,c){var d=Zo;if(d&&typeof i=="string"&&i){var x=Yn(i);x='link[rel="'+r+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),ab.has(x)||(ab.add(x),r={rel:r,crossOrigin:c,href:i},d.querySelector(x)===null&&(i=d.createElement("link"),Nn(i,"link",r),tn(i),d.head.appendChild(i)))}}function JS(r){Zr.D(r),ob("dns-prefetch",r,null)}function XS(r,i){Zr.C(r,i),ob("preconnect",r,i)}function WS(r,i,c){Zr.L(r,i,c);var d=Zo;if(d&&r&&i){var x='link[rel="preload"][as="'+Yn(i)+'"]';i==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+Yn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+Yn(c.imageSizes)+'"]')):x+='[href="'+Yn(r)+'"]';var b=x;switch(i){case"style":b=el(r);break;case"script":b=tl(r)}ks.has(b)||(r=_({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),ks.set(b,r),d.querySelector(x)!==null||i==="style"&&d.querySelector(Mc(b))||i==="script"&&d.querySelector(Dc(b))||(i=d.createElement("link"),Nn(i,"link",r),tn(i),d.head.appendChild(i)))}}function ZS(r,i){Zr.m(r,i);var c=Zo;if(c&&r){var d=i&&typeof i.as=="string"?i.as:"script",x='link[rel="modulepreload"][as="'+Yn(d)+'"][href="'+Yn(r)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=tl(r)}if(!ks.has(b)&&(r=_({rel:"modulepreload",href:r},i),ks.set(b,r),c.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dc(b)))return}d=c.createElement("link"),Nn(d,"link",r),tn(d),c.head.appendChild(d)}}}function eA(r,i,c){Zr.S(r,i,c);var d=Zo;if(d&&r){var x=lr(d).hoistableStyles,b=el(r);i=i||"default";var T=x.get(b);if(!T){var A={loading:0,preload:null};if(T=d.querySelector(Mc(b)))A.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},c),(c=ks.get(b))&&fp(r,c);var L=T=d.createElement("link");tn(L),Nn(L,"link",r),L._p=new Promise(function(X,ae){L.onload=X,L.onerror=ae}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,jd(T,i,d)}T={type:"stylesheet",instance:T,count:1,state:A},x.set(b,T)}}}function tA(r,i){Zr.X(r,i);var c=Zo;if(c&&r){var d=lr(c).hoistableScripts,x=tl(r),b=d.get(x);b||(b=c.querySelector(Dc(x)),b||(r=_({src:r,async:!0},i),(i=ks.get(x))&&mp(r,i),b=c.createElement("script"),tn(b),Nn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function nA(r,i){Zr.M(r,i);var c=Zo;if(c&&r){var d=lr(c).hoistableScripts,x=tl(r),b=d.get(x);b||(b=c.querySelector(Dc(x)),b||(r=_({src:r,async:!0,type:"module"},i),(i=ks.get(x))&&mp(r,i),b=c.createElement("script"),tn(b),Nn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function lb(r,i,c,d){var x=(x=Ee.current)?Pd(x):null;if(!x)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=el(c.href),c=lr(x).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=el(c.href);var b=lr(x).hoistableStyles,T=b.get(r);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,T),(b=x.querySelector(Mc(r)))&&!b._p&&(T.instance=b,T.state.loading=5),ks.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ks.set(r,c),b||sA(x,r,c,T.state))),i&&d===null)throw Error(s(528,""));return T}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(c),c=lr(x).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function el(r){return'href="'+Yn(r)+'"'}function Mc(r){return'link[rel="stylesheet"]['+r+"]"}function cb(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function sA(r,i,c,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Nn(i,"link",c),tn(i),r.head.appendChild(i))}function tl(r){return'[src="'+Yn(r)+'"]'}function Dc(r){return"script[async]"+r}function ub(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+Yn(c.href)+'"]');if(d)return i.instance=d,tn(d),d;var x=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),tn(d),Nn(d,"style",x),jd(d,c.precedence,r),i.instance=d;case"stylesheet":x=el(c.href);var b=r.querySelector(Mc(x));if(b)return i.state.loading|=4,i.instance=b,tn(b),b;d=cb(c),(x=ks.get(x))&&fp(d,x),b=(r.ownerDocument||r).createElement("link"),tn(b);var T=b;return T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),Nn(b,"link",d),i.state.loading|=4,jd(b,c.precedence,r),i.instance=b;case"script":return b=tl(c.src),(x=r.querySelector(Dc(b)))?(i.instance=x,tn(x),x):(d=c,(x=ks.get(b))&&(d=_({},c),mp(d,x)),r=r.ownerDocument||r,x=r.createElement("script"),tn(x),Nn(x,"link",d),r.head.appendChild(x),i.instance=x);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,jd(d,c.precedence,r));return i.instance}function jd(r,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,T=0;T<d.length;T++){var A=d[T];if(A.dataset.precedence===i)b=A;else if(b!==x)break}b?b.parentNode.insertBefore(r,b.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function fp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ld=null;function db(r,i,c){if(Ld===null){var d=new Map,x=Ld=new Map;x.set(c,d)}else x=Ld,d=x.get(c),d||(d=new Map,x.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),x=0;x<c.length;x++){var b=c[x];if(!(b[ar]||b[en]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(i)||"";T=r+T;var A=d.get(T);A?A.push(b):d.set(T,[b])}}return d}function hb(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function rA(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function fb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function iA(r,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=el(d.href),b=i.querySelector(Mc(x));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Vd.bind(r),i.then(r,r)),c.state.loading|=4,c.instance=b,tn(b);return}b=i.ownerDocument||i,d=cb(d),(x=ks.get(x))&&fp(d,x),b=b.createElement("link"),tn(b);var T=b;T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),Nn(b,"link",d),c.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Vd.bind(r),i.addEventListener("load",c),i.addEventListener("error",c))}}var pp=0;function aA(r,i){return r.stylesheets&&r.count===0&&Od(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var d=setTimeout(function(){if(r.stylesheets&&Od(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+i);0<r.imgBytes&&pp===0&&(pp=62500*qS());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Od(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>pp?50:800)+i);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function Vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ud=null;function Od(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ud=new Map,i.forEach(oA,r),Ud=null,Vd.call(r))}function oA(r,i){if(!(i.state.loading&4)){var c=Ud.get(r);if(c)var d=c.get(null);else{c=new Map,Ud.set(r,c);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var T=x[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}x=i.instance,T=x.getAttribute("data-precedence"),b=c.get(T)||d,b===d&&c.set(null,x),c.set(T,x),this.count++,d=Vd.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),i.state.loading|=4}}var Pc={$$typeof:$,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function lA(r,i,c,d,x,b,T,A,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function mb(r,i,c,d,x,b,T,A,L,X,ae,ce){return r=new lA(r,i,c,T,L,X,ae,ce,A),i=1,b===!0&&(i|=24),b=us(3,null,null,i),r.current=b,b.stateNode=r,i=Yf(),i.refCount++,r.pooledCache=i,i.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:i},Wf(b),r}function pb(r){return r?(r=Mo,r):Mo}function gb(r,i,c,d,x,b){x=pb(x),d.context===null?d.context=x:d.pendingContext=x,d=Pi(i),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=ji(r,d,i),c!==null&&(es(c,r,i),hc(c,r,i))}function yb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function gp(r,i){yb(r,i),(r=r.alternate)&&yb(r,i)}function xb(r){if(r.tag===13||r.tag===31){var i=ja(r,67108864);i!==null&&es(i,r,67108864),gp(r,67108864)}}function vb(r){if(r.tag===13||r.tag===31){var i=ps();i=Ea(i);var c=ja(r,i);c!==null&&es(c,r,i),gp(r,i)}}var qd=!0;function cA(r,i,c,d){var x=ee.T;ee.T=null;var b=pe.p;try{pe.p=2,yp(r,i,c,d)}finally{pe.p=b,ee.T=x}}function uA(r,i,c,d){var x=ee.T;ee.T=null;var b=pe.p;try{pe.p=8,yp(r,i,c,d)}finally{pe.p=b,ee.T=x}}function yp(r,i,c,d){if(qd){var x=xp(d);if(x===null)sp(r,i,d,zd,c),_b(r,d);else if(hA(x,r,i,c,d))d.stopPropagation();else if(_b(r,d),i&4&&-1<dA.indexOf(r)){for(;x!==null;){var b=bs(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Ne(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var L=1<<31-bt(T);A.entanglements[1]|=L,T&=~L}_r(b),(ft&6)===0&&(Ed=dn()+500,Cc(0))}}break;case 31:case 13:A=ja(b,2),A!==null&&es(A,b,2),Nd(),gp(b,2)}if(b=xp(d),b===null&&sp(r,i,d,zd,c),b===x)break;x=b}x!==null&&d.stopPropagation()}else sp(r,i,d,null,c)}}function xp(r){return r=_s(r),vp(r)}var zd=null;function vp(r){if(zd=null,r=or(r),r!==null){var i=l(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=u(i),r!==null)return r;r=null}else if(c===31){if(r=h(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return zd=r,null}function bb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kn()){case zn:return 2;case rr:return 8;case xs:case me:return 32;case He:return 268435456;default:return 32}default:return 32}}var bp=!1,$i=null,Ki=null,Yi=null,jc=new Map,Lc=new Map,Qi=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _b(r,i){switch(r){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":jc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(i.pointerId)}}function Vc(r,i,c,d,x,b){return r===null||r.nativeEvent!==b?(r={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},i!==null&&(i=bs(i),i!==null&&xb(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),r)}function hA(r,i,c,d,x){switch(i){case"focusin":return $i=Vc($i,r,i,c,d,x),!0;case"dragenter":return Ki=Vc(Ki,r,i,c,d,x),!0;case"mouseover":return Yi=Vc(Yi,r,i,c,d,x),!0;case"pointerover":var b=x.pointerId;return jc.set(b,Vc(jc.get(b)||null,r,i,c,d,x)),!0;case"gotpointercapture":return b=x.pointerId,Lc.set(b,Vc(Lc.get(b)||null,r,i,c,d,x)),!0}return!1}function wb(r){var i=or(r.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){r.blockedOn=i,Os(r.priority,function(){vb(c)});return}}else if(i===31){if(i=h(c),i!==null){r.blockedOn=i,Os(r.priority,function(){vb(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Fd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=xp(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Jl=d,c.target.dispatchEvent(d),Jl=null}else return i=bs(c),i!==null&&xb(i),r.blockedOn=c,!1;i.shift()}return!0}function Eb(r,i,c){Fd(r)&&c.delete(i)}function fA(){bp=!1,$i!==null&&Fd($i)&&($i=null),Ki!==null&&Fd(Ki)&&(Ki=null),Yi!==null&&Fd(Yi)&&(Yi=null),jc.forEach(Eb),Lc.forEach(Eb)}function Gd(r,i){r.blockedOn===i&&(r.blockedOn=null,bp||(bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fA)))}var Bd=null;function Tb(r){Bd!==r&&(Bd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bd===r&&(Bd=null);for(var i=0;i<r.length;i+=3){var c=r[i],d=r[i+1],x=r[i+2];if(typeof d!="function"){if(vp(d||c)===null)continue;break}var b=bs(c);b!==null&&(r.splice(i,3),i-=3,xm(b,{pending:!0,data:x,method:c.method,action:d},d,x))}}))}function nl(r){function i(L){return Gd(L,r)}$i!==null&&Gd($i,r),Ki!==null&&Gd(Ki,r),Yi!==null&&Gd(Yi,r),jc.forEach(i),Lc.forEach(i);for(var c=0;c<Qi.length;c++){var d=Qi[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Qi.length&&(c=Qi[0],c.blockedOn===null);)wb(c),c.blockedOn===null&&Qi.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var x=c[d],b=c[d+1],T=x[gn]||null;if(typeof b=="function")T||Tb(c);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(x=b,T=b[gn]||null)A=T.formAction;else if(vp(x)!==null)continue}else A=T.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),Tb(c)}}}function Nb(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function i(){x!==null&&(x(),x=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),x!==null&&(x(),x=null)}}}function _p(r){this._internalRoot=r}Hd.prototype.render=_p.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,d=ps();gb(c,d,r,i,null,null)},Hd.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;gb(r.current,2,null,r,null,null),Nd(),i[ir]=null}};function Hd(r){this._internalRoot=r}Hd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Nu();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Qi.length&&i!==0&&i<Qi[c].priority;c++);Qi.splice(c,0,r),c===0&&wb(r)}};var Sb=e.version;if(Sb!=="19.2.0")throw Error(s(527,Sb,"19.2.0"));pe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var mA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{$t=$d.inject(mA),gt=$d}catch{}}return Oc.createRoot=function(r,i){if(!a(r))throw Error(s(299));var c=!1,d="",x=Dx,b=Px,T=jx;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=mb(r,1,!1,null,null,c,d,null,x,b,T,Nb),r[ir]=i.current,np(r),new _p(i)},Oc.hydrateRoot=function(r,i,c){if(!a(r))throw Error(s(299));var d=!1,x="",b=Dx,T=Px,A=jx,L=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(L=c.formState)),i=mb(r,1,!0,i,c??null,d,x,L,b,T,A,Nb),i.context=pb(null),c=i.current,d=ps(),d=Ea(d),x=Pi(d),x.callback=null,ji(c,x,d),c=d,i.current.lanes=c,Kt(i,c),_r(i),r[ir]=i.current,np(r),new Hd(i)},Oc.version="19.2.0",Oc}var Lb;function TA(){if(Lb)return Tp.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tp.exports=EA(),Tp.exports}var NA=TA();const SA=rE(NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Vb=n=>{const e=CA(n);return e.charAt(0).toUpperCase()+e.slice(1)},aE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),IA=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>F.createElement("svg",{ref:p,...RA,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:aE("lucide",a),...!l&&!IA(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,v])=>F.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,e)=>{const t=F.forwardRef(({className:s,...a},l)=>F.createElement(kA,{ref:l,iconNode:e,className:aE(`lucide-${AA(Vb(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Vb(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],DA=ge("activity",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hh=ge("arrow-left",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lt=ge("arrow-right",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],to=ge("award",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],UA=ge("bell",VA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Un=ge("book-open",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],zA=ge("book",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],vl=ge("brain",FA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],oE=ge("briefcase",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fh=ge("calendar",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],lE=ge("chart-column",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],KA=ge("chart-no-axes-column-increasing",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],no=ge("chevron-down",YA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Er=ge("chevron-left",QA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cp=ge("chevron-right",JA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mh=ge("circle-alert",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],la=ge("circle-check-big",WA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ns=ge("circle-check",ZA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ph=ge("circle-plus",eC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ni=ge("circle-question-mark",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],sC=ge("circle-user",nC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],iC=ge("circle-x",rC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hh=ge("clock",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],lC=ge("cloud-upload",oC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Al=ge("crown",cC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jp=ge("download",uC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xp=ge("eye",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Wp=ge("facebook",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],mC=ge("file-check",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],gC=ge("file-plus",pC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],xC=ge("file-search",yC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kr=ge("file-text",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Gg=ge("flag",bC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],gh=ge("flame",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],zc=ge("folder-open",wC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],TC=ge("globe",EC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],oi=ge("graduation-cap",NC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yh=ge("house",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],CC=ge("info",AC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Bg=ge("languages",IC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ca=ge("layers",RC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ub=ge("layout-dashboard",kC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],DC=ge("link",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],jC=ge("list",PC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ft=ge("loader-circle",LC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Zp=ge("log-in",VC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Qa=ge("lock",UC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],su=ge("log-out",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eg=ge("mail",qC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tg=ge("map-pin",zC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],GC=ge("medal",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Yc=ge("megaphone",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],$C=ge("menu",HC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Hg=ge("message-circle",KC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cl=ge("message-square",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],so=ge("monitor",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],cE=ge("move-right",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],WC=ge("octagon-alert",XC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ob=ge("palette",ZC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tI=ge("pen-line",eI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],$g=ge("pen-tool",nI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],rI=ge("percent",sI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],aI=ge("quote",iI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],uE=ge("refresh-cw",oI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dE=ge("rotate-ccw",lI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sa=ge("save",cI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],xh=ge("school",uI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ua=ge("search",dI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fI=ge("send",hI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pI=ge("share-2",mI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ng=ge("shield-alert",gI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xI=ge("shield-check",yI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],bI=ge("smartphone",vI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hE=ge("sparkles",_I);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sg=ge("square-pen",wI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],si=ge("star",EI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fE=ge("tag",TI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kg=ge("target",NI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],AI=ge("text-align-start",SI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],II=ge("thumbs-up",CI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],mE=ge("timer",RI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rg=ge("trash-2",kI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],DI=ge("trending-up",MI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ig=ge("triangle-alert",PI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ul=ge("trophy",jI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],VI=ge("type",LI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jn=ge("user",UI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qI=ge("users",OI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tr=ge("x",zI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$h=ge("zap",FI),GI=()=>{};var qb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},BI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},gE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let w=(h&15)<<2|m>>6,S=m&63;p||(S=64,u||(w=64)),s.push(t[v],t[_],t[w],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||m==null||_==null)throw new HI;const w=l<<2|h>>4;if(s.push(w),m!==64){const S=h<<4&240|m>>2;if(s.push(S),_!==64){const V=m<<6&192|_;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(n){const e=pE(n);return gE.encodeByteArray(e,!0)},vh=function(n){return $I(n).replace(/\./g,"")},yE=function(n){try{return gE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=()=>KI().__FIREBASE_DEFAULTS__,QI=()=>{if(typeof process>"u"||typeof qb>"u")return;const n=qb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yE(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return GI()||YI()||QI()||JI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xE=n=>{var e,t;return(t=(e=Kh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},XI=n=>{const e=xE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},vE=()=>{var n;return(n=Kh())==null?void 0:n.config},bE=n=>{var e;return(e=Kh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _E(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vh(JSON.stringify(t)),vh(JSON.stringify(u)),""].join(".")}const Qc={};function eR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?n.emulator.push(e):n.prod.push(e);return n}function tR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zb=!1;function wE(n,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Qc[n]===e||Qc[n]||zb)return;Qc[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",l=eR().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{zb=!0,u()},w}function v(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=tR(s),S=t("text"),V=document.getElementById(S)||document.createElement("span"),P=t("learnmore"),B=document.getElementById(P)||document.createElement("a"),K=t("preprendIcon"),re=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const $=w.element;h($),v(B,P);const ie=m();p(re,K),$.append(re,V,B,ie),document.body.appendChild($)}l?(V.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function sR(){var e;const n=(e=Kh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aR(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function NE(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function lR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class tr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=cR,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ho.prototype.create)}}class ho{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?uR(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new tr(a,h,s)}}function uR(n,e){return n.replace(dR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const dR=/\{\$([^}]+)}/g;function hR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function li(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(Fb(l)&&Fb(u)){if(!li(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Fb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Gc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fR(n,e){const t=new mR(n,e);return t.subscribe.bind(t)}class mR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Ip),a.error===void 0&&(a.error=Ip),a.complete===void 0&&(a.complete=Ip);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,yR=2,xR=14400*1e3,vR=.5;function Gb(n,e=gR,t=yR){const s=e*Math.pow(t,n),a=Math.round(vR*s*(Math.random()-.5)*2);return Math.min(xR,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n){return n&&n._delegate?n._delegate:n}class Xs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new WI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wR(e))try{this.getOrInitializeService({instanceIdentifier:Ya})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ya){return this.instances.has(e)}getOptions(e=Ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_R(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ya){return this.component?this.component.multipleInstances?e:Ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(n){return n===Ya?void 0:n}function wR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const TR={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},NR=We.INFO,SR={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},AR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=SR[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=NR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const CR=(n,e)=>e.some(t=>n instanceof t);let Bb,Hb;function IR(){return Bb||(Bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RR(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,ag=new WeakMap,AE=new WeakMap,Rp=new WeakMap,Yg=new WeakMap;function kR(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ra(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&SE.set(t,n)}).catch(()=>{}),Yg.set(e,n),e}function MR(n){if(ag.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});ag.set(n,e)}let og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DR(n){og=n(og)}function PR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(kp(this),e,...t);return AE.set(s,e.sort?e.sort():[e]),ra(s)}:RR().includes(n)?function(...e){return n.apply(kp(this),e),ra(SE.get(this))}:function(...e){return ra(n.apply(kp(this),e))}}function jR(n){return typeof n=="function"?PR(n):(n instanceof IDBTransaction&&MR(n),CR(n,IR())?new Proxy(n,og):n)}function ra(n){if(n instanceof IDBRequest)return kR(n);if(Rp.has(n))return Rp.get(n);const e=jR(n);return e!==n&&(Rp.set(n,e),Yg.set(e,n)),e}const kp=n=>Yg.get(n);function CE(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=ra(u);return s&&u.addEventListener("upgradeneeded",p=>{s(ra(u.result),p.oldVersion,p.newVersion,ra(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const LR=["get","getKey","getAll","getAllKeys","count"],VR=["put","add","delete","clear"],Mp=new Map;function $b(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mp.get(e))return Mp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=VR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||LR.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return Mp.set(e,l),l}DR(n=>({...n,get:(e,t,s)=>$b(e,t)||n.get(e,t,s),has:(e,t)=>!!$b(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function OR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",Kb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Yh("@firebase/app"),qR="@firebase/app-compat",zR="@firebase/analytics-compat",FR="@firebase/analytics",GR="@firebase/app-check-compat",BR="@firebase/app-check",HR="@firebase/auth",$R="@firebase/auth-compat",KR="@firebase/database",YR="@firebase/data-connect",QR="@firebase/database-compat",JR="@firebase/functions",XR="@firebase/functions-compat",WR="@firebase/installations",ZR="@firebase/installations-compat",e4="@firebase/messaging",t4="@firebase/messaging-compat",n4="@firebase/performance",s4="@firebase/performance-compat",r4="@firebase/remote-config",i4="@firebase/remote-config-compat",a4="@firebase/storage",o4="@firebase/storage-compat",l4="@firebase/firestore",c4="@firebase/ai",u4="@firebase/firestore-compat",d4="firebase",h4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",f4={[lg]:"fire-core",[qR]:"fire-core-compat",[FR]:"fire-analytics",[zR]:"fire-analytics-compat",[BR]:"fire-app-check",[GR]:"fire-app-check-compat",[HR]:"fire-auth",[$R]:"fire-auth-compat",[KR]:"fire-rtdb",[YR]:"fire-data-connect",[QR]:"fire-rtdb-compat",[JR]:"fire-fn",[XR]:"fire-fn-compat",[WR]:"fire-iid",[ZR]:"fire-iid-compat",[e4]:"fire-fcm",[t4]:"fire-fcm-compat",[n4]:"fire-perf",[s4]:"fire-perf-compat",[r4]:"fire-rc",[i4]:"fire-rc-compat",[a4]:"fire-gcs",[o4]:"fire-gcs-compat",[l4]:"fire-fst",[u4]:"fire-fst-compat",[c4]:"fire-vertex","fire-js":"fire-js",[d4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,m4=new Map,ug=new Map;function Yb(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mr(n){const e=n.name;if(ug.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,n);for(const t of bh.values())Yb(t,n);for(const t of m4.values())Yb(t,n);return!0}function fo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ms(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new ho("app","Firebase",p4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=h4;function IE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:cg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=vE()),!t)throw ia.create("no-options");const l=bh.get(a);if(l){if(li(t,l.options)&&li(s,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new ER(a);for(const p of ug.values())u.addComponent(p);const h=new g4(t,s,u);return bh.set(a,h),h}function Qg(n=cg){const e=bh.get(n);if(!e&&n===cg&&vE())return IE();if(!e)throw ia.create("no-app",{appName:n});return e}function Ps(n,e,t){let s=f4[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(u.join(" "));return}Mr(new Xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="firebase-heartbeat-database",x4=1,ru="firebase-heartbeat-store";let Dp=null;function RE(){return Dp||(Dp=CE(y4,x4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),Dp}async function v4(n){try{const t=(await RE()).transaction(ru),s=await t.objectStore(ru).get(kE(n));return await t.done,s}catch(e){if(e instanceof tr)ci.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function Qb(n,e){try{const s=(await RE()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,kE(n)),await s.done}catch(t){if(t instanceof tr)ci.warn(t.message);else{const s=ia.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(s.message)}}}function kE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=1024,_4=30;class w4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Jb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_4){const u=N4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ci.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jb(),{heartbeatsToSend:s,unsentEntries:a}=E4(this._heartbeatsCache.heartbeats),l=vh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ci.warn(t),""}}}function Jb(){return new Date().toISOString().substring(0,10)}function E4(n,e=b4){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Xb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Xb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class T4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?NE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await v4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xb(n){return vh(JSON.stringify({version:2,heartbeats:n})).length}function N4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n){Mr(new Xs("platform-logger",e=>new UR(e),"PRIVATE")),Mr(new Xs("heartbeat",e=>new w4(e),"PRIVATE")),Ps(lg,Kb,n),Ps(lg,Kb,"esm2020"),Ps("fire-js","")}S4("");var A4="firebase",C4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps(A4,C4,"app");function ME(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I4=ME,DE=new ho("auth","Firebase",ME());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Yh("@firebase/auth");function R4(n,...e){_h.logLevel<=We.WARN&&_h.warn(`Auth (${Il}): ${n}`,...e)}function eh(n,...e){_h.logLevel<=We.ERROR&&_h.error(`Auth (${Il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,...e){throw Jg(n,...e)}function Nr(n,...e){return Jg(n,...e)}function PE(n,e,t){const s={...I4(),[e]:t};return new ho("auth","Firebase",s).create(e,{appName:n.name})}function ri(n){return PE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return DE.create(n,...e)}function Me(n,e,...t){if(!n)throw Jg(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eh(e),new Error(e)}function ui(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function k4(){return Wb()==="http:"||Wb()==="https:"}function Wb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k4()||EE()||"connection"in navigator)?navigator.onLine:!0}function D4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=nR()||iR()}get(){return M4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n,e){ui(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L4=new gu(3e4,6e4);function pi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function gi(n,e,t,s,a={}){return LE(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=pu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return rR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(m.credentials="include"),jE.fetch()(await VE(n,n.config.apiHost,t,h),m)})}async function LE(n,e,t){n._canInitEmulator=!1;const s={...P4,...e};try{const a=new U4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Kd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Kd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Kd(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw PE(n,v,m);Ws(n,v)}}catch(a){if(a instanceof tr)throw a;Ws(n,"network-request-failed",{message:String(a)})}}async function yu(n,e,t,s,a={}){const l=await gi(n,e,t,s,a);return"mfaPendingCredential"in l&&Ws(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function VE(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?Xg(n.config,a):`${n.config.apiScheme}://${a}`;return j4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function V4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Nr(this.auth,"network-request-failed")),L4.get())})}}function Kd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Nr(n,e,s);return a.customData._tokenResponse=t,a}function Zb(n){return n!==void 0&&n.enterprise!==void 0}class O4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q4(n,e){return gi(n,"GET","/v2/recaptchaConfig",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(n,e){return gi(n,"POST","/v1/accounts:delete",e)}async function wh(n,e){return gi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F4(n,e=!1){const t=Bt(n),s=await t.getIdToken(e),a=Wg(s);Me(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Jc(Pp(a.auth_time)),issuedAtTime:Jc(Pp(a.iat)),expirationTime:Jc(Pp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pp(n){return Number(n)*1e3}function Wg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const a=yE(t);return a?JSON.parse(a):(eh("Failed to decode base64 JWT payload"),null)}catch(a){return eh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function e_(n){const e=Wg(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof tr&&G4(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function G4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await iu(n,wh(e,{idToken:t}));Me(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?UE(a.providerUserInfo):[],u=$4(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),m=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function H4(n){const e=Bt(n);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $4(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function UE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(n,e){const t=await LE(n,{},async()=>{const s=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await VE(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(p.credentials="include"),jE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y4(n,e){return gi(n,"POST","/v2/accounts:revokeToken",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=e_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await K4(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new dl;return s&&(Me(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Me(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Me(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new B4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return F4(this,e)}reload(){return H4(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ms(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await iu(this,z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:S,providerData:V,stsTokenManager:P}=t;Me(_&&P,e,"internal-error");const B=dl.fromJSON(this.name,P);Me(typeof _=="string",e,"internal-error"),Xi(s,e.name),Xi(a,e.name),Me(typeof w=="boolean",e,"internal-error"),Me(typeof S=="boolean",e,"internal-error"),Xi(l,e.name),Xi(u,e.name),Xi(h,e.name),Xi(p,e.name),Xi(m,e.name),Xi(v,e.name);const K=new Qs({uid:_,auth:e,email:a,emailVerified:w,displayName:s,isAnonymous:S,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:B,createdAt:m,lastLoginAt:v});return V&&Array.isArray(V)&&(K.providerData=V.map(re=>({...re}))),p&&(K._redirectEventId=p),K}static async _fromIdTokenResponse(e,t,s=!1){const a=new dl;a.updateFromServerResponse(t);const l=new Qs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Eh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Me(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?UE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new dl;h.updateFromIdToken(s);const p=new Qs({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function ti(n){ui(n instanceof Function,"Expected a class definition");let e=t_.get(n);return e?(ui(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OE.type="NONE";const n_=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n,e,t){return`firebase:${n}:${e}:${t}`}class hl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=th(this.userKey,a.apiKey,l),this.fullPersistenceKey=th("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wh(this.auth,{idToken:e}).catch(()=>{});return t?Qs._fromGetAccountInfoResponse(this.auth,t,e):null}return Qs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new hl(ti(n_),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||ti(n_);const u=th(s,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(u);if(v){let _;if(typeof v=="string"){const w=await wh(e,{idToken:v}).catch(()=>{});if(!w)break;_=await Qs._fromGetAccountInfoResponse(e,w,v)}else _=Qs._fromJSON(e,v);m!==l&&(h=_),l=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new hl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new hl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HE(e))return"Blackberry";if($E(e))return"Webos";if(zE(e))return"Safari";if((e.includes("chrome/")||FE(e))&&!e.includes("edge/"))return"Chrome";if(BE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function qE(n=On()){return/firefox\//i.test(n)}function zE(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FE(n=On()){return/crios\//i.test(n)}function GE(n=On()){return/iemobile/i.test(n)}function BE(n=On()){return/android/i.test(n)}function HE(n=On()){return/blackberry/i.test(n)}function $E(n=On()){return/webos/i.test(n)}function Zg(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Q4(n=On()){var e;return Zg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function J4(){return aR()&&document.documentMode===10}function KE(n=On()){return Zg(n)||BE(n)||$E(n)||HE(n)||/windows phone/i.test(n)||GE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n,e=[]){let t;switch(n){case"Browser":t=s_(On());break;case"Worker":t=`${s_(On())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Il}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n,e={}){return gi(n,"GET","/v2/passwordPolicy",pi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=6;class e5{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Z4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r_(this),this.idTokenSubscription=new r_(this),this.beforeStateQueue=new X4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wh(this,{idToken:e}),s=await Qs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ms(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ms(this.app))return Promise.reject(ri(this));const t=e?Bt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ms(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ms(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W4(this),t=new e5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ho("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Y4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&R4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ya(n){return Bt(n)}class r_{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(n){Qh=n}function QE(n){return Qh.loadJS(n)}function s5(){return Qh.recaptchaEnterpriseScript}function r5(){return Qh.gapiScript}function i5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class a5{constructor(){this.enterprise=new o5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class o5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const l5="recaptcha-enterprise",JE="NO_RECAPTCHA";class c5{constructor(e){this.type=l5,this.auth=ya(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{q4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new O4(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function a(l,u,h){const p=window.grecaptcha;Zb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(JE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a5().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!t&&Zb(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=s5();p.length!==0&&(p+=h),QE(p).then(()=>{a(h,l,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function i_(n,e,t,s=!1,a=!1){const l=new c5(n);let u;if(a)u=JE;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Th(n,e,t,s,a){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await i_(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await i_(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e){const t=fo(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(li(l,e??{}))return a;Ws(a,"already-initialized")}return t.initialize({options:e})}function d5(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ti);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function h5(n,e,t){const s=ya(n);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=XE(e),{host:u,port:h}=f5(e),p=h===null?"":`:${h}`,m={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(li(m,s.config.emulator)&&li(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Cl(u)?(_E(`${l}//${u}${p}`),wE("Auth",!0)):m5()}function XE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f5(n){const e=XE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:a_(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:a_(u)}}}function a_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function m5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function p5(n,e){return gi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",pi(n,e))}async function y5(n,e){return gi(n,"POST","/v1/accounts:sendOobCode",pi(n,e))}async function x5(n,e){return y5(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,e))}async function b5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends e0{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,t,"signInWithPassword",g5);case"emailLink":return v5(e,{email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,s,"signUpPassword",p5);case"emailLink":return b5(e,{idToken:t,email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="http://localhost";class ro extends e0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ws("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new ro(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:_5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E5(n){const e=Fc(Gc(n)).link,t=e?Fc(Gc(e)).deep_link_id:null,s=Fc(Gc(n)).deep_link_id;return(s?Fc(Gc(s)).link:null)||s||t||e||n}class t0{constructor(e){const t=Fc(Gc(e)),s=t.apiKey??null,a=t.oobCode??null,l=w5(t.mode??null);Me(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=E5(e);try{return new t0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=t0.parseLink(t);return Me(s,"argument-error"),au._fromEmailAndCode(e,s.code,s.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends WE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends xu{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ro._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Zi.credential(t,s)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends xu{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends xu{constructor(){super("twitter.com")}static credential(e,t){return ro._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ta.credential(t,s)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(n,e){return yu(n,"POST","/v1/accounts:signUp",pi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Qs._fromIdTokenResponse(e,s,a),u=o_(s);return new io({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=o_(s);return new io({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function o_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends tr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Nh(e,t,s,a)}}function ZE(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,l,e,s):l})}async function N5(n,e,t=!1){const s=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return io._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e,t=!1){const{auth:s}=n;if(Ms(s.app))return Promise.reject(ri(s));const a="reauthenticate";try{const l=await iu(n,ZE(s,a,e,n),t);Me(l.idToken,s,"internal-error");const u=Wg(l.idToken);Me(u,s,"internal-error");const{sub:h}=u;return Me(n.uid===h,s,"user-mismatch"),io._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ws(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(n,e,t=!1){if(Ms(n.app))return Promise.reject(ri(n));const s="signIn",a=await ZE(n,s,e),l=await io._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function A5(n,e){return eT(ya(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n){const e=ya(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C5(n,e,t){const s=ya(n);await Th(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",x5)}async function I5(n,e,t){if(Ms(n.app))return Promise.reject(ri(n));const s=ya(n),u=await Th(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&tT(n),p}),h=await io._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function R5(n,e,t){return Ms(n.app)?Promise.reject(ri(n)):A5(Bt(n),Rl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tT(n),s})}function k5(n,e,t,s){return Bt(n).onIdTokenChanged(e,t,s)}function M5(n,e,t){return Bt(n).beforeAuthStateChanged(e,t)}function D5(n,e,t,s){return Bt(n).onAuthStateChanged(e,t,s)}function P5(n){return Bt(n).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=1e3,L5=10;class sT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);J4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,L5):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},j5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sT.type="LOCAL";const V5=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rT.type="SESSION";const iT=rT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Jh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,l)),p=await U5(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const m=n0("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function q5(n){Sr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function z5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function G5(){return aT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",B5=1,Ah="firebaseLocalStorage",lT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function H5(){const n=indexedDB.deleteDatabase(oT);return new vu(n).toPromise()}function fg(){const n=indexedDB.open(oT,B5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ah,{keyPath:lT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await H5(),e(await fg()))})})}async function l_(n,e,t){const s=Xh(n,!0).put({[lT]:e,value:t});return new vu(s).toPromise()}async function $5(n,e){const t=Xh(n,!1).get(e),s=await new vu(t).toPromise();return s===void 0?null:s.value}function c_(n,e){const t=Xh(n,!0).delete(e);return new vu(t).toPromise()}const K5=800,Y5=3;class cT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Y5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(G5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await z5(),!this.activeServiceWorker)return;this.sender=new O5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await l_(e,Sh,"1"),await c_(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>l_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>$5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>c_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Xh(a,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cT.type="LOCAL";const Q5=cT;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n,e){return e?ti(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends e0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X5(n){return eT(n.auth,new s0(n),n.bypassAuthState)}function W5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),S5(t,new s0(n),n.bypassAuthState)}async function Z5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),N5(t,new s0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X5;case"linkViaPopup":case"linkViaRedirect":return Z5;case"reauthViaPopup":case"reauthViaRedirect":return W5;default:Ws(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new gu(2e3,1e4);class ol extends uT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=n0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ek.get())};e()}}ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="pendingRedirect",nh=new Map;class nk extends uT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const s=await sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sk(n,e){const t=ak(e),s=ik(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function rk(n,e){nh.set(n._key(),e)}function ik(n){return ti(n._redirectPersistence)}function ak(n){return th(tk,n.config.apiKey,n.name)}async function ok(n,e,t=!1){if(Ms(n.app))return Promise.reject(ri(n));const s=ya(n),a=J5(s,e),u=await new nk(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=600*1e3;class ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!dT(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(e))}saveEventToCache(e){this.cachedEventUids.add(u_(e)),this.lastProcessedEventTime=Date.now()}}function u_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n,e={}){return gi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fk=/^https?/;async function mk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dk(n);for(const t of e)try{if(pk(t))return}catch{}Ws(n,"unauthorized-domain")}function pk(n){const e=dg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!fk.test(t))return!1;if(hk.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new gu(3e4,6e4);function d_(){const n=Sr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yk(n){return new Promise((e,t)=>{var a,l,u;function s(){d_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d_(),t(Nr(n,"network-request-failed"))},timeout:gk.get()})}if((l=(a=Sr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Sr().gapi)!=null&&u.load)s();else{const h=i5("iframefcb");return Sr()[h]=()=>{gapi.load?s():t(Nr(n,"network-request-failed"))},QE(`${r5()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw sh=null,e})}let sh=null;function xk(n){return sh=sh||yk(n),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new gu(5e3,15e3),bk="__/auth/iframe",_k="emulator/auth/iframe",wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ek=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tk(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Xg(e,_k):`https://${n.config.authDomain}/${bk}`,s={apiKey:e.apiKey,appName:n.name,v:Il},a=Ek.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pu(s).slice(1)}`}async function Nk(n){const e=await xk(n),t=Sr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:Tk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wk,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Nr(n,"network-request-failed"),h=Sr().setTimeout(()=>{l(u)},vk.get());function p(){Sr().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ak=500,Ck=600,Ik="_blank",Rk="http://localhost";class h_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kk(n,e,t,s=Ak,a=Ck){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...Sk,width:s.toString(),height:a.toString(),top:l,left:u},m=On().toLowerCase();t&&(h=FE(m)?Ik:t),qE(m)&&(e=e||Rk,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[S,V])=>`${w}${S}=${V},`,"");if(Q4(m)&&h!=="_self")return Mk(e||"",h),new h_(null);const _=window.open(e||"",h,v);Me(_,n,"popup-blocked");try{_.focus()}catch{}return new h_(_)}function Mk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="__/auth/handler",Pk="emulator/auth/handler",jk=encodeURIComponent("fac");async function f_(n,e,t,s,a,l){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Il,eventId:a};if(e instanceof WE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",hR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof xu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),m=p?`#${jk}=${encodeURIComponent(p)}`:"";return`${Lk(n)}?${pu(h).slice(1)}${m}`}function Lk({config:n}){return n.emulator?Xg(n,Pk):`https://${n.authDomain}/${Dk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class Vk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iT,this._completeRedirectFn=ok,this._overrideRedirectResult=rk}async _openPopup(e,t,s,a){var u;ui((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await f_(e,t,s,dg(),a);return kk(e,l,n0())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await f_(e,t,s,dg(),a);return q5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ui(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Nk(e),s=new ck(e);return t.register("authEvent",a=>(Me(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jp,{type:jp},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[jp];l!==void 0&&t(!!l),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KE()||zE()||Zg()}}const Uk=Vk;var m_="@firebase/auth",p_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zk(n){Mr(new Xs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YE(n)},m=new t5(s,a,l,p);return d5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Mr(new Xs("auth-internal",e=>{const t=ya(e.getProvider("auth").getImmediate());return(s=>new Ok(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ps(m_,p_,qk(n)),Ps(m_,p_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=300,Gk=bE("authIdTokenMaxAge")||Fk;let g_=null;const Bk=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Gk)return;const a=t==null?void 0:t.token;g_!==a&&(g_=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Hk(n=Qg()){const e=fo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=u5(n,{popupRedirectResolver:Uk,persistence:[Q5,V5,iT]}),s=bE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Bk(l.toString());M5(t,u,()=>u(t.currentUser)),k5(t,h=>u(h))}}const a=xE("auth");return a&&h5(t,`http://${a}`),t}function $k(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}n5({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Nr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",$k().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zk("Browser");var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,hT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.F=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(D,j,U){for(var M=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)M[Fe-2]=arguments[Fe];return R.prototype[j].apply(D,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,I){I||(I=0);const D=Array(16);if(typeof R=="string")for(var j=0;j<16;++j)D[j]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(j=0;j<16;++j)D[j]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],j=C.g[2];let U=C.g[3],M;M=R+(U^I&(j^U))+D[0]+3614090360&4294967295,R=I+(M<<7&4294967295|M>>>25),M=U+(j^R&(I^j))+D[1]+3905402710&4294967295,U=R+(M<<12&4294967295|M>>>20),M=j+(I^U&(R^I))+D[2]+606105819&4294967295,j=U+(M<<17&4294967295|M>>>15),M=I+(R^j&(U^R))+D[3]+3250441966&4294967295,I=j+(M<<22&4294967295|M>>>10),M=R+(U^I&(j^U))+D[4]+4118548399&4294967295,R=I+(M<<7&4294967295|M>>>25),M=U+(j^R&(I^j))+D[5]+1200080426&4294967295,U=R+(M<<12&4294967295|M>>>20),M=j+(I^U&(R^I))+D[6]+2821735955&4294967295,j=U+(M<<17&4294967295|M>>>15),M=I+(R^j&(U^R))+D[7]+4249261313&4294967295,I=j+(M<<22&4294967295|M>>>10),M=R+(U^I&(j^U))+D[8]+1770035416&4294967295,R=I+(M<<7&4294967295|M>>>25),M=U+(j^R&(I^j))+D[9]+2336552879&4294967295,U=R+(M<<12&4294967295|M>>>20),M=j+(I^U&(R^I))+D[10]+4294925233&4294967295,j=U+(M<<17&4294967295|M>>>15),M=I+(R^j&(U^R))+D[11]+2304563134&4294967295,I=j+(M<<22&4294967295|M>>>10),M=R+(U^I&(j^U))+D[12]+1804603682&4294967295,R=I+(M<<7&4294967295|M>>>25),M=U+(j^R&(I^j))+D[13]+4254626195&4294967295,U=R+(M<<12&4294967295|M>>>20),M=j+(I^U&(R^I))+D[14]+2792965006&4294967295,j=U+(M<<17&4294967295|M>>>15),M=I+(R^j&(U^R))+D[15]+1236535329&4294967295,I=j+(M<<22&4294967295|M>>>10),M=R+(j^U&(I^j))+D[1]+4129170786&4294967295,R=I+(M<<5&4294967295|M>>>27),M=U+(I^j&(R^I))+D[6]+3225465664&4294967295,U=R+(M<<9&4294967295|M>>>23),M=j+(R^I&(U^R))+D[11]+643717713&4294967295,j=U+(M<<14&4294967295|M>>>18),M=I+(U^R&(j^U))+D[0]+3921069994&4294967295,I=j+(M<<20&4294967295|M>>>12),M=R+(j^U&(I^j))+D[5]+3593408605&4294967295,R=I+(M<<5&4294967295|M>>>27),M=U+(I^j&(R^I))+D[10]+38016083&4294967295,U=R+(M<<9&4294967295|M>>>23),M=j+(R^I&(U^R))+D[15]+3634488961&4294967295,j=U+(M<<14&4294967295|M>>>18),M=I+(U^R&(j^U))+D[4]+3889429448&4294967295,I=j+(M<<20&4294967295|M>>>12),M=R+(j^U&(I^j))+D[9]+568446438&4294967295,R=I+(M<<5&4294967295|M>>>27),M=U+(I^j&(R^I))+D[14]+3275163606&4294967295,U=R+(M<<9&4294967295|M>>>23),M=j+(R^I&(U^R))+D[3]+4107603335&4294967295,j=U+(M<<14&4294967295|M>>>18),M=I+(U^R&(j^U))+D[8]+1163531501&4294967295,I=j+(M<<20&4294967295|M>>>12),M=R+(j^U&(I^j))+D[13]+2850285829&4294967295,R=I+(M<<5&4294967295|M>>>27),M=U+(I^j&(R^I))+D[2]+4243563512&4294967295,U=R+(M<<9&4294967295|M>>>23),M=j+(R^I&(U^R))+D[7]+1735328473&4294967295,j=U+(M<<14&4294967295|M>>>18),M=I+(U^R&(j^U))+D[12]+2368359562&4294967295,I=j+(M<<20&4294967295|M>>>12),M=R+(I^j^U)+D[5]+4294588738&4294967295,R=I+(M<<4&4294967295|M>>>28),M=U+(R^I^j)+D[8]+2272392833&4294967295,U=R+(M<<11&4294967295|M>>>21),M=j+(U^R^I)+D[11]+1839030562&4294967295,j=U+(M<<16&4294967295|M>>>16),M=I+(j^U^R)+D[14]+4259657740&4294967295,I=j+(M<<23&4294967295|M>>>9),M=R+(I^j^U)+D[1]+2763975236&4294967295,R=I+(M<<4&4294967295|M>>>28),M=U+(R^I^j)+D[4]+1272893353&4294967295,U=R+(M<<11&4294967295|M>>>21),M=j+(U^R^I)+D[7]+4139469664&4294967295,j=U+(M<<16&4294967295|M>>>16),M=I+(j^U^R)+D[10]+3200236656&4294967295,I=j+(M<<23&4294967295|M>>>9),M=R+(I^j^U)+D[13]+681279174&4294967295,R=I+(M<<4&4294967295|M>>>28),M=U+(R^I^j)+D[0]+3936430074&4294967295,U=R+(M<<11&4294967295|M>>>21),M=j+(U^R^I)+D[3]+3572445317&4294967295,j=U+(M<<16&4294967295|M>>>16),M=I+(j^U^R)+D[6]+76029189&4294967295,I=j+(M<<23&4294967295|M>>>9),M=R+(I^j^U)+D[9]+3654602809&4294967295,R=I+(M<<4&4294967295|M>>>28),M=U+(R^I^j)+D[12]+3873151461&4294967295,U=R+(M<<11&4294967295|M>>>21),M=j+(U^R^I)+D[15]+530742520&4294967295,j=U+(M<<16&4294967295|M>>>16),M=I+(j^U^R)+D[2]+3299628645&4294967295,I=j+(M<<23&4294967295|M>>>9),M=R+(j^(I|~U))+D[0]+4096336452&4294967295,R=I+(M<<6&4294967295|M>>>26),M=U+(I^(R|~j))+D[7]+1126891415&4294967295,U=R+(M<<10&4294967295|M>>>22),M=j+(R^(U|~I))+D[14]+2878612391&4294967295,j=U+(M<<15&4294967295|M>>>17),M=I+(U^(j|~R))+D[5]+4237533241&4294967295,I=j+(M<<21&4294967295|M>>>11),M=R+(j^(I|~U))+D[12]+1700485571&4294967295,R=I+(M<<6&4294967295|M>>>26),M=U+(I^(R|~j))+D[3]+2399980690&4294967295,U=R+(M<<10&4294967295|M>>>22),M=j+(R^(U|~I))+D[10]+4293915773&4294967295,j=U+(M<<15&4294967295|M>>>17),M=I+(U^(j|~R))+D[1]+2240044497&4294967295,I=j+(M<<21&4294967295|M>>>11),M=R+(j^(I|~U))+D[8]+1873313359&4294967295,R=I+(M<<6&4294967295|M>>>26),M=U+(I^(R|~j))+D[15]+4264355552&4294967295,U=R+(M<<10&4294967295|M>>>22),M=j+(R^(U|~I))+D[6]+2734768916&4294967295,j=U+(M<<15&4294967295|M>>>17),M=I+(U^(j|~R))+D[13]+1309151649&4294967295,I=j+(M<<21&4294967295|M>>>11),M=R+(j^(I|~U))+D[4]+4149444226&4294967295,R=I+(M<<6&4294967295|M>>>26),M=U+(I^(R|~j))+D[11]+3174756917&4294967295,U=R+(M<<10&4294967295|M>>>22),M=j+(R^(U|~I))+D[2]+718787259&4294967295,j=U+(M<<15&4294967295|M>>>17),M=I+(U^(j|~R))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+U&4294967295}s.prototype.v=function(C,R){R===void 0&&(R=C.length);const I=R-this.blockSize,D=this.C;let j=this.h,U=0;for(;U<R;){if(j==0)for(;U<=I;)a(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<R;)if(D[j++]=C.charCodeAt(U++),j==this.blockSize){a(this,D),j=0;break}}else for(;U<R;)if(D[j++]=C[U++],j==this.blockSize){a(this,D),j=0;break}}this.h=j,this.o+=R},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,I=0;I<4;++I)for(let D=0;D<32;D+=8)C[R++]=this.g[I]>>>D&255;return C};function l(C,R){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function u(C,R){this.h=R;const I=[];let D=!0;for(let j=C.length-1;j>=0;j--){const U=C[j]|0;D&&U==R||(I[j]=U,D=!1)}this.g=I}var h={};function p(C){return-128<=C&&C<128?l(C,function(R){return new u([R|0],R<0?-1:0)}):new u([C|0],C<0?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return B(m(-C));const R=[];let I=1;for(let D=0;C>=I;D++)R[D]=C/I|0,I*=4294967296;return new u(R,0)}function v(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return B(v(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=m(Math.pow(R,8));let D=_;for(let U=0;U<C.length;U+=8){var j=Math.min(8,C.length-U);const M=parseInt(C.substring(U,U+j),R);j<8?(j=m(Math.pow(R,j)),D=D.j(j).add(m(M))):(D=D.j(I),D=D.add(m(M)))}return D}var _=p(0),w=p(1),S=p(16777216);n=u.prototype,n.m=function(){if(P(this))return-B(this).m();let C=0,R=1;for(let I=0;I<this.g.length;I++){const D=this.i(I);C+=(D>=0?D:4294967296+D)*R,R*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(P(this))return"-"+B(this).toString(C);const R=m(Math.pow(C,6));var I=this;let D="";for(;;){const j=ie(I,R).g;I=K(I,j.j(R));let U=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=j,V(I))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=K(this,C),P(C)?-1:V(C)?0:1};function B(C){const R=C.g.length,I=[];for(let D=0;D<R;D++)I[D]=~C.g[D];return new u(I,~C.h).add(w)}n.abs=function(){return P(this)?B(this):this},n.add=function(C){const R=Math.max(this.g.length,C.g.length),I=[];let D=0;for(let j=0;j<=R;j++){let U=D+(this.i(j)&65535)+(C.i(j)&65535),M=(U>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);D=M>>>16,U&=65535,M&=65535,I[j]=M<<16|U}return new u(I,I[I.length-1]&-2147483648?-1:0)};function K(C,R){return C.add(B(R))}n.j=function(C){if(V(this)||V(C))return _;if(P(this))return P(C)?B(this).j(B(C)):B(B(this).j(C));if(P(C))return B(this.j(B(C)));if(this.l(S)<0&&C.l(S)<0)return m(this.m()*C.m());const R=this.g.length+C.g.length,I=[];for(var D=0;D<2*R;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<C.g.length;j++){const U=this.i(D)>>>16,M=this.i(D)&65535,Fe=C.i(j)>>>16,$e=C.i(j)&65535;I[2*D+2*j]+=M*$e,re(I,2*D+2*j),I[2*D+2*j+1]+=U*$e,re(I,2*D+2*j+1),I[2*D+2*j+1]+=M*Fe,re(I,2*D+2*j+1),I[2*D+2*j+2]+=U*Fe,re(I,2*D+2*j+2)}for(C=0;C<R;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=R;C<2*R;C++)I[C]=0;return new u(I,0)};function re(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function $(C,R){this.g=C,this.h=R}function ie(C,R){if(V(R))throw Error("division by zero");if(V(C))return new $(_,_);if(P(C))return R=ie(B(C),R),new $(B(R.g),B(R.h));if(P(R))return R=ie(C,B(R)),new $(B(R.g),R.h);if(C.g.length>30){if(P(C)||P(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,D=R;D.l(C)<=0;)I=W(I),D=W(D);var j=G(I,1),U=G(D,1);for(D=G(D,2),I=G(I,2);!V(D);){var M=U.add(D);M.l(C)<=0&&(j=j.add(I),U=M),D=G(D,1),I=G(I,1)}return R=K(C,j.j(R)),new $(j,R)}for(j=_;C.l(R)>=0;){for(I=Math.max(1,Math.floor(C.m()/R.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=m(I),M=U.j(R);P(M)||M.l(C)>0;)I-=D,U=m(I),M=U.j(R);V(U)&&(U=w),j=j.add(U),C=K(C,M)}return new $(j,C)}n.B=function(C){return ie(this,C).h},n.and=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let D=0;D<R;D++)I[D]=this.i(D)&C.i(D);return new u(I,this.h&C.h)},n.or=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let D=0;D<R;D++)I[D]=this.i(D)|C.i(D);return new u(I,this.h|C.h)},n.xor=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let D=0;D<R;D++)I[D]=this.i(D)^C.i(D);return new u(I,this.h^C.h)};function W(C){const R=C.g.length+1,I=[];for(let D=0;D<R;D++)I[D]=C.i(D)<<1|C.i(D-1)>>>31;return new u(I,C.h)}function G(C,R){const I=R>>5;R%=32;const D=C.g.length-I,j=[];for(let U=0;U<D;U++)j[U]=R>0?C.i(U+I)>>>R|C.i(U+I+1)<<32-R:C.i(U+I);return new u(j,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,hT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,aa=u}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,Bc,mT,rh,mg,pT,gT,yT;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var E=0;E<y.length;++E){var N=y[E];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function a(y,E){if(E)e:{var N=s;y=y.split(".");for(var k=0;k<y.length-1;k++){var Y=y[k];if(!(Y in N))break e;N=N[Y]}y=y[y.length-1],k=N[y],E=E(k),E!=k&&E!=null&&e(N,y,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(E){var N=[],k;for(k in E)Object.prototype.hasOwnProperty.call(E,k)&&N.push([k,E[k]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function p(y,E,N){return y.call.apply(y.bind,arguments)}function m(y,E,N){return m=p,m.apply(null,arguments)}function v(y,E){var N=Array.prototype.slice.call(arguments,1);return function(){var k=N.slice();return k.push.apply(k,arguments),y.apply(this,k)}}function _(y,E){function N(){}N.prototype=E.prototype,y.Z=E.prototype,y.prototype=new N,y.prototype.constructor=y,y.Ob=function(k,Y,te){for(var xe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)xe[qe-2]=arguments[qe];return E.prototype[Y].apply(k,xe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function S(y){const E=y.length;if(E>0){const N=Array(E);for(let k=0;k<E;k++)N[k]=y[k];return N}return[]}function V(y,E){for(let k=1;k<arguments.length;k++){const Y=arguments[k];var N=typeof Y;if(N=N!="object"?N:Y?Array.isArray(Y)?"array":N:"null",N=="array"||N=="object"&&typeof Y.length=="number"){N=y.length||0;const te=Y.length||0;y.length=N+te;for(let xe=0;xe<te;xe++)y[N+xe]=Y[xe]}else y.push(Y)}}class P{constructor(E,N){this.i=E,this.j=N,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function B(y){u.setTimeout(()=>{throw y},0)}function K(){var y=C;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class re{constructor(){this.h=this.g=null}add(E,N){const k=$.get();k.set(E,N),this.h?this.h.next=k:this.g=k,this.h=k}}var $=new P(()=>new ie,y=>y.reset());class ie{constructor(){this.next=this.g=this.h=null}set(E,N){this.h=E,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,C=new re,R=()=>{const y=Promise.resolve(void 0);W=()=>{y.then(I)}};function I(){for(var y;y=K();){try{y.h.call(y.g)}catch(N){B(N)}var E=$;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}G=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const N=()=>{};u.addEventListener("test",N,E),u.removeEventListener("test",N,E)}catch{}return y})();function M(y){return/^[\s\xa0]*$/.test(y)}function Fe(y,E){j.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(Fe,j),Fe.prototype.init=function(y,E){const N=this.type=y.type,k=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(N=="mouseover"?E=y.fromElement:N=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),ee=0;function pe(y,E,N,k,Y){this.listener=y,this.proxy=null,this.src=E,this.type=N,this.capture=!!k,this.ha=Y,this.key=++ee,this.da=this.fa=!1}function he(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Pe(y,E,N){for(const k in y)E.call(N,y[k],k,y)}function Re(y,E){for(const N in y)E.call(void 0,y[N],N,y)}function q(y){const E={};for(const N in y)E[N]=y[N];return E}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(y,E){let N,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(N in k)y[N]=k[N];for(let te=0;te<J.length;te++)N=J[te],Object.prototype.hasOwnProperty.call(k,N)&&(y[N]=k[N])}}function ne(y){this.src=y,this.g={},this.h=0}ne.prototype.add=function(y,E,N,k,Y){const te=y.toString();y=this.g[te],y||(y=this.g[te]=[],this.h++);const xe=Ee(y,E,k,Y);return xe>-1?(E=y[xe],N||(E.fa=!1)):(E=new pe(E,this.src,te,!!k,Y),E.fa=N,y.push(E)),E};function fe(y,E){const N=E.type;if(N in y.g){var k=y.g[N],Y=Array.prototype.indexOf.call(k,E,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(k,Y,1),te&&(he(E),y.g[N].length==0&&(delete y.g[N],y.h--))}}function Ee(y,E,N,k){for(let Y=0;Y<y.length;++Y){const te=y[Y];if(!te.da&&te.listener==E&&te.capture==!!N&&te.ha==k)return Y}return-1}var je="closure_lm_"+(Math.random()*1e6|0),nt={};function Ie(y,E,N,k,Y){if(Array.isArray(E)){for(let te=0;te<E.length;te++)Ie(y,E[te],N,k,Y);return null}return N=sr(N),y&&y[$e]?y.J(E,N,h(k)?!!k.capture:!1,Y):Ct(y,E,N,!1,k,Y)}function Ct(y,E,N,k,Y,te){if(!E)throw Error("Invalid event type");const xe=h(Y)?!!Y.capture:!!Y;let qe=$n(y);if(qe||(y[je]=qe=new ne(y)),N=qe.add(E,N,k,xe,te),N.proxy)return N;if(k=Oe(),N.proxy=k,k.src=y,k.listener=N,y.addEventListener)U||(Y=xe),Y===void 0&&(Y=!1),y.addEventListener(E.toString(),k,Y);else if(y.attachEvent)y.attachEvent(Ht(E.toString()),k);else if(y.addListener&&y.removeListener)y.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Oe(){function y(N){return E.call(y.src,y.listener,N)}const E=Vs;return y}function ut(y,E,N,k,Y){if(Array.isArray(E))for(var te=0;te<E.length;te++)ut(y,E[te],N,k,Y);else k=h(k)?!!k.capture:!!k,N=sr(N),y&&y[$e]?(y=y.i,te=String(E).toString(),te in y.g&&(E=y.g[te],N=Ee(E,N,k,Y),N>-1&&(he(E[N]),Array.prototype.splice.call(E,N,1),E.length==0&&(delete y.g[te],y.h--)))):y&&(y=$n(y))&&(E=y.g[E.toString()],y=-1,E&&(y=Ee(E,N,k,Y)),(N=y>-1?E[y]:null)&&it(N))}function it(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[$e])fe(E.i,y);else{var N=y.type,k=y.proxy;E.removeEventListener?E.removeEventListener(N,k,y.capture):E.detachEvent?E.detachEvent(Ht(N),k):E.addListener&&E.removeListener&&E.removeListener(k),(N=$n(E))?(fe(N,y),N.h==0&&(N.src=null,E[je]=null)):he(y)}}}function Ht(y){return y in nt?nt[y]:nt[y]="on"+y}function Vs(y,E){if(y.da)y=!0;else{E=new Fe(E,this);const N=y.listener,k=y.ha||y.src;y.fa&&it(y),y=N.call(k,E)}return y}function $n(y){return y=y[je],y instanceof ne?y:null}var qn="__closure_events_fn_"+(Math.random()*1e9>>>0);function sr(y){return typeof y=="function"?y:(y[qn]||(y[qn]=function(E){return y.handleEvent(E)}),y[qn])}function mt(){D.call(this),this.i=new ne(this),this.M=this,this.G=null}_(mt,D),mt.prototype[$e]=!0,mt.prototype.removeEventListener=function(y,E,N,k){ut(this,y,E,N,k)};function Vt(y,E){var N,k=y.G;if(k)for(N=[];k;k=k.G)N.push(k);if(y=y.M,k=E.type||E,typeof E=="string")E=new j(E,y);else if(E instanceof j)E.target=E.target||y;else{var Y=E;E=new j(k,y),O(E,Y)}Y=!0;let te,xe;if(N)for(xe=N.length-1;xe>=0;xe--)te=E.g=N[xe],Y=as(te,k,!0,E)&&Y;if(te=E.g=y,Y=as(te,k,!0,E)&&Y,Y=as(te,k,!1,E)&&Y,N)for(xe=0;xe<N.length;xe++)te=E.g=N[xe],Y=as(te,k,!1,E)&&Y}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const N=y.g[E];for(let k=0;k<N.length;k++)he(N[k]);delete y.g[E],y.h--}}this.G=null},mt.prototype.J=function(y,E,N,k){return this.i.add(String(y),E,!1,N,k)},mt.prototype.K=function(y,E,N,k){return this.i.add(String(y),E,!0,N,k)};function as(y,E,N,k){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let te=0;te<E.length;++te){const xe=E[te];if(xe&&!xe.da&&xe.capture==N){const qe=xe.listener,Yt=xe.ha||xe.src;xe.fa&&fe(y.i,xe),Y=qe.call(Yt,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function _a(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(y,E||0)}function Pr(y){y.g=_a(()=>{y.g=null,y.i&&(y.i=!1,Pr(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class dn extends D{constructor(E,N){super(),this.m=E,this.l=N,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(y){D.call(this),this.h=y,this.g={}}_(Kn,D);var zn=[];function rr(y){Pe(y.g,function(E,N){this.g.hasOwnProperty(N)&&it(E)},y),y.g={}}Kn.prototype.N=function(){Kn.Z.N.call(this),rr(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=u.JSON.stringify,me=u.JSON.parse,He=class{stringify(y){return u.JSON.stringify(y,void 0)}parse(y){return u.JSON.parse(y,void 0)}};function st(){}function Wt(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gt(){j.call(this,"d")}_(gt,j);function Zt(){j.call(this,"c")}_(Zt,j);var bt={},vs=null;function hn(){return vs=vs||new mt}bt.Ia="serverreachability";function In(y){j.call(this,bt.Ia,y)}_(In,j);function pn(y){const E=hn();Vt(E,new In(E))}bt.STAT_EVENT="statevent";function Us(y,E){j.call(this,bt.STAT_EVENT,y),this.stat=E}_(Us,j);function de(y){const E=hn();Vt(E,new Us(E,y))}bt.Ja="timingevent";function Ne(y,E){j.call(this,bt.Ja,y),this.size=E}_(Ne,j);function Se(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){y()},E)}function ye(){this.g=!0}ye.prototype.ua=function(){this.g=!1};function Qe(y,E,N,k,Y,te){y.info(function(){if(y.g)if(te){var xe="",qe=te.split("&");for(let ht=0;ht<qe.length;ht++){var Yt=qe[ht].split("=");if(Yt.length>1){const Pt=Yt[0];Yt=Yt[1];const Es=Pt.split("_");xe=Es.length>=2&&Es[1]=="type"?xe+(Pt+"="+Yt+"&"):xe+(Pt+"=redacted&")}}}else xe=null;else xe=te;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+E+`
`+N+`
`+xe})}function dt(y,E,N,k,Y,te,xe){y.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+E+`
`+N+`
`+te+" "+xe})}function Be(y,E,N,k){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nt(y,N)+(k?" "+k:"")})}function Kt(y,E){y.info(function(){return"TIMEOUT: "+E})}ye.prototype.info=function(){};function Nt(y,E){if(!y.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(y=0;y<te.length;y++)if(Array.isArray(te[y])){var N=te[y];if(!(N.length<2)){var k=N[1];if(Array.isArray(k)&&!(k.length<1)){var Y=k[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let xe=1;xe<k.length;xe++)k[xe]=""}}}}return xs(te)}catch{return E}}var St={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wa;function Ea(){}_(Ea,st),Ea.prototype.g=function(){return new XMLHttpRequest},wa=new Ea;function jr(y){return encodeURIComponent(String(y))}function Nu(y){var E=1;y=y.split(":");const N=[];for(;E>0&&y.length;)N.push(y.shift()),E--;return y.length&&N.push(y.join(":")),N}function Os(y,E,N,k){this.j=y,this.i=E,this.l=N,this.S=k||1,this.V=new Kn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qs}function qs(){this.i=null,this.g="",this.h=!1}var en={},gn={};function ir(y,E,N){y.M=1,y.A=Ta(nn(E)),y.u=N,y.R=!0,yo(y,null)}function yo(y,E){y.F=Date.now(),ar(y),y.B=nn(y.A);var N=y.B,k=y.S;Array.isArray(k)||(k=[String(k)]),_o(N.i,"t",k),y.C=0,N=y.j.L,y.h=new qs,y.g=qu(y.j,N?E:null,!y.u),y.P>0&&(y.O=new dn(m(y.Y,y,y.g),y.P)),E=y.V,N=y.g,k=y.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(zn[0]=Y.toString()),Y=zn);for(let te=0;te<Y.length;te++){const xe=Ie(N,Y[te],k||E.handleEvent,!1,E.h||E);if(!xe)break;E.g[xe.key]=xe}E=y.J?q(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),pn(),Qe(y.i,y.v,y.B,y.l,y.S,y.u)}Os.prototype.ba=function(y){y=y.target;const E=this.O;E&&Gs(y)==3?E.j():this.Y(y)},Os.prototype.Y=function(y){try{if(y==this.g)e:{const qe=Gs(this.g),Yt=this.g.ya(),ht=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||qe!=4||Yt==7||(Yt==8||ht<=0?pn(3):pn(2)),or(this);var E=this.g.ca();this.X=E;var N=Cf(this);if(this.o=E==200,dt(this.i,this.v,this.B,this.l,this.S,qe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var k,Y=this.g;if((k=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(k)){var te=k;break t}}te=null}if(y=te)Be(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lr(this,y);else{this.o=!1,this.m=3,de(12),os(this),bs(this);break e}}if(this.R){y=!0;let Pt;for(;!this.K&&this.C<N.length;)if(Pt=Au(this,N),Pt==gn){qe==4&&(this.m=4,de(14),y=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,de(15),Be(this.i,this.l,N,"[Invalid Chunk]"),y=!1;break}else Be(this.i,this.l,Pt,null),lr(this,Pt);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||N.length!=0||this.h.h||(this.m=1,de(16),y=!1),this.o=this.o&&y,!y)Be(this.i,this.l,N,"[Invalid Chunked Response]"),os(this),bs(this);else if(N.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),tc(xe),xe.P=!0,de(11))}}else Be(this.i,this.l,N,null),lr(this,N);qe==4&&os(this),this.o&&!this.K&&(qe==4?Lu(this.j,this):(this.o=!1,ar(this)))}else Vr(this.g),E==400&&N.indexOf("Unknown SID")>0?(this.m=3,de(12)):(this.m=0,de(13)),os(this),bs(this)}}}catch{}finally{}};function Cf(y){if(!Su(y))return y.g.la();const E=_n(y.g);if(E==="")return"";let N="";const k=E.length,Y=Gs(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return os(y),bs(y),"";y.h.i=new u.TextDecoder}for(let te=0;te<k;te++)y.h.h=!0,N+=y.h.i.decode(E[te],{stream:!(Y&&te==k-1)});return E.length=0,y.h.g+=N,y.C=0,y.h.g}function Su(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Au(y,E){var N=y.C,k=E.indexOf(`
`,N);return k==-1?gn:(N=Number(E.substring(N,k)),isNaN(N)?en:(k+=1,k+N>E.length?gn:(E=E.slice(k,k+N),y.C=k+N,E)))}Os.prototype.cancel=function(){this.K=!0,os(this)};function ar(y){y.T=Date.now()+y.H,xo(y,y.H)}function xo(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Se(m(y.aa,y),E)}function or(y){y.D&&(u.clearTimeout(y.D),y.D=null)}Os.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Kt(this.i,this.B),this.M!=2&&(pn(),de(17)),os(this),this.m=2,bs(this)):xo(this,this.T-y)};function bs(y){y.j.I==0||y.K||Lu(y.j,y)}function os(y){or(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,rr(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function lr(y,E){try{var N=y.j;if(N.I!=0&&(N.g==y||ur(N.h,y))){if(!y.L&&ur(N.h,y)&&N.I==3){try{var k=N.Ba.g.parse(E)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<y.F)So(N),Ai(N);else break e;ka(N),de(18)}}else N.xa=Y[1],0<N.xa-N.K&&Y[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Se(m(N.Va,N),6e3));cr(N.h)<=1&&N.ta&&(N.ta=void 0)}else gr(N,11)}else if((y.L||N.g==y)&&So(N),!M(E))for(Y=N.Ba.g.parse(E),E=0;E<Y.length;E++){let ht=Y[E];const Pt=ht[0];if(!(Pt<=N.K))if(N.K=Pt,ht=ht[1],N.I==2)if(ht[0]=="c"){N.M=ht[1],N.ba=ht[2];const Es=ht[3];Es!=null&&(N.ka=Es,N.j.info("VER="+N.ka));const yr=ht[4];yr!=null&&(N.za=yr,N.j.info("SVER="+N.za));const Bs=ht[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(k=1.5*Bs,N.O=k,N.j.info("backChannelRequestTimeoutMs_="+k)),k=N;const Hs=y.g;if(Hs){const Ma=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var te=k.h;te.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Gl(te,te.h),te.h=null))}if(k.G){const Ao=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(k.wa=Ao,yt(k.J,k.G,Ao))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-y.F,N.j.info("Handshake RTT: "+N.T+"ms")),k=N;var xe=y;if(k.na=Ou(k,k.L?k.ba:null,k.W),xe.L){Bl(k.h,xe);var qe=xe,Yt=k.O;Yt&&(qe.H=Yt),qe.D&&(or(qe),ar(qe)),k.g=xe}else Pu(k);N.i.length>0&&pr(N)}else ht[0]!="stop"&&ht[0]!="close"||gr(N,7);else N.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?gr(N,7):Zl(N):ht[0]!="noop"&&N.l&&N.l.qa(ht),N.A=0)}}pn(4)}catch{}}var tn=class{constructor(y,E){this.g=y,this.map=E}};function zl(y){this.l=y||10,u.PerformanceNavigationTiming?(y=u.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function cr(y){return y.h?1:y.g?y.g.size:0}function ur(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function Gl(y,E){y.g?y.g.add(E):y.h=E}function Bl(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}zl.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Hl(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const N of y.g.values())E=E.concat(N.G);return E}return S(y.i)}var Cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vo(y,E){if(y){y=y.split("&");for(let N=0;N<y.length;N++){const k=y[N].indexOf("=");let Y,te=null;k>=0?(Y=y[N].substring(0,k),te=y[N].substring(k+1)):Y=y[N],E(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ls(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof ls?(this.l=y.l,yn(this,y.j),this.o=y.o,this.g=y.g,bi(this,y.u),this.h=y.h,$l(this,Mu(y.i)),this.m=y.m):y&&(E=String(y).match(Cu))?(this.l=!1,yn(this,E[1]||"",!0),this.o=dr(E[2]||""),this.g=dr(E[3]||"",!0),bi(this,E[4]),this.h=dr(E[5]||"",!0),$l(this,E[6]||"",!0),this.m=dr(E[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}ls.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(Na(E,bo,!0),":");var N=this.g;return(N||E=="file")&&(y.push("//"),(E=this.o)&&y.push(Na(E,bo,!0),"@"),y.push(jr(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&y.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&y.push("/"),y.push(Na(N,N.charAt(0)=="/"?Kl:Iu,!0))),(N=this.i.toString())&&y.push("?",N),(N=this.m)&&y.push("#",Na(N,Ru)),y.join("")},ls.prototype.resolve=function(y){const E=nn(this);let N=!!y.j;N?yn(E,y.j):N=!!y.o,N?E.o=y.o:N=!!y.g,N?E.g=y.g:N=y.u!=null;var k=y.h;if(N)bi(E,y.u);else if(N=!!y.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(k=E.h.slice(0,Y+1)+k)}if(Y=k,Y==".."||Y==".")k="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){k=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let xe=0;xe<Y.length;){const qe=Y[xe++];qe=="."?k&&xe==Y.length&&te.push(""):qe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),k&&xe==Y.length&&te.push("")):(te.push(qe),k=!0)}k=te.join("/")}else k=Y}return N?E.h=k:N=y.i.toString()!=="",N?$l(E,Mu(y.i)):N=!!y.m,N&&(E.m=y.m),E};function nn(y){return new ls(y)}function yn(y,E,N){y.j=N?dr(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function bi(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function $l(y,E,N){E instanceof wi?(y.i=E,wo(y.i,y.l)):(N||(E=Na(E,_i)),y.i=new wi(E,y.l))}function yt(y,E,N){y.i.set(E,N)}function Ta(y){return yt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function dr(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Na(y,E,N){return typeof y=="string"?(y=encodeURI(y).replace(E,Yn),N&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Yn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var bo=/[#\/\?@]/g,Iu=/[#\?:]/g,Kl=/[#\?]/g,_i=/[#\?@]/g,Ru=/#/g;function wi(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Qn(y){y.g||(y.g=new Map,y.h=0,y.i&&vo(y.i,function(E,N){y.add(decodeURIComponent(E.replace(/\+/g," ")),N)}))}n=wi.prototype,n.add=function(y,E){Qn(this),this.i=null,y=Ei(this,y);let N=this.g.get(y);return N||this.g.set(y,N=[]),N.push(E),this.h+=1,this};function ku(y,E){Qn(y),E=Ei(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Yl(y,E){return Qn(y),E=Ei(y,E),y.g.has(E)}n.forEach=function(y,E){Qn(this),this.g.forEach(function(N,k){N.forEach(function(Y){y.call(E,Y,k,this)},this)},this)};function Ql(y,E){Qn(y);let N=[];if(typeof E=="string")Yl(y,E)&&(N=N.concat(y.g.get(Ei(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)N=N.concat(y[E]);return N}n.set=function(y,E){return Qn(this),this.i=null,y=Ei(this,y),Yl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Ql(this,y),y.length>0?String(y[0]):E):E};function _o(y,E,N){ku(y,E),N.length>0&&(y.i=null,y.g.set(Ei(y,E),S(N)),y.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let k=0;k<E.length;k++){var N=E[k];const Y=jr(N);N=Ql(this,N);for(let te=0;te<N.length;te++){let xe=Y;N[te]!==""&&(xe+="="+jr(N[te])),y.push(xe)}}return this.i=y.join("&")};function Mu(y){const E=new wi;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function Ei(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function wo(y,E){E&&!y.j&&(Qn(y),y.i=null,y.g.forEach(function(N,k){const Y=k.toLowerCase();k!=Y&&(ku(this,k),_o(this,Y,N))},y)),y.j=E}function zs(y,E){const N=new ye;if(u.Image){const k=new Image;k.onload=v(_s,N,"TestLoadImage: loaded",!0,E,k),k.onerror=v(_s,N,"TestLoadImage: error",!1,E,k),k.onabort=v(_s,N,"TestLoadImage: abort",!1,E,k),k.ontimeout=v(_s,N,"TestLoadImage: timeout",!1,E,k),u.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=y}else E(!1)}function Jl(y,E){const N=new ye,k=new AbortController,Y=setTimeout(()=>{k.abort(),_s(N,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:k.signal}).then(te=>{clearTimeout(Y),te.ok?_s(N,"TestPingServer: ok",!0,E):_s(N,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),_s(N,"TestPingServer: error",!1,E)})}function _s(y,E,N,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(N)}catch{}}function Ti(){this.g=new He}function hr(y){this.i=y.Sb||null,this.h=y.ab||!1}_(hr,st),hr.prototype.g=function(){return new Sa(this.i,this.h)};function Sa(y,E){mt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Sa,mt),n=Sa.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,Fs(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?Ni(this):Fs(this),this.readyState==3&&Eo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ni(this))},n.Na=function(y){this.g&&(this.response=y,Ni(this))},n.ga=function(){this.g&&Ni(this)};function Ni(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Fs(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var N=E.next();!N.done;)N=N.value,y.push(N[0]+": "+N[1]),N=E.next();return y.join(`\r
`)};function Fs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ws(y){let E="";return Pe(y,function(N,k){E+=k,E+=":",E+=N,E+=`\r
`}),E}function Aa(y,E,N){e:{for(k in N){var k=!1;break e}k=!0}k||(N=ws(N),typeof y=="string"?N!=null&&jr(N):yt(y,E,N))}function _t(y){mt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(_t,mt);var fr=/^https?$/i,Xl=["POST","PUT"];n=_t.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,N,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wa.g(),this.g.onreadystatechange=w(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(te){Ca(this,te);return}if(y=N||"",N=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)N.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const te of k.keys())N.set(te,k.get(te));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(N.keys()).find(te=>te.toLowerCase()=="content-type"),Y=u.FormData&&y instanceof u.FormData,!(Array.prototype.indexOf.call(Xl,E,void 0)>=0)||k||Y||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,xe]of N)this.g.setRequestHeader(te,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(te){Ca(this,te)}};function Ca(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,Wl(y),Lr(y)}function Wl(y){y.A||(y.A=!0,Vt(y,"complete"),Vt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Vt(this,"complete"),Vt(this,"abort"),Lr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lr(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ia(this):this.Xa())},n.Xa=function(){Ia(this)};function Ia(y){if(y.h&&typeof l<"u"){if(y.v&&Gs(y)==4)setTimeout(y.Ca.bind(y),0);else if(Vt(y,"readystatechange"),Gs(y)==4){y.h=!1;try{const te=y.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var N;if(!(N=E)){var k;if(k=te===0){let xe=String(y.D).match(Cu)[1]||null;!xe&&u.self&&u.self.location&&(xe=u.self.location.protocol.slice(0,-1)),k=!fr.test(xe?xe.toLowerCase():"")}N=k}if(N)Vt(y,"complete"),Vt(y,"success");else{y.o=6;try{var Y=Gs(y)>2?y.g.statusText:""}catch{Y=""}y.l=Y+" ["+y.ca()+"]",Wl(y)}}finally{Lr(y)}}}}function Lr(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const N=y.g;y.g=null,E||Vt(y,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Gs(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),me(E)}};function _n(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Vr(y){const E={};y=(y.g&&Gs(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<y.length;k++){if(M(y[k]))continue;var N=Nu(y[k]);const Y=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const te=E[Y]||[];E[Y]=te,te.push(N)}Re(E,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(y,E,N){return N&&N.internalChannelParams&&N.internalChannelParams[y]||E}function Si(y){this.za=0,this.i=[],this.j=new ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mr("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mr("baseRetryDelayMs",5e3,y),this.Za=mr("retryDelaySeedMs",1e4,y),this.Ta=mr("forwardChannelMaxRetries",2,y),this.va=mr("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new zl(y&&y.concurrentRequestLimit),this.Ba=new Ti,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Si.prototype,n.ka=8,n.I=1,n.connect=function(y,E,N,k){de(0),this.W=y,this.H=E||{},N&&k!==void 0&&(this.H.OSID=N,this.H.OAID=k),this.F=this.X,this.J=Ou(this,null,this.W),pr(this)};function Zl(y){if(To(y),y.I==3){var E=y.V++,N=nn(y.J);if(yt(N,"SID",y.M),yt(N,"RID",E),yt(N,"TYPE","terminate"),Ra(y,N),E=new Os(y,y.j,E),E.M=2,E.A=Ta(nn(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!N&&u.Image&&(new Image().src=E.A,N=!0),N||(E.g=qu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),ar(E)}Uu(y)}function Ai(y){y.g&&(tc(y),y.g.cancel(),y.g=null)}function To(y){Ai(y),y.v&&(u.clearTimeout(y.v),y.v=null),So(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&u.clearTimeout(y.m),y.m=null)}function pr(y){if(!Fl(y.h)&&!y.m){y.m=!0;var E=y.Ea;W||R(),G||(W(),G=!0),C.add(E,y),y.D=0}}function No(y,E){return cr(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Se(m(y.Ea,y,E),Vu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const Y=new Os(this,this.j,y);let te=this.o;if(this.U&&(te?(te=q(te),O(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var E=0,N=0;N<this.i.length;N++){t:{var k=this.i[N];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(E+=k,E>4096){E=N;break e}if(E===4096||N===this.i.length-1){E=N+1;break e}}E=1e3}else E=1e3;E=Du(this,Y,E),N=nn(this.J),yt(N,"RID",y),yt(N,"CVER",22),this.G&&yt(N,"X-HTTP-Session-Id",this.G),Ra(this,N),te&&(this.R?E="headers="+jr(ws(te))+"&"+E:this.u&&Aa(N,this.u,te)),Gl(this.h,Y),this.Ra&&yt(N,"TYPE","init"),this.S?(yt(N,"$req",E),yt(N,"SID","null"),Y.U=!0,ir(Y,N,null)):ir(Y,N,E),this.I=2}}else this.I==3&&(y?ec(this,y):this.i.length==0||Fl(this.h)||ec(this))};function ec(y,E){var N;E?N=E.l:N=y.V++;const k=nn(y.J);yt(k,"SID",y.M),yt(k,"RID",N),yt(k,"AID",y.K),Ra(y,k),y.u&&y.o&&Aa(k,y.u,y.o),N=new Os(y,y.j,N,y.D+1),y.u===null&&(N.J=y.o),E&&(y.i=E.G.concat(y.i)),E=Du(y,N,1e3),N.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Gl(y.h,N),ir(N,k,E)}function Ra(y,E){y.H&&Pe(y.H,function(N,k){yt(E,k,N)}),y.l&&Pe({},function(N,k){yt(E,k,N)})}function Du(y,E,N){N=Math.min(y.i.length,N);const k=y.l?m(y.l.Ka,y.l,y):null;e:{var Y=y.i;let qe=-1;for(;;){const Yt=["count="+N];qe==-1?N>0?(qe=Y[0].g,Yt.push("ofs="+qe)):qe=0:Yt.push("ofs="+qe);let ht=!0;for(let Pt=0;Pt<N;Pt++){var te=Y[Pt].g;const Es=Y[Pt].map;if(te-=qe,te<0)qe=Math.max(0,Y[Pt].g-100),ht=!1;else try{te="req"+te+"_"||"";try{var xe=Es instanceof Map?Es:Object.entries(Es);for(const[yr,Bs]of xe){let Hs=Bs;h(Bs)&&(Hs=xs(Bs)),Yt.push(te+yr+"="+encodeURIComponent(Hs))}}catch(yr){throw Yt.push(te+"type="+encodeURIComponent("_badmap")),yr}}catch{k&&k(Es)}}if(ht){xe=Yt.join("&");break e}}xe=void 0}return y=y.i.splice(0,N),E.G=y,xe}function Pu(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;W||R(),G||(W(),G=!0),C.add(E,y),y.A=0}}function ka(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Se(m(y.Da,y),Vu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Se(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,de(10),Ai(this),ju(this))};function tc(y){y.B!=null&&(u.clearTimeout(y.B),y.B=null)}function ju(y){y.g=new Os(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=nn(y.na);yt(E,"RID","rpc"),yt(E,"SID",y.M),yt(E,"AID",y.K),yt(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&yt(E,"TO",y.ia),yt(E,"TYPE","xmlhttp"),Ra(y,E),y.u&&y.o&&Aa(E,y.u,y.o),y.O&&(y.g.H=y.O);var N=y.g;y=y.ba,N.M=1,N.A=Ta(nn(E)),N.u=null,N.R=!0,yo(N,y)}n.Va=function(){this.C!=null&&(this.C=null,Ai(this),ka(this),de(19))};function So(y){y.C!=null&&(u.clearTimeout(y.C),y.C=null)}function Lu(y,E){var N=null;if(y.g==E){So(y),tc(y),y.g=null;var k=2}else if(ur(y.h,E))N=E.G,Bl(y.h,E),k=1;else return;if(y.I!=0){if(E.o)if(k==1){N=E.u?E.u.length:0,E=Date.now()-E.F;var Y=y.D;k=hn(),Vt(k,new Ne(k,N)),pr(y)}else Pu(y);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(k==1&&No(y,E)||k==2&&ka(y)))switch(N&&N.length>0&&(E=y.h,E.i=E.i.concat(N)),Y){case 1:gr(y,5);break;case 4:gr(y,10);break;case 3:gr(y,6);break;default:gr(y,2)}}}function Vu(y,E){let N=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(N*=2),N*E}function gr(y,E){if(y.j.info("Error code "+E),E==2){var N=m(y.bb,y),k=y.Ua;const Y=!k;k=new ls(k||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||yn(k,"https"),Ta(k),Y?zs(k.toString(),N):Jl(k.toString(),N)}else de(2);y.I=0,y.l&&y.l.pa(E),Uu(y),To(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Uu(y){if(y.I=0,y.ja=[],y.l){const E=Hl(y.h);(E.length!=0||y.i.length!=0)&&(V(y.ja,E),V(y.ja,y.i),y.h.i.length=0,S(y.i),y.i.length=0),y.l.oa()}}function Ou(y,E,N){var k=N instanceof ls?nn(N):new ls(N);if(k.g!="")E&&(k.g=E+"."+k.g),bi(k,k.u);else{var Y=u.location;k=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new ls(null);k&&yn(te,k),E&&(te.g=E),Y&&bi(te,Y),N&&(te.h=N),k=te}return N=y.G,E=y.wa,N&&E&&yt(k,N,E),yt(k,"VER",y.ka),Ra(y,k),k}function qu(y,E,N){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new _t(new hr({ab:N})):new _t(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}n=zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ci(){}Ci.prototype.g=function(y,E){return new Fn(y,E)};function Fn(y,E){mt.call(this),this.g=new Si(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!M(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new Ur(this)}_(Fn,mt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Zl(this.g)},Fn.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var N={};N.__data__=y,y=N}else this.v&&(N={},N.__data__=xs(y),y=N);E.i.push(new tn(E.Ya++,y)),E.I==3&&pr(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,Fn.Z.N.call(this)};function Fu(y){gt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const N in E){y=N;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(Fu,gt);function Gu(){Zt.call(this),this.status=1}_(Gu,Zt);function Ur(y){this.g=y}_(Ur,zu),Ur.prototype.ra=function(){Vt(this.g,"a")},Ur.prototype.qa=function(y){Vt(this.g,new Fu(y))},Ur.prototype.pa=function(y){Vt(this.g,new Gu)},Ur.prototype.oa=function(){Vt(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,yT=function(){return new Ci},gT=function(){return hn()},pT=bt,mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,rh=St,Rn.COMPLETE="complete",mT=Rn,Wt.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Bc=Wt,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,fT=_t}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const x_="@firebase/firestore",v_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Yh("@firebase/firestore");function sl(){return ao.logLevel}function _e(n,...e){if(ao.logLevel<=We.DEBUG){const t=e.map(r0);ao.debug(`Firestore (${kl}): ${n}`,...t)}}function di(n,...e){if(ao.logLevel<=We.ERROR){const t=e.map(r0);ao.error(`Firestore (${kl}): ${n}`,...t)}}function bl(n,...e){if(ao.logLevel<=We.WARN){const t=e.map(r0);ao.warn(`Firestore (${kl}): ${n}`,...t)}}function r0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xT(n,s,t)}function xT(n,e,t){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw di(s),new Error(s)}function pt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||xT(e,a,s)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class Yk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Qk{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ii,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ii)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt(typeof s.accessToken=="string",31837,{l:s}),new vT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class Jk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xk{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Jk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class b_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const s=l=>{l.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new b_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new b_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Zk(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ze(n,e){return n<e?-1:n>e?1:0}function pg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return Lp(a)===Lp(l)?Ze(a,l):Lp(a)?1:-1}return Ze(n.length,e.length)}const eM=55296,tM=57343;function Lp(n){const e=n.charCodeAt(0);return e>=eM&&e<=tM}function _l(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="__name__";class wr{constructor(e,t,s){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&De(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=wr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ze(e.length,t.length)}static compareSegments(e,t){const s=wr.isNumericId(e),a=wr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?wr.extractNumericId(e).compare(wr.extractNumericId(t)):pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class It extends wr{construct(e,t,s){return new It(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const nM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends wr{construct(e,t,s){return new An(e,t,s)}static isValidIdentifier(e){return nM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===__}static keyField(){return new An([__])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(It.fromString(e))}static fromName(e){return new Ce(It.fromString(e).popFirst(5))}static empty(){return new Ce(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n,e,t){if(!t)throw new be(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sM(n,e,t,s){if(e===!0&&s===!0)throw new be(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function w_(n){if(!Ce.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E_(n){if(Ce.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _T(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wh(n);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!_T(n))throw new be(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new be(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-62135596800,N_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*N_);return new Dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<T_)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N_}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-T_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:un("string",Dt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Dt(0,0))}static max(){return new Le(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function rM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(s===1e9?new Dt(t+1,0):new Dt(t,s));return new da(a,Ce.empty(),e)}function iM(n){return new da(n.readTime,n.key,ou)}class da{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new da(Le.min(),Ce.empty(),ou)}static max(){return new da(Le.max(),Ce.empty(),ou)}}function aM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==oM)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((a=>a?ue.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++h,h===l&&s(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new ue(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function cM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-1;function ef(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function uM(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="";function dM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S_(e)),e=hM(n.get(t),e);return S_(e)}function hM(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case wT:t+="";break;default:t+=l}}return t}function S_(n){return n+wT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ET(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Sn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C_(this.data.getIterator())}getIteratorFrom(e){return new C_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class C_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new gs([])}unionWith(e){let t=new mn(An.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new TT("Invalid base64 string: "+l):l}})(e);return new Cn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const fM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const t=fM.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xt(n.seconds),nanos:Xt(n.nanos)}}function Xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fa(n){return typeof n=="string"?Cn.fromBase64String(n):Cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="server_timestamp",ST="__type__",AT="__previous_value__",CT="__local_write_time__";function o0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ST])==null?void 0:s.stringValue)===NT}function tf(n){const e=n.mapValue.fields[AT];return o0(e)?tf(e):e}function lu(n){const e=ha(n.mapValue.fields[CT].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t,s,a,l,u,h,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ih="(default)";class cu{constructor(e,t){this.projectId=e,this.database=t||Ih}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__type__",pM="__max__",Jd={mapValue:{}},RT="__vector__",Rh="value";function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o0(n)?4:yM(n)?9007199254740991:gM(n)?10:11:De(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ha(a.timestampValue),h=ha(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return fa(a.bytesValue).isEqual(fa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Xt(a.geoPointValue.latitude)===Xt(l.geoPointValue.latitude)&&Xt(a.geoPointValue.longitude)===Xt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Xt(a.integerValue)===Xt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Xt(a.doubleValue),h=Xt(l.doubleValue);return u===h?Ch(u)===Ch(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(A_(u)!==A_(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Dr(u[p],h[p])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function uu(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function wl(n,e){if(n===e)return 0;const t=ma(n),s=ma(e);if(t!==s)return Ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=Xt(l.integerValue||l.doubleValue),p=Xt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return I_(n.timestampValue,e.timestampValue);case 4:return I_(lu(n),lu(e));case 5:return pg(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=fa(l),p=fa(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const v=Ze(h[m],p[m]);if(v!==0)return v}return Ze(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=Ze(Xt(l.latitude),Xt(u.latitude));return h!==0?h:Ze(Xt(l.longitude),Xt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return R_(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var w,S,V,P;const h=l.fields||{},p=u.fields||{},m=(w=h[Rh])==null?void 0:w.arrayValue,v=(S=p[Rh])==null?void 0:S.arrayValue,_=Ze(((V=m==null?void 0:m.values)==null?void 0:V.length)||0,((P=v==null?void 0:v.values)==null?void 0:P.length)||0);return _!==0?_:R_(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Jd.mapValue&&u===Jd.mapValue)return 0;if(l===Jd.mapValue)return 1;if(u===Jd.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const w=pg(p[_],v[_]);if(w!==0)return w;const S=wl(h[p[_]],m[v[_]]);if(S!==0)return S}return Ze(p.length,v.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function I_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=ha(n),s=ha(e),a=Ze(t.seconds,s.seconds);return a!==0?a:Ze(t.nanos,s.nanos)}function R_(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=wl(t[a],s[a]);if(l)return l}return Ze(t.length,s.length)}function El(n){return gg(n)}function gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ha(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=gg(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${gg(t.fields[u])}`;return a+"}"})(n.mapValue):De(61005,{value:n})}function ih(n){switch(ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return fa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+ih(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return xa(s.fields,((l,u)=>{a+=l.length+ih(u)})),a})(n.mapValue);default:throw De(13486,{value:n})}}function k_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yg(n){return!!n&&"integerValue"in n}function l0(n){return!!n&&"arrayValue"in n}function M_(n){return!!n&&"nullValue"in n}function D_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ah(n){return!!n&&"mapValue"in n}function gM(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[IT])==null?void 0:s.stringValue)===RT}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xa(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xc(n.arrayValue.values[t]);return e}return{...n}}function yM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}setAll(e){let t=An.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=Xc(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ah(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){xa(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new ss(Xc(this.value))}}function kT(n){const e=[];return xa(n.fields,((t,s)=>{const a=new An([t]);if(ah(s)){const l=kT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new gs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Pn(e,0,Le.min(),Le.min(),Le.min(),ss.empty(),0)}static newFoundDocument(e,t,s,a){return new Pn(e,1,t,Le.min(),s,a,0)}static newNoDocument(e,t){return new Pn(e,2,t,Le.min(),Le.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,Le.min(),Le.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function P_(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(u.referenceValue),t.key):s=wl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function j_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t="asc"){this.field=e,this.dir=t}}function xM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class cn extends MT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new bM(e,t,s):t==="array-contains"?new EM(e,s):t==="in"?new TM(e,s):t==="not-in"?new NM(e,s):t==="array-contains-any"?new SM(e,s):new cn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _M(e,s):new wM(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wl(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends MT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zs(e,t)}matches(e){return DT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DT(n){return n.op==="and"}function PT(n){return vM(n)&&DT(n)}function vM(n){for(const e of n.filters)if(e instanceof Zs)return!1;return!0}function xg(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+El(n.value);if(PT(n))return n.filters.map((e=>xg(e))).join(",");{const e=n.filters.map((t=>xg(t))).join(",");return`${n.op}(${e})`}}function jT(n,e){return n instanceof cn?(function(s,a){return a instanceof cn&&s.op===a.op&&s.field.isEqual(a.field)&&Dr(s.value,a.value)})(n,e):n instanceof Zs?(function(s,a){return a instanceof Zs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&jT(u,a.filters[h])),!0):!1})(n,e):void De(19439)}function LT(n){return n instanceof cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`})(n):n instanceof Zs?(function(t){return t.op.toString()+" {"+t.getFilters().map(LT).join(" ,")+"}"})(n):"Filter"}class bM extends cn{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class _M extends cn{constructor(e,t){super(e,"in",t),this.keys=VT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wM extends cn{constructor(e,t){super(e,"not-in",t),this.keys=VT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class EM extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l0(t)&&uu(t.arrayValue,this.value)}}class TM extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}}class NM extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uu(this.value.arrayValue,t)}}class SM extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>uu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function L_(n,e=null,t=[],s=[],a=null,l=null,u=null){return new AM(n,e,t,s,a,l,u)}function c0(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>xg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>El(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>El(s))).join(",")),e.Te=t}return e.Te}function u0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!j_(n.startAt,e.startAt)&&j_(n.endAt,e.endAt)}function vg(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CM(n,e,t,s,a,l,u,h){return new Pl(n,e,t,s,a,l,u,h)}function nf(n){return new Pl(n)}function V_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UT(n){return n.collectionGroup!==null}function Wc(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new mn(An.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new du(l,s))})),t.has(An.keyField().canonicalString())||e.Ie.push(new du(An.keyField(),s))}return e.Ie}function Ar(n){const e=Ue(n);return e.Ee||(e.Ee=IM(e,Wc(n))),e.Ee}function IM(n,e){if(n.limitType==="F")return L_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new du(a.field,l)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return L_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function bg(n,e){const t=n.filters.concat([e]);return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,e,t){return new Pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return u0(Ar(n),Ar(e))&&n.limitType===e.limitType}function OT(n){return`${c0(Ar(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>LT(a))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>El(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>El(a))).join(",")),`Target(${s})`})(Ar(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of Wc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const m=P_(u,h,p);return u.inclusive?m<=0:m<0})(s.startAt,Wc(s),a)||s.endAt&&!(function(u,h,p){const m=P_(u,h,p);return u.inclusive?m>=0:m>0})(s.endAt,Wc(s),a))})(n,e)}function RM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qT(n){return(e,t)=>{let s=!1;for(const a of Wc(n)){const l=kM(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function kM(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),m=h.data.field(l);return p!==null&&m!==null?wl(p,m):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Ot(Ce.comparator);function hi(){return MM}const zT=new Ot(Ce.comparator);function Hc(...n){let e=zT;for(const t of n)e=e.insert(t.key,t);return e}function FT(n){let e=zT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ja(){return Zc()}function GT(){return Zc()}function Zc(){return new mo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const DM=new Ot(Ce.comparator),PM=new mn(Ce.comparator);function et(...n){let e=PM;for(const t of n)e=e.add(t);return e}const jM=new mn(Ze);function LM(){return jM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function BT(n){return{integerValue:""+n}}function HT(n,e){return uM(e)?BT(e):d0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function VM(n,e,t){return n instanceof hu?(function(a,l){const u={fields:{[ST]:{stringValue:NT},[CT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&o0(l)&&(l=tf(l)),l&&(u.fields[AT]=l),{mapValue:u}})(t,e):n instanceof Tl?KT(n,e):n instanceof fu?YT(n,e):(function(a,l){const u=$T(a,l),h=U_(u)+U_(a.Ae);return yg(u)&&yg(a.Ae)?BT(h):d0(a.serializer,h)})(n,e)}function UM(n,e,t){return n instanceof Tl?KT(n,e):n instanceof fu?YT(n,e):t}function $T(n,e){return n instanceof mu?(function(s){return yg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class hu extends af{}class Tl extends af{constructor(e){super(),this.elements=e}}function KT(n,e){const t=QT(e);for(const s of n.elements)t.some((a=>Dr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class fu extends af{constructor(e){super(),this.elements=e}}function YT(n,e){let t=QT(e);for(const s of n.elements)t=t.filter((a=>!Dr(a,s)));return{arrayValue:{values:t}}}class mu extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function U_(n){return Xt(n.integerValue||n.doubleValue)}function QT(n){return l0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.field=e,this.transform=t}}function OM(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof Tl&&a instanceof Tl||s instanceof fu&&a instanceof fu?_l(s.elements,a.elements,Dr):s instanceof mu&&a instanceof mu?Dr(s.Ae,a.Ae):s instanceof hu&&a instanceof hu})(n.transform,e.transform)}class qM{constructor(e,t){this.version=e,this.transformResults=t}}class js{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new js}static exists(e){return new js(void 0,e)}static updateTime(e){return new js(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class of{}function JT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f0(n.key,js.none()):new _u(n.key,n.data,js.none());{const t=n.data,s=ss.empty();let a=new mn(An.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new va(n.key,s,new gs(a.toArray()),js.none())}}function zM(n,e,t){n instanceof _u?(function(a,l,u){const h=a.value.clone(),p=q_(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof va?(function(a,l,u){if(!oh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=q_(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(XT(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function eu(n,e,t,s){return n instanceof _u?(function(l,u,h,p){if(!oh(l.precondition,u))return h;const m=l.value.clone(),v=z_(l.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof va?(function(l,u,h,p){if(!oh(l.precondition,u))return h;const m=z_(l.fieldTransforms,p,u),v=u.data;return v.setAll(XT(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return oh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function FM(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=$T(s.transform,a||null);l!=null&&(t===null&&(t=ss.empty()),t.set(s.field,l))}return t||null}function O_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&_l(s,a,((l,u)=>OM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends of{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class va extends of{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function XT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function q_(n,e,t){const s=new Map;pt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,UM(u,h,t[a]))}return s}function z_(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,VM(l,u,e))}return s}class f0 extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GM extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&zM(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=GT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=JT(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,((t,s)=>O_(t,s)))&&_l(this.baseMutations,e.baseMutations,((t,s)=>O_(t,s)))}}class m0{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return DM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new m0(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,rt;function KM(n){switch(n){case le.OK:return De(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function WT(n){if(n===void 0)return di("GRPC error has no .code"),le.UNKNOWN;switch(n){case ln.OK:return le.OK;case ln.CANCELLED:return le.CANCELLED;case ln.UNKNOWN:return le.UNKNOWN;case ln.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ln.INTERNAL:return le.INTERNAL;case ln.UNAVAILABLE:return le.UNAVAILABLE;case ln.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ln.NOT_FOUND:return le.NOT_FOUND;case ln.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ln.ABORTED:return le.ABORTED;case ln.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ln.DATA_LOSS:return le.DATA_LOSS;default:return De(39323,{code:n})}}(rt=ln||(ln={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new aa([4294967295,4294967295],0);function F_(n){const e=YM().encode(n),t=new hT;return t.update(e),new Uint8Array(t.digest())}function G_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new aa([t,s],0),new aa([a,l],0)]}class p0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(s<0)throw new $c(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(aa.fromNumber(s)));return a.compare(QM)===1&&(a=new aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=F_(e),[s,a]=G_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new p0(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=F_(e),[s,a]=G_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lf(Le.min(),a,new Ot(Ze),hi(),et())}}class wu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wu(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class ZT{constructor(e,t){this.targetId=e,this.Ce=t}}class eN{constructor(e,t,s=Cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class B_{constructor(){this.ve=0,this.Fe=H_(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),s=et();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:De(38017,{changeType:l})}})),new wu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=H_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JM{constructor(e){this.Ge=e,this.ze=new Map,this.je=hi(),this.Je=Xd(),this.He=Xd(),this.Ye=new Ot(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(vg(l))if(s===0){const u=new Ce(l.path);this.et(t,u,Pn.newNoDocument(u,Le.min()))}else pt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=fa(s).toUint8Array()}catch(p){if(p instanceof TT)return bl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new p0(u,a,l)}catch(p){return bl(p instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&vg(h.target)){const p=new Ce(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Pn.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=et();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new lf(e,t,this.Ye,this.je,s);return this.je=hi(),this.Je=Xd(),this.He=Xd(),this.Ye=new Ot(Ze),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new B_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mn(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mn(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new B_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new Ot(Ce.comparator)}function H_(){return new Ot(Ce.comparator)}const XM={asc:"ASCENDING",desc:"DESCENDING"},WM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZM={and:"AND",or:"OR"};class e3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _g(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t3(n,e){return Dh(n,e.toTimestamp())}function Cr(n){return pt(!!n,49232),Le.fromTimestamp((function(t){const s=ha(t);return new Dt(s.seconds,s.nanos)})(n))}function g0(n,e){return wg(n,e).canonicalString()}function wg(n,e){const t=(function(a){return new It(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function nN(n){const e=It.fromString(n);return pt(oN(e),10190,{key:e.toString()}),e}function Eg(n,e){return g0(n.databaseId,e.path)}function Vp(n,e){const t=nN(e);if(t.get(1)!==n.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(rN(t))}function sN(n,e){return g0(n.databaseId,e)}function n3(n){const e=nN(n);return e.length===4?It.emptyPath():rN(e)}function Tg(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rN(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $_(n,e,t){return{name:Eg(n,e),fields:t.value.mapValue.fields}}function s3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:De(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(pt(v===void 0||typeof v=="string",58123),Cn.fromBase64String(v||"")):(pt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Cn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?le.UNKNOWN:WT(m.code);return new be(v,m.message||"")})(u);t=new eN(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Vp(n,s.document.name),l=Cr(s.document.updateTime),u=s.document.createTime?Cr(s.document.createTime):Le.min(),h=new ss({mapValue:{fields:s.document.fields}}),p=Pn.newFoundDocument(a,l,u,h),m=s.targetIds||[],v=s.removedTargetIds||[];t=new lh(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Vp(n,s.document),l=s.readTime?Cr(s.readTime):Le.min(),u=Pn.newNoDocument(a,l),h=s.removedTargetIds||[];t=new lh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Vp(n,s.document),l=s.removedTargetIds||[];t=new lh([],l,a,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new $M(a,l),h=s.targetId;t=new ZT(h,u)}}return t}function r3(n,e){let t;if(e instanceof _u)t={update:$_(n,e.key,e.value)};else if(e instanceof f0)t={delete:Eg(n,e.key)};else if(e instanceof va)t={update:$_(n,e.key,e.data),updateMask:f3(e.fieldMask)};else{if(!(e instanceof GM))return De(16599,{Vt:e.type});t={verify:Eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof hu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Tl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof mu)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw De(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:t3(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(n,e.precondition)),t}function i3(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Cr(a.updateTime):Cr(l);return u.isEqual(Le.min())&&(u=Cr(l)),new qM(u,a.transformResults||[])})(t,e)))):[]}function a3(n,e){return{documents:[sN(n,e.path)]}}function o3(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=sN(n,a);const l=(function(m){if(m.length!==0)return aN(Zs.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(w){return{field:il(w.field),direction:u3(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=_g(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function l3(n){let e=n3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const w=iN(_);return w instanceof Zs&&PT(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((w=>(function(V){return new du(al(V.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(w)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let w;return w=typeof _=="object"?_.value:_,ef(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(_){const w=!!_.before,S=_.values||[];return new kh(S,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const w=!_.before,S=_.values||[];return new kh(S,w)})(t.endAt)),CM(e,a,u,l,h,"F",p,m)}function c3(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=al(t.unaryFilter.field);return cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=al(t.unaryFilter.field);return cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=al(t.unaryFilter.field);return cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=al(t.unaryFilter.field);return cn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return cn.create(al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zs.create(t.compositeFilter.filters.map((s=>iN(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function u3(n){return XM[n]}function d3(n){return WM[n]}function h3(n){return ZM[n]}function il(n){return{fieldPath:n.canonicalString()}}function al(n){return An.fromServerFormat(n.fieldPath)}function aN(n){return n instanceof cn?(function(t){if(t.op==="=="){if(D_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(M_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(D_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(M_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:d3(t.op),value:t.value}}})(n):n instanceof Zs?(function(t){const s=t.getFilters().map((a=>aN(a)));return s.length===1?s[0]:{compositeFilter:{op:h3(t.op),filters:s}}})(n):De(54877,{filter:n})}function f3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function oN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t,s,a,l=Le.min(),u=Le.min(),h=Cn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.yt=e}}function p3(n){const e=l3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.Cn=new y3}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(da.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(da.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class y3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new mn(It.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lN=41943040;class ts{static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(lN,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nl(0)}static cr(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="LruGarbageCollector",x3=1048576;function Q_([n,e],[t,s]){const a=Ze(n,t);return a===0?Ze(e,s):a}class v3{constructor(e){this.Ir=e,this.buffer=new mn(Q_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Q_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(Y_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dl(t)?_e(Y_,"Ignoring IndexedDB error during garbage collection: ",t):await Ml(t)}await this.Vr(3e5)}))}}class _3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Zh.ce);const s=new v3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(K_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),sl()<=We.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function w3(n,e){return new _3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.changes=new mo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&eu(s.mutation,a,gs.empty(),Dt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const a=Ja();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=Hc();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Ja();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=hi();const u=Zc(),h=(function(){return Zc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof va)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),eu(v.mutation,m,v.mutation.getFieldMask(),Dt.now())):u.set(m.key,gs.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>h.set(m,new T3(v,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Zc();let a=new Ot(((u,h)=>u-h)),l=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||gs.empty();v=h.applyToLocalView(m,v),s.set(p,v);const _=(a.get(h.batchId)||et()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,v=p.value,_=GT();v.forEach((w=>{if(!l.has(w)){const S=JT(t.get(w),s.get(w));S!==null&&_.set(w,S),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ue.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ue.resolve(Ja());let h=ou,p=l;return u.next((m=>ue.forEach(m,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,et()))).next((v=>({batchId:h,changes:FT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let a=Hc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Hc();return this.indexManager.getCollectionParents(e,l).next((h=>ue.forEach(h,(p=>{const m=(function(_,w){return new Pl(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next((v=>{v.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,Pn.newInvalidDocument(v)))}));let h=Hc();return u.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&eu(v.mutation,m,gs.empty(),Dt.now()),rf(t,m)&&(h=h.insert(p,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Cr(a.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:p3(a.bundledQuery),readTime:Cr(a.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.overlays=new Ot(Ce.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ja();return ue.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const a=Ja(),l=t.length+1,u=new Ce(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return ue.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Ot(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Ja(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Ja(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=a)););return ue.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new HM(t,s));let l=this.qr.get(t);l===void 0&&(l=et(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.Qr=new mn(bn.$r),this.Ur=new mn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new bn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new It([])),s=new bn(t,e),a=new bn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new It([])),s=new bn(t,e),a=new bn(t,e+1);let l=et();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new bn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mn(bn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new BM(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new bn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?a0:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bn(t,0),a=new bn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new mn(Ze);return t.forEach((a=>{const l=new bn(a,0),u=new bn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const u=new bn(new Ce(l),0);let h=new mn(Ze);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Yr)),!0)}),u),ue.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(a=>{const l=new bn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new bn(t,0),a=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.ri=e,this.docs=(function(){return new Ot(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let s=hi();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Pn.newInvalidDocument(a))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=hi();const u=t.path,h=new Ce(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||aM(iM(v),s)<=0||(a.has(v.key)||rf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,s,a){De(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new k3(this)}getSize(e){return ue.resolve(this.size)}}class k3 extends E3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.persistence=e,this.si=new mo((t=>c0(t)),u0),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new y0,this.targetCount=0,this.ai=Nl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),ue.waitFor(l).next((()=>a))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new C3,this.referenceDelegate=e(this),this.Pi=new M3(this),this.indexManager=new g3,this.remoteDocumentCache=(function(a){return new R3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new m3(t),this.Ii=new S3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new A3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new I3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){_e("MemoryPersistence","Starting transaction:",e);const a=new D3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class D3 extends lM{constructor(e){super(),this.currentSequenceNumber=e}}class x0{constructor(e){this.persistence=e,this.Ri=new y0,this.Vi=null}static mi(e){return new x0(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const a=Ce.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.pi=new mo((s=>dM(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=w3(this,t)}static mi(e,t){return new Ph(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?ue.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,Le.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ue.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=et(),a=et();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new v0(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oR()?8:cM(On())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new P3;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(sl()<=We.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(sl()<=We.DEBUG&&_e("QueryEngine","Query:",rl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(sl()<=We.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(t))):ue.resolve())}ys(e,t){if(V_(t))return ue.resolve(null);let s=Ar(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Mh(t,null,"F"),s=Ar(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=et(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,h);return this.Cs(t,m,u,p.readTime)?this.ys(e,Mh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,a){return V_(t)||a.isEqual(Le.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?ue.resolve(null):(sl()<=We.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.vs(e,u,t,rM(a,ou)).next((h=>h)))}))}Ds(e,t){let s=new mn(qT(e));return t.forEach(((a,l)=>{rf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return sl()<=We.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ps.getDocumentsMatchingQuery(e,t,da.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",L3=3e8;class V3{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Ot(Ze),this.xs=new mo((l=>c0(l)),u0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function U3(n,e,t,s){return new V3(n,e,t,s)}async function uN(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=et();for(const m of a){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function O3(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,m,v){const _=m.batch,w=_.keys();let S=ue.resolve();return w.forEach((V=>{S=S.next((()=>v.getEntry(p,V))).next((P=>{const B=m.docVersions.get(V);pt(B!==null,48541),P.version.compareTo(B)<0&&(_.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),v.addEntry(P)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=et();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function dN(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function q3(n,e){const t=Ue(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const w=a.get(_);if(!w)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let S=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(Cn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,s)),a=a.insert(_,S),(function(P,B,K){return P.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=L3?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(w,S,v)&&h.push(t.Pi.updateTargetData(l,S))}));let p=hi(),m=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(z3(l,u,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(Le.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(v)}return ue.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function z3(n,e,t){let s=et(),a=et();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=hi();return t.forEach(((h,p)=>{const m=l.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):_e(b0,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function F3(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=a0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function G3(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,ue.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new na(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Ng(n,e,t){const s=Ue(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Dl(u))throw u;_e(b0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function J_(n,e,t){const s=Ue(n);let a=Le.min(),l=et();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const _=Ue(p),w=_.xs.get(v);return w!==void 0?ue.resolve(_.Ms.get(w)):_.Pi.getTargetData(m,v)})(s,u,Ar(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:Le.min(),t?l:et()))).next((h=>(B3(s,RM(e),h),{documents:h,Qs:l})))))}function B3(n,e,t){let s=n.Os.get(e)||Le.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class X_{constructor(){this.activeTargetIds=LM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H3{constructor(){this.Mo=new X_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new X_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="ConnectivityMonitor";class Z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(W_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(W_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd=null;function Sg(){return Wd===null?Wd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wd++,"0x"+Wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",K3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Y3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Sg(),h=this.zo(e,t.toUriEncodedString());_e(Up,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:m}=new URL(h),v=Cl(m);return this.Jo(e,h,p,s,v).then((_=>(_e(Up,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw bl(Up,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=K3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class J3 extends Y3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Sg();return new Promise(((h,p)=>{const m=new fT;m.setWithCredentials(!0),m.listenOnce(mT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case rh.NO_ERROR:const _=m.getResponseJson();_e(Mn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case rh.TIMEOUT:_e(Mn,`RPC '${e}' ${u} timed out`),p(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const w=m.getStatus();if(_e(Mn,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const P=(function(K){const re=K.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(re)>=0?re:le.UNKNOWN})(V.status);p(new be(P,V.message))}else p(new be(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new be(le.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{_e(Mn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);_e(Mn,`RPC '${e}' ${u} sending request:`,a),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=Sg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yT(),h=gT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");_e(Mn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let w=!1,S=!1;const V=new Q3({Yo:B=>{S?_e(Mn,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(w||(_e(Mn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),_e(Mn,`RPC '${e}' stream ${a} sending:`,B),_.send(B))},Zo:()=>_.close()}),P=(B,K,re)=>{B.listen(K,($=>{try{re($)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return P(_,Bc.EventType.OPEN,(()=>{S||(_e(Mn,`RPC '${e}' stream ${a} transport opened.`),V.o_())})),P(_,Bc.EventType.CLOSE,(()=>{S||(S=!0,_e(Mn,`RPC '${e}' stream ${a} transport closed`),V.a_(),this.E_(_))})),P(_,Bc.EventType.ERROR,(B=>{S||(S=!0,bl(Mn,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),V.a_(new be(le.UNAVAILABLE,"The operation could not be completed")))})),P(_,Bc.EventType.MESSAGE,(B=>{var K;if(!S){const re=B.data[0];pt(!!re,16349);const $=re,ie=($==null?void 0:$.error)||((K=$[0])==null?void 0:K.error);if(ie){_e(Mn,`RPC '${e}' stream ${a} received error:`,ie);const W=ie.status;let G=(function(I){const D=ln[I];if(D!==void 0)return WT(D)})(W),C=ie.message;G===void 0&&(G=le.INTERNAL,C="Unknown error status: "+W+" with message "+ie.message),S=!0,V.a_(new be(G,C)),_.close()}else _e(Mn,`RPC '${e}' stream ${a} received:`,re),V.u_(re)}})),P(h,pT.STAT_EVENT,(B=>{B.stat===mg.PROXY?_e(Mn,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===mg.NOPROXY&&_e(Mn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){return new e3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&_e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="PersistentStream";class fN{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new be(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(e1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(e1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class X3 extends fN{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=s3(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Le.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?Cr(u.readTime):Le.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Tg(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=vg(p)?{documents:a3(l,p)}:{query:o3(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=tN(l,u.resumeToken);const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Le.min())>0){h.readTime=Dh(l,u.snapshotVersion.toTimestamp());const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=c3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.q_(t)}}class W3 extends fN{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=i3(e.writeResults,e.commitTime),s=Cr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Tg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>r3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{}class e6 extends Z3{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,wg(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(le.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,wg(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(le.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class t6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class n6{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{po(this)&&(_e(oo,"Restarting streams for network reachability change."),await(async function(p){const m=Ue(p);m.Ea.add(4),await Eu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await uf(m)})(this))}))})),this.Ra=new t6(s,a)}}async function uf(n){if(po(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function mN(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T0(t)?E0(t):jl(t).O_()&&w0(t,e))}function _0(n,e){const t=Ue(n),s=jl(t);t.Ia.delete(e),s.O_()&&pN(t,e),t.Ia.size===0&&(s.O_()?s.L_():po(t)&&t.Ra.set("Unknown"))}function w0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).Y_(e)}function pN(n,e){n.Va.Ue(e),jl(n).Z_(e)}function E0(n){n.Va=new JM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.Ra.ua()}function T0(n){return po(n)&&!jl(n).x_()&&n.Ia.size>0}function po(n){return Ue(n).Ea.size===0}function gN(n){n.Va=void 0}async function s6(n){n.Ra.set("Online")}async function r6(n){n.Ia.forEach(((e,t)=>{w0(n,e)}))}async function i6(n,e){gN(n),T0(n)?(n.Ra.ha(e),E0(n)):n.Ra.set("Unknown")}async function a6(n,e,t){if(n.Ra.set("Online"),e instanceof eN&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){_e(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jh(n,s)}else if(e instanceof lh?n.Va.Ze(e):e instanceof ZT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const s=await dN(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Cn.EMPTY_BYTE_STRING,v.snapshotVersion)),pN(l,p);const _=new na(v.target,p,m,v.sequenceNumber);w0(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){_e(oo,"Failed to raise snapshot:",s),await jh(n,s)}}async function jh(n,e,t){if(!Dl(e))throw e;n.Ea.add(1),await Eu(n),n.Ra.set("Offline"),t||(t=()=>dN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(oo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function yN(n,e){return e().catch((t=>jh(n,t,e)))}async function df(n){const e=Ue(n),t=pa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:a0;for(;o6(e);)try{const a=await F3(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,l6(e,a)}catch(a){await jh(e,a)}xN(e)&&vN(e)}function o6(n){return po(n)&&n.Ta.length<10}function l6(n,e){n.Ta.push(e);const t=pa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xN(n){return po(n)&&!pa(n).x_()&&n.Ta.length>0}function vN(n){pa(n).start()}async function c6(n){pa(n).ra()}async function u6(n){const e=pa(n);for(const t of n.Ta)e.ea(t.mutations)}async function d6(n,e,t){const s=n.Ta.shift(),a=m0.from(s,e,t);await yN(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await df(n)}async function h6(n,e){e&&pa(n).X_&&await(async function(s,a){if((function(u){return KM(u)&&u!==le.ABORTED})(a.code)){const l=s.Ta.shift();pa(s).B_(),await yN(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await df(s)}})(n,e),xN(n)&&vN(n)}async function t1(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),_e(oo,"RemoteStore received new credentials");const s=po(t);t.Ea.add(3),await Eu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function f6(n,e){const t=Ue(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await Eu(t),t.Ra.set("Unknown"))}function jl(n){return n.ma||(n.ma=(function(t,s,a){const l=Ue(t);return l.sa(),new X3(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:s6.bind(null,n),t_:r6.bind(null,n),r_:i6.bind(null,n),H_:a6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),T0(n)?E0(n):n.Ra.set("Unknown")):(await n.ma.stop(),gN(n))}))),n.ma}function pa(n){return n.fa||(n.fa=(function(t,s,a){const l=Ue(t);return l.sa(),new W3(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:c6.bind(null,n),r_:h6.bind(null,n),ta:u6.bind(null,n),na:d6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await df(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(oo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new N0(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(n,e){if(di("AsyncQueue",`${e}: ${n}`),Dl(n))return new be(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Hc(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.ga=new Ot(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Sl{constructor(e,t,s,a,l,u,h,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Sl(e,t,ml.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class p6{constructor(){this.queries=s1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ue(t),l=a.queries;a.queries=s1(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function s1(){return new mo((n=>OT(n)),sf)}async function A0(n,e){const t=Ue(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new m6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=S0(u,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&I0(t)}async function C0(n,e){const t=Ue(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function g6(n,e){const t=Ue(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&I0(t)}function y6(n,e,t){const s=Ue(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function I0(n){n.Ca.forEach((e=>{e.next()}))}var Ag,r1;(r1=Ag||(Ag={})).Ma="default",r1.Cache="cache";class R0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Sl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.key=e}}class _N{constructor(e){this.key=e}}class x6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=qT(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new n1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const w=a.get(v),S=rf(this.query,_)?_:null,V=!!w&&this.mutatedKeys.has(w.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let B=!1;w&&S?w.data.isEqual(S.data)?V!==P&&(s.track({type:3,doc:S}),B=!0):this.su(w,S)||(s.track({type:2,doc:S}),B=!0,(p&&this.eu(S,p)>0||m&&this.eu(S,m)<0)&&(h=!0)):!w&&S?(s.track({type:0,doc:S}),B=!0):w&&!S&&(s.track({type:1,doc:w}),B=!0,(p||m)&&(h=!0)),B&&(S?(u=u.add(S),l=P?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(S,V){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:B})}};return P(S)-P(V)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,m=p!==this.Za;return this.Za=p,u.length!==0||m?{snapshot:new Sl(this.query,e.tu,l,u,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new _N(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new bN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const k0="SyncEngine";class v6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class b6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new mo((h=>OT(h)),sf),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Ce.comparator),this.Au=new Map,this.Ru=new y0,this.Vu={},this.mu=new Map,this.fu=Nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w6(n,e,t=!0){const s=AN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await wN(s,e,t,!0),a}async function E6(n,e){const t=AN(n);await wN(t,e,!0,!1)}async function wN(n,e,t,s){const a=await G3(n.localStore,Ar(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await T6(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&mN(n.remoteStore,a),h}async function T6(n,e,t,s,a){n.pu=(_,w,S)=>(async function(P,B,K,re){let $=B.view.ru(K);$.Cs&&($=await J_(P.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,$))));const ie=re&&re.targetChanges.get(B.targetId),W=re&&re.targetMismatches.get(B.targetId)!=null,G=B.view.applyChanges($,P.isPrimaryClient,ie,W);return a1(P,B.targetId,G.au),G.snapshot})(n,_,w,S);const l=await J_(n.localStore,e,!0),u=new x6(e,l.Qs),h=u.ru(l.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,p);a1(n,t,m.au);const v=new v6(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function N6(n,e,t){const s=Ue(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!sf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ng(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&_0(s.remoteStore,a.targetId),Cg(s,a.targetId)})).catch(Ml)):(Cg(s,a.targetId),await Ng(s.localStore,a.targetId,!0))}async function S6(n,e){const t=Ue(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),_0(t.remoteStore,s.targetId))}async function A6(n,e,t){const s=P6(n);try{const a=await(function(u,h){const p=Ue(u),m=Dt.now(),v=h.reduce(((S,V)=>S.add(V.key)),et());let _,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let V=hi(),P=et();return p.Ns.getEntries(S,v).next((B=>{V=B,V.forEach(((K,re)=>{re.isValidDocument()||(P=P.add(K))}))})).next((()=>p.localDocuments.getOverlayedDocuments(S,V))).next((B=>{_=B;const K=[];for(const re of h){const $=FM(re,_.get(re.key).overlayedDocument);$!=null&&K.push(new va(re.key,$,kT($.value.mapValue),js.exists(!0)))}return p.mutationQueue.addMutationBatch(S,m,K,h)})).next((B=>{w=B;const K=B.applyToLocalDocumentSet(_,P);return p.documentOverlayCache.saveOverlays(S,B.batchId,K)}))})).then((()=>({batchId:w.batchId,changes:FT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let m=u.Vu[u.currentUser.toKey()];m||(m=new Ot(Ze)),m=m.insert(h,p),u.Vu[u.currentUser.toKey()]=m})(s,a.batchId,t),await Tu(s,a.changes),await df(s.remoteStore)}catch(a){const l=S0(a,"Failed to persist write");t.reject(l)}}async function EN(n,e){const t=Ue(n);try{const s=await q3(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?pt(u.hu,14607):a.removedDocuments.size>0&&(pt(u.hu,42227),u.hu=!1))})),await Tu(t,s,e)}catch(s){await Ml(s)}}function i1(n,e,t){const s=Ue(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=Ue(u);p.onlineState=h;let m=!1;p.queries.forEach(((v,_)=>{for(const w of _.Sa)w.va(h)&&(m=!0)})),m&&I0(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function C6(n,e,t){const s=Ue(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new Ot(Ce.comparator);u=u.insert(l,Pn.newNoDocument(l,Le.min()));const h=et().add(l),p=new lf(Le.min(),new Map,new Ot(Ze),u,h);await EN(s,p),s.du=s.du.remove(l),s.Au.delete(e),M0(s)}else await Ng(s.localStore,e,!1).then((()=>Cg(s,e,t))).catch(Ml)}async function I6(n,e){const t=Ue(n),s=e.batch.batchId;try{const a=await O3(t.localStore,e);NN(t,s,null),TN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tu(t,a)}catch(a){await Ml(a)}}async function R6(n,e,t){const s=Ue(n);try{const a=await(function(u,h){const p=Ue(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,h).next((_=>(pt(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);NN(s,e,t),TN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tu(s,a)}catch(a){await Ml(a)}}function TN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function NN(n,e,t){const s=Ue(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||SN(n,s)}))}function SN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(_0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),M0(n))}function a1(n,e,t){for(const s of t)s instanceof bN?(n.Ru.addReference(s.key,e),k6(n,s)):s instanceof _N?(_e(k0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||SN(n,s.key)):De(19791,{wu:s})}function k6(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(_e(k0,"New document in limbo: "+t),n.Eu.add(s),M0(n))}function M0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(It.fromString(e)),s=n.fu.next();n.Au.set(s,new b6(t)),n.du=n.du.insert(t,s),mN(n.remoteStore,new na(Ar(nf(t.path)),s,"TargetPurposeLimboResolution",Zh.ce))}}async function Tu(n,e,t){const s=Ue(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){a.push(m);const _=v0.As(p.targetId,m);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,m){const v=Ue(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ue.forEach(m,(w=>ue.forEach(w.Es,(S=>v.persistence.referenceDelegate.addReference(_,w.targetId,S))).next((()=>ue.forEach(w.ds,(S=>v.persistence.referenceDelegate.removeReference(_,w.targetId,S)))))))))}catch(_){if(!Dl(_))throw _;_e(b0,"Failed to update sequence numbers: "+_)}for(const _ of m){const w=_.targetId;if(!_.fromCache){const S=v.Ms.get(w),V=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(w,P)}}})(s.localStore,l))}async function M6(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){_e(k0,"User change. New user:",e.toKey());const s=await uN(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new be(le.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tu(t,s.Ls)}}function D6(n,e){const t=Ue(n),s=t.Au.get(e);if(s&&s.hu)return et().add(s.key);{let a=et();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function AN(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C6.bind(null,e),e.Pu.H_=g6.bind(null,e.eventManager),e.Pu.yu=y6.bind(null,e.eventManager),e}function P6(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return U3(this.persistence,new j3,e.initialUser,this.serializer)}Cu(e){return new cN(x0.mi,this.serializer)}Du(e){return new H3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class j6 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new b3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new cN((s=>Ph.mi(s,t)),this.serializer)}}class Ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>i1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=M6.bind(null,this.syncEngine),await f6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new p6})()}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=(function(l){return new J3(l)})(e.databaseInfo);return(function(l,u,h,p){return new e6(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new n6(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>i1(this.syncEngine,t,0)),(function(){return Z_.v()?new Z_:new $3})())}createSyncEngine(e,t){return(function(a,l,u,h,p,m,v){const _=new _6(a,l,u,h,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ue(a);_e(oo,"RemoteStore shutting down."),l.Ea.add(5),await Eu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="FirestoreClient";class L6{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Dn.UNAUTHENTICATED,this.clientId=i0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{_e(ga,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(_e(ga,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=S0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qp(n,e){n.asyncQueue.verifyOperationInProgress(),_e(ga,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await uN(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function o1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await V6(n);_e(ga,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>t1(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>t1(e.remoteStore,a))),n._onlineComponents=e}async function V6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(ga,"Using user provided OfflineComponentProvider");try{await qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await qp(n,new Lh)}}else _e(ga,"Using default OfflineComponentProvider"),await qp(n,new j6(void 0));return n._offlineComponents}async function CN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(ga,"Using user provided OnlineComponentProvider"),await o1(n,n._uninitializedComponentsProvider._online)):(_e(ga,"Using default OnlineComponentProvider"),await o1(n,new Ig))),n._onlineComponents}function U6(n){return CN(n).then((e=>e.syncEngine))}async function Vh(n){const e=await CN(n),t=e.eventManager;return t.onListen=w6.bind(null,e.syncEngine),t.onUnlisten=N6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S6.bind(null,e.syncEngine),t}function O6(n,e,t={}){const s=new ii;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new D0({next:w=>{v.Nu(),u.enqueueAndForget((()=>C0(l,_)));const S=w.docs.has(h);!S&&w.fromCache?m.reject(new be(le.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&p&&p.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new R0(nf(h.path),v,{includeMetadataChanges:!0,qa:!0});return A0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}function q6(n,e,t={}){const s=new ii;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new D0({next:w=>{v.Nu(),u.enqueueAndForget((()=>C0(l,_))),w.fromCache&&p.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new R0(h,v,{includeMetadataChanges:!0,qa:!0});return A0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="firestore.googleapis.com",c1=!0;class u1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RN,this.ssl=c1}else this.host=e.host,this.ssl=e.ssl??c1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x3)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Kk;switch(s.type){case"firstParty":return new Xk(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=l1.get(t);s&&(_e("ComponentProvider","Removing Datastore"),l1.delete(t),s.terminate())})(this),Promise.resolve()}}function z6(n,e,t,s={}){var m;n=rs(n,hf);const a=Cl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(_E(`https://${h}`),wE("Firestore",!0)),l.host!==RN&&l.host!==h&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!li(p,u)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Dn.MOCK_USER;else{v=ZI(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Dn(w)}n._authCredentials=new Yk(new vT(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(bu(t,Gt._jsonSchema))return new Gt(e,s||null,new Ce(It.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:un("string",Gt._jsonSchemaVersion),referencePath:un("string")};class oa extends yi{constructor(e,t,s){super(e,t,nf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Ce(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function Ut(n,e,...t){if(n=Bt(n),bT("collection","path",e),n instanceof hf){const s=It.fromString(e,...t);return E_(s),new oa(n,null,s)}{if(!(n instanceof Gt||n instanceof oa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return E_(s),new oa(n.firestore,null,s)}}function er(n,e,...t){if(n=Bt(n),arguments.length===1&&(e=i0.newId()),bT("doc","path",e),n instanceof hf){const s=It.fromString(e,...t);return w_(s),new Gt(n,null,new Ce(s))}{if(!(n instanceof Gt||n instanceof oa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return w_(s),new Gt(n.firestore,n instanceof oa?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class h1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hN(this,"async_queue_retry"),this._c=()=>{const s=Op();s&&_e(d1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ii;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;_e(d1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",f1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=N0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&De(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class fi extends hf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new h1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h1(e),this._firestoreClient=void 0,await e}}}function F6(n,e){const t=typeof n=="object"?n:Qg(),s=typeof n=="string"?n:Ih,a=fo(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=XI("firestore");l&&z6(a,...l)}return a}function ff(n){if(n._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G6(n),n._firestoreClient}function G6(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,m,v){return new mM(h,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,IN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(Cn.fromBase64String(e))}catch(t){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ds(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,Ds._jsonSchema))return Ds.fromBase64String(e.bytes)}}Ds._jsonSchemaVersion="firestore/bytes/1.0",Ds._jsonSchema={type:un("string",Ds._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:un("string",Ir._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Rr(e.vectorValues);throw new be(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:un("string",Rr._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=/^__.*__$/;class H6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class kN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class pf{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MN(this.Ac)&&B6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $6{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}Cc(e,t,s,a=!1){return new pf({Ac:e,methodName:t,Dc:s,path:An.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gf(n){const e=n._freezeSettings(),t=cf(n._databaseId);return new $6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);V0("Data must be an object, but it was:",u,s);const h=PN(s,u);let p,m;if(l.merge)p=new gs(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const w=Rg(e,_,t);if(!u.contains(w))throw new be(le.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);LN(v,w)||v.push(w)}p=new gs(v),m=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=u.fieldTransforms;return new H6(new ss(h),p,m)}class yf extends Ll{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function K6(n,e,t){return new pf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P0 extends Ll{_toFieldTransform(e){return new h0(e.path,new hu)}isEqual(e){return e instanceof P0}}class j0 extends Ll{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=K6(this,e,!0),s=this.vc.map((l=>Vl(l,t))),a=new Tl(s);return new h0(e.path,a)}isEqual(e){return e instanceof j0&&li(this.vc,e.vc)}}class L0 extends Ll{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new mu(e.serializer,HT(e.serializer,this.Fc));return new h0(e.path,t)}isEqual(e){return e instanceof L0&&this.Fc===e.Fc}}function Y6(n,e,t,s){const a=n.Cc(1,e,t);V0("Data must be an object, but it was:",a,s);const l=[],u=ss.empty();xa(s,((p,m)=>{const v=U0(e,p,t);m=Bt(m);const _=a.yc(v);if(m instanceof yf)l.push(v);else{const w=Vl(m,_);w!=null&&(l.push(v),u.set(v,w))}}));const h=new gs(l);return new kN(u,h,a.fieldTransforms)}function Q6(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Rg(e,s,t)],p=[a];if(l.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)h.push(Rg(e,l[w])),p.push(l[w+1]);const m=[],v=ss.empty();for(let w=h.length-1;w>=0;--w)if(!LN(m,h[w])){const S=h[w];let V=p[w];V=Bt(V);const P=u.yc(S);if(V instanceof yf)m.push(S);else{const B=Vl(V,P);B!=null&&(m.push(S),v.set(S,B))}}const _=new gs(m);return new kN(v,_,u.fieldTransforms)}function J6(n,e,t,s=!1){return Vl(t,n.Cc(s?4:3,e))}function Vl(n,e){if(jN(n=Bt(n)))return V0("Unsupported field value:",e,n),PN(n,e);if(n instanceof Ll)return(function(s,a){if(!MN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Vl(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HT(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Dt.fromDate(s);return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Dt){const l=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Ir)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ds)return{bytesValue:tN(a.serializer,s._byteString)};if(s instanceof Gt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:g0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Rr)return(function(u,h){return{mapValue:{fields:{[IT]:{stringValue:RT},[Rh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return d0(h.serializer,m)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Wh(s)}`)})(n,e)}function PN(n,e){const t={};return ET(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(n,((s,a)=>{const l=Vl(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function jN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof Ir||n instanceof Ds||n instanceof Gt||n instanceof Ll||n instanceof Rr)}function V0(n,e,t){if(!jN(t)||!_T(t)){const s=Wh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Rg(n,e,t){if((e=Bt(e))instanceof mf)return e._internalPath;if(typeof e=="string")return U0(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const X6=new RegExp("[~\\*/\\[\\]]");function U0(n,e,t){if(e.search(X6)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mf(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new be(le.INVALID_ARGUMENT,h+n+p)}function LN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends VN{data(){return super.data()}}function xf(n,e){return typeof e=="string"?U0(n,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O0{}class q0 extends O0{}function Ln(n,e,...t){let s=[];e instanceof O0&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof z0)).length,h=l.filter((p=>p instanceof vf)).length;if(u>1||u>0&&h>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class vf extends q0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new vf(e,t,s)}_apply(e){const t=this._parse(e);return ON(e._query,t),new yi(e.firestore,e.converter,bg(e._query,t))}_parse(e){const t=gf(e.firestore);return(function(l,u,h,p,m,v,_){let w;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g1(_,v);const V=[];for(const P of _)V.push(p1(p,l,P));w={arrayValue:{values:V}}}else w=p1(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g1(_,v),w=J6(h,u,_,v==="in"||v==="not-in");return cn.create(m,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Js(n,e,t){const s=e,a=xf("where",n);return vf._create(a,s,t)}class z0 extends O0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new z0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Zs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)ON(u,p),u=bg(u,p)})(e._query,t),new yi(e.firestore,e.converter,bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class F0 extends q0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new F0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(l,u)})(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Pl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Xa(n,e="asc"){const t=e,s=xf("orderBy",n);return F0._create(s,t)}class G0 extends q0{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new G0(e,t,s)}_apply(e){return new yi(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Zd(n){return G0._create("limit",n,"F")}function p1(n,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UT(e)&&t.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(It.fromString(t));if(!Ce.isDocumentKey(s))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return k_(n,new Ce(s))}if(t instanceof Gt)return k_(n,t._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function g1(n,e){if(!Array.isArray(n)||n.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ON(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z6{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xa(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Rh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>Xt(u.doubleValue)));return new Rr(t)}convertGeoPoint(e){return new Ir(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const t=ha(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=It.fromString(e);pt(oN(s),9688,{name:e});const a=new cu(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return a.isEqual(t)||di(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Za extends VN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Za._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Za._jsonSchemaVersion="firestore/documentSnapshot/1.0",Za._jsonSchema={type:un("string",Za._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class ch extends Za{data(e={}){return super.data(e)}}class eo{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Kc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ch(this._firestore,this._userDataWriter,s.key,s,new Kc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new ch(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Kc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new ch(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Kc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:eD(h.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n){n=rs(n,Gt);const e=rs(n.firestore,fi);return O6(ff(e),n._key).then((t=>FN(e,n,t)))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:un("string",eo._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class B0 extends Z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Bn(n){n=rs(n,yi);const e=rs(n.firestore,fi),t=ff(e),s=new B0(e);return UN(n._query),q6(t,n._query).then((a=>new eo(e,s,n,a)))}function H0(n,e,t){n=rs(n,Gt);const s=rs(n.firestore,fi),a=qN(n.converter,e,t);return _f(s,[DN(gf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,js.none())])}function bf(n,e,t,...s){n=rs(n,Gt);const a=rs(n.firestore,fi),l=gf(a);let u;return u=typeof(e=Bt(e))=="string"||e instanceof mf?Q6(l,"updateDoc",n._key,e,t,s):Y6(l,"updateDoc",n._key,e),_f(a,[u.toMutation(n._key,js.exists(!0))])}function tD(n){return _f(rs(n.firestore,fi),[new f0(n._key,js.none())])}function lo(n,e){const t=rs(n.firestore,fi),s=er(n),a=qN(n.converter,e);return _f(t,[DN(gf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,js.exists(!1))]).then((()=>s))}function nD(n,...e){var p,m,v;n=Bt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||m1(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(m1(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(m=_.error)==null?void 0:m.bind(_),e[s+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,u,h;if(n instanceof Gt)u=rs(n.firestore,fi),h=nf(n._key.path),l={next:_=>{e[s]&&e[s](FN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=rs(n,yi);u=rs(_.firestore,fi),h=_._query;const w=new B0(u);l={next:S=>{e[s]&&e[s](new eo(u,w,_,S))},error:e[s+1],complete:e[s+2]},UN(n._query)}return(function(w,S,V,P){const B=new D0(P),K=new R0(S,B,V);return w.asyncQueue.enqueueAndForget((async()=>A0(await Vh(w),K))),()=>{B.Nu(),w.asyncQueue.enqueueAndForget((async()=>C0(await Vh(w),K)))}})(ff(u),h,a,l)}function _f(n,e){return(function(s,a){const l=new ii;return s.asyncQueue.enqueueAndForget((async()=>A6(await U6(s),a,l))),l.promise})(ff(n),e)}function FN(n,e,t){const s=t.docs.get(e._key),a=new B0(n);return new Za(n,a,e._key,s,new Kc(t.hasPendingWrites,t.fromCache),e.converter)}function ai(){return new P0("serverTimestamp")}function sD(...n){return new j0("arrayUnion",n)}function kg(n){return new L0("increment",n)}(function(e,t=!0){(function(a){kl=a})(Il),Mr(new Xs("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new fi(new Qk(s.getProvider("auth-internal")),new Wk(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(m.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ps(x_,v_,e),Ps(x_,v_,"esm2020")})();const GN="@firebase/installations",$0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1e4,HN=`w:${$0}`,$N="FIS_v2",rD="https://firebaseinstallations.googleapis.com/v1",iD=3600*1e3,aD="installations",oD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new ho(aD,oD,lD);function KN(n){return n instanceof tr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN({projectId:n}){return`${rD}/projects/${n}/installations`}function QN(n){return{token:n.token,requestStatus:2,expiresIn:uD(n.expiresIn),creationTime:Date.now()}}async function JN(n,e){const s=(await e.json()).error;return co.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function XN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function cD(n,{refreshToken:e}){const t=XN(n);return t.append("Authorization",dD(e)),t}async function WN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function uD(n){return Number(n.replace("s","000"))}function dD(n){return`${$N} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=YN(n),a=XN(n),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={fid:t,authVersion:$N,appId:n.appId,sdkVersion:HN},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await WN(()=>fetch(s,h));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:QN(m.authToken)}}else throw await JN("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=/^[cdef][\w-]{21}$/,Mg="";function pD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=gD(n);return mD.test(t)?t:Mg}catch{return Mg}}function gD(n){return fD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Map;function t2(n,e){const t=wf(n);n2(t,e),yD(t,e)}function n2(n,e){const t=e2.get(n);if(t)for(const s of t)s(e)}function yD(n,e){const t=xD();t&&t.postMessage({key:n,fid:e}),vD()}let Wa=null;function xD(){return!Wa&&"BroadcastChannel"in self&&(Wa=new BroadcastChannel("[Firebase] FID Change"),Wa.onmessage=n=>{n2(n.data.key,n.data.fid)}),Wa}function vD(){e2.size===0&&Wa&&(Wa.close(),Wa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-installations-database",_D=1,uo="firebase-installations-store";let zp=null;function K0(){return zp||(zp=CE(bD,_D,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(uo)}}})),zp}async function Oh(n,e){const t=wf(n),a=(await K0()).transaction(uo,"readwrite"),l=a.objectStore(uo),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&t2(n,e.fid),e}async function s2(n){const e=wf(n),s=(await K0()).transaction(uo,"readwrite");await s.objectStore(uo).delete(e),await s.done}async function Ef(n,e){const t=wf(n),a=(await K0()).transaction(uo,"readwrite"),l=a.objectStore(uo),u=await l.get(t),h=e(u);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&t2(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(n){let e;const t=await Ef(n.appConfig,s=>{const a=wD(s),l=ED(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Mg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function wD(n){const e=n||{fid:pD(),registrationStatus:0};return r2(e)}function ED(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=TD(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ND(n)}:{installationEntry:e}}async function TD(n,e){try{const t=await hD(n,e);return Oh(n.appConfig,t)}catch(t){throw KN(t)&&t.customData.serverCode===409?await s2(n.appConfig):await Oh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function ND(n){let e=await y1(n.appConfig);for(;e.registrationStatus===1;)await ZN(100),e=await y1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Y0(n);return s||t}return e}function y1(n){return Ef(n,e=>{if(!e)throw co.create("installation-not-found");return r2(e)})}function r2(n){return SD(n)?{fid:n.fid,registrationStatus:0}:n}function SD(n){return n.registrationStatus===1&&n.registrationTime+BN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD({appConfig:n,heartbeatServiceProvider:e},t){const s=CD(n,t),a=cD(n,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={installation:{sdkVersion:HN,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await WN(()=>fetch(s,h));if(p.ok){const m=await p.json();return QN(m)}else throw await JN("Generate Auth Token",p)}function CD(n,{fid:e}){return`${YN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(n,e=!1){let t;const s=await Ef(n.appConfig,l=>{if(!i2(l))throw co.create("not-registered");const u=l.authToken;if(!e&&kD(u))return l;if(u.requestStatus===1)return t=ID(n,e),l;{if(!navigator.onLine)throw co.create("app-offline");const h=DD(l);return t=RD(n,h),h}});return t?await t:s.authToken}async function ID(n,e){let t=await x1(n.appConfig);for(;t.authToken.requestStatus===1;)await ZN(100),t=await x1(n.appConfig);const s=t.authToken;return s.requestStatus===0?Q0(n,e):s}function x1(n){return Ef(n,e=>{if(!i2(e))throw co.create("not-registered");const t=e.authToken;return PD(t)?{...e,authToken:{requestStatus:0}}:e})}async function RD(n,e){try{const t=await AD(n,e),s={...e,authToken:t};return await Oh(n.appConfig,s),t}catch(t){if(KN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await s2(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Oh(n.appConfig,s)}throw t}}function i2(n){return n!==void 0&&n.registrationStatus===2}function kD(n){return n.requestStatus===2&&!MD(n)}function MD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+iD}function DD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function PD(n){return n.requestStatus===1&&n.requestTime+BN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n){const e=n,{installationEntry:t,registrationPromise:s}=await Y0(e);return s?s.catch(console.error):Q0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n,e=!1){const t=n;return await VD(t),(await Q0(t,e)).token}async function VD(n){const{registrationPromise:e}=await Y0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n){if(!n||!n.options)throw Fp("App Configuration");if(!n.name)throw Fp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Fp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Fp(n){return co.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="installations",OD="installations-internal",qD=n=>{const e=n.getProvider("app").getImmediate(),t=UD(e),s=fo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},zD=n=>{const e=n.getProvider("app").getImmediate(),t=fo(e,a2).getImmediate();return{getId:()=>jD(t),getToken:a=>LD(t,a)}};function FD(){Mr(new Xs(a2,qD,"PUBLIC")),Mr(new Xs(OD,zD,"PRIVATE"))}FD();Ps(GN,$0);Ps(GN,$0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="analytics",GD="firebase_id",BD="origin",HD=60*1e3,$D="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ys=new ho("analytics","Analytics",KD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){if(!n.startsWith(J0)){const e=ys.create("invalid-gtag-resource",{gtagURL:n});return Hn.warn(e.message),""}return n}function o2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function QD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function JD(n,e){const t=QD("firebase-js-sdk-policy",{createScriptURL:YD}),s=document.createElement("script"),a=`${J0}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function XD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function WD(n,e,t,s,a,l){const u=s[a];try{if(u)await e[u];else{const p=(await o2(t)).find(m=>m.measurementId===a);p&&await e[p.appId]}}catch(h){Hn.error(h)}n("config",a,l)}async function ZD(n,e,t,s,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await o2(t);for(const p of u){const m=h.find(_=>_.measurementId===p),v=m&&e[m.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,a||{})}catch(l){Hn.error(l)}}function eP(n,e,t,s){async function a(l,...u){try{if(l==="event"){const[h,p]=u;await ZD(n,e,t,h,p)}else if(l==="config"){const[h,p]=u;await WD(n,e,t,s,h,p)}else if(l==="consent"){const[h,p]=u;n("consent",h,p)}else if(l==="get"){const[h,p,m]=u;n("get",h,p,m)}else if(l==="set"){const[h]=u;n("set",h)}else n(l,...u)}catch(h){Hn.error(h)}}return a}function tP(n,e,t,s,a){let l=function(...u){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=eP(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function nP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(J0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=30,rP=1e3;class iP{constructor(e={},t=rP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const l2=new iP;function aP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function oP(n){var u;const{appId:e,apiKey:t}=n,s={method:"GET",headers:aP(t)},a=$D.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let h="";try{const p=await l.json();(u=p.error)!=null&&u.message&&(h=p.error.message)}catch{}throw ys.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function lP(n,e=l2,t){const{appId:s,apiKey:a,measurementId:l}=n.options;if(!s)throw ys.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw ys.create("no-api-key")}const u=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new dP;return setTimeout(async()=>{h.abort()},HD),c2({appId:s,apiKey:a,measurementId:l},u,h,e)}async function c2(n,{throttleEndTimeMillis:e,backoffCount:t},s,a=l2){var h;const{appId:l,measurementId:u}=n;try{await cP(s,e)}catch(p){if(u)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:u};throw p}try{const p=await oP(n);return a.deleteThrottleMetadata(l),p}catch(p){const m=p;if(!uP(m)){if(a.deleteThrottleMetadata(l),u)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:l,measurementId:u};throw p}const v=Number((h=m==null?void 0:m.customData)==null?void 0:h.httpStatus)===503?Gb(t,a.intervalMillis,sP):Gb(t,a.intervalMillis),_={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return a.setThrottleMetadata(l,_),Hn.debug(`Calling attemptFetch again in ${v} millis`),c2(n,_,s,a)}}function cP(n,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),s(ys.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uP(n){if(!(n instanceof tr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class dP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function hP(n,e,t,s,a){if(a&&a.global){n("event",t,s);return}else{const l=await e,u={...s,send_to:l};n("event",t,u)}}async function fP(n,e,t,s){if(s&&s.global){const a={};for(const l of Object.keys(t))a[`user_properties.${l}`]=t[l];return n("set",a),Promise.resolve()}else{const a=await e;n("config",a,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(){if(TE())try{await NE()}catch(n){return Hn.warn(ys.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Hn.warn(ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function pP(n,e,t,s,a,l,u){const h=lP(n);h.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Hn.error(w)),e.push(h);const p=mP().then(w=>{if(w)return s.getId()}),[m,v]=await Promise.all([h,p]);nP(l)||JD(l,m.measurementId),a("js",new Date);const _=(u==null?void 0:u.config)??{};return _[BD]="firebase",_.update=!0,v!=null&&(_[GD]=v),a("config",m.measurementId,_),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.app=e}_delete(){return delete pl[this.app.options.appId],Promise.resolve()}}let pl={},v1=[];const b1={};let Gp="dataLayer",yP="gtag",_1,X0,w1=!1;function xP(){const n=[];if(EE()&&n.push("This is a browser extension environment."),lR()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=ys.create("invalid-analytics-context",{errorInfo:e});Hn.warn(t.message)}}function vP(n,e,t){xP();const s=n.options.appId;if(!s)throw ys.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ys.create("no-api-key");if(pl[s]!=null)throw ys.create("already-exists",{id:s});if(!w1){XD(Gp);const{wrappedGtag:l,gtagCore:u}=tP(pl,v1,b1,Gp,yP);X0=l,_1=u,w1=!0}return pl[s]=pP(n,v1,b1,e,_1,Gp,t),new gP(n)}function bP(n=Qg()){n=Bt(n);const e=fo(n,qh);return e.isInitialized()?e.getImmediate():_P(n)}function _P(n,e={}){const t=fo(n,qh);if(t.isInitialized()){const a=t.getImmediate();if(li(e,t.getOptions()))return a;throw ys.create("already-initialized")}return t.initialize({options:e})}function wP(n,e,t){n=Bt(n),fP(X0,pl[n.app.options.appId],e,t).catch(s=>Hn.error(s))}function EP(n,e,t,s){n=Bt(n),hP(X0,pl[n.app.options.appId],e,t,s).catch(a=>Hn.error(a))}const E1="@firebase/analytics",T1="0.10.19";function TP(){Mr(new Xs(qh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return vP(s,a,t)},"PUBLIC")),Mr(new Xs("analytics-internal",n,"PRIVATE")),Ps(E1,T1),Ps(E1,T1,"esm2020");function n(e){try{const t=e.getProvider(qh).getImmediate();return{logEvent:(s,a,l)=>EP(t,s,a,l),setUserProperties:(s,a)=>wP(t,s,a)}}catch(t){throw ys.create("interop-component-reg-failed",{reason:t})}}}TP();const NP={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},W0=IE(NP),tu=Hk(W0),at=F6(W0);bP(W0);const u2=F.createContext(void 0),SP=({children:n})=>{const[e,t]=F.useState(null),[s,a]=F.useState(!0),l=(p,m)=>{const v=`teacher-${m.split("@")[0]}`;let _="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";p.includes("")?_="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":p.includes("")&&(_="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:v,email:m,displayName:p,role:"teacher",avatar:_,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",p),localStorage.setItem("teacherEmail",m)},u=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await P5(tu)}catch(p){console.error("Logout error",p)}},h=async p=>{if(e)try{let m={...p};if(p.firstName!==void 0||p.lastName!==void 0){const v=p.firstName!==void 0?p.firstName:e.firstName||"",_=p.lastName!==void 0?p.lastName:e.lastName||"";m.displayName=`${v} ${_}`.trim()}if(t(v=>v?{...v,...m}:null),e.role!=="teacher"){const v=er(at,"users",e.uid);await H0(v,m,{merge:!0})}}catch(m){throw console.error("Error updating profile:",m),m}};return F.useEffect(()=>{const p=localStorage.getItem("isTeacher")==="true";if(p){const v=localStorage.getItem("teacherName")||"",_=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";l(v,_),a(!1);return}const m=D5(tu,async v=>{if(v)try{const _=er(at,"users",v.uid),w=await zN(_);if(w.exists()){const S=w.data();(v.email==="q@gmail.com"||v.email==="yazan22@gmail.com")&&(S.totalXP=25e3,S.quizzesCompleted=500),t({uid:v.uid,email:v.email||"",displayName:S.displayName||`${S.firstName||""} ${S.lastName||""}`.trim()||"Student",firstName:S.firstName,lastName:S.lastName,age:S.age,role:S.role,grade:S.grade,phone:S.phone,address:S.address,school:S.school,gender:S.gender,avatar:S.avatar,profileBackground:S.profileBackground,genderChanged:S.genderChanged,aptitudeResults:S.aptitudeResults,performanceAnalysis:S.performanceAnalysis})}else t({uid:v.uid,email:v.email||"",displayName:"User",role:"student"})}catch(_){console.error("Error fetching user profile:",_)}else p||t(null);a(!1)});return()=>m()},[]),o.jsx(u2.Provider,{value:{user:e,loading:s,logout:u,setTeacherSession:l,updateUserProfile:h},children:!s&&n})},is=()=>{const n=F.useContext(u2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},AP=({onLoginClick:n,onNavigate:e,onLogoutClick:t,isNavRestricted:s})=>{const[a,l]=F.useState(!1),[u,h]=F.useState(!1),{user:p}=is();F.useEffect(()=>{const _=()=>{window.scrollY>10?h(!0):h(!1)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const m=_=>{s&&!window.confirm("          .")||(e(_),l(!1),window.scrollTo({top:0,behavior:"smooth"}))},v=()=>{m("HOME")};return o.jsxs("nav",{className:`w-full z-50 sticky top-0 transition-all duration-500 ${u?"bg-gray-950 shadow-lg":"bg-transparent shadow-none"}`,children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:v,children:[o.jsx("div",{className:"p-1 bg-white/5 rounded-full group-hover:bg-white/10 transition-colors",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"  ",className:"w-10 h-10 md:w-12 md:h-12 rounded-full object-cover border-2 border-white/10 shadow-sm"})}),o.jsx("span",{className:"text-xl md:text-2xl font-black text-white tracking-tight drop-shadow-sm",children:""})]}),o.jsx("div",{className:"hidden md:flex items-center justify-center flex-1 px-4 lg:px-8",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-full border transition-all duration-500 ${u?"bg-gray-900/50 border-white/5 backdrop-blur-sm":"bg-white/5 border-white/5 backdrop-blur-sm"}`,children:[o.jsxs("button",{onClick:()=>m("HOME"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(yh,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>m("QUIZZES"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(Un,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>m("LESSONS_EXPLANATIONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(so,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>m("LESSONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(kr,{className:"w-4 h-4"})," "]})]})}),o.jsx("div",{className:"hidden md:flex items-center gap-3",children:p?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>m("PROFILE"),className:"flex items-center gap-2 text-white hover:bg-white/10 px-3 py-1.5 rounded-full transition-all font-bold border border-transparent hover:border-white/10",title:" ",children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center border border-white/20",children:p.avatar?o.jsx("img",{src:p.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:p.displayName.split(" ")[0]})]}),p.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>m("QUESTION_BANK"),className:"bg-white/10 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all border border-white/10",title:" ",children:o.jsx(ca,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>m("TEACHER_DASHBOARD"),className:"bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all shadow-lg border border-blue-400/50",title:" ",children:o.jsx(ph,{className:"w-5 h-5"})})]}),o.jsx("button",{onClick:t,className:"bg-red-500/10 text-red-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition-all border border-red-500/20",title:"",children:o.jsx(su,{className:"w-4 h-4"})})]}):o.jsxs("button",{onClick:n,className:"bg-gradient-to-r from-emerald-600 to-teal-700 text-white px-5 py-2 rounded-full font-bold hover:shadow-[0_0_15px_rgba(16,185,129,0.4)] transition-all shadow-md flex items-center gap-2 transform hover:scale-105 border border-emerald-500/30 text-sm",children:[o.jsx(Zp,{className:"w-4 h-4"})," "]})}),o.jsx("div",{className:"md:hidden flex items-center gap-2",children:o.jsx("button",{onClick:()=>!s&&l(!a),className:`text-white hover:text-emerald-200 p-2 transition-colors ${s?"opacity-50 cursor-not-allowed":""}`,disabled:s,children:a?o.jsx(Tr,{className:"w-7 h-7"}):o.jsx($C,{className:"w-7 h-7"})})})]})}),a&&o.jsx("div",{className:"md:hidden bg-gray-950/95 backdrop-blur-xl border-t border-white/10 shadow-xl absolute w-full z-50 animate-fade-in h-screen overflow-y-auto pb-20",children:o.jsxs("div",{className:"px-4 pt-2 pb-6 space-y-2",children:[p&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-white/5 rounded-2xl border border-white/10 mt-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden border border-white/20",children:p.avatar?o.jsx("img",{src:p.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):p.displayName.charAt(0)}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-white text-lg",children:p.displayName}),o.jsx("span",{className:"text-sm text-gray-400",children:p.email})]})]}),o.jsxs("button",{onClick:()=>m("HOME"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(yh,{className:"w-5 h-5 text-emerald-400"})," "]}),o.jsxs("button",{onClick:()=>m("QUIZZES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Un,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>m("LESSONS_EXPLANATIONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(so,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>m("LESSONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(kr,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>m("CONTACT_TEACHER"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Hg,{className:"w-5 h-5 text-emerald-400"}),"   "]}),o.jsxs("button",{onClick:()=>m("ABOUT_PLATFORM"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(CC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>m("SERVICES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(oE,{className:"w-5 h-5 text-emerald-400"})," "]}),p&&o.jsxs("button",{onClick:()=>m("PROFILE"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(sC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsx("div",{className:"border-t border-white/10 my-2 pt-2"}),p?o.jsxs("div",{className:"space-y-3 mt-2",children:[p.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>m("TEACHER_DASHBOARD"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-md flex items-center justify-center gap-2",children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]}),o.jsxs("button",{onClick:()=>m("QUESTION_BANK"),className:"w-full bg-gray-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2",children:[o.jsx(ca,{className:"w-5 h-5"})," "]})]}),o.jsxs("button",{onClick:()=>{l(!1),t()},className:"w-full bg-red-900/20 text-red-400 border border-red-900/30 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-red-900/40",children:[o.jsx(su,{className:"w-5 h-5"})," "]})]}):o.jsxs("button",{onClick:()=>{l(!1),n()},className:"w-full mt-2 bg-gradient-to-r from-emerald-600 to-teal-700 text-white py-3 rounded-xl font-black text-lg shadow-lg flex items-center justify-center gap-2",children:[o.jsx(Zp,{className:"w-6 h-6"})," "]})]})})]})},CP=({onStartQuiz:n,onLoginClick:e,onNavigate:t})=>{const{user:s}=is(),[a,l]=F.useState(!1),u=()=>{l(!0),setTimeout(()=>l(!1),3e3)},h=()=>{s?t("QUIZZES"):u()},p=()=>{s?t("LESSONS"):u()},m=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return o.jsxs("section",{className:"relative w-full min-h-[calc(100vh-80px)] flex items-center justify-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300",children:[a&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[o.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:o.jsx(mh,{className:"w-6 h-6 text-red-200"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),o.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),o.jsx("button",{onClick:()=>l(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:o.jsx(Tr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{l(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-0 w-full relative z-10 flex flex-col items-center text-center",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/40 border border-emerald-800 px-4 py-2 rounded-full shadow-lg backdrop-blur-md",children:[o.jsx(si,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})}),o.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",o.jsx("br",{}),o.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",o.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:o.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),o.jsx("br",{}),"  "]}),o.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["         ",o.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),o.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[o.jsxs("button",{onClick:h,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Un,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(so,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:p,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(kr,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:()=>t("PLATFORM_DEFINITION"),className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(ni,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"   "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Hg,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsx("div",{className:"w-full mt-2",children:s?o.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-800/80 backdrop-blur-sm border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[o.jsx(jn,{className:"w-5 h-5"})," "]}):o.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Zp,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(Er,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},Bp=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),Hp=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),IP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),N1=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],RP=({onNavigate:n})=>{const[e,t]=F.useState([0,1,2]),[s,a]=F.useState(!0);F.useEffect(()=>{const h=setInterval(()=>{a(!1),setTimeout(()=>{const p=[];for(;p.length<3;){const m=Math.floor(Math.random()*N1.length);p.includes(m)||p.push(m)}t(p),a(!0)},500)},5e3);return()=>clearInterval(h)},[]);const l=h=>{switch(h){case"whatsapp":return o.jsx(Bp,{className:"w-5 h-5 text-white"});case"messenger":return o.jsx(IP,{className:"w-5 h-5 text-white"});case"telegram":return o.jsx(Hp,{className:"w-5 h-5 text-white"});default:return null}},u=h=>{switch(h){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}};return o.jsx("section",{className:"py-20 relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),o.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(tg,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Wp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Hp,{className:"w-6 h-6"})})]})]})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(tg,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Wp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Hp,{className:"w-6 h-6"})})]})]})]})]}),o.jsx("div",{className:"text-center mb-12",children:o.jsxs("button",{onClick:()=>n("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[o.jsx(to,{className:"w-6 h-6"}),"  ",o.jsx(hh,{className:"w-6 h-6"})]})}),o.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map((h,p)=>{const m=N1[h];return o.jsx("div",{className:`transform transition-all duration-500 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-lg border border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-white/10 transition-all",children:[o.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-white/5 border-b border-r border-white/5 transform rotate-45"}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:m.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white",children:m.name}),o.jsx("span",{className:"text-xs text-gray-500 font-medium",children:m.time})]})]}),o.jsx("div",{className:`w-8 h-8 rounded-full ${u(m.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:l(m.platform)})]}),o.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',m.text,'"']})]})},`${m.id}-${p}`)})})]})]})})},S1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":l?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(no,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-3 h-3"})]},v)})})]})},kP=({isOpen:n,onClose:e})=>{const[t,s]=F.useState("ROLE_SELECTION"),[a,l]=F.useState(!1),[u,h]=F.useState(null),[p,m]=F.useState(null),{setTeacherSession:v}=is(),[_,w]=F.useState(""),[S,V]=F.useState(""),[P,B]=F.useState(""),[K,re]=F.useState(""),[$,ie]=F.useState(""),[W,G]=F.useState(""),[C,R]=F.useState(""),[I,D]=F.useState(""),[j,U]=F.useState(""),[M,Fe]=F.useState("male"),[$e,ee]=F.useState(""),[pe,he]=F.useState("");if(!n)return null;const Pe=()=>{s("ROLE_SELECTION"),h(null),m(null),w(""),V(""),B(""),re(""),ie(""),G(""),R(""),D(""),U(""),Fe("male"),he(""),ee(""),l(!1)},Re=()=>{Pe(),e()},q=Oe=>{Oe.preventDefault(),h(null),l(!0),setTimeout(()=>{_==="2001"?(v(".   ","yazan@etqan.edu"),m("   !"),setTimeout(()=>Re(),1500)):_==="2003"?(v(".   ","majd@etqan.edu"),m("    !"),setTimeout(()=>Re(),1500)):(h("   "),l(!1))},800)},J=async Oe=>{Oe.preventDefault(),h(null),l(!0);try{await R5(tu,S.trim(),P),m("   !"),setTimeout(()=>Re(),1500)}catch(ut){console.error(ut),h("      "),l(!1)}},O=async Oe=>{Oe.preventDefault(),h(null),l(!0);try{const it=(await I5(tu,I.trim(),j)).user,Ht="",Vs=C==="university"&&$e?$e:"";await H0(er(at,"users",it.uid),{firstName:K,lastName:$,age:W,grade:C,gender:M,school:Vs,avatar:Ht,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:I.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),m("   !"),setTimeout(()=>Re(),1500)}catch(ut){console.error(ut),ut.code==="auth/email-already-in-use"?h("   "):ut.code==="auth/weak-password"?h("   "):h("    .    ."),l(!1)}},ne=async Oe=>{Oe.preventDefault(),h(null),l(!0);try{await C5(tu,pe.trim()),m("   !")}catch(ut){console.error(ut),ut.code==="auth/user-not-found"?h("    "):ut.code==="auth/invalid-email"?h("    "):ut.code==="auth/too-many-requests"?h("           ."):h("          .")}finally{l(!1)}},fe=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ee=()=>o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),o.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:o.jsx(jn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),o.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:o.jsx(oi,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),je=()=>o.jsxs("form",{onSubmit:q,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Qa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsx("input",{type:"password",value:_,onChange:Oe=>w(Oe.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),nt=()=>o.jsxs("form",{onSubmit:J,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:S,onChange:Oe=>V(Oe.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(eg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"password",value:P,onChange:Oe=>B(Oe.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),o.jsx(Qa,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),o.jsx("div",{className:"text-left",children:o.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",o.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Ie=()=>{const Oe=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(it=>({label:` ${it}`,value:it.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],ut=[{label:"",value:"male"},{label:"",value:"female"}];return o.jsxs("form",{onSubmit:O,className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:K,onChange:it=>re(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:$,onChange:it=>ie(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx("input",{type:"number",value:W,onChange:it=>G(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx(S1,{options:ut,value:M,onChange:it=>Fe(it),placeholder:" "})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),o.jsx(S1,{options:Oe,value:C,onChange:it=>R(it),placeholder:"  / "})]}),C==="university"&&o.jsxs("div",{className:"space-y-1 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),o.jsx("input",{type:"text",value:$e,onChange:it=>ee(it.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"email",value:I,onChange:it=>D(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"password",value:j,onChange:it=>U(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Ct=()=>o.jsxs("form",{onSubmit:ne,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",o.jsx("strong",{children:""}),"  "]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:pe,onChange:Oe=>he(Oe.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(eg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),o.jsx("div",{className:"text-center mt-4",children:o.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[o.jsx(hh,{className:"w-4 h-4"}),"  "]})})]});return o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Re}),o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[a&&!p&&o.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),o.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:o.jsx(Ft,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),o.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:fe()}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),o.jsx("button",{onClick:Re,disabled:a,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:o.jsx(Tr,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!p&&t!=="FORGOT_PASSWORD"&&o.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:a,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[o.jsx(Cp,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-bold",children:""})]}),o.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:p?o.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:o.jsx(la,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:p}),t==="FORGOT_PASSWORD"&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[o.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[o.jsx(mh,{className:"w-5 h-5"}),"  :"]}),o.jsxs("p",{className:"leading-relaxed",children:["         ",o.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),o.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),m(null)):Re()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):o.jsxs(o.Fragment,{children:[t==="ROLE_SELECTION"&&Ee(),t==="TEACHER_LOGIN"&&je(),t==="STUDENT_LOGIN"&&nt(),t==="STUDENT_SIGNUP"&&Ie(),t==="FORGOT_PASSWORD"&&Ct(),u&&o.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[o.jsx(mh,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsx("span",{className:"font-medium",children:u})]})]})})]})]})},MP=()=>{const{user:n}=is(),[e,t]=F.useState(!1),[s,a]=F.useState(null),[l,u]=F.useState("MCQ"),[h,p]=F.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[m,v]=F.useState([]),[_,w]=F.useState(null),[S,V]=F.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[P,B]=F.useState(""),[K,re]=F.useState(!1),[$,ie]=F.useState([]),[W,G]=F.useState(!1),[C,R]=F.useState(""),I=(O,ne)=>{V(fe=>({...fe,[O]:ne}))},D=(O,ne)=>{const fe=[...S.options];fe[O]=ne,V(Ee=>({...Ee,options:fe}))},j=()=>{if(!S.question.trim()){alert("   ");return}if((l==="MCQ"||l==="READING")&&S.options.some(fe=>!fe.trim())){alert("   ");return}if(l==="READING"&&!S.passageContent.trim()){alert("   ");return}if(l==="REORDER"&&!P.trim()){alert("    ");return}let O=[];if(l==="TF")O=["",""];else if(l==="REORDER"){if(O=P.split(" ").filter(fe=>fe.trim().length>0),O.length<2){alert("       ");return}}else O=S.options;const ne={id:_||Date.now(),question:S.question,options:O,correctAnswer:S.correctAnswer,explanation:S.explanation||"",type:l};l==="READING"&&(ne.passageContent=S.passageContent,ne.generalInstruction=S.generalInstruction,ne.passageFontSize=S.passageFontSize),_?(v(m.map(fe=>fe.id===_?ne:fe)),w(null)):v([...m,ne]),U()},U=()=>{V({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),B(""),w(null),u("MCQ")},M=O=>{const ne=m.find(fe=>fe.id===O);ne&&(w(O),u(ne.type||"MCQ"),ne.type==="REORDER"?(B(ne.options.join(" ")),V({question:ne.question,options:["","","",""],correctAnswer:ne.correctAnswer,explanation:ne.explanation||"",passageContent:ne.passageContent||"",generalInstruction:ne.generalInstruction||"",passageFontSize:ne.passageFontSize||"md"})):(V({question:ne.question,options:ne.type==="TF"?["","","",""]:ne.options.length>=4?ne.options:[...ne.options,...Array(4-ne.options.length).fill("")],correctAnswer:ne.correctAnswer,explanation:ne.explanation||"",passageContent:ne.passageContent||"",generalInstruction:ne.generalInstruction||"",passageFontSize:ne.passageFontSize||"md"}),B("")),window.scrollTo({top:0,behavior:"smooth"}))},Fe=()=>{U()},$e=O=>{window.confirm("      ")&&(v(m.filter(ne=>ne.id!==O)),_===O&&U())},ee=async()=>{if(!h.title||!h.grade){alert("     ");return}if(m.length===0){alert("     ");return}t(!0);try{const O={title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:m,createdBy:(n==null?void 0:n.uid)||"teacher",teacherName:(n==null?void 0:n.displayName)||"",description:h.description||"",duration:parseInt(h.duration)||30,questionDuration:h.questionDuration?parseInt(h.questionDuration):void 0};if(s){const ne=er(at,"quizzes",s);await bf(ne,{...O,updatedAt:ai()}),alert("    !")}else await lo(Ut(at,"quizzes"),{...O,createdAt:ai()}),alert("    !");p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),U()}catch(O){console.error("Error saving quiz:",O),alert("   ")}finally{t(!1)}},pe=()=>{window.confirm("        .")&&(p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),U())},he=async()=>{G(!0);try{const O=Ln(Ut(at,"quizzes"),Xa("createdAt","desc")),ne=await Bn(O);ie(ne.docs.map(fe=>({id:fe.id,...fe.data()})))}catch(O){console.error(O)}G(!1)},Pe=()=>{he(),re(!0)},Re=O=>{m.length>0&&!window.confirm("         .")||(a(O.id||null),p({title:O.title,subject:O.subject,grade:O.grade,category:O.category||"Language",description:O.description||"",duration:O.duration?O.duration.toString():"30",questionDuration:O.questionDuration?O.questionDuration.toString():""}),v(O.questions),re(!1),U(),window.scrollTo({top:0,behavior:"smooth"}))},q=$.filter(O=>O.title.toLowerCase().includes(C.toLowerCase())||O.grade.includes(C)),J=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:o.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:o.jsx(Ub,{className:"w-10 h-10 text-blue-400"})}),o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),o.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",n==null?void 0:n.displayName]})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:Pe,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[o.jsx(Jp,{className:"w-5 h-5"})," "]})})]})})}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(Un,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),o.jsx("button",{onClick:pe,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:o.jsx(Tr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:O=>p({...h,title:O.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx($g,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.subject,onChange:O=>p({...h,subject:O.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"English",children:"English"}),o.jsx("option",{value:"Science",children:""}),o.jsx("option",{value:"Math",children:""})]})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),o.jsxs("div",{className:"relative",children:[o.jsx(oi,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.grade,onChange:O=>p({...h,grade:O.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",className:"text-gray-400",children:" "}),o.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(O=>o.jsxs("option",{value:O.toString(),children:[" ",O]},O))}),o.jsx("optgroup",{label:" ",children:o.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(no,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"col-span-2 md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),o.jsxs("div",{className:"relative",children:[o.jsx(fE,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.category,onChange:O=>p({...h,category:O.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),o.jsx("option",{value:"General",children:"  (General Quiz)"})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(no,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(Hh,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),o.jsx("input",{type:"number",min:"1",value:h.duration,onChange:O=>p({...h,duration:O.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(mE,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),o.jsx("input",{type:"number",min:"5",value:h.questionDuration,onChange:O=>p({...h,questionDuration:O.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),o.jsx("textarea",{value:h.description,onChange:O=>p({...h,description:O.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(ph,{className:"w-5 h-5 text-blue-400"})}),_?" ":" "]}),o.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[o.jsx("button",{onClick:()=>u("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsx("button",{onClick:()=>u("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsxs("button",{onClick:()=>u("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(kr,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>u("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(cE,{className:"w-4 h-4"})," "]})]})]}),o.jsxs("div",{className:"space-y-6",children:[l==="READING"&&o.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[o.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[o.jsx(AI,{className:"w-5 h-5"})," "]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),o.jsx("input",{type:"text",value:S.generalInstruction,onChange:O=>I("generalInstruction",O.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),o.jsx("textarea",{value:S.passageContent,onChange:O=>I("passageContent",O.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),o.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[o.jsx(VI,{className:"w-4 h-4"}),"   (  )"]}),o.jsx("div",{className:"flex gap-3",children:J.map(O=>o.jsx("button",{onClick:()=>I("passageFontSize",O.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${S.passageFontSize===O.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:O.label},O.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:l==="READING"?"  ":l==="REORDER"?"/ ":" "}),o.jsxs("div",{className:"relative",children:[o.jsx(ni,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),o.jsx("input",{type:"text",value:S.question,onChange:O=>I("question",O.target.value),placeholder:l==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),l==="MCQ"||l==="READING"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.options.map((O,ne)=>o.jsxs("div",{className:`relative group transition-all duration-300 ${S.correctAnswer===ne?"scale-[1.02]":""}`,children:[o.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[o.jsxs("span",{className:`text-xs font-bold ${S.correctAnswer===ne?"text-blue-400":"text-gray-400"}`,children:[" ",ne+1]}),o.jsx("button",{onClick:()=>I("correctAnswer",ne),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${S.correctAnswer===ne?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:S.correctAnswer===ne?" ":" "})]}),o.jsx("input",{type:"text",value:O,onChange:fe=>D(ne,fe.target.value),placeholder:`  ${ne+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${ne===S.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},ne))}):l==="REORDER"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),o.jsx("input",{type:"text",dir:"ltr",value:P,onChange:O=>B(O.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),P&&o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:P.split(" ").filter(O=>O.trim()).map((O,ne)=>o.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:O},ne))}),o.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("button",{onClick:()=>I("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===0&&o.jsx(ns,{className:"w-6 h-6"})," (True)"]}),o.jsxs("button",{onClick:()=>I("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===1&&o.jsx(ns,{className:"w-6 h-6"})," (False)"]})]}),o.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[o.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),o.jsx("textarea",{value:S.explanation,onChange:O=>I("explanation",O.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm"})]}),o.jsxs("div",{className:"flex gap-3",children:[_&&o.jsxs("button",{onClick:Fe,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[o.jsx(dE,{className:"w-5 h-5"})," "]}),o.jsx("button",{onClick:j,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${_?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:_?o.jsxs(o.Fragment,{children:[o.jsx(sa,{className:"w-5 h-5"})," "]}):o.jsxs(o.Fragment,{children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"sticky top-24 space-y-6",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[o.jsx(sa,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:m.length})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:h.category})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsxs("span",{className:"font-bold text-white",children:[h.duration," "]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?o.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),o.jsxs("button",{onClick:ee,disabled:e||m.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||m.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):s?o.jsx(uE,{className:"w-5 h-5"}):o.jsx(ns,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),m.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:o.jsx(Ub,{className:"w-4 h-4 text-blue-400"})}),"  (",m.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:m.map((O,ne)=>o.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${_===O.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:ne+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:O.question}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:O.type==="REORDER"?"":O.options.length===2?"/":O.passageContent?"":""})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[o.jsxs("button",{onClick:()=>M(O.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(sg,{className:"w-3.5 h-3.5"}),""]}),o.jsx("div",{className:"w-px h-3 bg-gray-600"}),o.jsxs("button",{onClick:()=>$e(O.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(rg,{className:"w-3.5 h-3.5"}),""]})]})]},O.id))})]})]})})]})}),K&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(Jp,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),o.jsx("button",{onClick:()=>re(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(Tr,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:o.jsxs("div",{className:"relative",children:[o.jsx(ua,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),o.jsx("input",{type:"text",placeholder:"   ...",value:C,onChange:O=>R(O.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:W?o.jsx("div",{className:"flex justify-center py-10",children:o.jsx(Ft,{className:"w-8 h-8 animate-spin text-emerald-600"})}):q.length===0?o.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(O=>o.jsxs("div",{onClick:()=>Re(O),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:O.subject}),o.jsx("span",{className:"text-xs text-gray-400",children:O.grade})]}),o.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:O.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(ni,{className:"w-3 h-3"}),O.questions.length," "]})]},O.id))})})]})})]})},$p=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:Gg},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Un},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ua},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:to},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:$h},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Al}],DP=[{id:"first_step",title:" ",desc:"   ",icon:Gg,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:n=>n.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%  ",icon:si,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:n=>n.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5 ",icon:Un,color:"text-blue-500",bg:"bg-blue-500/10",condition:n=>n.quizzesCompleted>=5},{id:"expert",title:" ",desc:" 10 ",icon:ul,color:"text-purple-500",bg:"bg-purple-500/10",condition:n=>n.quizzesCompleted>=10},{id:"high_level",title:" ",desc:"  5",icon:$h,color:"text-orange-500",bg:"bg-orange-500/10",condition:n=>n.level>=5},{id:"master",title:" ",desc:"  10",icon:Al,color:"text-red-500",bg:"bg-red-500/10",condition:n=>n.level>=10}],PP=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],Kp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],A1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":l?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-600"}`,children:p?p.label:s}),o.jsx(no,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-blue-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-3 h-3"})]},v)})})]})},jP=({onNavigate:n})=>{const{user:e,updateUserProfile:t}=is(),[s,a]=F.useState(!1),[l,u]=F.useState(null),[h,p]=F.useState(!1),[m,v]=F.useState(!1),[_,w]=F.useState((e==null?void 0:e.avatar)||""),[S,V]=F.useState((e==null?void 0:e.profileBackground)||Kp[0].url),[P,B]=F.useState([]),[K,re]=F.useState(!0),[$,ie]=F.useState(0),[W,G]=F.useState(1),[C,R]=F.useState($p[0]),[I,D]=F.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1}),[j,U]=F.useState([]),[M,Fe]=F.useState(""),[$e,ee]=F.useState(!1),[pe,he]=F.useState("50"),[Pe,Re]=F.useState(null),[q,J]=F.useState(!1),[O,ne]=F.useState(""),[fe,Ee]=F.useState(!1),[je,nt]=F.useState([]),[Ie,Ct]=F.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});F.useEffect(()=>{if(e&&(Ct(me=>({...me,firstName:e.firstName||me.firstName,lastName:e.lastName||me.lastName,gender:e.gender||me.gender,grade:e.grade||me.grade,school:e.school||me.school})),e.avatar&&w(e.avatar),e.profileBackground&&V(e.profileBackground),e.aptitudeResults)){const me=[...e.aptitudeResults].sort((He,st)=>new Date(st.date).getTime()-new Date(He.date).getTime());nt(me)}},[e]),F.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){re(!1),ee(!0);try{const He=Ln(Ut(at,"users"),Js("role","==","student")),Wt=(await Bn(He)).docs.map($t=>({id:$t.id,...$t.data()}));U(Wt)}catch(He){console.error("Error fetching students:",He)}finally{ee(!1)}return}try{const He=Ln(Ut(at,"quiz_results"),Js("userId","==",e.uid)),st=await Bn(He),Wt=[];let $t=0,gt=!1;st.forEach(hn=>{const In=hn.data();Wt.push({id:hn.id,...hn.data()});let pn=10+In.percentage*2;In.passed&&(pn+=50),In.percentage===100&&(pn+=100,gt=!0),$t+=Math.round(pn)}),Wt.sort((hn,In)=>{var de,Ne;const pn=((de=hn.createdAt)==null?void 0:de.seconds)||0,Us=((Ne=In.createdAt)==null?void 0:Ne.seconds)||0;return pn-Us}),B(Wt);let Zt=$t;try{const hn=er(at,"users",e.uid),In=await zN(hn);In.exists()&&In.data().totalXP!==void 0?Zt=In.data().totalXP:e.totalXP!==void 0&&(Zt=e.totalXP)}catch{e.totalXP!==void 0&&(Zt=e.totalXP)}ie(Zt);const bt=Math.floor(Zt/500)+1;G(bt);const vs=[...$p].reverse().find(hn=>bt>=hn.minLevel)||$p[0];R(vs),D({quizzesCompleted:Wt.length,hasPerfectScore:gt,level:bt})}catch(He){console.error(He)}finally{re(!1)}}})()},[e]);const Oe=async me=>{me.preventDefault(),a(!0),u(null);try{let He={...Ie};Ie.grade==="university"&&Ie.universityName&&(He.school=Ie.universityName),delete He.universityName,await t(He),u("   !"),setTimeout(()=>u(null),3e3)}catch(He){console.error(He),alert("   ")}finally{a(!1)}},ut=async()=>{a(!0);try{await t({avatar:_}),p(!1)}catch(me){console.error(me)}finally{a(!1)}},it=async()=>{a(!0);try{await t({profileBackground:S}),v(!1)}catch(me){console.error(me)}finally{a(!1)}},Ht=async(me,He)=>{if(!me)return;const st=parseInt(pe);if(isNaN(st)||st<=0){alert("    ");return}if(window.confirm(`     ${st}   ${He}`)){a(!0),Re(null);try{const Wt=er(at,"users",me);await bf(Wt,{totalXP:kg(st)}),U($t=>$t.map(gt=>gt.id===me?{...gt,totalXP:(gt.totalXP||0)+st}:gt)),Re(`  ${st} XP  ${He} !`),setTimeout(()=>Re(null),3e3)}catch(Wt){console.error(Wt),alert("    ")}finally{a(!1)}}},Vs=async()=>{if(!O.trim()){alert("   ");return}Ee(!0);try{await lo(Ut(at,"announcements"),{title:O,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:ai()}),alert("   "),ne(""),J(!1)}catch(me){console.error(me),alert("   ")}finally{Ee(!1)}},$n=j.filter(me=>(me.displayName||"").toLowerCase().includes(M.toLowerCase())||(me.email||"").toLowerCase().includes(M.toLowerCase())),qn=me=>me?me.startsWith("http")?{backgroundImage:`url(${me})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${Kp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},sr=me=>!me||me.startsWith("http")?"bg-no-repeat bg-center":me,mt=P.slice(-10).map(me=>me.percentage),Vt=mt.length>0?Math.max(...mt):0,as=mt.length>0?Math.min(...mt):0,_a=mt.length>0?Math.round(mt.reduce((me,He)=>me+He,0)/mt.length):0,Pr=P.length,dn=(W-1)*500,Kn=Math.min(100,Math.max(0,($-dn)/500*100)),zn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",rr=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(me=>({label:` ${me}`,value:me.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],xs=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-full h-full p-4 text-gray-400"})}),o.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:o.jsx(ns,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"text-center md:text-right space-y-2",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),o.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[o.jsx(eg,{className:"w-4 h-4 text-blue-500"}),e.email]}),o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[o.jsx(oi,{className:"w-3.5 h-3.5"})," "]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-12",children:[o.jsxs("button",{onClick:()=>n&&n("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:o.jsx(gC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:o.jsx(ca,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:o.jsx(lC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:o.jsx(so,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>J(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:o.jsx(Yc,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_FEEDBACK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-teal-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-teal-900/20 text-teal-400 flex items-center justify-center group-hover:bg-teal-600 group-hover:text-white transition-colors",children:o.jsx(cl,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[o.jsx(ul,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),Pe&&o.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[o.jsx(ns,{className:"w-4 h-4"})," ",Pe]})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx(ua,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"   ...",value:M,onChange:me=>Fe(me.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),o.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:$e?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Ft,{className:"w-8 h-8 animate-spin text-blue-500"})}):M===""?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):$n.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):$n.map(me=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:me.avatar?o.jsx("img",{src:me.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-5 h-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:me.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[o.jsx(gh,{className:"w-3 h-3"})," ",me.totalXP||0]}),o.jsxs("span",{children:[" ",me.email]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:pe,onChange:He=>he(He.target.value),children:[o.jsx("option",{value:"10",children:"+10 XP"}),o.jsx("option",{value:"50",children:"+50 XP"}),o.jsx("option",{value:"100",children:"+100 XP"}),o.jsx("option",{value:"200",children:"+200 XP"}),o.jsx("option",{value:"500",children:"+500 XP"})]}),o.jsx("button",{onClick:()=>Ht(me.id,me.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:o.jsx(fI,{className:"w-4 h-4"})})]})]},me.id))})]})]}),q&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:o.jsx(Yc,{className:"w-6 h-6 text-orange-400"})}),o.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),o.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:o.jsx(Tr,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:O,onChange:me=>ne(me.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),o.jsxs("button",{onClick:Vs,disabled:fe,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[fe?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"})," "]})]})]})})]}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[h&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(jn,{className:"w-5 h-5 text-purple-500"}),"  "]}),o.jsx("button",{onClick:()=>p(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(Tr,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-3 gap-3",children:PP.map((me,He)=>{const st=W<me.minLevel;return o.jsxs("button",{onClick:()=>!st&&w(me.url),disabled:st,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${_===me.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${st?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[o.jsx("img",{src:me.url,alt:`Avatar ${He}`,className:"w-full h-full object-cover"}),st&&o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[o.jsx(Qa,{className:"w-4 h-4 mb-0.5"}),o.jsxs("span",{className:"text-[10px] font-bold",children:[" ",me.minLevel]})]}),!st&&_===me.url&&o.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:o.jsx(ns,{className:"w-3 h-3"})})]},He)})})}),o.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:o.jsxs("button",{onClick:ut,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})}),m&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Ob,{className:"w-6 h-6 text-emerald-500"}),"  "]}),o.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(Tr,{className:"w-6 h-6 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Kp.map((me,He)=>{const st=W<me.minLevel,Wt=S===me.url;return o.jsxs("button",{onClick:()=>!st&&V(me.url),disabled:st,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Wt?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${st?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${me.url})`}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:st?o.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[o.jsx(Qa,{className:"w-4 h-4 text-white"}),o.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",me.minLevel]})]}):Wt&&o.jsx(ns,{className:"w-8 h-8 text-white drop-shadow-md"})}),o.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:o.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:me.name})})]},He)})})}),o.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),o.jsx("button",{onClick:it,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[o.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${sr(e==null?void 0:e.profileBackground)}`,style:qn(e==null?void 0:e.profileBackground),children:[o.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[o.jsx(Ob,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${C.color}`,children:[o.jsx(C.icon,{className:"w-4 h-4"})," ",C.title]})]}),o.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>p(!0),children:[o.jsx("div",{className:"w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] border-gray-800 shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center",children:e!=null&&e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(jn,{className:"w-16 h-16 text-gray-500"})}),o.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:o.jsx(tI,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm font-medium mb-6",children:[o.jsx("span",{children:e==null?void 0:e.email}),o.jsx("span",{className:"text-gray-300",children:""}),o.jsxs("span",{className:"text-emerald-400 font-bold flex items-center gap-1",children:[o.jsx(ul,{className:"w-3 h-3"}),"  ",W]})]})]}),o.jsxs("form",{onSubmit:Oe,className:"space-y-6 border-t border-gray-700 pt-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(jn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ie.firstName,onChange:me=>Ct({...Ie,firstName:me.target.value}),className:zn})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ie.lastName,onChange:me=>Ct({...Ie,lastName:me.target.value}),className:zn})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx(A1,{options:xs,value:Ie.gender,onChange:me=>!(e!=null&&e.genderChanged)&&Ct({...Ie,gender:me}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&o.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[o.jsx(Qa,{className:"w-3 h-3"}),"        "]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ie.phone,onChange:me=>Ct({...Ie,phone:me.target.value}),className:zn})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:Ie.address,onChange:me=>Ct({...Ie,address:me.target.value}),className:zn})]}),o.jsx("div",{className:"md:col-span-2 mt-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(oi,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:Ie.school,onChange:me=>Ct({...Ie,school:me.target.value}),className:zn})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx(A1,{options:rr,value:Ie.grade,onChange:me=>Ct({...Ie,grade:me}),placeholder:" "})]}),Ie.grade==="university"&&o.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),o.jsx("input",{type:"text",value:Ie.universityName||Ie.school,onChange:me=>Ct({...Ie,universityName:me.target.value}),placeholder:"   ...",className:`${zn} border-blue-500 bg-blue-900/10`})]})]}),o.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[l&&o.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[o.jsx(ns,{className:"w-4 h-4"})," ",l]}),o.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})]})]})]})]}),je.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 overflow-hidden",children:[o.jsx("div",{className:"p-8 bg-gray-800/50 border-b border-gray-700",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(vl,{className:"w-6 h-6 text-blue-400"}),"  "]})}),o.jsx("div",{className:"p-8 space-y-6",children:o.jsx("div",{className:"space-y-3",children:je.map((me,He)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${me.score>=75?"bg-emerald-900/30 text-emerald-400":"bg-yellow-900/30 text-yellow-400"}`,children:[me.score,"%"]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-white text-sm",children:me.subject}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(me.date).toLocaleDateString("ar-EG")})]})]}),o.jsx("div",{className:"text-xs text-gray-400 font-medium",children:me.grade})]},He))})})]})]}),o.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[o.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),o.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:o.jsx(C.icon,{className:"w-8 h-8 text-white"})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",W]}),o.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[o.jsx(gh,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",$,"   (XP)"]})]})]})}),o.jsxs("div",{className:"relative mb-8",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[o.jsx("span",{children:C.title}),o.jsxs("span",{children:["  ",W+1]})]}),o.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:o.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Kn}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),o.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[o.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[o.jsx(Al,{className:"w-4 h-4 text-yellow-300"}),"  "]}),o.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:C.title}),o.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[o.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:o.jsx(GC,{className:"w-5 h-5 text-yellow-400"})})," "]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:DP.map((me,He)=>{const st=me.condition(I);return o.jsxs("div",{className:`relative p-3 rounded-xl border flex flex-col items-center text-center transition-all ${st?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md":"bg-gray-800/50 border-gray-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-2 ${st?me.bg:"bg-gray-700"}`,children:o.jsx(me.icon,{className:`w-6 h-6 ${st?me.color:"text-gray-400"}`})}),o.jsx("h4",{className:"font-bold text-xs text-gray-200 mb-1",children:me.title}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-tight",children:me.desc}),!st&&o.jsx("div",{className:"absolute inset-0 bg-gray-900/50 backdrop-blur-[1px] rounded-xl flex items-center justify-center",children:o.jsx(Qa,{className:"w-4 h-4 text-gray-400"})})]},He)})})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(DI,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),K?o.jsx("div",{className:"h-48 flex items-center justify-center",children:o.jsx(Ft,{className:"w-6 h-6 animate-spin text-emerald-500"})}):o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:o.jsx(ul,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[Vt,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:o.jsx(lE,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-red-400",children:[as,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:o.jsx(mC,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsx("div",{className:"font-black text-lg text-blue-400",children:Pr})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:o.jsx(rI,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),o.jsxs("div",{className:"font-black text-lg text-purple-400",children:[_a,"%"]})]})]})]})})]})]})]})]})},LP=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],Yp=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(no,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},VP=({onBack:n,setNavRestricted:e})=>{const{user:t}=is(),[s,a]=F.useState("SELECTION"),[l,u]=F.useState(""),[h,p]=F.useState(""),[m,v]=F.useState("All"),[_,w]=F.useState([]),[S,V]=F.useState(!1),[P,B]=F.useState(null),[K,re]=F.useState(0),[$,ie]=F.useState({}),[W,G]=F.useState(1800),[C,R]=F.useState(null),[I,D]=F.useState(!1),[j,U]=F.useState(0),[M,Fe]=F.useState(0),[$e,ee]=F.useState(""),[pe,he]=F.useState(!1),[Pe,Re]=F.useState(!1),[q,J]=F.useState({}),[O,ne]=F.useState(!1),[fe,Ee]=F.useState(null),[je,nt]=F.useState(!1),[Ie,Ct]=F.useState(!1),[Oe,ut]=F.useState(!1),[it,Ht]=F.useState(0),[Vs,$n]=F.useState(!1),[qn,sr]=F.useState(null);F.useEffect(()=>{window.scrollTo(0,0)},[s]),F.useEffect(()=>(e(s==="ACTIVE"),()=>e(!1)),[s,e]),F.useEffect(()=>{h?mt():w([])},[h]),F.useEffect(()=>{let de;return s==="ACTIVE"&&W>0&&(de=setInterval(()=>{G(Ne=>Ne<=1?(rr(),0):Ne-1)},1e3)),()=>clearInterval(de)},[s,W]),F.useEffect(()=>{let de;return s==="ACTIVE"&&(P!=null&&P.questionDuration)&&C!==null&&(C>0?de=setInterval(()=>{R(Ne=>Ne!==null&&Ne>0?Ne-1:0)},1e3):C===0&&zn()),()=>clearInterval(de)},[s,P,C]),F.useEffect(()=>{P!=null&&P.questionDuration?R(P.questionDuration):R(null)},[K,P]),F.useEffect(()=>{if(s!=="ACTIVE")return;const de=()=>{Ht(Qe=>{const dt=Qe+1;return dt===1?Ct(!0):dt>=2&&(Ct(!1),ut(!0)),dt})},Ne=()=>{document.hidden&&de()},Se=Qe=>{(Qe.key==="PrintScreen"||Qe.ctrlKey&&Qe.key==="p"||Qe.metaKey&&Qe.shiftKey)&&(Qe.preventDefault(),de())},ye=Qe=>Qe.preventDefault();return document.addEventListener("visibilitychange",Ne),document.addEventListener("keydown",Se),document.addEventListener("contextmenu",ye),document.addEventListener("copy",ye),document.addEventListener("paste",ye),document.addEventListener("cut",ye),document.addEventListener("selectstart",ye),()=>{document.removeEventListener("visibilitychange",Ne),document.removeEventListener("keydown",Se),document.removeEventListener("contextmenu",ye),document.removeEventListener("copy",ye),document.removeEventListener("paste",ye),document.removeEventListener("cut",ye),document.removeEventListener("selectstart",ye)}},[s]);const mt=async()=>{V(!0);try{const de=Ln(Ut(at,"quizzes"),Js("grade","==",h)),Ne=await Bn(de),Se=[];Ne.forEach(ye=>{Se.push({id:ye.id,...ye.data()})}),w(Se)}catch(de){console.error("Error fetching quizzes:",de)}finally{V(!1)}},Vt=Array.from(new Set(_.map(de=>de.subject))),as=_.filter(de=>{const Ne=l?de.subject===l:!0,Se=m&&m!=="All"?de.category===m:!0;return Ne&&Se}),_a=de=>{Ee(de),ne(!0)},Pr=de=>{if(!de.questions||de.questions.length===0){alert("      ");return}const Se=[...de.questions].sort(()=>Math.random()-.5).map(Be=>{if(Be.type==="MCQ"||Be.type==="TF"){const Kt=Be.options.map((Rn,wa)=>({opt:Rn,originalIndex:wa}));Kt.sort(()=>Math.random()-.5);const Nt=Kt.map(Rn=>Rn.opt),St=Kt.findIndex(Rn=>Rn.originalIndex===Be.correctAnswer);return{...Be,options:Nt,correctAnswer:St}}return Be}),ye={...de,questions:Se},Qe={};Se.forEach((Be,Kt)=>{if(Be.type==="REORDER"){const Nt=Be.options.map((St,Rn)=>Rn);for(let St=Nt.length-1;St>0;St--){const Rn=Math.floor(Math.random()*(St+1));[Nt[St],Nt[Rn]]=[Nt[Rn],Nt[St]]}Qe[Kt]=Nt}}),J(Qe),B(ye),re(0),ie({});const dt=de.duration?de.duration*60:1800;G(dt),U(0),Ht(0),ut(!1),Fe(0),ee(""),Re(!1),ne(!1),Ee(null),a("ACTIVE")},dn=()=>{fe&&Pr(fe)},Kn=de=>{ie(Ne=>({...Ne,[K]:de}))},zn=()=>{P&&(R(null),K<P.questions.length-1?re(de=>de+1):rr())},rr=async()=>{if(!P||!t){a("RESULT");return}D(!0);const de=me(),Ne=Math.round(de/P.questions.length*100);let Se=0;try{const ye=Ln(Ut(at,"quiz_results"),Js("userId","==",t.uid),Js("quizId","==",P.id));(await Bn(ye)).empty?Se=de*30:Se=de*1}catch(ye){console.error("Error checking previous attempts:",ye),Se=de*1}U(Se);try{await lo(Ut(at,"quiz_results"),{userId:t.uid,userName:t.displayName,quizId:P.id||"unknown",quizTitle:P.title,subject:P.subject,score:de,totalQuestions:P.questions.length,percentage:Ne,passed:Ne>=50,earnedXP:Se,createdAt:ai()});const ye=er(at,"users",t.uid);await H0(ye,{totalXP:kg(Se),quizzesCompleted:kg(1),lastQuizDate:ai(),role:"student",email:t.email,displayName:t.displayName},{merge:!0})}catch(ye){console.error("Error saving quiz result:",ye)}finally{D(!1),a("RESULT")}},xs=de=>{const Ne=Math.floor(de/60),Se=de%60;return`${Ne}:${Se<10?"0":""}${Se}`},me=()=>{if(!P)return 0;let de=0;return P.questions.forEach((Ne,Se)=>{if(Ne.type==="REORDER"){const ye=$[Se];if(ye&&ye.length===Ne.options.length){let Qe=!0;for(let dt=0;dt<Ne.options.length;dt++)if(ye[dt]!==dt){Qe=!1;break}Qe&&de++}}else $[Se]===Ne.correctAnswer&&de++}),de},He=()=>{nt(!0)},st=()=>{nt(!1),a("SELECTION")},Wt=()=>{ut(!1),a("SELECTION")},$t=async()=>{if(!P||!t||M===0){M===0&&alert("   ");return}he(!0);try{await lo(Ut(at,"feedback"),{userId:t.uid,userName:t.displayName,targetId:P.id||"unknown",targetTitle:P.title,targetType:"quiz",rating:M,comment:$e,teacherId:P.createdBy,createdAt:ai()}),Re(!0)}catch(de){console.error("Error saving feedback:",de),alert("    ")}finally{he(!1)}},gt=de=>{sr(de),$n(!0)},Zt=()=>{if($n(!1),qn==="REVIEW")a("REVIEW");else if(qn==="RETAKE"){const de=_.find(Ne=>Ne.id===(P==null?void 0:P.id));de?Pr(de):a("SELECTION")}else qn==="LIST"?a("SELECTION"):qn==="HOME"&&n();sr(null)},bt=(de,Ne)=>{const Se=$[K]||[];Kn(Ne?[...Se,de]:Se.filter(ye=>ye!==de))},vs=({title:de,message:Ne,onConfirm:Se,onCancel:ye,icon:Qe=ni,confirmText:dt="",cancelText:Be="",confirmColor:Kt="emerald"})=>o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:ye}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${Kt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:o.jsx(Qe,{className:`w-10 h-10 ${Kt==="red"?"text-red-500":"text-emerald-500"}`})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:de}),o.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Ne}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:Se,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${Kt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:dt}),Be&&o.jsx("button",{onClick:ye,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:Be})]})]})]}),hn=()=>{const de=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ye=>({label:` ${ye}`,value:ye.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],Ne=[{label:"  ",value:""},...Vt.map(ye=>({label:String(ye),value:String(ye)}))],Se=LP.map(ye=>({label:ye.label,value:ye.id}));return o.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsx("style",{children:" .custom-scrollbar::-webkit-scrollbar { width: 6px; } .custom-scrollbar::-webkit-scrollbar-track { background: transparent; } .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 20px; } "}),o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[o.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(oi,{className:"w-5 h-5 text-emerald-400"})}),"      "]}),o.jsx(Yp,{options:de,value:h,onChange:ye=>{p(ye),u(""),v("All")},placeholder:"--    --"})]}),o.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(Un,{className:"w-5 h-5 text-emerald-400"})}),"  "]}),o.jsx(Yp,{options:Ne,value:l,onChange:u,placeholder:h?" ":"   ",disabled:!h})]})]}),h&&o.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:o.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(fE,{className:"w-5 h-5 text-emerald-400"})}),"   ()"]}),o.jsx(Yp,{options:Se,value:m,onChange:v,placeholder:"  "})]})}),h&&o.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[o.jsx(jC,{className:"w-5 h-5"}),"  "]}),S?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(Ft,{className:"w-8 h-8 animate-spin text-emerald-400"})}):_.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ua,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):as.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ua,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:as.map(ye=>o.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ye.subject}),ye.category&&o.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ye.category==="General"?"General Quiz":ye.category})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsxs("span",{className:"text-gray-500 text-xs",children:[ye.questions.length," "]}),o.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ye.duration?`${ye.duration} `:"30 "})]})]}),o.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ye.title}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[o.jsx(xh,{className:"w-3 h-3"}),o.jsx("span",{children:ye.grade==="English Major - QOU"?"  ":` ${ye.grade}`})]}),o.jsxs("button",{onClick:()=>_a(ye),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:["  ",o.jsx(hh,{className:"w-4 h-4"})]})]},ye.id))})]}),O&&o.jsx(vs,{title:"  ",message:`   ${fe==null?void 0:fe.title} `,onConfirm:dn,onCancel:()=>ne(!1),confirmText:" ",cancelText:"",icon:ni})]})},In=()=>{if(!P||!P.questions||!P.questions[K])return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[o.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),o.jsx("button",{onClick:()=>a("SELECTION"),className:"text-blue-400 underline",children:" "})]});const de=P.questions[K],Ne=de.type==="REORDER";let Se=!1;if(Ne){const Nt=$[K];Se=Nt!==void 0&&Nt.length===de.options.length}else Se=$[K]!==void 0;const ye=K===P.questions.length-1,Qe=P.subject.toLowerCase().includes("english")||P.subject.includes("")||P.subject.includes(""),dt=Qe?"ltr":"rtl",Be=Qe?"text-left":"text-right",Kt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[de.passageFontSize||"md"];return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:Nt=>Nt.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[Oe&&o.jsx(vs,{title:"   ",message:"      .   .",onConfirm:Wt,onCancel:()=>{},confirmText:"",cancelText:"",icon:ng,confirmColor:"red"}),Ie&&!Oe&&o.jsx(vs,{title:" !",message:"     .   .",onConfirm:()=>Ct(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:ig,confirmColor:"red"}),je&&o.jsx(vs,{title:" ",message:"       .",onConfirm:st,onCancel:()=>nt(!1),confirmText:" ",cancelText:"",icon:su,confirmColor:"red"}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:He,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(su,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${W<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[o.jsx(Hh,{className:"w-4 h-4"}),xs(W)]})}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[K+1," / ",P.questions.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(K+1)/P.questions.length*100}%`}})})]}),C!==null&&P.questionDuration&&o.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4",children:[o.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-1000 linear ${C<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${C/P.questionDuration*100}%`}})}),o.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",C," "]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:dt,children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:P.title}),o.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Ne?o.jsx(cE,{className:"w-4 h-4 text-emerald-500"}):o.jsx(Qa,{className:"w-4 h-4 text-gray-300"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[de.passageContent&&o.jsxs("div",{className:"mb-8",children:[de.generalInstruction&&o.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${Be}`,children:de.generalInstruction}),o.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${Be}`,children:o.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${Kt}`,children:de.passageContent})})]}),o.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${Be}`,children:de.question}),Ne?o.jsxs("div",{className:"space-y-6",dir:"ltr",children:[o.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[($[K]||[]).map((Nt,St)=>o.jsx("button",{onClick:()=>bt(Nt,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:de.options[Nt]},`ans-${St}`)),(!$[K]||$[K].length===0)&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),o.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(q[K]||[]).filter(Nt=>!($[K]||[]).includes(Nt)).map((Nt,St)=>o.jsx("button",{onClick:()=>bt(Nt,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:de.options[Nt]},`bank-${St}`))}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>Kn([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[o.jsx(dE,{className:"w-3 h-3"}),"  "]})})]}):o.jsx("div",{className:"space-y-3",children:de.options.map((Nt,St)=>o.jsxs("button",{onClick:()=>Kn(St),className:`w-full ${Be} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${$[K]===St?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[o.jsx("span",{className:`text-base font-bold ${$[K]===St?"text-emerald-300":"text-gray-300"}`,children:Nt}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${$[K]===St?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:$[K]===St&&o.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},St))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{onClick:zn,disabled:!Se||I,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Se||I?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:I?o.jsxs(o.Fragment,{children:["  ",o.jsx(Ft,{className:"w-5 h-5 animate-spin"})]}):o.jsxs(o.Fragment,{children:[ye?" ":" ",dt==="rtl"?o.jsx(hh,{className:"w-5 h-5"}):o.jsx(Lt,{className:"w-5 h-5"})]})})})]})]})},pn=()=>{if(!P)return null;const de=me(),Ne=P.questions.length,Se=Math.round(de/Ne*100);let ye="from-red-500 to-pink-600",Qe=iC;Se>=90?(ye="from-emerald-400 to-teal-600",Qe=Al):Se>=75?(ye="from-blue-400 to-indigo-600",Qe=to):Se>=50&&(ye="from-yellow-400 to-orange-500",Qe=la);const dt=Qe;return o.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in pb-20",children:[o.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-3xl shadow-2xl overflow-hidden relative border border-gray-700 mb-4",children:[o.jsx("div",{className:`relative py-6 px-4 text-center bg-gradient-to-br ${ye}`,children:o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:"w-12 h-12 mx-auto bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-2 shadow-lg ring-2 ring-white/20",children:o.jsx(dt,{className:"w-6 h-6 text-white"})}),o.jsx("h2",{className:"text-xl font-black text-white mb-0.5",children:Se>=90?"!":Se>=50?"!":" "}),o.jsx("p",{className:"text-white/90 font-medium text-[10px] mb-2 line-clamp-1 px-2 opacity-90",children:P.title}),o.jsx("div",{className:"flex items-baseline justify-center gap-1 mt-1 bg-black/20 px-4 py-1 rounded-xl backdrop-blur-sm border border-white/10",children:o.jsxs("span",{className:"text-3xl font-black text-white",children:[Se,"%"]})}),o.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[10px] font-bold text-white/80 bg-white/10 px-2 py-0.5 rounded-full",children:[o.jsx(gh,{className:"w-3 h-3"}),o.jsxs("span",{children:["+",j," XP"]})]})]})}),o.jsxs("div",{className:"p-4 bg-gray-900",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{className:"bg-gray-800 p-2 rounded-xl border border-gray-700 text-center flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-emerald-400 font-black text-lg",children:de}),o.jsx("span",{className:"text-[9px] text-gray-400 font-bold mt-0.5",children:" "})]}),o.jsxs("div",{className:"bg-gray-800 p-2 rounded-xl border border-gray-700 text-center flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-red-400 font-black text-lg",children:Ne-de}),o.jsx("span",{className:"text-[9px] text-gray-400 font-bold mt-0.5",children:" "})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>gt("REVIEW"),className:"w-full py-2.5 bg-white text-gray-900 font-bold rounded-xl shadow-sm hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 text-xs",children:[o.jsx(Xp,{className:"w-3.5 h-3.5"}),"  "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:()=>gt("RETAKE"),className:"py-2.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs",children:[o.jsx(uE,{className:"w-3.5 h-3.5"}),"  "]}),o.jsxs("button",{onClick:()=>gt("HOME"),className:"py-2.5 bg-gray-800 text-white font-bold rounded-xl hover:bg-gray-700 transition-colors flex items-center justify-center gap-2 text-xs border border-gray-700",children:[o.jsx(yh,{className:"w-3.5 h-3.5"})," "]})]})]})]})]}),o.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-3xl shadow-lg border border-gray-700 p-5 animate-fade-in-up delay-100",children:Pe?o.jsxs("div",{className:"text-center py-2",children:[o.jsx("div",{className:"w-12 h-12 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-2 border border-green-500/30",children:o.jsx(la,{className:"w-6 h-6 text-green-500"})}),o.jsx("h3",{className:"text-sm font-bold text-white",children:" !"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{className:"text-sm font-black text-white mb-4 flex items-center gap-2 justify-center",children:[o.jsx(cl,{className:"w-4 h-4 text-blue-400"}),"     "]}),o.jsx("div",{className:"mb-4",children:o.jsx("div",{className:"flex flex-wrap justify-center gap-2",dir:"ltr",children:[1,2,3,4,5,6,7,8,9,10].map(Be=>o.jsx("button",{onClick:()=>Fe(Be),className:`w-9 h-9 rounded-xl font-black text-sm transition-all flex items-center justify-center ${M===Be?"bg-blue-600 text-white scale-110 shadow-lg ring-2 ring-blue-400":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:Be},Be))})}),o.jsx("textarea",{value:$e,onChange:Be=>ee(Be.target.value),placeholder:"  ()...",className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-xl text-white text-xs outline-none focus:border-blue-500 transition-all mb-3 resize-none h-16"}),o.jsx("button",{onClick:$t,disabled:pe||M===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${M===0||pe?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg"}`,children:pe?o.jsx(Ft,{className:"w-3 h-3 animate-spin"}):" "})]})})]})},Us=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Xp,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>a("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[o.jsx(Lt,{className:"w-4 h-4"}),"  "]})]}),o.jsx("div",{className:"space-y-6",children:P==null?void 0:P.questions.map((de,Ne)=>{const Se=de.type==="REORDER";let ye=!1,Qe=null;if(Se){const dt=$[Ne];dt?(Qe=dt.map(Be=>de.options[Be]).join(" "),ye=dt.length===de.options.length&&dt.every((Be,Kt)=>Be===Kt)):(Qe="  ",ye=!1)}else{const dt=$[Ne];ye=dt===de.correctAnswer,Qe=dt!==void 0?de.options[dt]:"  "}return o.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ye?"border-gray-700":"border-red-900/50"}`,children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ye?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Ne+1}),o.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:de.question})]}),o.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ye?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),o.jsx("span",{className:"font-bold",children:Qe})]}),!ye&&o.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),o.jsx("span",{className:"font-bold text-emerald-400",children:Se?de.options.join(" "):de.options[de.correctAnswer]})]}),de.explanation&&o.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[o.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[o.jsx(ni,{className:"w-3 h-3"})," :"]}),o.jsx("p",{className:"leading-relaxed opacity-90",children:de.explanation})]})]},de.id)})})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[s==="SELECTION"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),hn()]}),s==="ACTIVE"&&In(),s==="RESULT"&&pn(),s==="REVIEW"&&Us(),Vs&&o.jsx(vs,{title:"  ",message:qn==="REVIEW"?"   ":qn==="RETAKE"?"     ":qn==="LIST"?"    ":"    ",onConfirm:Zt,onCancel:()=>$n(!1),confirmText:"",cancelText:"",icon:WC})]})},UP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),OP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),qP=({onBack:n})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"#",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:o.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),o.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(oE,{className:"w-4 h-4"}),t.school]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tg,{className:"w-4 h-4"}),t.location]})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[o.jsx(si,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("h3",{className:"font-bold text-white",children:" "})]}),o.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[o.jsx(to,{className:`w-5 h-5 text-${t.color}-400`})," "]}),o.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((a,l)=>o.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:a},l))})]})]}),o.jsx("div",{className:"pt-6 border-t border-white/5",children:o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:o.jsx(Wp,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:o.jsx(UP,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:o.jsx(OP,{className:"w-5 h-5"})})]})})]},s))})]})]})},zP=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[o.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",o.jsx("br",{}),"   "]}),o.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:o.jsx(Xp,{className:"w-8 h-8 text-blue-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:o.jsx(Kg,{className:"w-8 h-8 text-emerald-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),o.jsxs("div",{className:"mb-20",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:xI,title:" ",desc:"       ."},{icon:TC,title:" ",desc:"           ."},{icon:lE,title:" ",desc:"         ."},{icon:qI,title:" ",desc:"          ."}].map((e,t)=>o.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[o.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:o.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),o.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),FP=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:""})]})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:o.jsxs("div",{className:"bg-gray-900 p-12 rounded-3xl shadow-xl border border-white/5 max-w-md w-full flex flex-col items-center transform hover:scale-105 transition-transform duration-300",children:[o.jsx("div",{className:"w-24 h-24 bg-emerald-900/20 rounded-full flex items-center justify-center mb-6 animate-bounce border border-emerald-500/20",children:o.jsx(Hh,{className:"w-12 h-12 text-emerald-400"})}),o.jsx("h1",{className:"text-4xl font-black text-white mb-3",children:""}),o.jsx("p",{className:"text-gray-400 text-lg font-medium",children:"        "})]})})]}),C1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(no,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},GP=({onBack:n})=>{const[e,t]=F.useState(""),[s,a]=F.useState(""),[l,u]=F.useState("SELECTION"),[h,p]=F.useState(["handouts"]),[m,v]=F.useState([]),[_,w]=F.useState(!1);F.useEffect(()=>{l==="CONTENT"&&s&&e&&S()},[l,s,e]);const S=async()=>{w(!0);try{const W=Ln(Ut(at,"study_materials"),Js("grade","==",s),Js("subject","==",e)),G=await Bn(W),C=[];G.forEach(R=>{C.push({id:R.id,...R.data()})}),C.sort((R,I)=>{var U,M;const D=((U=R.createdAt)==null?void 0:U.seconds)||0;return(((M=I.createdAt)==null?void 0:M.seconds)||0)-D}),v(C)}catch(W){console.error("Error fetching materials:",W)}finally{w(!1)}},V=()=>{e&&s&&u("CONTENT")},P=W=>{p(G=>G.includes(W)?G.filter(C=>C!==W):[...G,W])},B=()=>{const W=m.filter(R=>R.category==="handouts"),G=m.filter(R=>R.category==="worksheets"),C=m.filter(R=>R.category==="exams");return[{id:"handouts",title:" ",files:W},{id:"worksheets",title:" ",files:G},{id:"exams",title:" ",files:C}]},K=W=>W?(W.toDate?W.toDate():new Date(W.seconds*1e3)).toLocaleDateString("ar-EG"):"",re=B(),$=()=>{const W=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(C=>({label:` ${C}`,value:C.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],G=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return o.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),o.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),o.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),o.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:o.jsx(zc,{className:"w-10 h-10 text-white drop-shadow-md"})}),o.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),o.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[o.jsxs("div",{className:"group relative z-20",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:o.jsx(Un,{className:"w-5 h-5 text-emerald-400"})})," "]}),o.jsx(C1,{options:G,value:e,onChange:t,placeholder:" "})]}),o.jsxs("div",{className:"group relative z-10",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:o.jsx(oi,{className:"w-5 h-5 text-teal-400"})})," "]}),o.jsx(C1,{options:W,value:s,onChange:a,placeholder:" "})]})]}),o.jsxs("button",{onClick:V,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[o.jsx(ua,{className:"w-6 h-6"})," "]})]})})]})},ie=()=>o.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[o.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(kr,{className:"w-8 h-8 text-emerald-400"})}),o.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",o.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("button",{onClick:()=>u("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[o.jsx(Lt,{className:"w-5 h-5"})," "]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[o.jsx(zc,{className:"w-3.5 h-3.5"}),re.reduce((W,G)=>W+G.files.length,0)," "]})]}),_?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Ft,{className:"w-10 h-10 animate-spin text-emerald-400"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):o.jsx("div",{className:"space-y-4",children:re.map(W=>{const G=h.includes(W.id);return o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("button",{onClick:()=>P(W.id),className:`w-full flex items-center justify-between p-5 transition-colors ${G?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2.5 rounded-xl ${G?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:o.jsx(zc,{className:"w-6 h-6"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-bold text-base text-white block",children:W.title}),o.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[W.files.length," "]})]})]}),o.jsx("div",{className:`transition-transform duration-300 ${G?"rotate-180":""}`,children:o.jsx(no,{className:"w-5 h-5 text-gray-400"})})]}),G&&o.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:W.files.length===0?o.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[o.jsx(zc,{className:"w-10 h-10 mb-2 opacity-20"}),o.jsx("p",{className:"text-sm font-medium",children:"       "})]}):o.jsx("div",{className:"divide-y divide-gray-700/50",children:W.files.map((C,R)=>o.jsxs("div",{onClick:()=>C.url&&window.open(C.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:o.jsx(kr,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[o.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:C.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[o.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:C.size}),o.jsx("span",{children:""}),o.jsx("span",{children:K(C.createdAt)})]})]})]}),o.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:o.jsx(Jp,{className:"w-5 h-5"})})]},R))})})]},W.id)})}),o.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[o.jsx(mh,{className:"w-4 h-4 text-emerald-500 shrink-0"}),o.jsx("span",{children:"      PDF  "})]})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),l==="SELECTION"?$():ie()]})},I1=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),R1=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),BP=({onBack:n})=>{const e=t=>{let s="";switch(t){case"message":s="       .";break;case"question":s="       ...";break;case"review":s="      .";break;case"inquiry":s="    .";break;default:s="  ."}const a=`https://wa.me/972568401548?text=${encodeURIComponent(s)}`;window.open(a,"_blank")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[o.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[o.jsxs("div",{className:"absolute top-6 left-6 z-30 md:top-10 md:left-10 flex items-center gap-2 md:gap-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[o.jsx(Lt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[o.jsx("span",{className:"text-gray-300",children:""}),o.jsx("span",{className:"text-gray-500",children:"/"}),o.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),o.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[o.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),o.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),o.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"  .             ."})]})]}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[o.jsxs("button",{onClick:()=>e("message"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-emerald-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center text-emerald-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Hg,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-emerald-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"   "})]})]})]}),o.jsxs("button",{onClick:()=>e("question"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-blue-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/20 rounded-2xl flex items-center justify-center text-blue-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(ni,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-blue-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("review"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-purple-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-pink-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-purple-900/20 rounded-2xl flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(xC,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-purple-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("inquiry"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-orange-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-amber-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-900/20 rounded-2xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(xh,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-emerald-400 to-teal-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-emerald-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"     ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(I1,{className:"w-5 h-5"}),""]}),o.jsxs("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(R1,{className:"w-5 h-5"}),""]})]})]})]}),o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-blue-400 to-indigo-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-blue-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"      ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("button",{className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(I1,{className:"w-5 h-5"}),""]}),o.jsxs("button",{className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(R1,{className:"w-5 h-5"}),""]})]})]})]})]})]})]})},k1=[{minLevel:1,title:" ",icon:Gg},{minLevel:5,title:" ",icon:Un},{minLevel:10,title:"",icon:ua},{minLevel:15,title:" ",icon:to},{minLevel:20,title:"",icon:$h},{minLevel:30,title:"",icon:Al}],HP=({onLoginClick:n})=>{const[e,t]=F.useState([]),[s,a]=F.useState(!0),{user:l}=is(),[u,h]=F.useState(0),[p,m]=F.useState(null),[v,_]=F.useState(null),[w,S]=F.useState(!1);F.useEffect(()=>{const ie=Ln(Ut(at,"users"),Js("role","==","student")),W=nD(ie,C=>{const R=[];C.forEach(I=>{const D=I.data();R.push({uid:I.id,...D})}),R.sort((I,D)=>(Number(D.totalXP)||0)-(Number(I.totalXP)||0)),t(R.slice(0,10)),a(!1)},C=>{console.error("Error fetching leaderboard:",C),a(!1)});return(async()=>{try{const C=Ln(Ut(at,"quizzes")),R=await Bn(C);h(R.size)}catch(C){console.error("Error fetching quizzes count:",C)}})(),()=>W()},[]);const V=async ie=>{m(ie),S(!0),_(null);try{const W=Ln(Ut(at,"quiz_results"),Js("userId","==",ie.uid)),G=await Bn(W);let C=0,R=0;G.forEach(D=>{const j=D.data();j.percentage!==void 0&&(C+=j.percentage,R++)});const I=R>0?Math.round(C/R):0;_({average:I,totalQuizzes:R})}catch(W){console.error("Error fetching student stats",W)}finally{S(!1)}},P=ie=>{switch(ie){case 0:return"bg-gradient-to-b from-yellow-400 to-yellow-600 text-white shadow-lg shadow-yellow-500/30 border border-yellow-300 scale-110";case 1:return"bg-gradient-to-b from-slate-300 to-slate-500 text-white shadow-md border border-slate-300";case 2:return"bg-gradient-to-b from-orange-400 to-orange-600 text-white shadow-md border border-orange-300";case 9:return"bg-gray-800 text-gray-400 border border-gray-700";default:return"bg-gray-700 text-gray-200 border border-gray-600"}},B=ie=>o.jsx("span",{className:"font-black text-sm font-mono",children:ie+1}),K=ie=>{const W=Math.floor(ie/500)+1,G=[...k1].reverse().find(C=>W>=C.minLevel)||k1[0];return{level:W,rank:G}},re=e.reduce((ie,W)=>ie+(W.quizzesCompleted||0),0),$=re*8;return o.jsxs("section",{className:"py-12 md:py-16 relative overflow-hidden",children:[p&&o.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>m(null)}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative shadow-2xl animate-fade-in-up overflow-hidden border border-white/10",children:[o.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white z-20 transition-colors backdrop-blur-sm",children:o.jsx(Tr,{className:"w-5 h-5"})}),o.jsx("div",{className:"h-32 bg-gray-800 relative"}),o.jsxs("div",{className:"px-8 pb-8 -mt-16 relative z-10 text-center",children:[o.jsx("div",{className:"w-32 h-32 mx-auto rounded-full p-1.5 bg-gray-900 shadow-2xl mb-4 ring-4 ring-gray-800",children:o.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-4 border-gray-700 bg-gray-800",children:p.avatar?o.jsx("img",{src:p.avatar,alt:p.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx(jn,{className:"w-12 h-12 text-gray-500"})})})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:p.displayName}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm flex items-center justify-center gap-1 mb-6",children:[o.jsx(xh,{className:"w-4 h-4"}),p.school||" "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[o.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[iE.createElement(K(p.totalXP||0).rank.icon,{className:"w-5 h-5 text-indigo-400"}),o.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase",children:""})]}),o.jsx("div",{className:"font-black text-white text-sm",children:K(p.totalXP||0).rank.title}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[" ",K(p.totalXP||0).level]})]}),o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:w?o.jsx("div",{className:"flex justify-center py-2",children:o.jsx(Ft,{className:"w-5 h-5 animate-spin text-emerald-500"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(si,{className:"w-5 h-5 text-emerald-400 fill-emerald-400"}),o.jsx("span",{className:"text-xs font-bold text-emerald-400 uppercase",children:" "})]}),o.jsxs("div",{className:"font-black text-white text-xl",children:[(v==null?void 0:v.average)||0,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[(v==null?void 0:v.totalQuizzes)||0," "]})]})})]}),o.jsxs("div",{className:"bg-gray-800/30 border border-white/10 border-dashed rounded-xl p-5 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gray-800 text-yellow-500 px-3 py-1 rounded-full text-[10px] font-bold shadow-sm flex items-center gap-1 border border-white/10 z-10",children:[o.jsx(to,{className:"w-3 h-3"})," "]}),o.jsxs("p",{className:"text-sm text-gray-300 leading-relaxed font-medium mt-2 mb-6 relative z-10",children:["     / ",o.jsx("span",{className:"font-bold text-white underline decoration-yellow-600",children:p.displayName}),"      /   ."]}),o.jsxs("div",{className:"flex justify-around items-end pt-4 border-t border-white/10 relative z-10",children:[o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-2xl text-emerald-500/80 absolute -bottom-3 left-1/2 -translate-x-1/2 -rotate-6 whitespace-nowrap pointer-events-none opacity-90",children:"Yazan. A.K"})]}),o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-5xl text-blue-600/80 absolute -bottom-6 left-1/2 -translate-x-1/2 -rotate-12 whitespace-nowrap pointer-events-none scale-110",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"Majd. H"})]})]})]})]})]})]}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-24 relative z-10",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 backdrop-blur-md rounded-3xl shadow-lg border border-white/10 mb-5 transform -rotate-3 hover:rotate-0 transition-transform duration-300",children:o.jsx(ul,{className:"w-8 h-8 text-indigo-400"})}),o.jsx("h2",{className:"text-4xl font-black text-white mb-3 tracking-tight drop-shadow-lg",children:" "}),o.jsx("p",{className:"text-gray-400 text-base font-medium max-w-md mx-auto",children:"        "})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-[2.5rem] border border-white/10 shadow-2xl p-4 md:p-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2/3 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50 blur-sm"}),s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-900 rounded-full blur-xl opacity-50 animate-pulse"}),o.jsx(Ft,{className:"w-12 h-12 animate-spin text-indigo-400 relative z-10"})]}),o.jsx("p",{className:"text-gray-400 font-bold mt-6 text-sm animate-pulse",children:"  ..."})]}):e.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-xl",children:o.jsx(to,{className:"w-10 h-10 text-gray-500"})}),o.jsx("h3",{className:"text-2xl font-black text-gray-300 mb-3",children:"  "}),o.jsx("p",{className:"text-gray-500 font-medium mb-8 text-sm",children:"       !"}),!l&&o.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transform hover:-translate-y-1",children:[o.jsx(hE,{className:"w-4 h-4"}),"  "]})]}):o.jsx("div",{className:"space-y-3",children:e.map((ie,W)=>o.jsxs("div",{onClick:()=>V(ie),className:`flex items-center p-3 rounded-2xl transition-all duration-300 cursor-pointer group border ${(l==null?void 0:l.uid)===ie.uid?"bg-indigo-900/30 border-indigo-500/50 shadow-[0_0_15px_rgba(99,102,241,0.2)] z-10 relative":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[o.jsx("div",{className:"w-10 flex justify-center shrink-0",children:o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shadow-sm transition-transform group-hover:scale-110 ${P(W)}`,children:B(W)})}),o.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden border-2 shadow-sm shrink-0 mx-3 border-gray-700 group-hover:border-white/30 transition-colors bg-gray-800 relative",children:[ie.avatar?o.jsx("img",{src:ie.avatar,alt:ie.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(jn,{className:"w-5 h-5 text-gray-500"})}),W===0&&o.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-500 drop-shadow-sm",children:o.jsx(Al,{className:"w-4 h-4 fill-yellow-500"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:`font-bold text-sm md:text-base truncate group-hover:text-indigo-300 transition-colors ${(l==null?void 0:l.uid)===ie.uid?"text-indigo-300":W===0?"text-yellow-200":"text-white"}`,children:ie.displayName}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 mt-0.5",children:[o.jsx(xh,{className:"w-3 h-3 shrink-0"}),o.jsx("span",{className:"truncate max-w-[120px] md:max-w-xs",children:ie.school||" "})]})]}),o.jsx("div",{className:"shrink-0 pl-2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border shrink-0 transition-all ${W===0?"bg-yellow-500/10 border-yellow-500/20":"bg-black/20 border-white/5 group-hover:bg-indigo-900/20"}`,children:[o.jsx("span",{className:`font-black text-xs md:text-sm ${W===0?"text-yellow-200":"text-white"}`,children:ie.totalXP||0}),o.jsx(gh,{className:`w-3 h-3 md:w-3.5 md:h-3.5 ${W===0?"text-yellow-400 fill-yellow-400":W<3?"text-orange-500 fill-orange-500":"text-gray-600"}`})]})})]},ie.uid))})]})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-24 relative z-10",children:o.jsxs("div",{className:"relative overflow-hidden rounded-[3rem] bg-white/[0.02] backdrop-blur-sm shadow-xl border border-white/5 group",children:[o.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-indigo-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-emerald-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"relative z-10 p-8 md:p-12",children:o.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12",children:[o.jsxs("div",{className:"text-center lg:text-right max-w-lg",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-emerald-400 text-sm font-bold mb-6 backdrop-blur-sm shadow-sm",children:[o.jsx(DA,{className:"w-4 h-4 animate-pulse"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white mb-6 leading-tight",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:""}),"  !"]}),o.jsx("p",{className:"text-gray-400 text-lg leading-relaxed font-medium",children:"              ."})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full lg:w-auto",children:[o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-emerald-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-emerald-400 group-hover/stat:text-emerald-300 transition-colors",children:o.jsx(ca,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:u.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-emerald-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-amber-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-amber-400 group-hover/stat:text-amber-300 transition-colors",children:o.jsx(ul,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:re.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-amber-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-rose-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-rose-400 group-hover/stat:text-rose-300 transition-colors",children:o.jsx(mE,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:$.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-rose-300/60 uppercase tracking-wider",children:" "})]})]})]})})]})})]})},$P=({onBack:n})=>{const[e,t]=F.useState([]),[s,a]=F.useState(!0),[l,u]=F.useState(""),[h,p]=F.useState(null),[m,v]=F.useState(!1);F.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const G=Ln(Ut(at,"quizzes"),Xa("createdAt","desc")),R=(await Bn(G)).docs.map(I=>({id:I.id,...I.data()}));t(R)}catch(G){console.error("Error fetching quizzes:",G)}finally{a(!1)}},w=G=>{p({category:"Language",...G})},S=async(G,C)=>{if(G.stopPropagation(),!C){alert(":   ");return}if(window.confirm("  "))try{await tD(er(at,"quizzes",C)),t(R=>R.filter(I=>I.id!==C))}catch(R){console.error("Error deleting quiz:",R),alert("   : "+R.message)}},V=(G,C)=>{h&&p({...h,[G]:C})},P=(G,C,R)=>{if(!h)return;const I=[...h.questions];I[G]={...I[G],[C]:R},p({...h,questions:I})},B=(G,C,R)=>{if(!h)return;const I=[...h.questions],D=[...I[G].options];D[C]=R,I[G]={...I[G],options:D},p({...h,questions:I})},K=G=>{if(h&&window.confirm("      ")){const C=h.questions.filter((R,I)=>I!==G);p({...h,questions:C})}},re=async()=>{if(!(!h||!h.id)){if(h.questions.length===0){alert("     !");return}v(!0);try{const G=er(at,"quizzes",h.id);await bf(G,{title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:h.questions}),t(C=>C.map(R=>R.id===h.id?h:R)),p(null),alert("   ")}catch(G){console.error("Error updating quiz:",G),alert("   ")}finally{v(!1)}}},$=e.filter(G=>G.title.toLowerCase().includes(l.toLowerCase())||G.teacherName&&G.teacherName.toLowerCase().includes(l.toLowerCase())),ie=G=>G?(G.toDate?G.toDate():new Date(G.seconds*1e3)).toLocaleDateString("ar-EG"):"",W="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),o.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[o.jsx("button",{onClick:n,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]}),o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),o.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[o.jsx(ua,{className:"w-5 h-5 text-gray-300 mr-2"}),o.jsx("input",{type:"text",placeholder:"    ...",value:l,onChange:G=>u(G.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?o.jsx("div",{className:"flex justify-center items-center py-20",children:o.jsx(Ft,{className:"w-10 h-10 animate-spin text-blue-400"})}):$.length===0?o.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ca,{className:"w-8 h-8 text-gray-500"})}),o.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),o.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(G=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[o.jsxs("div",{className:"p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:G.subject}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>w(G),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:o.jsx(sg,{className:"w-4 h-4"})}),o.jsx("button",{onClick:C=>S(C,G.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:o.jsx(rg,{className:"w-4 h-4"})})]})]}),o.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:G.title}),G.category&&o.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:G.category}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[o.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",G.grade]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[o.jsx(fh,{className:"w-3 h-3"}),ie(G.createdAt)]})]})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:o.jsx(jn,{className:"w-4 h-4"})}),o.jsx("p",{className:"text-sm font-bold text-gray-300",children:G.teacherName||""})]}),o.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[o.jsx(ni,{className:"w-3 h-3"}),G.questions.length," "]})]})]},G.id))})}),h&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(sg,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),o.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(Tr,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(ca,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:G=>V("title",G.target.value),className:W})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("input",{type:"text",value:h.subject,onChange:G=>V("subject",G.target.value),className:W})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("select",{value:h.grade,onChange:G=>V("grade",G.target.value),className:W,children:[5,6,7,8,9,10,11,12].map(G=>o.jsxs("option",{value:G,children:[" ",G]},G))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),o.jsxs("select",{value:h.category||"Language",onChange:G=>V("category",G.target.value),className:W,children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ni,{className:"w-5 h-5 text-blue-400"})," (",h.questions.length,")"]}),o.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),h.questions.map((G,C)=>o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[o.jsx("button",{onClick:()=>K(C),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:o.jsx(rg,{className:"w-5 h-5"})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",C+1]}),o.jsx("input",{type:"text",dir:"ltr",value:G.question,onChange:R=>P(C,"question",R.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:G.options.map((R,I)=>o.jsxs("div",{className:"relative",children:[o.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[o.jsxs("span",{children:[" ",I+1]}),o.jsxs("button",{onClick:()=>P(C,"correctAnswer",I),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${G.correctAnswer===I?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[G.correctAnswer===I?o.jsx(ns,{className:"w-3 h-3"}):o.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),G.correctAnswer===I?" ":" "]})]}),o.jsx("input",{type:"text",dir:"ltr",value:R,onChange:D=>B(C,I,D.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${G.correctAnswer===I?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},I))}),o.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[o.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),o.jsx("textarea",{value:G.explanation||"",onChange:R=>P(C,"explanation",R.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},C))]})]}),o.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[o.jsx("button",{onClick:()=>p(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),o.jsxs("button",{onClick:re,disabled:m,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[m?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"})," "]})]})]})})]})},KP=[{id:"grammar",title:" (Grammar)",icon:ca,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Un,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:Bg,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:$g,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],YP=({onBack:n})=>{const{user:e}=is(),[t,s]=F.useState("INTRO"),[a,l]=F.useState(""),[u,h]=F.useState(null),[p,m]=F.useState([]),[v,_]=F.useState(!1),[w,S]=F.useState(null),[V,P]=F.useState(0),[B,K]=F.useState(""),[re,$]=F.useState(!1),[ie,W]=F.useState(!1);F.useEffect(()=>{window.scrollTo(0,0)},[t]);const G=()=>s("GRADES"),C=he=>{l(he),s("CATEGORIES")},R=he=>{h(he),s("TOPICS")},I=he=>{S(he),P(0),K(""),W(!1),s("DETAILS")},D=async()=>{if(!w||!e||V===0){V===0&&alert("   ");return}$(!0);try{await lo(Ut(at,"feedback"),{userId:e.uid,userName:e.displayName,targetId:w.id||"unknown",targetTitle:w.title,targetType:"explanation",rating:V,comment:B,teacherId:w.teacherId,createdAt:ai()}),W(!0)}catch(he){console.error("Error saving feedback:",he),alert("    ")}finally{$(!1)}};F.useEffect(()=>{t==="TOPICS"&&a&&u&&j()},[t,a,u]);const j=async()=>{_(!0);try{const he=Ln(Ut(at,"explanations"),Js("grade","==",a),Js("category","==",u==null?void 0:u.id)),Pe=await Bn(he),Re=[];Pe.forEach(q=>{Re.push({id:q.id,...q.data()})}),Re.sort((q,J)=>{var fe,Ee;const O=((fe=q.createdAt)==null?void 0:fe.seconds)||0;return(((Ee=J.createdAt)==null?void 0:Ee.seconds)||0)-O}),m(Re)}catch(he){console.error("Error fetching explanations:",he)}finally{_(!1)}},U=he=>he?(he.toDate?he.toDate():new Date(he.seconds*1e3)).toLocaleDateString("ar-EG"):"",M=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[o.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),o.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),o.jsxs("button",{onClick:G,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",o.jsx(Lt,{className:"w-6 h-6"})]})]}),o.jsx("div",{className:"p-6 text-center relative z-10",children:o.jsxs("button",{onClick:n,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[o.jsx(yh,{className:"w-4 h-4"})," "]})})]}),Fe=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(he=>o.jsxs("button",{onClick:()=>C(he.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:o.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:he})}),o.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",he]})]},he)),o.jsxs("button",{onClick:()=>C("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:o.jsx(oi,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),o.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),$e=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:" "}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:KP.map(he=>o.jsx("button",{onClick:()=>R(he),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${he.color} group-hover:scale-110 transition-transform`,children:o.jsx(he.icon,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-black text-white mb-1",children:he.title}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:he.desc})]}),o.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:o.jsx(Er,{className:"w-5 h-5 text-gray-400"})})]})},he.id))})})]}),ee=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:u==null?void 0:u.title})]})}),o.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:v?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(Ft,{className:"w-8 h-8 animate-spin text-emerald-400"})}):p.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),o.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",o.jsx("span",{className:"text-emerald-600 font-bold",children:u==null?void 0:u.title}),"    ."]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[o.jsx(zA,{className:"w-4 h-4"}),"     "]})]})}):o.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map(he=>o.jsxs("button",{onClick:()=>I(he),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:o.jsx(kr,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:he.title}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(fh,{className:"w-3 h-3"}),U(he.createdAt)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(jn,{className:"w-3 h-3"}),he.teacherName]})]})]})]}),o.jsx(Er,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},he.id))})})]}),pe=()=>w?o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:u==null?void 0:u.title}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white truncate",children:w.title})]})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[o.jsxs("div",{className:"p-6 md:p-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:a==="English Major - QOU"?"":` ${a}`}),o.jsx(Er,{className:"w-4 h-4"}),o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:u==null?void 0:u.title})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",children:w.title}),o.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",children:w.content})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{className:"w-4 h-4"}),o.jsxs("span",{children:[": ",o.jsx("span",{className:"font-bold",children:w.teacherName})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fh,{className:"w-4 h-4"}),o.jsx("span",{children:U(w.createdAt)})]})]})]}),e&&o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-gray-700 p-6",children:ie?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-3 border border-green-500/30",children:o.jsx(la,{className:"w-8 h-8 text-green-500"})}),o.jsx("h3",{className:"text-lg font-bold text-white",children:" !"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"    ."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-2 justify-center",children:[o.jsx(cl,{className:"w-5 h-5 text-purple-400"}),"    "]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:"   10 ()  1 ()"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-1.5",dir:"ltr",children:[1,2,3,4,5,6,7,8,9,10].map(he=>o.jsx("button",{onClick:()=>P(he),className:`w-8 h-8 rounded-lg font-bold text-sm transition-all ${V===he?"bg-purple-600 text-white scale-110 shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:he},he))})]}),o.jsx("textarea",{value:B,onChange:he=>K(he.target.value),placeholder:"    ()...",className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-xl text-white text-sm outline-none focus:border-purple-500 transition-all mb-4 resize-none h-20"}),o.jsx("button",{onClick:D,disabled:re||V===0,className:`w-full py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${V===0||re?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white shadow-lg"}`,children:re?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):" "})]})})]})]}):null;return o.jsxs(o.Fragment,{children:[t==="INTRO"&&M(),t==="GRADES"&&Fe(),t==="CATEGORIES"&&$e(),t==="TOPICS"&&ee(),t==="DETAILS"&&pe()]})},QP=[{id:"grammar",title:" (Grammar)",icon:ca},{id:"reading",title:" (Reading)",icon:Un},{id:"vocabulary",title:" (Vocabulary)",icon:Bg},{id:"writing",title:" (Writing)",icon:$g}],JP=({onBack:n,onNavigate:e})=>{const{user:t}=is(),[s,a]=F.useState(""),[l,u]=F.useState(""),[h,p]=F.useState(""),[m,v]=F.useState(""),[_,w]=F.useState(!1),[S,V]=F.useState(!1),P=async()=>{if(!s||!l||!h||!m){alert("    ");return}w(!0);try{await lo(Ut(at,"explanations"),{grade:s,category:l,subject:"English",title:h,content:m,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:ai()}),V(!0),setTimeout(()=>{V(!1),p(""),v("")},2e3)}catch(K){console.error("Error saving explanation:",K),alert("   ")}finally{w(!1)}},B=()=>{n?n():e("HOME")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:B,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:B,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:S?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(ns,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),o.jsx("button",{onClick:()=>V(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(K=>o.jsxs("button",{onClick:()=>a(K.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${s===K.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",K]},K)),o.jsx("button",{onClick:()=>a("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${s==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   ()"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:QP.map(K=>o.jsxs("button",{onClick:()=>u(K.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${l===K.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${l===K.id?"bg-purple-800":"bg-gray-700"}`,children:o.jsx(K.icon,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold",children:K.title})]},K.id))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),o.jsx("input",{type:"text",value:h,onChange:K=>p(K.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("textarea",{value:m,onChange:K=>v(K.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),o.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:o.jsxs("button",{onClick:P,disabled:_,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[_?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})})})]})},XP=[{id:"handouts",title:" ",icon:kr,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:zc,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Un,color:"text-purple-400",bg:"bg-purple-900/20"}],WP=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],ZP=({onBack:n,onNavigate:e})=>{const{user:t}=is(),[s,a]=F.useState(""),[l,u]=F.useState(""),[h,p]=F.useState(""),[m,v]=F.useState(""),[_,w]=F.useState(""),[S,V]=F.useState(!1),[P,B]=F.useState(!1),K=async()=>{if(!s||!l||!h||!m||!_){alert("    ");return}if(!_.startsWith("http")){alert("        http  https");return}V(!0);try{await lo(Ut(at,"study_materials"),{grade:s,subject:l,category:h,title:m,url:_,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:ai()}),B(!0),setTimeout(()=>{B(!1),v(""),w("")},2e3)}catch($){console.error("Error saving file:",$),alert("   ")}finally{V(!1)}},re=()=>{n?n():e("PROFILE")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:re,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:re,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:P?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(ns,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),o.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(oi,{className:"w-4 h-4 text-blue-500"})," "]}),o.jsxs("select",{value:s,onChange:$=>a($.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map($=>o.jsxs("option",{value:$.toString(),children:[" ",$]},$)),o.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(Un,{className:"w-4 h-4 text-blue-500"}),""]}),o.jsxs("select",{value:l,onChange:$=>u($.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),WP.map($=>o.jsx("option",{value:$.id,children:$.title},$.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:XP.map($=>o.jsxs("button",{onClick:()=>p($.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${h===$.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${$.bg}`,children:o.jsx($.icon,{className:`w-6 h-6 ${$.color}`})}),o.jsx("span",{className:"font-bold text-sm",children:$.title})]},$.id))})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:m,onChange:$=>v($.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(DC,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),o.jsx("input",{type:"url",value:_,onChange:$=>w($.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),o.jsx("div",{className:"pt-4 flex justify-end",children:o.jsxs("button",{onClick:K,disabled:S,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[S?o.jsx(Ft,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})})})]})},ej=({onNavigate:n})=>{const{user:e}=is(),[t,s]=F.useState([]),[a,l]=F.useState(!0),[u,h]=F.useState("all");F.useEffect(()=>{(async()=>{l(!0);try{let w=Ln(Ut(at,"feedback"),Xa("createdAt","desc"));const V=(await Bn(w)).docs.map(P=>({id:P.id,...P.data()}));s(V)}catch(w){console.error("Error fetching feedback:",w)}finally{l(!1)}})()},[e]);const p=t.filter(_=>u==="all"?!0:_.targetType===u),m=_=>_?(_.toDate?_.toDate():new Date(_.seconds*1e3)).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=_=>_>=9?"text-emerald-400":_>=7?"text-blue-400":_>=5?"text-yellow-400":"text-red-400";return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>n("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>n("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-black text-white mb-2 flex items-center gap-3",children:[o.jsx(cl,{className:"w-8 h-8 text-teal-400"})," "]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"      "})]}),o.jsxs("div",{className:"flex bg-gray-900 p-1.5 rounded-xl border border-gray-700",children:[o.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u==="all"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:""}),o.jsxs("button",{onClick:()=>h("quiz"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="quiz"?"bg-blue-900/30 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(Un,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>h("explanation"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="explanation"?"bg-purple-900/30 text-purple-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(so,{className:"w-4 h-4"}),""]})]})]}),a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Ft,{className:"w-10 h-10 animate-spin text-teal-500"})}):p.length===0?o.jsxs("div",{className:"bg-gray-900 p-12 rounded-3xl border border-white/5 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(cl,{className:"w-8 h-8 text-gray-600"})}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"    "}),o.jsx("p",{className:"text-gray-500 text-sm",children:"        ."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(_=>o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 p-6 shadow-sm hover:border-gray-600 transition-all",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-gray-400",children:o.jsx(jn,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:_.userName||""}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[o.jsx(fh,{className:"w-3 h-3"}),m(_.createdAt)]})]})]}),o.jsxs("div",{className:`flex items-center gap-1 font-black text-lg ${v(_.rating)}`,children:[o.jsx("span",{children:_.rating}),o.jsx(si,{className:"w-4 h-4 fill-current"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[_.targetType==="quiz"?o.jsx(Un,{className:"w-3 h-3"}):o.jsx(so,{className:"w-3 h-3"}),_.targetType==="quiz"?":":":"]}),o.jsx("h3",{className:"font-bold text-gray-200 text-sm",children:_.targetTitle})]}),_.comment&&o.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-xl border border-white/5 text-sm text-gray-300 leading-relaxed relative",children:[o.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-700 rounded-full p-1",children:o.jsx(cl,{className:"w-3 h-3 text-gray-400"})}),'"',_.comment,'"']})]},_.id))})]})]})},Qp=[{text:"            .",author:" ",color:"from-emerald-400 to-teal-500",bg:"bg-emerald-500"},{text:"               .",author:"",color:"from-blue-400 to-indigo-500",bg:"bg-blue-500"},{text:"        .",author:" ",color:"from-yellow-400 to-amber-500",bg:"bg-amber-500"},{text:"     .",author:" ",color:"from-rose-400 to-pink-500",bg:"bg-rose-500"},{text:"          .",author:" ",color:"from-purple-400 to-violet-500",bg:"bg-purple-500"},{text:"     .",author:" ",color:"from-cyan-400 to-sky-500",bg:"bg-cyan-500"},{text:"     .",author:" ",color:"from-red-400 to-orange-500",bg:"bg-red-500"},{text:"     .",author:" ",color:"from-orange-400 to-yellow-500",bg:"bg-orange-500"},{text:"     .",author:" ",color:"from-teal-400 to-emerald-500",bg:"bg-teal-500"},{text:"    .",author:" ",color:"from-indigo-400 to-blue-500",bg:"bg-indigo-500"}],tj=()=>{const[n,e]=F.useState(0),[t,s]=F.useState(!0);F.useEffect(()=>{const u=setInterval(()=>{s(!1),setTimeout(()=>{e(h=>(h+1)%Qp.length),s(!0)},500)},1e4);return()=>clearInterval(u)},[]);const a=Qp[n],l=()=>{navigator.clipboard.writeText(`"${a.text}" - ${a.author}`),alert("  !")};return o.jsxs("div",{className:"py-20 bg-gradient-to-b from-slate-900 to-gray-950 relative overflow-hidden border-t border-gray-800",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-10 left-1/4 w-1 h-1 bg-white rounded-full animate-[ping_3s_infinite]"}),o.jsx("div",{className:"absolute bottom-20 right-1/3 w-1.5 h-1.5 bg-yellow-400 rounded-full animate-[ping_5s_infinite]"}),o.jsx("div",{className:"absolute top-1/2 left-10 w-2 h-2 bg-blue-400 rounded-full animate-[bounce_4s_infinite] opacity-20"}),o.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full bg-gradient-to-r ${a.color} blur-[150px] opacity-10 transition-colors duration-1000`})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-[3rem] p-8 md:p-12 text-center relative group hover:bg-white/10 transition-all duration-500 shadow-2xl",children:[o.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:o.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${a.color} flex items-center justify-center shadow-lg transform rotate-3 group-hover:rotate-0 transition-transform`,children:o.jsx(aI,{className:"w-6 h-6 text-white fill-white"})})}),o.jsxs("div",{className:`transition-all duration-500 ease-in-out transform ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[o.jsxs("h2",{className:`text-2xl md:text-4xl font-black leading-relaxed tracking-wide bg-clip-text text-transparent bg-gradient-to-r ${a.color} mb-6 drop-shadow-sm`,children:['"',a.text,'"']}),o.jsxs("p",{className:"text-gray-400 font-bold text-lg flex items-center justify-center gap-2",children:[o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`}),a.author,o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`})]})]}),o.jsx("button",{onClick:l,className:"absolute top-6 right-6 p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:" ",children:o.jsx(pI,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center gap-2 mt-10",children:Qp.map((u,h)=>o.jsx("button",{onClick:()=>{s(!1),setTimeout(()=>{e(h),s(!0)},300)},className:`h-1.5 rounded-full transition-all duration-700 ${h===n?`w-8 ${u.bg}`:"w-1.5 bg-gray-700 hover:bg-gray-500"}`},h))})]})})]})},nj=()=>o.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:o.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:o.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),o.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),o.jsx("div",{className:"relative",children:o.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),sj=({onLoginClick:n})=>o.jsxs("section",{className:"py-32 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),o.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[o.jsx(hE,{className:"w-4 h-4"}),o.jsx("span",{children:"  "})]}),o.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",o.jsx("br",{}),o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),o.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),o.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:o.jsxs("button",{onClick:n,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",o.jsx(Lt,{className:"w-6 h-6"})]})})]})]}),rj=()=>o.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),o.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[o.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),o.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[o.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),ij=()=>{const[n,e]=F.useState([]),[t,s]=F.useState(!0),[a,l]=F.useState(0);F.useEffect(()=>{(async()=>{try{const w=Ln(Ut(at,"quizzes"),Xa("createdAt","desc"),Zd(2)),S=Ln(Ut(at,"study_materials"),Xa("createdAt","desc"),Zd(2)),V=Ln(Ut(at,"explanations"),Xa("createdAt","desc"),Zd(2)),P=Ln(Ut(at,"announcements"),Xa("createdAt","desc"),Zd(2)),[B,K,re,$]=await Promise.all([Bn(w),Bn(S),Bn(V),Bn(P)]),ie=[];$.forEach(W=>{const G=W.data();ie.push({id:W.id,type:"general",title:G.title,teacherName:G.teacherName||"",date:G.createdAt})}),B.forEach(W=>{const G=W.data();ie.push({id:W.id,type:"quiz",title:G.title,teacherName:G.teacherName||"",date:G.createdAt})}),K.forEach(W=>{const G=W.data();ie.push({id:W.id,type:"file",title:G.title,teacherName:G.teacherName||"",date:G.createdAt})}),re.forEach(W=>{const G=W.data();ie.push({id:W.id,type:"explanation",title:G.title,teacherName:G.teacherName||"",date:G.createdAt})}),ie.sort((W,G)=>{var I,D;const C=((I=W.date)==null?void 0:I.seconds)||0;return(((D=G.date)==null?void 0:D.seconds)||0)-C}),e(ie.slice(0,10))}catch(w){console.error("Error fetching announcements:",w)}finally{s(!1)}})()},[]),F.useEffect(()=>{if(n.length<=1)return;const _=setInterval(()=>{l(w=>(w+1)%n.length)},4e3);return()=>clearInterval(_)},[n.length]);const u=_=>_?(_.toDate?_.toDate():new Date(_.seconds*1e3)).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit"}):"",h=_=>{switch(_){case"quiz":return o.jsx(Un,{className:"w-3 h-3 text-yellow-400"});case"file":return o.jsx(kr,{className:"w-3 h-3 text-blue-400"});case"explanation":return o.jsx(so,{className:"w-3 h-3 text-purple-400"});case"general":return o.jsx(UA,{className:"w-3 h-3 text-red-400"});default:return o.jsx(Yc,{className:"w-3 h-3 text-emerald-400"})}},p=_=>{switch(_){case"quiz":return"";case"file":return"";case"explanation":return"";case"general":return"";default:return""}};if(t||n.length===0)return null;const m=n[a],v=[...n,...n,...n];return o.jsxs("div",{className:"w-full bg-gray-900 border-t border-b border-emerald-900/30 relative overflow-hidden py-2",dir:"rtl",children:[o.jsxs("div",{className:"md:hidden flex items-center justify-between px-3 h-12",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-emerald-900/20 text-emerald-400 px-2 py-1 rounded-lg text-[10px] font-bold border border-emerald-500/20 shrink-0 ml-2",children:[o.jsx(Yc,{className:"w-3 h-3"}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsxs("div",{className:"flex items-center gap-3 animate-fade-in w-full",children:[o.jsx("div",{className:"shrink-0 pt-1",children:h(m.type)}),o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 justify-center gap-0.5",children:[o.jsx("span",{className:"text-xs font-bold text-gray-200 truncate block w-full",children:m.title}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 w-full",children:[o.jsxs("span",{className:"truncate flex items-center gap-1",children:[o.jsx(jn,{className:"w-3 h-3"})," ",m.teacherName]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"whitespace-nowrap font-mono",children:u(m.date)})]})]})]},m.id)})]}),o.jsxs("div",{className:"hidden md:flex items-center relative z-10 h-10",children:[o.jsx("div",{className:"absolute right-0 z-20 h-full flex items-center pr-4 pl-6 bg-gradient-to-l from-gray-900 via-gray-900 to-transparent",children:o.jsxs("div",{className:"flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm",children:[o.jsx(Yc,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]})}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsx("div",{className:"whitespace-nowrap flex items-center animate-ticker pr-32 will-change-transform",children:v.map((_,w)=>o.jsxs("div",{className:"inline-flex items-center bg-gray-800 border border-gray-700 rounded-full pl-4 pr-2 py-1 gap-3 mx-3 hover:bg-gray-750 transition-colors cursor-default",children:[o.jsxs("div",{className:"bg-gray-700 rounded-full px-2 py-0.5 flex items-center gap-1.5",children:[h(_.type),o.jsx("span",{className:"text-[10px] font-bold text-emerald-400",children:p(_.type)})]}),o.jsx("span",{className:"text-xs text-gray-200 font-bold",children:_.title}),o.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-600 pr-3 mr-1 text-gray-400",children:[o.jsx(jn,{className:"w-3 h-3"}),o.jsx("span",{className:"text-[10px] font-medium",children:_.teacherName})]}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono border-r border-gray-600 pr-2 mr-1",children:u(_.date)})]},`${_.id}-${w}`))})})]}),o.jsx("style",{children:`
            .animate-ticker {
                animation: ticker 80s linear infinite;
            }
            @keyframes ticker {
                0% { transform: translateX(0); }
                100% { transform: translateX(50%); } 
            }
            .animate-ticker:hover {
                animation-play-state: paused;
            }
        `})]})},d2=()=>{const n=F.useRef(null);return F.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,a=window.innerWidth,l=window.innerHeight;const u=a<768?150:400,h=.1,p=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=a,e.height=l;const m=[];for(let w=0;w<u;w++)m.push({x:Math.random()*a,y:Math.random()*l,z:Math.random()*a,size:Math.random()*2,color:p[Math.floor(Math.random()*p.length)],alpha:Math.random()});const v=()=>{a=window.innerWidth,l=window.innerHeight,e.width=a,e.height=l};window.addEventListener("resize",v);const _=()=>{t.clearRect(0,0,a,l),m.forEach(w=>{Math.random()>.99&&(w.alpha=Math.random()),w.y-=h*(w.size*.5),w.y<0&&(w.y=l,w.x=Math.random()*a),t.beginPath(),t.fillStyle=`rgba(${w.color}, ${w.alpha})`,t.arc(w.x,w.y,w.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),o.jsx("canvas",{ref:n,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},aj=({onBack:n})=>{const e=[{icon:vl,title:" ",desc:"              ."},{icon:bI,title:" 24/7",desc:"                 ."},{icon:$h,title:"  (XP)",desc:"  !    (XP)         ."},{icon:kr,title:" ",desc:"           ."}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx(d2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[o.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[o.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),o.jsx(si,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),o.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),o.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),o.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:o.jsx(Kg,{className:"w-8 h-8 text-blue-400"})})," "]}),o.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[o.jsx("p",{children:'  ""         .                    .'}),o.jsxs("p",{children:["       ",o.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:o.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),o.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(ns,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(ns,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(ns,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),o.jsx("div",{className:"mt-16 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",o.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oj,lj;function cj(){return{geminiUrl:oj,vertexUrl:lj}}function uj(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=cj();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xi{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function dj(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Dg(n,a,l,0,u)}}function Dg(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])Dg(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of h)p[m]=u[m];for(const[m,v]of Object.entries(p)){const _=[];for(const w of t.slice(s))w==="*"?_.push(m):_.push(w);g(u,_,v)}for(const m of h)delete u[m]}}else{const u=n;l in u&&Dg(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hj(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function fj(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],pj(u)),e}function mj(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],gj(u)),e}function pj(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>yj(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function gj(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>xj(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function yj(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],Tj(t)),e}function xj(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Nj(t)),e}function vj(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function bj(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function _j(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],wj(u)),e}function wj(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function h2(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],Ej(u)),e}function Ej(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function Tj(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Z0(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function Nj(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Z0(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var M1;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(M1||(M1={}));var D1;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(D1||(D1={}));var P1;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(P1||(P1={}));var vn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(vn||(vn={}));var j1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(j1||(j1={}));var L1;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(L1||(L1={}));var V1;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(V1||(V1={}));var U1;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(U1||(U1={}));var O1;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(O1||(O1={}));var q1;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(q1||(q1={}));var z1;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(z1||(z1={}));var F1;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(F1||(F1={}));var G1;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(G1||(G1={}));var B1;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(B1||(B1={}));var H1;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(H1||(H1={}));var $1;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($1||($1={}));var K1;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(K1||(K1={}));var Y1;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Y1||(Y1={}));var Q1;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Q1||(Q1={}));var zh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(zh||(zh={}));var J1;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(J1||(J1={}));var X1;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(X1||(X1={}));var W1;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(W1||(W1={}));var Pg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pg||(Pg={}));var Z1;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Z1||(Z1={}));var ew;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ew||(ew={}));var tw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(tw||(tw={}));var nw;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(nw||(nw={}));var sw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sw||(sw={}));var rw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rw||(rw={}));var iw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(iw||(iw={}));var aw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(aw||(aw={}));var ow;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ow||(ow={}));var lw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(lw||(lw={}));var cw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cw||(cw={}));var uw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uw||(uw={}));var dw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dw||(dw={}));var hw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hw||(hw={}));var fw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(fw||(fw={}));var mw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(mw||(mw={}));var pw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(pw||(pw={}));var gw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(gw||(gw={}));var yw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(yw||(yw={}));var xw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(xw||(xw={}));var vw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(vw||(vw={}));var bw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(bw||(bw={}));var _w;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_w||(_w={}));var ww;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ww||(ww={}));var Ew;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ew||(Ew={}));var Tw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tw||(Tw={}));var Nw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Nw||(Nw={}));var Sw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sw||(Sw={}));var Aw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Aw||(Aw={}));var Cw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Cw||(Cw={}));var ll;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ll||(ll={}));class jg{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class qc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const w of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[S,V]of Object.entries(w))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(V!==null||V!==void 0)&&_.push(S);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;v=!0,m+=w.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[w,S]of Object.entries(_))w!=="inlineData"&&(S!==null||S!==void 0)&&v.push(w);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Iw{}class Rw{}class Sj{}class Aj{}class Cj{}class Ij{}class kw{}class Mw{}class Dw{}class Rj{}class Fh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Fh;let a;const l=e;return t?a=mj(l):a=fj(l),Object.assign(s,a),s}}class Pw{}class jw{}class Lw{}class kj{}class Mj{}class Dj{}class ey{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ey,l=_j(e);return Object.assign(s,l),s}}class Pj{}class jj{}class Lj{}class Vw{}class Vj{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Uj{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ty,l=h2(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function f2(n,e){const t=ct(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function m2(n){return Array.isArray(n)?n.map(e=>Gh(e)):[Gh(n)]}function Gh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function p2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function g2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Uw(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function y2(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Uw(e)):[Uw(n)]}function Lg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Ow(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function qw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Vn(n){if(n==null)throw new Error("ContentUnion is required");return Lg(n)?n:{role:"user",parts:y2(n)}}function ny(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Vn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Vn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Vn(t)):[Vn(e)]}function Ls(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Ow(n)||qw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Vn(n)]}const e=[],t=[],s=Lg(n[0]);for(const a of n){const l=Lg(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Ow(a)||qw(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:y2(t)}),e}function Oj(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(vn).includes(t[0].toUpperCase())?t[0].toUpperCase():vn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(vn).includes(s.toUpperCase())?s.toUpperCase():vn.TYPE_UNSPECIFIED})}}function gl(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Oj(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(vn).includes(h.toUpperCase())?h.toUpperCase():vn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=gl(h);else if(s.includes(u)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push(gl(m))}e[u]=p}else if(a.includes(u)){const p={};for(const[m,v]of Object.entries(h))p[m]=gl(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function sy(n){return gl(n)}function ry(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function iy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ul(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=gl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=gl(e.response));return n}function Ol(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function qj(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function vi(n,e){if(typeof e!="string")throw new Error("name must be a string");return qj(n,e,"cachedContents")}function x2(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ba(n){return Z0(n)}function zj(n){return n!=null&&typeof n=="object"&&"name"in n}function Fj(n){return n!=null&&typeof n=="object"&&"video"in n}function Gj(n){return n!=null&&typeof n=="object"&&"uri"in n}function v2(n){var e;let t;if(zj(n)&&(t=n.name),!(Gj(n)&&(t=n.uri,t===void 0))&&!(Fj(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function b2(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function _2(n){for(const e of["models","tunedModels","publisherModels"])if(Bj(n,e))return n[e];return[]}function Bj(n,e){return n!==null&&typeof n=="object"&&e in n}function Hj(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $j(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=Hj(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function w2(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Kj(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function E2(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ql(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function T2(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yj(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>C9(u))),g(e,["inlinedResponses"],l)}const a=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function Qj(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Jj(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uh(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["metadata","state"]);a!=null&&g(e,["state"],T2(a));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=f(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],Yj(E2(m))),e}function Vg(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["state"]);a!=null&&g(e,["state"],T2(a));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const _=f(n,["inputConfig"]);_!=null&&g(e,["src"],Xj(_));const w=f(n,["outputConfig"]);w!=null&&g(e,["dest"],Qj(E2(w)));const S=f(n,["completionStats"]);return S!=null&&g(e,["completionStats"],S),e}function Xj(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Wj(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>A9(n,u))),g(t,["requests","requests"],l)}return t}function Zj(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function e9(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function t9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function n9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function s9(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],r9(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>S)),g(e,["safetyRatings"],w)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function r9(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function N2(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>j9(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function i9(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function a9(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],Jj(Kj(a))),t}function zw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],Wj(n,w2(n,a)));const l=f(e,["config"]);return l!=null&&i9(l,t),t}function o9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["inputConfig"],Zj(w2(n,a)));const l=f(e,["config"]);return l!=null&&a9(l,t),t}function l9(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function c9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],g9(n,a));const l=f(e,["config"]);return l!=null&&l9(l,t),t}function u9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function d9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function h9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function f9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function m9(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=ny(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(g(t,["_self"],p9(a,t)),dj(t,{"requests[].*":"requests[].request.*"})),t}function p9(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function g9(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=f(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],m9(n,a)),t}function y9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function x9(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v9(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function b9(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],N2(Vn(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const P=f(e,["seed"]);P!=null&&g(s,["seed"],P);const B=f(e,["responseMimeType"]);B!=null&&g(s,["responseMimeType"],B);const K=f(e,["responseSchema"]);K!=null&&g(s,["responseSchema"],sy(K));const re=f(e,["responseJsonSchema"]);if(re!=null&&g(s,["responseJsonSchema"],re),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(M=>L9(M))),g(t,["safetySettings"],U)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let U=Ol(ie);Array.isArray(U)&&(U=U.map(M=>U9(Ul(M)))),g(t,["tools"],U)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],V9(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=f(e,["cachedContent"]);t!==void 0&&G!=null&&g(t,["cachedContent"],vi(n,G));const C=f(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const R=f(e,["mediaResolution"]);R!=null&&g(s,["mediaResolution"],R);const I=f(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],ry(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],S9(j)),s}function _9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>s9(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function w9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function E9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ql(n,s)),t}function T9(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function N9(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function S9(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function A9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let h=Ls(a);Array.isArray(h)&&(h=h.map(p=>N2(p))),g(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],b9(n,u,f(t,["request"],{}))),t}function C9(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],_9(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function I9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function R9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function k9(n){const e={},t=f(n,["config"]);return t!=null&&I9(t,e),e}function M9(n){const e={},t=f(n,["config"]);return t!=null&&R9(t,e),e}function D9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>uh(u))),g(e,["batchJobs"],l)}return e}function P9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Vg(u))),g(e,["batchJobs"],l)}return e}function j9(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],y9(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],x9(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],e9(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function L9(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function V9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],v9(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function U9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],T9(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],N9(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mi;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(mi||(mi={}));class go{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O9 extends xi{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new go(mi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=zw(this.apiClient,e),s=t._url,a=ve("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const w=_.systemInstruction;delete _.systemInstruction;const S=_.request;S.systemInstruction=w,_.request=S}m.push(_)}return h.requests=m,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=o9(this.apiClient,e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=zw(this.apiClient,e);return h=ve("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uh(v))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=c9(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>uh(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=E9(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=w9(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uh(v))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=n9(this.apiClient,e);u=ve("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=t9(this.apiClient,e);u=ve("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=M9(e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=P9(v),w=new Vw;return Object.assign(w,_),w})}else{const m=k9(e);return h=ve("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=D9(v),w=new Vw;return Object.assign(w,_),w})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=d9(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>f9(v))}else{const m=u9(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>h9(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q9(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Fw(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>c8(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function z9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Ls(u);Array.isArray(v)&&(v=v.map(_=>Fw(_))),g(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],Fw(Vn(h)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>d8(_))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],u8(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function F9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Ls(u);Array.isArray(_)&&(_=_.map(w=>w)),g(e,["contents"],_)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],Vn(h));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>h8(w))),g(e,["tools"],_)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function G9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],f2(n,s));const a=f(e,["config"]);return a!=null&&z9(a,t),t}function B9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],f2(n,s));const a=f(e,["config"]);return a!=null&&F9(a,t),t}function H9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vi(n,s)),t}function $9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vi(n,s)),t}function K9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Y9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Q9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function J9(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X9(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function W9(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function Z9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vi(n,s)),t}function e8(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vi(n,s)),t}function t8(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function n8(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function s8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function r8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function i8(n){const e={},t=f(n,["config"]);return t!=null&&s8(t,e),e}function a8(n){const e={},t=f(n,["config"]);return t!=null&&r8(t,e),e}function o8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function l8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function c8(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Q9(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],J9(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],q9(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function u8(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],X9(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function d8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],t8(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],n8(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function h8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>W9(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function f8(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function m8(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function p8(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vi(n,s));const a=f(e,["config"]);return a!=null&&f8(a,t),t}function g8(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vi(n,s));const a=f(e,["config"]);return a!=null&&m8(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y8 extends xi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new go(mi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=B9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=G9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=e8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Z9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=$9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Y9(v),w=new jw;return Object.assign(w,_),w})}else{const m=H9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=K9(v),w=new jw;return Object.assign(w,_),w})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=g8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=p8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=a8(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=l8(v),w=new Lw;return Object.assign(w,_),w})}else{const m=i8(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=o8(v),w=new Lw;return Object.assign(w,_),w})}}}function Gw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function yl(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(S){return function(V){return Promise.resolve(V).then(S,_)}}function h(S,V){s[S]&&(a[S]=function(P){return new Promise(function(B,K){l.push([S,P,B,K])>1||p(S,P)})},V&&(a[S]=V(a[S])))}function p(S,V){try{m(s[S](V))}catch(P){w(l[0][3],P)}}function m(S){S.value instanceof Mt?Promise.resolve(S.value.v).then(v,_):w(l[0][2],S)}function v(S){p("next",S)}function _(S){p("throw",S)}function w(S,V){S(V),l.shift(),l.length&&p(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Gw=="function"?Gw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(m){l({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x8(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:S2(t)}function S2(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function v8(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!S2(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class b8{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new _8(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _8{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),v8(l)}async sendMessage(e){var t;await this.sendPromise;const s=Vn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,m=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let w=[];v!=null&&(w=(h=v.slice(_))!==null&&h!==void 0?h:[]);const S=m?[m]:[];this.recordHistory(s,S,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=Vn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?Bw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,a;return yl(this,arguments,function*(){var u,h,p,m;const v=[];try{for(var _=!0,w=nu(e),S;S=yield Mt(w.next()),u=S.done,!u;_=!0){m=S.value,_=!1;const V=m;if(x8(V)){const P=(a=(s=V.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;P!==void 0&&v.push(P)}yield yield Mt(V)}}catch(V){h={error:V}}finally{try{!_&&!u&&(p=w.return)&&(yield Mt(p.call(w)))}finally{if(h)throw h.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Bw(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w8(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function E8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function T8(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],v2(t)),e}function N8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function S8(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],v2(t)),e}function A8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function C8(n){const e={},t=f(n,["config"]);return t!=null&&A8(t,e),e}function I8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R8 extends xi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new go(mi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=C8(e);return l=ve("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=I8(p),v=new Pj;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=w8(e);return l=ve("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=E8(p),v=new jj;return Object.assign(v,m),v})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=S8(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=T8(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=N8(p),v=new Lj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dh(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function k8(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>K8(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function M8(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function D8(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P8(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function j8(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=f(n,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const V=f(n,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const P=f(n,["responseSchema"]);P!=null&&g(e,["responseSchema"],P);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const K=f(n,["seed"]);K!=null&&g(e,["seed"],K);const re=f(n,["speechConfig"]);re!=null&&g(e,["speechConfig"],A2(re));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const W=f(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const G=f(n,["topK"]);G!=null&&g(e,["topK"],G);const C=f(n,["topP"]);if(C!=null&&g(e,["topP"],C),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L8(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function V8(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function U8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],iy(_));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],k8(Vn(V)));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let G=Ol(P);Array.isArray(G)&&(G=G.map(C=>Q8(Ul(C)))),g(e,["setup","tools"],G)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],Y8(B));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const re=f(n,["outputAudioTranscription"]);e!==void 0&&re!=null&&g(e,["setup","outputAudioTranscription"],re);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function O8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],j8(s));const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],A2(iy(_)));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],Vn(V));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let G=Ol(P);Array.isArray(G)&&(G=G.map(C=>J8(Ul(C)))),g(e,["setup","tools"],G)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],B);const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const re=f(n,["outputAudioTranscription"]);e!==void 0&&re!=null&&g(e,["setup","outputAudioTranscription"],re);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function q8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],U8(a,t)),t}function z8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],O8(a,t)),t}function F8(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function G8(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function B8(n){const e={},t=f(n,["media"]);if(t!=null){let m=m2(t);Array.isArray(m)&&(m=m.map(v=>dh(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],dh(g2(s)));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],dh(p2(l)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function H8(n){const e={},t=f(n,["media"]);if(t!=null){let m=m2(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],g2(s));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],p2(l));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function $8(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=f(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],X8(u));const h=f(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function K8(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],M8(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],D8(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],dh(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function Y8(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function A2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Q8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],L8(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],V8(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function J8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>P8(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function X8(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=f(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=f(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=f(n,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(V=>V)),g(e,["promptTokensDetails"],S)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(V=>V)),g(e,["cacheTokensDetails"],S)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(V=>V)),g(e,["responseTokensDetails"],S)}const _=f(n,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(V=>V)),g(e,["toolUsePromptTokensDetails"],S)}const w=f(n,["trafficType"]);return w!=null&&g(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W8(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Z8(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],eL(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>S)),g(e,["safetyRatings"],w)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function eL(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function tL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let l=Ls(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function nL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function sL(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],rL(s)),e}function rL(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Nf(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>fV(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function iL(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function aL(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function oL(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Vn(s));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>M2(h))),g(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],WL(l)),t}function lL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=Ls(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&aL(l),t}function cL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=Ls(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&oL(l,t),t}function uL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=f(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function dL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function hL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function fL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function mL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function pL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function gL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&g(e,["parameters","outputOptions","compressionQuality"],P);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const K=f(n,["labels"]);e!==void 0&&K!=null&&g(e,["labels"],K);const re=f(n,["editMode"]);e!==void 0&&re!=null&&g(e,["parameters","editMode"],re);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function yL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>vV(p))),g(t,["instances[0]","referenceImages"],h)}const u=f(e,["config"]);return u!=null&&gL(u,t),t}function xL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function vL(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bL(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function _L(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let h=ny(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&vL(l,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],ct(n,u)),t}function wL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=ny(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&bL(l,t),t}function EL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function TL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>sL(u))),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function NL(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function SL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function AL(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CL(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function RL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Nf(Vn(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const P=f(e,["seed"]);P!=null&&g(s,["seed"],P);const B=f(e,["responseMimeType"]);B!=null&&g(s,["responseMimeType"],B);const K=f(e,["responseSchema"]);K!=null&&g(s,["responseSchema"],sy(K));const re=f(e,["responseJsonSchema"]);if(re!=null&&g(s,["responseJsonSchema"],re),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(M=>bV(M))),g(t,["safetySettings"],U)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let U=Ol(ie);Array.isArray(U)&&(U=U.map(M=>AV(Ul(M)))),g(t,["tools"],U)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],SV(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=f(e,["cachedContent"]);t!==void 0&&G!=null&&g(t,["cachedContent"],vi(n,G));const C=f(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const R=f(e,["mediaResolution"]);R!=null&&g(s,["mediaResolution"],R);const I=f(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],ry(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],sV(j)),s}function kL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Vn(a));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const V=f(e,["frequencyPenalty"]);V!=null&&g(s,["frequencyPenalty"],V);const P=f(e,["seed"]);P!=null&&g(s,["seed"],P);const B=f(e,["responseMimeType"]);B!=null&&g(s,["responseMimeType"],B);const K=f(e,["responseSchema"]);K!=null&&g(s,["responseSchema"],sy(K));const re=f(e,["responseJsonSchema"]);re!=null&&g(s,["responseJsonSchema"],re);const $=f(e,["routingConfig"]);$!=null&&g(s,["routingConfig"],$);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(s,["modelConfig"],ie);const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let ee=W;Array.isArray(ee)&&(ee=ee.map(pe=>pe)),g(t,["safetySettings"],ee)}const G=f(e,["tools"]);if(t!==void 0&&G!=null){let ee=Ol(G);Array.isArray(ee)&&(ee=ee.map(pe=>M2(Ul(pe)))),g(t,["tools"],ee)}const C=f(e,["toolConfig"]);t!==void 0&&C!=null&&g(t,["toolConfig"],C);const R=f(e,["labels"]);t!==void 0&&R!=null&&g(t,["labels"],R);const I=f(e,["cachedContent"]);t!==void 0&&I!=null&&g(t,["cachedContent"],vi(n,I));const D=f(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const j=f(e,["mediaResolution"]);j!=null&&g(s,["mediaResolution"],j);const U=f(e,["speechConfig"]);U!=null&&g(s,["speechConfig"],k2(ry(U)));const M=f(e,["audioTimestamp"]);M!=null&&g(s,["audioTimestamp"],M);const Fe=f(e,["thinkingConfig"]);Fe!=null&&g(s,["thinkingConfig"],Fe);const $e=f(e,["imageConfig"]);return $e!=null&&g(s,["imageConfig"],rV($e)),s}function Hw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=Ls(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],RL(n,l,t)),t}function $w(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=Ls(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],kL(n,l,t)),t}function Kw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Z8(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function Yw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const a=f(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=f(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function ML(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&g(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=f(n,["imageSize"]);if(e!==void 0&&S!=null&&g(e,["parameters","sampleImageSize"],S),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function DL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","mimeType"],V);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&g(e,["parameters","outputOptions","compressionQuality"],P);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const K=f(n,["labels"]);e!==void 0&&K!=null&&g(e,["labels"],K);const re=f(n,["imageSize"]);e!==void 0&&re!=null&&g(e,["parameters","sampleImageSize"],re);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function PL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&ML(l,t),t}function jL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&DL(l,t),t}function LL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>YL(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],I2(a)),e}function VL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Sf(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],R2(a)),e}function UL(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Af(v));const _=f(n,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(S=>qV(S))),g(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function OL(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","negativePrompt"],w);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const V=f(n,["generateAudio"]);e!==void 0&&V!=null&&g(e,["parameters","generateAudio"],V);const P=f(n,["lastFrame"]);e!==void 0&&P!=null&&g(e,["instances[0]","lastFrame"],nr(P));const B=f(n,["referenceImages"]);if(e!==void 0&&B!=null){let $=B;Array.isArray($)&&($=$.map(ie=>zV(ie))),g(e,["instances[0]","referenceImages"],$)}const K=f(n,["mask"]);e!==void 0&&K!=null&&g(e,["instances[0]","mask"],OV(K));const re=f(n,["compressionQuality"]);return e!==void 0&&re!=null&&g(e,["parameters","compressionQuality"],re),t}function qL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],BL(u)),e}function zL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],HL(u)),e}function FL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Af(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],D2(u));const h=f(e,["source"]);h!=null&&$L(h,t);const p=f(e,["config"]);return p!=null&&UL(p,t),t}function GL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],nr(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],P2(u));const h=f(e,["source"]);h!=null&&KL(h,t);const p=f(e,["config"]);return p!=null&&OL(p,t),t}function BL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>JL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function HL(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>XL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function $L(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Af(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],D2(l)),t}function KL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],nr(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],P2(l)),t}function YL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],iV(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],I2(a)),e}function Sf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],C2(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);a!=null&&g(e,["safetyAttributes"],R2(a));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function QL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],C2(t));const s=f(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function JL(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],VV(t)),e}function XL(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],UV(t)),e}function WL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=f(n,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const V=f(n,["responseModalities"]);V!=null&&g(e,["responseModalities"],V);const P=f(n,["responseSchema"]);P!=null&&g(e,["responseSchema"],P);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const K=f(n,["seed"]);K!=null&&g(e,["seed"],K);const re=f(n,["speechConfig"]);re!=null&&g(e,["speechConfig"],k2(re));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const W=f(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const G=f(n,["topK"]);G!=null&&g(e,["topK"],G);const C=f(n,["topP"]);if(C!=null&&g(e,["topP"],C),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function eV(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function tV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function nV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function sV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=f(n,["outputMimeType"]);a!=null&&g(e,["imageOutputOptions","mimeType"],a);const l=f(n,["outputCompressionQuality"]);return l!=null&&g(e,["imageOutputOptions","compressionQuality"],l),e}function iV(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],ba(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function C2(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Af(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],ba(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function nr(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function aV(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],b2(n,h)),s}function oV(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],b2(n,h)),s}function lV(n,e){const t={},s=f(e,["config"]);return s!=null&&aV(n,s,t),t}function cV(n,e){const t={},s=f(e,["config"]);return s!=null&&oV(n,s,t),t}function uV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=_2(a);Array.isArray(l)&&(l=l.map(u=>Ug(u))),g(e,["models"],l)}return e}function dV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=_2(a);Array.isArray(l)&&(l=l.map(u=>Og(u))),g(e,["models"],l)}return e}function hV(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=f(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function Ug(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],CV(u));const h=f(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=f(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const w=f(n,["topP"]);w!=null&&g(e,["topP"],w);const S=f(n,["topK"]);S!=null&&g(e,["topK"],S);const V=f(n,["thinking"]);return V!=null&&g(e,["thinking"],V),e}function Og(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(w=>NL(w))),g(e,["endpoints"],_)}const h=f(n,["labels"]);h!=null&&g(e,["labels"],h);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],IV(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(w=>w)),g(e,["checkpoints"],_)}return e}function fV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],SL(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],AL(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],W8(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function mV(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],nr(t)),e}function pV(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=f(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const S=f(n,["labels"]);return e!==void 0&&S!=null&&g(e,["labels"],S),t}function gV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["source"]);a!=null&&xV(a,t);const l=f(e,["config"]);return l!=null&&pV(l,t),t}function yV(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Sf(a))),g(e,["generatedImages"],s)}return e}function xV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],nr(a));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>mV(h))),g(e,["instances[0]","productImages"],u)}return t}function vV(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],nr(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=f(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],hV(l));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],iL(u));const h=f(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function I2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function R2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function bV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function _V(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],nr(t)),e}function wV(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function EV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["source"]);a!=null&&NV(a,t);const l=f(e,["config"]);return l!=null&&wV(l,t),t}function TV(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>QL(a))),g(e,["generatedMasks"],s)}return e}function NV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],nr(a));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],_V(l)),t}function k2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function SV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],CL(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function AV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],tV(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],nV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function M2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>IL(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function CV(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function IV(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function RV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function kV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function MV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],ct(n,s));const a=f(e,["config"]);return a!=null&&RV(a,t),t}function DV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&kV(a,t),t}function PV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=f(n,["numberOfImages"]);e!==void 0&&w!=null&&g(e,["parameters","sampleCount"],w);const S=f(n,["mode"]);return e!==void 0&&S!=null&&g(e,["parameters","mode"],S),t}function jV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],nr(a));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&PV(u,t),t}function LV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function VV(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],ba(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function UV(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function OV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],nr(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function qV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Af(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function zV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],nr(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function D2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function P2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FV="Content-Type",GV="X-Server-Timeout",BV="User-Agent",qg="x-goog-api-client",HV="1.30.0",$V=`google-genai-sdk/${HV}`,KV="v1beta1",YV="v1beta",Qw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class QV{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:KV,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:YV,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&JV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Jw(a),new jg(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Jw(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var t;return yl(this,arguments,function*(){const a=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:p}=yield Mt(a.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const w=JSON.parse(JSON.stringify(_.error)),S=w.status,V=w.code,P=`got status: ${S}. ${JSON.stringify(_)}`;if(V>=400&&V<600)throw new Tf({message:P,status:V})}}catch(_){if(_.name==="ApiError")throw _}u+=m;let v=u.match(Qw);for(;v;){const _=v[1];try{const w=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Mt(new jg(w)),u=u.slice(v[0].length),v=u.match(Qw)}catch(w){throw new Error(`exception parsing stream chunk ${_}. ${w}`)}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=$V+" "+this.clientOptions.userAgentExtra;return e[BV]=t,e[qg]=t,e[FV]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(GV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},m=this.getFileName(e),v=ve("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&s.customMetadata&&(_.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(_.chunkingConfig=s.chunkingConfig);const w=await this.fetchUploadUrl(m,h,p,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Jw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new Tf({message:a,status:t}):new Error(a)}}function JV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XV="mcp_used/unknown";let WV=!1;function j2(n){for(const e of n)if(ZV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WV}function L2(n){var e;const t=(e=n[qg])!==null&&e!==void 0?e:"";n[qg]=(t+` ${XV}`).trimStart()}function ZV(n){return n!==null&&typeof n=="object"&&n instanceof ay}function eU(n,e=100){return yl(this,arguments,function*(){let s,a=0;for(;a<e;){const l=yield Mt(n.listTools({cursor:s}));for(const u of l.tools)yield yield Mt(u),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class ay{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new ay(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var h=!0,p=(t=void 0,nu(eU(v))),m;m=await p.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const _=a;u.push(_);const w=_.name;if(l[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);l[w]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$j(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tU(n,e,t){const s=new Uj;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class nU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=iU(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise($=>{m=$}),_=e.callbacks,w=function(){m({})},S=this.apiClient,V={onopen:w,onmessage:$=>{tU(S,_.onmessage,$)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function($){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function($){}},P=this.webSocketFactory.create(p,rU(u),V);P.connect(),await v;const re={setup:{model:ct(this.apiClient,e.model)}};return P.send(JSON.stringify(re)),new sU(P,this.apiClient)}}class sU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=G8(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=F8(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ll.PLAY)}pause(){this.sendPlaybackControl(ll.PAUSE)}stop(){this.sendPlaybackControl(ll.STOP)}resetContext(){this.sendPlaybackControl(ll.RESET_CONTEXT)}close(){this.conn.close()}}function rU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function iU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oU(n,e,t){const s=new Vj;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=$8(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class lU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new nU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&j2(e.config.tools)&&L2(_);const w=hU(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,v);else{const I=this.apiClient.getApiKey();let D="BidiGenerateContent",j="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",j="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${j}=${I}`}let S=()=>{};const V=new Promise(I=>{S=I}),P=e.callbacks,B=function(){var I;(I=P==null?void 0:P.onopen)===null||I===void 0||I.call(P),S({})},K=this.apiClient,re={onopen:B,onmessage:I=>{oU(K,P.onmessage,I)},onerror:(t=P==null?void 0:P.onerror)!==null&&t!==void 0?t:function(I){},onclose:(s=P==null?void 0:P.onclose)!==null&&s!==void 0?s:function(I){}},$=this.webSocketFactory.create(v,dU(w),re);$.connect(),await V;let ie=ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const I=this.apiClient.getProject(),D=this.apiClient.getLocation();ie=`projects/${I}/locations/${D}/`+ie}let W={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zh.AUDIO]}:e.config.responseModalities=[zh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],C=[];for(const I of G)if(this.isCallableTool(I)){const D=I;C.push(await D.tool())}else C.push(I);C.length>0&&(e.config.tools=C);const R={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=z8(this.apiClient,R):W=q8(this.apiClient,R),delete W.config,$.send(JSON.stringify(W)),new uU($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const cU={turnComplete:!0};class uU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Ls(t.turns),e.isVertexAI()||(s=s.map(a=>Nf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(aU)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},cU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:H8(e)}:t={realtimeInput:B8(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function dU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function hU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xw=10;function Ww(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(xl(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function xl(n){return"callTool"in n&&typeof n.callTool=="function"}function fU(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>xl(a)))!==null&&s!==void 0?s:!1}function Zw(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(xl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function eE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mU extends xi{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!fU(t)||Ww(t.config))return await this.generateContentInternal(p);const m=Zw(t);if(m.length>0){const P=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let v,_;const w=Ls(p.contents),S=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:Xw;let V=0;for(;V<S&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const P=v.candidates[0].content,B=[];for(const K of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(xl(K)){const $=await K.callTool(v.functionCalls);B.push(...$)}V++,_={role:"user",parts:B},p.contents=Ls(p.contents),p.contents.push(P),p.contents.push(_),eE(p.config)&&(w.push(P),w.push(_))}return eE(p.config)&&(v.automaticFunctionCallingHistory=w),v},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),Ww(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=Zw(t);if(p.length>0){const _=p.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new go(mi.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>xl(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&j2(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),L2(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(xl(u)){const h=u,p=await h.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Xw;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){var w,S;return yl(this,arguments,function*(){for(var V,P,B,K;h<l;){u&&(h++,u=!1);const W=yield Mt(m.processParamsMaybeAddMcpUsage(_)),G=yield Mt(m.generateContentStreamInternal(W)),C=[],R=[];try{for(var re=!0,$=(P=void 0,nu(G)),ie;ie=yield Mt($.next()),V=ie.done,!V;re=!0){K=ie.value,re=!1;const I=K;if(yield yield Mt(I),I.candidates&&(!((w=I.candidates[0])===null||w===void 0)&&w.content)){R.push(I.candidates[0].content);for(const D of(S=I.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(h<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const j=yield Mt(v.get(D.functionCall.name).callTool([D.functionCall]));C.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(I){P={error:I}}finally{try{!re&&!V&&(B=$.return)&&(yield Mt(B.call($)))}finally{if(P)throw P.error}}if(C.length>0){u=!0;const I=new qc;I.candidates=[{content:{role:"user",parts:C}}],yield yield Mt(I);const D=[];D.push(...R),D.push({role:"user",parts:C});const j=Ls(_.contents).concat(D);_.contents=j}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=$w(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Yw(v),w=new qc;return Object.assign(w,_),w})}else{const m=Hw(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Kw(v),w=new qc;return Object.assign(w,_),w})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=$w(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return yl(this,arguments,function*(){var w,S,V,P;try{for(var B=!0,K=nu(_),re;re=yield Mt(K.next()),w=re.done,!w;B=!0){P=re.value,B=!1;const $=P,ie=Yw(yield Mt($.json()));ie.sdkHttpResponse={headers:$.headers};const W=new qc;Object.assign(W,ie),yield yield Mt(W)}}catch($){S={error:$}}finally{try{!B&&!w&&(V=K.return)&&(yield Mt(V.call(K)))}finally{if(S)throw S.error}}})})}else{const m=Hw(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return yl(this,arguments,function*(){var w,S,V,P;try{for(var B=!0,K=nu(_),re;re=yield Mt(K.next()),w=re.done,!w;B=!0){P=re.value,B=!1;const $=P,ie=Kw(yield Mt($.json()));ie.sdkHttpResponse={headers:$.headers};const W=new qc;Object.assign(W,ie),yield yield Mt(W)}}catch($){S={error:$}}finally{try{!B&&!w&&(V=K.return)&&(yield Mt(V.call(K)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=wL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=TL(v),w=new Iw;return Object.assign(w,_),w})}else{const m=_L(this.apiClient,e);return h=ve("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=EL(v),w=new Iw;return Object.assign(w,_),w})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=jL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=VL(v),w=new Rw;return Object.assign(w,_),w})}else{const m=PL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=LL(v),w=new Rw;return Object.assign(w,_),w})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=yL(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=xL(p),v=new Sj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=jV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=LV(p),v=new Aj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=gV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=yV(p),v=new Cj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=EV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=TV(p),v=new Ij;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=eV(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=ZL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=cV(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=dV(v),w=new kw;return Object.assign(w,_),w})}else{const m=lV(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=uV(v),w=new kw;return Object.assign(w,_),w})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=DV(this.apiClient,e);return h=ve("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=MV(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=fL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=pL(v),w=new Mw;return Object.assign(w,_),w})}else{const m=hL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=mL(v),w=new Mw;return Object.assign(w,_),w})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=cL(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=dL(v),w=new Dw;return Object.assign(w,_),w})}else{const m=lL(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=uL(v),w=new Dw;return Object.assign(w,_),w})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=tL(this.apiClient,e);return l=ve("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=nL(p),v=new Rj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=GL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=zL(v),w=new Fh;return Object.assign(w,_),w})}else{const m=FL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const _=qL(v),w=new Fh;return Object.assign(w,_),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pU extends xi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=bj(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=vj(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=hj(e);return l=ve("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gU(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yU(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>SU(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function xU(n,e,t){const s={},a=f(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],NU(n,h));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function vU(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],xU(n,s,t)),t}function bU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function _U(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function EU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function TU(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],iy(_));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&g(e,["setup","systemInstruction"],yU(Vn(V)));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let G=Ol(P);Array.isArray(G)&&(G=G.map(C=>CU(Ul(C)))),g(e,["setup","tools"],G)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],AU(B));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const re=f(n,["outputAudioTranscription"]);e!==void 0&&re!=null&&g(e,["setup","outputAudioTranscription"],re);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function NU(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],TU(a,t)),t}function SU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],bU(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],_U(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],gU(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function AU(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],wU(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],EU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function RU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=IU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class kU extends xi{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=vU(this.apiClient,e);l=ve("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=RU(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MU(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function DU(n){const e={},t=f(n,["config"]);return t!=null&&MU(t,e),e}function PU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function jU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&PU(s,e),e}function LU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function VU(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=f(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function UU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],qU(u)),e}function OU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=f(n,["config"]);return a!=null&&VU(a,e),e}function qU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function zU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function FU(n){const e={},t=f(n,["config"]);return t!=null&&zU(t,e),e}function GU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function BU(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function HU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&BU(s,e),e}function $U(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function YU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&KU(s,e),e}function QU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function JU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function XU(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&JU(s,e),e}function WU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZU extends xi{constructor(e){super(),this.apiClient=e,this.list=async t=>new go(mi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YU(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XU(e);return l=ve("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=WU(p),v=new kj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e7 extends xi{constructor(e,t=new ZU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new go(mi.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jU(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=FU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=GU(p),v=new Mj;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HU(e);return l=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=$U(p),v=new Dj;return Object.assign(v,m),v})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OU(e);return l=ve("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=UU(p),v=new ey;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function n7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function s7(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function r7(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec"],tE(S))}else if(a==="PREFERENCE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec"],tE(S))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(h==="PREFERENCE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(p==="PREFERENCE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(m==="PREFERENCE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(v==="PREFERENCE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=f(n,["beta"]);return e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),s}function i7(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&g7(l);const u=f(n,["config"]);return u!=null&&s7(u,t),t}function a7(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&y7(l,t,e);const u=f(n,["config"]);return u!=null&&r7(u,t,e),t}function o7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function l7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function c7(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function u7(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function d7(n,e){const t={},s=f(n,["config"]);return s!=null&&c7(s,t),t}function h7(n,e){const t={},s=f(n,["config"]);return s!=null&&u7(s,t),t}function f7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>V2(h))),g(t,["tuningJobs"],u)}return t}function m7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>zg(h))),g(t,["tuningJobs"],u)}return t}function p7(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const a=f(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function g7(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function y7(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function V2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],x2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const _=f(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const w=f(n,["_self"]);return w!=null&&g(t,["tunedModel"],p7(w)),t}function zg(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],x2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const _=f(n,["description"]);_!=null&&g(t,["description"],_);const w=f(n,["baseModel"]);w!=null&&g(t,["baseModel"],w);const S=f(n,["tunedModel"]);S!=null&&g(t,["tunedModel"],S);const V=f(n,["preTunedModel"]);V!=null&&g(t,["preTunedModel"],V);const P=f(n,["supervisedTuningSpec"]);P!=null&&g(t,["supervisedTuningSpec"],P);const B=f(n,["preferenceOptimizationSpec"]);B!=null&&g(t,["preferenceOptimizationSpec"],B);const K=f(n,["tuningDataStats"]);K!=null&&g(t,["tuningDataStats"],K);const re=f(n,["encryptionSpec"]);re!=null&&g(t,["encryptionSpec"],re);const $=f(n,["partnerModelTuningSpec"]);$!=null&&g(t,["partnerModelTuningSpec"],$);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const W=f(n,["experiment"]);W!=null&&g(t,["experiment"],W);const G=f(n,["labels"]);G!=null&&g(t,["labels"],G);const C=f(n,["outputUri"]);C!=null&&g(t,["outputUri"],C);const R=f(n,["pipelineJob"]);R!=null&&g(t,["pipelineJob"],R);const I=f(n,["serviceAccount"]);I!=null&&g(t,["serviceAccount"],I);const D=f(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const j=f(n,["veoTuningSpec"]);return j!=null&&g(t,["veoTuningSpec"],j),t}function x7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const h=f(n,["error"]);return h!=null&&g(t,["error"],h),t}function tE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=f(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v7 extends xi{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new go(mi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Pg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=l7(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>zg(v))}else{const m=o7(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>V2(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=h7(e);return h=ve("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=m7(v),w=new Pw;return Object.assign(w,_),w})}else{const m=d7(e);return h=ve("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=f7(v),w=new Pw;return Object.assign(w,_),w})}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=n7(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=t7(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=a7(e,e);return l=ve("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>zg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=i7(e);return l=ve("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>x7(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b7{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _7=1024*1024*8,w7=3,E7=1e3,T7=2,Bh="x-goog-upload-status";async function N7(n,e,t){var s;const a=await U2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function S7(n,e,t){var s;const a=await U2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=h2(l),h=new ty;return Object.assign(h,u),h}async function U2(n,e,t){var s,a;let l=0,u=0,h=new jg(new Response),p="upload";for(l=n.size;u<l;){const m=Math.min(_7,l-u),v=n.slice(u,u+m);u+m>=l&&(p+=", finalize");let _=0,w=E7;for(;_<w7&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Bh]));)_++,await C7(w),w=w*T7;if(u+=m,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Bh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function A7(n){return{size:n.size,type:n.type}}function C7(n){return new Promise(e=>setTimeout(e,n))}class I7{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N7(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S7(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R7{create(e,t,s){return new k7(e,t,s)}}class k7{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nE="x-goog-api-key";class M7{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(nE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D7="gl-node/";class P7{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=uj(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new M7(this.apiKey);this.apiClient=new QV({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:D7+"web",uploader:new I7,downloader:new b7}),this.models=new mU(this.apiClient),this.live=new lU(this.apiClient,a,new R7),this.batches=new O9(this.apiClient),this.chats=new b8(this.models,this.apiClient),this.caches=new y8(this.apiClient),this.files=new R8(this.apiClient),this.operations=new pU(this.apiClient),this.authTokens=new kU(this.apiClient),this.tunings=new v7(this.apiClient),this.fileSearchStores=new e7(this.apiClient)}}var j7={};const L7=new P7({apiKey:j7.API_KEY}),sE={5:`Level: A1-A1+. 
  Grammar: Verb to be, have/has, Present Simple (description/routine), Plurals, Possessive adjectives, There is/are, Prepositions of place, Imperatives.
  Skills: Short texts (40-70 words), identify simple ideas (name, place, time), understand short instructions.`,6:`Level: A1+-A2.
  Grammar: Present Simple (Strong), Past Simple (Regular only), Countable/Uncountable, Quantifiers (some, any), Can/Can't, Comparative adjectives, Adverbs of frequency.
  Skills: Short/Medium texts, simple past events, Wh-questions, describing people/places.`,7:`Level: A2.
  Grammar: Past Simple (Regular/Irregular), Future (will/going to), Present Continuous, Comparative & Superlative, Object pronouns, Adverbs (quickly...), Simple connectors.
  Skills: Texts 120-150 words, sequence of events, detailed descriptions, simple opinions.`,8:`Level: A2-A2+ (Start of B1).
  Grammar: Present Perfect, Past Continuous, Zero & First Conditionals, Modals (must, should), Passive (simple), Relative clauses.
  Skills: Texts 150-200 words, specific info extraction, cause/effect, main idea.`,9:`Level: A2+-B1.
  Grammar: Present Perfect (Advanced), Past Perfect, Future forms, Passive (Present/Past), Reported Speech (say/tell), Conditionals (0+1), Too/Enough, Gerunds/Infinitives.
  Skills: Medium texts analysis, multiple opinions, evidence extraction, main idea + details.`,10:`Level: B1.
  Grammar: Passive (Advanced), Reported Speech (Advanced), Modals of obligation/deduction, Second Conditional, Relative Pronouns.
  Skills: Short academic texts, analyzing scientific/social articles, summarizing, linking paragraphs.`,11:`Level: B1+-B2.
  Grammar: Conditionals (0-3), Mixed Conditionals (Basic), Passive (All tenses), Modals (Advice, Obligation, Prediction), Reduced Relative Clauses, Perfect tenses.
  Skills: Long text analysis, arguments & evidence, comparing viewpoints, context clues.`,12:`Level: B2 (Tawjihi Standard).
  Grammar: Advanced Passive, Advanced Conditionals (Mixed), Reported Speech (Full), Modals of speculation/deduction, Reduced clauses, Nominalization, Cohesive devices.
  Skills: Complex academic texts, inference, interpretation, primary vs secondary ideas, advanced paraphrasing, logical arguments.`,General:`Level: B2+ (University Level).
  Grammar: Advanced Structure, Complex Sentences, Academic Vocabulary, Nuanced Grammar Points.
  Skills: Critical Reading, Logical Reasoning, Argument Analysis, Advanced Comprehension.`},V7=async n=>{try{const e="gemini-2.5-flash",t=sE[n]||sE.General,a=`Generate a comprehensive English Aptitude Assessment for Grade ${n}.
    Total 15 Multiple Choice Questions.
    
    Strictly follow this curriculum:
    ${t}
    
    Distribution:
    - 5 Questions: Grammar (Focus on the specific tenses/rules listed above). Tag as 'Grammar'.
    - 5 Questions: Vocabulary (Contextual usage appropriate for level). Tag as 'Vocabulary'.
    - 3 Questions: Reading Comprehension (Short passage approx 3-5 sentences). Tag as 'Reading'.
    - 2 Questions: Writing Mechanics (Punctuation, Structure, Linking words). Tag as 'Writing'.
    
    Ensure questions are varied and challenging for the level.
    The output must be JSON.
    Language: English (Questions and Options). Explanation should be in Arabic for better student understanding.
    `,u=(await L7.models.generateContent({model:e,contents:a,config:{responseMimeType:"application/json",responseSchema:{type:vn.ARRAY,items:{type:vn.OBJECT,properties:{id:{type:vn.INTEGER},question:{type:vn.STRING},options:{type:vn.ARRAY,items:{type:vn.STRING}},correctAnswer:{type:vn.INTEGER},explanation:{type:vn.STRING},skill:{type:vn.STRING,enum:["Grammar","Vocabulary","Reading","Writing"]},passageContent:{type:vn.STRING}},required:["id","question","options","correctAnswer","skill"]}}}})).text;return u?JSON.parse(u):[]}catch(e){throw console.error("Error generating aptitude test:",e),new Error("Failed to generate assessment.")}},U7=({onBack:n,onLoginRequest:e})=>{const{user:t}=is(),[s,a]=F.useState("SUBJECT_SELECT"),[l,u]=F.useState(""),[h,p]=F.useState(""),[m,v]=F.useState([]),[_,w]=F.useState(0),[S,V]=F.useState([]),[P,B]=F.useState(!1),[K,re]=F.useState(0),[$,ie]=F.useState(!1),[W,G]=F.useState(!1),[C,R]=F.useState(!1),[I,D]=F.useState(null);F.useEffect(()=>{window.scrollTo(0,0)},[s]),F.useEffect(()=>{if(s!=="TESTING")return;const J=()=>{re(fe=>{const Ee=fe+1;return Ee===1?ie(!0):Ee>=2&&(ie(!1),G(!0)),Ee})},O=()=>{document.hidden&&J()},ne=fe=>{(fe.key==="PrintScreen"||fe.ctrlKey&&fe.key==="p"||fe.metaKey&&fe.shiftKey)&&(fe.preventDefault(),J())};return document.addEventListener("visibilitychange",O),window.addEventListener("keydown",ne),()=>{document.removeEventListener("visibilitychange",O),window.removeEventListener("keydown",ne)}},[s]);const j=J=>{if(!t){e();return}u(J),a("GRADE_SELECT")},U=async J=>{p(J),a("TESTING"),B(!0),re(0);try{const O=await V7(J);v(O),V(new Array(O.length).fill(-1))}catch(O){console.error(O),alert("       "),a("GRADE_SELECT")}finally{B(!1)}},M=J=>{const O=[...S];O[_]=J,V(O),setTimeout(()=>{_<m.length-1?w(ne=>ne+1):ee(O)},400)},Fe=()=>{R(!1),a("GRADE_SELECT")},$e=()=>{G(!1),a("GRADE_SELECT")},ee=async J=>{a("ANALYZING");const O={Grammar:{correct:0,total:0},Vocabulary:{correct:0,total:0},Reading:{correct:0,total:0},Writing:{correct:0,total:0}};let ne=0;m.forEach((Oe,ut)=>{const it=J[ut]===Oe.correctAnswer;it&&ne++;const Ht=Oe.skill||"Grammar";O[Ht]&&(O[Ht].total++,it&&O[Ht].correct++)});const fe={Grammar:O.Grammar.total?Math.round(O.Grammar.correct/O.Grammar.total*100):0,Vocabulary:O.Vocabulary.total?Math.round(O.Vocabulary.correct/O.Vocabulary.total*100):0,Reading:O.Reading.total?Math.round(O.Reading.correct/O.Reading.total*100):0,Writing:O.Writing.total?Math.round(O.Writing.correct/O.Writing.total*100):0},Ee=[],je=[],nt=[];Object.entries(fe).forEach(([Oe,ut])=>{ut>=75?Ee.push(Oe):ut<50&&(je.push(Oe),Oe==="Grammar"&&nt.push("     ."),Oe==="Vocabulary"&&nt.push("       ."),Oe==="Reading"&&nt.push("      ."),Oe==="Writing"&&nt.push("      ."))}),je.length===0&&nt.push(" !     .");const Ie=Math.round(ne/m.length*100),Ct={id:Date.now().toString(),date:new Date().toISOString(),subject:l,grade:h,score:Ie,totalQuestions:m.length,skillsAnalysis:fe,strengths:Ee,weaknesses:je,recommendations:nt};if(D(Ct),t)try{const Oe=er(at,"users",t.uid);await bf(Oe,{aptitudeResults:sD(Ct)})}catch(Oe){console.error("Error saving aptitude result:",Oe)}setTimeout(()=>{a("RESULT")},2e3)},pe=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:" "}),o.jsx("p",{className:"text-gray-400",children:"      "})]}),o.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.jsxs("button",{onClick:()=>j("English"),className:"bg-gray-900 border-2 border-emerald-500/50 p-6 rounded-3xl hover:scale-[1.02] transition-all group relative overflow-hidden flex flex-col items-center justify-center",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/10 rounded-full -mr-10 -mt-10 group-hover:bg-emerald-500/20 transition-colors"}),o.jsx("div",{className:"w-20 h-20 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-4 text-emerald-400",children:o.jsx(Bg,{className:"w-10 h-10"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"English Language"})]})})]}),he=()=>o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in-up",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-3",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[[9,10,11,12].map(J=>o.jsxs("button",{onClick:()=>U(J.toString()),className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 flex items-center justify-center text-blue-400 group-hover:bg-blue-900/30 transition-colors",children:o.jsx(oi,{className:"w-6 h-6"})}),o.jsxs("span",{className:"font-black text-xl text-white",children:[" ",J]})]}),o.jsx(Lt,{className:"w-5 h-5 text-gray-600 group-hover:text-white transform group-hover:translate-x-1 transition-all"})]},J)),o.jsxs("button",{onClick:()=>U("General"),className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-indigo-900 to-purple-900 p-6 rounded-2xl border border-indigo-500/50 hover:border-indigo-400 hover:shadow-lg transition-all group flex items-center justify-between relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),o.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-white/10 flex items-center justify-center text-white shadow-inner",children:o.jsx(vl,{className:"w-7 h-7"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"font-black text-xl text-white",children:"  "}),o.jsx("p",{className:"text-xs text-indigo-200 mt-1",children:"  (  B2+)"})]})]}),o.jsx(Lt,{className:"w-5 h-5 text-white transform group-hover:translate-x-1 transition-all relative z-10"})]}),o.jsxs("div",{className:"col-span-1 sm:col-span-2 mt-4 pt-4 border-t border-white/5",children:[o.jsx("p",{className:"text-center text-xs text-gray-500 mb-4",children:" "}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[5,6,7,8].map(J=>o.jsx("button",{onClick:()=>U(J.toString()),className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800 hover:border-gray-600 transition-all text-center",children:o.jsxs("span",{className:"font-bold text-gray-400 text-sm",children:[" ",J]})},J))})]})]})]}),Pe=()=>{if(P)return o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-6 relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-500/30 border-t-emerald-500 animate-spin"}),o.jsx(vl,{className:"w-10 h-10 text-emerald-400 animate-pulse"})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"    "}),o.jsx("p",{className:"text-gray-400 text-sm max-w-xs mx-auto mb-2",children:"      ..."}),o.jsx("p",{className:"text-xs text-emerald-500/80 font-medium bg-emerald-900/10 px-3 py-1 rounded-full animate-pulse",children:"      "})]});const J=m[_],O=(_+1)/m.length*100;return o.jsxs("div",{className:"fixed inset-0 bg-gray-950 z-50 flex flex-col select-none",style:{userSelect:"none"},children:[$&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-500 rounded-2xl p-6 max-w-sm text-center shadow-2xl",children:[o.jsx(ng,{className:"w-16 h-16 mx-auto text-red-200 mb-4"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" !"}),o.jsx("p",{className:"text-red-100 text-sm mb-6",children:"          ."}),o.jsx("button",{onClick:()=>ie(!1),className:"bg-white text-red-900 px-6 py-2 rounded-lg font-bold w-full",children:""})]})}),W&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/90 backdrop-blur-xl",children:o.jsxs("div",{className:"bg-gray-900 border-2 border-red-600 rounded-3xl p-8 max-w-sm text-center shadow-2xl",children:[o.jsx("div",{className:"w-20 h-20 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-600",children:o.jsx(ng,{className:"w-10 h-10 text-red-500"})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"   "}),o.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"      ."}),o.jsx("button",{onClick:$e,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-xl font-bold w-full transition-colors",children:" "})]})}),C&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-6 max-w-sm text-center shadow-xl",children:[o.jsx(ig,{className:"w-12 h-12 mx-auto text-yellow-500 mb-4"}),o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"     ."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Fe,className:"flex-1 bg-red-600 text-white py-2 rounded-lg font-bold",children:" "}),o.jsx("button",{onClick:()=>R(!1),className:"flex-1 bg-gray-700 text-white py-2 rounded-lg font-bold",children:""})]})]})}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(su,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-mono text-sm bg-emerald-900/20 px-4 py-1.5 rounded-full border border-emerald-900/50",children:[o.jsx(Hh,{className:"w-4 h-4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[_+1," / ",m.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${O}%`}})})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center p-6 overflow-y-auto max-w-3xl mx-auto w-full",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:"ltr",children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:["  - ",l]}),o.jsx("div",{className:"bg-blue-900/30 p-1.5 rounded-lg shadow-sm border border-blue-800/50",children:o.jsx("span",{className:"text-xs font-bold text-blue-300 px-2",children:J.skill||"General"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[J.passageContent&&o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"bg-blue-900/20 p-5 rounded-2xl border border-blue-800 text-left max-h-[35vh] overflow-y-auto custom-scrollbar",children:o.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-medium text-base leading-relaxed break-words",children:J.passageContent})})}),o.jsx("h3",{className:"text-lg md:text-2xl font-black text-white leading-relaxed mb-8 text-left break-words",children:J.question}),o.jsx("div",{className:"space-y-3",dir:"ltr",children:J.options.map((ne,fe)=>o.jsxs("button",{onClick:()=>M(fe),className:`w-full p-4 rounded-xl border-2 text-left font-medium transition-all hover:scale-[1.01] active:scale-[0.99] flex items-center justify-between group ${S[_]===fe?"border-emerald-500 bg-emerald-900/30 text-emerald-100 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 text-gray-300 shadow-sm"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("span",{className:`inline-flex w-8 h-8 rounded-full border-2 text-sm font-bold items-center justify-center shrink-0 transition-colors ${S[_]===fe?"border-emerald-500 bg-emerald-600 text-white":"border-gray-600 text-gray-500 group-hover:border-gray-400"}`,children:String.fromCharCode(65+fe)}),o.jsx("span",{className:"break-words",children:ne})]}),S[_]===fe&&o.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full shadow-sm animate-fade-in shrink-0"})]},fe))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end opacity-50 pointer-events-none",children:o.jsxs("button",{className:"bg-gray-800 text-gray-500 px-6 py-3 rounded-xl font-bold flex items-center gap-2",children:["  ",o.jsx(Lt,{className:"w-4 h-4"})]})})]})]})},Re=()=>o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"mb-8 relative",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full animate-pulse"}),o.jsx(KA,{className:"w-20 h-20 text-blue-400 relative z-10 animate-bounce"})]}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"    ..."})]}),q=()=>I?o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in pb-20",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"inline-block p-6 rounded-full bg-gray-800 border border-gray-700 mb-4 shadow-lg",children:o.jsxs("div",{className:`text-5xl font-black ${I.score>=75?"text-emerald-400":I.score>=50?"text-yellow-400":"text-red-400"}`,children:[I.score,"%"]})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Object.entries(I.skillsAnalysis).map(([J,O],ne)=>{const fe=O;return o.jsxs("div",{className:"bg-gray-900 p-5 rounded-2xl border border-gray-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-gray-300 font-bold",children:J}),o.jsxs("span",{className:`text-sm font-black ${fe>=70?"text-green-400":fe>=40?"text-yellow-400":"text-red-400"}`,children:[fe,"%"]})]}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:o.jsx("div",{className:`h-full rounded-full ${fe>=70?"bg-green-500":fe>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${fe}%`}})})]},ne)})}),o.jsxs("div",{className:"space-y-6",children:[I.strengths.length>0&&o.jsxs("div",{className:"bg-emerald-900/10 border border-emerald-500/20 p-6 rounded-2xl",children:[o.jsxs("h3",{className:"font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[o.jsx(II,{className:"w-5 h-5"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:I.strengths.map((J,O)=>o.jsx("span",{className:"bg-emerald-900/40 text-emerald-200 px-3 py-1 rounded-lg text-sm font-medium border border-emerald-500/30",children:J},O))})]}),I.recommendations.length>0&&o.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-2xl shadow-lg",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Kg,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsx("ul",{className:"space-y-3",children:I.recommendations.map((J,O)=>o.jsxs("li",{className:"flex items-start gap-3 text-gray-300 text-sm leading-relaxed bg-gray-800 p-3 rounded-xl border border-gray-700",children:[o.jsx(ig,{className:"w-4 h-4 text-yellow-500 shrink-0 mt-0.5"}),J]},O))})]})]}),o.jsx("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl mt-8 shadow-lg transition-all",children:"  "})]}):null;return o.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100",children:[s!=="TESTING"&&o.jsxs("div",{className:"p-4 flex items-center justify-between bg-gray-900/50 backdrop-blur-md sticky top-0 z-30 border-b border-white/5",children:[o.jsx("button",{onClick:n,className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white",children:o.jsx(Lt,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold text-sm text-gray-300",children:s==="SUBJECT_SELECT"?" ":s==="GRADE_SELECT"?" ":""}),o.jsx("div",{className:"w-9"})]}),s==="SUBJECT_SELECT"&&pe(),s==="GRADE_SELECT"&&he(),s==="TESTING"&&Pe(),s==="ANALYZING"&&Re(),s==="RESULT"&&q()]})},O7=({onNavigate:n,onLoginRequest:e})=>{const{user:t}=is(),s=()=>{t?n("APTITUDE_TEST"):e()};return o.jsx("section",{className:"py-20 bg-gray-950 relative overflow-hidden border-t border-white/5",children:o.jsx("div",{className:"max-w-5xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 backdrop-blur-md rounded-[3rem] p-8 md:p-12 border border-indigo-500/20 shadow-2xl flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-[100px] -mr-20 -mt-20 group-hover:bg-indigo-600/30 transition-colors"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[100px] -ml-20 -mb-20 group-hover:bg-purple-600/30 transition-colors"}),o.jsxs("div",{className:"flex-1 text-center md:text-right",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-sm font-bold mb-6",children:[o.jsx(vl,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6 leading-tight",children:["  ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:""})]}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed font-medium mb-8",children:"                          ."}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:o.jsxs("button",{onClick:s,className:"bg-white text-indigo-950 px-8 py-4 rounded-2xl font-black text-lg hover:bg-indigo-50 transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2 group/btn",children:["  ",o.jsx(Er,{className:"w-5 h-5 group-hover/btn:-translate-x-1 transition-transform"})]})})]}),o.jsx("div",{className:"w-full md:w-1/3 flex justify-center relative",children:o.jsxs("div",{className:"relative w-64 h-64",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full opacity-20 blur-2xl animate-pulse"}),o.jsxs("div",{className:"relative bg-gray-900 rounded-3xl border border-indigo-500/30 p-6 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-all duration-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx(si,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(si,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(si,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),o.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-1 rounded",children:" "})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-3/4"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-full"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-5/6"})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx(vl,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:" "}),o.jsx("div",{className:"text-sm font-bold text-white",children:" "})]})]})]})]})})]})})})};function q7(){const[n,e]=F.useState("HOME"),[t,s]=F.useState(!1),[a,l]=F.useState(!1),[u,h]=F.useState(!1),p=F.useRef({}),m=F.useRef(!1),{logout:v}=is();F.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const S=V=>{if(u){window.history.pushState({view:n},"",""),alert("    .    .");return}V.state&&V.state.view?(m.current=!0,e(V.state.view)):(m.current=!0,e("HOME"))};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[u,n]),F.useEffect(()=>{if(m.current){const S=p.current[n]||0;setTimeout(()=>window.scrollTo(0,S),0)}else window.scrollTo(0,0)},[n]);const _=S=>{S!==n&&(p.current[n]=window.scrollY,m.current=!1,window.history.pushState({view:S},"",""),e(S))},w=async()=>{l(!0),setTimeout(async()=>{await v(),l(!1),_("HOME")},1e3)};return o.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[n==="HOME"&&o.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[o.jsx(d2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),a&&o.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:o.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx(AP,{onLoginClick:()=>s(!0),onNavigate:_,onLogoutClick:w,isNavRestricted:u}),o.jsxs("main",{className:"flex-grow",children:[n==="HOME"&&o.jsxs(o.Fragment,{children:[o.jsx(CP,{onStartQuiz:()=>_("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:_}),o.jsx(RP,{onNavigate:_}),o.jsx(ij,{}),o.jsx(HP,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(O7,{onNavigate:_,onLoginRequest:()=>s(!0)}),o.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),o.jsx(nj,{}),o.jsx(sj,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(rj,{}),o.jsx(tj,{})]}),n==="ABOUT_PLATFORM"&&o.jsx(zP,{onBack:()=>_("HOME")}),n==="PLATFORM_DEFINITION"&&o.jsx(aj,{onBack:()=>_("HOME")}),n==="SERVICES"&&o.jsx(FP,{onBack:()=>_("HOME")}),n==="TEACHER_CV"&&o.jsx(qP,{onBack:()=>_("HOME")}),n==="PROFILE"&&o.jsx(jP,{onNavigate:_}),n==="TEACHER_DASHBOARD"&&o.jsx(MP,{}),n==="QUESTION_BANK"&&o.jsx($P,{onBack:()=>_("HOME")}),n==="TEACHER_EXPLANATIONS"&&o.jsx(JP,{onNavigate:_,onBack:()=>_("PROFILE")}),n==="TEACHER_UPLOAD_FILES"&&o.jsx(ZP,{onNavigate:_,onBack:()=>_("PROFILE")}),n==="TEACHER_FEEDBACK"&&o.jsx(ej,{onNavigate:_}),n==="QUIZZES"&&o.jsx(VP,{onBack:()=>_("HOME"),setNavRestricted:h}),n==="LESSONS"&&o.jsx(GP,{onBack:()=>_("HOME")}),n==="LESSONS_EXPLANATIONS"&&o.jsx(YP,{onBack:()=>_("HOME")}),n==="CONTACT_TEACHER"&&o.jsx(BP,{onBack:()=>_("HOME")}),n==="APTITUDE_TEST"&&o.jsx(U7,{onBack:()=>_("HOME"),onLoginRequest:()=>s(!0)})]}),o.jsx(kP,{isOpen:t,onClose:()=>s(!1)}),o.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),o.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const O2=document.getElementById("root");if(!O2)throw new Error("Could not find root element to mount to");const z7=SA.createRoot(O2);z7.render(o.jsx(iE.StrictMode,{children:o.jsx(SP,{children:o.jsx(q7,{})})}));
