(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function S2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zg={exports:{}},bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function gT(){if(Jv)return bu;Jv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return bu.Fragment=e,bu.jsx=t,bu.jsxs=t,bu}var Wv;function pT(){return Wv||(Wv=1,zg.exports=gT()),zg.exports}var i=pT(),Ug={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function xT(){if(Zv)return Be;Zv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=N&&D[N]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,B={};function ge(D,U,L){this.props=D,this.context=U,this.refs=B,this.updater=L||V}ge.prototype.isReactComponent={},ge.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},ge.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ae(){}ae.prototype=ge.prototype;function ne(D,U,L){this.props=D,this.context=U,this.refs=B,this.updater=L||V}var xe=ne.prototype=new ae;xe.constructor=ne,Z(xe,ge.prototype),xe.isPureReactComponent=!0;var re=Array.isArray;function le(){}var E={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function A(D,U,L){var Y=L.ref;return{$$typeof:r,type:D,key:U,ref:Y!==void 0?Y:null,props:L}}function R(D,U){return A(D.type,U,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function P(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(L){return U[L]})}var I=/\/+/g;function fe(D,U){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):U.toString(36)}function Ae(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(le,le):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,U,L,Y,he){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var Re=!1;if(D===null)Re=!0;else switch(Ee){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(D.$$typeof){case r:case e:Re=!0;break;case v:return Re=D._init,G(Re(D._payload),U,L,Y,he)}}if(Re)return he=he(D),Re=Y===""?"."+fe(D,0):Y,re(he)?(L="",Re!=null&&(L=Re.replace(I,"$&/")+"/"),G(he,U,L,"",function(We){return We})):he!=null&&(k(he)&&(he=R(he,L+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(I,"$&/")+"/")+Re)),U.push(he)),1;Re=0;var qe=Y===""?".":Y+":";if(re(D))for(var Ie=0;Ie<D.length;Ie++)Y=D[Ie],Ee=qe+fe(Y,Ie),Re+=G(Y,U,L,Ee,he);else if(Ie=C(D),typeof Ie=="function")for(D=Ie.call(D),Ie=0;!(Y=D.next()).done;)Y=Y.value,Ee=qe+fe(Y,Ie++),Re+=G(Y,U,L,Ee,he);else if(Ee==="object"){if(typeof D.then=="function")return G(Ae(D),U,L,Y,he);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Re}function ce(D,U,L){if(D==null)return D;var Y=[],he=0;return G(D,Y,"","",function(Ee){return U.call(L,Ee,he++)}),Y}function W(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(L){(D._status===0||D._status===-1)&&(D._status=1,D._result=L)},function(L){(D._status===0||D._status===-1)&&(D._status=2,D._result=L)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var $=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},we={map:ce,forEach:function(D,U,L){ce(D,function(){U.apply(this,arguments)},L)},count:function(D){var U=0;return ce(D,function(){U++}),U},toArray:function(D){return ce(D,function(U){return U})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Be.Activity=w,Be.Children=we,Be.Component=ge,Be.Fragment=t,Be.Profiler=l,Be.PureComponent=ne,Be.StrictMode=s,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return E.H.useMemoCache(D)}},Be.cache=function(D){return function(){return D.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(D,U,L){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Y=Z({},D.props),he=D.key;if(U!=null)for(Ee in U.key!==void 0&&(he=""+U.key),U)!T.call(U,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&U.ref===void 0||(Y[Ee]=U[Ee]);var Ee=arguments.length-2;if(Ee===1)Y.children=L;else if(1<Ee){for(var Re=Array(Ee),qe=0;qe<Ee;qe++)Re[qe]=arguments[qe+2];Y.children=Re}return A(D.type,he,Y)},Be.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Be.createElement=function(D,U,L){var Y,he={},Ee=null;if(U!=null)for(Y in U.key!==void 0&&(Ee=""+U.key),U)T.call(U,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(he[Y]=U[Y]);var Re=arguments.length-2;if(Re===1)he.children=L;else if(1<Re){for(var qe=Array(Re),Ie=0;Ie<Re;Ie++)qe[Ie]=arguments[Ie+2];he.children=qe}if(D&&D.defaultProps)for(Y in Re=D.defaultProps,Re)he[Y]===void 0&&(he[Y]=Re[Y]);return A(D,Ee,he)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:f,render:D}},Be.isValidElement=k,Be.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:W}},Be.memo=function(D,U){return{$$typeof:x,type:D,compare:U===void 0?null:U}},Be.startTransition=function(D){var U=E.T,L={};E.T=L;try{var Y=D(),he=E.S;he!==null&&he(L,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(le,$)}catch(Ee){$(Ee)}finally{U!==null&&L.types!==null&&(U.types=L.types),E.T=U}},Be.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Be.use=function(D){return E.H.use(D)},Be.useActionState=function(D,U,L){return E.H.useActionState(D,U,L)},Be.useCallback=function(D,U){return E.H.useCallback(D,U)},Be.useContext=function(D){return E.H.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D,U){return E.H.useDeferredValue(D,U)},Be.useEffect=function(D,U){return E.H.useEffect(D,U)},Be.useEffectEvent=function(D){return E.H.useEffectEvent(D)},Be.useId=function(){return E.H.useId()},Be.useImperativeHandle=function(D,U,L){return E.H.useImperativeHandle(D,U,L)},Be.useInsertionEffect=function(D,U){return E.H.useInsertionEffect(D,U)},Be.useLayoutEffect=function(D,U){return E.H.useLayoutEffect(D,U)},Be.useMemo=function(D,U){return E.H.useMemo(D,U)},Be.useOptimistic=function(D,U){return E.H.useOptimistic(D,U)},Be.useReducer=function(D,U,L){return E.H.useReducer(D,U,L)},Be.useRef=function(D){return E.H.useRef(D)},Be.useState=function(D){return E.H.useState(D)},Be.useSyncExternalStore=function(D,U,L){return E.H.useSyncExternalStore(D,U,L)},Be.useTransition=function(){return E.H.useTransition()},Be.version="19.2.0",Be}var ew;function lx(){return ew||(ew=1,Ug.exports=xT()),Ug.exports}var M=lx();const A2=S2(M);var Bg={exports:{}},vu={},qg={exports:{}},Fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function yT(){return tw||(tw=1,(function(r){function e(G,ce){var W=G.length;G.push(ce);e:for(;0<W;){var $=W-1>>>1,we=G[$];if(0<l(we,ce))G[$]=ce,G[W]=we,W=$;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ce=G[0],W=G.pop();if(W!==ce){G[0]=W;e:for(var $=0,we=G.length,D=we>>>1;$<D;){var U=2*($+1)-1,L=G[U],Y=U+1,he=G[Y];if(0>l(L,W))Y<we&&0>l(he,L)?(G[$]=he,G[Y]=W,$=Y):(G[$]=L,G[U]=W,$=U);else if(Y<we&&0>l(he,W))G[$]=he,G[Y]=W,$=Y;else break e}}return ce}function l(G,ce){var W=G.sortIndex-ce.sortIndex;return W!==0?W:G.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],v=1,w=null,N=3,C=!1,V=!1,Z=!1,B=!1,ge=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function xe(G){for(var ce=t(x);ce!==null;){if(ce.callback===null)s(x);else if(ce.startTime<=G)s(x),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(x)}}function re(G){if(Z=!1,xe(G),!V)if(t(g)!==null)V=!0,le||(le=!0,P());else{var ce=t(x);ce!==null&&Ae(re,ce.startTime-G)}}var le=!1,E=-1,T=5,A=-1;function R(){return B?!0:!(r.unstable_now()-A<T)}function k(){if(B=!1,le){var G=r.unstable_now();A=G;var ce=!0;try{e:{V=!1,Z&&(Z=!1,ae(E),E=-1),C=!0;var W=N;try{t:{for(xe(G),w=t(g);w!==null&&!(w.expirationTime>G&&R());){var $=w.callback;if(typeof $=="function"){w.callback=null,N=w.priorityLevel;var we=$(w.expirationTime<=G);if(G=r.unstable_now(),typeof we=="function"){w.callback=we,xe(G),ce=!0;break t}w===t(g)&&s(g),xe(G)}else s(g);w=t(g)}if(w!==null)ce=!0;else{var D=t(x);D!==null&&Ae(re,D.startTime-G),ce=!1}}break e}finally{w=null,N=W,C=!1}ce=void 0}}finally{ce?P():le=!1}}}var P;if(typeof ne=="function")P=function(){ne(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,fe=I.port2;I.port1.onmessage=k,P=function(){fe.postMessage(null)}}else P=function(){ge(k,0)};function Ae(G,ce){E=ge(function(){G(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(G){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var W=N;N=ce;try{return G()}finally{N=W}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=N;N=G;try{return ce()}finally{N=W}},r.unstable_scheduleCallback=function(G,ce,W){var $=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?$+W:$):W=$,G){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=W+we,G={id:v++,callback:ce,priorityLevel:G,startTime:W,expirationTime:we,sortIndex:-1},W>$?(G.sortIndex=W,e(x,G),t(g)===null&&G===t(x)&&(Z?(ae(E),E=-1):Z=!0,Ae(re,W-$))):(G.sortIndex=we,e(g,G),V||C||(V=!0,le||(le=!0,P()))),G},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(G){var ce=N;return function(){var W=N;N=ce;try{return G.apply(this,arguments)}finally{N=W}}}})(Fg)),Fg}var nw;function bT(){return nw||(nw=1,qg.exports=yT()),qg.exports}var Hg={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function vT(){if(sw)return Vn;sw=1;var r=lx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vn.createPortal=function(g,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,v)},Vn.flushSync=function(g){var x=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=v,s.d.f()}},Vn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},Vn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Vn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Vn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},Vn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Vn.preloadModule=function(g,x){if(typeof g=="string")if(x){var v=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},Vn.requestFormReset=function(g){s.d.r(g)},Vn.unstable_batchedUpdates=function(g,x){return g(x)},Vn.useFormState=function(g,x,v){return d.H.useFormState(g,x,v)},Vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var rw;function wT(){if(rw)return Hg.exports;rw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hg.exports=vT(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function _T(){if(aw)return vu;aw=1;var r=bT(),e=lx(),t=wT();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,j=m.child;j;){if(j===o){b=!0,o=m,u=p;break}if(j===u){b=!0,u=m,o=p;break}j=j.sibling}if(!b){for(j=p.child;j;){if(j===o){b=!0,o=p,u=m;break}if(j===u){b=!0,u=p,o=m;break}j=j.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function v(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=v(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function fe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case ge:return"Profiler";case B:return"StrictMode";case re:return"Suspense";case le:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case ne:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case xe:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return a=n.displayName||null,a!==null?a:fe(n.type)||"Memo";case T:a=n._payload,n=n._init;try{return fe(n(a))}catch{}}return null}var Ae=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},$=[],we=-1;function D(n){return{current:n}}function U(n){0>we||(n.current=$[we],$[we]=null,we--)}function L(n,a){we++,$[we]=n.current,n.current=a}var Y=D(null),he=D(null),Ee=D(null),Re=D(null);function qe(n,a){switch(L(Ee,a),L(he,n),L(Y,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?vv(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=vv(a),n=wv(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}U(Y),L(Y,n)}function Ie(){U(Y),U(he),U(Ee)}function We(n){n.memoizedState!==null&&L(Re,n);var a=Y.current,o=wv(a,n.type);a!==o&&(L(he,n),L(Y,o))}function st(n){he.current===n&&(U(Y),U(he)),Re.current===n&&(U(Re),gu._currentValue=W)}var jt,rt;function Tn(n){if(jt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);jt=a&&a[1]||"",rt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jt+n+rt}var Ts=!1;function Ss(n,a){if(!n||Ts)return"";Ts=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var X=ee}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(ee){X=ee}n.call(oe.prototype)}}else{try{throw Error()}catch(ee){X=ee}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],j=p[1];if(b&&j){var O=b.split(`
`),Q=j.split(`
`);for(m=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===O.length||m===Q.length)for(u=O.length-1,m=Q.length-1;1<=u&&0<=m&&O[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(O[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||O[u]!==Q[m]){var se=`
`+O[u].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=u&&0<=m);break}}}finally{Ts=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Tn(o):""}function dr(n,a){switch(n.tag){case 26:case 27:case 5:return Tn(n.type);case 16:return Tn("Lazy");case 13:return n.child!==a&&a!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return Ss(n.type,!1);case 11:return Ss(n.type.render,!1);case 1:return Ss(n.type,!0);case 31:return Tn("Activity");default:return""}}function Sn(n){try{var a="",o=null;do a+=dr(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ct=Object.prototype.hasOwnProperty,qt=r.unstable_scheduleCallback,yn=r.unstable_cancelCallback,Ea=r.unstable_shouldYield,ja=r.unstable_requestPaint,Gt=r.unstable_now,Gs=r.unstable_getCurrentPriorityLevel,Fr=r.unstable_ImmediatePriority,As=r.unstable_UserBlockingPriority,bn=r.unstable_NormalPriority,Ta=r.unstable_LowPriority,Sa=r.unstable_IdlePriority,ue=r.log,ot=r.unstable_setDisableYieldValue,He=null,ct=null;function nn(n){if(typeof ue=="function"&&ot(n),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(He,n)}catch{}}var yt=Math.clz32?Math.clz32:kt,$t=Math.log,Mn=Math.LN2;function kt(n){return n>>>=0,n===0?32:31-($t(n)/Mn|0)|0}var sn=256,An=262144,xt=4194304;function Fn(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function de(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var j=u&134217727;return j!==0?(u=j&~p,u!==0?m=Fn(u):(b&=j,b!==0?m=Fn(b):o||(o=j&~n,o!==0&&(m=Fn(o))))):(j=u&~p,j!==0?m=Fn(j):b!==0?m=Fn(b):o||(o=u&~n,o!==0&&(m=Fn(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Te(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function _e(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var n=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),n}function Ne(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function Me(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Fe(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var j=n.entanglements,O=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var se=31-yt(o),oe=1<<se;j[se]=0,O[se]=-1;var X=Q[se];if(X!==null)for(Q[se]=null,se=0;se<X.length;se++){var ee=X[se];ee!==null&&(ee.lane&=-536870913)}o&=~oe}u!==0&&ht(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function ht(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-yt(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function it(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-yt(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function Ot(n,a){var o=a&-a;return o=(o&42)!==0?1:vn(o),(o&(n.suspendedLanes|a))!==0?0:o}function vn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $s(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Od(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:Hv(n.type))}function Ks(n,a){var o=ce.p;try{return ce.p=n,a()}finally{ce.p=o}}var Qs=Math.random().toString(36).slice(2),rn="__reactFiber$"+Qs,wn="__reactProps$"+Qs,hr="__reactContainer$"+Qs,Pl="__reactEvents$"+Qs,Gm="__reactListeners$"+Qs,Md="__reactHandles$"+Qs,Vd="__reactResources$"+Qs,fr="__reactMarker$"+Qs;function Ll(n){delete n[rn],delete n[wn],delete n[Pl],delete n[Gm],delete n[Md]}function mr(n){var a=n[rn];if(a)return a;for(var o=n.parentNode;o;){if(a=o[hr]||o[rn]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=Av(n);n!==null;){if(o=n[rn])return o;n=Av(n)}return a}n=o,o=n.parentNode}return null}function Is(n){if(n=n[rn]||n[hr]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function ds(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function gr(n){var a=n[Vd];return a||(a=n[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function an(n){n[fr]=!0}var _c=new Set,Nc={};function pr(n,a){xr(n,a),xr(n+"Capture",a)}function xr(n,a){for(Nc[n]=a,n=0;n<a.length;n++)_c.add(a[n])}var Ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},Tc={};function Pd(n){return Ct.call(Tc,n)?!0:Ct.call(jc,n)?!1:Ec.test(n)?Tc[n]=!0:(jc[n]=!0,!1)}function zl(n,a,o){if(Pd(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function hs(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function ln(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Aa(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Sc(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function bt(n){if(!n._valueTracker){var a=Aa(n)?"checked":"value";n._valueTracker=Sc(n,a,""+n[a])}}function Mi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Aa(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function yr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vi=/[\n"\\]/g;function Zn(n){return n.replace(Vi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ul(n,a,o,u,m,p,b,j){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+_n(a)):n.value!==""+_n(a)&&(n.value=""+_n(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Ac(n,b,_n(a)):o!=null?Ac(n,b,_n(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+_n(j):n.removeAttribute("name")}function Ld(n,a,o,u,m,p,b,j){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){bt(n);return}o=o!=null?""+_n(o):"",a=a!=null?""+_n(a):o,j||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=j?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),bt(n)}function Ac(n,a,o){a==="number"&&yr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ia(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+_n(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function zd(n,a,o){if(a!=null&&(a=""+_n(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+_n(o):""}function Ca(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(Ae(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=_n(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),bt(n)}function es(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var Ud=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ic(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||Ud.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function Cc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Ic(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Ic(n,p,a[p])}function Bl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ra=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(n){return Ra.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ys(){}var Rc=null;function Cs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ka=null,br=null;function Pi(n){var a=Is(n);if(a&&(n=a.stateNode)){var o=n[wn]||null;e:switch(n=a.stateNode,a.type){case"input":if(Ul(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[wn]||null;if(!m)throw Error(s(90));Ul(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Mi(u)}break e;case"textarea":zd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Ia(n,!!o.multiple,a,!1)}}}var Fl=!1;function Da(n,a,o){if(Fl)return n(a,o);Fl=!0;try{var u=n(a);return u}finally{if(Fl=!1,(ka!==null||br!==null)&&(Oh(),ka&&(a=ka,n=br,br=ka=null,Pi(a),n)))for(a=0;a<n.length;a++)Pi(n[a])}}function Xs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[wn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Li=!1;if(Rs)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){Li=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{Li=!1}var vr=null,kc=null,zi=null;function Dc(){if(zi)return zi;var n,a=kc,o=a.length,u,m="value"in vr?vr.value:vr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return zi=m.slice(n,1<u?1-u:void 0)}function Ui(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Hr(){return!0}function Js(){return!1}function In(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(p):p[j]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Hr:Js,this.isPropagationStopped=Js,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),a}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=In(Gr),Oa=w({},Gr,{view:0,detail:0}),Oc=In(Oa),Ma,Hl,_r,Gl=w({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_r&&(_r&&n.type==="mousemove"?(Ma=n.screenX-_r.screenX,Hl=n.screenY-_r.screenY):Hl=Ma=0,_r=n),Ma)},movementY:function(n){return"movementY"in n?n.movementY:Hl}}),Mc=In(Gl),Bi=w({},Gl,{dataTransfer:0}),qd=In(Bi),Fd=w({},Oa,{relatedTarget:0}),qi=In(Fd),Vc=w({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=In(Vc),$l=w({},Gr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gd=In($l),$d=w({},Gr,{data:0}),Nr=In($d),Kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Yd[n])?!!a[n]:!1}function Va(){return Xd}var Hn=w({},Oa,{key:function(n){if(n.key){var a=Kd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Ui(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(n){return n.type==="keypress"?Ui(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ui(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Jd=In(Hn),Wd=w({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$r=In(Wd),h=w({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),y=In(h),_=w({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=In(_),H=w({},Gl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=In(H),be=w({},Gr,{newState:0,oldState:0}),Ge=In(be),Xt=[9,13,27,32],ft=Rs&&"CompositionEvent"in window,Lt=null;Rs&&"documentMode"in document&&(Lt=document.documentMode);var ks=Rs&&"TextEvent"in window&&!Lt,Er=Rs&&(!ft||Lt&&8<Lt&&11>=Lt),Ws=" ",Zs=!1;function Fi(n,a){switch(n){case"keyup":return Xt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ql=!1;function z5(n,a){switch(n){case"compositionend":return Kl(a);case"keypress":return a.which!==32?null:(Zs=!0,Ws);case"textInput":return n=a.data,n===Ws&&Zs?null:n;default:return null}}function U5(n,a){if(Ql)return n==="compositionend"||!ft&&Fi(n,a)?(n=Dc(),zi=kc=vr=null,Ql=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Er&&a.locale!=="ko"?null:a.data;default:return null}}var B5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!B5[n.type]:a==="textarea"}function ky(n,a,o,u){ka?br?br.push(u):br=[u]:ka=u,a=Bh(a,"onChange"),0<a.length&&(o=new wr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Pc=null,Lc=null;function q5(n){mv(n,0)}function Zd(n){var a=ds(n);if(Mi(a))return n}function Dy(n,a){if(n==="change")return a}var Oy=!1;if(Rs){var $m;if(Rs){var Km="oninput"in document;if(!Km){var My=document.createElement("div");My.setAttribute("oninput","return;"),Km=typeof My.oninput=="function"}$m=Km}else $m=!1;Oy=$m&&(!document.documentMode||9<document.documentMode)}function Vy(){Pc&&(Pc.detachEvent("onpropertychange",Py),Lc=Pc=null)}function Py(n){if(n.propertyName==="value"&&Zd(Lc)){var a=[];ky(a,Lc,n,Cs(n)),Da(q5,a)}}function F5(n,a,o){n==="focusin"?(Vy(),Pc=a,Lc=o,Pc.attachEvent("onpropertychange",Py)):n==="focusout"&&Vy()}function H5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zd(Lc)}function G5(n,a){if(n==="click")return Zd(a)}function $5(n,a){if(n==="input"||n==="change")return Zd(a)}function K5(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var fs=typeof Object.is=="function"?Object.is:K5;function zc(n,a){if(fs(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ct.call(a,m)||!fs(n[m],a[m]))return!1}return!0}function Ly(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zy(n,a){var o=Ly(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ly(o)}}function Uy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Uy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function By(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=yr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=yr(n.document)}return a}function Qm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var Q5=Rs&&"documentMode"in document&&11>=document.documentMode,Yl=null,Ym=null,Uc=null,Xm=!1;function qy(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xm||Yl==null||Yl!==yr(u)||(u=Yl,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Uc&&zc(Uc,u)||(Uc=u,u=Bh(Ym,"onSelect"),0<u.length&&(a=new wr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Yl)))}function Hi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Xl={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Jm={},Fy={};Rs&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Gi(n){if(Jm[n])return Jm[n];if(!Xl[n])return n;var a=Xl[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in Fy)return Jm[n]=a[o];return n}var Hy=Gi("animationend"),Gy=Gi("animationiteration"),$y=Gi("animationstart"),Y5=Gi("transitionrun"),X5=Gi("transitionstart"),J5=Gi("transitioncancel"),Ky=Gi("transitionend"),Qy=new Map,Wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wm.push("scrollEnd");function er(n,a){Qy.set(n,a),pr(a,[n])}var eh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ds=[],Jl=0,Zm=0;function th(){for(var n=Jl,a=Zm=Jl=0;a<n;){var o=Ds[a];Ds[a++]=null;var u=Ds[a];Ds[a++]=null;var m=Ds[a];Ds[a++]=null;var p=Ds[a];if(Ds[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Yy(o,m,p)}}function nh(n,a,o,u){Ds[Jl++]=n,Ds[Jl++]=a,Ds[Jl++]=o,Ds[Jl++]=u,Zm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function e0(n,a,o,u){return nh(n,a,o,u),sh(n)}function $i(n,a){return nh(n,null,null,a),sh(n)}function Yy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-yt(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function sh(n){if(50<ou)throw ou=0,cg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Wl={};function W5(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,a,o,u){return new W5(n,a,o,u)}function t0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Kr(n,a){var o=n.alternate;return o===null?(o=ms(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Xy(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function rh(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")t0(n)&&(b=1);else if(typeof n=="string")b=sT(n,o,Y.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=ms(31,o,a,m),n.elementType=A,n.lanes=p,n;case Z:return Ki(o.children,m,p,a);case B:b=8,m|=24;break;case ge:return n=ms(12,o,a,m|2),n.elementType=ge,n.lanes=p,n;case re:return n=ms(13,o,a,m),n.elementType=re,n.lanes=p,n;case le:return n=ms(19,o,a,m),n.elementType=le,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:b=10;break e;case ae:b=9;break e;case xe:b=11;break e;case E:b=14;break e;case T:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=ms(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function Ki(n,a,o,u){return n=ms(7,n,u,a),n.lanes=o,n}function n0(n,a,o){return n=ms(6,n,null,a),n.lanes=o,n}function Jy(n){var a=ms(18,null,null,0);return a.stateNode=n,a}function s0(n,a,o){return a=ms(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Wy=new WeakMap;function Os(n,a){if(typeof n=="object"&&n!==null){var o=Wy.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Sn(a)},Wy.set(n,a),a)}return{value:n,source:a,stack:Sn(a)}}var Zl=[],eo=0,ah=null,Bc=0,Ms=[],Vs=0,Pa=null,jr=1,Tr="";function Qr(n,a){Zl[eo++]=Bc,Zl[eo++]=ah,ah=n,Bc=a}function Zy(n,a,o){Ms[Vs++]=jr,Ms[Vs++]=Tr,Ms[Vs++]=Pa,Pa=n;var u=jr;n=Tr;var m=32-yt(u)-1;u&=~(1<<m),o+=1;var p=32-yt(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,jr=1<<32-yt(a)+m|o<<m|u,Tr=p+n}else jr=1<<p|o<<m|u,Tr=n}function r0(n){n.return!==null&&(Qr(n,1),Zy(n,1,0))}function a0(n){for(;n===ah;)ah=Zl[--eo],Zl[eo]=null,Bc=Zl[--eo],Zl[eo]=null;for(;n===Pa;)Pa=Ms[--Vs],Ms[Vs]=null,Tr=Ms[--Vs],Ms[Vs]=null,jr=Ms[--Vs],Ms[Vs]=null}function eb(n,a){Ms[Vs++]=jr,Ms[Vs++]=Tr,Ms[Vs++]=Pa,jr=a.id,Tr=a.overflow,Pa=n}var Cn=null,Mt=null,at=!1,La=null,Ps=!1,i0=Error(s(519));function za(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qc(Os(a,n)),i0}function tb(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[rn]=n,a[wn]=u,o){case"dialog":Je("cancel",a),Je("close",a);break;case"iframe":case"object":case"embed":Je("load",a);break;case"video":case"audio":for(o=0;o<uu.length;o++)Je(uu[o],a);break;case"source":Je("error",a);break;case"img":case"image":case"link":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"input":Je("invalid",a),Ld(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",a);break;case"textarea":Je("invalid",a),Ca(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||yv(a.textContent,o)?(u.popover!=null&&(Je("beforetoggle",a),Je("toggle",a)),u.onScroll!=null&&Je("scroll",a),u.onScrollEnd!=null&&Je("scrollend",a),u.onClick!=null&&(a.onclick=Ys),a=!0):a=!1,a||za(n,!0)}function nb(n){for(Cn=n.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:Cn=Cn.return}}function to(n){if(n!==Cn)return!1;if(!at)return nb(n),at=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Eg(n.type,n.memoizedProps)),o=!o),o&&Mt&&za(n),nb(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Mt=Sv(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Mt=Sv(n)}else a===27?(a=Mt,Za(n.type)?(n=Ig,Ig=null,Mt=n):Mt=a):Mt=Cn?zs(n.stateNode.nextSibling):null;return!0}function Qi(){Mt=Cn=null,at=!1}function l0(){var n=La;return n!==null&&(rs===null?rs=n:rs.push.apply(rs,n),La=null),n}function qc(n){La===null?La=[n]:La.push(n)}var o0=D(null),Yi=null,Yr=null;function Ua(n,a,o){L(o0,a._currentValue),a._currentValue=o}function Xr(n){n._currentValue=o0.current,U(o0)}function c0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function u0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var j=p;p=m;for(var O=0;O<a.length;O++)if(j.context===a[O]){p.lanes|=o,j=p.alternate,j!==null&&(j.lanes|=o),c0(p.return,o,n),u||(b=null);break e}p=j.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),c0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function no(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var j=m.type;fs(m.pendingProps.value,b.value)||(n!==null?n.push(j):n=[j])}}else if(m===Re.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(gu):n=[gu])}m=m.return}n!==null&&u0(a,n,o,u),a.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!fs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xi(n){Yi=n,Yr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Rn(n){return sb(Yi,n)}function lh(n,a){return Yi===null&&Xi(n),sb(n,a)}function sb(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Yr===null){if(n===null)throw Error(s(308));Yr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Yr=Yr.next=a;return o}var Z5=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},ej=r.unstable_scheduleCallback,tj=r.unstable_NormalPriority,on={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function d0(){return{controller:new Z5,data:new Map,refCount:0}}function Fc(n){n.refCount--,n.refCount===0&&ej(tj,function(){n.controller.abort()})}var Hc=null,h0=0,so=0,ro=null;function nj(n,a){if(Hc===null){var o=Hc=[];h0=0,so=gg(),ro={status:"pending",value:void 0,then:function(u){o.push(u)}}}return h0++,a.then(rb,rb),a}function rb(){if(--h0===0&&Hc!==null){ro!==null&&(ro.status="fulfilled");var n=Hc;Hc=null,so=0,ro=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function sj(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ab=G.S;G.S=function(n,a){q1=Gt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&nj(n,a),ab!==null&&ab(n,a)};var Ji=D(null);function f0(){var n=Ji.current;return n!==null?n:Rt.pooledCache}function oh(n,a){a===null?L(Ji,Ji.current):L(Ji,a.pool)}function ib(){var n=f0();return n===null?null:{parent:on._currentValue,pool:n}}var ao=Error(s(460)),m0=Error(s(474)),ch=Error(s(542)),uh={then:function(){}};function lb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ob(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Ys,Ys),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ub(n),n;default:if(typeof a.status=="string")a.then(Ys,Ys);else{if(n=Rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ub(n),n}throw Zi=a,ao}}function Wi(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Zi=o,ao):o}}var Zi=null;function cb(){if(Zi===null)throw Error(s(459));var n=Zi;return Zi=null,n}function ub(n){if(n===ao||n===ch)throw Error(s(483))}var io=null,Gc=0;function dh(n){var a=Gc;return Gc+=1,io===null&&(io=[]),ob(io,n,a)}function $c(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function hh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function db(n){function a(q,z){if(n){var K=q.deletions;K===null?(q.deletions=[z],q.flags|=16):K.push(z)}}function o(q,z){if(!n)return null;for(;z!==null;)a(q,z),z=z.sibling;return null}function u(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function m(q,z){return q=Kr(q,z),q.index=0,q.sibling=null,q}function p(q,z,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<z?(q.flags|=67108866,z):K):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function j(q,z,K,ie){return z===null||z.tag!==6?(z=n0(K,q.mode,ie),z.return=q,z):(z=m(z,K),z.return=q,z)}function O(q,z,K,ie){var Ve=K.type;return Ve===Z?se(q,z,K.props.children,ie,K.key):z!==null&&(z.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===T&&Wi(Ve)===z.type)?(z=m(z,K.props),$c(z,K),z.return=q,z):(z=rh(K.type,K.key,K.props,null,q.mode,ie),$c(z,K),z.return=q,z)}function Q(q,z,K,ie){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=s0(K,q.mode,ie),z.return=q,z):(z=m(z,K.children||[]),z.return=q,z)}function se(q,z,K,ie,Ve){return z===null||z.tag!==7?(z=Ki(K,q.mode,ie,Ve),z.return=q,z):(z=m(z,K),z.return=q,z)}function oe(q,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=n0(""+z,q.mode,K),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return K=rh(z.type,z.key,z.props,null,q.mode,K),$c(K,z),K.return=q,K;case V:return z=s0(z,q.mode,K),z.return=q,z;case T:return z=Wi(z),oe(q,z,K)}if(Ae(z)||P(z))return z=Ki(z,q.mode,K,null),z.return=q,z;if(typeof z.then=="function")return oe(q,dh(z),K);if(z.$$typeof===ne)return oe(q,lh(q,z),K);hh(q,z)}return null}function X(q,z,K,ie){var Ve=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ve!==null?null:j(q,z,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Ve?O(q,z,K,ie):null;case V:return K.key===Ve?Q(q,z,K,ie):null;case T:return K=Wi(K),X(q,z,K,ie)}if(Ae(K)||P(K))return Ve!==null?null:se(q,z,K,ie,null);if(typeof K.then=="function")return X(q,z,dh(K),ie);if(K.$$typeof===ne)return X(q,z,lh(q,K),ie);hh(q,K)}return null}function ee(q,z,K,ie,Ve){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(K)||null,j(z,q,""+ie,Ve);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return q=q.get(ie.key===null?K:ie.key)||null,O(z,q,ie,Ve);case V:return q=q.get(ie.key===null?K:ie.key)||null,Q(z,q,ie,Ve);case T:return ie=Wi(ie),ee(q,z,K,ie,Ve)}if(Ae(ie)||P(ie))return q=q.get(K)||null,se(z,q,ie,Ve,null);if(typeof ie.then=="function")return ee(q,z,K,dh(ie),Ve);if(ie.$$typeof===ne)return ee(q,z,K,lh(z,ie),Ve);hh(z,ie)}return null}function Se(q,z,K,ie){for(var Ve=null,ut=null,ke=z,Ke=z=0,et=null;ke!==null&&Ke<K.length;Ke++){ke.index>Ke?(et=ke,ke=null):et=ke.sibling;var dt=X(q,ke,K[Ke],ie);if(dt===null){ke===null&&(ke=et);break}n&&ke&&dt.alternate===null&&a(q,ke),z=p(dt,z,Ke),ut===null?Ve=dt:ut.sibling=dt,ut=dt,ke=et}if(Ke===K.length)return o(q,ke),at&&Qr(q,Ke),Ve;if(ke===null){for(;Ke<K.length;Ke++)ke=oe(q,K[Ke],ie),ke!==null&&(z=p(ke,z,Ke),ut===null?Ve=ke:ut.sibling=ke,ut=ke);return at&&Qr(q,Ke),Ve}for(ke=u(ke);Ke<K.length;Ke++)et=ee(ke,q,Ke,K[Ke],ie),et!==null&&(n&&et.alternate!==null&&ke.delete(et.key===null?Ke:et.key),z=p(et,z,Ke),ut===null?Ve=et:ut.sibling=et,ut=et);return n&&ke.forEach(function(ri){return a(q,ri)}),at&&Qr(q,Ke),Ve}function Le(q,z,K,ie){if(K==null)throw Error(s(151));for(var Ve=null,ut=null,ke=z,Ke=z=0,et=null,dt=K.next();ke!==null&&!dt.done;Ke++,dt=K.next()){ke.index>Ke?(et=ke,ke=null):et=ke.sibling;var ri=X(q,ke,dt.value,ie);if(ri===null){ke===null&&(ke=et);break}n&&ke&&ri.alternate===null&&a(q,ke),z=p(ri,z,Ke),ut===null?Ve=ri:ut.sibling=ri,ut=ri,ke=et}if(dt.done)return o(q,ke),at&&Qr(q,Ke),Ve;if(ke===null){for(;!dt.done;Ke++,dt=K.next())dt=oe(q,dt.value,ie),dt!==null&&(z=p(dt,z,Ke),ut===null?Ve=dt:ut.sibling=dt,ut=dt);return at&&Qr(q,Ke),Ve}for(ke=u(ke);!dt.done;Ke++,dt=K.next())dt=ee(ke,q,Ke,dt.value,ie),dt!==null&&(n&&dt.alternate!==null&&ke.delete(dt.key===null?Ke:dt.key),z=p(dt,z,Ke),ut===null?Ve=dt:ut.sibling=dt,ut=dt);return n&&ke.forEach(function(mT){return a(q,mT)}),at&&Qr(q,Ke),Ve}function It(q,z,K,ie){if(typeof K=="object"&&K!==null&&K.type===Z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Ve=K.key;z!==null;){if(z.key===Ve){if(Ve=K.type,Ve===Z){if(z.tag===7){o(q,z.sibling),ie=m(z,K.props.children),ie.return=q,q=ie;break e}}else if(z.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===T&&Wi(Ve)===z.type){o(q,z.sibling),ie=m(z,K.props),$c(ie,K),ie.return=q,q=ie;break e}o(q,z);break}else a(q,z);z=z.sibling}K.type===Z?(ie=Ki(K.props.children,q.mode,ie,K.key),ie.return=q,q=ie):(ie=rh(K.type,K.key,K.props,null,q.mode,ie),$c(ie,K),ie.return=q,q=ie)}return b(q);case V:e:{for(Ve=K.key;z!==null;){if(z.key===Ve)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){o(q,z.sibling),ie=m(z,K.children||[]),ie.return=q,q=ie;break e}else{o(q,z);break}else a(q,z);z=z.sibling}ie=s0(K,q.mode,ie),ie.return=q,q=ie}return b(q);case T:return K=Wi(K),It(q,z,K,ie)}if(Ae(K))return Se(q,z,K,ie);if(P(K)){if(Ve=P(K),typeof Ve!="function")throw Error(s(150));return K=Ve.call(K),Le(q,z,K,ie)}if(typeof K.then=="function")return It(q,z,dh(K),ie);if(K.$$typeof===ne)return It(q,z,lh(q,K),ie);hh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(o(q,z.sibling),ie=m(z,K),ie.return=q,q=ie):(o(q,z),ie=n0(K,q.mode,ie),ie.return=q,q=ie),b(q)):o(q,z)}return function(q,z,K,ie){try{Gc=0;var Ve=It(q,z,K,ie);return io=null,Ve}catch(ke){if(ke===ao||ke===ch)throw ke;var ut=ms(29,ke,null,q.mode);return ut.lanes=ie,ut.return=q,ut}finally{}}}var el=db(!0),hb=db(!1),Ba=!1;function g0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function qa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fa(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(mt&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=sh(n),Yy(n,null,o),a}return nh(n,u,a,o),sh(n)}function Kc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,it(n,o)}}function x0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var y0=!1;function Qc(){if(y0){var n=ro;if(n!==null)throw n}}function Yc(n,a,o,u){y0=!1;var m=n.updateQueue;Ba=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var O=j,Q=O.next;O.next=null,b===null?p=Q:b.next=Q,b=O;var se=n.alternate;se!==null&&(se=se.updateQueue,j=se.lastBaseUpdate,j!==b&&(j===null?se.firstBaseUpdate=Q:j.next=Q,se.lastBaseUpdate=O))}if(p!==null){var oe=m.baseState;b=0,se=Q=O=null,j=p;do{var X=j.lane&-536870913,ee=X!==j.lane;if(ee?(Ze&X)===X:(u&X)===X){X!==0&&X===so&&(y0=!0),se!==null&&(se=se.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Se=n,Le=j;X=a;var It=o;switch(Le.tag){case 1:if(Se=Le.payload,typeof Se=="function"){oe=Se.call(It,oe,X);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Le.payload,X=typeof Se=="function"?Se.call(It,oe,X):Se,X==null)break e;oe=w({},oe,X);break e;case 2:Ba=!0}}X=j.callback,X!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:j.tag,payload:j.payload,callback:j.callback,next:null},se===null?(Q=se=ee,O=oe):se=se.next=ee,b|=X;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;ee=j,j=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);se===null&&(O=oe),m.baseState=O,m.firstBaseUpdate=Q,m.lastBaseUpdate=se,p===null&&(m.shared.lanes=0),Qa|=b,n.lanes=b,n.memoizedState=oe}}function fb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function mb(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)fb(o[n],a)}var lo=D(null),fh=D(0);function gb(n,a){n=aa,L(fh,n),L(lo,a),aa=n|a.baseLanes}function b0(){L(fh,aa),L(lo,lo.current)}function v0(){aa=fh.current,U(lo),U(fh)}var gs=D(null),Ls=null;function Ha(n){var a=n.alternate;L(Jt,Jt.current&1),L(gs,n),Ls===null&&(a===null||lo.current!==null||a.memoizedState!==null)&&(Ls=n)}function w0(n){L(Jt,Jt.current),L(gs,n),Ls===null&&(Ls=n)}function pb(n){n.tag===22?(L(Jt,Jt.current),L(gs,n),Ls===null&&(Ls=n)):Ga()}function Ga(){L(Jt,Jt.current),L(gs,gs.current)}function ps(n){U(gs),Ls===n&&(Ls=null),U(Jt)}var Jt=D(0);function mh(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Sg(o)||Ag(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Jr=0,$e=null,St=null,cn=null,gh=!1,oo=!1,tl=!1,ph=0,Xc=0,co=null,rj=0;function Kt(){throw Error(s(321))}function _0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!fs(n[o],a[o]))return!1;return!0}function N0(n,a,o,u,m,p){return Jr=p,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=n===null||n.memoizedState===null?Zb:L0,tl=!1,p=o(u,m),tl=!1,oo&&(p=yb(a,o,u,m)),xb(n),p}function xb(n){G.H=Zc;var a=St!==null&&St.next!==null;if(Jr=0,cn=St=$e=null,gh=!1,Xc=0,co=null,a)throw Error(s(300));n===null||un||(n=n.dependencies,n!==null&&ih(n)&&(un=!0))}function yb(n,a,o,u){$e=n;var m=0;do{if(oo&&(co=null),Xc=0,oo=!1,25<=m)throw Error(s(301));if(m+=1,cn=St=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}G.H=e1,p=a(o,u)}while(oo);return p}function aj(){var n=G.H,a=n.useState()[0];return a=typeof a.then=="function"?Jc(a):a,n=n.useState()[0],(St!==null?St.memoizedState:null)!==n&&($e.flags|=1024),a}function E0(){var n=ph!==0;return ph=0,n}function j0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function T0(n){if(gh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}gh=!1}Jr=0,cn=St=$e=null,oo=!1,Xc=ph=0,co=null}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?$e.memoizedState=cn=n:cn=cn.next=n,cn}function Wt(){if(St===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=St.next;var a=cn===null?$e.memoizedState:cn.next;if(a!==null)cn=a,St=n;else{if(n===null)throw $e.alternate===null?Error(s(467)):Error(s(310));St=n,n={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},cn===null?$e.memoizedState=cn=n:cn=cn.next=n}return cn}function xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(n){var a=Xc;return Xc+=1,co===null&&(co=[]),n=ob(co,n,a),a=$e,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?Zb:L0),n}function yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Jc(n);if(n.$$typeof===ne)return Rn(n)}throw Error(s(438,String(n)))}function S0(n){var a=null,o=$e.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=xh(),$e.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=R;return a.index++,o}function Wr(n,a){return typeof a=="function"?a(n):a}function bh(n){var a=Wt();return A0(a,St,n)}function A0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var j=b=null,O=null,Q=a,se=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Ze&oe)===oe:(Jr&oe)===oe){var X=Q.revertLane;if(X===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===so&&(se=!0);else if((Jr&X)===X){Q=Q.next,X===so&&(se=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(j=O=oe,b=p):O=O.next=oe,$e.lanes|=X,Qa|=X;oe=Q.action,tl&&o(p,oe),p=Q.hasEagerState?Q.eagerState:o(p,oe)}else X={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(j=O=X,b=p):O=O.next=X,$e.lanes|=oe,Qa|=oe;Q=Q.next}while(Q!==null&&Q!==a);if(O===null?b=p:O.next=j,!fs(p,n.memoizedState)&&(un=!0,se&&(o=ro,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=O,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function I0(n){var a=Wt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);fs(p,a.memoizedState)||(un=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function bb(n,a,o){var u=$e,m=Wt(),p=at;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!fs((St||m).memoizedState,o);if(b&&(m.memoizedState=o,un=!0),m=m.queue,k0(_b.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,uo(9,{destroy:void 0},wb.bind(null,u,m,o,a),null),Rt===null)throw Error(s(349));p||(Jr&127)!==0||vb(u,a,o)}return o}function vb(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=$e.updateQueue,a===null?(a=xh(),$e.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function wb(n,a,o,u){a.value=o,a.getSnapshot=u,Nb(a)&&Eb(n)}function _b(n,a,o){return o(function(){Nb(a)&&Eb(n)})}function Nb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!fs(n,o)}catch{return!0}}function Eb(n){var a=$i(n,2);a!==null&&as(a,n,2)}function C0(n){var a=Gn();if(typeof n=="function"){var o=n;if(n=o(),tl){nn(!0);try{o()}finally{nn(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:n},a}function jb(n,a,o,u){return n.baseState=o,A0(n,St,typeof u=="function"?u:Wr)}function ij(n,a,o,u,m){if(_h(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};G.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,Tb(a,p)):(p.next=o.next,a.pending=o.next=p)}}function Tb(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=G.T,b={};G.T=b;try{var j=o(m,u),O=G.S;O!==null&&O(b,j),Sb(n,a,j)}catch(Q){R0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),G.T=p}}else try{p=o(m,u),Sb(n,a,p)}catch(Q){R0(n,a,Q)}}function Sb(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ab(n,a,u)},function(u){return R0(n,a,u)}):Ab(n,a,o)}function Ab(n,a,o){a.status="fulfilled",a.value=o,Ib(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Tb(n,o)))}function R0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Ib(a),a=a.next;while(a!==u)}n.action=null}function Ib(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Cb(n,a){return a}function Rb(n,a){if(at){var o=Rt.formState;if(o!==null){e:{var u=$e;if(at){if(Mt){t:{for(var m=Mt,p=Ps;m.nodeType!==8;){if(!p){m=null;break t}if(m=zs(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Mt=zs(m.nextSibling),u=m.data==="F!";break e}}za(u)}u=!1}u&&(a=o[0])}}return o=Gn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cb,lastRenderedState:a},o.queue=u,o=Xb.bind(null,$e,u),u.dispatch=o,u=C0(!1),p=P0.bind(null,$e,!1,u.queue),u=Gn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=ij.bind(null,$e,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function kb(n){var a=Wt();return Db(a,St,n)}function Db(n,a,o){if(a=A0(n,a,Cb)[0],n=bh(Wr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Jc(a)}catch(b){throw b===ao?ch:b}else u=a;a=Wt();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&($e.flags|=2048,uo(9,{destroy:void 0},lj.bind(null,m,o),null)),[u,p,n]}function lj(n,a){n.action=a}function Ob(n){var a=Wt(),o=St;if(o!==null)return Db(a,o,n);Wt(),a=a.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function uo(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=$e.updateQueue,a===null&&(a=xh(),$e.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Mb(){return Wt().memoizedState}function vh(n,a,o,u){var m=Gn();$e.flags|=n,m.memoizedState=uo(1|a,{destroy:void 0},o,u===void 0?null:u)}function wh(n,a,o,u){var m=Wt();u=u===void 0?null:u;var p=m.memoizedState.inst;St!==null&&u!==null&&_0(u,St.memoizedState.deps)?m.memoizedState=uo(a,p,o,u):($e.flags|=n,m.memoizedState=uo(1|a,p,o,u))}function Vb(n,a){vh(8390656,8,n,a)}function k0(n,a){wh(2048,8,n,a)}function oj(n){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=xh(),$e.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Pb(n){var a=Wt().memoizedState;return oj({ref:a,nextImpl:n}),function(){if((mt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Lb(n,a){return wh(4,2,n,a)}function zb(n,a){return wh(4,4,n,a)}function Ub(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Bb(n,a,o){o=o!=null?o.concat([n]):null,wh(4,4,Ub.bind(null,a,n),o)}function D0(){}function qb(n,a){var o=Wt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&_0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function Fb(n,a){var o=Wt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&_0(a,u[1]))return u[0];if(u=n(),tl){nn(!0);try{n()}finally{nn(!1)}}return o.memoizedState=[u,a],u}function O0(n,a,o){return o===void 0||(Jr&1073741824)!==0&&(Ze&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=H1(),$e.lanes|=n,Qa|=n,o)}function Hb(n,a,o,u){return fs(o,a)?o:lo.current!==null?(n=O0(n,o,u),fs(n,a)||(un=!0),n):(Jr&42)===0||(Jr&1073741824)!==0&&(Ze&261930)===0?(un=!0,n.memoizedState=o):(n=H1(),$e.lanes|=n,Qa|=n,a)}function Gb(n,a,o,u,m){var p=ce.p;ce.p=p!==0&&8>p?p:8;var b=G.T,j={};G.T=j,P0(n,!1,a,o);try{var O=m(),Q=G.S;if(Q!==null&&Q(j,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var se=sj(O,u);Wc(n,a,se,bs(n))}else Wc(n,a,u,bs(n))}catch(oe){Wc(n,a,{then:function(){},status:"rejected",reason:oe},bs())}finally{ce.p=p,b!==null&&j.types!==null&&(b.types=j.types),G.T=b}}function cj(){}function M0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=$b(n).queue;Gb(n,m,a,W,o===null?cj:function(){return Kb(n),o(u)})}function $b(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:W},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Kb(n){var a=$b(n);a.next===null&&(a=n.alternate.memoizedState),Wc(n,a.next.queue,{},bs())}function V0(){return Rn(gu)}function Qb(){return Wt().memoizedState}function Yb(){return Wt().memoizedState}function uj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=bs();n=qa(o);var u=Fa(a,n,o);u!==null&&(as(u,a,o),Kc(u,a,o)),a={cache:d0()},n.payload=a;return}a=a.return}}function dj(n,a,o){var u=bs();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_h(n)?Jb(a,o):(o=e0(n,a,o,u),o!==null&&(as(o,n,u),Wb(o,a,u)))}function Xb(n,a,o){var u=bs();Wc(n,a,o,u)}function Wc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(_h(n))Jb(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,j=p(b,o);if(m.hasEagerState=!0,m.eagerState=j,fs(j,b))return nh(n,a,m,0),Rt===null&&th(),!1}catch{}finally{}if(o=e0(n,a,m,u),o!==null)return as(o,n,u),Wb(o,a,u),!0}return!1}function P0(n,a,o,u){if(u={lane:2,revertLane:gg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_h(n)){if(a)throw Error(s(479))}else a=e0(n,o,u,2),a!==null&&as(a,n,2)}function _h(n){var a=n.alternate;return n===$e||a!==null&&a===$e}function Jb(n,a){oo=gh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function Wb(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,it(n,o)}}var Zc={readContext:Rn,use:yh,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};Zc.useEffectEvent=Kt;var Zb={readContext:Rn,use:yh,useCallback:function(n,a){return Gn().memoizedState=[n,a===void 0?null:a],n},useContext:Rn,useEffect:Vb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,vh(4194308,4,Ub.bind(null,a,n),o)},useLayoutEffect:function(n,a){return vh(4194308,4,n,a)},useInsertionEffect:function(n,a){vh(4,2,n,a)},useMemo:function(n,a){var o=Gn();a=a===void 0?null:a;var u=n();if(tl){nn(!0);try{n()}finally{nn(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Gn();if(o!==void 0){var m=o(a);if(tl){nn(!0);try{o(a)}finally{nn(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=dj.bind(null,$e,n),[u.memoizedState,n]},useRef:function(n){var a=Gn();return n={current:n},a.memoizedState=n},useState:function(n){n=C0(n);var a=n.queue,o=Xb.bind(null,$e,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:D0,useDeferredValue:function(n,a){var o=Gn();return O0(o,n,a)},useTransition:function(){var n=C0(!1);return n=Gb.bind(null,$e,n.queue,!0,!1),Gn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=$e,m=Gn();if(at){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),Rt===null)throw Error(s(349));(Ze&127)!==0||vb(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,Vb(_b.bind(null,u,p,n),[n]),u.flags|=2048,uo(9,{destroy:void 0},wb.bind(null,u,p,o,a),null),o},useId:function(){var n=Gn(),a=Rt.identifierPrefix;if(at){var o=Tr,u=jr;o=(u&~(1<<32-yt(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=ph++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=rj++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:V0,useFormState:Rb,useActionState:Rb,useOptimistic:function(n){var a=Gn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=P0.bind(null,$e,!0,o),o.dispatch=a,[n,a]},useMemoCache:S0,useCacheRefresh:function(){return Gn().memoizedState=uj.bind(null,$e)},useEffectEvent:function(n){var a=Gn(),o={impl:n};return a.memoizedState=o,function(){if((mt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},L0={readContext:Rn,use:yh,useCallback:qb,useContext:Rn,useEffect:k0,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:zb,useMemo:Fb,useReducer:bh,useRef:Mb,useState:function(){return bh(Wr)},useDebugValue:D0,useDeferredValue:function(n,a){var o=Wt();return Hb(o,St.memoizedState,n,a)},useTransition:function(){var n=bh(Wr)[0],a=Wt().memoizedState;return[typeof n=="boolean"?n:Jc(n),a]},useSyncExternalStore:bb,useId:Qb,useHostTransitionStatus:V0,useFormState:kb,useActionState:kb,useOptimistic:function(n,a){var o=Wt();return jb(o,St,n,a)},useMemoCache:S0,useCacheRefresh:Yb};L0.useEffectEvent=Pb;var e1={readContext:Rn,use:yh,useCallback:qb,useContext:Rn,useEffect:k0,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:zb,useMemo:Fb,useReducer:I0,useRef:Mb,useState:function(){return I0(Wr)},useDebugValue:D0,useDeferredValue:function(n,a){var o=Wt();return St===null?O0(o,n,a):Hb(o,St.memoizedState,n,a)},useTransition:function(){var n=I0(Wr)[0],a=Wt().memoizedState;return[typeof n=="boolean"?n:Jc(n),a]},useSyncExternalStore:bb,useId:Qb,useHostTransitionStatus:V0,useFormState:Ob,useActionState:Ob,useOptimistic:function(n,a){var o=Wt();return St!==null?jb(o,St,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:S0,useCacheRefresh:Yb};e1.useEffectEvent=Pb;function z0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:w({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var U0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=bs(),m=qa(u);m.payload=a,o!=null&&(m.callback=o),a=Fa(n,m,u),a!==null&&(as(a,n,u),Kc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=bs(),m=qa(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Fa(n,m,u),a!==null&&(as(a,n,u),Kc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=bs(),u=qa(o);u.tag=2,a!=null&&(u.callback=a),a=Fa(n,u,o),a!==null&&(as(a,n,o),Kc(a,n,o))}};function t1(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!zc(o,u)||!zc(m,p):!0}function n1(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&U0.enqueueReplaceState(a,a.state,null)}function nl(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=w({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function s1(n){eh(n)}function r1(n){console.error(n)}function a1(n){eh(n)}function Nh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function i1(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function B0(n,a,o){return o=qa(o),o.tag=3,o.payload={element:null},o.callback=function(){Nh(n,a)},o}function l1(n){return n=qa(n),n.tag=3,n}function o1(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){i1(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){i1(a,o,u),typeof m!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function hj(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&no(a,o,m,!0),o=gs.current,o!==null){switch(o.tag){case 31:case 13:return Ls===null?Mh():o.alternate===null&&Qt===0&&(Qt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===uh?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),hg(n,u,m)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),hg(n,u,m)),!1}throw Error(s(435,o.tag))}return hg(n,u,m),Mh(),!1}if(at)return a=gs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==i0&&(n=Error(s(422),{cause:u}),qc(Os(n,o)))):(u!==i0&&(a=Error(s(423),{cause:u}),qc(Os(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Os(u,o),m=B0(n.stateNode,u,m),x0(n,m),Qt!==4&&(Qt=2)),!1;var p=Error(s(520),{cause:u});if(p=Os(p,o),lu===null?lu=[p]:lu.push(p),Qt!==4&&(Qt=2),a===null)return!0;u=Os(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=B0(o.stateNode,u,n),x0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ya===null||!Ya.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=l1(m),o1(m,n,o,u),x0(o,m),!1}o=o.return}while(o!==null);return!1}var q0=Error(s(461)),un=!1;function kn(n,a,o,u){a.child=n===null?hb(a,null,o,u):el(a,n.child,o,u)}function c1(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var j in u)j!=="ref"&&(b[j]=u[j])}else b=u;return Xi(a),u=N0(n,a,o,b,p,m),j=E0(),n!==null&&!un?(j0(n,a,m),Zr(n,a,m)):(at&&j&&r0(a),a.flags|=1,kn(n,a,u,m),a.child)}function u1(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!t0(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,d1(n,a,p,u,m)):(n=rh(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!X0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:zc,o(b,u)&&n.ref===a.ref)return Zr(n,a,m)}return a.flags|=1,n=Kr(p,u),n.ref=a.ref,n.return=a,a.child=n}function d1(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(zc(p,u)&&n.ref===a.ref)if(un=!1,a.pendingProps=u=p,X0(n,m))(n.flags&131072)!==0&&(un=!0);else return a.lanes=n.lanes,Zr(n,a,m)}return F0(n,a,o,u,m)}function h1(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return f1(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&oh(a,p!==null?p.cachePool:null),p!==null?gb(a,p):b0(),pb(a);else return u=a.lanes=536870912,f1(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(oh(a,p.cachePool),gb(a,p),Ga(),a.memoizedState=null):(n!==null&&oh(a,null),b0(),Ga());return kn(n,a,m,o),a.child}function eu(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function f1(n,a,o,u,m){var p=f0();return p=p===null?null:{parent:on._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&oh(a,null),b0(),pb(a),n!==null&&no(n,a,u,!0),a.childLanes=m,null}function Eh(n,a){return a=Th({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function m1(n,a,o){return el(a,n.child,null,o),n=Eh(a,a.pendingProps),n.flags|=2,ps(a),a.memoizedState=null,n}function fj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(at){if(u.mode==="hidden")return n=Eh(a,u),a.lanes=536870912,eu(null,n);if(w0(a),(n=Mt)?(n=Tv(n,Ps),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:jr,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},o=Jy(n),o.return=a,a.child=o,Cn=a,Mt=null)):n=null,n===null)throw za(a);return a.lanes=536870912,null}return Eh(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(w0(a),m)if(a.flags&256)a.flags&=-257,a=m1(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(un||no(n,a,o,!1),m=(o&n.childLanes)!==0,un||m){if(u=Rt,u!==null&&(b=Ot(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,$i(n,b),as(u,n,b),q0;Mh(),a=m1(n,a,o)}else n=p.treeContext,Mt=zs(b.nextSibling),Cn=a,at=!0,La=null,Ps=!1,n!==null&&eb(a,n),a=Eh(a,u),a.flags|=4096;return a}return n=Kr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function jh(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function F0(n,a,o,u,m){return Xi(a),o=N0(n,a,o,u,void 0,m),u=E0(),n!==null&&!un?(j0(n,a,m),Zr(n,a,m)):(at&&u&&r0(a),a.flags|=1,kn(n,a,o,m),a.child)}function g1(n,a,o,u,m,p){return Xi(a),a.updateQueue=null,o=yb(a,u,o,m),xb(n),u=E0(),n!==null&&!un?(j0(n,a,p),Zr(n,a,p)):(at&&u&&r0(a),a.flags|=1,kn(n,a,o,p),a.child)}function p1(n,a,o,u,m){if(Xi(a),a.stateNode===null){var p=Wl,b=o.contextType;typeof b=="object"&&b!==null&&(p=Rn(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=U0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},g0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?Rn(b):Wl,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(z0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&U0.enqueueReplaceState(p,p.state,null),Yc(a,u,p,m),Qc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var j=a.memoizedProps,O=nl(o,j);p.props=O;var Q=p.context,se=o.contextType;b=Wl,typeof se=="object"&&se!==null&&(b=Rn(se));var oe=o.getDerivedStateFromProps;se=typeof oe=="function"||typeof p.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,se||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j||Q!==b)&&n1(a,p,u,b),Ba=!1;var X=a.memoizedState;p.state=X,Yc(a,u,p,m),Qc(),Q=a.memoizedState,j||X!==Q||Ba?(typeof oe=="function"&&(z0(a,o,oe,u),Q=a.memoizedState),(O=Ba||t1(a,o,O,u,X,Q,b))?(se||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=O):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,p0(n,a),b=a.memoizedProps,se=nl(o,b),p.props=se,oe=a.pendingProps,X=p.context,Q=o.contextType,O=Wl,typeof Q=="object"&&Q!==null&&(O=Rn(Q)),j=o.getDerivedStateFromProps,(Q=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==oe||X!==O)&&n1(a,p,u,O),Ba=!1,X=a.memoizedState,p.state=X,Yc(a,u,p,m),Qc();var ee=a.memoizedState;b!==oe||X!==ee||Ba||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof j=="function"&&(z0(a,o,j,u),ee=a.memoizedState),(se=Ba||t1(a,o,se,u,X,ee,O)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ee,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ee,O)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ee),p.props=u,p.state=ee,p.context=O,u=se):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,jh(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=el(a,n.child,null,m),a.child=el(a,null,o,m)):kn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=Zr(n,a,m),n}function x1(n,a,o,u){return Qi(),a.flags|=256,kn(n,a,o,u),a.child}var H0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G0(n){return{baseLanes:n,cachePool:ib()}}function $0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=ys),n}function y1(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Jt.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(at){if(m?Ha(a):Ga(),(n=Mt)?(n=Tv(n,Ps),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:jr,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},o=Jy(n),o.return=a,a.child=o,Cn=a,Mt=null)):n=null,n===null)throw za(a);return Ag(n)?a.lanes=32:a.lanes=536870912,null}var j=u.children;return u=u.fallback,m?(Ga(),m=a.mode,j=Th({mode:"hidden",children:j},m),u=Ki(u,m,o,null),j.return=a,u.return=a,j.sibling=u,a.child=j,u=a.child,u.memoizedState=G0(o),u.childLanes=$0(n,b,o),a.memoizedState=H0,eu(null,u)):(Ha(a),K0(a,j))}var O=n.memoizedState;if(O!==null&&(j=O.dehydrated,j!==null)){if(p)a.flags&256?(Ha(a),a.flags&=-257,a=Q0(n,a,o)):a.memoizedState!==null?(Ga(),a.child=n.child,a.flags|=128,a=null):(Ga(),j=u.fallback,m=a.mode,u=Th({mode:"visible",children:u.children},m),j=Ki(j,m,o,null),j.flags|=2,u.return=a,j.return=a,u.sibling=j,a.child=u,el(a,n.child,null,o),u=a.child,u.memoizedState=G0(o),u.childLanes=$0(n,b,o),a.memoizedState=H0,a=eu(null,u));else if(Ha(a),Ag(j)){if(b=j.nextSibling&&j.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,qc({value:u,source:null,stack:null}),a=Q0(n,a,o)}else if(un||no(n,a,o,!1),b=(o&n.childLanes)!==0,un||b){if(b=Rt,b!==null&&(u=Ot(b,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,$i(n,u),as(b,n,u),q0;Sg(j)||Mh(),a=Q0(n,a,o)}else Sg(j)?(a.flags|=192,a.child=n.child,a=null):(n=O.treeContext,Mt=zs(j.nextSibling),Cn=a,at=!0,La=null,Ps=!1,n!==null&&eb(a,n),a=K0(a,u.children),a.flags|=4096);return a}return m?(Ga(),j=u.fallback,m=a.mode,O=n.child,Q=O.sibling,u=Kr(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,Q!==null?j=Kr(Q,j):(j=Ki(j,m,o,null),j.flags|=2),j.return=a,u.return=a,u.sibling=j,a.child=u,eu(null,u),u=a.child,j=n.child.memoizedState,j===null?j=G0(o):(m=j.cachePool,m!==null?(O=on._currentValue,m=m.parent!==O?{parent:O,pool:O}:m):m=ib(),j={baseLanes:j.baseLanes|o,cachePool:m}),u.memoizedState=j,u.childLanes=$0(n,b,o),a.memoizedState=H0,eu(n.child,u)):(Ha(a),o=n.child,n=o.sibling,o=Kr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function K0(n,a){return a=Th({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Th(n,a){return n=ms(22,n,null,a),n.lanes=0,n}function Q0(n,a,o){return el(a,n.child,null,o),n=K0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function b1(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),c0(n.return,a,o)}function Y0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function v1(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=Jt.current,j=(b&2)!==0;if(j?(b=b&1|2,a.flags|=128):b&=1,L(Jt,b),kn(n,a,u,o),u=at?Bc:0,!j&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&b1(n,o,a);else if(n.tag===19)b1(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&mh(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),Y0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&mh(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Y0(a,!0,o,null,p,u);break;case"together":Y0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Zr(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Qa|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(no(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Kr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Kr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function X0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function mj(n,a,o){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),Ua(a,on,n.memoizedState.cache),Qi();break;case 27:case 5:We(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:Ua(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,w0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ha(a),a.flags|=128,null):(o&a.child.childLanes)!==0?y1(n,a,o):(Ha(a),n=Zr(n,a,o),n!==null?n.sibling:null);Ha(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(no(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return v1(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),L(Jt,Jt.current),u)break;return null;case 22:return a.lanes=0,h1(n,a,o,a.pendingProps);case 24:Ua(a,on,n.memoizedState.cache)}return Zr(n,a,o)}function w1(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)un=!0;else{if(!X0(n,o)&&(a.flags&128)===0)return un=!1,mj(n,a,o);un=(n.flags&131072)!==0}else un=!1,at&&(a.flags&1048576)!==0&&Zy(a,Bc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Wi(a.elementType),a.type=n,typeof n=="function")t0(n)?(u=nl(n,u),a.tag=1,a=p1(null,a,n,u,o)):(a.tag=0,a=F0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===xe){a.tag=11,a=c1(null,a,n,u,o);break e}else if(m===E){a.tag=14,a=u1(null,a,n,u,o);break e}}throw a=fe(n)||n,Error(s(306,a,""))}}return a;case 0:return F0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=nl(u,a.pendingProps),p1(n,a,u,m,o);case 3:e:{if(qe(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,p0(n,a),Yc(a,u,null,o);var b=a.memoizedState;if(u=b.cache,Ua(a,on,u),u!==p.cache&&u0(a,[on],o,!0),Qc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=x1(n,a,u,o);break e}else if(u!==m){m=Os(Error(s(424)),a),qc(m),a=x1(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Mt=zs(n.firstChild),Cn=a,at=!0,La=null,Ps=!0,o=hb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qi(),u===m){a=Zr(n,a,o);break e}kn(n,a,u,o)}a=a.child}return a;case 26:return jh(n,a),n===null?(o=kv(a.type,null,a.pendingProps,null))?a.memoizedState=o:at||(o=a.type,n=a.pendingProps,u=qh(Ee.current).createElement(o),u[rn]=a,u[wn]=n,Dn(u,o,n),an(u),a.stateNode=u):a.memoizedState=kv(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return We(a),n===null&&at&&(u=a.stateNode=Iv(a.type,a.pendingProps,Ee.current),Cn=a,Ps=!0,m=Mt,Za(a.type)?(Ig=m,Mt=zs(u.firstChild)):Mt=m),kn(n,a,a.pendingProps.children,o),jh(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&at&&((m=u=Mt)&&(u=Hj(u,a.type,a.pendingProps,Ps),u!==null?(a.stateNode=u,Cn=a,Mt=zs(u.firstChild),Ps=!1,m=!0):m=!1),m||za(a)),We(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,Eg(m,p)?u=null:b!==null&&Eg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=N0(n,a,aj,null,null,o),gu._currentValue=m),jh(n,a),kn(n,a,u,o),a.child;case 6:return n===null&&at&&((n=o=Mt)&&(o=Gj(o,a.pendingProps,Ps),o!==null?(a.stateNode=o,Cn=a,Mt=null,n=!0):n=!1),n||za(a)),null;case 13:return y1(n,a,o);case 4:return qe(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=el(a,null,u,o):kn(n,a,u,o),a.child;case 11:return c1(n,a,a.type,a.pendingProps,o);case 7:return kn(n,a,a.pendingProps,o),a.child;case 8:return kn(n,a,a.pendingProps.children,o),a.child;case 12:return kn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Ua(a,a.type,u.value),kn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Xi(a),m=Rn(m),u=u(m),a.flags|=1,kn(n,a,u,o),a.child;case 14:return u1(n,a,a.type,a.pendingProps,o);case 15:return d1(n,a,a.type,a.pendingProps,o);case 19:return v1(n,a,o);case 31:return fj(n,a,o);case 22:return h1(n,a,o,a.pendingProps);case 24:return Xi(a),u=Rn(on),n===null?(m=f0(),m===null&&(m=Rt,p=d0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},g0(a),Ua(a,on,m)):((n.lanes&o)!==0&&(p0(n,a),Yc(a,null,null,o),Qc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ua(a,on,u)):(u=p.cache,Ua(a,on,u),u!==m.cache&&u0(a,[on],o,!0))),kn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function ea(n){n.flags|=4}function J0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Q1())n.flags|=8192;else throw Zi=uh,m0}else n.flags&=-16777217}function _1(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Pv(a))if(Q1())n.flags|=8192;else throw Zi=uh,m0}function Sh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?De():536870912,n.lanes|=a,go|=a)}function tu(n,a){if(!at)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Vt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function gj(n,a,o){var u=a.pendingProps;switch(a0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Vt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Xr(on),Ie(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(to(a)?ea(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,l0())),Vt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(ea(a),p!==null?(Vt(a),_1(a,p)):(Vt(a),J0(a,m,null,u,o))):p?p!==n.memoizedState?(ea(a),Vt(a),_1(a,p)):(Vt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&ea(a),Vt(a),J0(a,m,n,u,o)),null;case 27:if(st(a),o=Ee.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Vt(a),null}n=Y.current,to(a)?tb(a):(n=Iv(m,u,o),a.stateNode=n,ea(a))}return Vt(a),null;case 5:if(st(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&ea(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Vt(a),null}if(p=Y.current,to(a))tb(a);else{var b=qh(Ee.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[rn]=a,p[wn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(Dn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ea(a)}}return Vt(a),J0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&ea(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Ee.current,to(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[rn]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||yv(n.nodeValue,o)),n||za(a,!0)}else n=qh(n).createTextNode(u),n[rn]=a,a.stateNode=n}return Vt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=to(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[rn]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),n=!1}else o=l0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(ps(a),a):(ps(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Vt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=to(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[rn]=a}else Qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),m=!1}else m=l0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ps(a),a):(ps(a),null)}return ps(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),Sh(a,a.updateQueue),Vt(a),null);case 4:return Ie(),n===null&&bg(a.stateNode.containerInfo),Vt(a),null;case 10:return Xr(a.type),Vt(a),null;case 19:if(U(Jt),u=a.memoizedState,u===null)return Vt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)tu(u,!1);else{if(Qt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=mh(n),p!==null){for(a.flags|=128,tu(u,!1),n=p.updateQueue,a.updateQueue=n,Sh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)Xy(o,n),o=o.sibling;return L(Jt,Jt.current&1|2),at&&Qr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Gt()>kh&&(a.flags|=128,m=!0,tu(u,!1),a.lanes=4194304)}else{if(!m)if(n=mh(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,Sh(a,n),tu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!at)return Vt(a),null}else 2*Gt()-u.renderingStartTime>kh&&o!==536870912&&(a.flags|=128,m=!0,tu(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Gt(),n.sibling=null,o=Jt.current,L(Jt,m?o&1|2:o&1),at&&Qr(a,u.treeForkCount),n):(Vt(a),null);case 22:case 23:return ps(a),v0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),o=a.updateQueue,o!==null&&Sh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&U(Ji),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Xr(on),Vt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function pj(n,a){switch(a0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Xr(on),Ie(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 31:if(a.memoizedState!==null){if(ps(a),a.alternate===null)throw Error(s(340));Qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(ps(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return U(Jt),null;case 4:return Ie(),null;case 10:return Xr(a.type),null;case 22:case 23:return ps(a),v0(),n!==null&&U(Ji),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Xr(on),null;case 25:return null;default:return null}}function N1(n,a){switch(a0(a),a.tag){case 3:Xr(on),Ie();break;case 26:case 27:case 5:st(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&ps(a);break;case 13:ps(a);break;case 19:U(Jt);break;case 10:Xr(a.type);break;case 22:case 23:ps(a),v0(),n!==null&&U(Ji);break;case 24:Xr(on)}}function nu(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(j){wt(a,a.return,j)}}function $a(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,j=b.destroy;if(j!==void 0){b.destroy=void 0,m=a;var O=o,Q=j;try{Q()}catch(se){wt(m,O,se)}}}u=u.next}while(u!==p)}}catch(se){wt(a,a.return,se)}}function E1(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{mb(a,o)}catch(u){wt(n,n.return,u)}}}function j1(n,a,o){o.props=nl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){wt(n,a,u)}}function su(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){wt(n,a,m)}}function Sr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){wt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){wt(n,a,m)}else o.current=null}function T1(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){wt(n,n.return,m)}}function W0(n,a,o){try{var u=n.stateNode;Lj(u,n.type,o,a),u[wn]=a}catch(m){wt(n,n.return,m)}}function S1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Za(n.type)||n.tag===4}function Z0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||S1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Za(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function eg(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Ys));else if(u!==4&&(u===27&&Za(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(eg(n,a,o),n=n.sibling;n!==null;)eg(n,a,o),n=n.sibling}function Ah(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&Za(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ah(n,a,o),n=n.sibling;n!==null;)Ah(n,a,o),n=n.sibling}function A1(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Dn(a,u,o),a[rn]=n,a[wn]=o}catch(p){wt(n,n.return,p)}}var ta=!1,dn=!1,tg=!1,I1=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function xj(n,a){if(n=n.containerInfo,_g=Yh,n=By(n),Qm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,j=-1,O=-1,Q=0,se=0,oe=n,X=null;t:for(;;){for(var ee;oe!==o||m!==0&&oe.nodeType!==3||(j=b+m),oe!==p||u!==0&&oe.nodeType!==3||(O=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)X=oe,oe=ee;for(;;){if(oe===n)break t;if(X===o&&++Q===m&&(j=b),X===p&&++se===u&&(O=b),(ee=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=ee}o=j===-1||O===-1?null:{start:j,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ng={focusedElem:n,selectionRange:o},Yh=!1,Nn=a;Nn!==null;)if(a=Nn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Nn=n;else for(;Nn!==null;){switch(a=Nn,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=nl(o.type,m);n=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Le){wt(o,o.return,Le)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Tg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Nn=n;break}Nn=a.return}}function C1(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:sa(n,o),u&4&&nu(5,o);break;case 1:if(sa(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){wt(o,o.return,b)}else{var m=nl(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){wt(o,o.return,b)}}u&64&&E1(o),u&512&&su(o,o.return);break;case 3:if(sa(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{mb(n,a)}catch(b){wt(o,o.return,b)}}break;case 27:a===null&&u&4&&A1(o);case 26:case 5:sa(n,o),a===null&&u&4&&T1(o),u&512&&su(o,o.return);break;case 12:sa(n,o);break;case 31:sa(n,o),u&4&&D1(n,o);break;case 13:sa(n,o),u&4&&O1(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Tj.bind(null,o),$j(n,o))));break;case 22:if(u=o.memoizedState!==null||ta,!u){a=a!==null&&a.memoizedState!==null||dn,m=ta;var p=dn;ta=u,(dn=a)&&!p?ra(n,o,(o.subtreeFlags&8772)!==0):sa(n,o),ta=m,dn=p}break;case 30:break;default:sa(n,o)}}function R1(n){var a=n.alternate;a!==null&&(n.alternate=null,R1(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Ll(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var zt=null,ts=!1;function na(n,a,o){for(o=o.child;o!==null;)k1(n,a,o),o=o.sibling}function k1(n,a,o){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(He,o)}catch{}switch(o.tag){case 26:dn||Sr(o,a),na(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:dn||Sr(o,a);var u=zt,m=ts;Za(o.type)&&(zt=o.stateNode,ts=!1),na(n,a,o),hu(o.stateNode),zt=u,ts=m;break;case 5:dn||Sr(o,a);case 6:if(u=zt,m=ts,zt=null,na(n,a,o),zt=u,ts=m,zt!==null)if(ts)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(o.stateNode)}catch(p){wt(o,a,p)}else try{zt.removeChild(o.stateNode)}catch(p){wt(o,a,p)}break;case 18:zt!==null&&(ts?(n=zt,Ev(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),No(n)):Ev(zt,o.stateNode));break;case 4:u=zt,m=ts,zt=o.stateNode.containerInfo,ts=!0,na(n,a,o),zt=u,ts=m;break;case 0:case 11:case 14:case 15:$a(2,o,a),dn||$a(4,o,a),na(n,a,o);break;case 1:dn||(Sr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&j1(o,a,u)),na(n,a,o);break;case 21:na(n,a,o);break;case 22:dn=(u=dn)||o.memoizedState!==null,na(n,a,o),dn=u;break;default:na(n,a,o)}}function D1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{No(n)}catch(o){wt(a,a.return,o)}}}function O1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{No(n)}catch(o){wt(a,a.return,o)}}function yj(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new I1),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new I1),a;default:throw Error(s(435,n.tag))}}function Ih(n,a){var o=yj(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=Sj.bind(null,n,u);u.then(m,m)}})}function ns(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,j=b;e:for(;j!==null;){switch(j.tag){case 27:if(Za(j.type)){zt=j.stateNode,ts=!1;break e}break;case 5:zt=j.stateNode,ts=!1;break e;case 3:case 4:zt=j.stateNode.containerInfo,ts=!0;break e}j=j.return}if(zt===null)throw Error(s(160));k1(p,b,m),zt=null,ts=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)M1(a,n),a=a.sibling}var tr=null;function M1(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ns(a,n),ss(n),u&4&&($a(3,n,n.return),nu(3,n),$a(5,n,n.return));break;case 1:ns(a,n),ss(n),u&512&&(dn||o===null||Sr(o,o.return)),u&64&&ta&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=tr;if(ns(a,n),ss(n),u&512&&(dn||o===null||Sr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[fr]||p[rn]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),Dn(p,u,o),p[rn]=n,an(p),u=p;break e;case"link":var b=Mv("link","href",m).get(u+(o.href||""));if(b){for(var j=0;j<b.length;j++)if(p=b[j],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(j,1);break t}}p=m.createElement(u),Dn(p,u,o),m.head.appendChild(p);break;case"meta":if(b=Mv("meta","content",m).get(u+(o.content||""))){for(j=0;j<b.length;j++)if(p=b[j],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(j,1);break t}}p=m.createElement(u),Dn(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[rn]=n,an(p),u=p}n.stateNode=u}else Vv(m,n.type,n.stateNode);else n.stateNode=Ov(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Vv(m,n.type,n.stateNode):Ov(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&W0(n,n.memoizedProps,o.memoizedProps)}break;case 27:ns(a,n),ss(n),u&512&&(dn||o===null||Sr(o,o.return)),o!==null&&u&4&&W0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ns(a,n),ss(n),u&512&&(dn||o===null||Sr(o,o.return)),n.flags&32){m=n.stateNode;try{es(m,"")}catch(Se){wt(n,n.return,Se)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,W0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(tg=!0);break;case 6:if(ns(a,n),ss(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Se){wt(n,n.return,Se)}}break;case 3:if(Gh=null,m=tr,tr=Fh(a.containerInfo),ns(a,n),tr=m,ss(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{No(a.containerInfo)}catch(Se){wt(n,n.return,Se)}tg&&(tg=!1,V1(n));break;case 4:u=tr,tr=Fh(n.stateNode.containerInfo),ns(a,n),ss(n),tr=u;break;case 12:ns(a,n),ss(n);break;case 31:ns(a,n),ss(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 13:ns(a,n),ss(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rh=Gt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 22:m=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,Q=ta,se=dn;if(ta=Q||m,dn=se||O,ns(a,n),dn=se,ta=Q,ss(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||O||ta||dn||sl(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){O=o=a;try{if(p=O.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{j=O.stateNode;var oe=O.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;j.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){wt(O,O.return,Se)}}}else if(a.tag===6){if(o===null){O=a;try{O.stateNode.nodeValue=m?"":O.memoizedProps}catch(Se){wt(O,O.return,Se)}}}else if(a.tag===18){if(o===null){O=a;try{var ee=O.stateNode;m?jv(ee,!0):jv(O.stateNode,!1)}catch(Se){wt(O,O.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ih(n,o))));break;case 19:ns(a,n),ss(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ih(n,u)));break;case 30:break;case 21:break;default:ns(a,n),ss(n)}}function ss(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(S1(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=Z0(n);Ah(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&(es(b,""),o.flags&=-33);var j=Z0(n);Ah(n,j,b);break;case 3:case 4:var O=o.stateNode.containerInfo,Q=Z0(n);eg(n,Q,O);break;default:throw Error(s(161))}}catch(se){wt(n,n.return,se)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function V1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;V1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function sa(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)C1(n,a.alternate,a),a=a.sibling}function sl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:$a(4,a,a.return),sl(a);break;case 1:Sr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&j1(a,a.return,o),sl(a);break;case 27:hu(a.stateNode);case 26:case 5:Sr(a,a.return),sl(a);break;case 22:a.memoizedState===null&&sl(a);break;case 30:sl(a);break;default:sl(a)}n=n.sibling}}function ra(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:ra(m,p,o),nu(4,p);break;case 1:if(ra(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){wt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var j=u.stateNode;try{var O=m.shared.hiddenCallbacks;if(O!==null)for(m.shared.hiddenCallbacks=null,m=0;m<O.length;m++)fb(O[m],j)}catch(Q){wt(u,u.return,Q)}}o&&b&64&&E1(p),su(p,p.return);break;case 27:A1(p);case 26:case 5:ra(m,p,o),o&&u===null&&b&4&&T1(p),su(p,p.return);break;case 12:ra(m,p,o);break;case 31:ra(m,p,o),o&&b&4&&D1(m,p);break;case 13:ra(m,p,o),o&&b&4&&O1(m,p);break;case 22:p.memoizedState===null&&ra(m,p,o),su(p,p.return);break;case 30:break;default:ra(m,p,o)}a=a.sibling}}function ng(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Fc(o))}function sg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Fc(n))}function nr(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)P1(n,a,o,u),a=a.sibling}function P1(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:nr(n,a,o,u),m&2048&&nu(9,a);break;case 1:nr(n,a,o,u);break;case 3:nr(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Fc(n)));break;case 12:if(m&2048){nr(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,j=p.onPostCommit;typeof j=="function"&&j(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){wt(a,a.return,O)}}else nr(n,a,o,u);break;case 31:nr(n,a,o,u);break;case 13:nr(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?nr(n,a,o,u):ru(n,a):p._visibility&2?nr(n,a,o,u):(p._visibility|=2,ho(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&ng(b,a);break;case 24:nr(n,a,o,u),m&2048&&sg(a.alternate,a);break;default:nr(n,a,o,u)}}function ho(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,j=o,O=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:ho(p,b,j,O,m),nu(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?ho(p,b,j,O,m):ru(p,b):(se._visibility|=2,ho(p,b,j,O,m)),m&&Q&2048&&ng(b.alternate,b);break;case 24:ho(p,b,j,O,m),m&&Q&2048&&sg(b.alternate,b);break;default:ho(p,b,j,O,m)}a=a.sibling}}function ru(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:ru(o,u),m&2048&&ng(u.alternate,u);break;case 24:ru(o,u),m&2048&&sg(u.alternate,u);break;default:ru(o,u)}a=a.sibling}}var au=8192;function fo(n,a,o){if(n.subtreeFlags&au)for(n=n.child;n!==null;)L1(n,a,o),n=n.sibling}function L1(n,a,o){switch(n.tag){case 26:fo(n,a,o),n.flags&au&&n.memoizedState!==null&&rT(o,tr,n.memoizedState,n.memoizedProps);break;case 5:fo(n,a,o);break;case 3:case 4:var u=tr;tr=Fh(n.stateNode.containerInfo),fo(n,a,o),tr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=au,au=16777216,fo(n,a,o),au=u):fo(n,a,o));break;default:fo(n,a,o)}}function z1(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function iu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Nn=u,B1(u,n)}z1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)U1(n),n=n.sibling}function U1(n){switch(n.tag){case 0:case 11:case 15:iu(n),n.flags&2048&&$a(9,n,n.return);break;case 3:iu(n);break;case 12:iu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Ch(n)):iu(n);break;default:iu(n)}}function Ch(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Nn=u,B1(u,n)}z1(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:$a(8,a,a.return),Ch(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(a));break;default:Ch(a)}n=n.sibling}}function B1(n,a){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:$a(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Fc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Nn=u;else e:for(o=n;Nn!==null;){u=Nn;var m=u.sibling,p=u.return;if(R1(u),u===o){Nn=null;break e}if(m!==null){m.return=p,Nn=m;break e}Nn=p}}}var bj={getCacheForType:function(n){var a=Rn(on),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return Rn(on).controller.signal}},vj=typeof WeakMap=="function"?WeakMap:Map,mt=0,Rt=null,Xe=null,Ze=0,vt=0,xs=null,Ka=!1,mo=!1,rg=!1,aa=0,Qt=0,Qa=0,rl=0,ag=0,ys=0,go=0,lu=null,rs=null,ig=!1,Rh=0,q1=0,kh=1/0,Dh=null,Ya=null,mn=0,Xa=null,po=null,ia=0,lg=0,og=null,F1=null,ou=0,cg=null;function bs(){return(mt&2)!==0&&Ze!==0?Ze&-Ze:G.T!==null?gg():Od()}function H1(){if(ys===0)if((Ze&536870912)===0||at){var n=An;An<<=1,(An&3932160)===0&&(An=262144),ys=n}else ys=536870912;return n=gs.current,n!==null&&(n.flags|=32),ys}function as(n,a,o){(n===Rt&&(vt===2||vt===9)||n.cancelPendingCommit!==null)&&(xo(n,0),Ja(n,Ze,ys,!1)),Me(n,o),((mt&2)===0||n!==Rt)&&(n===Rt&&((mt&2)===0&&(rl|=o),Qt===4&&Ja(n,Ze,ys,!1)),Ar(n))}function G1(n,a,o){if((mt&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Te(n,a),m=u?Nj(n,a):dg(n,a,!0),p=u;do{if(m===0){mo&&!u&&Ja(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!wj(o)){m=dg(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var j=n;m=lu;var O=j.current.memoizedState.isDehydrated;if(O&&(xo(j,b).flags|=256),b=dg(j,b,!1),b!==2){if(rg&&!O){j.errorRecoveryDisabledLanes|=p,rl|=p,m=4;break e}p=rs,rs=m,p!==null&&(rs===null?rs=p:rs.push.apply(rs,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){xo(n,0),Ja(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Ja(u,a,ys,!Ka);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Rh+300-Gt(),10<m)){if(Ja(u,a,ys,!Ka),de(u,0,!0)!==0)break e;ia=a,u.timeoutHandle=_v($1.bind(null,u,o,rs,Dh,ig,a,ys,rl,go,Ka,p,"Throttled",-0,0),m);break e}$1(u,o,rs,Dh,ig,a,ys,rl,go,Ka,p,null,-0,0)}}break}while(!0);Ar(n)}function $1(n,a,o,u,m,p,b,j,O,Q,se,oe,X,ee){if(n.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ys},L1(a,p,oe);var Se=(p&62914560)===p?Rh-Gt():(p&4194048)===p?q1-Gt():0;if(Se=aT(oe,Se),Se!==null){ia=p,n.cancelPendingCommit=Se(ev.bind(null,n,a,p,o,u,m,b,j,O,se,oe,null,X,ee)),Ja(n,p,b,!Q);return}}ev(n,a,p,o,u,m,b,j,O)}function wj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!fs(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ja(n,a,o,u){a&=~ag,a&=~rl,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-yt(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&ht(n,o,a)}function Oh(){return(mt&6)===0?(cu(0),!1):!0}function ug(){if(Xe!==null){if(vt===0)var n=Xe.return;else n=Xe,Yr=Yi=null,T0(n),io=null,Gc=0,n=Xe;for(;n!==null;)N1(n.alternate,n),n=n.return;Xe=null}}function xo(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Bj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ia=0,ug(),Rt=n,Xe=o=Kr(n.current,null),Ze=a,vt=0,xs=null,Ka=!1,mo=Te(n,a),rg=!1,go=ys=ag=rl=Qa=Qt=0,rs=lu=null,ig=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-yt(u),p=1<<m;a|=n[m],u&=~p}return aa=a,th(),o}function K1(n,a){$e=null,G.H=Zc,a===ao||a===ch?(a=cb(),vt=3):a===m0?(a=cb(),vt=4):vt=a===q0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,xs=a,Xe===null&&(Qt=1,Nh(n,Os(a,n.current)))}function Q1(){var n=gs.current;return n===null?!0:(Ze&4194048)===Ze?Ls===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?n===Ls:!1}function Y1(){var n=G.H;return G.H=Zc,n===null?Zc:n}function X1(){var n=G.A;return G.A=bj,n}function Mh(){Qt=4,Ka||(Ze&4194048)!==Ze&&gs.current!==null||(mo=!0),(Qa&134217727)===0&&(rl&134217727)===0||Rt===null||Ja(Rt,Ze,ys,!1)}function dg(n,a,o){var u=mt;mt|=2;var m=Y1(),p=X1();(Rt!==n||Ze!==a)&&(Dh=null,xo(n,a)),a=!1;var b=Qt;e:do try{if(vt!==0&&Xe!==null){var j=Xe,O=xs;switch(vt){case 8:ug(),b=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(a=!0);var Q=vt;if(vt=0,xs=null,yo(n,j,O,Q),o&&mo){b=0;break e}break;default:Q=vt,vt=0,xs=null,yo(n,j,O,Q)}}_j(),b=Qt;break}catch(se){K1(n,se)}while(!0);return a&&n.shellSuspendCounter++,Yr=Yi=null,mt=u,G.H=m,G.A=p,Xe===null&&(Rt=null,Ze=0,th()),b}function _j(){for(;Xe!==null;)J1(Xe)}function Nj(n,a){var o=mt;mt|=2;var u=Y1(),m=X1();Rt!==n||Ze!==a?(Dh=null,kh=Gt()+500,xo(n,a)):mo=Te(n,a);e:do try{if(vt!==0&&Xe!==null){a=Xe;var p=xs;t:switch(vt){case 1:vt=0,xs=null,yo(n,a,p,1);break;case 2:case 9:if(lb(p)){vt=0,xs=null,W1(a);break}a=function(){vt!==2&&vt!==9||Rt!==n||(vt=7),Ar(n)},p.then(a,a);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:lb(p)?(vt=0,xs=null,W1(a)):(vt=0,xs=null,yo(n,a,p,7));break;case 5:var b=null;switch(Xe.tag){case 26:b=Xe.memoizedState;case 5:case 27:var j=Xe;if(b?Pv(b):j.stateNode.complete){vt=0,xs=null;var O=j.sibling;if(O!==null)Xe=O;else{var Q=j.return;Q!==null?(Xe=Q,Vh(Q)):Xe=null}break t}}vt=0,xs=null,yo(n,a,p,5);break;case 6:vt=0,xs=null,yo(n,a,p,6);break;case 8:ug(),Qt=6;break e;default:throw Error(s(462))}}Ej();break}catch(se){K1(n,se)}while(!0);return Yr=Yi=null,G.H=u,G.A=m,mt=o,Xe!==null?0:(Rt=null,Ze=0,th(),Qt)}function Ej(){for(;Xe!==null&&!Ea();)J1(Xe)}function J1(n){var a=w1(n.alternate,n,aa);n.memoizedProps=n.pendingProps,a===null?Vh(n):Xe=a}function W1(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=g1(o,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=g1(o,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:T0(a);default:N1(o,a),a=Xe=Xy(a,aa),a=w1(o,a,aa)}n.memoizedProps=n.pendingProps,a===null?Vh(n):Xe=a}function yo(n,a,o,u){Yr=Yi=null,T0(a),io=null,Gc=0;var m=a.return;try{if(hj(n,m,a,o,Ze)){Qt=1,Nh(n,Os(o,n.current)),Xe=null;return}}catch(p){if(m!==null)throw Xe=m,p;Qt=1,Nh(n,Os(o,n.current)),Xe=null;return}a.flags&32768?(at||u===1?n=!0:mo||(Ze&536870912)!==0?n=!1:(Ka=n=!0,(u===2||u===9||u===3||u===6)&&(u=gs.current,u!==null&&u.tag===13&&(u.flags|=16384))),Z1(a,n)):Vh(a)}function Vh(n){var a=n;do{if((a.flags&32768)!==0){Z1(a,Ka);return}n=a.return;var o=gj(a.alternate,a,aa);if(o!==null){Xe=o;return}if(a=a.sibling,a!==null){Xe=a;return}Xe=a=n}while(a!==null);Qt===0&&(Qt=5)}function Z1(n,a){do{var o=pj(n.alternate,n);if(o!==null){o.flags&=32767,Xe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Xe=n;return}Xe=n=o}while(n!==null);Qt=6,Xe=null}function ev(n,a,o,u,m,p,b,j,O){n.cancelPendingCommit=null;do Ph();while(mn!==0);if((mt&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Zm,Fe(n,o,p,b,j,O),n===Rt&&(Xe=Rt=null,Ze=0),po=a,Xa=n,ia=o,lg=p,og=m,F1=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Aj(bn,function(){return av(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,m=ce.p,ce.p=2,b=mt,mt|=4;try{xj(n,a,o)}finally{mt=b,ce.p=m,G.T=u}}mn=1,tv(),nv(),sv()}}function tv(){if(mn===1){mn=0;var n=Xa,a=po,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var m=mt;mt|=4;try{M1(a,n);var p=Ng,b=By(n.containerInfo),j=p.focusedElem,O=p.selectionRange;if(b!==j&&j&&j.ownerDocument&&Uy(j.ownerDocument.documentElement,j)){if(O!==null&&Qm(j)){var Q=O.start,se=O.end;if(se===void 0&&(se=Q),"selectionStart"in j)j.selectionStart=Q,j.selectionEnd=Math.min(se,j.value.length);else{var oe=j.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Se=j.textContent.length,Le=Math.min(O.start,Se),It=O.end===void 0?Le:Math.min(O.end,Se);!ee.extend&&Le>It&&(b=It,It=Le,Le=b);var q=zy(j,Le),z=zy(j,It);if(q&&z&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var K=oe.createRange();K.setStart(q.node,q.offset),ee.removeAllRanges(),Le>It?(ee.addRange(K),ee.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),ee.addRange(K))}}}}for(oe=[],ee=j;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<oe.length;j++){var ie=oe[j];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Yh=!!_g,Ng=_g=null}finally{mt=m,ce.p=u,G.T=o}}n.current=a,mn=2}}function nv(){if(mn===2){mn=0;var n=Xa,a=po,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var m=mt;mt|=4;try{C1(n,a.alternate,a)}finally{mt=m,ce.p=u,G.T=o}}mn=3}}function sv(){if(mn===4||mn===3){mn=0,ja();var n=Xa,a=po,o=ia,u=F1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?mn=5:(mn=0,po=Xa=null,rv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ya=null),$s(o),a=a.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(He,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=G.T,m=ce.p,ce.p=2,G.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var j=u[b];p(j.value,{componentStack:j.stack})}}finally{G.T=a,ce.p=m}}(ia&3)!==0&&Ph(),Ar(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===cg?ou++:(ou=0,cg=n):ou=0,cu(0)}}function rv(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Fc(a)))}function Ph(){return tv(),nv(),sv(),av()}function av(){if(mn!==5)return!1;var n=Xa,a=lg;lg=0;var o=$s(ia),u=G.T,m=ce.p;try{ce.p=32>o?32:o,G.T=null,o=og,og=null;var p=Xa,b=ia;if(mn=0,po=Xa=null,ia=0,(mt&6)!==0)throw Error(s(331));var j=mt;if(mt|=4,U1(p.current),P1(p,p.current,b,o),mt=j,cu(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(He,p)}catch{}return!0}finally{ce.p=m,G.T=u,rv(n,a)}}function iv(n,a,o){a=Os(o,a),a=B0(n.stateNode,a,2),n=Fa(n,a,2),n!==null&&(Me(n,2),Ar(n))}function wt(n,a,o){if(n.tag===3)iv(n,n,o);else for(;a!==null;){if(a.tag===3){iv(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ya===null||!Ya.has(u))){n=Os(o,n),o=l1(2),u=Fa(a,o,2),u!==null&&(o1(o,u,a,n),Me(u,2),Ar(u));break}}a=a.return}}function hg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new vj;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(rg=!0,m.add(o),n=jj.bind(null,n,a,o),a.then(n,n))}function jj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Rt===n&&(Ze&o)===o&&(Qt===4||Qt===3&&(Ze&62914560)===Ze&&300>Gt()-Rh?(mt&2)===0&&xo(n,0):ag|=o,go===Ze&&(go=0)),Ar(n)}function lv(n,a){a===0&&(a=De()),n=$i(n,a),n!==null&&(Me(n,a),Ar(n))}function Tj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),lv(n,o)}function Sj(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),lv(n,o)}function Aj(n,a){return qt(n,a)}var Lh=null,bo=null,fg=!1,zh=!1,mg=!1,Wa=0;function Ar(n){n!==bo&&n.next===null&&(bo===null?Lh=bo=n:bo=bo.next=n),zh=!0,fg||(fg=!0,Cj())}function cu(n,a){if(!mg&&zh){mg=!0;do for(var o=!1,u=Lh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,j=u.pingedLanes;p=(1<<31-yt(42|n)+1)-1,p&=m&~(b&~j),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,dv(u,p))}else p=Ze,p=de(u,u===Rt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Te(u,p)||(o=!0,dv(u,p));u=u.next}while(o);mg=!1}}function Ij(){ov()}function ov(){zh=fg=!1;var n=0;Wa!==0&&Uj()&&(n=Wa);for(var a=Gt(),o=null,u=Lh;u!==null;){var m=u.next,p=cv(u,a);p===0?(u.next=null,o===null?Lh=m:o.next=m,m===null&&(bo=o)):(o=u,(n!==0||(p&3)!==0)&&(zh=!0)),u=m}mn!==0&&mn!==5||cu(n),Wa!==0&&(Wa=0)}function cv(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-yt(p),j=1<<b,O=m[b];O===-1?((j&o)===0||(j&u)!==0)&&(m[b]=_e(j,a)):O<=a&&(n.expiredLanes|=j),p&=~j}if(a=Rt,o=Ze,o=de(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(vt===2||vt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&yn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Te(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&yn(u),$s(o)){case 2:case 8:o=As;break;case 32:o=bn;break;case 268435456:o=Sa;break;default:o=bn}return u=uv.bind(null,n),o=qt(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&yn(u),n.callbackPriority=2,n.callbackNode=null,2}function uv(n,a){if(mn!==0&&mn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ph()&&n.callbackNode!==o)return null;var u=Ze;return u=de(n,n===Rt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(G1(n,u,a),cv(n,Gt()),n.callbackNode!=null&&n.callbackNode===o?uv.bind(null,n):null)}function dv(n,a){if(Ph())return null;G1(n,a,!0)}function Cj(){qj(function(){(mt&6)!==0?qt(Fr,Ij):ov()})}function gg(){if(Wa===0){var n=so;n===0&&(n=sn,sn<<=1,(sn&261888)===0&&(sn=256)),Wa=n}return Wa}function hv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ql(""+n)}function fv(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function Rj(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=hv((m[wn]||null).action),b=u.submitter;b&&(a=(a=b[wn]||null)?hv(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var j=new wr("action","action",null,u,m);n.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Wa!==0){var O=b?fv(m,b):new FormData(m);M0(o,{pending:!0,data:O,method:m.method,action:p},null,O)}}else typeof p=="function"&&(j.preventDefault(),O=b?fv(m,b):new FormData(m),M0(o,{pending:!0,data:O,method:m.method,action:p},p,O))},currentTarget:m}]})}}for(var pg=0;pg<Wm.length;pg++){var xg=Wm[pg],kj=xg.toLowerCase(),Dj=xg[0].toUpperCase()+xg.slice(1);er(kj,"on"+Dj)}er(Hy,"onAnimationEnd"),er(Gy,"onAnimationIteration"),er($y,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(Y5,"onTransitionRun"),er(X5,"onTransitionStart"),er(J5,"onTransitionCancel"),er(Ky,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function mv(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var j=u[b],O=j.instance,Q=j.currentTarget;if(j=j.listener,O!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(se){eh(se)}m.currentTarget=null,p=O}else for(b=0;b<u.length;b++){if(j=u[b],O=j.instance,Q=j.currentTarget,j=j.listener,O!==p&&m.isPropagationStopped())break e;p=j,m.currentTarget=Q;try{p(m)}catch(se){eh(se)}m.currentTarget=null,p=O}}}}function Je(n,a){var o=a[Pl];o===void 0&&(o=a[Pl]=new Set);var u=n+"__bubble";o.has(u)||(gv(a,n,2,!1),o.add(u))}function yg(n,a,o){var u=0;a&&(u|=4),gv(o,n,u,a)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function bg(n){if(!n[Uh]){n[Uh]=!0,_c.forEach(function(o){o!=="selectionchange"&&(Oj.has(o)||yg(o,!1,n),yg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Uh]||(a[Uh]=!0,yg("selectionchange",!1,a))}}function gv(n,a,o,u){switch(Hv(a)){case 2:var m=oT;break;case 8:m=cT;break;default:m=Og}o=m.bind(null,a,o,n),m=void 0,!Li||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function vg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var j=u.stateNode.containerInfo;if(j===m)break;if(b===4)for(b=u.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;j!==null;){if(b=mr(j),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){u=p=b;continue e}j=j.parentNode}}u=u.return}Da(function(){var Q=p,se=Cs(o),oe=[];e:{var X=Qy.get(n);if(X!==void 0){var ee=wr,Se=n;switch(n){case"keypress":if(Ui(o)===0)break e;case"keydown":case"keyup":ee=Jd;break;case"focusin":Se="focus",ee=qi;break;case"focusout":Se="blur",ee=qi;break;case"beforeblur":case"afterblur":ee=qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case Hy:case Gy:case $y:ee=Hd;break;case Ky:ee=S;break;case"scroll":case"scrollend":ee=Oc;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Gd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=$r;break;case"toggle":case"beforetoggle":ee=Ge}var Le=(a&4)!==0,It=!Le&&(n==="scroll"||n==="scrollend"),q=Le?X!==null?X+"Capture":null:X;Le=[];for(var z=Q,K;z!==null;){var ie=z;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||q===null||(ie=Xs(z,q),ie!=null&&Le.push(du(z,ie,K))),It)break;z=z.return}0<Le.length&&(X=new ee(X,Se,null,o,se),oe.push({event:X,listeners:Le}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",X&&o!==Rc&&(Se=o.relatedTarget||o.fromElement)&&(mr(Se)||Se[hr]))break e;if((ee||X)&&(X=se.window===se?se:(X=se.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Se=o.relatedTarget||o.toElement,ee=Q,Se=Se?mr(Se):null,Se!==null&&(It=c(Se),Le=Se.tag,Se!==It||Le!==5&&Le!==27&&Le!==6)&&(Se=null)):(ee=null,Se=Q),ee!==Se)){if(Le=Mc,ie="onMouseLeave",q="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(Le=$r,ie="onPointerLeave",q="onPointerEnter",z="pointer"),It=ee==null?X:ds(ee),K=Se==null?X:ds(Se),X=new Le(ie,z+"leave",ee,o,se),X.target=It,X.relatedTarget=K,ie=null,mr(se)===Q&&(Le=new Le(q,z+"enter",Se,o,se),Le.target=K,Le.relatedTarget=It,ie=Le),It=ie,ee&&Se)t:{for(Le=Mj,q=ee,z=Se,K=0,ie=q;ie;ie=Le(ie))K++;ie=0;for(var Ve=z;Ve;Ve=Le(Ve))ie++;for(;0<K-ie;)q=Le(q),K--;for(;0<ie-K;)z=Le(z),ie--;for(;K--;){if(q===z||z!==null&&q===z.alternate){Le=q;break t}q=Le(q),z=Le(z)}Le=null}else Le=null;ee!==null&&pv(oe,X,ee,Le,!1),Se!==null&&It!==null&&pv(oe,It,Se,Le,!0)}}e:{if(X=Q?ds(Q):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var ut=Dy;else if(Ry(X))if(Oy)ut=$5;else{ut=H5;var ke=F5}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Bl(Q.elementType)&&(ut=Dy):ut=G5;if(ut&&(ut=ut(n,Q))){ky(oe,ut,o,se);break e}ke&&ke(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Ac(X,"number",X.value)}switch(ke=Q?ds(Q):window,n){case"focusin":(Ry(ke)||ke.contentEditable==="true")&&(Yl=ke,Ym=Q,Uc=null);break;case"focusout":Uc=Ym=Yl=null;break;case"mousedown":Xm=!0;break;case"contextmenu":case"mouseup":case"dragend":Xm=!1,qy(oe,o,se);break;case"selectionchange":if(Q5)break;case"keydown":case"keyup":qy(oe,o,se)}var Ke;if(ft)e:{switch(n){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Ql?Fi(n,o)&&(et="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(et="onCompositionStart");et&&(Er&&o.locale!=="ko"&&(Ql||et!=="onCompositionStart"?et==="onCompositionEnd"&&Ql&&(Ke=Dc()):(vr=se,kc="value"in vr?vr.value:vr.textContent,Ql=!0)),ke=Bh(Q,et),0<ke.length&&(et=new Nr(et,n,null,o,se),oe.push({event:et,listeners:ke}),Ke?et.data=Ke:(Ke=Kl(o),Ke!==null&&(et.data=Ke)))),(Ke=ks?z5(n,o):U5(n,o))&&(et=Bh(Q,"onBeforeInput"),0<et.length&&(ke=new Nr("onBeforeInput","beforeinput",null,o,se),oe.push({event:ke,listeners:et}),ke.data=Ke)),Rj(oe,n,Q,o,se)}mv(oe,a)})}function du(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Bh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Xs(n,o),m!=null&&u.unshift(du(n,m,p)),m=Xs(n,a),m!=null&&u.push(du(n,m,p))),n.tag===3)return u;n=n.return}return[]}function Mj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function pv(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var j=o,O=j.alternate,Q=j.stateNode;if(j=j.tag,O!==null&&O===u)break;j!==5&&j!==26&&j!==27||Q===null||(O=Q,m?(Q=Xs(o,p),Q!=null&&b.unshift(du(o,Q,O))):m||(Q=Xs(o,p),Q!=null&&b.push(du(o,Q,O)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var Vj=/\r\n?/g,Pj=/\u0000|\uFFFD/g;function xv(n){return(typeof n=="string"?n:""+n).replace(Vj,`
`).replace(Pj,"")}function yv(n,a){return a=xv(a),xv(n)===a}function At(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||es(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&es(n,""+u);break;case"className":hs(n,"class",u);break;case"tabIndex":hs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(n,o,u);break;case"style":Cc(n,u,p);break;case"data":if(a!=="object"){hs(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ql(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&At(n,a,"name",m.name,m,null),At(n,a,"formEncType",m.formEncType,m,null),At(n,a,"formMethod",m.formMethod,m,null),At(n,a,"formTarget",m.formTarget,m,null)):(At(n,a,"encType",m.encType,m,null),At(n,a,"method",m.method,m,null),At(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ql(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Ys);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ql(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Je("beforetoggle",n),Je("toggle",n),zl(n,"popover",u);break;case"xlinkActuate":ln(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ln(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ln(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ln(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ln(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ln(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ln(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ln(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ln(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Bd.get(o)||o,zl(n,o,u))}}function wg(n,a,o,u,m,p){switch(o){case"style":Cc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?es(n,u):(typeof u=="number"||typeof u=="bigint")&&es(n,""+u);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[wn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):zl(n,o,u)}}}function Dn(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",n),Je("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:At(n,a,p,b,o,null)}}m&&At(n,a,"srcSet",o.srcSet,o,null),u&&At(n,a,"src",o.src,o,null);return;case"input":Je("invalid",n);var j=p=b=m=null,O=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":m=se;break;case"type":b=se;break;case"checked":O=se;break;case"defaultChecked":Q=se;break;case"value":p=se;break;case"defaultValue":j=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,a));break;default:At(n,a,u,se,o,null)}}Ld(n,p,j,O,Q,b,m,!1);return;case"select":Je("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(j=o[m],j!=null))switch(m){case"value":p=j;break;case"defaultValue":b=j;break;case"multiple":u=j;default:At(n,a,m,j,o,null)}a=p,o=b,n.multiple=!!u,a!=null?Ia(n,!!u,a,!1):o!=null&&Ia(n,!!u,o,!0);return;case"textarea":Je("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(j=o[b],j!=null))switch(b){case"value":u=j;break;case"defaultValue":m=j;break;case"children":p=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:At(n,a,b,j,o,null)}Ca(n,u,m,p);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:At(n,a,O,u,o,null)}return;case"dialog":Je("beforetoggle",n),Je("toggle",n),Je("cancel",n),Je("close",n);break;case"iframe":case"object":Je("load",n);break;case"video":case"audio":for(u=0;u<uu.length;u++)Je(uu[u],n);break;case"image":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"embed":case"source":case"link":Je("error",n),Je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:At(n,a,Q,u,o,null)}return;default:if(Bl(a)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&wg(n,a,se,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&At(n,a,j,u,o,null))}function Lj(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,j=null,O=null,Q=null,se=null;for(ee in o){var oe=o[ee];if(o.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=oe;default:u.hasOwnProperty(ee)||At(n,a,ee,null,u,oe)}}for(var X in u){var ee=u[X];if(oe=o[X],u.hasOwnProperty(X)&&(ee!=null||oe!=null))switch(X){case"type":p=ee;break;case"name":m=ee;break;case"checked":Q=ee;break;case"defaultChecked":se=ee;break;case"value":b=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:ee!==oe&&At(n,a,X,ee,u,oe)}}Ul(n,b,j,O,Q,se,p,m);return;case"select":ee=b=j=X=null;for(p in o)if(O=o[p],o.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":ee=O;default:u.hasOwnProperty(p)||At(n,a,p,null,u,O)}for(m in u)if(p=u[m],O=o[m],u.hasOwnProperty(m)&&(p!=null||O!=null))switch(m){case"value":X=p;break;case"defaultValue":j=p;break;case"multiple":b=p;default:p!==O&&At(n,a,m,p,u,O)}a=j,o=b,u=ee,X!=null?Ia(n,!!o,X,!1):!!u!=!!o&&(a!=null?Ia(n,!!o,a,!0):Ia(n,!!o,o?[]:"",!1));return;case"textarea":ee=X=null;for(j in o)if(m=o[j],o.hasOwnProperty(j)&&m!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:At(n,a,j,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&At(n,a,b,m,u,p)}zd(n,X,ee);return;case"option":for(var Se in o)if(X=o[Se],o.hasOwnProperty(Se)&&X!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:At(n,a,Se,null,u,X)}for(O in u)if(X=u[O],ee=o[O],u.hasOwnProperty(O)&&X!==ee&&(X!=null||ee!=null))switch(O){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:At(n,a,O,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in o)X=o[Le],o.hasOwnProperty(Le)&&X!=null&&!u.hasOwnProperty(Le)&&At(n,a,Le,null,u,X);for(Q in u)if(X=u[Q],ee=o[Q],u.hasOwnProperty(Q)&&X!==ee&&(X!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:At(n,a,Q,X,u,ee)}return;default:if(Bl(a)){for(var It in o)X=o[It],o.hasOwnProperty(It)&&X!==void 0&&!u.hasOwnProperty(It)&&wg(n,a,It,void 0,u,X);for(se in u)X=u[se],ee=o[se],!u.hasOwnProperty(se)||X===ee||X===void 0&&ee===void 0||wg(n,a,se,X,u,ee);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&At(n,a,q,null,u,X);for(oe in u)X=u[oe],ee=o[oe],!u.hasOwnProperty(oe)||X===ee||X==null&&ee==null||At(n,a,oe,X,u,ee)}function bv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,j=m.duration;if(p&&j&&bv(b)){for(b=0,j=m.responseEnd,u+=1;u<o.length;u++){var O=o[u],Q=O.startTime;if(Q>j)break;var se=O.transferSize,oe=O.initiatorType;se&&bv(oe)&&(O=O.responseEnd,b+=se*(O<j?1:(j-Q)/(O-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _g=null,Ng=null;function qh(n){return n.nodeType===9?n:n.ownerDocument}function vv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wv(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Eg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jg=null;function Uj(){var n=window.event;return n&&n.type==="popstate"?n===jg?!1:(jg=n,!0):(jg=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,Bj=typeof clearTimeout=="function"?clearTimeout:void 0,Nv=typeof Promise=="function"?Promise:void 0,qj=typeof queueMicrotask=="function"?queueMicrotask:typeof Nv<"u"?function(n){return Nv.resolve(null).then(n).catch(Fj)}:_v;function Fj(n){setTimeout(function(){throw n})}function Za(n){return n==="head"}function Ev(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),No(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")hu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,hu(o);for(var p=o.firstChild;p;){var b=p.nextSibling,j=p.nodeName;p[fr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&hu(n.ownerDocument.body);o=m}while(o);No(a)}function jv(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Tg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tg(o),Ll(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Hj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[fr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=zs(n.nextSibling),n===null)break}return null}function Gj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=zs(n.nextSibling),n===null))return null;return n}function Tv(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=zs(n.nextSibling),n===null))return null;return n}function Sg(n){return n.data==="$?"||n.data==="$~"}function Ag(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function $j(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function zs(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Ig=null;function Sv(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return zs(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function Av(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function Iv(n,a,o){switch(a=qh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function hu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Ll(n)}var Us=new Map,Cv=new Set;function Fh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var la=ce.d;ce.d={f:Kj,r:Qj,D:Yj,C:Xj,L:Jj,m:Wj,X:eT,S:Zj,M:tT};function Kj(){var n=la.f(),a=Oh();return n||a}function Qj(n){var a=Is(n);a!==null&&a.tag===5&&a.type==="form"?Kb(a):la.r(n)}var vo=typeof document>"u"?null:document;function Rv(n,a,o){var u=vo;if(u&&typeof a=="string"&&a){var m=Zn(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Cv.has(m)||(Cv.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Dn(a,"link",n),an(a),u.head.appendChild(a)))}}function Yj(n){la.D(n),Rv("dns-prefetch",n,null)}function Xj(n,a){la.C(n,a),Rv("preconnect",n,a)}function Jj(n,a,o){la.L(n,a,o);var u=vo;if(u&&n&&a){var m='link[rel="preload"][as="'+Zn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Zn(o.imageSizes)+'"]')):m+='[href="'+Zn(n)+'"]';var p=m;switch(a){case"style":p=wo(n);break;case"script":p=_o(n)}Us.has(p)||(n=w({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Us.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(fu(p))||a==="script"&&u.querySelector(mu(p))||(a=u.createElement("link"),Dn(a,"link",n),an(a),u.head.appendChild(a)))}}function Wj(n,a){la.m(n,a);var o=vo;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Zn(u)+'"][href="'+Zn(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=_o(n)}if(!Us.has(p)&&(n=w({rel:"modulepreload",href:n},a),Us.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mu(p)))return}u=o.createElement("link"),Dn(u,"link",n),an(u),o.head.appendChild(u)}}}function Zj(n,a,o){la.S(n,a,o);var u=vo;if(u&&n){var m=gr(u).hoistableStyles,p=wo(n);a=a||"default";var b=m.get(p);if(!b){var j={loading:0,preload:null};if(b=u.querySelector(fu(p)))j.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Us.get(p))&&Cg(n,o);var O=b=u.createElement("link");an(O),Dn(O,"link",n),O._p=new Promise(function(Q,se){O.onload=Q,O.onerror=se}),O.addEventListener("load",function(){j.loading|=1}),O.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Hh(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:j},m.set(p,b)}}}function eT(n,a){la.X(n,a);var o=vo;if(o&&n){var u=gr(o).hoistableScripts,m=_o(n),p=u.get(m);p||(p=o.querySelector(mu(m)),p||(n=w({src:n,async:!0},a),(a=Us.get(m))&&Rg(n,a),p=o.createElement("script"),an(p),Dn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function tT(n,a){la.M(n,a);var o=vo;if(o&&n){var u=gr(o).hoistableScripts,m=_o(n),p=u.get(m);p||(p=o.querySelector(mu(m)),p||(n=w({src:n,async:!0,type:"module"},a),(a=Us.get(m))&&Rg(n,a),p=o.createElement("script"),an(p),Dn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function kv(n,a,o,u){var m=(m=Ee.current)?Fh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=wo(o.href),o=gr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=wo(o.href);var p=gr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(fu(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Us.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Us.set(n,o),p||nT(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=_o(o),o=gr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function wo(n){return'href="'+Zn(n)+'"'}function fu(n){return'link[rel="stylesheet"]['+n+"]"}function Dv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function nT(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Dn(a,"link",o),an(a),n.head.appendChild(a))}function _o(n){return'[src="'+Zn(n)+'"]'}function mu(n){return"script[async]"+n}function Ov(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(u)return a.instance=u,an(u),u;var m=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),an(u),Dn(u,"style",m),Hh(u,o.precedence,n),a.instance=u;case"stylesheet":m=wo(o.href);var p=n.querySelector(fu(m));if(p)return a.state.loading|=4,a.instance=p,an(p),p;u=Dv(o),(m=Us.get(m))&&Cg(u,m),p=(n.ownerDocument||n).createElement("link"),an(p);var b=p;return b._p=new Promise(function(j,O){b.onload=j,b.onerror=O}),Dn(p,"link",u),a.state.loading|=4,Hh(p,o.precedence,n),a.instance=p;case"script":return p=_o(o.src),(m=n.querySelector(mu(p)))?(a.instance=m,an(m),m):(u=o,(m=Us.get(p))&&(u=w({},o),Rg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),an(m),Dn(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Hh(u,o.precedence,n));return a.instance}function Hh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var j=u[b];if(j.dataset.precedence===a)p=j;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Cg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Rg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Gh=null;function Mv(n,a,o){if(Gh===null){var u=new Map,m=Gh=new Map;m.set(o,u)}else m=Gh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[fr]||p[rn]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var j=u.get(b);j?j.push(p):u.set(b,[p])}}return u}function Vv(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function sT(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Pv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function rT(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=wo(u.href),p=a.querySelector(fu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=$h.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,an(p);return}p=a.ownerDocument||a,u=Dv(u),(m=Us.get(m))&&Cg(u,m),p=p.createElement("link"),an(p);var b=p;b._p=new Promise(function(j,O){b.onload=j,b.onerror=O}),Dn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=$h.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var kg=0;function aT(n,a){return n.stylesheets&&n.count===0&&Qh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&kg===0&&(kg=62500*zj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>kg?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function $h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kh=null;function Qh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kh=new Map,a.forEach(iT,n),Kh=null,$h.call(n))}function iT(n,a){if(!(a.state.loading&4)){var o=Kh.get(n);if(o)var u=o.get(null);else{o=new Map,Kh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=$h.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var gu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function lT(n,a,o,u,m,p,b,j,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Lv(n,a,o,u,m,p,b,j,O,Q,se,oe){return n=new lT(n,a,o,b,O,Q,se,oe,j),a=1,p===!0&&(a|=24),p=ms(3,null,null,a),n.current=p,p.stateNode=n,a=d0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},g0(p),n}function zv(n){return n?(n=Wl,n):Wl}function Uv(n,a,o,u,m,p){m=zv(m),u.context===null?u.context=m:u.pendingContext=m,u=qa(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Fa(n,u,a),o!==null&&(as(o,n,a),Kc(o,n,a))}function Bv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Dg(n,a){Bv(n,a),(n=n.alternate)&&Bv(n,a)}function qv(n){if(n.tag===13||n.tag===31){var a=$i(n,67108864);a!==null&&as(a,n,67108864),Dg(n,67108864)}}function Fv(n){if(n.tag===13||n.tag===31){var a=bs();a=vn(a);var o=$i(n,a);o!==null&&as(o,n,a),Dg(n,a)}}var Yh=!0;function oT(n,a,o,u){var m=G.T;G.T=null;var p=ce.p;try{ce.p=2,Og(n,a,o,u)}finally{ce.p=p,G.T=m}}function cT(n,a,o,u){var m=G.T;G.T=null;var p=ce.p;try{ce.p=8,Og(n,a,o,u)}finally{ce.p=p,G.T=m}}function Og(n,a,o,u){if(Yh){var m=Mg(u);if(m===null)vg(n,a,u,Xh,o),Gv(n,u);else if(dT(m,n,a,o,u))u.stopPropagation();else if(Gv(n,u),a&4&&-1<uT.indexOf(n)){for(;m!==null;){var p=Is(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Fn(p.pendingLanes);if(b!==0){var j=p;for(j.pendingLanes|=2,j.entangledLanes|=2;b;){var O=1<<31-yt(b);j.entanglements[1]|=O,b&=~O}Ar(p),(mt&6)===0&&(kh=Gt()+500,cu(0))}}break;case 31:case 13:j=$i(p,2),j!==null&&as(j,p,2),Oh(),Dg(p,2)}if(p=Mg(u),p===null&&vg(n,a,u,Xh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else vg(n,a,u,null,o)}}function Mg(n){return n=Cs(n),Vg(n)}var Xh=null;function Vg(n){if(Xh=null,n=mr(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Xh=n,null}function Hv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gs()){case Fr:return 2;case As:return 8;case bn:case Ta:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var Pg=!1,ei=null,ti=null,ni=null,pu=new Map,xu=new Map,si=[],uT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gv(n,a){switch(n){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":pu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(a.pointerId)}}function yu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Is(a),a!==null&&qv(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function dT(n,a,o,u,m){switch(a){case"focusin":return ei=yu(ei,n,a,o,u,m),!0;case"dragenter":return ti=yu(ti,n,a,o,u,m),!0;case"mouseover":return ni=yu(ni,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return pu.set(p,yu(pu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,xu.set(p,yu(xu.get(p)||null,n,a,o,u,m)),!0}return!1}function $v(n){var a=mr(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Ks(n.priority,function(){Fv(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,Ks(n.priority,function(){Fv(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jh(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Mg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Rc=u,o.target.dispatchEvent(u),Rc=null}else return a=Is(o),a!==null&&qv(a),n.blockedOn=o,!1;a.shift()}return!0}function Kv(n,a,o){Jh(n)&&o.delete(a)}function hT(){Pg=!1,ei!==null&&Jh(ei)&&(ei=null),ti!==null&&Jh(ti)&&(ti=null),ni!==null&&Jh(ni)&&(ni=null),pu.forEach(Kv),xu.forEach(Kv)}function Wh(n,a){n.blockedOn===a&&(n.blockedOn=null,Pg||(Pg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,hT)))}var Zh=null;function Qv(n){Zh!==n&&(Zh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zh===n&&(Zh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Vg(u||o)===null)continue;break}var p=Is(o);p!==null&&(n.splice(a,3),a-=3,M0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function No(n){function a(O){return Wh(O,n)}ei!==null&&Wh(ei,n),ti!==null&&Wh(ti,n),ni!==null&&Wh(ni,n),pu.forEach(a),xu.forEach(a);for(var o=0;o<si.length;o++){var u=si[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<si.length&&(o=si[0],o.blockedOn===null);)$v(o),o.blockedOn===null&&si.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[wn]||null;if(typeof p=="function")b||Qv(o);else if(b){var j=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[wn]||null)j=b.formAction;else if(Vg(m)!==null)continue}else j=b.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),Qv(o)}}}function Yv(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Lg(n){this._internalRoot=n}ef.prototype.render=Lg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=bs();Uv(o,u,n,a,null,null)},ef.prototype.unmount=Lg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Uv(n.current,2,null,n,null,null),Oh(),a[hr]=null}};function ef(n){this._internalRoot=n}ef.prototype.unstable_scheduleHydration=function(n){if(n){var a=Od();n={blockedOn:null,target:n,priority:a};for(var o=0;o<si.length&&a!==0&&a<si[o].priority;o++);si.splice(o,0,n),o===0&&$v(n)}};var Xv=e.version;if(Xv!=="19.2.0")throw Error(s(527,Xv,"19.2.0"));ce.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var fT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{He=tf.inject(fT),ct=tf}catch{}}return vu.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=s1,p=r1,b=a1;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=Lv(n,1,!1,null,null,o,u,null,m,p,b,Yv),n[hr]=a.current,bg(n),new Lg(a)},vu.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=s1,b=r1,j=a1,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),a=Lv(n,1,!0,a,o??null,u,m,O,p,b,j,Yv),a.context=zv(null),o=a.current,u=bs(),u=vn(u),m=qa(u),m.callback=null,Fa(o,m,u),o=u,a.current.lanes=o,Me(a,o),Ar(a),n[hr]=a.current,bg(n),new ef(a)},vu.version="19.2.0",vu}var iw;function NT(){if(iw)return Bg.exports;iw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bg.exports=_T(),Bg.exports}var ET=NT();const jT=S2(ET);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ST=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),lw=r=>{const e=ST(r);return e.charAt(0).toUpperCase()+e.slice(1)},I2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),AT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>M.createElement("svg",{ref:g,...IT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:I2("lucide",l),...!c&&!AT(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,v])=>M.createElement(x,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=M.forwardRef(({className:s,...l},c)=>M.createElement(CT,{ref:c,iconNode:e,className:I2(`lucide-${TT(lw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=lw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],kT=pe("activity",RT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Af=pe("arrow-left",DT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Bt=pe("arrow-right",OT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fd=pe("award",MT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],nf=pe("bell",VT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bn=pe("book-open",PT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],$u=pe("book",LT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ox=pe("brain",zT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],BT=pe("briefcase",UT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ku=pe("calendar",qT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],C2=pe("chart-column",FT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],R2=pe("check",HT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ni=pe("chevron-down",GT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oa=pe("chevron-left",$T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gg=pe("chevron-right",KT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],If=pe("circle-alert",QT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ma=pe("circle-check-big",YT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jn=pe("circle-check",XT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k2=pe("circle-play",JT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ow=pe("circle-plus",WT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Or=pe("circle-question-mark",ZT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],tS=pe("circle-user",eS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sS=pe("circle-x",nS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cx=pe("clock",rS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],iS=pe("cloud-download",aS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],D2=pe("cloud-upload",lS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],cS=pe("coffee",oS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O2=pe("copy",uS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],cc=pe("crown",dS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bp=pe("download",hS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],M2=pe("ellipsis",fS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vp=pe("eye",mS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],qo=pe("facebook",gS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],xS=pe("file-check",pS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],bS=pe("file-plus",yS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],wS=pe("file-search",vS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qn=pe("file-text",_S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ux=pe("flag",NS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Cf=pe("flame",ES);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Mo=pe("folder-open",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],SS=pe("globe",TS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ga=pe("graduation-cap",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Qu=pe("house",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],V2=pe("info",CS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],P2=pe("instagram",RS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],om=pe("languages",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Yu=pe("layers",DS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cw=pe("layout-dashboard",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],VS=pe("link",MS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],LS=pe("list",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gt=pe("loader-circle",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wp=pe("log-in",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ci=pe("lock",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Xu=pe("log-out",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Rr=pe("mail",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_p=pe("map-pin",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],$S=pe("map",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Np=pe("medal",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],uw=pe("megaphone",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],XS=pe("menu",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],wl=pe("message-circle",JS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cm=pe("message-square",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Fo=pe("monitor",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],L2=pe("move-right",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],nA=pe("octagon-alert",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dw=pe("palette",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],aA=pe("pen-line",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],dx=pe("pen-tool",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],oA=pe("percent",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],uA=pe("quote",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],md=pe("refresh-cw",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],z2=pe("rocket",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],U2=pe("rotate-ccw",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pi=pe("save",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],hx=pe("school",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Hs=pe("search",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ha=pe("send",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Rf=pe("share-2",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vA=pe("shield-alert",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fx=pe("shield-check",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],NA=pe("smartphone",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jA=pe("sparkles",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ep=pe("square-pen",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_l=pe("star",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],B2=pe("tag",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],um=pe("target",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],RA=pe("text-align-start",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],DA=pe("timer",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ei=pe("trash-2",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],VA=pe("trending-up",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mx=pe("triangle-alert",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],pl=pe("trophy",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],UA=pe("type",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$n=pe("user",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dm=pe("users",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HA=pe("wifi-off",FA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kn=pe("x",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gd=pe("zap",$A),KA=()=>{};var hw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},QA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},F2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,v=c>>2,w=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,C=x&63;g||(C=64,d||(N=64)),s.push(t[v],t[w],t[N],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(q2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):QA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const w=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||w==null)throw new YA;const N=c<<2|f>>4;if(s.push(N),x!==64){const C=f<<4&240|x>>2;if(s.push(C),w!==64){const V=x<<6&192|w;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class YA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(r){const e=q2(r);return F2.encodeByteArray(e,!0)},H2=function(r){return XA(r).replace(/\./g,"")},G2=function(r){try{return F2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>$2().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof hw>"u")return;const r=hw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ZA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&G2(r[1]);return e&&JSON.parse(e)},hm=()=>{try{return KA()||JA()||WA()||ZA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},e3=r=>{var e,t;return(t=(e=hm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},K2=()=>{var r;return(r=hm())==null?void 0:r.config},Q2=r=>{var e;return(e=hm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y2(r){return(await fetch(r,{credentials:"include"})).ok}const Ou={};function n3(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ou))Ou[e]?r.emulator.push(e):r.prod.push(e);return r}function s3(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let fw=!1;function r3(r,e){if(typeof window>"u"||typeof document>"u"||!uc(window.location.host)||Ou[r]===e||Ou[r]||fw)return;Ou[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=n3().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{fw=!0,d()},N}function v(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=s3(s),C=t("text"),V=document.getElementById(C)||document.createElement("span"),Z=t("learnmore"),B=document.getElementById(Z)||document.createElement("a"),ge=t("preprendIcon"),ae=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ne=N.element;f(ne),v(B,Z);const xe=x();g(ae,ge),ne.append(ae,V,B,xe),document.body.appendChild(ne)}c?(V.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function X2(){var e;const r=(e=hm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function l3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o3(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function W2(){return!X2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z2(){return!X2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gx(){try{return typeof indexedDB=="object"}catch{return!1}}function eN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function c3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="FirebaseError";class cr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=u3,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ol.prototype.create)}}class Ol{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?d3(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new cr(l,f,s)}}function d3(r,e){return r.replace(h3,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const h3=/\{\$([^}]+)}/g;function f3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ji(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(mw(c)&&mw(d)){if(!ji(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function mw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Su(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Au(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function m3(r,e){const t=new g3(r,e);return t.subscribe.bind(t)}class g3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");p3(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=$g),l.error===void 0&&(l.error=$g),l.complete===void 0&&(l.complete=$g);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p3(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=1e3,y3=2,b3=14400*1e3,v3=.5;function gw(r,e=x3,t=y3){const s=e*Math.pow(t,r),l=Math.round(v3*s*(Math.random()-.5)*2);return Math.min(b3,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r){return r&&r._delegate?r._delegate:r}class ir{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new t3;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N3(e))try{this.getOrInitializeService({instanceIdentifier:ll})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ll){return this.instances.has(e)}getOptions(e=ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_3(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ll){return this.component?this.component.multipleInstances?e:ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _3(r){return r===ll?void 0:r}function N3(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new w3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const j3={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},T3=tt.INFO,S3={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},A3=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=S3[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=T3,this._logHandler=A3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const I3=(r,e)=>e.some(t=>r instanceof t);let pw,xw;function C3(){return pw||(pw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R3(){return xw||(xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tN=new WeakMap,jp=new WeakMap,nN=new WeakMap,Kg=new WeakMap,px=new WeakMap;function k3(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(xi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&tN.set(t,r)}).catch(()=>{}),px.set(e,r),e}function D3(r){if(jp.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});jp.set(r,e)}let Tp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return jp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||nN.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function O3(r){Tp=r(Tp)}function M3(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Qg(this),e,...t);return nN.set(s,e.sort?e.sort():[e]),xi(s)}:R3().includes(r)?function(...e){return r.apply(Qg(this),e),xi(tN.get(this))}:function(...e){return xi(r.apply(Qg(this),e))}}function V3(r){return typeof r=="function"?M3(r):(r instanceof IDBTransaction&&D3(r),I3(r,C3())?new Proxy(r,Tp):r)}function xi(r){if(r instanceof IDBRequest)return k3(r);if(Kg.has(r))return Kg.get(r);const e=V3(r);return e!==r&&(Kg.set(r,e),px.set(e,r)),e}const Qg=r=>px.get(r);function sN(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=xi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(xi(d.result),g.oldVersion,g.newVersion,xi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const P3=["get","getKey","getAll","getAllKeys","count"],L3=["put","add","delete","clear"],Yg=new Map;function yw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=L3.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||P3.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return Yg.set(e,c),c}O3(r=>({...r,get:(e,t,s)=>yw(e,t)||r.get(e,t,s),has:(e,t)=>!!yw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(U3(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function U3(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sp="@firebase/app",bw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new fm("@firebase/app"),B3="@firebase/app-compat",q3="@firebase/analytics-compat",F3="@firebase/analytics",H3="@firebase/app-check-compat",G3="@firebase/app-check",$3="@firebase/auth",K3="@firebase/auth-compat",Q3="@firebase/database",Y3="@firebase/data-connect",X3="@firebase/database-compat",J3="@firebase/functions",W3="@firebase/functions-compat",Z3="@firebase/installations",eI="@firebase/installations-compat",tI="@firebase/messaging",nI="@firebase/messaging-compat",sI="@firebase/performance",rI="@firebase/performance-compat",aI="@firebase/remote-config",iI="@firebase/remote-config-compat",lI="@firebase/storage",oI="@firebase/storage-compat",cI="@firebase/firestore",uI="@firebase/ai",dI="@firebase/firestore-compat",hI="firebase",fI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]",mI={[Sp]:"fire-core",[B3]:"fire-core-compat",[F3]:"fire-analytics",[q3]:"fire-analytics-compat",[G3]:"fire-app-check",[H3]:"fire-app-check-compat",[$3]:"fire-auth",[K3]:"fire-auth-compat",[Q3]:"fire-rtdb",[Y3]:"fire-data-connect",[X3]:"fire-rtdb-compat",[J3]:"fire-fn",[W3]:"fire-fn-compat",[Z3]:"fire-iid",[eI]:"fire-iid-compat",[tI]:"fire-fcm",[nI]:"fire-fcm-compat",[sI]:"fire-perf",[rI]:"fire-perf-compat",[aI]:"fire-rc",[iI]:"fire-rc-compat",[lI]:"fire-gcs",[oI]:"fire-gcs-compat",[cI]:"fire-fst",[dI]:"fire-fst-compat",[uI]:"fire-vertex","fire-js":"fire-js",[hI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Map,gI=new Map,Ip=new Map;function vw(r,e){try{r.container.addComponent(e)}catch(t){pa.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zr(r){const e=r.name;if(Ip.has(e))return pa.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,r);for(const t of kf.values())vw(t,r);for(const t of gI.values())vw(t,r);return!0}function Ml(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Bs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Ol("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=fI;function rN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Ap,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw yi.create("bad-app-name",{appName:String(l)});if(t||(t=K2()),!t)throw yi.create("no-options");const c=kf.get(l);if(c){if(ji(t,c.options)&&ji(s,c.config))return c;throw yi.create("duplicate-app",{appName:l})}const d=new E3(l);for(const g of Ip.values())d.addComponent(g);const f=new xI(t,s,d);return kf.set(l,f),f}function aN(r=Ap){const e=kf.get(r);if(!e&&r===Ap&&K2())return rN();if(!e)throw yi.create("no-app",{appName:r});return e}function Fs(r,e,t){let s=mI[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pa.warn(d.join(" "));return}zr(new ir(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebase-heartbeat-database",bI=1,Ju="firebase-heartbeat-store";let Xg=null;function iN(){return Xg||(Xg=sN(yI,bI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(r=>{throw yi.create("idb-open",{originalErrorMessage:r.message})})),Xg}async function vI(r){try{const t=(await iN()).transaction(Ju),s=await t.objectStore(Ju).get(lN(r));return await t.done,s}catch(e){if(e instanceof cr)pa.warn(e.message);else{const t=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pa.warn(t.message)}}}async function ww(r,e){try{const s=(await iN()).transaction(Ju,"readwrite");await s.objectStore(Ju).put(e,lN(r)),await s.done}catch(t){if(t instanceof cr)pa.warn(t.message);else{const s=yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pa.warn(s.message)}}}function lN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=1024,_I=30;class NI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=_w();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>_I){const d=TI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_w(),{heartbeatsToSend:s,unsentEntries:l}=EI(this._heartbeatsCache.heartbeats),c=H2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return pa.warn(t),""}}}function _w(){return new Date().toISOString().substring(0,10)}function EI(r,e=wI){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),Nw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),Nw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class jI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gx()?eN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nw(r){return H2(JSON.stringify({version:2,heartbeats:r})).length}function TI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){zr(new ir("platform-logger",e=>new z3(e),"PRIVATE")),zr(new ir("heartbeat",e=>new NI(e),"PRIVATE")),Fs(Sp,bw,r),Fs(Sp,bw,"esm2020"),Fs("fire-js","")}SI("");var AI="firebase",II="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fs(AI,II,"app");function oN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CI=oN,cN=new Ol("auth","Firebase",oN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new fm("@firebase/auth");function RI(r,...e){Df.logLevel<=tt.WARN&&Df.warn(`Auth (${dc}): ${r}`,...e)}function hf(r,...e){Df.logLevel<=tt.ERROR&&Df.error(`Auth (${dc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(r,...e){throw xx(r,...e)}function Mr(r,...e){return xx(r,...e)}function uN(r,e,t){const s={...CI(),[e]:t};return new Ol("auth","Firebase",s).create(e,{appName:r.name})}function fa(r){return uN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return cN.create(r,...e)}function ze(r,e,...t){if(!r)throw xx(e,...t)}function ca(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hf(e),new Error(e)}function xa(r,e){r||ca(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function kI(){return Ew()==="http:"||Ew()==="https:"}function Ew(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kI()||J2()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.shortDelay=e,this.longDelay=t,xa(t>e,"Short delay should be less than long delay!"),this.isMobile=a3()||l3()}get(){return DI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(r,e){xa(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PI=new xd(3e4,6e4);function va(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function wa(r,e,t,s,l={}){return hN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=pd({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return i3()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&uc(r.emulatorConfig.host)&&(x.credentials="include"),dN.fetch()(await fN(r,r.config.apiHost,t,f),x)})}async function hN(r,e,t){r._canInitEmulator=!1;const s={...MI,...e};try{const l=new zI(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw sf(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw sf(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw sf(r,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw uN(r,v,x);lr(r,v)}}catch(l){if(l instanceof cr)throw l;lr(r,"network-request-failed",{message:String(l)})}}async function yd(r,e,t,s,l={}){const c=await wa(r,e,t,s,l);return"mfaPendingCredential"in c&&lr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function fN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?yx(r.config,l):`${r.config.apiScheme}://${l}`;return VI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function LI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Mr(this.auth,"network-request-failed")),PI.get())})}}function sf(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Mr(r,e,s);return l.customData._tokenResponse=t,l}function jw(r){return r!==void 0&&r.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BI(r,e){return wa(r,"GET","/v2/recaptchaConfig",va(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(r,e){return wa(r,"POST","/v1/accounts:delete",e)}async function Of(r,e){return wa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FI(r,e=!1){const t=Ht(r),s=await t.getIdToken(e),l=bx(s);ze(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Mu(Jg(l.auth_time)),issuedAtTime:Mu(Jg(l.iat)),expirationTime:Mu(Jg(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Jg(r){return Number(r)*1e3}function bx(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const l=G2(t);return l?JSON.parse(l):(hf("Failed to decode base64 JWT payload"),null)}catch(l){return hf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Tw(r){const e=bx(r);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof cr&&HI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function HI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(r){var w;const e=r.auth,t=await r.getIdToken(),s=await Wu(r,Of(e,{idToken:t}));ze(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?mN(l.providerUserInfo):[],d=KI(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Rp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,v)}async function $I(r){const e=Ht(r);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KI(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function mN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(r,e){const t=await hN(r,{},async()=>{const s=pd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await fN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&uc(r.emulatorConfig.host)&&(g.credentials="include"),dN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YI(r,e){return wa(r,"POST","/v2/accounts:revokeToken",va(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=Tw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await QI(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Po;return s&&(ze(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(ze(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(ze(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return ca("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,e){ze(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new GI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Rp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FI(this,e)}reload(){return $I(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bs(this.auth.app))return Promise.reject(fa(this.auth));const e=await this.getIdToken();return await Wu(this,qI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:C,providerData:V,stsTokenManager:Z}=t;ze(w&&Z,e,"internal-error");const B=Po.fromJSON(this.name,Z);ze(typeof w=="string",e,"internal-error"),ai(s,e.name),ai(l,e.name),ze(typeof N=="boolean",e,"internal-error"),ze(typeof C=="boolean",e,"internal-error"),ai(c,e.name),ai(d,e.name),ai(f,e.name),ai(g,e.name),ai(x,e.name),ai(v,e.name);const ge=new rr({uid:w,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:B,createdAt:x,lastLoginAt:v});return V&&Array.isArray(V)&&(ge.providerData=V.map(ae=>({...ae}))),g&&(ge._redirectEventId=g),ge}static async _fromIdTokenResponse(e,t,s=!1){const l=new Po;l.updateFromServerResponse(t);const c=new rr({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Mf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];ze(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?mN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Po;f.updateFromIdToken(s);const g=new rr({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Rp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function ua(r){xa(r instanceof Function,"Expected a class definition");let e=Sw.get(r);return e?(xa(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Sw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gN.type="NONE";const Aw=gN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r,e,t){return`firebase:${r}:${e}:${t}`}class Lo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=ff(this.userKey,l.apiKey,c),this.fullPersistenceKey=ff("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Lo(ua(Aw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ua(Aw);const d=ff(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const v=await x._get(d);if(v){let w;if(typeof v=="string"){const N=await Of(e,{idToken:v}).catch(()=>{});if(!N)break;w=await rr._fromGetAccountInfoResponse(e,N,v)}else w=rr._fromJSON(e,v);x!==c&&(f=w),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Lo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Lo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wN(e))return"Blackberry";if(_N(e))return"Webos";if(xN(e))return"Safari";if((e.includes("chrome/")||yN(e))&&!e.includes("edge/"))return"Chrome";if(vN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function pN(r=pn()){return/firefox\//i.test(r)}function xN(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yN(r=pn()){return/crios\//i.test(r)}function bN(r=pn()){return/iemobile/i.test(r)}function vN(r=pn()){return/android/i.test(r)}function wN(r=pn()){return/blackberry/i.test(r)}function _N(r=pn()){return/webos/i.test(r)}function vx(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function XI(r=pn()){var e;return vx(r)&&!!((e=window.navigator)!=null&&e.standalone)}function JI(){return o3()&&document.documentMode===10}function NN(r=pn()){return vx(r)||vN(r)||_N(r)||wN(r)||/windows phone/i.test(r)||bN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(r,e=[]){let t;switch(r){case"Browser":t=Iw(pn());break;case"Worker":t=`${Iw(pn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e={}){return wa(r,"GET","/v2/passwordPolicy",va(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=6;class t6{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cw(this),this.idTokenSubscription=new Cw(this),this.beforeStateQueue=new WI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ua(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Lo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Bs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bs(this.app))return Promise.reject(fa(this));const t=e?Ht(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bs(this.app)?Promise.reject(fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bs(this.app)?Promise.reject(fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),t=new t6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ol("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await YI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ua(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await Lo.create(this,[ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Bs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&RI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ci(r){return Ht(r)}class Cw{constructor(e){this.auth=e,this.observer=null,this.addObserver=m3(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s6(r){mm=r}function jN(r){return mm.loadJS(r)}function r6(){return mm.recaptchaEnterpriseScript}function a6(){return mm.gapiScript}function i6(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class l6{constructor(){this.enterprise=new o6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class o6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c6="recaptcha-enterprise",TN="NO_RECAPTCHA";class u6{constructor(e){this.type=c6,this.auth=Ci(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{BI(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new UI(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;jw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(TN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l6().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&jw(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=r6();g.length!==0&&(g+=f),jN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Rw(r,e,t,s=!1,l=!1){const c=new u6(r);let d;if(l)d=TN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Vf(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Rw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Rw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(r,e){const t=Ml(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(ji(c,e??{}))return l;lr(l,"already-initialized")}return t.initialize({options:e})}function h6(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ua);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function f6(r,e,t){const s=Ci(r);ze(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=SN(e),{host:d,port:f}=m6(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},v=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){ze(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ze(ji(x,s.config.emulator)&&ji(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,uc(d)?(Y2(`${c}//${d}${g}`),r3("Auth",!0)):g6()}function SN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function m6(r){const e=SN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:kw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:kw(d)}}}function kw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function g6(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ca("not implemented")}_getIdTokenResponse(e){return ca("not implemented")}_linkToIdToken(e,t){return ca("not implemented")}_getReauthenticationResolver(e){return ca("not implemented")}}async function p6(r,e){return wa(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(r,e){return yd(r,"POST","/v1/accounts:signInWithPassword",va(r,e))}async function y6(r,e){return wa(r,"POST","/v1/accounts:sendOobCode",va(r,e))}async function b6(r,e){return y6(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(r,e){return yd(r,"POST","/v1/accounts:signInWithEmailLink",va(r,e))}async function w6(r,e){return yd(r,"POST","/v1/accounts:signInWithEmailLink",va(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends wx{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Zu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,t,"signInWithPassword",x6);case"emailLink":return v6(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,s,"signUpPassword",p6);case"emailLink":return w6(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e){return yd(r,"POST","/v1/accounts:signInWithIdp",va(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="http://localhost";class Nl extends wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new Nl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return zo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,zo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}buildRequest(){const e={requestUri:_6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E6(r){const e=Su(Au(r)).link,t=e?Su(Au(e)).deep_link_id:null,s=Su(Au(r)).deep_link_id;return(s?Su(Au(s)).link:null)||s||t||e||r}class _x{constructor(e){const t=Su(Au(e)),s=t.apiKey??null,l=t.oobCode??null,c=N6(t.mode??null);ze(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=E6(e);try{return new _x(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=_x.parseLink(t);return ze(s,"argument-error"),Zu._fromEmailAndCode(e,s.code,s.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends AN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends bd{constructor(){super("facebook.com")}static credential(e){return Nl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends bd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nl._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return di.credential(t,s)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends bd{constructor(){super("github.com")}static credential(e){return Nl._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends bd{constructor(){super("twitter.com")}static credential(e,t){return Nl._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return fi.credential(t,s)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j6(r,e){return yd(r,"POST","/v1/accounts:signUp",va(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await rr._fromIdTokenResponse(e,s,l),d=Dw(s);return new El({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Dw(s);return new El({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Dw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends cr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new Pf(e,t,s,l)}}function IN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(r,c,e,s):c})}async function T6(r,e,t=!1){const s=await Wu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return El._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(r,e,t=!1){const{auth:s}=r;if(Bs(s.app))return Promise.reject(fa(s));const l="reauthenticate";try{const c=await Wu(r,IN(s,l,e,r),t);ze(c.idToken,s,"internal-error");const d=bx(c.idToken);ze(d,s,"internal-error");const{sub:f}=d;return ze(r.uid===f,s,"user-mismatch"),El._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&lr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r,e,t=!1){if(Bs(r.app))return Promise.reject(fa(r));const s="signIn",l=await IN(r,s,e),c=await El._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function A6(r,e){return CN(Ci(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(r){const e=Ci(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I6(r,e,t){const s=Ci(r);await Vf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",b6)}async function C6(r,e,t){if(Bs(r.app))return Promise.reject(fa(r));const s=Ci(r),d=await Vf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",j6).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&RN(r),g}),f=await El._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function R6(r,e,t){return Bs(r.app)?Promise.reject(fa(r)):A6(Ht(r),hc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&RN(r),s})}function k6(r,e,t,s){return Ht(r).onIdTokenChanged(e,t,s)}function D6(r,e,t){return Ht(r).beforeAuthStateChanged(e,t)}function O6(r,e,t,s){return Ht(r).onAuthStateChanged(e,t,s)}function M6(r){return Ht(r).signOut()}const Lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=1e3,P6=10;class DN extends kN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);JI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,P6):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},V6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DN.type="LOCAL";const L6=DN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON extends kN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ON.type="SESSION";const MN=ON;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new gm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await z6(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=Nx("",20);l.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function B6(r){Vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function q6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F6(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function H6(){return VN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebaseLocalStorageDb",G6=1,zf="firebaseLocalStorage",LN="fbase_key";class vd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pm(r,e){return r.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function $6(){const r=indexedDB.deleteDatabase(PN);return new vd(r).toPromise()}function kp(){const r=indexedDB.open(PN,G6);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(zf,{keyPath:LN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(zf)?e(s):(s.close(),await $6(),e(await kp()))})})}async function Ow(r,e,t){const s=pm(r,!0).put({[LN]:e,value:t});return new vd(s).toPromise()}async function K6(r,e){const t=pm(r,!1).get(e),s=await new vd(t).toPromise();return s===void 0?null:s.value}function Mw(r,e){const t=pm(r,!0).delete(e);return new vd(t).toPromise()}const Q6=800,Y6=3;class zN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Y6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(H6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await q6(),!this.activeServiceWorker)return;this.sender=new U6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await Ow(e,Lf,"1"),await Mw(e,Lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ow(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>K6(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=pm(l,!1).getAll();return new vd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zN.type="LOCAL";const X6=zN;new xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(r,e){return e?ua(e):(ze(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W6(r){return CN(r.auth,new Ex(r),r.bypassAuthState)}function Z6(r){const{auth:e,user:t}=r;return ze(t,e,"internal-error"),S6(t,new Ex(r),r.bypassAuthState)}async function eC(r){const{auth:e,user:t}=r;return ze(t,e,"internal-error"),T6(t,new Ex(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W6;case"linkViaPopup":case"linkViaRedirect":return eC;case"reauthViaPopup":case"reauthViaRedirect":return Z6;default:lr(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new xd(2e3,1e4);class Vo extends UN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=Nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tC.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="pendingRedirect",mf=new Map;class sC extends UN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const s=await rC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rC(r,e){const t=lC(e),s=iC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function aC(r,e){mf.set(r._key(),e)}function iC(r){return ua(r._redirectPersistence)}function lC(r){return ff(nC,r.config.apiKey,r.name)}async function oC(r,e,t=!1){if(Bs(r.app))return Promise.reject(fa(r));const s=Ci(r),l=J6(s,e),d=await new sC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=600*1e3;class uC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!BN(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Mr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vw(e))}saveEventToCache(e){this.cachedEventUids.add(Vw(e)),this.lastProcessedEventTime=Date.now()}}function Vw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function BN({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BN(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(r,e={}){return wa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mC=/^https?/;async function gC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await hC(r);for(const t of e)try{if(pC(t))return}catch{}lr(r,"unauthorized-domain")}function pC(r){const e=Cp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!mC.test(t))return!1;if(fC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new xd(3e4,6e4);function Pw(){const r=Vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function yC(r){return new Promise((e,t)=>{var l,c,d;function s(){Pw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pw(),t(Mr(r,"network-request-failed"))},timeout:xC.get()})}if((c=(l=Vr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Vr().gapi)!=null&&d.load)s();else{const f=i6("iframefcb");return Vr()[f]=()=>{gapi.load?s():t(Mr(r,"network-request-failed"))},jN(`${a6()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw gf=null,e})}let gf=null;function bC(r){return gf=gf||yC(r),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new xd(5e3,15e3),wC="__/auth/iframe",_C="emulator/auth/iframe",NC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jC(r){const e=r.config;ze(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?yx(e,_C):`https://${r.config.authDomain}/${wC}`,s={apiKey:e.apiKey,appName:r.name,v:dc},l=EC.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${pd(s).slice(1)}`}async function TC(r){const e=await bC(r),t=Vr().gapi;return ze(t,r,"internal-error"),e.open({where:document.body,url:jC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NC,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Mr(r,"network-request-failed"),f=Vr().setTimeout(()=>{c(d)},vC.get());function g(){Vr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AC=500,IC=600,CC="_blank",RC="http://localhost";class Lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kC(r,e,t,s=AC,l=IC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...SC,width:s.toString(),height:l.toString(),top:c,left:d},x=pn().toLowerCase();t&&(f=yN(x)?CC:t),pN(x)&&(e=e||RC,g.scrollbars="yes");const v=Object.entries(g).reduce((N,[C,V])=>`${N}${C}=${V},`,"");if(XI(x)&&f!=="_self")return DC(e||"",f),new Lw(null);const w=window.open(e||"",f,v);ze(w,r,"popup-blocked");try{w.focus()}catch{}return new Lw(w)}function DC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="__/auth/handler",MC="emulator/auth/handler",VC=encodeURIComponent("fac");async function zw(r,e,t,s,l,c){ze(r.config.authDomain,r,"auth-domain-config-required"),ze(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:dc,eventId:l};if(e instanceof AN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",f3(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))d[v]=w}if(e instanceof bd){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(d.scopes=v.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),x=g?`#${VC}=${encodeURIComponent(g)}`:"";return`${PC(r)}?${pd(f).slice(1)}${x}`}function PC({config:r}){return r.emulator?yx(r,MC):`https://${r.authDomain}/${OC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="webStorageSupport";class LC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MN,this._completeRedirectFn=oC,this._overrideRedirectResult=aC}async _openPopup(e,t,s,l){var d;xa((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await zw(e,t,s,Cp(),l);return kC(e,c,Nx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await zw(e,t,s,Cp(),l);return B6(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(xa(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await TC(e),s=new uC(e);return t.register("authEvent",l=>(ze(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wg,{type:Wg},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Wg];c!==void 0&&t(!!c),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NN()||xN()||vx()}}const zC=LC;var Uw="@firebase/auth",Bw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qC(r){zr(new ir("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;ze(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EN(r)},x=new n6(s,l,c,g);return h6(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),zr(new ir("auth-internal",e=>{const t=Ci(e.getProvider("auth").getImmediate());return(s=>new UC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fs(Uw,Bw,BC(r)),Fs(Uw,Bw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=300,HC=Q2("authIdTokenMaxAge")||FC;let qw=null;const GC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>HC)return;const l=t==null?void 0:t.token;qw!==l&&(qw=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function $C(r=aN()){const e=Ml(r,"auth");if(e.isInitialized())return e.getImmediate();const t=d6(r,{popupRedirectResolver:zC,persistence:[X6,L6,MN]}),s=Q2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=GC(c.toString());D6(t,d,()=>d(t.currentUser)),k6(t,f=>d(f))}}const l=e3("auth");return l&&f6(t,`http://${l}`),t}function KC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}s6({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Mr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",KC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qC("Browser");var Fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,qN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function A(){}A.prototype=T.prototype,E.F=T.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(R,k,P){for(var I=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)I[fe-2]=arguments[fe];return T.prototype[k].apply(R,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(E,T,A){A||(A=0);const R=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)R[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;k<16;++k)R[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=E.g[0],A=E.g[1],k=E.g[2];let P=E.g[3],I;I=T+(P^A&(k^P))+R[0]+3614090360&4294967295,T=A+(I<<7&4294967295|I>>>25),I=P+(k^T&(A^k))+R[1]+3905402710&4294967295,P=T+(I<<12&4294967295|I>>>20),I=k+(A^P&(T^A))+R[2]+606105819&4294967295,k=P+(I<<17&4294967295|I>>>15),I=A+(T^k&(P^T))+R[3]+3250441966&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(P^A&(k^P))+R[4]+4118548399&4294967295,T=A+(I<<7&4294967295|I>>>25),I=P+(k^T&(A^k))+R[5]+1200080426&4294967295,P=T+(I<<12&4294967295|I>>>20),I=k+(A^P&(T^A))+R[6]+2821735955&4294967295,k=P+(I<<17&4294967295|I>>>15),I=A+(T^k&(P^T))+R[7]+4249261313&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(P^A&(k^P))+R[8]+1770035416&4294967295,T=A+(I<<7&4294967295|I>>>25),I=P+(k^T&(A^k))+R[9]+2336552879&4294967295,P=T+(I<<12&4294967295|I>>>20),I=k+(A^P&(T^A))+R[10]+4294925233&4294967295,k=P+(I<<17&4294967295|I>>>15),I=A+(T^k&(P^T))+R[11]+2304563134&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(P^A&(k^P))+R[12]+1804603682&4294967295,T=A+(I<<7&4294967295|I>>>25),I=P+(k^T&(A^k))+R[13]+4254626195&4294967295,P=T+(I<<12&4294967295|I>>>20),I=k+(A^P&(T^A))+R[14]+2792965006&4294967295,k=P+(I<<17&4294967295|I>>>15),I=A+(T^k&(P^T))+R[15]+1236535329&4294967295,A=k+(I<<22&4294967295|I>>>10),I=T+(k^P&(A^k))+R[1]+4129170786&4294967295,T=A+(I<<5&4294967295|I>>>27),I=P+(A^k&(T^A))+R[6]+3225465664&4294967295,P=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(P^T))+R[11]+643717713&4294967295,k=P+(I<<14&4294967295|I>>>18),I=A+(P^T&(k^P))+R[0]+3921069994&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^P&(A^k))+R[5]+3593408605&4294967295,T=A+(I<<5&4294967295|I>>>27),I=P+(A^k&(T^A))+R[10]+38016083&4294967295,P=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(P^T))+R[15]+3634488961&4294967295,k=P+(I<<14&4294967295|I>>>18),I=A+(P^T&(k^P))+R[4]+3889429448&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^P&(A^k))+R[9]+568446438&4294967295,T=A+(I<<5&4294967295|I>>>27),I=P+(A^k&(T^A))+R[14]+3275163606&4294967295,P=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(P^T))+R[3]+4107603335&4294967295,k=P+(I<<14&4294967295|I>>>18),I=A+(P^T&(k^P))+R[8]+1163531501&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(k^P&(A^k))+R[13]+2850285829&4294967295,T=A+(I<<5&4294967295|I>>>27),I=P+(A^k&(T^A))+R[2]+4243563512&4294967295,P=T+(I<<9&4294967295|I>>>23),I=k+(T^A&(P^T))+R[7]+1735328473&4294967295,k=P+(I<<14&4294967295|I>>>18),I=A+(P^T&(k^P))+R[12]+2368359562&4294967295,A=k+(I<<20&4294967295|I>>>12),I=T+(A^k^P)+R[5]+4294588738&4294967295,T=A+(I<<4&4294967295|I>>>28),I=P+(T^A^k)+R[8]+2272392833&4294967295,P=T+(I<<11&4294967295|I>>>21),I=k+(P^T^A)+R[11]+1839030562&4294967295,k=P+(I<<16&4294967295|I>>>16),I=A+(k^P^T)+R[14]+4259657740&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^P)+R[1]+2763975236&4294967295,T=A+(I<<4&4294967295|I>>>28),I=P+(T^A^k)+R[4]+1272893353&4294967295,P=T+(I<<11&4294967295|I>>>21),I=k+(P^T^A)+R[7]+4139469664&4294967295,k=P+(I<<16&4294967295|I>>>16),I=A+(k^P^T)+R[10]+3200236656&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^P)+R[13]+681279174&4294967295,T=A+(I<<4&4294967295|I>>>28),I=P+(T^A^k)+R[0]+3936430074&4294967295,P=T+(I<<11&4294967295|I>>>21),I=k+(P^T^A)+R[3]+3572445317&4294967295,k=P+(I<<16&4294967295|I>>>16),I=A+(k^P^T)+R[6]+76029189&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(A^k^P)+R[9]+3654602809&4294967295,T=A+(I<<4&4294967295|I>>>28),I=P+(T^A^k)+R[12]+3873151461&4294967295,P=T+(I<<11&4294967295|I>>>21),I=k+(P^T^A)+R[15]+530742520&4294967295,k=P+(I<<16&4294967295|I>>>16),I=A+(k^P^T)+R[2]+3299628645&4294967295,A=k+(I<<23&4294967295|I>>>9),I=T+(k^(A|~P))+R[0]+4096336452&4294967295,T=A+(I<<6&4294967295|I>>>26),I=P+(A^(T|~k))+R[7]+1126891415&4294967295,P=T+(I<<10&4294967295|I>>>22),I=k+(T^(P|~A))+R[14]+2878612391&4294967295,k=P+(I<<15&4294967295|I>>>17),I=A+(P^(k|~T))+R[5]+4237533241&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~P))+R[12]+1700485571&4294967295,T=A+(I<<6&4294967295|I>>>26),I=P+(A^(T|~k))+R[3]+2399980690&4294967295,P=T+(I<<10&4294967295|I>>>22),I=k+(T^(P|~A))+R[10]+4293915773&4294967295,k=P+(I<<15&4294967295|I>>>17),I=A+(P^(k|~T))+R[1]+2240044497&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~P))+R[8]+1873313359&4294967295,T=A+(I<<6&4294967295|I>>>26),I=P+(A^(T|~k))+R[15]+4264355552&4294967295,P=T+(I<<10&4294967295|I>>>22),I=k+(T^(P|~A))+R[6]+2734768916&4294967295,k=P+(I<<15&4294967295|I>>>17),I=A+(P^(k|~T))+R[13]+1309151649&4294967295,A=k+(I<<21&4294967295|I>>>11),I=T+(k^(A|~P))+R[4]+4149444226&4294967295,T=A+(I<<6&4294967295|I>>>26),I=P+(A^(T|~k))+R[11]+3174756917&4294967295,P=T+(I<<10&4294967295|I>>>22),I=k+(T^(P|~A))+R[2]+718787259&4294967295,k=P+(I<<15&4294967295|I>>>17),I=A+(P^(k|~T))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+P&4294967295}s.prototype.v=function(E,T){T===void 0&&(T=E.length);const A=T-this.blockSize,R=this.C;let k=this.h,P=0;for(;P<T;){if(k==0)for(;P<=A;)l(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<T;)if(R[k++]=E.charCodeAt(P++),k==this.blockSize){l(this,R),k=0;break}}else for(;P<T;)if(R[k++]=E[P++],k==this.blockSize){l(this,R),k=0;break}}this.h=k,this.o+=T},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;T=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=T&255,T/=256;for(this.v(E),E=Array(16),T=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)E[T++]=this.g[A]>>>R&255;return E};function c(E,T){var A=f;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=T(E)}function d(E,T){this.h=T;const A=[];let R=!0;for(let k=E.length-1;k>=0;k--){const P=E[k]|0;R&&P==T||(A[k]=P,R=!1)}this.g=A}var f={};function g(E){return-128<=E&&E<128?c(E,function(T){return new d([T|0],T<0?-1:0)}):new d([E|0],E<0?-1:0)}function x(E){if(isNaN(E)||!isFinite(E))return w;if(E<0)return B(x(-E));const T=[];let A=1;for(let R=0;E>=A;R++)T[R]=E/A|0,A*=4294967296;return new d(T,0)}function v(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return B(v(E.substring(1),T));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(T,8));let R=w;for(let P=0;P<E.length;P+=8){var k=Math.min(8,E.length-P);const I=parseInt(E.substring(P,P+k),T);k<8?(k=x(Math.pow(T,k)),R=R.j(k).add(x(I))):(R=R.j(A),R=R.add(x(I)))}return R}var w=g(0),N=g(1),C=g(16777216);r=d.prototype,r.m=function(){if(Z(this))return-B(this).m();let E=0,T=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);E+=(R>=0?R:4294967296+R)*T,T*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(V(this))return"0";if(Z(this))return"-"+B(this).toString(E);const T=x(Math.pow(E,6));var A=this;let R="";for(;;){const k=xe(A,T).g;A=ge(A,k.j(T));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=k,V(A))return P+R;for(;P.length<6;)P="0"+P;R=P+R}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function V(E){if(E.h!=0)return!1;for(let T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function Z(E){return E.h==-1}r.l=function(E){return E=ge(this,E),Z(E)?-1:V(E)?0:1};function B(E){const T=E.g.length,A=[];for(let R=0;R<T;R++)A[R]=~E.g[R];return new d(A,~E.h).add(N)}r.abs=function(){return Z(this)?B(this):this},r.add=function(E){const T=Math.max(this.g.length,E.g.length),A=[];let R=0;for(let k=0;k<=T;k++){let P=R+(this.i(k)&65535)+(E.i(k)&65535),I=(P>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);R=I>>>16,P&=65535,I&=65535,A[k]=I<<16|P}return new d(A,A[A.length-1]&-2147483648?-1:0)};function ge(E,T){return E.add(B(T))}r.j=function(E){if(V(this)||V(E))return w;if(Z(this))return Z(E)?B(this).j(B(E)):B(B(this).j(E));if(Z(E))return B(this.j(B(E)));if(this.l(C)<0&&E.l(C)<0)return x(this.m()*E.m());const T=this.g.length+E.g.length,A=[];for(var R=0;R<2*T;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<E.g.length;k++){const P=this.i(R)>>>16,I=this.i(R)&65535,fe=E.i(k)>>>16,Ae=E.i(k)&65535;A[2*R+2*k]+=I*Ae,ae(A,2*R+2*k),A[2*R+2*k+1]+=P*Ae,ae(A,2*R+2*k+1),A[2*R+2*k+1]+=I*fe,ae(A,2*R+2*k+1),A[2*R+2*k+2]+=P*fe,ae(A,2*R+2*k+2)}for(E=0;E<T;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=T;E<2*T;E++)A[E]=0;return new d(A,0)};function ae(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function ne(E,T){this.g=E,this.h=T}function xe(E,T){if(V(T))throw Error("division by zero");if(V(E))return new ne(w,w);if(Z(E))return T=xe(B(E),T),new ne(B(T.g),B(T.h));if(Z(T))return T=xe(E,B(T)),new ne(B(T.g),T.h);if(E.g.length>30){if(Z(E)||Z(T))throw Error("slowDivide_ only works with positive integers.");for(var A=N,R=T;R.l(E)<=0;)A=re(A),R=re(R);var k=le(A,1),P=le(R,1);for(R=le(R,2),A=le(A,2);!V(R);){var I=P.add(R);I.l(E)<=0&&(k=k.add(A),P=I),R=le(R,1),A=le(A,1)}return T=ge(E,k.j(T)),new ne(k,T)}for(k=w;E.l(T)>=0;){for(A=Math.max(1,Math.floor(E.m()/T.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),P=x(A),I=P.j(T);Z(I)||I.l(E)>0;)A-=R,P=x(A),I=P.j(T);V(P)&&(P=N),k=k.add(P),E=ge(E,I)}return new ne(k,E)}r.B=function(E){return xe(this,E).h},r.and=function(E){const T=Math.max(this.g.length,E.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)&E.i(R);return new d(A,this.h&E.h)},r.or=function(E){const T=Math.max(this.g.length,E.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)|E.i(R);return new d(A,this.h|E.h)},r.xor=function(E){const T=Math.max(this.g.length,E.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)^E.i(R);return new d(A,this.h^E.h)};function re(E){const T=E.g.length+1,A=[];for(let R=0;R<T;R++)A[R]=E.i(R)<<1|E.i(R-1)>>>31;return new d(A,E.h)}function le(E,T){const A=T>>5;T%=32;const R=E.g.length-A,k=[];for(let P=0;P<R;P++)k[P]=T>0?E.i(P+A)>>>T|E.i(P+A+1)<<32-T:E.i(P+A);return new d(k,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,qN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=v,bi=d}).apply(typeof Fw<"u"?Fw:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FN,Iu,HN,pf,Dp,GN,$N,KN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in _))break e;_=_[H]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(S,H,J){for(var be=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)be[Ge-2]=arguments[Ge];return y.prototype[H].apply(S,be)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function V(h,y){for(let S=1;S<arguments.length;S++){const H=arguments[S];var _=typeof H;if(_=_!="object"?_:H?Array.isArray(H)?"array":_:"null",_=="array"||_=="object"&&typeof H.length=="number"){_=h.length||0;const J=H.length||0;h.length=_+J;for(let be=0;be<J;be++)h[_+be]=H[be]}else h.push(H)}}class Z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){d.setTimeout(()=>{throw h},0)}function ge(){var h=E;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,_){const S=ne.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ne=new Z(()=>new xe,h=>h.reset());class xe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let re,le=!1,E=new ae,T=()=>{const h=Promise.resolve(void 0);re=()=>{h.then(A)}};function A(){for(var h;h=ge();){try{h.h.call(h.g)}catch(_){B(_)}var y=ne;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function fe(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(fe,k),fe.prototype.init=function(h,y){const _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),G=0;function ce(h,y,_,S,H){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=H,this.key=++G,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function $(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function we(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function D(h){const y={};for(const _ in h)y[_]=h[_];return y}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,y){let _,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(_ in S)h[_]=S[_];for(let J=0;J<U.length;J++)_=U[J],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function Y(h){this.src=h,this.g={},this.h=0}Y.prototype.add=function(h,y,_,S,H){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const be=Ee(h,y,S,H);return be>-1?(y=h[be],_||(y.fa=!1)):(y=new ce(y,this.src,J,!!S,H),y.fa=_,h.push(y)),y};function he(h,y){const _=y.type;if(_ in h.g){var S=h.g[_],H=Array.prototype.indexOf.call(S,y,void 0),J;(J=H>=0)&&Array.prototype.splice.call(S,H,1),J&&(W(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ee(h,y,_,S){for(let H=0;H<h.length;++H){const J=h[H];if(!J.da&&J.listener==y&&J.capture==!!_&&J.ha==S)return H}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),qe={};function Ie(h,y,_,S,H){if(Array.isArray(y)){for(let J=0;J<y.length;J++)Ie(h,y[J],_,S,H);return null}return _=Sn(_),h&&h[Ae]?h.J(y,_,f(S)?!!S.capture:!1,H):We(h,y,_,!1,S,H)}function We(h,y,_,S,H,J){if(!y)throw Error("Invalid event type");const be=f(H)?!!H.capture:!!H;let Ge=Ss(h);if(Ge||(h[Re]=Ge=new Y(h)),_=Ge.add(y,_,S,be,J),_.proxy)return _;if(S=st(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)P||(H=be),H===void 0&&(H=!1),h.addEventListener(y.toString(),S,H);else if(h.attachEvent)h.attachEvent(Tn(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function h(_){return y.call(h.src,h.listener,_)}const y=Ts;return h}function jt(h,y,_,S,H){if(Array.isArray(y))for(var J=0;J<y.length;J++)jt(h,y[J],_,S,H);else S=f(S)?!!S.capture:!!S,_=Sn(_),h&&h[Ae]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],_=Ee(y,_,S,H),_>-1&&(W(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=Ss(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,_,S,H)),(_=h>-1?y[h]:null)&&rt(_))}function rt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ae])he(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(Tn(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=Ss(y))?(he(_,h),_.h==0&&(_.src=null,y[Re]=null)):W(h)}}}function Tn(h){return h in qe?qe[h]:qe[h]="on"+h}function Ts(h,y){if(h.da)h=!0;else{y=new fe(y,this);const _=h.listener,S=h.ha||h.src;h.fa&&rt(h),h=_.call(S,y)}return h}function Ss(h){return h=h[Re],h instanceof Y?h:null}var dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sn(h){return typeof h=="function"?h:(h[dr]||(h[dr]=function(y){return h.handleEvent(y)}),h[dr])}function Ct(){R.call(this),this.i=new Y(this),this.M=this,this.G=null}w(Ct,R),Ct.prototype[Ae]=!0,Ct.prototype.removeEventListener=function(h,y,_,S){jt(this,h,y,_,S)};function qt(h,y){var _,S=h.G;if(S)for(_=[];S;S=S.G)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var H=y;y=new k(S,h),L(y,H)}H=!0;let J,be;if(_)for(be=_.length-1;be>=0;be--)J=y.g=_[be],H=yn(J,S,!0,y)&&H;if(J=y.g=h,H=yn(J,S,!0,y)&&H,H=yn(J,S,!1,y)&&H,_)for(be=0;be<_.length;be++)J=y.g=_[be],H=yn(J,S,!1,y)&&H}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let S=0;S<_.length;S++)W(_[S]);delete h.g[y],h.h--}}this.G=null},Ct.prototype.J=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},Ct.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function yn(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let J=0;J<y.length;++J){const be=y[J];if(be&&!be.da&&be.capture==_){const Ge=be.listener,Xt=be.ha||be.src;be.fa&&he(h.i,be),H=Ge.call(Xt,S)!==!1&&H}}return H&&!S.defaultPrevented}function Ea(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function ja(h){h.g=Ea(()=>{h.g=null,h.i&&(h.i=!1,ja(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Gt extends R{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ja(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(h){R.call(this),this.h=h,this.g={}}w(Gs,R);var Fr=[];function As(h){$(h.g,function(y,_){this.g.hasOwnProperty(_)&&rt(y)},h),h.g={}}Gs.prototype.N=function(){Gs.Z.N.call(this),As(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=d.JSON.stringify,Ta=d.JSON.parse,Sa=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ue(){}function ot(){}var He={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ct(){k.call(this,"d")}w(ct,k);function nn(){k.call(this,"c")}w(nn,k);var yt={},$t=null;function Mn(){return $t=$t||new Ct}yt.Ia="serverreachability";function kt(h){k.call(this,yt.Ia,h)}w(kt,k);function sn(h){const y=Mn();qt(y,new kt(y))}yt.STAT_EVENT="statevent";function An(h,y){k.call(this,yt.STAT_EVENT,h),this.stat=y}w(An,k);function xt(h){const y=Mn();qt(y,new An(y,h))}yt.Ja="timingevent";function Fn(h,y){k.call(this,yt.Ja,h),this.size=y}w(Fn,k);function de(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Te(){this.g=!0}Te.prototype.ua=function(){this.g=!1};function _e(h,y,_,S,H,J){h.info(function(){if(h.g)if(J){var be="",Ge=J.split("&");for(let ft=0;ft<Ge.length;ft++){var Xt=Ge[ft].split("=");if(Xt.length>1){const Lt=Xt[0];Xt=Xt[1];const ks=Lt.split("_");be=ks.length>=2&&ks[1]=="type"?be+(Lt+"="+Xt+"&"):be+(Lt+"=redacted&")}}}else be=null;else be=J;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+y+`
`+_+`
`+be})}function De(h,y,_,S,H,J,be){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+y+`
`+_+`
`+J+" "+be})}function Ne(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Fe(h,_)+(S?" "+S:"")})}function Me(h,y){h.info(function(){return"TIMEOUT: "+y})}Te.prototype.info=function(){};function Fe(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var _=J[h];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let be=1;be<S.length;be++)S[be]=""}}}}return bn(J)}catch{return y}}var ht={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},it={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ot;function vn(){}w(vn,ue),vn.prototype.g=function(){return new XMLHttpRequest},Ot=new vn;function $s(h){return encodeURIComponent(String(h))}function Od(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Ks(h,y,_,S){this.j=h,this.i=y,this.l=_,this.S=S||1,this.V=new Gs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qs}function Qs(){this.i=null,this.g="",this.h=!1}var rn={},wn={};function hr(h,y,_){h.M=1,h.A=Mi(ln(y)),h.u=_,h.R=!0,Pl(h,null)}function Pl(h,y){h.F=Date.now(),fr(h),h.B=ln(h.A);var _=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Bl(_.i,"t",S),h.C=0,_=h.j.L,h.h=new Qs,h.g=Yd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Gt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,S=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Fr[0]=H.toString()),H=Fr);for(let J=0;J<H.length;J++){const be=Ie(_,H[J],S||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),sn(),_e(h.i,h.v,h.B,h.l,h.S,h.u)}Ks.prototype.ba=function(h){h=h.target;const y=this.O;y&&Js(h)==3?y.j():this.Y(h)},Ks.prototype.Y=function(h){try{if(h==this.g)e:{const Ge=Js(this.g),Xt=this.g.ya(),ft=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||Ge!=4||Xt==7||(Xt==8||ft<=0?sn(3):sn(2)),mr(this);var y=this.g.ca();this.X=y;var _=Gm(this);if(this.o=y==200,De(this.i,this.v,this.B,this.l,this.S,Ge,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var J=S;break t}}J=null}if(h=J)Ne(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gr(this,h);else{this.o=!1,this.m=3,xt(12),ds(this),Is(this);break e}}if(this.R){h=!0;let Lt;for(;!this.K&&this.C<_.length;)if(Lt=Vd(this,_),Lt==wn){Ge==4&&(this.m=4,xt(14),h=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==rn){this.m=4,xt(15),Ne(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Ne(this.i,this.l,Lt,null),gr(this,Lt);if(Md(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||_.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)Ne(this.i,this.l,_,"[Invalid Chunked Response]"),ds(this),Is(this);else if(_.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Vc(be),be.P=!0,xt(11))}}else Ne(this.i,this.l,_,null),gr(this,_);Ge==4&&ds(this),this.o&&!this.K&&(Ge==4?Gd(this.j,this):(this.o=!1,fr(this)))}else Gr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ds(this),Is(this)}}}catch{}finally{}};function Gm(h){if(!Md(h))return h.g.la();const y=In(h.g);if(y==="")return"";let _="";const S=y.length,H=Js(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ds(h),Is(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<S;J++)h.h.h=!0,_+=h.h.i.decode(y[J],{stream:!(H&&J==S-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Md(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Vd(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?wn:(_=Number(y.substring(_,S)),isNaN(_)?rn:(S+=1,S+_>y.length?wn:(y=y.slice(S,S+_),h.C=S+_,y)))}Ks.prototype.cancel=function(){this.K=!0,ds(this)};function fr(h){h.T=Date.now()+h.H,Ll(h,h.H)}function Ll(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=de(x(h.aa,h),y)}function mr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Ks.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Me(this.i,this.B),this.M!=2&&(sn(),xt(17)),ds(this),this.m=2,Is(this)):Ll(this,this.T-h)};function Is(h){h.j.I==0||h.K||Gd(h.j,h)}function ds(h){mr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,As(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function gr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||xr(_.h,h))){if(!h.L&&xr(_.h,h)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)$l(_),Ma(_);else break e;qi(_),xt(18)}}else _.xa=H[1],0<_.xa-_.K&&H[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=de(x(_.Va,_),6e3));pr(_.h)<=1&&_.ta&&(_.ta=void 0)}else Nr(_,11)}else if((h.L||_.g==h)&&$l(_),!I(y))for(H=_.Ba.g.parse(y),y=0;y<H.length;y++){let ft=H[y];const Lt=ft[0];if(!(Lt<=_.K))if(_.K=Lt,ft=ft[1],_.I==2)if(ft[0]=="c"){_.M=ft[1],_.ba=ft[2];const ks=ft[3];ks!=null&&(_.ka=ks,_.j.info("VER="+_.ka));const Er=ft[4];Er!=null&&(_.za=Er,_.j.info("SVER="+_.za));const Ws=ft[5];Ws!=null&&typeof Ws=="number"&&Ws>0&&(S=1.5*Ws,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Zs=h.g;if(Zs){const Fi=Zs.g?Zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var J=S.h;J.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ec(J,J.h),J.h=null))}if(S.G){const Kl=Zs.g?Zs.g.getResponseHeader("X-HTTP-Session-Id"):null;Kl&&(S.wa=Kl,bt(S.J,S.G,Kl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var be=h;if(S.na=Qd(S,S.L?S.ba:null,S.W),be.L){jc(S.h,be);var Ge=be,Xt=S.O;Xt&&(Ge.H=Xt),Ge.D&&(mr(Ge),fr(Ge)),S.g=be}else Fd(S);_.i.length>0&&_r(_)}else ft[0]!="stop"&&ft[0]!="close"||Nr(_,7);else _.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Nr(_,7):Oc(_):ft[0]!="noop"&&_.l&&_.l.qa(ft),_.A=0)}}sn(4)}catch{}}var an=class{constructor(h,y){this.g=h,this.map=y}};function _c(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function pr(h){return h.h?1:h.g?h.g.size:0}function xr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ec(h,y){h.g?h.g.add(y):h.h=y}function jc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}_c.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return C(h.i)}var Pd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const S=h[_].indexOf("=");let H,J=null;S>=0?(H=h[_].substring(0,S),J=h[_].substring(S+1)):H=h[_],y(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function hs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof hs?(this.l=h.l,_n(this,h.j),this.o=h.o,this.g=h.g,Aa(this,h.u),this.h=h.h,Sc(this,Bd(h.i)),this.m=h.m):h&&(y=String(h).match(Pd))?(this.l=!1,_n(this,y[1]||"",!0),this.o=yr(y[2]||""),this.g=yr(y[3]||"",!0),Aa(this,y[4]),this.h=yr(y[5]||"",!0),Sc(this,y[6]||"",!0),this.m=yr(y[7]||"")):(this.l=!1,this.i=new Ca(null,this.l))}hs.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Vi(y,Ul,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vi(y,Ul,!0),"@"),h.push($s(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Vi(_,_.charAt(0)=="/"?Ac:Ld,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Vi(_,zd)),h.join("")},hs.prototype.resolve=function(h){const y=ln(this);let _=!!h.j;_?_n(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var S=h.h;if(_)Aa(y,h.u);else if(_=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=y.h.lastIndexOf("/");H!=-1&&(S=y.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let be=0;be<H.length;){const Ge=H[be++];Ge=="."?S&&be==H.length&&J.push(""):Ge==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&be==H.length&&J.push("")):(J.push(Ge),S=!0)}S=J.join("/")}else S=H}return _?y.h=S:_=h.i.toString()!=="",_?Sc(y,Bd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function ln(h){return new hs(h)}function _n(h,y,_){h.j=_?yr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Aa(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Sc(h,y,_){y instanceof Ca?(h.i=y,ql(h.i,h.l)):(_||(y=Vi(y,Ia)),h.i=new Ca(y,h.l))}function bt(h,y,_){h.i.set(y,_)}function Mi(h){return bt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function yr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,Zn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ul=/[#\/\?@]/g,Ld=/[#\?:]/g,Ac=/[#\?]/g,Ia=/[#\?@]/g,zd=/#/g;function Ca(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function es(h){h.g||(h.g=new Map,h.h=0,h.i&&zl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Ca.prototype,r.add=function(h,y){es(this),this.i=null,h=Ra(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Ud(h,y){es(h),y=Ra(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ic(h,y){return es(h),y=Ra(h,y),h.g.has(y)}r.forEach=function(h,y){es(this),this.g.forEach(function(_,S){_.forEach(function(H){h.call(y,H,S,this)},this)},this)};function Cc(h,y){es(h);let _=[];if(typeof y=="string")Ic(h,y)&&(_=_.concat(h.g.get(Ra(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return es(this),this.i=null,h=Ra(this,h),Ic(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Cc(this,h),h.length>0?String(h[0]):y):y};function Bl(h,y,_){Ud(h,y),_.length>0&&(h.i=null,h.g.set(Ra(h,y),C(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const H=$s(_);_=Cc(this,_);for(let J=0;J<_.length;J++){let be=H;_[J]!==""&&(be+="="+$s(_[J])),h.push(be)}}return this.i=h.join("&")};function Bd(h){const y=new Ca;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ra(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ql(h,y){y&&!h.j&&(es(h),h.i=null,h.g.forEach(function(_,S){const H=S.toLowerCase();S!=H&&(Ud(this,S),Bl(this,H,_))},h)),h.j=y}function Ys(h,y){const _=new Te;if(d.Image){const S=new Image;S.onload=v(Cs,_,"TestLoadImage: loaded",!0,y,S),S.onerror=v(Cs,_,"TestLoadImage: error",!1,y,S),S.onabort=v(Cs,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=v(Cs,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Rc(h,y){const _=new Te,S=new AbortController,H=setTimeout(()=>{S.abort(),Cs(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(J=>{clearTimeout(H),J.ok?Cs(_,"TestPingServer: ok",!0,y):Cs(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Cs(_,"TestPingServer: error",!1,y)})}function Cs(h,y,_,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(_)}catch{}}function ka(){this.g=new Sa}function br(h){this.i=h.Sb||null,this.h=h.ab||!1}w(br,ue),br.prototype.g=function(){return new Pi(this.i,this.h)};function Pi(h,y){Ct.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Pi,Ct),r=Pi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Xs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Da(this):Xs(this),this.readyState==3&&Fl(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Da(this))},r.Na=function(h){this.g&&(this.response=h,Da(this))},r.ga=function(){this.g&&Da(this)};function Da(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Xs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Xs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Rs(h){let y="";return $(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Li(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Rs(_),typeof h=="string"?_!=null&&$s(_):bt(h,y,_))}function Tt(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Tt,Ct);var vr=/^https?$/i,kc=["POST","PUT"];r=Tt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ot.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){zi(this,J);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)_.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())_.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(kc,y,void 0)>=0)||S||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,be]of _)this.g.setRequestHeader(J,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){zi(this,J)}};function zi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Dc(h),Hr(h)}function Dc(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,qt(this,"complete"),qt(this,"abort"),Hr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ui(this):this.Xa())},r.Xa=function(){Ui(this)};function Ui(h){if(h.h&&typeof c<"u"){if(h.v&&Js(h)==4)setTimeout(h.Ca.bind(h),0);else if(qt(h,"readystatechange"),Js(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=J===0){let be=String(h.D).match(Pd)[1]||null;!be&&d.self&&d.self.location&&(be=d.self.location.protocol.slice(0,-1)),S=!vr.test(be?be.toLowerCase():"")}_=S}if(_)qt(h,"complete"),qt(h,"success");else{h.o=6;try{var H=Js(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Dc(h)}}finally{Hr(h)}}}}function Hr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||qt(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Js(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Js(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ta(y)}};function In(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gr(h){const y={};h=(h.g&&Js(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(I(h[S]))continue;var _=Od(h[S]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=y[H]||[];y[H]=J,J.push(_)}we(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Oa(h){this.za=0,this.i=[],this.j=new Te,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,h),this.Za=wr("retryDelaySeedMs",1e4,h),this.Ta=wr("forwardChannelMaxRetries",2,h),this.va=wr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new _c(h&&h.concurrentRequestLimit),this.Ba=new ka,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Oa.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,S){xt(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Qd(this,null,this.W),_r(this)};function Oc(h){if(Hl(h),h.I==3){var y=h.V++,_=ln(h.J);if(bt(_,"SID",h.M),bt(_,"RID",y),bt(_,"TYPE","terminate"),Bi(h,_),y=new Ks(h,h.j,y),y.M=2,y.A=Mi(ln(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Yd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),fr(y)}Kd(h)}function Ma(h){h.g&&(Vc(h),h.g.cancel(),h.g=null)}function Hl(h){Ma(h),h.v&&(d.clearTimeout(h.v),h.v=null),$l(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function _r(h){if(!Nc(h.h)&&!h.m){h.m=!0;var y=h.Ea;re||T(),le||(re(),le=!0),E.add(y,h),h.D=0}}function Gl(h,y){return pr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=de(x(h.Ea,h,y),$d(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Ks(this,this.j,h);let J=this.o;if(this.U&&(J?(J=D(J),L(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=qd(this,H,y),_=ln(this.J),bt(_,"RID",h),bt(_,"CVER",22),this.G&&bt(_,"X-HTTP-Session-Id",this.G),Bi(this,_),J&&(this.R?y="headers="+$s(Rs(J))+"&"+y:this.u&&Li(_,this.u,J)),Ec(this.h,H),this.Ra&&bt(_,"TYPE","init"),this.S?(bt(_,"$req",y),bt(_,"SID","null"),H.U=!0,hr(H,_,null)):hr(H,_,y),this.I=2}}else this.I==3&&(h?Mc(this,h):this.i.length==0||Nc(this.h)||Mc(this))};function Mc(h,y){var _;y?_=y.l:_=h.V++;const S=ln(h.J);bt(S,"SID",h.M),bt(S,"RID",_),bt(S,"AID",h.K),Bi(h,S),h.u&&h.o&&Li(S,h.u,h.o),_=new Ks(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=qd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ec(h.h,_),hr(_,S,y)}function Bi(h,y){h.H&&$(h.H,function(_,S){bt(y,S,_)}),h.l&&$({},function(_,S){bt(y,S,_)})}function qd(h,y,_){_=Math.min(h.i.length,_);const S=h.l?x(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ge=-1;for(;;){const Xt=["count="+_];Ge==-1?_>0?(Ge=H[0].g,Xt.push("ofs="+Ge)):Ge=0:Xt.push("ofs="+Ge);let ft=!0;for(let Lt=0;Lt<_;Lt++){var J=H[Lt].g;const ks=H[Lt].map;if(J-=Ge,J<0)Ge=Math.max(0,H[Lt].g-100),ft=!1;else try{J="req"+J+"_"||"";try{var be=ks instanceof Map?ks:Object.entries(ks);for(const[Er,Ws]of be){let Zs=Ws;f(Ws)&&(Zs=bn(Ws)),Xt.push(J+Er+"="+encodeURIComponent(Zs))}}catch(Er){throw Xt.push(J+"type="+encodeURIComponent("_badmap")),Er}}catch{S&&S(ks)}}if(ft){be=Xt.join("&");break e}}be=void 0}return h=h.i.splice(0,_),y.G=h,be}function Fd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;re||T(),le||(re(),le=!0),E.add(y,h),h.A=0}}function qi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=de(x(h.Da,h),$d(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Hd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=de(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ma(this),Hd(this))};function Vc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Hd(h){h.g=new Ks(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ln(h.na);bt(y,"RID","rpc"),bt(y,"SID",h.M),bt(y,"AID",h.K),bt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&bt(y,"TO",h.ia),bt(y,"TYPE","xmlhttp"),Bi(h,y),h.u&&h.o&&Li(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Mi(ln(y)),_.u=null,_.R=!0,Pl(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Ma(this),qi(this),xt(19))};function $l(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Gd(h,y){var _=null;if(h.g==y){$l(h),Vc(h),h.g=null;var S=2}else if(xr(h.h,y))_=y.G,jc(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;S=Mn(),qt(S,new Fn(S,_)),_r(h)}else Fd(h);else if(H=y.m,H==3||H==0&&y.X>0||!(S==1&&Gl(h,y)||S==2&&qi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),H){case 1:Nr(h,5);break;case 4:Nr(h,10);break;case 3:Nr(h,6);break;default:Nr(h,2)}}}function $d(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Nr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),S=h.Ua;const H=!S;S=new hs(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||_n(S,"https"),Mi(S),H?Ys(S.toString(),_):Rc(S.toString(),_)}else xt(2);h.I=0,h.l&&h.l.pa(y),Kd(h),Hl(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Kd(h){if(h.I=0,h.ja=[],h.l){const y=Tc(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Qd(h,y,_){var S=_ instanceof hs?ln(_):new hs(_);if(S.g!="")y&&(S.g=y+"."+S.g),Aa(S,S.u);else{var H=d.location;S=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const J=new hs(null);S&&_n(J,S),y&&(J.g=y),H&&Aa(J,H),_&&(J.h=_),S=J}return _=h.G,y=h.wa,_&&y&&bt(S,_,y),bt(S,"VER",h.ka),Bi(h,S),S}function Yd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Tt(new br({ab:_})):new Tt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}r=Xd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Va(){}Va.prototype.g=function(h,y){return new Hn(h,y)};function Hn(h,y){Ct.call(this),this.g=new Oa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new $r(this)}w(Hn,Ct),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Oc(this.g)},Hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=bn(h),h=_);y.i.push(new an(y.Ya++,h)),y.I==3&&_r(y)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Oc(this.g),delete this.g,Hn.Z.N.call(this)};function Jd(h){ct.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(Jd,ct);function Wd(){nn.call(this),this.status=1}w(Wd,nn);function $r(h){this.g=h}w($r,Xd),$r.prototype.ra=function(){qt(this.g,"a")},$r.prototype.qa=function(h){qt(this.g,new Jd(h))},$r.prototype.pa=function(h){qt(this.g,new Wd)},$r.prototype.oa=function(){qt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,KN=function(){return new Va},$N=function(){return Mn()},GN=yt,Dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ht.NO_ERROR=0,ht.TIMEOUT=8,ht.HTTP_ERROR=6,pf=ht,it.COMPLETE="complete",HN=it,ot.EventType=He,He.OPEN="a",He.CLOSE="b",He.ERROR="c",He.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Iu=ot,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,FN=Tt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const Hw="@firebase/firestore",Gw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new fm("@firebase/firestore");function Co(){return jl.logLevel}function me(r,...e){if(jl.logLevel<=tt.DEBUG){const t=e.map(jx);jl.debug(`Firestore (${fc}): ${r}`,...t)}}function Zt(r,...e){if(jl.logLevel<=tt.ERROR){const t=e.map(jx);jl.error(`Firestore (${fc}): ${r}`,...t)}}function ed(r,...e){if(jl.logLevel<=tt.WARN){const t=e.map(jx);jl.warn(`Firestore (${fc}): ${r}`,...t)}}function jx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,QN(r,s,t)}function QN(r,e,t){let s=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Zt(s),new Error(s)}function Oe(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||QN(e,l,s)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ln.UNAUTHENTICATED)))}shutdown(){}}class XC{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ar,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ar)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new QC(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class JC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new JC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $w{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $w(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $w(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=eR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function Ue(r,e){return r<e?-1:r>e?1:0}function Op(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Zg(l)===Zg(c)?Ue(l,c):Zg(l)?1:-1}return Ue(r.length,e.length)}const tR=55296,nR=57343;function Zg(r){const e=r.charCodeAt(0);return e>=tR&&e<=nR}function Ho(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function YN(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="__name__";class Ir{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ir?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Ir.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Ue(e.length,t.length)}static compareSegments(e,t){const s=Ir.isNumericId(e),l=Ir.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Ir.extractNumericId(e).compare(Ir.extractNumericId(t)):Op(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class pt extends Ir{construct(e,t,s){return new pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Ir{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kw}static keyField(){return new Ft([Kw])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(pt.fromString(e))}static fromName(e){return new ve(pt.fromString(e).popFirst(5))}static empty(){return new ve(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(r,e,t){if(!t)throw new ye(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function rR(r,e,t,s){if(e===!0&&s===!0)throw new ye(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Qw(r){if(!ve.isDocumentKey(r))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Yw(r){if(ve.isDocumentKey(r))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function JN(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je(12329,{type:typeof r})}function Jn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xm(r);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function aR(r,e){if(e<=0)throw new ye(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(r,e){const t={typeString:r};return e&&(t.value=e),t}function wd(r,e){if(!JN(r))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ye(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=-62135596800,Jw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Jw);return new _t(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xw)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jw}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wd(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:fn("string",_t._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new _t(0,0))}static max(){return new Pe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=-1;class Uf{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Mp(r){return r.fields.find((e=>e.kind===2))}function ol(r){return r.fields.filter((e=>e.kind!==2))}Uf.UNKNOWN_ID=-1;class xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class td{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new td(0,js.min())}}function WN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Pe.fromTimestamp(s===1e9?new _t(t+1,0):new _t(t,s));return new js(l,ve.empty(),e)}function ZN(r){return new js(r.readTime,r.key,Go)}class js{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new js(Pe.min(),ve.empty(),Go)}static max(){return new js(Pe.max(),ve.empty(),Go)}}function Sx(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==eE)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,s)=>{t(e)}))}static reject(e){return new F(((t,s)=>{s(e)}))}static waitFor(e){return new F(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=F.resolve(!1);for(const s of e)t=t.next((l=>l?F.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new F(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((v=>{d[x]=v,++f,f===c&&s(d)}),(v=>l(v)))}}))}static doWhile(e,t){return new F(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="SimpleDb";class ym{static open(e,t,s,l){try{return new ym(t,e.transaction(l,s))}catch(c){throw new Vu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ar,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Vu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Ax(s.target.error);this.S.reject(new Vu(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(vs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lR(t)}}class vi{static delete(e){return me(vs,"Removing database:",e),ul($2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gx())return!1;if(vi.F())return!0;const e=pn(),t=vi.M(e),s=0<t&&t<10,l=nE(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,vi.M(pn())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(vs,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new Vu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new ye(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new ye(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Vu(e,d))},l.onupgradeneeded=c=>{me(vs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{me(vs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=ym.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),F.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(me(vs,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class iR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ul(this.U.delete())}}class Vu extends ye{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ki(r){return r.name==="IndexedDbTransactionError"}class lR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(me(vs,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(me(vs,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ul(s)}add(e){return me(vs,"ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next((t=>(t===void 0&&(t=null),me(vs,"GET",this.store.name,e,t),t)))}delete(e){return me(vs,"DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return me(vs,"COUNT",this.store.name),ul(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new F(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new F(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){me(vs,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new F(((s,l)=>{t.onerror=c=>{const d=Ax(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new F(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new iR(f),x=t(f.primaryKey,f.value,g);if(x instanceof F){const v=x.catch((w=>(g.done(),F.reject(w))));s.push(v)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>F.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(r){return new F(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=Ax(s.target.error);t(l)}}))}let Ww=!1;function Ax(r){const e=vi.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ww||(Ww=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Pu="IndexBackfiller";class oR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me(Pu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();me(Pu,`Documents written: ${t}`)}catch(t){ki(t)?me(Pu,"Ignoring IndexedDB error during index backfill: ",t):await Ri(t)}await this.re(6e4)}))}}class cR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return F.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return me(Pu,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(me(Pu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=ZN(c);Sx(d,s)>0&&(s=d)})),new js(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}is.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function bm(r){return r==null}function nd(r){return r===0&&1/r==-1/0}function sE(r){return typeof r=="number"&&Number.isInteger(r)&&!nd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="";function qn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Zw(e)),e=uR(r.get(t),e);return Zw(e)}function uR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Bf:t+="";break;default:t+=c}}return t}function Zw(r){return r+Bf+""}function kr(r){const e=r.length;if(Oe(e>=2,64408,{path:r}),e===2)return Oe(r.charAt(0)===Bf&&r.charAt(1)==="",56145,{path:r}),pt.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Bf,c);switch((d<0||d>t)&&je(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:je(61167,{path:r})}c=d+2}return new pt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="remoteDocuments",_d="owner",Eo="owner",sd="mutationQueues",dR="userId",sr="mutations",e_="batchId",ml="userMutationsIndex",t_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(r,e){return[r,qn(e)]}function rE(r,e,t){return[r,qn(e),t]}const hR={},$o="documentMutations",qf="remoteDocumentsV14",fR=["prefixPath","collectionGroup","readTime","documentId"],bf="documentKeyIndex",mR=["prefixPath","collectionGroup","documentId"],aE="collectionGroupIndex",gR=["collectionGroup","readTime","prefixPath","documentId"],rd="remoteDocumentGlobal",Vp="remoteDocumentGlobalKey",Ko="targets",iE="queryTargetsIndex",pR=["canonicalId","targetId"],Qo="targetDocuments",xR=["targetId","path"],Ix="documentTargetsIndex",yR=["path","targetId"],Ff="targetGlobalKey",yl="targetGlobal",ad="collectionParents",bR=["collectionId","parent"],Yo="clientMetadata",vR="clientId",vm="bundles",wR="bundleId",wm="namedQueries",_R="name",Cx="indexConfiguration",NR="indexId",Pp="collectionGroupIndex",ER="collectionGroup",Lu="indexState",jR=["indexId","uid"],lE="sequenceNumberIndex",TR=["uid","sequenceNumber"],zu="indexEntries",SR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oE="documentKeyIndex",AR=["indexId","uid","orderedDocumentKey"],_m="documentOverlays",IR=["userId","collectionPath","documentId"],Lp="collectionPathOverlayIndex",CR=["userId","collectionPath","largestBatchId"],cE="collectionGroupOverlayIndex",RR=["userId","collectionGroup","largestBatchId"],Rx="globals",kR="name",uE=[sd,sr,$o,cl,Ko,_d,yl,Qo,Yo,rd,ad,vm,wm],DR=[...uE,_m],dE=[sd,sr,$o,qf,Ko,_d,yl,Qo,Yo,rd,ad,vm,wm,_m],hE=dE,kx=[...hE,Cx,Lu,zu],OR=kx,fE=[...kx,Rx],MR=fE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends tE{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function xn(r,e){const t=Ce(r);return vi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Di(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??On.RED,this.left=l??On.EMPTY,this.right=c??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new On(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return On.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ls([])}unionWith(e){let t=new Et(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new gE("Invalid base64 string: "+c):c}})(e);return new tn(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(r){if(Oe(!!r,39018),typeof r=="string"){let e=0;const t=VR.exec(r);if(Oe(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ut(r.seconds),nanos:Ut(r.nanos)}}function Ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ba(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="server_timestamp",xE="__type__",yE="__previous_value__",bE="__local_write_time__";function Dx(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[xE])==null?void 0:s.stringValue)===pE}function Nm(r){const e=r.mapValue.fields[yE];return Dx(e)?Nm(e):e}function id(r){const e=ya(r.mapValue.fields[bE].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t,s,l,c,d,f,g,x,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=v}}const Hf="(default)";class Tl{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="__type__",vE="__max__",gi={mapValue:{fields:{__type__:{stringValue:vE}}}},Mx="__vector__",Xo="value",vf={nullValue:"NULL_VALUE"};function Ti(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dx(r)?4:wE(r)?9007199254740991:Em(r)?10:11:je(28295,{value:r})}function Ur(r,e){if(r===e)return!0;const t=Ti(r);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return id(r).isEqual(id(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=ya(l.timestampValue),f=ya(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return ba(l.bytesValue).isEqual(ba(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Ut(l.geoPointValue.latitude)===Ut(c.geoPointValue.latitude)&&Ut(l.geoPointValue.longitude)===Ut(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Ut(l.integerValue)===Ut(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Ut(l.doubleValue),f=Ut(c.doubleValue);return d===f?nd(d)===nd(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Ho(r.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(n_(d)!==n_(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Ur(d[g],f[g])))return!1;return!0})(r,e);default:return je(52216,{left:r})}}function ld(r,e){return(r.values||[]).find((t=>Ur(t,e)))!==void 0}function Si(r,e){if(r===e)return 0;const t=Ti(r),s=Ti(e);if(t!==s)return Ue(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=Ut(c.integerValue||c.doubleValue),g=Ut(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return r_(r.timestampValue,e.timestampValue);case 4:return r_(id(r),id(e));case 5:return Op(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=ba(c),g=ba(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const v=Ue(f[x],g[x]);if(v!==0)return v}return Ue(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=Ue(Ut(c.latitude),Ut(d.latitude));return f!==0?f:Ue(Ut(c.longitude),Ut(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return a_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,C,V,Z;const f=c.fields||{},g=d.fields||{},x=(N=f[Xo])==null?void 0:N.arrayValue,v=(C=g[Xo])==null?void 0:C.arrayValue,w=Ue(((V=x==null?void 0:x.values)==null?void 0:V.length)||0,((Z=v==null?void 0:v.values)==null?void 0:Z.length)||0);return w!==0?w:a_(x,v)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gi.mapValue&&d===gi.mapValue)return 0;if(c===gi.mapValue)return 1;if(d===gi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},v=Object.keys(x);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const N=Op(g[w],v[w]);if(N!==0)return N;const C=Si(f[g[w]],x[v[w]]);if(C!==0)return C}return Ue(g.length,v.length)})(r.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function r_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const t=ya(r),s=ya(e),l=Ue(t.seconds,s.seconds);return l!==0?l:Ue(t.nanos,s.nanos)}function a_(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Si(t[l],s[l]);if(c)return c}return Ue(t.length,s.length)}function Jo(r){return Up(r)}function Up(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ya(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ba(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Up(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Up(t.fields[d])}`;return l+"}"})(r.mapValue):je(61005,{value:r})}function wf(r){switch(Ti(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nm(r);return e?16+wf(e):16;case 5:return 2*r.stringValue.length;case 6:return ba(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+wf(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Di(s.fields,((c,d)=>{l+=c.length+wf(d)})),l})(r.mapValue);default:throw je(13486,{value:r})}}function od(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Bp(r){return!!r&&"integerValue"in r}function cd(r){return!!r&&"arrayValue"in r}function i_(r){return!!r&&"nullValue"in r}function l_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _f(r){return!!r&&"mapValue"in r}function Em(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ox])==null?void 0:s.stringValue)===Mx}function Uu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Di(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Uu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(r.arrayValue.values[t]);return e}return{...r}}function wE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===vE}const _E={mapValue:{fields:{[Ox]:{stringValue:Mx},[Xo]:{arrayValue:{}}}}};function LR(r){return"nullValue"in r?vf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?od(Tl.empty(),ve.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Em(r)?_E:{mapValue:{}}:je(35942,{value:r})}function zR(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?od(Tl.empty(),ve.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?_E:"mapValue"in r?Em(r)?{mapValue:{}}:gi:je(61959,{value:r})}function o_(r,e){const t=Si(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function c_(r,e){const t=Si(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=Ft.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Uu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];_f(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Di(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Un(Uu(this.value))}}function NE(r){const e=[];return Di(r.fields,((t,s)=>{const l=new Ft([t]);if(_f(s)){const c=NE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Yt(e,0,Pe.min(),Pe.min(),Pe.min(),Un.empty(),0)}static newFoundDocument(e,t,s,l){return new Yt(e,1,t,Pe.min(),s,l,0)}static newNoDocument(e,t){return new Yt(e,2,t,Pe.min(),Pe.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,Pe.min(),Pe.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){this.position=e,this.inclusive=t}}function u_(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),t.key):s=Si(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function d_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ur(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function UR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class nt extends EE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new BR(e,t,s):t==="array-contains"?new HR(e,s):t==="in"?new CE(e,s):t==="not-in"?new GR(e,s):t==="array-contains-any"?new $R(e,s):new nt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new qR(e,s):new FR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Si(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Si(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nt extends EE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nt(e,t)}matches(e){return Zo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zo(r){return r.op==="and"}function qp(r){return r.op==="or"}function Vx(r){return jE(r)&&Zo(r)}function jE(r){for(const e of r.filters)if(e instanceof Nt)return!1;return!0}function Fp(r){if(r instanceof nt)return r.field.canonicalString()+r.op.toString()+Jo(r.value);if(Vx(r))return r.filters.map((e=>Fp(e))).join(",");{const e=r.filters.map((t=>Fp(t))).join(",");return`${r.op}(${e})`}}function TE(r,e){return r instanceof nt?(function(s,l){return l instanceof nt&&s.op===l.op&&s.field.isEqual(l.field)&&Ur(s.value,l.value)})(r,e):r instanceof Nt?(function(s,l){return l instanceof Nt&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&TE(d,l.filters[f])),!0):!1})(r,e):void je(19439)}function SE(r,e){const t=r.filters.concat(e);return Nt.create(t,r.op)}function AE(r){return r instanceof nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jo(t.value)}`})(r):r instanceof Nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(AE).join(" ,")+"}"})(r):"Filter"}class BR extends nt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class qR extends nt{constructor(e,t){super(e,"in",t),this.keys=IE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FR extends nt{constructor(e,t){super(e,"not-in",t),this.keys=IE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function IE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class HR extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cd(t)&&ld(t.arrayValue,this.value)}}class CE extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ld(this.value.arrayValue,t)}}class GR extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ld(this.value.arrayValue,t)}}class $R extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ld(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Hp(r,e=null,t=[],s=[],l=null,c=null,d=null){return new KR(r,e,t,s,l,c,d)}function Sl(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Fp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Jo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Jo(s))).join(",")),e.Te=t}return e.Te}function Nd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!UR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!TE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!d_(r.startAt,e.startAt)&&d_(r.endAt,e.endAt)}function Gf(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function $f(r,e){return r.filters.filter((t=>t instanceof nt&&t.field.isEqual(e)))}function h_(r,e,t){let s=vf,l=!0;for(const c of $f(r,e)){let d=vf,f=!0;switch(c.op){case"<":case"<=":d=LR(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=vf}o_({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];o_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function f_(r,e,t){let s=gi,l=!0;for(const c of $f(r,e)){let d=gi,f=!0;switch(c.op){case">=":case">":d=zR(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=gi}c_({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];c_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RE(r,e,t,s,l,c,d,f){return new mc(r,e,t,s,l,c,d,f)}function jm(r){return new mc(r)}function m_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function kE(r){return r.collectionGroup!==null}function Bu(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Et(Ft.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ud(c,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new ud(Ft.keyField(),s))}return e.Ie}function _s(r){const e=Ce(r);return e.Ee||(e.Ee=QR(e,Bu(r))),e.Ee}function QR(r,e){if(r.limitType==="F")return Hp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ud(l.field,c)}));const t=r.endAt?new Wo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wo(r.startAt.position,r.startAt.inclusive):null;return Hp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Gp(r,e){const t=r.filters.concat([e]);return new mc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Kf(r,e,t){return new mc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Tm(r,e){return Nd(_s(r),_s(e))&&r.limitType===e.limitType}function DE(r){return`${Sl(_s(r))}|lt:${r.limitType}`}function Ro(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>AE(l))).join(", ")}]`),bm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Jo(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Jo(l))).join(",")),`Target(${s})`})(_s(r))}; limitType=${r.limitType})`}function Ed(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ve.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Bu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=u_(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Bu(s),l)||s.endAt&&!(function(d,f,g){const x=u_(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Bu(s),l))})(r,e)}function OE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ME(r){return(e,t)=>{let s=!1;for(const l of Bu(r)){const c=YR(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function YR(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Si(g,x):je(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return mE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Dt(ve.comparator);function ws(){return XR}const VE=new Dt(ve.comparator);function Cu(...r){let e=VE;for(const t of r)e=e.insert(t.key,t);return e}function PE(r){let e=VE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Dr(){return qu()}function LE(){return qu()}function qu(){return new _a((r=>r.toString()),((r,e)=>r.isEqual(e)))}const JR=new Dt(ve.comparator),WR=new Et(ve.comparator);function Ye(...r){let e=WR;for(const t of r)e=e.add(t);return e}const ZR=new Et(Ue);function Px(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function zE(r){return{integerValue:""+r}}function UE(r,e){return sE(e)?zE(e):Lx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function ek(r,e,t){return r instanceof ec?(function(l,c){const d={fields:{[xE]:{stringValue:pE},[bE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Dx(c)&&(c=Nm(c)),c&&(d.fields[yE]=c),{mapValue:d}})(t,e):r instanceof tc?qE(r,e):r instanceof nc?FE(r,e):(function(l,c){const d=BE(l,c),f=g_(d)+g_(l.Ae);return Bp(d)&&Bp(l.Ae)?zE(f):Lx(l.serializer,f)})(r,e)}function tk(r,e,t){return r instanceof tc?qE(r,e):r instanceof nc?FE(r,e):t}function BE(r,e){return r instanceof sc?(function(s){return Bp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class ec extends Sm{}class tc extends Sm{constructor(e){super(),this.elements=e}}function qE(r,e){const t=HE(e);for(const s of r.elements)t.some((l=>Ur(l,s)))||t.push(s);return{arrayValue:{values:t}}}class nc extends Sm{constructor(e){super(),this.elements=e}}function FE(r,e){let t=HE(e);for(const s of r.elements)t=t.filter((l=>!Ur(l,s)));return{arrayValue:{values:t}}}class sc extends Sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function g_(r){return Ut(r.integerValue||r.doubleValue)}function HE(r){return cd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.field=e,this.transform=t}}function nk(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof tc&&l instanceof tc||s instanceof nc&&l instanceof nc?Ho(s.elements,l.elements,Ur):s instanceof sc&&l instanceof sc?Ur(s.Ae,l.Ae):s instanceof ec&&l instanceof ec})(r.transform,e.transform)}class sk{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Am{}function GE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new jd(r.key,gn.none()):new gc(r.key,r.data,gn.none());{const t=r.data,s=Un.empty();let l=new Et(Ft.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Na(r.key,s,new ls(l.toArray()),gn.none())}}function rk(r,e,t){r instanceof gc?(function(l,c,d){const f=l.value.clone(),g=x_(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Na?(function(l,c,d){if(!Nf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=x_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll($E(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Fu(r,e,t,s){return r instanceof gc?(function(c,d,f,g){if(!Nf(c.precondition,d))return f;const x=c.value.clone(),v=y_(c.fieldTransforms,g,d);return x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof Na?(function(c,d,f,g){if(!Nf(c.precondition,d))return f;const x=y_(c.fieldTransforms,g,d),v=d.data;return v.setAll($E(c)),v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,t,s):(function(c,d,f){return Nf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function ak(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=BE(s.transform,l||null);c!=null&&(t===null&&(t=Un.empty()),t.set(s.field,c))}return t||null}function p_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ho(s,l,((c,d)=>nk(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gc extends Am{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Na extends Am{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $E(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function x_(r,e,t){const s=new Map;Oe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,tk(d,f,t[l]))}return s}function y_(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,ek(c,d,e))}return s}class jd extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KE extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&rk(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Fu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Fu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=LE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=GE(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Pe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,((t,s)=>p_(t,s)))&&Ho(this.baseMutations,e.baseMutations,((t,s)=>p_(t,s)))}}class Bx{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){Oe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return JR})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Bx(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,lt;function lk(r){switch(r){case te.OK:return je(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return je(15467,{code:r})}}function QE(r){if(r===void 0)return Zt("GRPC error has no .code"),te.UNKNOWN;switch(r){case hn.OK:return te.OK;case hn.CANCELLED:return te.CANCELLED;case hn.UNKNOWN:return te.UNKNOWN;case hn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case hn.INTERNAL:return te.INTERNAL;case hn.UNAVAILABLE:return te.UNAVAILABLE;case hn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case hn.NOT_FOUND:return te.NOT_FOUND;case hn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case hn.ABORTED:return te.ABORTED;case hn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case hn.DATA_LOSS:return te.DATA_LOSS;default:return je(39323,{code:r})}}(lt=hn||(hn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new bi([4294967295,4294967295],0);function b_(r){const e=ok().encode(r),t=new qN;return t.update(e),new Uint8Array(t.digest())}function v_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new bi([t,s],0),new bi([l,c],0)]}class Fx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ru(`Invalid padding: ${t}`);if(s<0)throw new Ru(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bi.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(bi.fromNumber(s)));return l.compare(ck)===1&&(l=new bi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=b_(e),[s,l]=v_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Fx(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=b_(e),[s,l]=v_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,Sd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Td(Pe.min(),l,new Dt(Ue),ws(),Ye())}}class Sd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Sd(s,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class YE{constructor(e,t){this.targetId=e,this.Ce=t}}class XE{constructor(e,t,s=tn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class w_{constructor(){this.ve=0,this.Fe=__(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),s=Ye();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:je(38017,{changeType:c})}})),new Sd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=__()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ws(),this.Je=lf(),this.He=lf(),this.Ye=new Dt(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Gf(c))if(s===0){const d=new ve(c.path);this.et(t,d,Yt.newNoDocument(d,Pe.min()))}else Oe(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=ba(s).toUint8Array()}catch(g){if(g instanceof gE)return ed("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Fx(d,l,c)}catch(g){return ed(g instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&Gf(f.target)){const g=new ve(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Yt.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=Ye();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Td(e,t,this.Ye,this.je,s);return this.je=ws(),this.Je=lf(),this.He=lf(),this.Ye=new Dt(Ue),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new w_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Et(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Et(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new w_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new Dt(ve.comparator)}function __(){return new Dt(ve.comparator)}const dk={asc:"ASCENDING",desc:"DESCENDING"},hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fk={and:"AND",or:"OR"};class mk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $p(r,e){return r.useProto3Json||bm(e)?e:{value:e}}function rc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function gk(r,e){return rc(r,e.toTimestamp())}function Yn(r){return Oe(!!r,49232),Pe.fromTimestamp((function(t){const s=ya(t);return new _t(s.seconds,s.nanos)})(r))}function Hx(r,e){return Kp(r,e).canonicalString()}function Kp(r,e){const t=(function(l){return new pt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function WE(r){const e=pt.fromString(r);return Oe(l4(e),10190,{key:e.toString()}),e}function Qf(r,e){return Hx(r.databaseId,e.path)}function bl(r,e){const t=WE(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(t4(t))}function ZE(r,e){return Hx(r.databaseId,e)}function e4(r){const e=WE(r);return e.length===4?pt.emptyPath():t4(e)}function Qp(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t4(r){return Oe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function N_(r,e,t){return{name:Qf(r,e),fields:t.value.mapValue.fields}}function pk(r,e,t){const s=bl(r,e.name),l=Yn(e.updateTime),c=e.createTime?Yn(e.createTime):Pe.min(),d=new Un({mapValue:{fields:e.fields}}),f=Yt.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function xk(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:je(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,v){return x.useProto3Json?(Oe(v===void 0||typeof v=="string",58123),tn.fromBase64String(v||"")):(Oe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),tn.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const v=x.code===void 0?te.UNKNOWN:QE(x.code);return new ye(v,x.message||"")})(d);t=new XE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=bl(r,s.document.name),c=Yn(s.document.updateTime),d=s.document.createTime?Yn(s.document.createTime):Pe.min(),f=new Un({mapValue:{fields:s.document.fields}}),g=Yt.newFoundDocument(l,c,d,f),x=s.targetIds||[],v=s.removedTargetIds||[];t=new Ef(x,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=bl(r,s.document),c=s.readTime?Yn(s.readTime):Pe.min(),d=Yt.newNoDocument(l,c),f=s.removedTargetIds||[];t=new Ef([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=bl(r,s.document),c=s.removedTargetIds||[];t=new Ef([],c,l,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new ik(l,c),f=s.targetId;t=new YE(f,d)}}return t}function Yf(r,e){let t;if(e instanceof gc)t={update:N_(r,e.key,e.value)};else if(e instanceof jd)t={delete:Qf(r,e.key)};else if(e instanceof Na)t={update:N_(r,e.key,e.data),updateMask:Nk(e.fieldMask)};else{if(!(e instanceof KE))return je(16599,{Vt:e.type});t={verify:Qf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof ec)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof tc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof sc)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw je(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:gk(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(r,e.precondition)),t}function Yp(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?gn.updateTime(Yn(c.updateTime)):c.exists!==void 0?gn.exists(c.exists):gn.none()})(e.currentDocument):gn.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)Oe(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new ec;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];g=new tc(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];g=new nc(v)}else"increment"in f?g=new sc(d,f.increment):je(16584,{proto:f});const x=Ft.fromServerFormat(f.fieldPath);return new zx(x,g)})(r,l))):[];if(e.update){e.update.name;const l=bl(r,e.update.name),c=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new ls(x.map((v=>Ft.fromServerFormat(v))))})(e.updateMask);return new Na(l,c,d,t,s)}return new gc(l,c,t,s)}if(e.delete){const l=bl(r,e.delete);return new jd(l,t)}if(e.verify){const l=bl(r,e.verify);return new KE(l,t)}return je(1463,{proto:e})}function yk(r,e){return r&&r.length>0?(Oe(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Yn(l.updateTime):Yn(c);return d.isEqual(Pe.min())&&(d=Yn(c)),new sk(d,l.transformResults||[])})(t,e)))):[]}function n4(r,e){return{documents:[ZE(r,e.path)]}}function s4(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ZE(r,l);const c=(function(x){if(x.length!==0)return i4(Nt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((v=>(function(N){return{field:ko(N.field),direction:vk(N.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=$p(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function r4(r){let e=e4(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){Oe(s===1,65062);const v=t.from[0];v.allDescendants?l=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(w){const N=a4(w);return N instanceof Nt&&Vx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(V){return new ud(Do(V.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let N;return N=typeof w=="object"?w.value:w,bm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(w){const N=!!w.before,C=w.values||[];return new Wo(C,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const N=!w.before,C=w.values||[];return new Wo(C,N)})(t.endAt)),RE(e,l,d,c,f,"F",g,x)}function bk(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function a4(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Do(t.unaryFilter.field);return nt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Do(t.unaryFilter.field);return nt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Do(t.unaryFilter.field);return nt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(t.unaryFilter.field);return nt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nt.create(Do(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Nt.create(t.compositeFilter.filters.map((s=>a4(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(r):je(30097,{filter:r})}function vk(r){return dk[r]}function wk(r){return hk[r]}function _k(r){return fk[r]}function ko(r){return{fieldPath:r.canonicalString()}}function Do(r){return Ft.fromServerFormat(r.fieldPath)}function i4(r){return r instanceof nt?(function(t){if(t.op==="=="){if(l_(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(i_(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(l_(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(i_(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:wk(t.op),value:t.value}}})(r):r instanceof Nt?(function(t){const s=t.getFilters().map((l=>i4(l)));return s.length===1?s[0]:{compositeFilter:{op:_k(t.op),filters:s}}})(r):je(54877,{filter:r})}function Nk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function l4(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t,s,l,c=Pe.min(),d=Pe.min(),f=tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.yt=e}}function Ek(r,e){let t;if(e.document)t=pk(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ve.fromSegments(e.noDocument.path),l=Il(e.noDocument.readTime);t=Yt.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return je(56709);{const s=ve.fromSegments(e.unknownDocument.path),l=Il(e.unknownDocument.version);t=Yt.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new _t(l[0],l[1]);return Pe.fromTimestamp(c)})(e.readTime)),t}function E_(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:Qf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:rc(c,d.version.toTimestamp()),createTime:rc(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return je(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Al(e.version)}}return s}function Xf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Il(r){const e=new _t(r.seconds,r.nanoseconds);return Pe.fromTimestamp(e)}function dl(r,e){const t=(e.baseMutations||[]).map((c=>Yp(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Yp(r.yt,c))),l=_t.fromMillis(e.localWriteTimeMs);return new Ux(e.batchId,l,t,s)}function ku(r){const e=Il(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Il(r.lastLimboFreeSnapshotVersion):Pe.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return Oe(d===1,1966,{count:d}),_s(jm(e4(c.documents[0])))})(r.query):(function(c){return _s(r4(c))})(r.query),new da(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,tn.fromBase64String(r.resumeToken))}function c4(r,e){const t=Al(e.snapshotVersion),s=Al(e.lastLimboFreeSnapshotVersion);let l;l=Gf(e.target)?n4(r.yt,e.target):s4(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function u4(r){const e=r4({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Kf(e,e.limit,"L"):e}function ep(r,e){return new qx(e.largestBatchId,Yp(r.yt,e.overlayMutation))}function j_(r,e){const t=e.path.lastSegment();return[r,qn(e.path.popLast()),t]}function T_(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Al(s.readTime),documentKey:qn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{getBundleMetadata(e,t){return S_(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:Il(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return S_(e).put((function(l){return{bundleId:l.id,createTime:Al(Yn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return A_(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:u4(c.bundledQuery),readTime:Il(c.readTime)}})(s)}))}saveNamedQuery(e,t){return A_(e).put((function(l){return{name:l.name,readTime:Al(Yn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function S_(r){return xn(r,vm)}function A_(r){return xn(r,wm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Im(e,s)}getOverlay(e,t){return wu(e).get(j_(this.userId,t)).next((s=>s?ep(this.serializer,s):null))}getOverlays(e,t){const s=Dr();return F.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new qx(t,d);l.push(this.St(e,f))})),F.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add(qn(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(wu(e).Z(Lp,f))})),F.waitFor(c)}getOverlaysForCollection(e,t,s){const l=Dr(),c=qn(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return wu(e).J(Lp,d).next((f=>{for(const g of f){const x=ep(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=Dr();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wu(e).ee({index:cE,range:f},((g,x,v)=>{const w=ep(this.serializer,x);c.size()<l||w.largestBatchId===d?(c.set(w.getKey(),w),d=w.largestBatchId):v.done()})).next((()=>c))}St(e,t){return wu(e).put((function(l,c,d){const[f,g,x]=j_(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Yf(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function wu(r){return xn(r,_m)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{bt(e){return xn(e,Rx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?tn.fromUint8Array(s):tn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ut(e.integerValue));else if("doubleValue"in e){const s=Ut(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),nd(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=ya(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ba(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?wE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Em(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):je(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=Xo,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Ut(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),ve.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}hl.Kt=new hl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=255;function Sk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function I_(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=Sk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class Ak{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=I_(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=I_(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(To),this.sn(255)}_n(){this.an(To),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===To?(this.sn(To),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===To?(this.an(To),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class Ik{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Ck{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _u{constructor(){this.cn=new Ak,this.ln=new Ik(this.cn),this.hn=new Ck(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new fl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:jf(this.En),directionalValue:jf(this.dn),orderedDocumentKey:jf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function ii(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=C_(r.En,e.En),t!==0?t:(t=C_(r.dn,e.dn),t!==0?t:ve.comparator(r.In,e.In)))}function C_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function jf(r){return Z2()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function R_(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class k_{constructor(e){this.mn=new Et(((t,s)=>Ft.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Mp(e);if(t!==void 0&&!this.wn(t))return!1;const s=ol(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Et(Ft.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new xf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new xf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new xf(s.field,s.dir==="asc"?0:1)));return new Uf(Uf.UNKNOWN_ID,this.collectionId,t,td.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(r){var t,s;if(Oe(r instanceof nt||r instanceof Nt,20012),r instanceof nt){if(r instanceof CE){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>nt.create(r.field,"==",c))))||[];return Nt.create(l,"or")}return r}const e=r.filters.map((l=>d4(l)));return Nt.create(e,r.op)}function Rk(r){if(r.getFilters().length===0)return[];const e=Wp(d4(r));return Oe(h4(e),7391),Xp(e)||Jp(e)?[e]:e.getFilters()}function Xp(r){return r instanceof nt}function Jp(r){return r instanceof Nt&&Vx(r)}function h4(r){return Xp(r)||Jp(r)||(function(t){if(t instanceof Nt&&qp(t)){for(const s of t.getFilters())if(!Xp(s)&&!Jp(s))return!1;return!0}return!1})(r)}function Wp(r){if(Oe(r instanceof nt||r instanceof Nt,34018),r instanceof nt)return r;if(r.filters.length===1)return Wp(r.filters[0]);const e=r.filters.map((s=>Wp(s)));let t=Nt.create(e,r.op);return t=Jf(t),h4(t)?t:(Oe(t instanceof Nt,64498),Oe(Zo(t),40251),Oe(t.filters.length>1,57927),t.filters.reduce(((s,l)=>Gx(s,l))))}function Gx(r,e){let t;return Oe(r instanceof nt||r instanceof Nt,38388),Oe(e instanceof nt||e instanceof Nt,25473),t=r instanceof nt?e instanceof nt?(function(l,c){return Nt.create([l,c],"and")})(r,e):D_(r,e):e instanceof nt?D_(e,r):(function(l,c){if(Oe(l.filters.length>0&&c.filters.length>0,48005),Zo(l)&&Zo(c))return SE(l,c.getFilters());const d=qp(l)?l:c,f=qp(l)?c:l,g=d.filters.map((x=>Gx(x,f)));return Nt.create(g,"or")})(r,e),Jf(t)}function D_(r,e){if(Zo(e))return SE(e,r.getFilters());{const t=e.filters.map((s=>Gx(r,s)));return Nt.create(t,"or")}}function Jf(r){if(Oe(r instanceof nt||r instanceof Nt,11850),r instanceof nt)return r;const e=r.getFilters();if(e.length===1)return Jf(e[0]);if(jE(r))return r;const t=e.map((l=>Jf(l))),s=[];return t.forEach((l=>{l instanceof nt?s.push(l):l instanceof Nt&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:Nt.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.Cn=new $x}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(js.min())}updateCollectionGroup(e,t,s){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class $x{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Et(pt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Et(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="IndexedDbIndexManager",of=new Uint8Array(0);class Dk{constructor(e,t){this.databaseId=t,this.vn=new $x,this.Fn=new _a((s=>Sl(s)),((s,l)=>Nd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:qn(l)};return M_(e).put(c)}return F.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[YN(t),""],!1,!0);return M_(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(kr(d.parent))}return s}))}addFieldIndex(e,t){const s=Nu(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=Ao(e);return c.next((f=>{d.put(T_(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=Nu(e),l=Ao(e),c=So(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Nu(e),s=So(e),l=Ao(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return F.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new k_(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=So(e);let l=!0;const c=new Map;return F.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=Ye();const f=[];return F.forEach(c,((g,x)=>{me(O_,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((xe=>`${xe.fieldPath}:${xe.kind}`)).join(",")}`})(g)} to execute ${Sl(t)}`);const v=(function(ne,xe){const re=Mp(xe);if(re===void 0)return null;for(const le of $f(ne,re.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(x,g),w=(function(ne,xe){const re=new Map;for(const le of ol(xe))for(const E of $f(ne,le.fieldPath))switch(E.op){case"==":case"in":re.set(le.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(le.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null})(x,g),N=(function(ne,xe){const re=[];let le=!0;for(const E of ol(xe)){const T=E.kind===0?h_(ne,E.fieldPath,ne.startAt):f_(ne,E.fieldPath,ne.startAt);re.push(T.value),le&&(le=T.inclusive)}return new Wo(re,le)})(x,g),C=(function(ne,xe){const re=[];let le=!0;for(const E of ol(xe)){const T=E.kind===0?f_(ne,E.fieldPath,ne.endAt):h_(ne,E.fieldPath,ne.endAt);re.push(T.value),le&&(le=T.inclusive)}return new Wo(re,le)})(x,g),V=this.On(g,x,N),Z=this.On(g,x,C),B=this.Nn(g,x,w),ge=this.Bn(g.indexId,v,V,N.inclusive,Z,C.inclusive,B);return F.forEach(ge,(ae=>s.Y(ae,t.limit).next((ne=>{ne.forEach((xe=>{const re=ve.fromSegments(xe.documentKey);d.has(re)||(d=d.add(re),f.push(re))}))}))))})).next((()=>f))}return F.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Rk(Nt.create(e.filters,"and")).map((s=>Hp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const N=t?this.Ln(t[w/x]):of,C=this.kn(e,N,s[w%x],l),V=this.qn(e,N,c[w%x],d),Z=f.map((B=>this.kn(e,N,B,!0)));v.push(...this.createRange(C,V,Z))}return v}kn(e,t,s,l){const c=new fl(e,ve.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new fl(e,ve.empty(),t,s);return l?c.An():c}xn(e,t){const s=new k_(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return F.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new Et(Ft.comparator),v=!1;for(const w of g.filters)for(const N of w.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?v=!0:x=x.add(N.field));for(const w of g.orderBy)w.field.isKeyField()||(x=x.add(w.field));return x.size+(v?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new _u;for(const l of ol(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);hl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new _u;return hl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new _u;return hl.Kt.Dt(od(this.databaseId,t),s.Pn((function(c){const d=ol(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new _u);let c=0;for(const d of ol(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&cd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);hl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new _u;g.seed(f.un()),hl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof nt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Nu(e),l=Ao(e);return(t?s.J(Pp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return F.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(v,w){const N=w?new td(w.sequenceNumber,new js(Il(w.readTime),new ve(kr(w.documentKey)),w.largestBatchId)):td.empty(),C=v.fields.map((([V,Z])=>new xf(Ft.fromServerFormat(V),Z)));return new Uf(v.indexId,v.collectionGroup,C,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Ue(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=Nu(e),c=Ao(e);return this.Gn(e).next((d=>l.J(Pp,IDBKeyRange.bound(t,t)).next((f=>F.forEach(f,(g=>c.put(T_(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return F.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?F.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),F.forEach(f,(g=>this.zn(e,l,g).next((x=>{const v=this.jn(c,g);return x.isEqual(v)?F.resolve():this.Jn(e,c,g,x,v)})))))))}))}Hn(e,t,s,l){return So(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return So(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=So(e);let c=new Et(ii);return l.ee({index:oE,range:IDBKeyRange.only([s.indexId,this.uid,jf(this.$n(s,t))])},((d,f)=>{c=c.add(new fl(s.indexId,t,R_(f.arrayValue),R_(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new Et(ii);const l=this.Qn(t,e);if(l==null)return s;const c=Mp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(cd(d))for(const f of d.arrayValue.values||[])s=s.add(new fl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new fl(t.indexId,e.key,of,l));return s}Jn(e,t,s,l,c){me(O_,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,v,w,N){const C=g.getIterator(),V=x.getIterator();let Z=jo(C),B=jo(V);for(;Z||B;){let ge=!1,ae=!1;if(Z&&B){const ne=v(Z,B);ne<0?ae=!0:ne>0&&(ge=!0)}else Z!=null?ae=!0:ge=!0;ge?(w(B),B=jo(V)):ae?(N(Z),Z=jo(C)):(Z=jo(C),B=jo(V))}})(l,c,ii,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),F.waitFor(d)}Gn(e){let t=1;return Ao(e).ee({index:lE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>ii(d,f))).filter(((d,f,g)=>!f||ii(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=ii(d,e),g=ii(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,of,ve.empty()),g=l[d+1].Vn(this.uid,of,ve.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return ii(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(V_)}getMinOffset(e,t){return F.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||je(44426))))).next(V_)}}function M_(r){return xn(r,ad)}function So(r){return xn(r,zu)}function Nu(r){return xn(r,Cx)}function Ao(r){return xn(r,Lu)}function V_(r){Oe(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;Sx(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new js(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f4=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(r,e,t){const s=r.store(sr),l=r.store($o),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((v,w,N)=>(f++,N.delete())));c.push(g.next((()=>{Oe(f===1,47070,{batchId:t.batchId})})));const x=[];for(const v of t.mutations){const w=rE(e,v.key.path,t.batchId);c.push(l.delete(w)),x.push(v.key)}return F.waitFor(c).next((()=>x))}function Wf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw je(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(f4,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class Cm{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){Oe(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Cm(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).ee({index:ml,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=Oo(e),d=li(e);return d.add({}).next((f=>{Oe(typeof f=="number",49019);const g=new Ux(f,t,s,l),x=(function(C,V,Z){const B=Z.baseMutations.map((ae=>Yf(C.yt,ae))),ge=Z.mutations.map((ae=>Yf(C.yt,ae)));return{userId:V,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:B,mutations:ge}})(this.serializer,this.userId,g),v=[];let w=new Et(((N,C)=>Ue(N.canonicalString(),C.canonicalString())));for(const N of l){const C=rE(this.userId,N.key.path,f);w=w.add(N.key.path.popLast()),v.push(d.put(x)),v.push(c.put(C,hR))}return w.forEach((N=>{v.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),F.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return li(e).get(t).next((s=>s?(Oe(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),dl(this.serializer,s)):null))}er(e,t){return this.Xn[t]?F.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return li(e).ee({index:ml,range:l},((d,f,g)=>{f.userId===this.userId&&(Oe(f.batchId>=s,47524,{tr:s}),c=dl(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=xl;return li(e).ee({index:ml,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xl],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J(ml,t).next((s=>s.map((l=>dl(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=yf(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return Oo(e).ee({range:l},((d,f,g)=>{const[x,v,w]=d,N=kr(v);if(x===this.userId&&t.path.isEqual(N))return li(e).get(w).next((C=>{if(!C)throw je(61480,{nr:d,batchId:w});Oe(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:w}),c.push(dl(this.serializer,C))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Et(Ue);const l=[];return t.forEach((c=>{const d=yf(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=Oo(e).ee({range:f},((x,v,w)=>{const[N,C,V]=x,Z=kr(C);N===this.userId&&c.path.isEqual(Z)?s=s.add(V):w.done()}));l.push(g)})),F.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=yf(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new Et(Ue);return Oo(e).ee({range:d},((g,x,v)=>{const[w,N,C]=g,V=kr(N);w===this.userId&&s.isPrefixOf(V)?V.length===l&&(f=f.add(C)):v.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(li(e).get(c).next((d=>{if(d===null)throw je(35274,{batchId:c});Oe(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(dl(this.serializer,d))})))})),F.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return m4(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),F.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return Oo(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=kr(c[1]);l.push(g)}else f.done()})).next((()=>{Oe(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return g4(e,this.userId,t)}_r(e){return p4(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:xl,lastStreamToken:""}))}}function g4(r,e,t){const s=yf(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return Oo(r).ee({range:c,X:!0},((f,g,x)=>{const[v,w,N]=f;v===e&&w===l&&(d=!0),x.done()})).next((()=>d))}function li(r){return xn(r,sr)}function Oo(r){return xn(r,$o)}function p4(r){return xn(r,sd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Cl(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pe.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Io(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Oe(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return Io(e).ee(((d,f)=>{const g=ku(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>F.waitFor(c))).next((()=>l))}forEachTarget(e,t){return Io(e).ee(((s,l)=>{const c=ku(l);t(c)}))}lr(e){return L_(e).get(Ff).next((t=>(Oe(t!==null,2888),t)))}hr(e,t){return L_(e).put(Ff,t)}Pr(e,t){return Io(e).put(c4(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Sl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Io(e).ee({range:l,index:iE},((d,f,g)=>{const x=ku(f);Nd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=mi(e);return t.forEach((d=>{const f=qn(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),F.waitFor(l)}removeMatchingKeys(e,t,s){const l=mi(e);return F.forEach(t,(c=>{const d=qn(c.path);return F.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=mi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=mi(e);let c=Ye();return l.ee({range:s,X:!0},((d,f,g)=>{const x=kr(d[1]),v=new ve(x);c=c.add(v)})).next((()=>c))}containsKey(e,t){const s=qn(t.path),l=IDBKeyRange.bound([s],[YN(s)],!1,!0);let c=0;return mi(e).ee({index:Ix,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return Io(e).get(t).next((s=>s?ku(s):null))}}function Io(r){return xn(r,Ko)}function L_(r){return xn(r,yl)}function mi(r){return xn(r,Qo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LruGarbageCollector",x4=1048576;function U_([r,e],[t,s]){const l=Ue(r,t);return l===0?Ue(e,s):l}class Mk{constructor(e){this.Ir=e,this.buffer=new Et(U_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();U_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y4{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(z_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ki(t)?me(z_,"Ignoring IndexedDB error during garbage collection: ",t):await Ri(t)}await this.Vr(3e5)}))}}class Vk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(is.ce);const s=new Mk(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(P_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(s=w,f=Date.now(),this.removeTargets(e,s,t)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(x=Date.now(),Co()<=tt.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-v}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function b4(r,e){return new Vk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t){this.db=e,this.garbageCollector=b4(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return cf(e,s)}removeReference(e,t,s){return cf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return cf(e,t)}br(e,t){return(function(l,c){let d=!1;return p4(l).te((f=>g4(l,f,c).next((g=>(g&&(d=!0),F.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Pe.min()),mi(e).delete((function(w){return[0,qn(w.path)]})(d)))))}));l.push(g)}})).next((()=>F.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return cf(e,t)}Sr(e,t){const s=mi(e);let l,c=is.ce;return s.ee({index:Ix},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==is.ce&&t(new ve(kr(l)),c),c=x,l=g):c=is.ce})).next((()=>{c!==is.ce&&t(new ve(kr(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(r,e){return mi(r).put((function(s,l){return{targetId:0,path:qn(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.changes=new _a((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?F.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return al(e).put(s)}removeEntry(e,t,s){return al(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Xf(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=Yt.newInvalidDocument(t);return al(e).ee({index:bf,range:IDBKeyRange.only(Eu(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:Yt.newInvalidDocument(t)};return al(e).ee({index:bf,range:IDBKeyRange.only(Eu(t))},((l,c)=>{s={document:this.Cr(t,c),size:Wf(c)}})).next((()=>s))}getEntries(e,t){let s=ws();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=ws(),l=new Dt(ve.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,Wf(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return F.resolve();let l=new Et(F_);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(Eu(l.first()),Eu(l.last())),d=l.getIterator();let f=d.getNext();return al(e).ee({index:bf,range:c},((g,x,v)=>{const w=ve.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&F_(f,w)<0;)s(f,null),f=d.getNext();f&&f.isEqual(w)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?v.j(Eu(f)):v.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Xf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return al(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let v=ws();for(const w of x){const N=this.Cr(ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);N.isFoundDocument()&&(Ed(t,N)||l.has(N.key))&&(v=v.insert(N.key,N))}return v}))}getAllFromCollectionGroup(e,t,s,l){let c=ws();const d=q_(t,s),f=q_(t,js.max());return al(e).ee({index:aE,range:IDBKeyRange.bound(d,f,!0)},((g,x,v)=>{const w=this.Cr(ve.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(w.key,w),c.size===l&&v.done()})).next((()=>c))}newChangeBuffer(e){return new zk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return B_(e).get(Vp).next((t=>(Oe(!!t,20021),t)))}Dr(e,t){return B_(e).put(Vp,t)}Cr(e,t){if(t){const s=Ek(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Pe.min())))return s}return Yt.newInvalidDocument(e)}}function w4(r){return new Lk(r)}class zk extends v4{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new _a((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new Et(((c,d)=>Ue(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=E_(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=Wf(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=E_(this.Nr.serializer,d.convertToNoDocument(Pe.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),F.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function B_(r){return xn(r,rd)}function al(r){return xn(r,qf)}function Eu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function q_(r,e){const t=e.documentKey.path.toArray();return[r,Xf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function F_(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=Ue(t[c],s[c]),l)return l;return l=Ue(t.length,s.length),l||(l=Ue(t[t.length-2],s[s.length-2]),l||Ue(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&Fu(s.mutation,l,ls.empty(),_t.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ye()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ye()){const l=Dr();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Cu();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Dr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ye())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=ws();const d=qu(),f=(function(){return qu()})();return t.forEach(((g,x)=>{const v=s.get(x.key);l.has(x.key)&&(v===void 0||v.mutation instanceof Na)?c=c.insert(x.key,x):v!==void 0?(d.set(x.key,v.mutation.getFieldMask()),Fu(v.mutation,x,v.mutation.getFieldMask(),_t.now())):d.set(x.key,ls.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,v)=>d.set(x,v))),t.forEach(((x,v)=>f.set(x,new Uk(v,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=qu();let l=new Dt(((d,f)=>d-f)),c=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let v=s.get(g)||ls.empty();v=f.applyToLocalView(x,v),s.set(g,v);const w=(l.get(f.batchId)||Ye()).add(g);l=l.insert(f.batchId,w)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,v=g.value,w=LE();v.forEach((N=>{if(!c.has(N)){const C=GE(t.get(N),s.get(N));C!==null&&w.set(N,C),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return F.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):F.resolve(Dr());let f=Go,g=c;return d.next((x=>F.forEach(x,((v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(v)?F.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{g=g.insert(v,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,Ye()))).next((v=>({batchId:f,changes:PE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let l=Cu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Cu();return this.indexManager.getCollectionParents(e,c).next((f=>F.forEach(f,(g=>{const x=(function(w,N){return new mc(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((v=>{v.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const v=x.getKey();d.get(v)===null&&(d=d.insert(v,Yt.newInvalidDocument(v)))}));let f=Cu();return d.forEach(((g,x)=>{const v=c.get(g);v!==void 0&&Fu(v.mutation,x,ls.empty(),_t.now()),Ed(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Yn(l.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:u4(l.bundledQuery),readTime:Yn(l.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.overlays=new Dt(ve.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Dr();return F.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),F.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),F.resolve()}getOverlaysForCollection(e,t,s){const l=Dr(),c=t.length+1,d=new ve(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return F.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Dt(((x,v)=>x-v));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let v=c.get(x.largestBatchId);v===null&&(v=Dr(),c=c.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const f=Dr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,v)=>f.set(x,v))),!(f.size()>=l)););return F.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new qx(t,s));let c=this.qr.get(t);c===void 0&&(c=Ye(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.Qr=new Et(En.$r),this.Ur=new Et(En.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new En(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new En(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ve(new pt([])),s=new En(t,e),l=new En(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new pt([])),s=new En(t,e),l=new En(t,e+1);let c=Ye();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new En(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class En{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Et(En.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Ux(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new En(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(d)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return F.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?xl:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new En(t,0),l=new En(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),F.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Et(Ue);return t.forEach((l=>{const c=new En(l,0),d=new En(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),F.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;ve.isDocumentKey(c)||(c=c.child(""));const d=new En(new ve(c),0);let f=new Et(Ue);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),F.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Oe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return F.forEach(t.mutations,(l=>{const c=new En(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new En(t,0),l=this.Zr.firstAfterOrEqual(s);return F.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.ri=e,this.docs=(function(){return new Dt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return F.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let s=ws();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Yt.newInvalidDocument(l))})),F.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=ws();const d=t.path,f=new ve(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:v}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Sx(ZN(v),s)<=0||(l.has(v.key)||Ed(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return F.resolve(c)}getAllFromCollectionGroup(e,t,s,l){je(9500)}ii(e,t){return F.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new $k(this)}getSize(e){return F.resolve(this.size)}}class $k extends v4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.persistence=e,this.si=new _a((t=>Sl(t)),Nd),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Kx,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),F.waitFor(c).next((()=>l))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return F.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),F.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),F.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return F.resolve(s)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.ui={},this.overlays={},this.ci=new is(0),this.li=!1,this.li=!0,this.hi=new Fk,this.referenceDelegate=e(this),this.Pi=new Kk(this),this.indexManager=new kk,this.remoteDocumentCache=(function(l){return new Gk(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new o4(t),this.Ii=new Bk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Hk(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const l=new Qk(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return F.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Qk extends tE{constructor(e){super(),this.currentSequenceNumber=e}}class Rm{constructor(e){this.persistence=e,this.Ri=new Kx,this.Vi=null}static mi(e){return new Rm(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),F.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(s=>{const l=ve.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Zf{constructor(e,t){this.persistence=e,this.pi=new _a((s=>qn(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=b4(this,t)}static mi(e,t){return new Zf(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?F.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Pe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wf(e.data.value)),t}br(e,t,s){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return F.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.serializer=e}k(e,t,s,l){const c=new ym("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(_d)})(e),(function(g){g.createObjectStore(sd,{keyPath:dR}),g.createObjectStore(sr,{keyPath:e_,autoIncrement:!0}).createIndex(ml,t_,{unique:!0}),g.createObjectStore($o)})(e),H_(e),(function(g){g.createObjectStore(cl)})(e));let d=F.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(Qo),g.deleteObjectStore(Ko),g.deleteObjectStore(yl)})(e),H_(e)),d=d.next((()=>(function(g){const x=g.store(yl),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return x.put(Ff,v)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(sr).J().next((w=>{g.deleteObjectStore(sr),g.createObjectStore(sr,{keyPath:e_,autoIncrement:!0}).createIndex(ml,t_,{unique:!0});const N=x.store(sr),C=w.map((V=>N.put(V)));return F.waitFor(C)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(Yo,{keyPath:vR})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(rd)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(vm,{keyPath:wR})})(e),(function(g){g.createObjectStore(wm,{keyPath:_R})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(_m,{keyPath:IR});x.createIndex(Lp,CR,{unique:!1}),x.createIndex(cE,RR,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(qf,{keyPath:fR});x.createIndex(bf,mR),x.createIndex(aE,gR)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(cl)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Cx,{keyPath:NR,autoIncrement:!0}).createIndex(Pp,ER,{unique:!1}),g.createObjectStore(Lu,{keyPath:jR}).createIndex(lE,TR,{unique:!1}),g.createObjectStore(zu,{keyPath:SR}).createIndex(oE,AR,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(Lu).clear()})).next((()=>{t.objectStore(zu).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Rx,{keyPath:kR})})(e)}))),s<18&&l>=18&&Z2()&&(d=d.next((()=>{t.objectStore(Lu).clear()})).next((()=>{t.objectStore(zu).clear()}))),d}wi(e){let t=0;return e.store(cl).ee(((s,l)=>{t+=Wf(l)})).next((()=>{const s={byteSize:t};return e.store(rd).put(Vp,s)}))}yi(e){const t=e.store(sd),s=e.store(sr);return t.J().next((l=>F.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,xl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(ml,d).next((f=>F.forEach(f,(g=>{Oe(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=dl(this.serializer,g);return m4(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(Qo),s=e.store(cl);return e.store(yl).get(Ff).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new pt(d),x=(function(w){return[0,qn(w)]})(g);c.push(t.get(x).next((v=>v?F.resolve():(w=>t.put({targetId:0,path:qn(w),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>F.waitFor(c)))}))}bi(e,t){e.createObjectStore(ad,{keyPath:bR});const s=t.store(ad),l=new $x,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:qn(g)})}};return t.store(cl).ee({X:!0},((d,f)=>{const g=new pt(d);return c(g.popLast())})).next((()=>t.store($o).ee({X:!0},(([d,f,g],x)=>{const v=kr(f);return c(v.popLast())}))))}Di(e){const t=e.store(Ko);return t.ee(((s,l)=>{const c=ku(l),d=c4(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(cl),l=[];return s.ee(((c,d)=>{const f=t.store(qf),g=(function(w){return w.document?new ve(pt.fromString(w.document.name).popFirst(5)):w.noDocument?ve.fromSegments(w.noDocument.path):w.unknownDocument?ve.fromSegments(w.unknownDocument.path):je(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>F.waitFor(l)))}Fi(e,t){const s=t.store(sr),l=w4(this.serializer),c=new Qx(Rm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??Ye();dl(this.serializer,g).keys().forEach((v=>x=x.add(v))),f.set(g.userId,x)})),F.forEach(f,((g,x)=>{const v=new Ln(x),w=Im.wt(this.serializer,v),N=c.getIndexManager(v),C=Cm.wt(v,this.serializer,N,c.referenceDelegate);return new _4(l,C,w,N).recalculateAndSaveOverlaysForDocumentKeys(new zp(t,is.ce),g).next()}))}))}}function H_(r){r.createObjectStore(Qo,{keyPath:xR}).createIndex(Ix,yR,{unique:!0}),r.createObjectStore(Ko,{keyPath:"targetId"}).createIndex(iE,pR,{unique:!0}),r.createObjectStore(yl)}const oi="IndexedDbPersistence",tp=18e5,np=5e3,sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xk="main";class Yx{constructor(e,t,s,l,c,d,f,g,x,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=v,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!Yx.v())throw new ye(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pk(this,l),this.$i=t+Xk,this.serializer=new o4(g),this.Ui=new vi(this.$i,this.Ni,new Yk(this.serializer)),this.hi=new Tk,this.Pi=new Ok(this.referenceDelegate,this.serializer),this.remoteDocumentCache=w4(this.serializer),this.Ii=new jk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Zt(oi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(te.FAILED_PRECONDITION,sp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new is(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ki(e))return me(oi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(oi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return ju(e).get(Eo).next((t=>F.resolve(this.es(t))))}ts(e){return uf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,tp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=xn(t,Yo);return s.J().next((l=>{const c=this.ss(l,tp),d=l.filter((f=>c.indexOf(f)===-1));return F.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?F.resolve(!0):ju(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ye(te.FAILED_PRECONDITION,sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).J().next((s=>this.ss(s,np).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&me(oi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[_d,Yo],(e=>{const t=new zp(e,is.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>uf(e).J().next((t=>this.ss(t,tp).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Cm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Im.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){me(oi,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?MR:g===17?fE:g===16?OR:g===15?kx:g===14?hE:g===13?dE:g===12?DR:g===11?uE:void je(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new zp(f,this.ci?this.ci.next():is.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ye(te.FAILED_PRECONDITION,eE);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return ju(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(te.FAILED_PRECONDITION,sp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ju(e).put(Eo,t)}static v(){return vi.v()}Zi(e){const t=ju(e);return t.get(Eo).next((s=>this.es(s)?(me(oi,"Releasing primary lease."),t.delete(Eo)):F.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Zt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;W2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return me(oi,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Zt(oi,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ju(r){return xn(r,_d)}function uf(r){return xn(r,Yo)}function N4(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=Ye(),l=Ye();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Xx(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return W2()?8:nE(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Jk;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(Co()<=tt.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Co()<=tt.DEBUG&&me("QueryEngine","Query:",Ro(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Co()<=tt.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(t))):F.resolve())}ys(e,t){if(m_(t))return F.resolve(null);let s=_s(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Kf(t,null,"F"),s=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Ye(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Kf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return m_(t)||l.isEqual(Pe.min())?F.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?F.resolve(null):(Co()<=tt.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ro(t)),this.vs(e,d,t,WN(l,Go)).next((f=>f)))}))}Ds(e,t){let s=new Et(ME(e));return t.forEach(((l,c)=>{Ed(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return Co()<=tt.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ps.getDocumentsMatchingQuery(e,t,js.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="LocalStore",Wk=3e8;class Zk{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Dt(Ue),this.xs=new _a((c=>Sl(c)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function j4(r,e,t,s){return new Zk(r,e,t,s)}async function T4(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=Ye();for(const x of l){d.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}for(const x of c){f.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function e8(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,v){const w=x.batch,N=w.keys();let C=F.resolve();return N.forEach((V=>{C=C.next((()=>v.getEntry(g,V))).next((Z=>{const B=x.docVersions.get(V);Oe(B!==null,48541),Z.version.compareTo(B)<0&&(w.applyToRemoteDocument(Z,x),Z.isValidDocument()&&(Z.setReadTime(x.commitVersion),v.addEntry(Z)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Ye();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function S4(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function t8(r,e){const t=Ce(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((v,w)=>{const N=l.get(w);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,w))));let C=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(tn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),l=l.insert(w,C),(function(Z,B,ge){return Z.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=Wk?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(N,C,v)&&f.push(t.Pi.updateTargetData(c,C))}));let g=ws(),x=Ye();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),f.push(n8(c,d,e.documentUpdates).next((v=>{g=v.ks,x=v.qs}))),!s.isEqual(Pe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(v)}return F.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function n8(r,e,t){let s=Ye(),l=Ye();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=ws();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):me(Jx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function s8(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=xl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function em(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,F.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new da(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function ac(r,e,t){const s=Ce(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ki(d))throw d;me(Jx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function tm(r,e,t){const s=Ce(r);let l=Pe.min(),c=Ye();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,v){const w=Ce(g),N=w.xs.get(v);return N!==void 0?F.resolve(w.Ms.get(N)):w.Pi.getTargetData(x,v)})(s,d,_s(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Pe.min(),t?c:Ye()))).next((f=>(C4(s,OE(e),f),{documents:f,Qs:c})))))}function A4(r,e){const t=Ce(r),s=Ce(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function I4(r,e){const t=Ce(r),s=t.Os.get(e)||Pe.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,WN(s,Go),Number.MAX_SAFE_INTEGER))).then((l=>(C4(t,e,l),l)))}function C4(r,e,t){let s=r.Os.get(e)||Pe.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="firestore_clients";function G_(r,e){return`${R4}_${r}_${e}`}const k4="firestore_mutations";function $_(r,e,t){let s=`${k4}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const D4="firestore_targets";function rp(r,e){return`${D4}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="SharedClientState";class nm{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new ye(l.error.code,l.error.message))),d?new nm(e,t,l.state,c):(Zt(Cr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new ye(s.error.code,s.error.message))),c?new Hu(e,s.state,l):(Zt(Cr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Px();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=sE(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new sm(e,c):(Zt(Cr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Wx(t.clientId,t.onlineState):(Zt(Cr,`Failed to parse online state: ${e}`),null)}}class Zp{constructor(){this.activeTargetIds=Px()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ap{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Dt(Ue),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=G_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Zp),this.ro=new RegExp(`^${R4}_${d}_([^_]*)$`),this.io=new RegExp(`^${k4}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${D4}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(G_(this.persistenceKey,s));if(l){const c=sm.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(rp(this.persistenceKey,e));if(l){const c=Hu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me(Cr,"READ",e,t),t}setItem(e,t){me(Cr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){me(Cr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(me(Cr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=is.ce;if(c!=null)try{const f=JSON.parse(c);Oe(typeof f=="number",30636,{So:c}),d=f}catch(f){Zt(Cr,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==is.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new nm(this.currentUser,e,t,s),c=$_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=$_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=rp(this.persistenceKey,e),c=new Hu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return sm.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return nm.Ws(new Ln(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Hu.Ws(l,t)}uo(e){return Wx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);me(Cr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Px();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class O4{constructor(){this.Mo=new Zp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="ConnectivityMonitor";class Q_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(K_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(K_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function ex(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="RestConnection",a8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Hf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=ex(),f=this.zo(e,t.toUriEncodedString());me(ip,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),v=uc(x);return this.Jo(e,f,g,s,v).then((w=>(me(ip,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw ed(ip,`RPC '${e}' ${d} failed with error: `,w,"url: ",f,"request:",s),w}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=a8[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class o8 extends i8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=ex();return new Promise(((f,g)=>{const x=new FN;x.setWithCredentials(!0),x.listenOnce(HN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case pf.NO_ERROR:const w=x.getResponseJson();me(Pn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),f(w);break;case pf.TIMEOUT:me(Pn,`RPC '${e}' ${d} timed out`),g(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const N=x.getStatus();if(me(Pn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const V=C==null?void 0:C.error;if(V&&V.status&&V.message){const Z=(function(ge){const ae=ge.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ae)>=0?ae:te.UNKNOWN})(V.status);g(new ye(Z,V.message))}else g(new ye(te.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new ye(te.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{me(Pn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(l);me(Pn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",v,s,15)}))}T_(e,t,s){const l=ex(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=KN(),f=$N(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=c.join("");me(Pn,`Creating RPC '${e}' stream ${l}: ${v}`,g);const w=d.createWebChannel(v,g);this.I_(w);let N=!1,C=!1;const V=new l8({Yo:B=>{C?me(Pn,`Not sending because RPC '${e}' stream ${l} is closed:`,B):(N||(me(Pn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),N=!0),me(Pn,`RPC '${e}' stream ${l} sending:`,B),w.send(B))},Zo:()=>w.close()}),Z=(B,ge,ae)=>{B.listen(ge,(ne=>{try{ae(ne)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return Z(w,Iu.EventType.OPEN,(()=>{C||(me(Pn,`RPC '${e}' stream ${l} transport opened.`),V.o_())})),Z(w,Iu.EventType.CLOSE,(()=>{C||(C=!0,me(Pn,`RPC '${e}' stream ${l} transport closed`),V.a_(),this.E_(w))})),Z(w,Iu.EventType.ERROR,(B=>{C||(C=!0,ed(Pn,`RPC '${e}' stream ${l} transport errored. Name:`,B.name,"Message:",B.message),V.a_(new ye(te.UNAVAILABLE,"The operation could not be completed")))})),Z(w,Iu.EventType.MESSAGE,(B=>{var ge;if(!C){const ae=B.data[0];Oe(!!ae,16349);const ne=ae,xe=(ne==null?void 0:ne.error)||((ge=ne[0])==null?void 0:ge.error);if(xe){me(Pn,`RPC '${e}' stream ${l} received error:`,xe);const re=xe.status;let le=(function(A){const R=hn[A];if(R!==void 0)return QE(R)})(re),E=xe.message;le===void 0&&(le=te.INTERNAL,E="Unknown error status: "+re+" with message "+xe.message),C=!0,V.a_(new ye(le,E)),w.close()}else me(Pn,`RPC '${e}' stream ${l} received:`,ae),V.u_(ae)}})),Z(f,GN.STAT_EVENT,(B=>{B.stat===Dp.PROXY?me(Pn,`RPC '${e}' stream ${l} detected buffering proxy`):B.stat===Dp.NOPROXY&&me(Pn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){return typeof window<"u"?window:null}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(r){return new mk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="PersistentStream";class P4{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V4(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new ye(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(Y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class c8 extends P4{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xk(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Pe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Pe.min():d.readTime?Yn(d.readTime):Pe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Qp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=Gf(g)?{documents:n4(c,g)}:{query:s4(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=JE(c,d.resumeToken);const x=$p(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Pe.min())>0){f.readTime=rc(c,d.snapshotVersion.toTimestamp());const x=$p(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=bk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Qp(this.serializer),t.removeTarget=e,this.q_(t)}}class u8 extends P4{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yk(e.writeResults,e.commitTime),s=Yn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Qp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Yf(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{}class h8 extends d8{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Kp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(te.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Kp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class f8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zt(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="RemoteStore";class m8{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Vl(this)&&(me(Rl,"Restarting streams for network reachability change."),await(async function(g){const x=Ce(g);x.Ea.add(4),await Ad(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Dm(x)})(this))}))})),this.Ra=new f8(s,l)}}async function Dm(r){if(Vl(r))for(const e of r.da)await e(!0)}async function Ad(r){for(const e of r.da)await e(!1)}function Om(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ty(t)?ey(t):xc(t).O_()&&Zx(t,e))}function ic(r,e){const t=Ce(r),s=xc(t);t.Ia.delete(e),s.O_()&&L4(t,e),t.Ia.size===0&&(s.O_()?s.L_():Vl(t)&&t.Ra.set("Unknown"))}function Zx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xc(r).Y_(e)}function L4(r,e){r.Va.Ue(e),xc(r).Z_(e)}function ey(r){r.Va=new uk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),xc(r).start(),r.Ra.ua()}function ty(r){return Vl(r)&&!xc(r).x_()&&r.Ia.size>0}function Vl(r){return Ce(r).Ea.size===0}function z4(r){r.Va=void 0}async function g8(r){r.Ra.set("Online")}async function p8(r){r.Ia.forEach(((e,t)=>{Zx(r,e)}))}async function x8(r,e){z4(r),ty(r)?(r.Ra.ha(e),ey(r)):r.Ra.set("Unknown")}async function y8(r,e,t){if(r.Ra.set("Online"),e instanceof XE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){me(Rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rm(r,s)}else if(e instanceof Ef?r.Va.Ze(e):e instanceof YE?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pe.min()))try{const s=await S4(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(x);v&&c.Ia.set(x,v.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(tn.EMPTY_BYTE_STRING,v.snapshotVersion)),L4(c,g);const w=new da(v.target,g,x,v.sequenceNumber);Zx(c,w)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){me(Rl,"Failed to raise snapshot:",s),await rm(r,s)}}async function rm(r,e,t){if(!ki(e))throw e;r.Ea.add(1),await Ad(r),r.Ra.set("Offline"),t||(t=()=>S4(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(Rl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Dm(r)}))}function U4(r,e){return e().catch((t=>rm(r,t,e)))}async function pc(r){const e=Ce(r),t=Ai(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xl;for(;b8(e);)try{const l=await s8(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,v8(e,l)}catch(l){await rm(e,l)}B4(e)&&q4(e)}function b8(r){return Vl(r)&&r.Ta.length<10}function v8(r,e){r.Ta.push(e);const t=Ai(r);t.O_()&&t.X_&&t.ea(e.mutations)}function B4(r){return Vl(r)&&!Ai(r).x_()&&r.Ta.length>0}function q4(r){Ai(r).start()}async function w8(r){Ai(r).ra()}async function _8(r){const e=Ai(r);for(const t of r.Ta)e.ea(t.mutations)}async function N8(r,e,t){const s=r.Ta.shift(),l=Bx.from(s,e,t);await U4(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await pc(r)}async function E8(r,e){e&&Ai(r).X_&&await(async function(s,l){if((function(d){return lk(d)&&d!==te.ABORTED})(l.code)){const c=s.Ta.shift();Ai(s).B_(),await U4(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await pc(s)}})(r,e),B4(r)&&q4(r)}async function X_(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),me(Rl,"RemoteStore received new credentials");const s=Vl(t);t.Ea.add(3),await Ad(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dm(t)}async function tx(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Dm(t)):e||(t.Ea.add(2),await Ad(t),t.Ra.set("Unknown"))}function xc(r){return r.ma||(r.ma=(function(t,s,l){const c=Ce(t);return c.sa(),new c8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:g8.bind(null,r),t_:p8.bind(null,r),r_:x8.bind(null,r),H_:y8.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ty(r)?ey(r):r.Ra.set("Unknown")):(await r.ma.stop(),z4(r))}))),r.ma}function Ai(r){return r.fa||(r.fa=(function(t,s,l){const c=Ce(t);return c.sa(),new u8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:w8.bind(null,r),r_:E8.bind(null,r),ta:_8.bind(null,r),na:N8.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await pc(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Rl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new ny(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(r,e){if(Zt("AsyncQueue",`${e}: ${r}`),ki(r))return new ye(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Cu(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Uo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.ga=new Dt(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class lc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new lc(e,t,Uo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class T8{constructor(){this.queries=W_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Ce(t),c=l.queries;l.queries=W_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function W_(){return new _a((r=>DE(r)),Tm)}async function F4(r,e){const t=Ce(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new j8,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Mm(d,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&sy(t)}async function H4(r,e){const t=Ce(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function S8(r,e){const t=Ce(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&sy(t)}function A8(r,e,t){const s=Ce(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function sy(r){r.Ca.forEach((e=>{e.next()}))}var nx,Z_;(Z_=nx||(nx={})).Ma="default",Z_.Cache="cache";class G4{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new lc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.key=e}}class K4{constructor(e){this.key=e}}class Q4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=ME(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new J_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((v,w)=>{const N=l.get(v),C=Ed(this.query,w)?w:null,V=!!N&&this.mutatedKeys.has(N.key),Z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let B=!1;N&&C?N.data.isEqual(C.data)?V!==Z&&(s.track({type:3,doc:C}),B=!0):this.su(N,C)||(s.track({type:2,doc:C}),B=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(f=!0)):!N&&C?(s.track({type:0,doc:C}),B=!0):N&&!C&&(s.track({type:1,doc:N}),B=!0,(g||x)&&(f=!0)),B&&(C?(d=d.add(C),c=Z?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,w)=>(function(C,V){const Z=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:B})}};return Z(C)-Z(V)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new lc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new J_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new K4(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new $4(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yc="SyncEngine";class I8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class C8{constructor(e){this.key=e,this.hu=!1}}class R8{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new _a((f=>DE(f)),Tm),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(ve.comparator),this.Au=new Map,this.Ru=new Kx,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k8(r,e,t=!0){const s=Vm(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await Y4(s,e,t,!0),l}async function D8(r,e){const t=Vm(r);await Y4(t,e,!0,!1)}async function Y4(r,e,t,s){const l=await em(r.localStore,_s(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ry(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&Om(r.remoteStore,l),f}async function ry(r,e,t,s,l){r.pu=(w,N,C)=>(async function(Z,B,ge,ae){let ne=B.view.ru(ge);ne.Cs&&(ne=await tm(Z.localStore,B.query,!1).then((({documents:E})=>B.view.ru(E,ne))));const xe=ae&&ae.targetChanges.get(B.targetId),re=ae&&ae.targetMismatches.get(B.targetId)!=null,le=B.view.applyChanges(ne,Z.isPrimaryClient,xe,re);return sx(Z,B.targetId,le.au),le.snapshot})(r,w,N,C);const c=await tm(r.localStore,e,!0),d=new Q4(e,c.Qs),f=d.ru(c.documents),g=Sd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);sx(r,t,x.au);const v=new I8(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function O8(r,e,t){const s=Ce(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Tm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await ac(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&ic(s.remoteStore,l.targetId),oc(s,l.targetId)})).catch(Ri)):(oc(s,l.targetId),await ac(s.localStore,l.targetId,!0))}async function M8(r,e){const t=Ce(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ic(t.remoteStore,s.targetId))}async function V8(r,e,t){const s=oy(r);try{const l=await(function(d,f){const g=Ce(d),x=_t.now(),v=f.reduce(((C,V)=>C.add(V.key)),Ye());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let V=ws(),Z=Ye();return g.Ns.getEntries(C,v).next((B=>{V=B,V.forEach(((ge,ae)=>{ae.isValidDocument()||(Z=Z.add(ge))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,V))).next((B=>{w=B;const ge=[];for(const ae of f){const ne=ak(ae,w.get(ae.key).overlayedDocument);ne!=null&&ge.push(new Na(ae.key,ne,NE(ne.value.mapValue),gn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,ge,f)})).next((B=>{N=B;const ge=B.applyToLocalDocumentSet(w,Z);return g.documentOverlayCache.saveOverlays(C,B.batchId,ge)}))})).then((()=>({batchId:N.batchId,changes:PE(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Dt(Ue)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Oi(s,l.changes),await pc(s.remoteStore)}catch(l){const c=Mm(l,"Failed to persist write");t.reject(c)}}async function X4(r,e){const t=Ce(r);try{const s=await t8(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(Oe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Oe(d.hu,14607):l.removedDocuments.size>0&&(Oe(d.hu,42227),d.hu=!1))})),await Oi(t,s,e)}catch(s){await Ri(s)}}function e2(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=Ce(d);g.onlineState=f;let x=!1;g.queries.forEach(((v,w)=>{for(const N of w.Sa)N.va(f)&&(x=!0)})),x&&sy(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function P8(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Dt(ve.comparator);d=d.insert(c,Yt.newNoDocument(c,Pe.min()));const f=Ye().add(c),g=new Td(Pe.min(),new Map,new Dt(Ue),d,f);await X4(s,g),s.du=s.du.remove(c),s.Au.delete(e),ly(s)}else await ac(s.localStore,e,!1).then((()=>oc(s,e,t))).catch(Ri)}async function L8(r,e){const t=Ce(r),s=e.batch.batchId;try{const l=await e8(t.localStore,e);iy(t,s,null),ay(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Oi(t,l)}catch(l){await Ri(l)}}async function z8(r,e,t){const s=Ce(r);try{const l=await(function(d,f){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let v;return g.mutationQueue.lookupMutationBatch(x,f).next((w=>(Oe(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v))).next((()=>g.localDocuments.getDocuments(x,v)))}))})(s.localStore,e);iy(s,e,t),ay(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Oi(s,l)}catch(l){await Ri(l)}}function ay(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function iy(r,e,t){const s=Ce(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function oc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||J4(r,s)}))}function J4(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ic(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ly(r))}function sx(r,e,t){for(const s of t)s instanceof $4?(r.Ru.addReference(s.key,e),U8(r,s)):s instanceof K4?(me(yc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||J4(r,s.key)):je(19791,{wu:s})}function U8(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(me(yc,"New document in limbo: "+t),r.Eu.add(s),ly(r))}function ly(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ve(pt.fromString(e)),s=r.fu.next();r.Au.set(s,new C8(t)),r.du=r.du.insert(t,s),Om(r.remoteStore,new da(_s(jm(t.path)),s,"TargetPurposeLimboResolution",is.ce))}}async function Oi(r,e,t){const s=Ce(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var v;if((x||t)&&s.isPrimaryClient){const w=x?!x.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(x){l.push(x);const w=Xx.As(g.targetId,x);c.push(w)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const v=Ce(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>F.forEach(x,(N=>F.forEach(N.Es,(C=>v.persistence.referenceDelegate.addReference(w,N.targetId,C))).next((()=>F.forEach(N.ds,(C=>v.persistence.referenceDelegate.removeReference(w,N.targetId,C)))))))))}catch(w){if(!ki(w))throw w;me(Jx,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const C=v.Ms.get(N),V=C.snapshotVersion,Z=C.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(N,Z)}}})(s.localStore,c))}async function B8(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){me(yc,"User change. New user:",e.toKey());const s=await T4(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new ye(te.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oi(t,s.Ls)}}function q8(r,e){const t=Ce(r),s=t.Au.get(e);if(s&&s.hu)return Ye().add(s.key);{let l=Ye();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function F8(r,e){const t=Ce(r),s=await tm(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&sx(t,e.targetId,l.au),l}async function H8(r,e){const t=Ce(r);return I4(t.localStore,e).then((s=>Oi(t,s)))}async function G8(r,e,t,s){const l=Ce(r),c=await(function(f,g){const x=Ce(f),v=Ce(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.er(w,g).next((N=>N?x.localDocuments.getDocuments(w,N):F.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await pc(l.remoteStore):t==="acknowledged"||t==="rejected"?(iy(l,e,s||null),ay(l,e),(function(f,g){Ce(Ce(f).mutationQueue).ir(g)})(l.localStore,e)):je(6720,"Unknown batchState",{Su:t}),await Oi(l,c)):me(yc,"Cannot apply mutation batch with id: "+e)}async function $8(r,e){const t=Ce(r);if(Vm(t),oy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await t2(t,s.toArray());t.gu=!0,await tx(t.remoteStore,!0);for(const c of l)Om(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(oc(t,d),ac(t.localStore,d,!0)))),ic(t.remoteStore,d)})),await l,await t2(t,s),(function(d){const f=Ce(d);f.Au.forEach(((g,x)=>{ic(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Dt(ve.comparator)})(t),t.gu=!1,await tx(t.remoteStore,!1)}}async function t2(r,e,t){const s=Ce(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await em(s.localStore,_s(g[0]));for(const x of g){const v=s.Tu.get(x),w=await F8(s,v);w.snapshot&&c.push(w.snapshot)}}else{const x=await A4(s.localStore,d);f=await em(s.localStore,x),await ry(s,W4(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function W4(r){return RE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function K8(r){return(function(t){return Ce(Ce(t).persistence).Ts()})(Ce(r).localStore)}async function Q8(r,e,t,s){const l=Ce(r);if(l.gu)return void me(yc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await I4(l.localStore,OE(c[0])),f=Td.createSynthesizedRemoteEventForCurrentChange(e,t==="current",tn.EMPTY_BYTE_STRING);await Oi(l,d,f);break}case"rejected":await ac(l.localStore,e,!0),oc(l,e,s);break;default:je(64155,t)}}async function Y8(r,e,t){const s=Vm(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){me(yc,"Adding an already active target "+l);continue}const c=await A4(s.localStore,l),d=await em(s.localStore,c);await ry(s,W4(c),d.targetId,!1,d.resumeToken),Om(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await ac(s.localStore,l,!1).then((()=>{ic(s.remoteStore,l),oc(s,l)})).catch(Ri)}}function Vm(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=X4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P8.bind(null,e),e.Pu.H_=S8.bind(null,e.eventManager),e.Pu.yu=A8.bind(null,e.eventManager),e}function oy(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z8.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=km(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return j4(this.persistence,new E4,e.initialUser,this.serializer)}Cu(e){return new Qx(Rm.mi,this.serializer)}Du(e){return new O4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class X8 extends dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Oe(this.persistence.referenceDelegate instanceof Zf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new y4(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Qx((s=>Zf.mi(s,t)),this.serializer)}}class Z4 extends dd{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await oy(this.xu.syncEngine),await pc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return j4(this.persistence,new E4,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new y4(s,e.asyncQueue,t)}Mu(e,t){const s=new cR(t,this.persistence);return new oR(e.asyncQueue,s)}Cu(e){const t=N4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Yx(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,M4(),Tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new O4}}class J8 extends Z4{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ap&&(this.sharedClientState.syncEngine={Co:G8.bind(null,t),vo:Q8.bind(null,t),Fo:Y8.bind(null,t),Ts:K8.bind(null,t),Do:H8.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await $8(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=M4();if(!ap.v(t))throw new ye(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=N4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ap(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class hd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>e2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=B8.bind(null,this.syncEngine),await tx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new T8})()}createDatastore(e){const t=km(e.databaseInfo.databaseId),s=(function(c){return new o8(c)})(e.databaseInfo);return(function(c,d,f,g){return new h8(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new m8(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>e2(this.syncEngine,t,0)),(function(){return Q_.v()?new Q_:new r8})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,v){const w=new R8(l,c,d,f,g,x);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=Ce(l);me(Rl,"RemoteStore shutting down."),c.Ea.add(5),await Ad(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hd.provider={build:()=>new hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class W8{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Ln.UNAUTHENTICATED,this.clientId=Tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{me(Ii,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(me(Ii,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Mm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function lp(r,e){r.asyncQueue.verifyOperationInProgress(),me(Ii,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await T4(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function n2(r,e){r.asyncQueue.verifyOperationInProgress();const t=await t5(r);me(Ii,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>X_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>X_(e.remoteStore,l))),r._onlineComponents=e}async function t5(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Ii,"Using user provided OfflineComponentProvider");try{await lp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;ed("Error using user provided cache. Falling back to memory cache: "+t),await lp(r,new dd)}}else me(Ii,"Using default OfflineComponentProvider"),await lp(r,new X8(void 0));return r._offlineComponents}async function n5(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Ii,"Using user provided OnlineComponentProvider"),await n2(r,r._uninitializedComponentsProvider._online)):(me(Ii,"Using default OnlineComponentProvider"),await n2(r,new hd))),r._onlineComponents}function Z8(r){return t5(r).then((e=>e.localStore))}function e9(r){return n5(r).then((e=>e.syncEngine))}async function s5(r){const e=await n5(r),t=e.eventManager;return t.onListen=k8.bind(null,e.syncEngine),t.onUnlisten=O8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M8.bind(null,e.syncEngine),t}function t9(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new e5({next:N=>{v.Nu(),d.enqueueAndForget((()=>H4(c,w)));const C=N.docs.has(f);!C&&N.fromCache?x.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&N.fromCache&&g&&g.source==="server"?x.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new G4(jm(f.path),v,{includeMetadataChanges:!0,qa:!0});return F4(c,w)})(await s5(r),r.asyncQueue,e,t,s))),s.promise}function n9(r,e){const t=new ar;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await tm(l,c,!0),g=new Q4(c,f.Qs),x=g.ru(f.documents),v=g.applyChanges(x,!1);d.resolve(v.snapshot)}catch(f){const g=Mm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await Z8(r),e,t))),t.promise}function r5(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new e5({next:N=>{v.Nu(),d.enqueueAndForget((()=>H4(c,w))),N.fromCache&&g.source==="server"?x.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new G4(f,v,{includeMetadataChanges:!0,qa:!0});return F4(c,w)})(await s5(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="firestore.googleapis.com",r2=!0;class a2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s9,this.ssl=r2}else this.host=e.host,this.ssl=e.ssl??r2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x4)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a5(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cy{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new YC;switch(s.type){case"firstParty":return new WC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=s2.get(t);s&&(me("ComponentProvider","Removing Datastore"),s2.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class en{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(wd(t,en._jsonSchema))return new en(e,s||null,new ve(pt.fromString(t.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:fn("string",en._jsonSchemaVersion),referencePath:fn("string")};class wi extends Br{constructor(e,t,s){super(e,t,jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new ve(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function Pt(r,e,...t){if(r=Ht(r),XN("collection","path",e),r instanceof cy){const s=pt.fromString(e,...t);return Yw(s),new wi(r,null,s)}{if(!(r instanceof en||r instanceof wi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...t));return Yw(s),new wi(r.firestore,null,s)}}function Wn(r,e,...t){if(r=Ht(r),arguments.length===1&&(e=Tx.newId()),XN("doc","path",e),r instanceof cy){const s=pt.fromString(e,...t);return Qw(s),new en(r,null,new ve(s))}{if(!(r instanceof en||r instanceof wi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...t));return Qw(s),new en(r.firestore,r instanceof wi?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="AsyncQueue";class l2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V4(this,"async_queue_retry"),this._c=()=>{const s=Tf();s&&me(i2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Tf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Tf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ki(e))throw e;me(i2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Zt("INTERNAL UNHANDLED ERROR: ",o2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=ny.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&je(47125,{Pc:o2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function o2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qr extends cy{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new l2,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l2(e),this._firestoreClient=void 0,await e}}}function r9(r,e,t){t||(t=Hf);const s=Ml(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(ji(c,e))return l;throw new ye(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ye(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x4)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&uc(e.host)&&Y2(e.host),s.initialize({options:e,instanceIdentifier:t})}function bc(r){if(r._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||a9(r),r._firestoreClient}function a9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,v){return new PR(f,g,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,a5(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new W8(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(tn.fromBase64String(e))}catch(t){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qs(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wd(e,qs._jsonSchema))return qs.fromBase64String(e.bytes)}}qs._jsonSchemaVersion="firestore/bytes/1.0",qs._jsonSchema={type:fn("string",qs._jsonSchemaVersion),bytes:fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(wd(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:fn("string",Pr._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wd(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Lr(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:fn("string",Lr._jsonSchemaVersion),vectorValues:fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=/^__.*__$/;class l9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new gc(e,this.data,t,this.fieldTransforms)}}class i5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function l5(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:r})}}class uy{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return am(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(l5(this.Ac)&&i9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class o9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||km(e)}Cc(e,t,s,l=!1){return new uy({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rd(r){const e=r._freezeSettings(),t=km(r._databaseId);return new o9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function dy(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);my("Data must be an object, but it was:",d,s);const f=u5(s,d);let g,x;if(c.merge)g=new ls(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const N=rx(e,w,t);if(!d.contains(N))throw new ye(te.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);h5(v,N)||v.push(N)}g=new ls(v),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new l9(new Un(f),g,x)}class Pm extends Cd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}class hy extends Cd{_toFieldTransform(e){return new zx(e.path,new ec)}isEqual(e){return e instanceof hy}}class fy extends Cd{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new sc(e.serializer,UE(e.serializer,this.Fc));return new zx(e.path,t)}isEqual(e){return e instanceof fy&&this.Fc===e.Fc}}function o5(r,e,t,s){const l=r.Cc(1,e,t);my("Data must be an object, but it was:",l,s);const c=[],d=Un.empty();Di(s,((g,x)=>{const v=gy(e,g,t);x=Ht(x);const w=l.yc(v);if(x instanceof Pm)c.push(v);else{const N=kd(x,w);N!=null&&(c.push(v),d.set(v,N))}}));const f=new ls(c);return new i5(d,f,l.fieldTransforms)}function c5(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[rx(e,s,t)],g=[l];if(c.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(rx(e,c[N])),g.push(c[N+1]);const x=[],v=Un.empty();for(let N=f.length-1;N>=0;--N)if(!h5(x,f[N])){const C=f[N];let V=g[N];V=Ht(V);const Z=d.yc(C);if(V instanceof Pm)x.push(C);else{const B=kd(V,Z);B!=null&&(x.push(C),v.set(C,B))}}const w=new ls(x);return new i5(v,w,d.fieldTransforms)}function c9(r,e,t,s=!1){return kd(t,r.Cc(s?4:3,e))}function kd(r,e){if(d5(r=Ht(r)))return my("Unsupported field value:",e,r),u5(r,e);if(r instanceof Cd)return(function(s,l){if(!l5(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=kd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Ht(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return UE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=_t.fromDate(s);return{timestampValue:rc(l.serializer,c)}}if(s instanceof _t){const c=new _t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:rc(l.serializer,c)}}if(s instanceof Pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qs)return{bytesValue:JE(l.serializer,s._byteString)};if(s instanceof en){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Lr)return(function(d,f){return{mapValue:{fields:{[Ox]:{stringValue:Mx},[Xo]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Lx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${xm(s)}`)})(r,e)}function u5(r,e){const t={};return mE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(r,((s,l)=>{const c=kd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function d5(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof _t||r instanceof Pr||r instanceof qs||r instanceof en||r instanceof Cd||r instanceof Lr)}function my(r,e,t){if(!d5(t)||!JN(t)){const s=xm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function rx(r,e,t){if((e=Ht(e))instanceof Id)return e._internalPath;if(typeof e=="string")return gy(r,e);throw am("Field path arguments must be of type string or ",r,!1,void 0,t)}const u9=new RegExp("[~\\*/\\[\\]]");function gy(r,e,t){if(e.search(u9)>=0)throw am(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw am(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function am(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new ye(te.INVALID_ARGUMENT,f+r+g)}function h5(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class d9 extends f5{data(){return super.data()}}function Lm(r,e){return typeof e=="string"?gy(r,e):e instanceof Id?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class xy extends py{}function cs(r,e,...t){let s=[];e instanceof py&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof yy)).length,f=c.filter((g=>g instanceof zm)).length;if(d>1||d>0&&f>0)throw new ye(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class zm extends xy{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zm(e,t,s)}_apply(e){const t=this._parse(e);return m5(e._query,t),new Br(e.firestore,e.converter,Gp(e._query,t))}_parse(e){const t=Rd(e.firestore);return(function(c,d,f,g,x,v,w){let N;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){u2(w,v);const V=[];for(const Z of w)V.push(c2(g,c,Z));N={arrayValue:{values:V}}}else N=c2(g,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||u2(w,v),N=c9(f,d,w,v==="in"||v==="not-in");return nt.create(x,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function os(r,e,t){const s=e,l=Lm("where",r);return zm._create(l,s,t)}class yy extends py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)m5(d,g),d=Gp(d,g)})(e._query,t),new Br(e.firestore,e.converter,Gp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class by extends xy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new by(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(c,d)})(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new mc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function vc(r,e="asc"){const t=e,s=Lm("orderBy",r);return by._create(s,t)}class vy extends xy{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new vy(e,t,s)}_apply(e){return new Br(e.firestore,e.converter,Kf(e._query,this._limit,this._limitType))}}function wc(r){return aR("limit",r),vy._create("limit",r,"F")}function c2(r,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new ye(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kE(e)&&t.indexOf("/")!==-1)throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(pt.fromString(t));if(!ve.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return od(r,new ve(s))}if(t instanceof en)return od(r,t._key);throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(t)}.`)}function u2(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m5(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class f9{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Di(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[Xo].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Ut(d.doubleValue)));return new Lr(t)}convertGeoPoint(e){return new Pr(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(id(e));default:return null}}convertTimestamp(e){const t=ya(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pt.fromString(e);Oe(l4(s),9688,{name:e});const l=new Tl(s.get(1),s.get(3)),c=new ve(s.popFirst(5));return l.isEqual(t)||Zt(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vl extends f5{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Lm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",vl._jsonSchema={type:fn("string",vl._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class Sf extends vl{data(e={}){return super.data(e)}}class _i{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Du(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Sf(this._firestore,this._userDataWriter,s.key,s,new Du(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new Sf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Du(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new Sf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Du(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,v=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),v=d.indexOf(f.doc.key)),{type:m9(f.type),doc:g,oldIndex:x,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_i._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function m9(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(r){r=Jn(r,en);const e=Jn(r.firestore,qr);return t9(bc(e),r._key).then((t=>x9(e,r,t)))}_i._jsonSchemaVersion="firestore/querySnapshot/1.0",_i._jsonSchema={type:fn("string",_i._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};class Um extends f9{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}function us(r){r=Jn(r,Br);const e=Jn(r.firestore,qr),t=bc(e),s=new Um(e);return h9(r._query),r5(t,r._query).then((l=>new _i(e,s,r,l)))}function g9(r){r=Jn(r,Br);const e=Jn(r.firestore,qr),t=bc(e),s=new Um(e);return n9(t,r._query).then((l=>new _i(e,s,r,l)))}function p9(r){r=Jn(r,Br);const e=Jn(r.firestore,qr),t=bc(e),s=new Um(e);return r5(t,r._query,{source:"server"}).then((l=>new _i(e,s,r,l)))}function _y(r,e,t){r=Jn(r,en);const s=Jn(r.firestore,qr),l=wy(r.converter,e,t);return Dd(s,[dy(Rd(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,gn.none())])}function Bm(r,e,t,...s){r=Jn(r,en);const l=Jn(r.firestore,qr),c=Rd(l);let d;return d=typeof(e=Ht(e))=="string"||e instanceof Id?c5(c,"updateDoc",r._key,e,t,s):o5(c,"updateDoc",r._key,e),Dd(l,[d.toMutation(r._key,gn.exists(!0))])}function qm(r){return Dd(Jn(r.firestore,qr),[new jd(r._key,gn.none())])}function or(r,e){const t=Jn(r.firestore,qr),s=Wn(r),l=wy(r.converter,e);return Dd(t,[dy(Rd(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,gn.exists(!1))]).then((()=>s))}function Dd(r,e){return(function(s,l){const c=new ar;return s.asyncQueue.enqueueAndForget((async()=>V8(await e9(s),l,c))),c.promise})(bc(r),e)}function x9(r,e,t){const s=t.docs.get(e._key),l=new Um(r);return new vl(r,l,e._key,s,new Du(t.hasPendingWrites,t.fromCache),e.converter)}class y9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=_9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function b9(r){return new y9(r)}class v9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=hd.provider,this._offlineComponentProvider={build:t=>new Z4(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class w9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=hd.provider,this._offlineComponentProvider={build:t=>new J8(t,e==null?void 0:e.cacheSizeBytes)}}}function _9(r){return new v9(r==null?void 0:r.forceOwnership)}function N9(){return new w9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rd(e)}set(e,t,s){this._verifyNotCommitted();const l=op(e,this._firestore),c=wy(l.converter,t,s),d=dy(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,gn.none())),this}update(e,t,s,...l){this._verifyNotCommitted();const c=op(e,this._firestore);let d;return d=typeof(t=Ht(t))=="string"||t instanceof Id?c5(this._dataReader,"WriteBatch.update",c._key,t,s,l):o5(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=op(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function op(r,e){if((r=Ht(r)).firestore!==e)throw new ye(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Ns(){return new hy("serverTimestamp")}function ax(r){return new fy("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(r){return bc(r=Jn(r,qr)),new E9(r,(e=>Dd(r,e)))}(function(e,t=!0){(function(l){fc=l})(dc),zr(new ir("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new qr(new XC(s.getProvider("auth-internal")),new ZC(d,s.getProvider("app-check-internal")),(function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(x.options.projectId,v)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Fs(Hw,Gw,e),Fs(Hw,Gw,"esm2020")})();const p5="@firebase/installations",Ny="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=1e4,y5=`w:${Ny}`,b5="FIS_v2",T9="https://firebaseinstallations.googleapis.com/v1",S9=3600*1e3,A9="installations",I9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},kl=new Ol(A9,I9,C9);function v5(r){return r instanceof cr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5({projectId:r}){return`${T9}/projects/${r}/installations`}function _5(r){return{token:r.token,requestStatus:2,expiresIn:k9(r.expiresIn),creationTime:Date.now()}}async function N5(r,e){const s=(await e.json()).error;return kl.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function E5({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function R9(r,{refreshToken:e}){const t=E5(r);return t.append("Authorization",D9(e)),t}async function j5(r){const e=await r();return e.status>=500&&e.status<600?r():e}function k9(r){return Number(r.replace("s","000"))}function D9(r){return`${b5} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=w5(r),l=E5(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:b5,appId:r.appId,sdkVersion:y5},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await j5(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:_5(x.authToken)}}else throw await N5("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=/^[cdef][\w-]{21}$/,ix="";function P9(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=L9(r);return V9.test(t)?t:ix}catch{return ix}}function L9(r){return M9(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=new Map;function A5(r,e){const t=Fm(r);I5(t,e),z9(t,e)}function I5(r,e){const t=S5.get(r);if(t)for(const s of t)s(e)}function z9(r,e){const t=U9();t&&t.postMessage({key:r,fid:e}),B9()}let gl=null;function U9(){return!gl&&"BroadcastChannel"in self&&(gl=new BroadcastChannel("[Firebase] FID Change"),gl.onmessage=r=>{I5(r.data.key,r.data.fid)}),gl}function B9(){S5.size===0&&gl&&(gl.close(),gl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="firebase-installations-database",F9=1,Dl="firebase-installations-store";let cp=null;function Ey(){return cp||(cp=sN(q9,F9,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Dl)}}})),cp}async function im(r,e){const t=Fm(r),l=(await Ey()).transaction(Dl,"readwrite"),c=l.objectStore(Dl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&A5(r,e.fid),e}async function C5(r){const e=Fm(r),s=(await Ey()).transaction(Dl,"readwrite");await s.objectStore(Dl).delete(e),await s.done}async function Hm(r,e){const t=Fm(r),l=(await Ey()).transaction(Dl,"readwrite"),c=l.objectStore(Dl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&A5(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(r){let e;const t=await Hm(r.appConfig,s=>{const l=H9(s),c=G9(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===ix?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function H9(r){const e=r||{fid:P9(),registrationStatus:0};return R5(e)}function G9(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(kl.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=$9(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:K9(r)}:{installationEntry:e}}async function $9(r,e){try{const t=await O9(r,e);return im(r.appConfig,t)}catch(t){throw v5(t)&&t.customData.serverCode===409?await C5(r.appConfig):await im(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function K9(r){let e=await d2(r.appConfig);for(;e.registrationStatus===1;)await T5(100),e=await d2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await jy(r);return s||t}return e}function d2(r){return Hm(r,e=>{if(!e)throw kl.create("installation-not-found");return R5(e)})}function R5(r){return Q9(r)?{fid:r.fid,registrationStatus:0}:r}function Q9(r){return r.registrationStatus===1&&r.registrationTime+x5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y9({appConfig:r,heartbeatServiceProvider:e},t){const s=X9(r,t),l=R9(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:y5,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await j5(()=>fetch(s,f));if(g.ok){const x=await g.json();return _5(x)}else throw await N5("Generate Auth Token",g)}function X9(r,{fid:e}){return`${w5(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(r,e=!1){let t;const s=await Hm(r.appConfig,c=>{if(!k5(c))throw kl.create("not-registered");const d=c.authToken;if(!e&&Z9(d))return c;if(d.requestStatus===1)return t=J9(r,e),c;{if(!navigator.onLine)throw kl.create("app-offline");const f=tD(c);return t=W9(r,f),f}});return t?await t:s.authToken}async function J9(r,e){let t=await h2(r.appConfig);for(;t.authToken.requestStatus===1;)await T5(100),t=await h2(r.appConfig);const s=t.authToken;return s.requestStatus===0?Ty(r,e):s}function h2(r){return Hm(r,e=>{if(!k5(e))throw kl.create("not-registered");const t=e.authToken;return nD(t)?{...e,authToken:{requestStatus:0}}:e})}async function W9(r,e){try{const t=await Y9(r,e),s={...e,authToken:t};return await im(r.appConfig,s),t}catch(t){if(v5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await C5(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await im(r.appConfig,s)}throw t}}function k5(r){return r!==void 0&&r.registrationStatus===2}function Z9(r){return r.requestStatus===2&&!eD(r)}function eD(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+S9}function tD(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function nD(r){return r.requestStatus===1&&r.requestTime+x5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(r){const e=r,{installationEntry:t,registrationPromise:s}=await jy(e);return s?s.catch(console.error):Ty(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(r,e=!1){const t=r;return await aD(t),(await Ty(t,e)).token}async function aD(r){const{registrationPromise:e}=await jy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(r){if(!r||!r.options)throw up("App Configuration");if(!r.name)throw up("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw up(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function up(r){return kl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="installations",lD="installations-internal",oD=r=>{const e=r.getProvider("app").getImmediate(),t=iD(e),s=Ml(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},cD=r=>{const e=r.getProvider("app").getImmediate(),t=Ml(e,D5).getImmediate();return{getId:()=>sD(t),getToken:l=>rD(t,l)}};function uD(){zr(new ir(D5,oD,"PUBLIC")),zr(new ir(lD,cD,"PRIVATE"))}uD();Fs(p5,Ny);Fs(p5,Ny,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="analytics",dD="firebase_id",hD="origin",fD=60*1e3,mD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new fm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Es=new Ol("analytics","Analytics",gD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(r){if(!r.startsWith(Sy)){const e=Es.create("invalid-gtag-resource",{gtagURL:r});return Xn.warn(e.message),""}return r}function O5(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function xD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function yD(r,e){const t=xD("firebase-js-sdk-policy",{createScriptURL:pD}),s=document.createElement("script"),l=`${Sy}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function bD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function vD(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await O5(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){Xn.error(f)}r("config",l,c)}async function wD(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await O5(t);for(const g of d){const x=f.find(w=>w.measurementId===g),v=x&&e[x.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){Xn.error(c)}}function _D(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await wD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await vD(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){Xn.error(f)}}return l}function ND(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=_D(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function ED(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Sy)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=30,TD=1e3;class SD{constructor(e={},t=TD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const M5=new SD;function AD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function ID(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:AD(t)},l=mD.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw Es.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function CD(r,e=M5,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw Es.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw Es.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new DD;return setTimeout(async()=>{f.abort()},fD),V5({appId:s,apiKey:l,measurementId:c},d,f,e)}async function V5(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=M5){var f;const{appId:c,measurementId:d}=r;try{await RD(s,e)}catch(g){if(d)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await ID(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!kD(x)){if(l.deleteThrottleMetadata(c),d)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const v=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?gw(t,l.intervalMillis,jD):gw(t,l.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return l.setThrottleMetadata(c,w),Xn.debug(`Calling attemptFetch again in ${v} millis`),V5(r,w,s,l)}}function RD(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(Es.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kD(r){if(!(r instanceof cr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class DD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function OD(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function MD(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(){if(gx())try{await eN()}catch(r){return Xn.warn(Es.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Xn.warn(Es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function PD(r,e,t,s,l,c,d){const f=CD(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Xn.error(N)),e.push(f);const g=VD().then(N=>{if(N)return s.getId()}),[x,v]=await Promise.all([f,g]);ED(c)||yD(c,x.measurementId),l("js",new Date);const w=(d==null?void 0:d.config)??{};return w[hD]="firebase",w.update=!0,v!=null&&(w[dD]=v),l("config",x.measurementId,w),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.app=e}_delete(){return delete Bo[this.app.options.appId],Promise.resolve()}}let Bo={},f2=[];const m2={};let dp="dataLayer",zD="gtag",g2,Ay,p2=!1;function UD(){const r=[];if(J2()&&r.push("This is a browser extension environment."),c3()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=Es.create("invalid-analytics-context",{errorInfo:e});Xn.warn(t.message)}}function BD(r,e,t){UD();const s=r.options.appId;if(!s)throw Es.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Es.create("no-api-key");if(Bo[s]!=null)throw Es.create("already-exists",{id:s});if(!p2){bD(dp);const{wrappedGtag:c,gtagCore:d}=ND(Bo,f2,m2,dp,zD);Ay=c,g2=d,p2=!0}return Bo[s]=PD(r,f2,m2,e,g2,dp,t),new LD(r)}function qD(r=aN()){r=Ht(r);const e=Ml(r,lm);return e.isInitialized()?e.getImmediate():FD(r)}function FD(r,e={}){const t=Ml(r,lm);if(t.isInitialized()){const l=t.getImmediate();if(ji(e,t.getOptions()))return l;throw Es.create("already-initialized")}return t.initialize({options:e})}function HD(r,e,t){r=Ht(r),MD(Ay,Bo[r.app.options.appId],e,t).catch(s=>Xn.error(s))}function GD(r,e,t,s){r=Ht(r),OD(Ay,Bo[r.app.options.appId],e,t,s).catch(l=>Xn.error(l))}const x2="@firebase/analytics",y2="0.10.19";function $D(){zr(new ir(lm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return BD(s,l,t)},"PUBLIC")),zr(new ir("analytics-internal",r,"PRIVATE")),Fs(x2,y2),Fs(x2,y2,"esm2020");function r(e){try{const t=e.getProvider(lm).getImmediate();return{logEvent:(s,l,c)=>GD(t,s,l,c),setUserProperties:(s,l)=>HD(t,s,l)}}catch(t){throw Es.create("interop-component-reg-failed",{reason:t})}}}$D();const KD={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Iy=rN(KD),Gu=$C(Iy),Qe=r9(Iy,{localCache:b9({tabManager:N9()})});qD(Iy);const QD=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:i.jsx(HA,{className:"w-10 h-10 text-red-500/80"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[i.jsx(md,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"relative flex py-2 items-center",children:[i.jsx("div",{className:"flex-grow border-t border-gray-700"}),i.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),i.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[i.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),i.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),i.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:i.jsx(wl,{className:"w-5 h-5"})})]})]})]})]}),i.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},P5=M.createContext(void 0),YD=({children:r})=>{const[e,t]=M.useState(null),[s,l]=M.useState(!0),[c,d]=M.useState(!1),f=(v,w)=>{const N=`teacher-${w.split("@")[0]}`;let C="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";v.includes("")?C="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":v.includes("")&&(C="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:N,email:w,displayName:v,role:"teacher",avatar:C,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",v),localStorage.setItem("teacherEmail",w)},g=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):(await M6(Gu),e!=null&&e.uid&&localStorage.removeItem(`etqan_user_profile_${e.uid}`))}catch(v){console.error("Logout error",v)}},x=async v=>{if(e)try{let w={...v};if(v.firstName!==void 0||v.lastName!==void 0){const C=v.firstName!==void 0?v.firstName:e.firstName||"",V=v.lastName!==void 0?v.lastName:e.lastName||"";w.displayName=`${C} ${V}`.trim()}const N=e?{...e,...w}:null;if(t(N),N){const C=`etqan_user_profile_${e.uid}`,V=365*24*60*60*1e3;localStorage.setItem(C,JSON.stringify({data:N,timestamp:Date.now()}))}if(e.role!=="teacher"){const C=Wn(Qe,"users",e.uid);await _y(C,w,{merge:!0})}}catch(w){throw console.error("Error updating profile:",w),w}};return M.useEffect(()=>{const v=setTimeout(()=>{s&&d(!0)},1e4),w=localStorage.getItem("isTeacher")==="true";if(w){const C=localStorage.getItem("teacherName")||"",V=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";f(C,V),l(!1),clearTimeout(v);return}const N=O6(Gu,async C=>{if(C){const V=`etqan_user_profile_${C.uid}`,Z=365*24*60*60*1e3,B=Date.now(),ge=localStorage.getItem(V);let ae=!1;if(ge)try{const{data:ne,timestamp:xe}=JSON.parse(ge);B-xe<Z&&(ne.createdAt&&typeof ne.createdAt=="object"&&ne.createdAt.seconds,t(ne),ae=!0)}catch(ne){console.error("Profile cache parse error",ne)}if(!ae)try{const ne=Wn(Qe,"users",C.uid),xe=await g5(ne);if(xe.exists()){const re=xe.data();(C.email==="q@gmail.com"||C.email==="yazan22@gmail.com")&&(re.totalXP=25e3,re.quizzesCompleted=500);const le={uid:C.uid,email:C.email||"",displayName:re.displayName||`${re.firstName||""} ${re.lastName||""}`.trim()||"Student",firstName:re.firstName,lastName:re.lastName,age:re.age,role:re.role,grade:re.grade,phone:re.phone,address:re.address,school:re.school,gender:re.gender,avatar:re.avatar,profileBackground:re.profileBackground,genderChanged:re.genderChanged,createdAt:re.createdAt?{seconds:re.createdAt.seconds}:null,totalXP:re.totalXP||0,quizzesCompleted:re.quizzesCompleted||0};t(le),localStorage.setItem(V,JSON.stringify({data:le,timestamp:B}))}else t({uid:C.uid,email:C.email||"",displayName:"User",role:"student",createdAt:{seconds:Math.floor(Date.now()/1e3)}})}catch(ne){console.error("Error fetching user profile:",ne)}}else w||t(null);l(!1),clearTimeout(v)});return()=>{N(),clearTimeout(v)}},[]),c?i.jsx(QD,{}):i.jsx(P5.Provider,{value:{user:e,loading:s,logout:g,setTeacherSession:f,updateUserProfile:x},children:s?i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),i.jsx(gt,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),i.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},ur=()=>{const r=M.useContext(P5);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},hp=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],XD=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var W;const[s,l]=M.useState(!1),[c,d]=M.useState(!1),{user:f}=ur(),[g,x]=M.useState(!1),[v,w]=M.useState([]),[N,C]=M.useState(0),[V,Z]=M.useState(!1),B=M.useRef(null),[ge,ae]=M.useState(!1),[ne,xe]=M.useState(""),[re,le]=M.useState("teacher-yazan"),[E,T]=M.useState(!1),[A,R]=M.useState(!1);M.useEffect(()=>{const $=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",$),()=>window.removeEventListener("scroll",$)},[]),M.useEffect(()=>{const $=we=>{B.current&&!B.current.contains(we.target)&&x(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const k=async($=!1)=>{if(!f){w([]);return}const we=`etqan_notifications_${f.uid}`,D=365*24*60*60*1e3,U=Date.now();if(!$){const L=localStorage.getItem(we);if(L)try{const{data:Y,timestamp:he}=JSON.parse(L);if(U-he<D){P(Y);return}}catch(Y){console.error(Y)}}Z(!0);try{const Y=cs(Pt(Qe,"notifications"),vc("createdAt","desc"),wc(10)),Ee=(await us(Y)).docs.map(Re=>({id:Re.id,...Re.data(),createdAt:Re.data().createdAt?{seconds:Re.data().createdAt.seconds}:null}));localStorage.setItem(we,JSON.stringify({data:Ee,timestamp:U})),P(Ee)}catch(L){console.error("Error fetching notifications:",L)}finally{Z(!1)}},P=$=>{const we=[];let D=0,U=[];try{const Y=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`);U=Y?JSON.parse(Y):[]}catch(Y){console.error("Error parsing viewed notifications",Y)}let L=0;f!=null&&f.createdAt&&(f.createdAt.seconds?L=f.createdAt.seconds*1e3:f.createdAt instanceof Date?L=f.createdAt.getTime():typeof f.createdAt=="string"&&(L=new Date(f.createdAt).getTime())),$.forEach(Y=>{const he=Y.createdAt?Y.createdAt.seconds?Y.createdAt.seconds*1e3:new Date(Y.createdAt).getTime():Date.now(),Ee=Y.recipientId===(f==null?void 0:f.uid),Re=Y.recipientId==="all",qe=L===0||he>=L;if(Ee||Re&&qe){const Ie=U.includes(Y.id),We=Y.read===!0,st=Ie||We;st||D++,we.push({...Y,read:st})}}),w(we),C(D)};M.useEffect(()=>{k()},[f]);const I=async()=>{const $=!g;if(x($),$&&N>0){const we=[...v],D=we.filter(he=>!he.read),U=D.map(he=>he.id);if(U.length===0)return;try{const he=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`),Ee=he?JSON.parse(he):[],Re=new Set([...Ee,...U]);localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(Array.from(Re)));const qe=`etqan_notifications_${f==null?void 0:f.uid}`,Ie=localStorage.getItem(qe);if(Ie){const We=JSON.parse(Ie);localStorage.setItem(qe,JSON.stringify(We))}}catch(he){console.error("Error updating local storage for notifications",he)}const L=we.map(he=>({...he,read:!0}));w(L),C(0);const Y=D.filter(he=>he.recipientId!=="all");if(Y.length>0)try{const he=j9(Qe);Y.forEach(Ee=>{const Re=Wn(Qe,"notifications",Ee.id);he.update(Re,{read:!0})}),await he.commit()}catch(he){console.error("Error batch updating notifications:",he)}}},fe=async()=>{if(ne.trim()){T(!0);try{const $=hp.find(we=>we.id===re);await or(Pt(Qe,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:ne,teacherId:re,teacherName:$==null?void 0:$.name,createdAt:Ns(),read:!1}),await or(Pt(Qe,"notifications"),{recipientId:re,title:`   ${(f==null?void 0:f.displayName)||""}`,message:ne.substring(0,100)+(ne.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:Ns(),read:!1}),alert("    !"),xe(""),ae(!1),R(!1)}catch($){console.error($),alert("   ")}finally{T(!1)}}},Ae=$=>{switch($){case"quiz":return i.jsx(Bn,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(Qn,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Fo,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(Rr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(nf,{className:"w-4 h-4 text-gray-400"})}},G=$=>{if(!$)return"";const we=$.toDate?$.toDate():new Date($.seconds*1e3);return isNaN(we.getTime())?"":we.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},ce=$=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:ce(),children:[i.jsx(Qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:ce(),children:[i.jsx(Bn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:ce(),children:[i.jsx(Qn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:ce(),children:[i.jsx($u,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:ce(),children:[i.jsx(wl,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:B,children:[i.jsxs("button",{onClick:I,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(nf,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(nf,{className:"w-4 h-4 text-emerald-400"}),""]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:$=>{$.stopPropagation(),k(!0)},className:"p-1.5 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white transition-colors",title:"",children:i.jsx(md,{className:`w-3.5 h-3.5 ${V?"animate-spin text-emerald-500":""}`})}),f.role==="student"&&i.jsx("button",{onClick:()=>{x(!1),ae(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-2 py-1 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30",children:i.jsx(Rr,{className:"w-3 h-3"})})]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:V&&v.length===0?i.jsx("div",{className:"p-8 text-center flex justify-center",children:i.jsx(gt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):v.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(nf,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "}),i.jsx("button",{onClick:()=>k(!0),className:"mt-2 text-xs text-blue-400 underline",children:""})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:v.map($=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${$.read?"":"bg-emerald-900/10"}`,children:[!$.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:Ae($.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${$.read?"text-gray-400":"text-white"}`,children:$.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:$.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:G($.createdAt)})]})]})]},$.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(Xu,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(wp,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(Kn,{className:"w-6 h-6"}):i.jsx(XS,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(tS,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Qu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(dm,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Bn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Qn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx($u,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(wl,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(V2,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(Xu,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(wp,{className:"w-5 h-5"}),"  "]})})]})})]}),ge&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{ae(!1),R(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{ae(!1),R(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(Kn,{className:"w-5 h-5"})}),A?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Or,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(W=hp.find($=>$.id===re))==null?void 0:W.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:fe,disabled:E,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:E?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>R(!1),disabled:E,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Rr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:hp.map($=>i.jsxs("div",{onClick:()=>le($.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${re===$.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${re===$.id?"text-emerald-400":"text-gray-300"}`,children:$.name}),re===$.id&&i.jsx(ma,{className:"w-4 h-4 text-emerald-500"})]},$.id))})]}),i.jsx("textarea",{value:ne,onChange:$=>xe($.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{ne.trim()&&R(!0)},disabled:!ne.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(ha,{className:"w-5 h-5"})," "]})]})]})]})]})},JD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),WD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),ZD=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=ur(),[l,c]=M.useState(!1),[d,f]=M.useState(!1),[g,x]=M.useState(!1),v=window.location.origin,w="   -   ",N=()=>{c(!0),setTimeout(()=>c(!1),3e3)},C=()=>{s?t("QUIZZES"):N()},V=()=>{s?t("LESSONS"):N()},Z=()=>{t("LESSONS_EXPLANATIONS")},B=()=>{t("CONTACT_TEACHER")},ge=()=>{const le=`https://t.me/share/url?url=${encodeURIComponent(v)}&text=${encodeURIComponent(w)}`;window.open(le,"_blank"),f(!1)},ae=()=>{const le=`https://wa.me/?text=${encodeURIComponent(w+" "+v)}`;window.open(le,"_blank"),f(!1)},ne=()=>{const le=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(v)}`;window.open(le,"_blank"),f(!1)},xe=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:w,url:v}),f(!1)}catch(le){console.log("Error sharing",le)}else re()},re=()=>{navigator.clipboard.writeText(v),x(!0),setTimeout(()=>x(!1),2e3)};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(If,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(Kn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:C,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Bn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(oa,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:Z,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx($u,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(oa,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:V,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Qn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(oa,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:B,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(wl,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(oa,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx($n,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(wp,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(oa,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})}),i.jsx("div",{className:"relative mt-2 flex justify-center z-50",children:i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-xs font-bold bg-white/5 px-4 py-2 rounded-full border border-white/10 hover:bg-white/10 hover:border-emerald-500/30 group",children:[i.jsx("div",{className:"p-1.5 bg-emerald-500/10 rounded-full group-hover:bg-emerald-500/20 transition-colors",children:i.jsx(Rf,{className:"w-3.5 h-3.5 text-emerald-400 group-hover:text-emerald-300"})}),i.jsx("span",{children:"   "})]})}),d&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>f(!1),children:i.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 w-full max-w-sm flex flex-col gap-5 animate-fade-in-up relative",onClick:le=>le.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Rf,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Kn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:ae,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(JD,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:ge,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(WD,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:ne,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx(qo,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:xe,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(M2,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(P2,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:v}),i.jsxs("button",{onClick:re,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${g?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[g?i.jsx(R2,{className:"w-3.5 h-3.5"}):i.jsx(O2,{className:"w-3.5 h-3.5"}),g?" ":" "]})]})]})})]})]})]})},fp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),mp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),e7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),il=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],t7=({onNavigate:r})=>{const[e,t]=M.useState(0),[s,l]=M.useState(!0);M.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%il.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(fp,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(e7,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(mp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(_l,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(_p,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(qo,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(fp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(mp,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(_p,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(qo,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(fp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(mp,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(fd,{className:"w-6 h-6"}),"  ",i.jsx(Af,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("div",{className:"block md:hidden space-y-4",children:[f(il[e]),f(il[(e+1)%il.length])]}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%il.length;return i.jsx("div",{children:f(il[x])},il[x].id)})})]})]})]})})},b2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=M.useState(!1),f=M.useRef(null);M.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(ma,{className:"w-3 h-3"})]},v)})})]})},n7=({isOpen:r,onClose:e})=>{const[t,s]=M.useState("ROLE_SELECTION"),[l,c]=M.useState(!1),[d,f]=M.useState(null),[g,x]=M.useState(null),{setTeacherSession:v}=ur(),[w,N]=M.useState(""),[C,V]=M.useState(""),[Z,B]=M.useState(""),[ge,ae]=M.useState(""),[ne,xe]=M.useState(""),[re,le]=M.useState(""),[E,T]=M.useState(""),[A,R]=M.useState(""),[k,P]=M.useState(""),[I,fe]=M.useState("male"),[Ae,G]=M.useState(""),[ce,W]=M.useState("");if(!r)return null;const $=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),V(""),B(""),ae(""),xe(""),le(""),T(""),R(""),P(""),fe("male"),W(""),G(""),c(!1)},we=()=>{$(),e()},D=st=>{st.preventDefault(),f(null),c(!0),setTimeout(()=>{w==="2001"?(v(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>we(),1500)):w==="2003"?(v(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>we(),1500)):(f("   "),c(!1))},800)},U=async st=>{st.preventDefault(),f(null),c(!0);try{await R6(Gu,C.trim(),Z),x("   !"),setTimeout(()=>{we(),window.location.reload()},1500)}catch(jt){console.error(jt),f("      "),c(!1)}},L=async st=>{st.preventDefault(),f(null),c(!0);try{const rt=(await C6(Gu,A.trim(),k)).user,Tn="",Ts=E==="university"&&Ae?Ae:"";await _y(Wn(Qe,"users",rt.uid),{firstName:ge,lastName:ne,age:re,grade:E,gender:I,school:Ts,avatar:Tn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{we(),window.location.reload()},1500)}catch(jt){console.error(jt),jt.code==="auth/email-already-in-use"?f("   "):jt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},Y=async st=>{st.preventDefault(),f(null),c(!0);try{await I6(Gu,ce.trim()),x("   !")}catch(jt){console.error(jt),jt.code==="auth/user-not-found"?f("    "):jt.code==="auth/invalid-email"?f("    "):jt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},he=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ee=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx($n,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Gg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(ga,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Gg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Re=()=>i.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ci,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:w,onChange:st=>N(st.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),qe=()=>i.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:C,onChange:st=>V(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Rr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:Z,onChange:st=>B(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(ci,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Ie=()=>{const st=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(rt=>({label:` ${rt}`,value:rt.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],jt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:L,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:ge,onChange:rt=>ae(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:ne,onChange:rt=>xe(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:re,onChange:rt=>le(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(b2,{options:jt,value:I,onChange:rt=>fe(rt),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(b2,{options:st,value:E,onChange:rt=>T(rt),placeholder:"  / "})]}),E==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:Ae,onChange:rt=>G(rt.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:rt=>R(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:k,onChange:rt=>P(rt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},We=()=>i.jsxs("form",{onSubmit:Y,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:ce,onChange:st=>W(st.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Rr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(Af,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300",onClick:we}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-gray-950/95 backdrop-blur-xl z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl border border-white/10 transition-all duration-500",children:[i.jsxs("div",{className:"relative mb-8",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-2xl rounded-full animate-pulse"}),i.jsxs("div",{className:"relative w-24 h-24",children:[i.jsx("div",{className:"absolute inset-0 border-t-4 border-emerald-500 border-solid rounded-full animate-spin"}),i.jsx("div",{className:"absolute inset-2 border-r-4 border-blue-500 border-solid rounded-full animate-spin-reverse"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx($n,{className:"w-8 h-8 text-white/80"})})]})]}),i.jsx("h4",{className:"text-xl font-black text-white mb-2 tracking-tight animate-pulse",children:he()}),i.jsxs("p",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:[i.jsx(gt,{className:"w-3 h-3 animate-spin"}),"    ..."]})]}),i.jsx("button",{onClick:we,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(Kn,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Gg,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(ma,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(If,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):we()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Ee(),t==="TEACHER_LOGIN"&&Re(),t==="STUDENT_LOGIN"&&qe(),t==="STUDENT_SIGNUP"&&Ie(),t==="FORGOT_PASSWORD"&&We(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(If,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},s7=()=>{const{user:r}=ur(),[e,t]=M.useState(!1),[s,l]=M.useState(null),[c,d]=M.useState("MCQ"),[f,g]=M.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[x,v]=M.useState([]),[w,N]=M.useState(null),[C,V]=M.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[Z,B]=M.useState(""),[ge,ae]=M.useState(!1),[ne,xe]=M.useState([]),[re,le]=M.useState(!1),[E,T]=M.useState(""),A=(L,Y)=>{V(he=>({...he,[L]:Y}))},R=(L,Y)=>{const he=[...C.options];he[L]=Y,V(Ee=>({...Ee,options:he}))},k=()=>{if(!C.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&C.options.some(he=>!he.trim())){alert("   ");return}if(c==="READING"&&!C.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!Z.trim()){alert("    ");return}let L=[];if(c==="TF")L=["",""];else if(c==="REORDER"){if(L=Z.split(" ").filter(he=>he.trim().length>0),L.length<2){alert("       ");return}}else L=C.options;const Y={id:w||Date.now(),question:C.question,options:L,correctAnswer:C.correctAnswer,explanation:C.explanation||"",type:c};c==="READING"&&(Y.passageContent=C.passageContent,Y.generalInstruction=C.generalInstruction,Y.passageFontSize=C.passageFontSize),w?(v(x.map(he=>he.id===w?Y:he)),N(null)):v([...x,Y]),P()},P=()=>{V({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),B(""),N(null),d("MCQ")},I=L=>{const Y=x.find(he=>he.id===L);Y&&(N(L),d(Y.type||"MCQ"),Y.type==="REORDER"?(B(Y.options.join(" ")),V({question:Y.question,options:["","","",""],correctAnswer:Y.correctAnswer,explanation:Y.explanation||"",passageContent:Y.passageContent||"",generalInstruction:Y.generalInstruction||"",passageFontSize:Y.passageFontSize||"md"})):(V({question:Y.question,options:Y.type==="TF"?["","","",""]:Y.options.length>=4?Y.options:[...Y.options,...Array(4-Y.options.length).fill("")],correctAnswer:Y.correctAnswer,explanation:Y.explanation||"",passageContent:Y.passageContent||"",generalInstruction:Y.generalInstruction||"",passageFontSize:Y.passageFontSize||"md"}),B("")),window.scrollTo({top:0,behavior:"smooth"}))},fe=()=>{P()},Ae=L=>{window.confirm("      ")&&(v(x.filter(Y=>Y.id!==L)),w===L&&P())},G=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const L={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null};if(s){const Y=Wn(Qe,"quizzes",s);await Bm(Y,{...L,updatedAt:Ns()}),alert("    !")}else await or(Pt(Qe,"quizzes"),{...L,createdAt:Ns()}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),P()}catch(L){console.error("Error saving quiz:",L),alert("   ")}finally{t(!1)}},ce=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),P())},W=async()=>{le(!0);try{const L="etqan_teacher_import_list",he=Date.now(),Ee=localStorage.getItem(L);if(Ee){const{data:We,timestamp:st}=JSON.parse(Ee);if(he-st<3e5){xe(We),le(!1);return}}const Re=cs(Pt(Qe,"quizzes"),vc("createdAt","desc"),wc(50)),Ie=(await us(Re)).docs.map(We=>({id:We.id,...We.data()}));xe(Ie),localStorage.setItem(L,JSON.stringify({data:Ie,timestamp:he}))}catch(L){console.error(L)}le(!1)},$=()=>{W(),ae(!0)},we=L=>{x.length>0&&!window.confirm("         .")||(l(L.id||null),g({title:L.title,subject:L.subject,grade:L.grade,category:L.category||"Language",description:L.description||"",duration:L.duration?L.duration.toString():"30",questionDuration:L.questionDuration?L.questionDuration.toString():""}),v(L.questions),ae(!1),P(),window.scrollTo({top:0,behavior:"smooth"}))},D=ne.filter(L=>(L.title?L.title.toLowerCase().includes(E.toLowerCase()):!1)||(L.grade?L.grade.includes(E):!1)),U=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(cw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:$,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(bp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(Bn,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:ce,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(Kn,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:L=>g({...f,title:L.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(dx,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:L=>g({...f,subject:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(ga,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:L=>g({...f,grade:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(L=>i.jsxs("option",{value:L.toString(),children:[" ",L]},L))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ni,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx(B2,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:L=>g({...f,category:L.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ni,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(cx,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:L=>g({...f,duration:L.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(DA,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:L=>g({...f,questionDuration:L.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:L=>g({...f,description:L.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(ow,{className:"w-5 h-5 text-blue-400"})}),w?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(Qn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(L2,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(RA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:C.generalInstruction,onChange:L=>A("generalInstruction",L.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:C.passageContent,onChange:L=>A("passageContent",L.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(UA,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:U.map(L=>i.jsx("button",{onClick:()=>A("passageFontSize",L.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${C.passageFontSize===L.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:L.label},L.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(Or,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:C.question,onChange:L=>A("question",L.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.options.map((L,Y)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${C.correctAnswer===Y?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${C.correctAnswer===Y?"text-blue-400":"text-gray-400"}`,children:[" ",Y+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",Y),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${C.correctAnswer===Y?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:C.correctAnswer===Y?" ":" "})]}),i.jsx("input",{type:"text",value:L,onChange:he=>R(Y,he.target.value),placeholder:`  ${Y+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${Y===C.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},Y))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:Z,onChange:L=>B(L.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),Z&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Z.split(" ").filter(L=>L.trim()).map((L,Y)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:L},Y))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===0&&i.jsx(jn,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===1&&i.jsx(jn,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:C.explanation,onChange:L=>A("explanation",L.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),i.jsxs("div",{className:"flex gap-3",children:[w&&i.jsxs("button",{onClick:fe,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(U2,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:k,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${w?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:w?i.jsxs(i.Fragment,{children:[i.jsx(pi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(ow,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(pi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:G,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):s?i.jsx(md,{className:"w-5 h-5"}):i.jsx(jn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(cw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((L,Y)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${w===L.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:Y+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:L.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:L.type==="REORDER"?"":L.options.length===2?"/":L.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>I(L.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(Ep,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>Ae(L.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(Ei,{className:"w-3.5 h-3.5"}),""]})]}),L.explanation&&i.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",L.explanation]})]},L.id))})]})]})})]})}),ge&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(bp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>ae(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Kn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(Hs,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:E,onChange:L=>T(L.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:re?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(gt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):D.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(L=>i.jsxs("div",{onClick:()=>we(L),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:L.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:L.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:L.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(Or,{className:"w-3 h-3"}),L.questions.length," "]})]},L.id))})})]})})]})},Tu=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:ux},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Bn},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:Hs},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:fd},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:gd},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:cc}],r7=[{id:"first_step",title:" ",desc:"   ",icon:ux,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:_l,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:Bn,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:gd,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:pl,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:Hs,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:um,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:fx,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:z2,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:cc,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],a7=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],gp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],v2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=M.useState(!1),f=M.useRef(null);M.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(ma,{className:"w-3 h-3"})]},v)})})]})},i7=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=ur(),[s,l]=M.useState(!1),[c,d]=M.useState(null),[f,g]=M.useState(!1),[x,v]=M.useState(!1),[w,N]=M.useState(null),[C,V]=M.useState((e==null?void 0:e.avatar)||""),[Z,B]=M.useState((e==null?void 0:e.profileBackground)||gp[0].url),[ge,ae]=M.useState([]),[ne,xe]=M.useState(!0),[re,le]=M.useState(0),[E,T]=M.useState(1),[A,R]=M.useState(Tu[0]),[k,P]=M.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,fe]=M.useState([]),[Ae,G]=M.useState(""),[ce,W]=M.useState(!1),[$,we]=M.useState("50"),[D,U]=M.useState(null),[L,Y]=M.useState(!1),[he,Ee]=M.useState(""),[Re,qe]=M.useState(!1),[Ie,We]=M.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});M.useEffect(()=>{e&&(We(ue=>({...ue,firstName:e.firstName||ue.firstName,lastName:e.lastName||ue.lastName,gender:e.gender||ue.gender,grade:e.grade||ue.grade,school:e.school||ue.school})),e.avatar&&V(e.avatar),e.profileBackground&&B(e.profileBackground))},[e]),M.useEffect(()=>{(async()=>{if(!e)return;const ot=`etqan_quiz_history_${e.uid}`,He="etqan_all_students_teacher",ct=365*24*60*60*1e3;if(e.role==="teacher"){xe(!1),W(!0);const $t=localStorage.getItem(He),Mn=Date.now();if($t)try{const{data:kt,timestamp:sn}=JSON.parse($t);if(Mn-sn<ct){fe(kt),W(!1);return}}catch(kt){console.error(kt)}try{const kt=cs(Pt(Qe,"users"),os("role","==","student")),An=(await us(kt)).docs.map(xt=>({id:xt.id,...xt.data()}));fe(An),localStorage.setItem(He,JSON.stringify({data:An,timestamp:Mn}))}catch(kt){console.error("Error fetching students:",kt)}finally{W(!1)}return}const nn=localStorage.getItem(ot),yt=Date.now();if(nn)try{const{history:$t,totalXP:Mn,rankLevel:kt,stats:sn,timestamp:An}=JSON.parse(nn);if(yt-An<ct){ae($t),le(Mn),T(kt),R(Tu.find(xt=>kt>=xt.minLevel)||Tu[0]),P(sn),xe(!1);return}}catch($t){console.error($t)}try{const $t=cs(Pt(Qe,"quiz_results"),os("userId","==",e.uid)),Mn=await us($t),kt=[];let sn=0,An=!1,xt=0;Mn.forEach(Ne=>{const Me=Ne.data();kt.push({id:Ne.id,...Ne.data(),createdAt:Ne.data().createdAt?{seconds:Ne.data().createdAt.seconds}:null});let Fe=10+Me.percentage*2;Me.passed&&(Fe+=50),Me.percentage===100&&(Fe+=100,An=!0,xt++),sn+=Math.round(Fe)}),kt.sort((Ne,Me)=>{const Fe=Ne.createdAt?Ne.createdAt.seconds:0;return(Me.createdAt?Me.createdAt.seconds:0)-Fe});const Fn=kt.slice(0,10);let de=sn;try{const Ne=Wn(Qe,"users",e.uid),Me=await g5(Ne);Me.exists()&&Me.data().totalXP!==void 0?de=Me.data().totalXP:e.totalXP!==void 0&&(de=e.totalXP)}catch{e.totalXP!==void 0&&(de=e.totalXP)}ae(Fn),le(de);const Te=Math.floor(de/500)+1;T(Te);const _e=[...Tu].reverse().find(Ne=>Te>=Ne.minLevel)||Tu[0];R(_e);const De={quizzesCompleted:kt.length,hasPerfectScore:An,level:Te,totalXP:de,perfectScoresCount:xt};P(De),localStorage.setItem(ot,JSON.stringify({history:Fn,totalXP:de,rankLevel:Te,stats:De,timestamp:yt}))}catch($t){console.error($t)}finally{xe(!1)}})()},[e]);const st=async ue=>{ue.preventDefault(),l(!0),d(null);try{let ot={...Ie};Ie.grade==="university"&&Ie.universityName&&(ot.school=Ie.universityName),delete ot.universityName,await t(ot),d("   !"),setTimeout(()=>d(null),3e3)}catch(ot){console.error(ot),alert("   ")}finally{l(!1)}},jt=async()=>{l(!0);try{await t({avatar:C}),g(!1)}catch(ue){console.error(ue)}finally{l(!1)}},rt=async()=>{l(!0);try{await t({profileBackground:Z}),v(!1)}catch(ue){console.error(ue)}finally{l(!1)}},Tn=async(ue,ot)=>{if(!ue)return;const He=parseInt($);if(isNaN(He)||He<=0){alert("    ");return}if(window.confirm(`     ${He} XP  ${ot}`)){l(!0),U(null);try{const ct=Wn(Qe,"users",ue);await Bm(ct,{totalXP:ax(He)});const nn=I.map($t=>$t.id===ue?{...$t,totalXP:($t.totalXP||0)+He}:$t);fe(nn),localStorage.setItem("etqan_all_students_teacher",JSON.stringify({data:nn,timestamp:Date.now()})),U(`  ${He} XP  ${ot} !`),setTimeout(()=>U(null),3e3)}catch(ct){console.error(ct),alert("    ")}finally{l(!1)}}},Ts=async()=>{if(!he.trim()){alert("   ");return}qe(!0);try{await or(Pt(Qe,"announcements"),{title:he,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:Ns()}),await or(Pt(Qe,"notifications"),{recipientId:"all",title:"  ",message:he,type:"info",createdAt:Ns(),read:!1}),alert("   "),Ee(""),Y(!1)}catch(ue){console.error(ue),alert("   ")}finally{qe(!1)}},Ss=I.filter(ue=>{const ot=(ue.displayName||"").toLowerCase(),He=(ue.email||"").toLowerCase(),ct=Ae.toLowerCase();return ot.includes(ct)||He.includes(ct)}),dr=ue=>ue?ue.startsWith("http")?{backgroundImage:`url(${ue})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${gp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Sn=ue=>!ue||ue.startsWith("http")?"bg-no-repeat bg-center":ue,Ct=ue=>ue<=3?"border-gray-800":ue<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":ue<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":ue<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":ue<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":ue<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":ue<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":ue<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":ue<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":ue<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",qt=ue=>ue<=3?"text-gray-400":ue<=6?"text-emerald-400 font-bold":ue<=9?"text-blue-400 font-bold":ue<=12?"text-cyan-400 font-black":ue<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":ue<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":ue<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",yn=ge.slice(0,10).map(ue=>ue.percentage),Ea=yn.length>0?Math.max(...yn):0,ja=yn.length>0?Math.min(...yn):0,Gt=yn.length>0?Math.round(yn.reduce((ue,ot)=>ue+ot,0)/yn.length):0,Gs=ge.length,Fr=(E-1)*500,As=Math.min(100,Math.max(0,(re-Fr)/500*100)),bn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Ta=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ue=>({label:` ${ue}`,value:ue.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Sa=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx($n,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(jn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(Rr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(ga,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(bS,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(Yu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(D2,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Fo,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>Y(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(uw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(cm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(ha,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(pl,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),D&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(jn,{className:"w-4 h-4"})," ",D]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Hs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:Ae,onChange:ue=>G(ue.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:ce?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(gt,{className:"w-8 h-8 animate-spin text-blue-500"})}):Ae===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):Ss.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):Ss.map(ue=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ue.avatar?i.jsx("img",{src:ue.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx($n,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:ue.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(Cf,{className:"w-3 h-3"})," ",ue.totalXP||0]}),i.jsxs("span",{children:[" ",ue.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:$,onChange:ot=>we(ot.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>Tn(ue.id,ue.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(ha,{className:"w-4 h-4"})})]})]},ue.id))})]})]}),L&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(uw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(Kn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:he,onChange:ue=>Ee(ue.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:Ts,disabled:Re,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Re?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx($n,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Kn,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:a7.map((ue,ot)=>{const He=E<ue.minLevel;return i.jsxs("button",{onClick:()=>!He&&V(ue.url),disabled:He,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${C===ue.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${He?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:ue.url,alt:`Avatar ${ot}`,className:"w-full h-full object-cover"}),He&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(ci,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ue.minLevel]})]}),!He&&C===ue.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(jn,{className:"w-3 h-3"})})]},ot)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:jt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(dw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Kn,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:gp.map((ue,ot)=>{const He=E<ue.minLevel,ct=Z===ue.url;return i.jsxs("button",{onClick:()=>!He&&B(ue.url),disabled:He,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${ct?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${He?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ue.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:He?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(ci,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ue.minLevel]})]}):ct&&i.jsx(jn,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ue.name})})]},ot)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:rt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Sn(e==null?void 0:e.profileBackground)}`,style:dr(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(dw,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Ct(E)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx($n,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(aA,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${qt(E)}`,children:[i.jsx(pl,{className:"w-3 h-3"}),"  ",E]})]})]}),i.jsxs("form",{onSubmit:st,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx($n,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ie.firstName,onChange:ue=>We({...Ie,firstName:ue.target.value}),className:bn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ie.lastName,onChange:ue=>We({...Ie,lastName:ue.target.value}),className:bn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(v2,{options:Sa,value:Ie.gender,onChange:ue=>!(e!=null&&e.genderChanged)&&We({...Ie,gender:ue}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(ci,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ie.phone,onChange:ue=>We({...Ie,phone:ue.target.value}),className:bn})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Ie.address,onChange:ue=>We({...Ie,address:ue.target.value}),className:bn})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(ga,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Ie.school,onChange:ue=>We({...Ie,school:ue.target.value}),className:bn})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(v2,{options:Ta,value:Ie.grade,onChange:ue=>We({...Ie,grade:ue}),placeholder:" "})]}),Ie.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:Ie.universityName||Ie.school,onChange:ue=>We({...Ie,universityName:ue.target.value}),placeholder:"   ...",className:`${bn} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(jn,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-3xl md:rounded-[2.5rem] shadow-2xl p-3 md:p-6 text-white relative overflow-hidden border-2 md:border-4 border-gray-800 ring-2 md:ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-2 md:mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-2 md:p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg md:text-3xl font-black tracking-tight",children:[" ",E]}),i.jsxs("p",{className:"text-indigo-100 text-xs md:text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-2 md:px-3 py-1 rounded-full w-fit",children:[i.jsx(Cf,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-orange-400 fill-orange-400"})," ",re,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-6 md:mb-8",children:[i.jsxs("div",{className:"flex justify-between text-[10px] md:text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",E+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3 md:h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${As}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 md:p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-xs md:text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(cc,{className:"w-3 h-3 md:w-4 md:h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-base md:text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-[10px] md:text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(Np,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:r7.map((ue,ot)=>{const He=ue.condition(k);return i.jsxs("button",{onClick:()=>N({badge:ue,isUnlocked:He}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${He?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${He?ue.bg:"bg-gray-700"}`,children:i.jsx(ue.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${He?ue.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:ue.title}),!He&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ci,{className:"w-2.5 h-2.5 text-gray-500"})})]},ot)})}),w&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>N(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(Kn,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${w.isUnlocked?w.badge.bg:"bg-gray-700"}`,children:i.jsx(w.badge.icon,{className:`w-6 h-6 ${w.isUnlocked?w.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:w.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${w.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:w.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:w.badge.desc})]}),!w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(ci,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(jn,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(VA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),ne?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(gt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Gt>=90?"text-emerald-400":"text-blue-400"}`,children:[Gt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(pl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[Ea,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(C2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[ja,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(xS,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:Gs})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(oA,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Gt,"%"]})]})]})]})]})]})]})]})]})},l7=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],pp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=M.useState(!1),f=M.useRef(null);M.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(ma,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},o7=({onBack:r})=>{const{user:e}=ur(),[t,s]=M.useState("SELECTION"),[l,c]=M.useState(""),[d,f]=M.useState(""),[g,x]=M.useState("All"),[v,w]=M.useState([]),[N,C]=M.useState(!1),[V,Z]=M.useState(null),[B,ge]=M.useState(0),[ae,ne]=M.useState({}),[xe,re]=M.useState(1800),[le,E]=M.useState(null),[T,A]=M.useState(!1),[R,k]=M.useState(0),[P,I]=M.useState({}),[fe,Ae]=M.useState(!1),[G,ce]=M.useState(null),[W,$]=M.useState(!1),[we,D]=M.useState(!1),[U,L]=M.useState(!1),[Y,he]=M.useState(0),[Ee,Re]=M.useState(!1),[qe,Ie]=M.useState(null),[We,st]=M.useState(0),[jt,rt]=M.useState(""),[Tn,Ts]=M.useState(!1),[Ss,dr]=M.useState(!1),[Sn,Ct]=M.useState(null);M.useEffect(()=>{window.scrollTo(0,0)},[t]),M.useEffect(()=>{if(e&&t==="SELECTION"){const de=`quiz_session_${e.uid}`,Te=localStorage.getItem(de);if(Te)try{const _e=JSON.parse(Te);Date.now()-_e.timestamp<7200*1e3?Ct(_e):localStorage.removeItem(de)}catch{localStorage.removeItem(de)}}},[e,t]),M.useEffect(()=>{if(t==="ACTIVE"&&V&&e){const de={quiz:V,answers:ae,index:B,timeLeft:xe,reorderShuffles:P,timestamp:Date.now()};localStorage.setItem(`quiz_session_${e.uid}`,JSON.stringify(de))}},[V,ae,B,xe,e,t,P]),M.useEffect(()=>{d?qt():w([])},[d]),M.useEffect(()=>{let de;return t==="ACTIVE"&&xe>0&&(de=setInterval(()=>{re(Te=>Te<=1?(Ta(),0):Te-1)},1e3)),()=>clearInterval(de)},[t,xe]),M.useEffect(()=>{let de;return t==="ACTIVE"&&(V!=null&&V.questionDuration)&&le!==null&&(le>0?de=setInterval(()=>{E(Te=>Te!==null&&Te>0?Te-1:0)},1e3):le===0&&bn()),()=>clearInterval(de)},[t,V,le]),M.useEffect(()=>{V!=null&&V.questionDuration?E(V.questionDuration):E(null)},[B,V]),M.useEffect(()=>{if(t!=="ACTIVE")return;const de=()=>{he(Ne=>{const Me=Ne+1;return Me===1?D(!0):Me>=2&&(D(!1),L(!0)),Me})},Te=()=>{document.hidden&&de()},_e=Ne=>{(Ne.key==="PrintScreen"||Ne.ctrlKey&&Ne.key==="p"||Ne.metaKey&&Ne.shiftKey)&&(Ne.preventDefault(),de())},De=Ne=>Ne.preventDefault();return document.addEventListener("visibilitychange",Te),document.addEventListener("keydown",_e),document.addEventListener("contextmenu",De),document.addEventListener("copy",De),document.addEventListener("paste",De),document.addEventListener("cut",De),document.addEventListener("selectstart",De),()=>{document.removeEventListener("visibilitychange",Te),document.removeEventListener("keydown",_e),document.removeEventListener("contextmenu",De),document.removeEventListener("copy",De),document.removeEventListener("paste",De),document.removeEventListener("cut",De),document.removeEventListener("selectstart",De)}},[t]);const qt=async()=>{C(!0);const de=`etqan_quizzes_${d}`,Te=365*24*60*60*1e3,_e=localStorage.getItem(de);if(_e)try{const{data:De,timestamp:Ne}=JSON.parse(_e);if(Date.now()-Ne<Te){w(De),C(!1);return}}catch(De){console.error("Cache error",De)}try{const De=cs(Pt(Qe,"quizzes"),os("grade","==",d));let Ne;try{Ne=await g9(De),Ne.empty&&(Ne=await p9(De))}catch{Ne=await us(De)}const Me=[];Ne.forEach(Fe=>{Me.push({id:Fe.id,...Fe.data()})}),w(Me),localStorage.setItem(de,JSON.stringify({data:Me,timestamp:Date.now()}))}catch(De){console.error("Error fetching quizzes:",De)}finally{C(!1)}},yn=Array.from(new Set(v.map(de=>de.subject))),Ea=v.filter(de=>{const Te=l?de.subject===l:!0,_e=g&&g!=="All"?de.category===g:!0;return Te&&_e}),ja=de=>{ce(de),Ae(!0)},Gt=de=>{if(!de.questions||de.questions.length===0){alert("      ");return}e&&localStorage.removeItem(`quiz_session_${e.uid}`),Ct(null);const _e=[...de.questions].sort(()=>Math.random()-.5).map(Fe=>{if(Fe.type==="MCQ"||Fe.type==="TF"){const ht=Fe.options.map((vn,$s)=>({opt:vn,originalIndex:$s}));ht.sort(()=>Math.random()-.5);const it=ht.map(vn=>vn.opt),Ot=ht.findIndex(vn=>vn.originalIndex===Fe.correctAnswer);return{...Fe,options:it,correctAnswer:Ot}}return Fe}),De={...de,questions:_e},Ne={};_e.forEach((Fe,ht)=>{if(Fe.type==="REORDER"){const it=Fe.options.map((Ot,vn)=>vn);for(let Ot=it.length-1;Ot>0;Ot--){const vn=Math.floor(Math.random()*(Ot+1));[it[Ot],it[vn]]=[it[vn],it[Ot]]}Ne[ht]=it}}),I(Ne),Z(De),ge(0),ne({});const Me=de.duration?de.duration*60:1800;re(Me),k(0),he(0),L(!1),st(0),rt(""),dr(!1),Ae(!1),ce(null),s("ACTIVE")},Gs=()=>{Sn&&(Z(Sn.quiz),ne(Sn.answers),ge(Sn.index),re(Sn.timeLeft),Sn.reorderShuffles&&I(Sn.reorderShuffles),s("ACTIVE"),Ct(null))},Fr=()=>{G&&Gt(G)},As=de=>{ne(Te=>({...Te,[B]:de}))},bn=()=>{V&&(E(null),B<V.questions.length-1?ge(de=>de+1):Ta())},Ta=async()=>{if(e&&localStorage.removeItem(`quiz_session_${e.uid}`),!V||!e){s("RESULT");return}A(!0);const de=ot(),Te=Math.round(de/V.questions.length*100);let _e=0;_e=de*30,k(_e);try{await or(Pt(Qe,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:V.id||"unknown",quizTitle:V.title,subject:V.subject,score:de,totalQuestions:V.questions.length,percentage:Te,passed:Te>=50,earnedXP:_e,createdAt:Ns()});const De=Wn(Qe,"users",e.uid);await _y(De,{totalXP:ax(_e),quizzesCompleted:ax(1),lastQuizDate:Ns(),role:"student",email:e.email,displayName:e.displayName},{merge:!0});const Ne=`etqan_user_profile_${e.uid}`,Me=localStorage.getItem(Ne);if(Me){const{data:Fe,timestamp:ht}=JSON.parse(Me),it={...Fe,totalXP:(Fe.totalXP||0)+_e,quizzesCompleted:(Fe.quizzesCompleted||0)+1};localStorage.setItem(Ne,JSON.stringify({data:it,timestamp:ht}))}localStorage.removeItem(`etqan_quiz_history_${e.uid}`)}catch(De){console.error("Error saving quiz result:",De)}finally{A(!1),s("RESULT")}},Sa=async()=>{if(We!==0&&!(!V||!e)){Ts(!0);try{await or(Pt(Qe,"reviews"),{type:"quiz",targetId:V.id,targetTitle:V.title,teacherId:V.createdBy||"teacher",teacherName:V.teacherName||"",rating:We,comment:jt,studentId:e.uid,studentName:e.displayName,createdAt:Ns()}),dr(!0)}catch(de){console.error("Error saving review:",de),alert("    ")}finally{Ts(!1)}}},ue=de=>{const Te=Math.floor(de/60),_e=de%60;return`${Te}:${_e<10?"0":""}${_e}`},ot=()=>{if(!V)return 0;let de=0;return V.questions.forEach((Te,_e)=>{if(Te.type==="REORDER"){const De=ae[_e];if(De&&De.length===Te.options.length){let Ne=!0;for(let Me=0;Me<Te.options.length;Me++)if(De[Me]!==Me){Ne=!1;break}Ne&&de++}}else ae[_e]===Te.correctAnswer&&de++}),de},He=()=>{$(!0)},ct=()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),$(!1),s("SELECTION")},nn=()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),L(!1),s("SELECTION")},yt=de=>{Ie(de),Re(!0)},$t=()=>{if(Re(!1),qe==="REVIEW")s("REVIEW");else if(qe==="RETAKE"){const de=v.find(Te=>Te.id===(V==null?void 0:V.id));de?Gt(de):s("SELECTION")}else qe==="LIST"?s("SELECTION"):qe==="HOME"&&r();Ie(null)},Mn=(de,Te)=>{const _e=ae[B]||[];As(Te?[..._e,de]:_e.filter(De=>De!==de))},kt=({title:de,message:Te,onConfirm:_e,onCancel:De,icon:Ne=Or,confirmText:Me="",cancelText:Fe="",confirmColor:ht="emerald",isStatic:it=!1})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Fe?De:void 0}),i.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-white/10 shadow-2xl shadow-black/50 ${it?"":"animate-fade-in-up"}`,children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ht==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Ne,{className:`w-10 h-10 ${ht==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:de}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Te}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:_e,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all shadow-lg ${ht==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"} ${it?"":"transform hover:scale-105 active:scale-95"} ${Fe?"":"max-w-[200px]"}`,children:Me}),Fe&&i.jsx("button",{onClick:De,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:Fe})]})]})]}),sn=()=>{const de=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(_e=>({label:` ${_e}`,value:_e.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],Te=[{label:"  ",value:""},...yn.map(_e=>({label:String(_e),value:String(_e)}))];return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),Sn&&i.jsxs("div",{className:"mb-8 p-4 rounded-3xl bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-purple-500/30 flex flex-col sm:flex-row items-center justify-between gap-4 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-purple-500/20 p-3 rounded-full border border-purple-500/30",children:i.jsx(k2,{className:"w-6 h-6 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),i.jsxs("p",{className:"text-gray-400 text-sm",children:['    "',Sn.quiz.title,'"']})]})]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:Gs,className:"flex-1 sm:flex-none bg-purple-600 hover:bg-purple-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-purple-900/30",children:" "}),i.jsx("button",{onClick:()=>{e&&localStorage.removeItem(`quiz_session_${e.uid}`),Ct(null)},className:"px-4 py-2.5 rounded-xl bg-gray-800 text-gray-400 hover:text-white font-bold transition-colors",children:""})]})]}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ga,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(pp,{options:de,value:d,onChange:_e=>{f(_e),c(""),x("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(Bn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(pp,{options:Te,value:l,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(B2,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(pp,{options:l7.map(_e=>({label:_e.label,value:_e.id})),value:g,onChange:x,placeholder:"  "})]})}),d&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(LS,{className:"w-5 h-5"})," "]}),N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(gt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Hs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Ea.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Hs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ea.map(_e=>i.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:_e.subject}),_e.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:_e.category==="General"?"General Quiz":_e.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[_e.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:_e.duration?`${_e.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:_e.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(hx,{className:"w-3 h-3"}),i.jsx("span",{children:_e.grade==="English Major - QOU"?"  ":` ${_e.grade}`})]}),i.jsxs("button",{onClick:()=>ja(_e),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",i.jsx(Af,{className:"w-4 h-4"})]})]},_e.id))})]}),fe&&i.jsx(kt,{title:"  ",message:`   ${G==null?void 0:G.title} `,onConfirm:Fr,onCancel:()=>Ae(!1),confirmText:" ",cancelText:"",icon:Or})]})},An=()=>{if(!V||!V.questions||!V.questions[B])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const de=V.questions[B],Te=de.type==="REORDER";let _e=!1;if(Te){const it=ae[B];_e=it!==void 0&&it.length===de.options.length}else _e=ae[B]!==void 0;const De=B===V.questions.length-1,Ne=V.subject.toLowerCase().includes("english")||V.subject.includes("")||V.subject.includes(""),Me=Ne?"ltr":"rtl",Fe=Ne?"text-left":"text-right",ht={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[de.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:it=>it.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),U&&i.jsx(kt,{title:"   ",message:"      .   .",onConfirm:nn,cancelText:null,confirmText:"",icon:vA,confirmColor:"red",isStatic:!0}),we&&!U&&i.jsx(kt,{title:" !",message:"     .   .",onConfirm:()=>D(!1),cancelText:null,confirmText:"",icon:mx,confirmColor:"red",isStatic:!0}),W&&i.jsx(kt,{title:" ",message:"       .",onConfirm:ct,onCancel:()=>$(!1),confirmText:" ",cancelText:"",icon:Xu,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:He,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(Xu,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${xe<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(cx,{className:"w-4 h-4"}),ue(xe)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[B+1," / ",V.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(B+1)/V.questions.length*100}%`}})})]}),le!==null&&V.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${le<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${le/V.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",le," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Me,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:V.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Te?i.jsx(L2,{className:"w-4 h-4 text-emerald-500"}):i.jsx(ci,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[de.passageContent&&i.jsxs("div",{className:"mb-8",children:[de.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${Fe}`,children:de.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${Fe}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ht}`,children:de.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${Fe}`,children:de.question}),Te?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(ae[B]||[]).map((it,Ot)=>i.jsx("button",{onClick:()=>Mn(it,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:de.options[it]},`ans-${Ot}`)),(!ae[B]||ae[B].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(P[B]||[]).filter(it=>!(ae[B]||[]).includes(it)).map((it,Ot)=>i.jsx("button",{onClick:()=>Mn(it,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:de.options[it]},`bank-${Ot}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>As([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(U2,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:de.options.map((it,Ot)=>i.jsxs("button",{onClick:()=>As(Ot),className:`w-full ${Fe} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 outline-none ${ae[B]===Ot?"border-emerald-500 bg-emerald-900/30 shadow-md outline-none":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${ae[B]===Ot?"text-emerald-300":"text-gray-300"}`,children:it}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${ae[B]===Ot?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:ae[B]===Ot&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Ot))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:bn,disabled:!_e||T,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!_e||T?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:T?i.jsxs(i.Fragment,{children:["  ",i.jsx(gt,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[De?" ":" ",Me==="rtl"?i.jsx(Af,{className:"w-5 h-5"}):i.jsx(Bt,{className:"w-5 h-5"})]})})})]})]})},xt=()=>{if(!V)return null;const de=ot(),Te=V.questions.length,_e=Math.round(de/Te*100);let De="text-red-500",Ne=sS,Me=" ";_e>=90?(De="text-emerald-500",Ne=cc,Me="!"):_e>=75?(De="text-blue-500",Ne=fd,Me="!"):_e>=50&&(De="text-yellow-500",Ne=ma,Me=" ");const Fe=Ne;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2.5rem] border border-gray-800 p-8 relative overflow-hidden text-center shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx(Fe,{className:`w-16 h-16 ${De} mb-3 drop-shadow-md`}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:Me}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-3",children:V.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-3 py-1 rounded-full border border-gray-700",children:[i.jsx(Cf,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",R," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 text-center mb-6 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-2",children:" "}),i.jsxs("span",{className:`text-6xl font-black ${De}`,children:[_e,"%"]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/50 flex items-center justify-center gap-2 text-gray-400 text-sm font-bold",children:[i.jsx("span",{children:"  :"}),i.jsxs("span",{className:`text-white bg-gray-700 px-3 py-1 rounded-lg ${De}`,children:[de," / ",Te]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>yt("REVIEW"),className:"w-full py-3.5 bg-orange-500 text-white font-black text-sm rounded-xl hover:bg-orange-600 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-lg shadow-orange-900/20",children:[i.jsx(vp,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>yt("HOME"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(Qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>yt("RETAKE"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(md,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:Ss?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(ma,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(cm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ht=>i.jsx("button",{onClick:()=>st(ht),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${We===ht?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ht},ht))}),i.jsx("textarea",{value:jt,onChange:ht=>rt(ht.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Sa,disabled:Tn||We===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${We===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[Tn?i.jsx(gt,{className:"w-3 h-3 animate-spin"}):i.jsx(ha,{className:"w-3 h-3"}),""]})]})})]})},Fn=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(vp,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(Bt,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:V==null?void 0:V.questions.map((de,Te)=>{const _e=de.type==="REORDER";let De=!1,Ne=null;if(_e){const Me=ae[Te];Me?(Ne=Me.map(Fe=>de.options[Fe]).join(" "),De=Me.length===de.options.length&&Me.every((Fe,ht)=>Fe===ht)):(Ne="  ",De=!1)}else{const Me=ae[Te];De=Me===de.correctAnswer,Ne=Me!==void 0?de.options[Me]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${De?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${De?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Te+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:de.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${De?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Ne})]}),!De&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:_e?de.options.join(" "):de.options[de.correctAnswer]})]}),de.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(Or,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:de.explanation})]})]},de.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),sn()]}),t==="ACTIVE"&&An(),t==="RESULT"&&xt(),t==="REVIEW"&&Fn(),Ee&&i.jsx(kt,{title:"  ",message:qe==="REVIEW"?"   ":qe==="RETAKE"?"     ":qe==="LIST"?"    ":"    ",onConfirm:$t,onCancel:()=>Re(!1),confirmText:"",cancelText:"",icon:nA})]})},c7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),u7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),d7=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(BT,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(_p,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(_l,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(fd,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(qo,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(c7,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(u7,{className:"w-5 h-5"})})]})})]},s))})]})]})},h7=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(vp,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(um,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:fx,title:" ",desc:"       ."},{icon:SS,title:" ",desc:"           ."},{icon:C2,title:" ",desc:"         ."},{icon:dm,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),w2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=M.useState(!1),f=M.useRef(null);M.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ni,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(ma,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},f7=({onBack:r})=>{const[e,t]=M.useState(""),[s,l]=M.useState(""),[c,d]=M.useState("SELECTION"),[f,g]=M.useState(["handouts"]),[x,v]=M.useState([]),[w,N]=M.useState(!1);M.useEffect(()=>{c==="CONTENT"&&s&&e&&C()},[c,s,e]);const C=async()=>{N(!0);const re=`etqan_materials_${s}_${e}`,le=365*24*60*60*1e3,E=localStorage.getItem(re);if(E)try{const{data:T,timestamp:A}=JSON.parse(E);if(Date.now()-A<le){v(T),N(!1);return}}catch(T){console.error("Cache parsing error",T)}try{const T=cs(Pt(Qe,"study_materials"),os("grade","==",s),os("subject","==",e)),A=await us(T),R=[];A.forEach(k=>{R.push({id:k.id,...k.data()})}),R.sort((k,P)=>{var Ae,G;const I=((Ae=k.createdAt)==null?void 0:Ae.seconds)||0;return(((G=P.createdAt)==null?void 0:G.seconds)||0)-I}),v(R),localStorage.setItem(re,JSON.stringify({data:R,timestamp:Date.now()}))}catch(T){console.error("Error fetching materials:",T)}finally{N(!1)}},V=()=>{e&&s&&d("CONTENT")},Z=re=>{g(le=>le.includes(re)?le.filter(E=>E!==re):[...le,re])},B=()=>{const re=x.filter(T=>T.category==="handouts"),le=x.filter(T=>T.category==="worksheets"),E=x.filter(T=>T.category==="exams");return[{id:"handouts",title:" ",files:re},{id:"worksheets",title:" ",files:le},{id:"exams",title:" ",files:E}]},ge=re=>re?(re.toDate?re.toDate():new Date(re.seconds*1e3)).toLocaleDateString("ar-EG"):"",ae=B(),ne=()=>{const re=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(E=>({label:` ${E}`,value:E.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],le=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(Mo,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(Bn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(w2,{options:le,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(ga,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(w2,{options:re,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:V,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(Hs,{className:"w-6 h-6"})," "]})]})})]})},xe=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Qn,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(Bt,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(Mo,{className:"w-3.5 h-3.5"}),ae.reduce((re,le)=>re+le.files.length,0)," "]})]}),w?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(gt,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:ae.map(re=>{const le=f.includes(re.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>Z(re.id),className:`w-full flex items-center justify-between p-5 transition-colors ${le?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${le?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(Mo,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:re.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[re.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${le?"rotate-180":""}`,children:i.jsx(Ni,{className:"w-5 h-5 text-gray-400"})})]}),le&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:re.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Mo,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:re.files.map((E,T)=>i.jsxs("div",{onClick:()=>E.url&&window.open(E.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(Qn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:E.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:E.size}),i.jsx("span",{children:""}),i.jsx("span",{children:ge(E.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(bp,{className:"w-5 h-5"})})]},T))})})]},re.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(If,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?ne():xe()]})},m7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),g7=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],p7=[{id:"inquiry",label:" ",icon:hx,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:Or,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:wS,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:wl,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],x7=({onBack:r})=>{const[e,t]=M.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(Bt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:g7.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(ha,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(Kn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),p7.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(oa,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(m7,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},_2=[{minLevel:1,title:" ",icon:ux,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:Bn,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:Hs,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:fd,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:gd,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:cc,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],y7=({onLoginClick:r})=>{const[e,t]=M.useState([]),[s,l]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{(async()=>{l(!0);const v="etqan_leaderboard_cache_v2",w=365*24*60*60*1e3,N=localStorage.getItem(v),C=Date.now();let V=[],Z=!1;if(N)try{const B=JSON.parse(N);C-B.timestamp<w&&(V=B.data,Z=!0)}catch(B){console.error("Cache parse error",B)}if(Z)t(V);else try{const B=cs(Pt(Qe,"users"),vc("totalXP","desc"),wc(5)),ae=(await us(B)).docs.map(ne=>({...ne.data(),uid:ne.id}));t(ae),localStorage.setItem(v,JSON.stringify({timestamp:C,data:ae}))}catch(B){console.error("Error fetching leaderboard:",B)}l(!1)})()},[]);const f=x=>{switch(x){case 0:return i.jsx(cc,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return i.jsx(Np,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return i.jsx(Np,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return i.jsx(pl,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const v=Math.floor((x||0)/500)+1;return[..._2].reverse().find(w=>v>=w.minLevel)||_2[0]};return i.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),i.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[i.jsx(pl,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"    ( 5)"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-3xl",children:i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Cf,{className:"w-5 h-5 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[i.jsx(V2,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gt,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),i.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:i.jsx("p",{children:"      !"})}):i.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,v)=>i.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${v===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":v===1?"bg-gray-800/60 border-gray-600/50":v===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${v<3?"text-white":"text-gray-600"}`,children:v<3?f(v):v+1}),i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?i.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):i.jsx($n,{className:"w-full h-full p-2 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[i.jsx(ga,{className:"w-3 h-3"}),x.school||" "]})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[i.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),i.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),v===0&&i.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:i.jsxs("span",{className:"flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},v))})]})})})]}),c&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:i.jsx(Kn,{className:"w-5 h-5"})}),i.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),i.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[i.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):i.jsx($n,{className:"w-full h-full p-6 text-gray-500"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[i.jsx(hx,{className:"w-3 h-3"}),c.school||" "]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[A2.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),i.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),i.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[i.jsx(uA,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),i.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),i.jsx("div",{className:"pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},b7=()=>{const r=[{id:1,label:" ",value:"+500",icon:dm,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",textColor:"text-blue-200"},{id:2,label:" ",value:"+50",icon:Bn,color:"text-emerald-400",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",textColor:"text-emerald-200"},{id:3,label:"",value:"+20",icon:Qn,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",textColor:"text-yellow-200"},{id:4,label:"",value:"+30",icon:Fo,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",textColor:"text-purple-200"}];return i.jsx("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-10",children:[i.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full animate-pulse border border-emerald-500/20",children:i.jsx(kT,{className:"w-6 h-6 text-emerald-500"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:" "})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:r.map(e=>i.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-sm p-6 rounded-3xl border ${e.borderColor} flex flex-col items-center justify-center text-center group hover:bg-gray-900 transition-all duration-300 hover:-translate-y-1 shadow-lg`,children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-4 ${e.bgColor} ${e.color} shadow-lg group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:i.jsx(e.icon,{className:"w-7 h-7"})}),i.jsx("div",{className:`text-3xl md:text-4xl font-black mb-2 ${e.color} drop-shadow-sm`,children:e.value}),i.jsx("div",{className:`font-bold text-sm md:text-base transition-colors ${e.textColor}`,children:e.label})]},e.id))})]})})},v7=({onBack:r})=>{const[e,t]=M.useState([]),[s,l]=M.useState(!0),[c,d]=M.useState(""),[f,g]=M.useState(null),[x,v]=M.useState(!1);M.useEffect(()=>{w()},[]);const w=async()=>{l(!0);const E="etqan_question_bank_v1",T=localStorage.getItem(E);if(T)try{const A=JSON.parse(T);if(A&&Array.isArray(A)){t(A),l(!1);return}}catch(A){console.error("Cache parsing error",A)}try{const A=cs(Pt(Qe,"quizzes"),vc("createdAt","desc"),wc(50)),k=(await us(A)).docs.map(P=>({id:P.id,...P.data()}));t(k),localStorage.setItem(E,JSON.stringify(k))}catch(A){console.error("Error fetching quizzes:",A)}finally{l(!1)}},N=E=>{g({category:"Language",...E})},C=E=>{localStorage.setItem("etqan_question_bank_v1",JSON.stringify(E))},V=async(E,T)=>{if(E.stopPropagation(),!T){alert(":   ");return}if(window.confirm("  "))try{await qm(Wn(Qe,"quizzes",T));const A=e.filter(R=>R.id!==T);t(A),C(A)}catch(A){console.error("Error deleting quiz:",A),alert("   : "+A.message)}},Z=(E,T)=>{f&&g({...f,[E]:T})},B=(E,T,A)=>{if(!f)return;const R=[...f.questions];R[E]={...R[E],[T]:A},g({...f,questions:R})},ge=(E,T,A)=>{if(!f)return;const R=[...f.questions],k=[...R[E].options];k[T]=A,R[E]={...R[E],options:k},g({...f,questions:R})},ae=E=>{if(f&&window.confirm("      ")){const T=f.questions.filter((A,R)=>R!==E);g({...f,questions:T})}},ne=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}v(!0);try{const E=Wn(Qe,"quizzes",f.id);await Bm(E,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions});const T=e.map(A=>A.id===f.id?f:A);t(T),C(T),g(null),alert("   ")}catch(E){console.error("Error updating quiz:",E),alert("   ")}finally{v(!1)}}},xe=e.filter(E=>(E.title?E.title.toLowerCase().includes(c.toLowerCase()):!1)||E.teacherName&&E.teacherName.toLowerCase().includes(c.toLowerCase())),re=E=>E?(E.toDate?E.toDate():new Date(E.seconds*1e3)).toLocaleDateString("ar-EG"):"",le="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(Hs,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:E=>d(E.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(gt,{className:"w-10 h-10 animate-spin text-blue-400"})}):xe.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Yu,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xe.map(E=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:E.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(E),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(Ep,{className:"w-4 h-4"})}),i.jsx("button",{onClick:T=>V(T,E.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(Ei,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:E.title}),E.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:E.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",E.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Ku,{className:"w-3 h-3"}),re(E.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx($n,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:E.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(Or,{className:"w-3 h-3"}),E.questions.length," "]})]})]},E.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(Ep,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Kn,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Yu,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:E=>Z("title",E.target.value),className:le})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:E=>Z("subject",E.target.value),className:le})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:E=>Z("grade",E.target.value),className:le,children:[5,6,7,8,9,10,11,12].map(E=>i.jsxs("option",{value:E,children:[" ",E]},E))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:E=>Z("category",E.target.value),className:le,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Or,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((E,T)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>ae(T),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(Ei,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",T+1]}),i.jsx("input",{type:"text",dir:"ltr",value:E.question,onChange:A=>B(T,"question",A.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:E.options.map((A,R)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",R+1]}),i.jsxs("button",{onClick:()=>B(T,"correctAnswer",R),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${E.correctAnswer===R?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[E.correctAnswer===R?i.jsx(jn,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),E.correctAnswer===R?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:A,onChange:k=>ge(T,R,k.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${E.correctAnswer===R?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},R))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:E.explanation||"",onChange:A=>B(T,"explanation",A.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},T))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:ne,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"})," "]})]})]})})]})},w7=[{id:"grammar",title:" (Grammar)",icon:Yu,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Bn,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:om,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:dx,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],_7=[{id:"English",title:" ",icon:om,color:"text-purple-400",bg:"bg-purple-900/20"}],N7=({onBack:r})=>{const{user:e}=ur(),[t,s]=M.useState("INTRO"),[l,c]=M.useState(""),[d,f]=M.useState(""),[g,x]=M.useState(null),[v,w]=M.useState([]),[N,C]=M.useState(!1),[V,Z]=M.useState(null),[B,ge]=M.useState(0),[ae,ne]=M.useState(""),[xe,re]=M.useState(!1),[le,E]=M.useState(!1);M.useEffect(()=>{window.scrollTo(0,0)},[t]);const T=()=>s("SUBJECTS"),A=U=>{c(U),s("GRADES")},R=U=>{f(U),s("CATEGORIES")},k=U=>{x(U),s("TOPICS")},P=U=>{Z(U),ge(0),ne(""),E(!1),s("DETAILS")};M.useEffect(()=>{t==="TOPICS"&&d&&g&&l&&I()},[t,d,g,l]);const I=async()=>{C(!0);const U=`etqan_explanations_${d}_${l}_${g==null?void 0:g.id}`,L=365*24*60*60*1e3,Y=localStorage.getItem(U);if(Y)try{const{data:he,timestamp:Ee}=JSON.parse(Y);if(Date.now()-Ee<L){w(he),C(!1);return}}catch(he){console.error(he)}try{const he=cs(Pt(Qe,"explanations"),os("subject","==",l),os("grade","==",d),os("category","==",g==null?void 0:g.id)),Ee=await us(he),Re=[];Ee.forEach(qe=>{Re.push({id:qe.id,...qe.data()})}),Re.sort((qe,Ie)=>{var jt,rt;const We=((jt=qe.createdAt)==null?void 0:jt.seconds)||0;return(((rt=Ie.createdAt)==null?void 0:rt.seconds)||0)-We}),w(Re),localStorage.setItem(U,JSON.stringify({data:Re,timestamp:Date.now()}))}catch(he){console.error("Error fetching explanations:",he)}finally{C(!1)}},fe=async()=>{if(B!==0&&!(!V||!e)){re(!0);try{await or(Pt(Qe,"reviews"),{type:"explanation",targetId:V.id,targetTitle:V.title,teacherId:V.teacherName||"",teacherName:V.teacherName||"",rating:B,comment:ae,studentId:e.uid,studentName:e.displayName,createdAt:Ns()}),E(!0)}catch(U){console.error("Error saving review:",U),alert("    ")}finally{re(!1)}}},Ae=U=>U?(U.toDate?U.toDate():new Date(U.seconds*1e3)).toLocaleDateString("ar-EG"):"",G=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:T,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(Bt,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(Qu,{className:"w-4 h-4"})," "]})})]}),ce=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:_7.map(U=>i.jsxs("button",{onClick:()=>A(U.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${U.bg} ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:U.title})]},U.id))})})]}),W=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(U=>i.jsxs("button",{onClick:()=>R(U.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:U})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",U]})]},U)),i.jsxs("button",{onClick:()=>R("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(ga,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),$=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w7.map(U=>i.jsx("button",{onClick:()=>k(U),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:U.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:U.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(oa,{className:"w-5 h-5 text-gray-400"})})]})},U.id))})})]}),we=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(gt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx($u,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.map(U=>i.jsxs("button",{onClick:()=>P(U),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(Qn,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:U.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ku,{className:"w-3 h-3"}),Ae(U.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx($n,{className:"w-3 h-3"}),U.teacherName]})]})]})]}),i.jsx(oa,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},U.id))})})]}),D=()=>V?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:V.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),i.jsx(oa,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:V.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:V.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($n,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:V.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ku,{className:"w-4 h-4"}),i.jsx("span",{children:Ae(V.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:le?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(ma,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(cm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(U=>i.jsx("button",{onClick:()=>ge(U),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${B===U?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:U},U))}),i.jsx("textarea",{value:ae,onChange:U=>ne(U.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:fe,disabled:xe||B===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${B===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[xe?i.jsx(gt,{className:"w-4 h-4 animate-spin"}):i.jsx(ha,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[t==="INTRO"&&G(),t==="SUBJECTS"&&ce(),t==="GRADES"&&W(),t==="CATEGORIES"&&$(),t==="TOPICS"&&we(),t==="DETAILS"&&D()]})},N2=[{id:"grammar",title:" (Grammar)",icon:Yu},{id:"reading",title:" (Reading)",icon:Bn},{id:"vocabulary",title:" (Vocabulary)",icon:om},{id:"writing",title:" (Writing)",icon:dx}],E7=[{id:"English",title:"  (English)",icon:om}],j7=({onBack:r,onNavigate:e})=>{const{user:t}=ur(),[s,l]=M.useState(""),[c,d]=M.useState(""),[f,g]=M.useState(""),[x,v]=M.useState(""),[w,N]=M.useState(""),[C,V]=M.useState(!1),[Z,B]=M.useState(!1),[ge,ae]=M.useState(""),[ne,xe]=M.useState([]),[re,le]=M.useState(!1),[E,T]=M.useState(!1),[A,R]=M.useState(null),[k,P]=M.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}V(!0);try{await or(Pt(Qe,"explanations"),{subject:s,grade:c,category:f,title:x,content:w,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Ns()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch($){console.error("Error saving explanation:",$),alert("   ")}finally{V(!1)}},fe=async()=>{if(ge.trim()&&t!=null&&t.uid){le(!0),T(!0),xe([]);try{const $=cs(Pt(Qe,"explanations"),os("title",">=",ge),os("title","<=",ge+"")),we=await us($),D=[];we.forEach(U=>{const L=U.data();L.teacherId===t.uid&&D.push({id:U.id,...L})}),xe(D)}catch($){console.error("Error searching explanations:",$)}finally{le(!1)}}},Ae=async()=>{if(A){P(!0);try{await qm(Wn(Qe,"explanations",A)),xe($=>$.filter(we=>we.id!==A)),R(null)}catch($){console.error($),alert("   ")}finally{P(!1)}}},G=()=>{r?r():e("HOME")},ce=$=>$?($.toDate?$.toDate():new Date($.seconds*1e3)).toLocaleDateString("ar-EG"):"",W=$=>{const we=N2.find(D=>D.id===$);return we?we.title:$};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:G,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:G,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Fo,{className:"w-6 h-6 text-purple-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(jn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:E7.map($=>i.jsxs("button",{onClick:()=>l($.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===$.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx($.icon,{className:"w-6 h-6"}),i.jsx("span",{children:$.title})]},$.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map($=>i.jsxs("button",{onClick:()=>d($.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===$.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",$]},$)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:N2.map($=>i.jsxs("button",{onClick:()=>g($.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===$.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===$.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx($.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:$.title})]},$.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:$=>v($.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:$=>N($.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Ei,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:ge,onChange:$=>ae($.target.value),onKeyDown:$=>$.key==="Enter"&&fe(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:fe,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:re?i.jsx(gt,{className:"w-4 h-4 animate-spin"}):i.jsx(Hs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),ne.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:ne.map($=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(Qn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:$.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:$.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:W($.category)}),i.jsx("span",{children:$.grade==="English Major - QOU"?"":` ${$.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ku,{className:"w-3 h-3"})," ",ce($.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>$.id&&R($.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(Ei,{className:"w-4 h-4"})})]},$.id))}):E&&!re&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Fo,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(mx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ae,disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:k?i.jsx(gt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>R(null),disabled:k,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},T7=[{id:"handouts",title:" ",icon:Qn,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Mo,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Bn,color:"text-purple-400",bg:"bg-purple-900/20"}],S7=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],A7=({onBack:r,onNavigate:e})=>{const{user:t}=ur(),[s,l]=M.useState(""),[c,d]=M.useState(""),[f,g]=M.useState(""),[x,v]=M.useState(""),[w,N]=M.useState(""),[C,V]=M.useState(!1),[Z,B]=M.useState(!1),[ge,ae]=M.useState(""),[ne,xe]=M.useState([]),[re,le]=M.useState(!1),[E,T]=M.useState(!1),[A,R]=M.useState(null),[k,P]=M.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}if(!w.startsWith("http")){alert("        http  https");return}V(!0);try{await or(Pt(Qe,"study_materials"),{grade:s,subject:c,category:f,title:x,url:w,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Ns()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(W){console.error("Error saving file:",W),alert("   ")}finally{V(!1)}},fe=async()=>{if(ge.trim()&&t!=null&&t.uid){le(!0),T(!0),xe([]);try{const W=cs(Pt(Qe,"study_materials"),os("title",">=",ge),os("title","<=",ge+"")),$=await us(W),we=[];$.forEach(D=>{const U=D.data();U.teacherId===t.uid&&we.push({id:D.id,...U})}),xe(we)}catch(W){console.error("Error searching files:",W)}finally{le(!1)}}},Ae=async()=>{if(A){P(!0);try{await qm(Wn(Qe,"study_materials",A)),xe(W=>W.filter($=>$.id!==A)),R(null)}catch(W){console.error(W),alert("   ")}finally{P(!1)}}},G=()=>{r?r():e("PROFILE")},ce=W=>W?(W.toDate?W.toDate():new Date(W.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:G,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:G,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(D2,{className:"w-6 h-6 text-blue-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(jn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ga,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:W=>l(W.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(W=>i.jsxs("option",{value:W.toString(),children:[" ",W]},W)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Bn,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:W=>d(W.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),S7.map(W=>i.jsx("option",{value:W.id,children:W.title},W.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:T7.map(W=>i.jsxs("button",{onClick:()=>g(W.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===W.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${W.bg}`,children:i.jsx(W.icon,{className:`w-6 h-6 ${W.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:W.title})]},W.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:W=>v(W.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(VS,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:w,onChange:W=>N(W.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(pi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Ei,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:ge,onChange:W=>ae(W.target.value),onKeyDown:W=>W.key==="Enter"&&fe(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:fe,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:re?i.jsx(gt,{className:"w-4 h-4 animate-spin"}):i.jsx(Hs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),ne.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:ne.map(W=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(Qn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:W.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:W.subject}),i.jsx("span",{children:W.grade==="English Major - QOU"?"":` ${W.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ku,{className:"w-3 h-3"})," ",ce(W.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>W.id&&R(W.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(Ei,{className:"w-4 h-4"})})]},W.id))}):E&&!re&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Qn,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(mx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ae,disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:k?i.jsx(gt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>R(null),disabled:k,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},xp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const w={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",C=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${w.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${w.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${w.bgIcon} border ${w.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${w.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${w.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${w.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${C} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${w.border} ${w.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${w.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(Bt,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${w.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${w.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},I7=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(xp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:ox,secondaryIcon:jn,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(xp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:$u,secondaryIcon:k2,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(xp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Mo,secondaryIcon:iS,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),C7=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),R7=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(jA,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(Bt,{className:"w-6 h-6"})]})})]})]}),k7=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),Cy=()=>{const r=M.useRef(null);return M.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const v=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",v);const w=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},D7=({onBack:r})=>{const e=[{icon:ox,title:" ",desc:"              ."},{icon:NA,title:" 24/7",desc:"                 ."},{icon:gd,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Qn,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(Cy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(_l,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(um,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(jn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(jn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(jn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},O7=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(Cy,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(_l,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(Bt,{className:"w-5 h-5"})]})]})]}),M7=({onBack:r,onNavigate:e})=>{const{user:t}=ur(),[s,l]=M.useState("INBOX"),[c,d]=M.useState([]),[f,g]=M.useState(""),[x,v]=M.useState(""),[w,N]=M.useState(""),[C,V]=M.useState(!1),[Z,B]=M.useState(!1),[ge,ae]=M.useState(""),[ne,xe]=M.useState([]),[re,le]=M.useState(!1);M.useEffect(()=>{s==="COMPOSE"?E():T()},[s,t]);const E=async()=>{B(!0);try{const fe=cs(Pt(Qe,"users"),os("role","==","student")),G=(await us(fe)).docs.map(ce=>({id:ce.id,...ce.data()}));d(G)}catch(fe){console.error("Error fetching students",fe)}finally{B(!1)}},T=async(fe=!1)=>{if(!t)return;const Ae=`etqan_inbox_${t.uid}`,G=365*24*60*60*1e3,ce=Date.now();if(!fe){const W=localStorage.getItem(Ae);if(W)try{const{data:$,timestamp:we}=JSON.parse(W);if(ce-we<G){xe($);return}}catch($){console.error($)}}le(!0);try{const W=cs(Pt(Qe,"contact_messages"),os("teacherId","==",t.uid),vc("createdAt","desc"),wc(50)),we=(await us(W)).docs.map(D=>({id:D.id,...D.data(),createdAt:D.data().createdAt?{seconds:D.data().createdAt.seconds}:null}));xe(we),localStorage.setItem(Ae,JSON.stringify({timestamp:ce,data:we}))}catch(W){console.error("Error fetching inbox",W)}finally{le(!1)}},A=async()=>{if(!x||!w){alert("    ");return}if(!f){alert("  ");return}V(!0);try{await or(Pt(Qe,"notifications"),{recipientId:f,title:x,message:w,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:Ns(),read:!1}),alert("   !"),v(""),N(""),g(""),ae("")}catch(fe){console.error("Error sending message",fe),alert("   ")}finally{V(!1)}},R=async fe=>{if(window.confirm("      "))try{await qm(Wn(Qe,"contact_messages",fe));const Ae=ne.filter(W=>W.id!==fe);xe(Ae);const G=`etqan_inbox_${t==null?void 0:t.uid}`,ce=localStorage.getItem(G);if(ce){const W=JSON.parse(ce);W.data=Ae,localStorage.setItem(G,JSON.stringify(W))}}catch(Ae){console.error(Ae)}},k=async fe=>{try{await Bm(Wn(Qe,"contact_messages",fe),{read:!0});const Ae=ne.map(W=>W.id===fe?{...W,read:!0}:W);xe(Ae);const G=`etqan_inbox_${t==null?void 0:t.uid}`,ce=localStorage.getItem(G);if(ce){const W=JSON.parse(ce);W.data=Ae,localStorage.setItem(G,JSON.stringify(W))}}catch(Ae){console.error(Ae)}},P=c.filter(fe=>{const Ae=fe.displayName?fe.displayName.toLowerCase():"",G=fe.email?fe.email.toLowerCase():"",ce=ge.toLowerCase();return Ae.includes(ce)||G.includes(ce)}),I=fe=>fe?(fe.toDate?fe.toDate():new Date(fe.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(Rr,{className:"w-5 h-5"})," ",ne.some(fe=>!fe.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(ha,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ha,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(dm,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(Hs,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:ge,onChange:fe=>{ae(fe.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),ge&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:P.map(fe=>i.jsxs("div",{onClick:()=>{g(fe.id),ae(fe.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===fe.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:fe.avatar?i.jsx("img",{src:fe.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx($n,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:fe.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:fe.email})]}),f===fe.id&&i.jsx(jn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},fe.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:fe=>v(fe.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:fe=>N(fe.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[C?i.jsx(gt,{className:"w-5 h-5 animate-spin"}):i.jsx(ha,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(Rr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:()=>T(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:i.jsx(md,{className:"w-5 h-5 text-gray-400"})})]}),re?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(gt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):ne.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(Rr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:ne.map(fe=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${fe.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${fe.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:fe.studentName?fe.studentName.charAt(0).toUpperCase():i.jsx($n,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${fe.read?"text-gray-300":"text-white"}`,children:fe.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:fe.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(cx,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(fe.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:fe.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!fe.read&&i.jsxs("button",{onClick:()=>k(fe.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(jn,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>R(fe.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(Ei,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(Rr,{className:"w-4 h-4 text-gray-500"})})})]}),!fe.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},fe.id))})]})})]})})]})},V7=({onBack:r,onNavigate:e})=>{const[t,s]=M.useState([]),[l,c]=M.useState(!0),[d,f]=M.useState("ALL");M.useEffect(()=>{g()},[]);const g=async()=>{c(!0);const N="etqan_teacher_reviews_v1",C=365*24*60*60*1e3,V=Date.now(),Z=localStorage.getItem(N);if(Z)try{const{data:B,timestamp:ge}=JSON.parse(Z);if(V-ge<C){s(B),c(!1);return}}catch(B){console.error("Cache parsing error",B)}try{const B=cs(Pt(Qe,"reviews"),vc("createdAt","desc"),wc(50)),ae=(await us(B)).docs.map(ne=>({id:ne.id,...ne.data(),createdAt:ne.data().createdAt?{seconds:ne.data().createdAt.seconds}:null}));s(ae),localStorage.setItem(N,JSON.stringify({timestamp:V,data:ae}))}catch(B){console.error("Error fetching reviews:",B)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),v=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",w=t.length>0?(t.reduce((N,C)=>N+C.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Bt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(_l,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:w}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(gt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(cm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:v(N.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((C,V)=>i.jsx(_l,{className:`w-3 h-3 ${V<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},V)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})},P7=({onNavigate:r})=>i.jsxs("section",{className:"py-24 relative overflow-hidden bg-gray-950 border-t border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-900/10 rounded-full blur-[100px]"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-[100px]"})]}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl mb-8 border border-white/10 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:i.jsx(wl,{className:"w-10 h-10 text-emerald-400"})}),i.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight tracking-tight",children:"   "}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed font-medium",children:"       .         ."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8",children:[i.jsxs("div",{className:"flex items-center -space-x-4 space-x-reverse",children:[i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-20",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shadow-lg relative z-0",children:"+2"})]}),i.jsxs("button",{onClick:()=>r("CONTACT_TEACHER"),className:"group relative bg-white text-gray-900 px-8 py-4 rounded-2xl font-black text-lg hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] flex items-center gap-3 transform hover:-translate-y-1",children:["  ",i.jsx(Bt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-emerald-600"})]})]})]})]}),yp=()=>i.jsxs("div",{className:"relative w-full h-16 flex items-center justify-center my-8 overflow-hidden",children:[i.jsx("div",{className:"absolute w-full h-px bg-gray-800"}),i.jsx("div",{className:"absolute w-3/4 h-px bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,1)]"}),i.jsx("div",{className:"relative bg-gray-950 p-2 rounded-full border border-emerald-500/30 shadow-[0_0_15px_rgba(16,185,129,0.4)]",children:i.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"})})]}),L7=()=>{const r=[{icon:$S,title:" ",desc:"     .",color:"text-blue-400",bg:"bg-blue-900/20"},{icon:ox,title:" ",desc:"     .",color:"text-purple-400",bg:"bg-purple-900/20"},{icon:gd,title:" ",desc:"    .",color:"text-yellow-400",bg:"bg-yellow-900/20"},{icon:pl,title:" ",desc:"      .",color:"text-emerald-400",bg:"bg-emerald-900/20"}];return i.jsxs("div",{className:"py-12 px-4 relative",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx("div",{className:"absolute right-8 md:right-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-emerald-500/10 via-emerald-500 to-emerald-500/10 rounded-full"}),i.jsx("div",{className:"space-y-12",children:r.map((e,t)=>i.jsxs("div",{className:"relative flex items-center gap-6 group",children:[i.jsx("div",{className:`relative z-10 w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 border-4 border-gray-950 shadow-xl ${e.bg} transition-transform group-hover:scale-110 duration-300`,children:i.jsx(e.icon,{className:`w-8 h-8 ${e.color}`})}),i.jsxs("div",{className:"flex-1 bg-gray-900/60 backdrop-blur-sm p-5 rounded-2xl border border-white/5 shadow-lg group-hover:border-emerald-500/30 transition-all group-hover:-translate-x-2",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]})]},t))})]})]})},z7=()=>i.jsxs("div",{className:"py-12 px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-900/30 rounded-xl flex items-center justify-center mb-4 text-emerald-400 group-hover:scale-110 transition-transform",children:i.jsx(z2,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-l from-blue-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-xl flex items-center justify-center mb-4 text-blue-400 group-hover:scale-110 transition-transform",children:i.jsx(fx,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-colors"})]}),i.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group text-center md:text-right flex flex-col md:flex-row items-center gap-6",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-400 shrink-0 border border-yellow-500/20 shadow-lg shadow-yellow-900/20 animate-pulse",children:i.jsx(um,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"          ."})]})]})]})]}),U7=()=>{const[r,e]=M.useState(null),t=[{q:"   ",a:"        ."},{q:"    ",a:'   "  "       .'},{q:"    ",a:'!     "Mobile First"     .'},{q:"  ",a:"           100%."}];return i.jsxs("div",{className:"py-12 px-4 mb-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsx("div",{className:"max-w-2xl mx-auto space-y-3",children:t.map((s,l)=>i.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden transition-all duration-300",children:[i.jsxs("button",{onClick:()=>e(r===l?null:l),className:"w-full p-5 flex items-center justify-between text-right bg-gray-900 hover:bg-gray-800/50 transition-colors",children:[i.jsxs("span",{className:"font-bold text-white text-sm md:text-base flex items-center gap-3",children:[i.jsx(Or,{className:"w-5 h-5 text-emerald-500"}),s.q]}),i.jsx(Ni,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${r===l?"rotate-180 text-emerald-400":""}`})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${r===l?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:i.jsx("div",{className:"p-5 pt-0 text-gray-400 text-sm leading-relaxed border-t border-gray-800/50",children:s.a})})]},l))}),i.jsx("div",{className:"mt-12 flex justify-center",children:i.jsxs("div",{className:"bg-gray-800/50 px-6 py-3 rounded-full flex items-center gap-3 border border-white/5",children:[i.jsx(cS,{className:"w-5 h-5 text-yellow-500"}),i.jsx("span",{className:"text-gray-300 text-xs font-bold",children:"     "})]})})]})},B7=()=>i.jsxs("div",{className:"relative z-10 w-full bg-gray-950",children:[i.jsx(yp,{}),i.jsx(L7,{}),i.jsx(yp,{}),i.jsx(z7,{}),i.jsx(yp,{}),i.jsx(U7,{})]}),E2=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),j2=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),q7=({onNavigate:r})=>{const[e,t]=M.useState(!1),[s,l]=M.useState(!1),c=window.location.origin,d="   -   ",f=()=>{const N=`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${encodeURIComponent(d)}`;window.open(N,"_blank"),t(!1)},g=()=>{const N=`https://wa.me/?text=${encodeURIComponent(d+" "+c)}`;window.open(N,"_blank"),t(!1)},x=()=>{const N=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;window.open(N,"_blank"),t(!1)},v=()=>{navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)},w=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:d,url:c}),t(!1)}catch(N){console.log("Error sharing",N)}else v()};return i.jsxs("footer",{className:"relative overflow-hidden bg-gradient-to-t from-emerald-950 via-gray-900 to-gray-950 pt-16 pb-10 border-t border-emerald-500/30",children:[i.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-64 bg-emerald-500/5 blur-[120px] pointer-events-none"}),i.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 flex flex-col items-center text-center",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-10 hover:scale-105 transition-transform duration-300 cursor-default",children:[i.jsxs("div",{className:"w-14 h-14 bg-gray-900 rounded-2xl flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.2)] border border-emerald-500/30 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/10 group-hover:bg-emerald-500/20 transition-colors"}),i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-8 h-8 rounded-full object-cover"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-3xl font-black text-white tracking-tight block",children:" "}),i.jsx("span",{className:"text-emerald-500 text-xs font-bold tracking-widest uppercase opacity-80",children:"Educational Platform"})]})]}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("HOME"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("QUIZZES"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Bn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Qn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS_EXPLANATIONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Fo,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("CONTACT_TEACHER"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(wl,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex gap-6 mb-10",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#1877F2] group-hover:border-[#1877F2] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(qo,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#25D366] group-hover:border-[#25D366] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(E2,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#0088cc] group-hover:border-[#0088cc] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(j2,{className:"w-6 h-6"})})})]}),i.jsx("div",{className:"relative mb-10 z-50",children:i.jsxs("button",{onClick:()=>t(!0),className:"group relative flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg hover:shadow-emerald-500/30 hover:-translate-y-1 transition-all active:scale-95",children:[i.jsx(Rf,{className:"w-5 h-5"}),"   "]})}),i.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-emerald-900/50 to-transparent mb-8"}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-400",children:["  ",i.jsx("span",{className:"text-emerald-400",children:"   "})]}),i.jsxs("p",{className:"text-[10px] text-gray-600 font-mono dir-ltr",children:[" ",new Date().getFullYear()," Etqan Platform. All rights reserved."]})]})]}),e&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>t(!1),children:i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 flex flex-col gap-5 animate-fade-in-up relative",onClick:N=>N.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Rf,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Kn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(E2,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(j2,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx(qo,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:w,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(M2,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(P2,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:c}),i.jsxs("button",{onClick:v,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${s?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[s?i.jsx(R2,{className:"w-3.5 h-3.5"}):i.jsx(O2,{className:"w-3.5 h-3.5"}),s?" ":" "]})]})]})})]})},T2=()=>i.jsx("div",{className:"relative w-full h-20 flex items-center justify-center my-6 overflow-hidden pointer-events-none z-20",children:i.jsxs("div",{className:"transform -skew-x-[20deg] flex items-center justify-center w-full max-w-xl opacity-60",children:[i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-transparent via-emerald-500/50 to-emerald-500 rounded-l-full blur-[1px]"}),i.jsxs("div",{className:"relative mx-3 shrink-0",children:[i.jsx("div",{className:"w-3 h-3 bg-gray-950 rounded-full border border-emerald-500/80 shadow-[0_0_15px_rgba(16,185,129,0.6)] flex items-center justify-center relative z-10",children:i.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full animate-pulse"})}),i.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 blur-md rounded-full"})]}),i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-l from-transparent via-emerald-500/50 to-emerald-500 rounded-r-full blur-[1px]"})]})});function F7(){const[r,e]=M.useState("HOME"),[t,s]=M.useState(!1),[l,c]=M.useState(!1),d=M.useRef({}),f=M.useRef(!1),{logout:g}=ur();M.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const w=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]),M.useEffect(()=>{if(f.current){const w=d.current[r]||0;setTimeout(()=>window.scrollTo(0,w),10)}else window.scrollTo(0,0)},[r]);const x=(w,N=!1)=>{if(w===r){w==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:w},"",""),e(w)},v=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},2500)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(Cy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black/90 backdrop-blur-2xl transition-all duration-700 animate-fade-in",children:[i.jsxs("div",{className:"relative scale-150 transform transition-transform duration-700",children:[i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-emerald-500/20 rounded-full blur-[80px] animate-pulse"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-blue-500/10 rounded-full blur-[60px] animate-pulse delay-75"}),i.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_3s_linear_infinite] text-emerald-500/20",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"20 10"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_2s_linear_infinite_reverse] text-emerald-500/60",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60 100",strokeLinecap:"round"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-spin text-blue-500/50",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"32",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"40 40",strokeLinecap:"round"})}),i.jsxs("div",{className:"bg-gray-900 p-4 rounded-full border border-white/10 shadow-2xl relative z-10 animate-bounce-subtle",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-md rounded-full"}),i.jsx(Xu,{className:"w-8 h-8 text-emerald-400 relative z-20"})]})]})]}),i.jsxs("div",{className:"mt-12 text-center space-y-4 animate-slide-up-fade",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 tracking-tight drop-shadow-lg",children:" "}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-emerald-400 text-sm md:text-base font-bold bg-emerald-950/30 px-6 py-2.5 rounded-full border border-emerald-500/20 shadow-lg backdrop-blur-md",children:[i.jsx(gt,{className:"w-4 h-4 animate-spin"}),"    ..."]})]})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(XD,{onLoginClick:()=>s(!0),onNavigate:w=>x(w),onLogoutClick:v}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(ZD,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:w=>x(w)}),i.jsx(t7,{onNavigate:w=>x(w)}),i.jsx(y7,{onLoginClick:()=>s(!0)}),i.jsx(T2,{}),i.jsx(b7,{}),i.jsx(T2,{}),i.jsx(O7,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsx(C7,{}),i.jsx(R7,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(k7,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(I7,{onNavigate:w=>x(w)}),i.jsx(B7,{}),i.jsx(P7,{onNavigate:w=>x(w)})]}),r==="ABOUT_PLATFORM"&&i.jsx(h7,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(D7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(d7,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(i7,{onNavigate:w=>x(w)}),r==="TEACHER_DASHBOARD"&&i.jsx(s7,{}),r==="QUESTION_BANK"&&i.jsx(v7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(j7,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(A7,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(o7,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&i.jsx(f7,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(N7,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx(x7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(M7,{onNavigate:w=>x(w)}),r==="TEACHER_REVIEWS"&&i.jsx(V7,{onNavigate:w=>x(w)})]}),i.jsx(n7,{isOpen:t,onClose:()=>s(!1)}),i.jsx(q7,{onNavigate:w=>x(w)})]})]})}const L5=document.getElementById("root");if(!L5)throw new Error("Could not find root element to mount to");const H7=jT.createRoot(L5);H7.render(i.jsx(A2.StrictMode,{children:i.jsx(YD,{children:i.jsx(F7,{})})}));
