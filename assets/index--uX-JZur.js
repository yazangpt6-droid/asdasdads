(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function iE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wp={exports:{}},Uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function yA(){if(Ab)return Uc;Ab=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Uc.Fragment=e,Uc.jsx=t,Uc.jsxs=t,Uc}var Cb;function xA(){return Cb||(Cb=1,wp.exports=yA()),wp.exports}var o=xA(),Ep={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function vA(){if(Ib)return Oe;Ib=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function ee(O,Q,U){this.props=O,this.context=Q,this.refs=F,this.updater=U||M}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ne(){}ne.prototype=ee.prototype;function K(O,Q,U){this.props=O,this.context=Q,this.refs=F,this.updater=U||M}var ie=K.prototype=new ne;ie.constructor=K,B(ie,ee.prototype),ie.isPureReactComponent=!0;var W=Array.isArray;function z(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(O,Q,U){var te=U.ref;return{$$typeof:n,type:O,key:Q,ref:te!==void 0?te:null,props:U}}function P(O,Q){return I(O.type,Q,O.props)}function j(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function V(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(U){return Q[U]})}var D=/\/+/g;function Ge(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):Q.toString(36)}function $e(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(z,z):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Z(O,Q,U,te,he){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var je=!1;if(O===null)je=!0;else switch(Ne){case"bigint":case"string":case"number":je=!0;break;case"object":switch(O.$$typeof){case n:case e:je=!0;break;case v:return je=O._init,Z(je(O._payload),Q,U,te,he)}}if(je)return he=he(O),je=te===""?"."+Ge(O,0):te,W(he)?(U="",je!=null&&(U=je.replace(D,"$&/")+"/"),Z(he,Q,U,"",function(It){return It})):he!=null&&(j(he)&&(he=P(he,U+(he.key==null||O&&O.key===he.key?"":(""+he.key).replace(D,"$&/")+"/")+je)),Q.push(he)),1;je=0;var at=te===""?".":te+":";if(W(O))for(var Ae=0;Ae<O.length;Ae++)te=O[Ae],Ne=at+Ge(te,Ae),je+=Z(te,Q,U,Ne,he);else if(Ae=S(O),typeof Ae=="function")for(O=Ae.call(O),Ae=0;!(te=O.next()).done;)te=te.value,Ne=at+Ge(te,Ae++),je+=Z(te,Q,U,Ne,he);else if(Ne==="object"){if(typeof O.then=="function")return Z($e(O),Q,U,te,he);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return je}function pe(O,Q,U){if(O==null)return O;var te=[],he=0;return Z(O,te,"","",function(Ne){return Q.call(U,Ne,he++)}),te}function de(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(U){(O._status===0||O._status===-1)&&(O._status=1,O._result=U)},function(U){(O._status===0||O._status===-1)&&(O._status=2,O._result=U)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Pe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Re={map:pe,forEach:function(O,Q,U){pe(O,function(){Q.apply(this,arguments)},U)},count:function(O){var Q=0;return pe(O,function(){Q++}),Q},toArray:function(O){return pe(O,function(Q){return Q})||[]},only:function(O){if(!j(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Oe.Activity=_,Oe.Children=Re,Oe.Component=ee,Oe.Fragment=t,Oe.Profiler=a,Oe.PureComponent=K,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return C.H.useMemoCache(O)}},Oe.cache=function(O){return function(){return O.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(O,Q,U){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var te=B({},O.props),he=O.key;if(Q!=null)for(Ne in Q.key!==void 0&&(he=""+Q.key),Q)!R.call(Q,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Q.ref===void 0||(te[Ne]=Q[Ne]);var Ne=arguments.length-2;if(Ne===1)te.children=U;else if(1<Ne){for(var je=Array(Ne),at=0;at<Ne;at++)je[at]=arguments[at+2];te.children=je}return I(O.type,he,te)},Oe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Oe.createElement=function(O,Q,U){var te,he={},Ne=null;if(Q!=null)for(te in Q.key!==void 0&&(Ne=""+Q.key),Q)R.call(Q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(he[te]=Q[te]);var je=arguments.length-2;if(je===1)he.children=U;else if(1<je){for(var at=Array(je),Ae=0;Ae<je;Ae++)at[Ae]=arguments[Ae+2];he.children=at}if(O&&O.defaultProps)for(te in je=O.defaultProps,je)he[te]===void 0&&(he[te]=je[te]);return I(O,Ne,he)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(O){return{$$typeof:h,render:O}},Oe.isValidElement=j,Oe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:de}},Oe.memo=function(O,Q){return{$$typeof:m,type:O,compare:Q===void 0?null:Q}},Oe.startTransition=function(O){var Q=C.T,U={};C.T=U;try{var te=O(),he=C.S;he!==null&&he(U,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(z,Pe)}catch(Ne){Pe(Ne)}finally{Q!==null&&U.types!==null&&(Q.types=U.types),C.T=Q}},Oe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Oe.use=function(O){return C.H.use(O)},Oe.useActionState=function(O,Q,U){return C.H.useActionState(O,Q,U)},Oe.useCallback=function(O,Q){return C.H.useCallback(O,Q)},Oe.useContext=function(O){return C.H.useContext(O)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(O,Q){return C.H.useDeferredValue(O,Q)},Oe.useEffect=function(O,Q){return C.H.useEffect(O,Q)},Oe.useEffectEvent=function(O){return C.H.useEffectEvent(O)},Oe.useId=function(){return C.H.useId()},Oe.useImperativeHandle=function(O,Q,U){return C.H.useImperativeHandle(O,Q,U)},Oe.useInsertionEffect=function(O,Q){return C.H.useInsertionEffect(O,Q)},Oe.useLayoutEffect=function(O,Q){return C.H.useLayoutEffect(O,Q)},Oe.useMemo=function(O,Q){return C.H.useMemo(O,Q)},Oe.useOptimistic=function(O,Q){return C.H.useOptimistic(O,Q)},Oe.useReducer=function(O,Q,U){return C.H.useReducer(O,Q,U)},Oe.useRef=function(O){return C.H.useRef(O)},Oe.useState=function(O){return C.H.useState(O)},Oe.useSyncExternalStore=function(O,Q,U){return C.H.useSyncExternalStore(O,Q,U)},Oe.useTransition=function(){return C.H.useTransition()},Oe.version="19.2.0",Oe}var Rb;function Fg(){return Rb||(Rb=1,Ep.exports=vA()),Ep.exports}var G=Fg();const aE=iE(G);var Tp={exports:{}},Oc={},Np={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function bA(){return kb||(kb=1,(function(n){function e(Z,pe){var de=Z.length;Z.push(pe);e:for(;0<de;){var Pe=de-1>>>1,Re=Z[Pe];if(0<a(Re,pe))Z[Pe]=pe,Z[de]=Re,de=Pe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var pe=Z[0],de=Z.pop();if(de!==pe){Z[0]=de;e:for(var Pe=0,Re=Z.length,O=Re>>>1;Pe<O;){var Q=2*(Pe+1)-1,U=Z[Q],te=Q+1,he=Z[te];if(0>a(U,de))te<Re&&0>a(he,U)?(Z[Pe]=he,Z[te]=de,Pe=te):(Z[Pe]=U,Z[Q]=de,Pe=Q);else if(te<Re&&0>a(he,de))Z[Pe]=he,Z[te]=de,Pe=te;else break e}}return pe}function a(Z,pe){var de=Z.sortIndex-pe.sortIndex;return de!==0?de:Z.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,_=null,w=3,S=!1,M=!1,B=!1,F=!1,ee=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ie(Z){for(var pe=t(m);pe!==null;){if(pe.callback===null)s(m);else if(pe.startTime<=Z)s(m),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(m)}}function W(Z){if(B=!1,ie(Z),!M)if(t(p)!==null)M=!0,z||(z=!0,V());else{var pe=t(m);pe!==null&&$e(W,pe.startTime-Z)}}var z=!1,C=-1,R=5,I=-1;function P(){return F?!0:!(n.unstable_now()-I<R)}function j(){if(F=!1,z){var Z=n.unstable_now();I=Z;var pe=!0;try{e:{M=!1,B&&(B=!1,ne(C),C=-1),S=!0;var de=w;try{t:{for(ie(Z),_=t(p);_!==null&&!(_.expirationTime>Z&&P());){var Pe=_.callback;if(typeof Pe=="function"){_.callback=null,w=_.priorityLevel;var Re=Pe(_.expirationTime<=Z);if(Z=n.unstable_now(),typeof Re=="function"){_.callback=Re,ie(Z),pe=!0;break t}_===t(p)&&s(p),ie(Z)}else s(p);_=t(p)}if(_!==null)pe=!0;else{var O=t(m);O!==null&&$e(W,O.startTime-Z),pe=!1}}break e}finally{_=null,w=de,S=!1}pe=void 0}}finally{pe?V():z=!1}}}var V;if(typeof K=="function")V=function(){K(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ge=D.port2;D.port1.onmessage=j,V=function(){Ge.postMessage(null)}}else V=function(){ee(j,0)};function $e(Z,pe){C=ee(function(){Z(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var de=w;w=pe;try{return Z()}finally{w=de}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=w;w=Z;try{return pe()}finally{w=de}},n.unstable_scheduleCallback=function(Z,pe,de){var Pe=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Pe+de:Pe):de=Pe,Z){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=de+Re,Z={id:v++,callback:pe,priorityLevel:Z,startTime:de,expirationTime:Re,sortIndex:-1},de>Pe?(Z.sortIndex=de,e(m,Z),t(p)===null&&Z===t(m)&&(B?(ne(C),C=-1):B=!0,$e(W,de-Pe))):(Z.sortIndex=Re,e(p,Z),M||S||(M=!0,z||(z=!0,V()))),Z},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Z){var pe=w;return function(){var de=w;w=pe;try{return Z.apply(this,arguments)}finally{w=de}}}})(Sp)),Sp}var Mb;function _A(){return Mb||(Mb=1,Np.exports=bA()),Np.exports}var Ap={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function wA(){if(Db)return Mn;Db=1;var n=Fg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Mn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},Mn.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},Mn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Mn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Mn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:S}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:w,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Mn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Mn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Mn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Mn.requestFormReset=function(p){s.d.r(p)},Mn.unstable_batchedUpdates=function(p,m){return p(m)},Mn.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},Mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Mn.version="19.2.0",Mn}var Pb;function EA(){if(Pb)return Ap.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ap.exports=wA(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function TA(){if(jb)return Oc;jb=1;var n=_A(),e=Fg(),t=EA();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(s(188))}function m(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var c=r,d=i;;){var x=c.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){c=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===c)return p(x),r;if(b===d)return p(x),i;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=x,d=b;else{for(var T=!1,A=x.child;A;){if(A===c){T=!0,c=x,d=b;break}if(A===d){T=!0,d=x,c=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===c){T=!0,c=b,d=x;break}if(A===d){T=!0,d=b,c=x;break}A=A.sibling}if(!T)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function V(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Ge(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case ee:return"Profiler";case F:return"StrictMode";case W:return"Suspense";case z:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case K:return r.displayName||"Context";case ne:return(r._context.displayName||"Context")+".Consumer";case ie:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return i=r.displayName||null,i!==null?i:Ge(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return Ge(r(i))}catch{}}return null}var $e=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Pe=[],Re=-1;function O(r){return{current:r}}function Q(r){0>Re||(r.current=Pe[Re],Pe[Re]=null,Re--)}function U(r,i){Re++,Pe[Re]=r.current,r.current=i}var te=O(null),he=O(null),Ne=O(null),je=O(null);function at(r,i){switch(U(Ne,i),U(he,r),U(te,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Jv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Jv(i),r=Xv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Q(te),U(te,r)}function Ae(){Q(te),Q(he),Q(Ne)}function It(r){r.memoizedState!==null&&U(je,r);var i=te.current,c=Xv(i,r.type);i!==c&&(U(he,r),U(te,c))}function Ve(r){he.current===r&&(Q(te),Q(he)),je.current===r&&(Q(je),Pc._currentValue=de)}var bt,et;function Zt(r){if(bt===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);bt=i&&i[1]||"",et=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+r+et}var rs=!1;function pn(r,i){if(!r||rs)return"";rs=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(re){var X=re}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(re){X=re}r.call(ce.prototype)}}else{try{throw Error()}catch(re){X=re}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(re){if(re&&X&&typeof re.stack=="string")return[re.stack,X.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var L=T.split(`
`),J=A.split(`
`);for(x=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;x<J.length&&!J[x].includes("DetermineComponentFrameRoot");)x++;if(d===L.length||x===J.length)for(d=L.length-1,x=J.length-1;1<=d&&0<=x&&L[d]!==J[x];)x--;for(;1<=d&&0<=x;d--,x--)if(L[d]!==J[x]){if(d!==1||x!==1)do if(d--,x--,0>x||L[d]!==J[x]){var ae=`
`+L[d].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=d&&0<=x);break}}}finally{rs=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Zt(c):""}function er(r,i){switch(r.tag){case 26:case 27:case 5:return Zt(r.type);case 16:return Zt("Lazy");case 13:return r.child!==i&&i!==null?Zt("Suspense Fallback"):Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 15:return pn(r.type,!1);case 11:return pn(r.type.render,!1);case 1:return pn(r.type,!0);case 31:return Zt("Activity");default:return""}}function Rr(r){try{var i="",c=null;do i+=er(r,c),c=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var pt=Object.prototype.hasOwnProperty,Pt=n.unstable_scheduleCallback,ys=n.unstable_cancelCallback,yi=n.unstable_shouldYield,xi=n.unstable_requestPaint,Ft=n.unstable_now,xs=n.unstable_getCurrentPriorityLevel,zn=n.unstable_ImmediatePriority,kr=n.unstable_UserBlockingPriority,is=n.unstable_NormalPriority,fe=n.unstable_LowPriority,He=n.unstable_IdlePriority,nt=n.log,en=n.unstable_setDisableYieldValue,jt=null,Nt=null;function Yt(r){if(typeof nt=="function"&&en(r),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(jt,r)}catch{}}var ut=Math.clz32?Math.clz32:kn,vi=Math.log,hn=Math.LN2;function kn(r){return r>>>=0,r===0?32:31-(vi(r)/hn|0)|0}var gn=256,me=262144,_e=4194304;function Se(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xe(r,i,c){var d=r.pendingLanes;if(d===0)return 0;var x=0,b=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var A=d&134217727;return A!==0?(d=A&~b,d!==0?x=Se(d):(T&=A,T!==0?x=Se(T):c||(c=A&~r,c!==0&&(x=Se(c))))):(A=d&~b,A!==0?x=Se(A):T!==0?x=Se(T):c||(c=d&~r,c!==0&&(x=Se(c)))),x===0?0:i!==0&&i!==x&&(i&b)===0&&(b=x&-x,c=i&-i,b>=c||b===32&&(c&4194048)!==0)?i:x}function Ue(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function rt(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var r=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),r}function dt(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function ht(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ot(r,i,c,d,x,b){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,L=r.expirationTimes,J=r.hiddenUpdates;for(c=T&~c;0<c;){var ae=31-ut(c),ce=1<<ae;A[ae]=0,L[ae]=-1;var X=J[ae];if(X!==null)for(J[ae]=null,ae=0;ae<X.length;ae++){var re=X[ae];re!==null&&(re.lane&=-536870913)}c&=~ce}d!==0&&yn(r,d,0),b!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=b&~(T&~i))}function yn(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-ut(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|c&261930}function _a(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var d=31-ut(c),x=1<<d;x&i|r[d]&i&&(r[d]|=i),c&=~x}}function ql(r,i){var c=i&-i;return c=(c&42)!==0?1:wa(c),(c&(r.suspendedLanes|i))!==0?0:c}function wa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Nu(){var r=pe.p;return r!==0?r:(r=window.event,r===void 0?32:bb(r.type))}function Ls(r,i){var c=pe.p;try{return pe.p=r,i()}finally{pe.p=c}}var Vs=Math.random().toString(36).slice(2),tn="__reactFiber$"+Vs,xn="__reactProps$"+Vs,tr="__reactContainer$"+Vs,go="__reactEvents$"+Vs,Cf="__reactListeners$"+Vs,Su="__reactHandles$"+Vs,Au="__reactResources$"+Vs,nr="__reactMarker$"+Vs;function yo(r){delete r[tn],delete r[xn],delete r[go],delete r[Cf],delete r[Su]}function sr(r){var i=r[tn];if(i)return i;for(var c=r.parentNode;c;){if(i=c[tr]||c[tn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=rb(r);r!==null;){if(c=r[tn])return c;r=rb(r)}return i}r=c,c=r.parentNode}return null}function vs(r){if(r=r[tn]||r[tr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function as(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function rr(r){var i=r[Au];return i||(i=r[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function nn(r){r[nr]=!0}var zl=new Set,Fl={};function ir(r,i){ar(r,i),ar(r+"Capture",i)}function ar(r,i){for(Fl[r]=i,r=0;r<i.length;r++)zl.add(i[r])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},Hl={};function Cu(r){return pt.call(Hl,r)?!0:pt.call(Bl,r)?!1:Gl.test(r)?Hl[r]=!0:(Bl[r]=!0,!1)}function xo(r,i,c){if(Cu(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function os(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function sn(r,i,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+d)}}function vn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $l(r,i,c){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return x.call(this)},set:function(T){c=""+T,b.call(this,T)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function yt(r){if(!r._valueTracker){var i=bi(r)?"checked":"value";r._valueTracker=$l(r,i,""+r[i])}}function Ea(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return r&&(d=bi(r)?r.checked?"true":"false":r.value),r=d,r!==c?(i.setValue(r),!0):!1}function or(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ta=/[\n"\\]/g;function $n(r){return r.replace(Ta,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vo(r,i,c,d,x,b,T,A){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),i!=null?T==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+vn(i)):r.value!==""+vn(i)&&(r.value=""+vn(i)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),i!=null?Kl(r,T,vn(i)):c!=null?Kl(r,T,vn(c)):d!=null&&r.removeAttribute("value"),x==null&&b!=null&&(r.defaultChecked=!!b),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+vn(A):r.removeAttribute("name")}function Iu(r,i,c,d,x,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),i!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){yt(r);return}c=c!=null?""+vn(c):"",i=i!=null?""+vn(i):c,A||i===r.value||(r.value=i),r.defaultValue=i}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=A?r.checked:!!d,r.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),yt(r)}function Kl(r,i,c){i==="number"&&or(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function _i(r,i,c,d){if(r=r.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=i.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&d&&(r[c].defaultSelected=!0)}else{for(c=""+vn(c),i=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,d&&(r[x].defaultSelected=!0);return}i!==null||r[x].disabled||(i=r[x])}i!==null&&(i.selected=!0)}}function Ru(r,i,c){if(i!=null&&(i=""+vn(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+vn(c):""}function wi(r,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(s(92));if($e(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=vn(i),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d),yt(r)}function Kn(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(r,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,c):typeof c!="number"||c===0||ku.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function Ql(r,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var x in i)d=i[x],i.hasOwnProperty(x)&&c[x]!==d&&Yl(r,x,d)}else for(var b in i)i.hasOwnProperty(b)&&Yl(r,b,i[b])}function bo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(r){return Ei.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Us(){}var Jl=null;function bs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ti=null,lr=null;function Na(r){var i=vs(r);if(i&&(r=i.stateNode)){var c=r[xn]||null;e:switch(r=i.stateNode,i.type){case"input":if(vo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+$n(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==r&&d.form===r.form){var x=d[xn]||null;if(!x)throw Error(s(90));vo(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===r.form&&Ea(d)}break e;case"textarea":Ru(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&_i(r,!!c.multiple,i,!1)}}}var wo=!1;function Ni(r,i,c){if(wo)return r(i,c);wo=!0;try{var d=r(i);return d}finally{if(wo=!1,(Ti!==null||lr!==null)&&(Nd(),Ti&&(i=Ti,r=lr,lr=Ti=null,Na(i),r)))for(i=0;i<r.length;i++)Na(r[i])}}function Os(r,i){var c=r.stateNode;if(c===null)return null;var d=c[xn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(_s)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Sa=!1}var cr=null,Xl=null,Aa=null;function Wl(){if(Aa)return Aa;var r,i=Xl,c=i.length,d,x="value"in cr?cr.value:cr.textContent,b=x.length;for(r=0;r<c&&i[r]===x[r];r++);var T=c-r;for(d=1;d<=T&&i[c-d]===x[b-d];d++);return Aa=x.slice(r,1<d?1-d:void 0)}function Ca(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Dr(){return!0}function qs(){return!1}function En(r){function i(c,d,x,b,T){this._reactName=c,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Dr:qs,this.isPropagationStopped=qs,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),i}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=En(Pr),Si=_({},Pr,{view:0,detail:0}),Zl=En(Si),Ai,Eo,dr,To=_({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==dr&&(dr&&r.type==="mousemove"?(Ai=r.screenX-dr.screenX,Eo=r.screenY-dr.screenY):Eo=Ai=0,dr=r),Ai)},movementY:function(r){return"movementY"in r?r.movementY:Eo}}),ec=En(To),Ia=_({},To,{dataTransfer:0}),Du=En(Ia),Pu=_({},Si,{relatedTarget:0}),Ra=En(Pu),tc=_({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=En(tc),No=_({},Pr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Lu=En(No),Vu=_({},Pr,{data:0}),hr=En(Vu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=qu[r])?!!i[r]:!1}function Ci(){return zu}var Fn=_({},Si,{key:function(r){if(r.key){var i=Uu[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ca(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ou[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(r){return r.type==="keypress"?Ca(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ca(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fu=En(Fn),Gu=_({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=En(Gu),y=_({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),E=En(y),N=_({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=En(N),$=_({},To,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),se=En($),ye=_({},Pr,{newState:0,oldState:0}),ze=En(ye),Qt=[9,13,27,32],ft=_s&&"CompositionEvent"in window,Lt=null;_s&&"documentMode"in document&&(Lt=document.documentMode);var ws=_s&&"TextEvent"in window&&!Lt,fr=_s&&(!ft||Lt&&8<Lt&&11>=Lt),zs=" ",Fs=!1;function ka(r,i){switch(r){case"keyup":return Qt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ao=!1;function z2(r,i){switch(r){case"compositionend":return So(i);case"keypress":return i.which!==32?null:(Fs=!0,zs);case"textInput":return r=i.data,r===zs&&Fs?null:r;default:return null}}function F2(r,i){if(Ao)return r==="compositionend"||!ft&&ka(r,i)?(r=Wl(),Aa=Xl=cr=null,Ao=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fr&&i.locale!=="ko"?null:i.data;default:return null}}var G2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!G2[r.type]:i==="textarea"}function ly(r,i,c,d){Ti?lr?lr.push(d):lr=[d]:Ti=d,i=Md(i,"onChange"),0<i.length&&(c=new ur("onChange","change",null,c,d),r.push({event:c,listeners:i}))}var nc=null,sc=null;function B2(r){Bv(r,0)}function Bu(r){var i=as(r);if(Ea(i))return r}function cy(r,i){if(r==="change")return i}var uy=!1;if(_s){var If;if(_s){var Rf="oninput"in document;if(!Rf){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),Rf=typeof dy.oninput=="function"}If=Rf}else If=!1;uy=If&&(!document.documentMode||9<document.documentMode)}function hy(){nc&&(nc.detachEvent("onpropertychange",fy),sc=nc=null)}function fy(r){if(r.propertyName==="value"&&Bu(sc)){var i=[];ly(i,sc,r,bs(r)),Ni(B2,i)}}function H2(r,i,c){r==="focusin"?(hy(),nc=i,sc=c,nc.attachEvent("onpropertychange",fy)):r==="focusout"&&hy()}function $2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bu(sc)}function K2(r,i){if(r==="click")return Bu(i)}function Y2(r,i){if(r==="input"||r==="change")return Bu(i)}function Q2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var ls=typeof Object.is=="function"?Object.is:Q2;function rc(r,i){if(ls(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var x=c[d];if(!pt.call(i,x)||!ls(r[x],i[x]))return!1}return!0}function my(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function py(r,i){var c=my(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=i&&d>=i)return{node:c,offset:i-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=my(c)}}function gy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?gy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function yy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=or(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=or(r.document)}return i}function kf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var J2=_s&&"documentMode"in document&&11>=document.documentMode,Co=null,Mf=null,ic=null,Df=!1;function xy(r,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Df||Co==null||Co!==or(d)||(d=Co,"selectionStart"in d&&kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ic&&rc(ic,d)||(ic=d,d=Md(Mf,"onSelect"),0<d.length&&(i=new ur("onSelect","select",null,i,c),r.push({event:i,listeners:d}),i.target=Co)))}function Ma(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var Io={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},Pf={},vy={};_s&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Da(r){if(Pf[r])return Pf[r];if(!Io[r])return r;var i=Io[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in vy)return Pf[r]=i[c];return r}var by=Da("animationend"),_y=Da("animationiteration"),wy=Da("animationstart"),X2=Da("transitionrun"),W2=Da("transitionstart"),Z2=Da("transitioncancel"),Ey=Da("transitionend"),Ty=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function Gs(r,i){Ty.set(r,i),ir(i,[r])}var Hu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Es=[],Ro=0,Lf=0;function $u(){for(var r=Ro,i=Lf=Ro=0;i<r;){var c=Es[i];Es[i++]=null;var d=Es[i];Es[i++]=null;var x=Es[i];Es[i++]=null;var b=Es[i];if(Es[i++]=null,d!==null&&x!==null){var T=d.pending;T===null?x.next=x:(x.next=T.next,T.next=x),d.pending=x}b!==0&&Ny(c,x,b)}}function Ku(r,i,c,d){Es[Ro++]=r,Es[Ro++]=i,Es[Ro++]=c,Es[Ro++]=d,Lf|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Vf(r,i,c,d){return Ku(r,i,c,d),Yu(r)}function Pa(r,i){return Ku(r,null,null,i),Yu(r)}function Ny(r,i,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var x=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(x=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,x&&i!==null&&(x=31-ut(c),r=b.hiddenUpdates,d=r[x],d===null?r[x]=[i]:d.push(i),i.lane=c|536870912),b):null}function Yu(r){if(50<Ac)throw Ac=0,$m=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ko={};function eS(r,i,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(r,i,c,d){return new eS(r,i,c,d)}function Uf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Lr(r,i){var c=r.alternate;return c===null?(c=cs(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Sy(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Qu(r,i,c,d,x,b){var T=0;if(d=r,typeof r=="function")Uf(r)&&(T=1);else if(typeof r=="string")T=iA(r,c,te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=cs(31,c,i,x),r.elementType=I,r.lanes=b,r;case B:return ja(c.children,x,b,i);case F:T=8,x|=24;break;case ee:return r=cs(12,c,i,x|2),r.elementType=ee,r.lanes=b,r;case W:return r=cs(13,c,i,x),r.elementType=W,r.lanes=b,r;case z:return r=cs(19,c,i,x),r.elementType=z,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:T=10;break e;case ne:T=9;break e;case ie:T=11;break e;case C:T=14;break e;case R:T=16,d=null;break e}T=29,c=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=cs(T,c,i,x),i.elementType=r,i.type=d,i.lanes=b,i}function ja(r,i,c,d){return r=cs(7,r,d,i),r.lanes=c,r}function Of(r,i,c){return r=cs(6,r,null,i),r.lanes=c,r}function Ay(r){var i=cs(18,null,null,0);return i.stateNode=r,i}function qf(r,i,c){return i=cs(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Cy=new WeakMap;function Ts(r,i){if(typeof r=="object"&&r!==null){var c=Cy.get(r);return c!==void 0?c:(i={value:r,source:i,stack:Rr(i)},Cy.set(r,i),i)}return{value:r,source:i,stack:Rr(i)}}var Mo=[],Do=0,Ju=null,ac=0,Ns=[],Ss=0,Ii=null,mr=1,pr="";function Vr(r,i){Mo[Do++]=ac,Mo[Do++]=Ju,Ju=r,ac=i}function Iy(r,i,c){Ns[Ss++]=mr,Ns[Ss++]=pr,Ns[Ss++]=Ii,Ii=r;var d=mr;r=pr;var x=32-ut(d)-1;d&=~(1<<x),c+=1;var b=32-ut(i)+x;if(30<b){var T=x-x%5;b=(d&(1<<T)-1).toString(32),d>>=T,x-=T,mr=1<<32-ut(i)+x|c<<x|d,pr=b+r}else mr=1<<b|c<<x|d,pr=r}function zf(r){r.return!==null&&(Vr(r,1),Iy(r,1,0))}function Ff(r){for(;r===Ju;)Ju=Mo[--Do],Mo[Do]=null,ac=Mo[--Do],Mo[Do]=null;for(;r===Ii;)Ii=Ns[--Ss],Ns[Ss]=null,pr=Ns[--Ss],Ns[Ss]=null,mr=Ns[--Ss],Ns[Ss]=null}function Ry(r,i){Ns[Ss++]=mr,Ns[Ss++]=pr,Ns[Ss++]=Ii,mr=i.id,pr=i.overflow,Ii=r}var Tn=null,Rt=null,tt=!1,Ri=null,As=!1,Gf=Error(s(519));function ki(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(Ts(i,r)),Gf}function ky(r){var i=r.stateNode,c=r.type,d=r.memoizedProps;switch(i[tn]=r,i[xn]=d,c){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(c=0;c<Ic.length;c++)Ye(Ic[c],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),Iu(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),wi(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||Yv(i.textContent,c)?(d.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),d.onScroll!=null&&Ye("scroll",i),d.onScrollEnd!=null&&Ye("scrollend",i),d.onClick!=null&&(i.onclick=Us),i=!0):i=!1,i||ki(r,!0)}function My(r){for(Tn=r.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Tn=Tn.return}}function Po(r){if(r!==Tn)return!1;if(!tt)return My(r),tt=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||op(r.type,r.memoizedProps)),c=!c),c&&Rt&&ki(r),My(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Rt=sb(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Rt=sb(r)}else i===27?(i=Rt,Hi(r.type)?(r=hp,hp=null,Rt=r):Rt=i):Rt=Tn?Is(r.stateNode.nextSibling):null;return!0}function La(){Rt=Tn=null,tt=!1}function Bf(){var r=Ri;return r!==null&&(Xn===null?Xn=r:Xn.push.apply(Xn,r),Ri=null),r}function oc(r){Ri===null?Ri=[r]:Ri.push(r)}var Hf=O(null),Va=null,Ur=null;function Mi(r,i,c){U(Hf,i._currentValue),i._currentValue=c}function Or(r){r._currentValue=Hf.current,Q(Hf)}function $f(r,i,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===c)break;r=r.return}}function Kf(r,i,c,d){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var b=x.dependencies;if(b!==null){var T=x.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=x;for(var L=0;L<i.length;L++)if(A.context===i[L]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),$f(b.return,c,r),d||(T=null);break e}b=A.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(s(341));T.lanes|=c,b=T.alternate,b!==null&&(b.lanes|=c),$f(T,c,r),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===r){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function jo(r,i,c,d){r=null;for(var x=i,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=x.type;ls(x.pendingProps.value,T.value)||(r!==null?r.push(A):r=[A])}}else if(x===je.current){if(T=x.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(Pc):r=[Pc])}x=x.return}r!==null&&Kf(i,r,c,d),i.flags|=262144}function Xu(r){for(r=r.firstContext;r!==null;){if(!ls(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ua(r){Va=r,Ur=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Nn(r){return Dy(Va,r)}function Wu(r,i){return Va===null&&Ua(r),Dy(r,i)}function Dy(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Ur===null){if(r===null)throw Error(s(308));Ur=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Ur=Ur.next=i;return c}var tS=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},nS=n.unstable_scheduleCallback,sS=n.unstable_NormalPriority,rn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new tS,data:new Map,refCount:0}}function lc(r){r.refCount--,r.refCount===0&&nS(sS,function(){r.controller.abort()})}var cc=null,Qf=0,Lo=0,Vo=null;function rS(r,i){if(cc===null){var c=cc=[];Qf=0,Lo=Wm(),Vo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Qf++,i.then(Py,Py),i}function Py(){if(--Qf===0&&cc!==null){Vo!==null&&(Vo.status="fulfilled");var r=cc;cc=null,Lo=0,Vo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function iS(r,i){var c=[],d={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var x=0;x<c.length;x++)(0,c[x])(i)},function(x){for(d.status="rejected",d.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),d}var jy=Z.S;Z.S=function(r,i){xv=Ft(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&rS(r,i),jy!==null&&jy(r,i)};var Oa=O(null);function Jf(){var r=Oa.current;return r!==null?r:At.pooledCache}function Zu(r,i){i===null?U(Oa,Oa.current):U(Oa,i.pool)}function Ly(){var r=Jf();return r===null?null:{parent:rn._currentValue,pool:r}}var Uo=Error(s(460)),Xf=Error(s(474)),ed=Error(s(542)),td={then:function(){}};function Vy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Uy(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(Us,Us),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,qy(r),r;default:if(typeof i.status=="string")i.then(Us,Us);else{if(r=At,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var x=i;x.status="fulfilled",x.value=d}},function(d){if(i.status==="pending"){var x=i;x.status="rejected",x.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,qy(r),r}throw za=i,Uo}}function qa(r){try{var i=r._init;return i(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(za=c,Uo):c}}var za=null;function Oy(){if(za===null)throw Error(s(459));var r=za;return za=null,r}function qy(r){if(r===Uo||r===ed)throw Error(s(483))}var Oo=null,uc=0;function nd(r){var i=uc;return uc+=1,Oo===null&&(Oo=[]),Uy(Oo,r,i)}function dc(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function sd(r,i){throw i.$$typeof===w?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function zy(r){function i(H,q){if(r){var Y=H.deletions;Y===null?(H.deletions=[q],H.flags|=16):Y.push(q)}}function c(H,q){if(!r)return null;for(;q!==null;)i(H,q),q=q.sibling;return null}function d(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function x(H,q){return H=Lr(H,q),H.index=0,H.sibling=null,H}function b(H,q,Y){return H.index=Y,r?(Y=H.alternate,Y!==null?(Y=Y.index,Y<q?(H.flags|=67108866,q):Y):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function T(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function A(H,q,Y,oe){return q===null||q.tag!==6?(q=Of(Y,H.mode,oe),q.return=H,q):(q=x(q,Y),q.return=H,q)}function L(H,q,Y,oe){var Ce=Y.type;return Ce===B?ae(H,q,Y.props.children,oe,Y.key):q!==null&&(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&qa(Ce)===q.type)?(q=x(q,Y.props),dc(q,Y),q.return=H,q):(q=Qu(Y.type,Y.key,Y.props,null,H.mode,oe),dc(q,Y),q.return=H,q)}function J(H,q,Y,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=qf(Y,H.mode,oe),q.return=H,q):(q=x(q,Y.children||[]),q.return=H,q)}function ae(H,q,Y,oe,Ce){return q===null||q.tag!==7?(q=ja(Y,H.mode,oe,Ce),q.return=H,q):(q=x(q,Y),q.return=H,q)}function ce(H,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Of(""+q,H.mode,Y),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return Y=Qu(q.type,q.key,q.props,null,H.mode,Y),dc(Y,q),Y.return=H,Y;case M:return q=qf(q,H.mode,Y),q.return=H,q;case R:return q=qa(q),ce(H,q,Y)}if($e(q)||V(q))return q=ja(q,H.mode,Y,null),q.return=H,q;if(typeof q.then=="function")return ce(H,nd(q),Y);if(q.$$typeof===K)return ce(H,Wu(H,q),Y);sd(H,q)}return null}function X(H,q,Y,oe){var Ce=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:A(H,q,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===Ce?L(H,q,Y,oe):null;case M:return Y.key===Ce?J(H,q,Y,oe):null;case R:return Y=qa(Y),X(H,q,Y,oe)}if($e(Y)||V(Y))return Ce!==null?null:ae(H,q,Y,oe,null);if(typeof Y.then=="function")return X(H,q,nd(Y),oe);if(Y.$$typeof===K)return X(H,q,Wu(H,Y),oe);sd(H,Y)}return null}function re(H,q,Y,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(Y)||null,A(q,H,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return H=H.get(oe.key===null?Y:oe.key)||null,L(q,H,oe,Ce);case M:return H=H.get(oe.key===null?Y:oe.key)||null,J(q,H,oe,Ce);case R:return oe=qa(oe),re(H,q,Y,oe,Ce)}if($e(oe)||V(oe))return H=H.get(Y)||null,ae(q,H,oe,Ce,null);if(typeof oe.then=="function")return re(H,q,Y,nd(oe),Ce);if(oe.$$typeof===K)return re(H,q,Y,Wu(q,oe),Ce);sd(q,oe)}return null}function Ee(H,q,Y,oe){for(var Ce=null,ot=null,Te=q,Be=q=0,Je=null;Te!==null&&Be<Y.length;Be++){Te.index>Be?(Je=Te,Te=null):Je=Te.sibling;var lt=X(H,Te,Y[Be],oe);if(lt===null){Te===null&&(Te=Je);break}r&&Te&&lt.alternate===null&&i(H,Te),q=b(lt,q,Be),ot===null?Ce=lt:ot.sibling=lt,ot=lt,Te=Je}if(Be===Y.length)return c(H,Te),tt&&Vr(H,Be),Ce;if(Te===null){for(;Be<Y.length;Be++)Te=ce(H,Y[Be],oe),Te!==null&&(q=b(Te,q,Be),ot===null?Ce=Te:ot.sibling=Te,ot=Te);return tt&&Vr(H,Be),Ce}for(Te=d(Te);Be<Y.length;Be++)Je=re(Te,H,Be,Y[Be],oe),Je!==null&&(r&&Je.alternate!==null&&Te.delete(Je.key===null?Be:Je.key),q=b(Je,q,Be),ot===null?Ce=Je:ot.sibling=Je,ot=Je);return r&&Te.forEach(function(Ji){return i(H,Ji)}),tt&&Vr(H,Be),Ce}function ke(H,q,Y,oe){if(Y==null)throw Error(s(151));for(var Ce=null,ot=null,Te=q,Be=q=0,Je=null,lt=Y.next();Te!==null&&!lt.done;Be++,lt=Y.next()){Te.index>Be?(Je=Te,Te=null):Je=Te.sibling;var Ji=X(H,Te,lt.value,oe);if(Ji===null){Te===null&&(Te=Je);break}r&&Te&&Ji.alternate===null&&i(H,Te),q=b(Ji,q,Be),ot===null?Ce=Ji:ot.sibling=Ji,ot=Ji,Te=Je}if(lt.done)return c(H,Te),tt&&Vr(H,Be),Ce;if(Te===null){for(;!lt.done;Be++,lt=Y.next())lt=ce(H,lt.value,oe),lt!==null&&(q=b(lt,q,Be),ot===null?Ce=lt:ot.sibling=lt,ot=lt);return tt&&Vr(H,Be),Ce}for(Te=d(Te);!lt.done;Be++,lt=Y.next())lt=re(Te,H,Be,lt.value,oe),lt!==null&&(r&&lt.alternate!==null&&Te.delete(lt.key===null?Be:lt.key),q=b(lt,q,Be),ot===null?Ce=lt:ot.sibling=lt,ot=lt);return r&&Te.forEach(function(gA){return i(H,gA)}),tt&&Vr(H,Be),Ce}function Tt(H,q,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var Ce=Y.key;q!==null;){if(q.key===Ce){if(Ce=Y.type,Ce===B){if(q.tag===7){c(H,q.sibling),oe=x(q,Y.props.children),oe.return=H,H=oe;break e}}else if(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&qa(Ce)===q.type){c(H,q.sibling),oe=x(q,Y.props),dc(oe,Y),oe.return=H,H=oe;break e}c(H,q);break}else i(H,q);q=q.sibling}Y.type===B?(oe=ja(Y.props.children,H.mode,oe,Y.key),oe.return=H,H=oe):(oe=Qu(Y.type,Y.key,Y.props,null,H.mode,oe),dc(oe,Y),oe.return=H,H=oe)}return T(H);case M:e:{for(Ce=Y.key;q!==null;){if(q.key===Ce)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){c(H,q.sibling),oe=x(q,Y.children||[]),oe.return=H,H=oe;break e}else{c(H,q);break}else i(H,q);q=q.sibling}oe=qf(Y,H.mode,oe),oe.return=H,H=oe}return T(H);case R:return Y=qa(Y),Tt(H,q,Y,oe)}if($e(Y))return Ee(H,q,Y,oe);if(V(Y)){if(Ce=V(Y),typeof Ce!="function")throw Error(s(150));return Y=Ce.call(Y),ke(H,q,Y,oe)}if(typeof Y.then=="function")return Tt(H,q,nd(Y),oe);if(Y.$$typeof===K)return Tt(H,q,Wu(H,Y),oe);sd(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(c(H,q.sibling),oe=x(q,Y),oe.return=H,H=oe):(c(H,q),oe=Of(Y,H.mode,oe),oe.return=H,H=oe),T(H)):c(H,q)}return function(H,q,Y,oe){try{uc=0;var Ce=Tt(H,q,Y,oe);return Oo=null,Ce}catch(Te){if(Te===Uo||Te===ed)throw Te;var ot=cs(29,Te,null,H.mode);return ot.lanes=oe,ot.return=H,ot}finally{}}}var Fa=zy(!0),Fy=zy(!1),Di=!1;function Wf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Pi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ji(r,i,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(mt&2)!==0){var x=d.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),d.pending=i,i=Yu(r),Ny(r,null,c),i}return Ku(r,d,i,c),Yu(r)}function hc(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,_a(r,c)}}function em(r,i){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var x=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?x=b=T:b=b.next=T,c=c.next}while(c!==null);b===null?x=b=i:b=b.next=i}else x=b=i;c={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var tm=!1;function fc(){if(tm){var r=Vo;if(r!==null)throw r}}function mc(r,i,c,d){tm=!1;var x=r.updateQueue;Di=!1;var b=x.firstBaseUpdate,T=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,J=L.next;L.next=null,T===null?b=J:T.next=J,T=L;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==T&&(A===null?ae.firstBaseUpdate=J:A.next=J,ae.lastBaseUpdate=L))}if(b!==null){var ce=x.baseState;T=0,ae=J=L=null,A=b;do{var X=A.lane&-536870913,re=X!==A.lane;if(re?(Qe&X)===X:(d&X)===X){X!==0&&X===Lo&&(tm=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ee=r,ke=A;X=i;var Tt=c;switch(ke.tag){case 1:if(Ee=ke.payload,typeof Ee=="function"){ce=Ee.call(Tt,ce,X);break e}ce=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=ke.payload,X=typeof Ee=="function"?Ee.call(Tt,ce,X):Ee,X==null)break e;ce=_({},ce,X);break e;case 2:Di=!0}}X=A.callback,X!==null&&(r.flags|=64,re&&(r.flags|=8192),re=x.callbacks,re===null?x.callbacks=[X]:re.push(X))}else re={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(J=ae=re,L=ce):ae=ae.next=re,T|=X;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;re=A,A=re.next,re.next=null,x.lastBaseUpdate=re,x.shared.pending=null}}while(!0);ae===null&&(L=ce),x.baseState=L,x.firstBaseUpdate=J,x.lastBaseUpdate=ae,b===null&&(x.shared.lanes=0),qi|=T,r.lanes=T,r.memoizedState=ce}}function Gy(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function By(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Gy(c[r],i)}var qo=O(null),rd=O(0);function Hy(r,i){r=Yr,U(rd,r),U(qo,i),Yr=r|i.baseLanes}function nm(){U(rd,Yr),U(qo,qo.current)}function sm(){Yr=rd.current,Q(qo),Q(rd)}var us=O(null),Cs=null;function Li(r){var i=r.alternate;U(Jt,Jt.current&1),U(us,r),Cs===null&&(i===null||qo.current!==null||i.memoizedState!==null)&&(Cs=r)}function rm(r){U(Jt,Jt.current),U(us,r),Cs===null&&(Cs=r)}function $y(r){r.tag===22?(U(Jt,Jt.current),U(us,r),Cs===null&&(Cs=r)):Vi()}function Vi(){U(Jt,Jt.current),U(us,us.current)}function ds(r){Q(us),Cs===r&&(Cs=null),Q(Jt)}var Jt=O(0);function id(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||up(c)||dp(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qr=0,Fe=null,wt=null,an=null,ad=!1,zo=!1,Ga=!1,od=0,pc=0,Fo=null,aS=0;function Gt(){throw Error(s(321))}function im(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!ls(r[c],i[c]))return!1;return!0}function am(r,i,c,d,x,b){return qr=b,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=r===null||r.memoizedState===null?Ix:_m,Ga=!1,b=c(d,x),Ga=!1,zo&&(b=Yy(i,c,d,x)),Ky(r),b}function Ky(r){Z.H=xc;var i=wt!==null&&wt.next!==null;if(qr=0,an=wt=Fe=null,ad=!1,pc=0,Fo=null,i)throw Error(s(300));r===null||on||(r=r.dependencies,r!==null&&Xu(r)&&(on=!0))}function Yy(r,i,c,d){Fe=r;var x=0;do{if(zo&&(Fo=null),pc=0,zo=!1,25<=x)throw Error(s(301));if(x+=1,an=wt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}Z.H=Rx,b=i(c,d)}while(zo);return b}function oS(){var r=Z.H,i=r.useState()[0];return i=typeof i.then=="function"?gc(i):i,r=r.useState()[0],(wt!==null?wt.memoizedState:null)!==r&&(Fe.flags|=1024),i}function om(){var r=od!==0;return od=0,r}function lm(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function cm(r){if(ad){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ad=!1}qr=0,an=wt=Fe=null,zo=!1,pc=od=0,Fo=null}function Gn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Fe.memoizedState=an=r:an=an.next=r,an}function Xt(){if(wt===null){var r=Fe.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var i=an===null?Fe.memoizedState:an.next;if(i!==null)an=i,wt=r;else{if(r===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},an===null?Fe.memoizedState=an=r:an=an.next=r}return an}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(r){var i=pc;return pc+=1,Fo===null&&(Fo=[]),r=Uy(Fo,r,i),i=Fe,(an===null?i.memoizedState:an.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?Ix:_m),r}function cd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gc(r);if(r.$$typeof===K)return Nn(r)}throw Error(s(438,String(r)))}function um(r){var i=null,c=Fe.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=Fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(x){return x.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=ld(),Fe.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),d=0;d<r;d++)c[d]=P;return i.index++,c}function zr(r,i){return typeof i=="function"?i(r):i}function ud(r){var i=Xt();return dm(i,wt,r)}function dm(r,i,c){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var x=r.baseQueue,b=d.pending;if(b!==null){if(x!==null){var T=x.next;x.next=b.next,b.next=T}i.baseQueue=x=b,d.pending=null}if(b=r.baseState,x===null)r.memoizedState=b;else{i=x.next;var A=T=null,L=null,J=i,ae=!1;do{var ce=J.lane&-536870913;if(ce!==J.lane?(Qe&ce)===ce:(qr&ce)===ce){var X=J.revertLane;if(X===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ce===Lo&&(ae=!0);else if((qr&X)===X){J=J.next,X===Lo&&(ae=!0);continue}else ce={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=ce,T=b):L=L.next=ce,Fe.lanes|=X,qi|=X;ce=J.action,Ga&&c(b,ce),b=J.hasEagerState?J.eagerState:c(b,ce)}else X={lane:ce,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(A=L=X,T=b):L=L.next=X,Fe.lanes|=ce,qi|=ce;J=J.next}while(J!==null&&J!==i);if(L===null?T=b:L.next=A,!ls(b,r.memoizedState)&&(on=!0,ae&&(c=Vo,c!==null)))throw c;r.memoizedState=b,r.baseState=T,r.baseQueue=L,d.lastRenderedState=b}return x===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function hm(r){var i=Xt(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var d=c.dispatch,x=c.pending,b=i.memoizedState;if(x!==null){c.pending=null;var T=x=x.next;do b=r(b,T.action),T=T.next;while(T!==x);ls(b,i.memoizedState)||(on=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),c.lastRenderedState=b}return[b,d]}function Qy(r,i,c){var d=Fe,x=Xt(),b=tt;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=i();var T=!ls((wt||x).memoizedState,c);if(T&&(x.memoizedState=c,on=!0),x=x.queue,pm(Wy.bind(null,d,x,r),[r]),x.getSnapshot!==i||T||an!==null&&an.memoizedState.tag&1){if(d.flags|=2048,Go(9,{destroy:void 0},Xy.bind(null,d,x,c,i),null),At===null)throw Error(s(349));b||(qr&127)!==0||Jy(d,i,c)}return c}function Jy(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=Fe.updateQueue,i===null?(i=ld(),Fe.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Xy(r,i,c,d){i.value=c,i.getSnapshot=d,Zy(i)&&ex(r)}function Wy(r,i,c){return c(function(){Zy(i)&&ex(r)})}function Zy(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!ls(r,c)}catch{return!0}}function ex(r){var i=Pa(r,2);i!==null&&Wn(i,r,2)}function fm(r){var i=Gn();if(typeof r=="function"){var c=r;if(r=c(),Ga){Yt(!0);try{c()}finally{Yt(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:r},i}function tx(r,i,c,d){return r.baseState=c,dm(r,wt,typeof d=="function"?d:zr)}function lS(r,i,c,d,x){if(fd(r))throw Error(s(485));if(r=i.action,r!==null){var b={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};Z.T!==null?c(!0):b.isTransition=!1,d(b),c=i.pending,c===null?(b.next=i.pending=b,nx(i,b)):(b.next=c.next,i.pending=c.next=b)}}function nx(r,i){var c=i.action,d=i.payload,x=r.state;if(i.isTransition){var b=Z.T,T={};Z.T=T;try{var A=c(x,d),L=Z.S;L!==null&&L(T,A),sx(r,i,A)}catch(J){mm(r,i,J)}finally{b!==null&&T.types!==null&&(b.types=T.types),Z.T=b}}else try{b=c(x,d),sx(r,i,b)}catch(J){mm(r,i,J)}}function sx(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){rx(r,i,d)},function(d){return mm(r,i,d)}):rx(r,i,c)}function rx(r,i,c){i.status="fulfilled",i.value=c,ix(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,nx(r,c)))}function mm(r,i,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,ix(i),i=i.next;while(i!==d)}r.action=null}function ix(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function ax(r,i){return i}function ox(r,i){if(tt){var c=At.formState;if(c!==null){e:{var d=Fe;if(tt){if(Rt){t:{for(var x=Rt,b=As;x.nodeType!==8;){if(!b){x=null;break t}if(x=Is(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){Rt=Is(x.nextSibling),d=x.data==="F!";break e}}ki(d)}d=!1}d&&(i=c[0])}}return c=Gn(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ax,lastRenderedState:i},c.queue=d,c=Sx.bind(null,Fe,d),d.dispatch=c,d=fm(!1),b=bm.bind(null,Fe,!1,d.queue),d=Gn(),x={state:i,dispatch:null,action:r,pending:null},d.queue=x,c=lS.bind(null,Fe,x,b,c),x.dispatch=c,d.memoizedState=r,[i,c,!1]}function lx(r){var i=Xt();return cx(i,wt,r)}function cx(r,i,c){if(i=dm(r,i,ax)[0],r=ud(zr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=gc(i)}catch(T){throw T===Uo?ed:T}else d=i;i=Xt();var x=i.queue,b=x.dispatch;return c!==i.memoizedState&&(Fe.flags|=2048,Go(9,{destroy:void 0},cS.bind(null,x,c),null)),[d,b,r]}function cS(r,i){r.action=i}function ux(r){var i=Xt(),c=wt;if(c!==null)return cx(i,c,r);Xt(),i=i.memoizedState,c=Xt();var d=c.queue.dispatch;return c.memoizedState=r,[i,d,!1]}function Go(r,i,c,d){return r={tag:r,create:c,deps:d,inst:i,next:null},i=Fe.updateQueue,i===null&&(i=ld(),Fe.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,i.lastEffect=r),r}function dx(){return Xt().memoizedState}function dd(r,i,c,d){var x=Gn();Fe.flags|=r,x.memoizedState=Go(1|i,{destroy:void 0},c,d===void 0?null:d)}function hd(r,i,c,d){var x=Xt();d=d===void 0?null:d;var b=x.memoizedState.inst;wt!==null&&d!==null&&im(d,wt.memoizedState.deps)?x.memoizedState=Go(i,b,c,d):(Fe.flags|=r,x.memoizedState=Go(1|i,b,c,d))}function hx(r,i){dd(8390656,8,r,i)}function pm(r,i){hd(2048,8,r,i)}function uS(r){Fe.flags|=4;var i=Fe.updateQueue;if(i===null)i=ld(),Fe.updateQueue=i,i.events=[r];else{var c=i.events;c===null?i.events=[r]:c.push(r)}}function fx(r){var i=Xt().memoizedState;return uS({ref:i,nextImpl:r}),function(){if((mt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function mx(r,i){return hd(4,2,r,i)}function px(r,i){return hd(4,4,r,i)}function gx(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function yx(r,i,c){c=c!=null?c.concat([r]):null,hd(4,4,gx.bind(null,i,r),c)}function gm(){}function xx(r,i){var c=Xt();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&im(i,d[1])?d[0]:(c.memoizedState=[r,i],r)}function vx(r,i){var c=Xt();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&im(i,d[1]))return d[0];if(d=r(),Ga){Yt(!0);try{r()}finally{Yt(!1)}}return c.memoizedState=[d,i],d}function ym(r,i,c){return c===void 0||(qr&1073741824)!==0&&(Qe&261930)===0?r.memoizedState=i:(r.memoizedState=c,r=bv(),Fe.lanes|=r,qi|=r,c)}function bx(r,i,c,d){return ls(c,i)?c:qo.current!==null?(r=ym(r,c,d),ls(r,i)||(on=!0),r):(qr&42)===0||(qr&1073741824)!==0&&(Qe&261930)===0?(on=!0,r.memoizedState=c):(r=bv(),Fe.lanes|=r,qi|=r,i)}function _x(r,i,c,d,x){var b=pe.p;pe.p=b!==0&&8>b?b:8;var T=Z.T,A={};Z.T=A,bm(r,!1,i,c);try{var L=x(),J=Z.S;if(J!==null&&J(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=iS(L,d);yc(r,i,ae,ms(r))}else yc(r,i,d,ms(r))}catch(ce){yc(r,i,{then:function(){},status:"rejected",reason:ce},ms())}finally{pe.p=b,T!==null&&A.types!==null&&(T.types=A.types),Z.T=T}}function dS(){}function xm(r,i,c,d){if(r.tag!==5)throw Error(s(476));var x=wx(r).queue;_x(r,x,i,de,c===null?dS:function(){return Ex(r),c(d)})}function wx(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:de},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Ex(r){var i=wx(r);i.next===null&&(i=r.alternate.memoizedState),yc(r,i.next.queue,{},ms())}function vm(){return Nn(Pc)}function Tx(){return Xt().memoizedState}function Nx(){return Xt().memoizedState}function hS(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=ms();r=Pi(c);var d=ji(i,r,c);d!==null&&(Wn(d,i,c),hc(d,i,c)),i={cache:Yf()},r.payload=i;return}i=i.return}}function fS(r,i,c){var d=ms();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},fd(r)?Ax(i,c):(c=Vf(r,i,c,d),c!==null&&(Wn(c,r,d),Cx(c,i,d)))}function Sx(r,i,c){var d=ms();yc(r,i,c,d)}function yc(r,i,c,d){var x={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(fd(r))Ax(i,x);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var T=i.lastRenderedState,A=b(T,c);if(x.hasEagerState=!0,x.eagerState=A,ls(A,T))return Ku(r,i,x,0),At===null&&$u(),!1}catch{}finally{}if(c=Vf(r,i,x,d),c!==null)return Wn(c,r,d),Cx(c,i,d),!0}return!1}function bm(r,i,c,d){if(d={lane:2,revertLane:Wm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},fd(r)){if(i)throw Error(s(479))}else i=Vf(r,c,d,2),i!==null&&Wn(i,r,2)}function fd(r){var i=r.alternate;return r===Fe||i!==null&&i===Fe}function Ax(r,i){zo=ad=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function Cx(r,i,c){if((c&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,_a(r,c)}}var xc={readContext:Nn,use:cd,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};xc.useEffectEvent=Gt;var Ix={readContext:Nn,use:cd,useCallback:function(r,i){return Gn().memoizedState=[r,i===void 0?null:i],r},useContext:Nn,useEffect:hx,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,dd(4194308,4,gx.bind(null,i,r),c)},useLayoutEffect:function(r,i){return dd(4194308,4,r,i)},useInsertionEffect:function(r,i){dd(4,2,r,i)},useMemo:function(r,i){var c=Gn();i=i===void 0?null:i;var d=r();if(Ga){Yt(!0);try{r()}finally{Yt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(r,i,c){var d=Gn();if(c!==void 0){var x=c(i);if(Ga){Yt(!0);try{c(i)}finally{Yt(!1)}}}else x=i;return d.memoizedState=d.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},d.queue=r,r=r.dispatch=fS.bind(null,Fe,r),[d.memoizedState,r]},useRef:function(r){var i=Gn();return r={current:r},i.memoizedState=r},useState:function(r){r=fm(r);var i=r.queue,c=Sx.bind(null,Fe,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:gm,useDeferredValue:function(r,i){var c=Gn();return ym(c,r,i)},useTransition:function(){var r=fm(!1);return r=_x.bind(null,Fe,r.queue,!0,!1),Gn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var d=Fe,x=Gn();if(tt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),At===null)throw Error(s(349));(Qe&127)!==0||Jy(d,i,c)}x.memoizedState=c;var b={value:c,getSnapshot:i};return x.queue=b,hx(Wy.bind(null,d,b,r),[r]),d.flags|=2048,Go(9,{destroy:void 0},Xy.bind(null,d,b,c,i),null),c},useId:function(){var r=Gn(),i=At.identifierPrefix;if(tt){var c=pr,d=mr;c=(d&~(1<<32-ut(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=od++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=aS++,i="_"+i+"r_"+c.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:vm,useFormState:ox,useActionState:ox,useOptimistic:function(r){var i=Gn();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=bm.bind(null,Fe,!0,c),c.dispatch=i,[r,i]},useMemoCache:um,useCacheRefresh:function(){return Gn().memoizedState=hS.bind(null,Fe)},useEffectEvent:function(r){var i=Gn(),c={impl:r};return i.memoizedState=c,function(){if((mt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},_m={readContext:Nn,use:cd,useCallback:xx,useContext:Nn,useEffect:pm,useImperativeHandle:yx,useInsertionEffect:mx,useLayoutEffect:px,useMemo:vx,useReducer:ud,useRef:dx,useState:function(){return ud(zr)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Xt();return bx(c,wt.memoizedState,r,i)},useTransition:function(){var r=ud(zr)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:gc(r),i]},useSyncExternalStore:Qy,useId:Tx,useHostTransitionStatus:vm,useFormState:lx,useActionState:lx,useOptimistic:function(r,i){var c=Xt();return tx(c,wt,r,i)},useMemoCache:um,useCacheRefresh:Nx};_m.useEffectEvent=fx;var Rx={readContext:Nn,use:cd,useCallback:xx,useContext:Nn,useEffect:pm,useImperativeHandle:yx,useInsertionEffect:mx,useLayoutEffect:px,useMemo:vx,useReducer:hm,useRef:dx,useState:function(){return hm(zr)},useDebugValue:gm,useDeferredValue:function(r,i){var c=Xt();return wt===null?ym(c,r,i):bx(c,wt.memoizedState,r,i)},useTransition:function(){var r=hm(zr)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:gc(r),i]},useSyncExternalStore:Qy,useId:Tx,useHostTransitionStatus:vm,useFormState:ux,useActionState:ux,useOptimistic:function(r,i){var c=Xt();return wt!==null?tx(c,wt,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:um,useCacheRefresh:Nx};Rx.useEffectEvent=fx;function wm(r,i,c,d){i=r.memoizedState,c=c(d,i),c=c==null?i:_({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Em={enqueueSetState:function(r,i,c){r=r._reactInternals;var d=ms(),x=Pi(d);x.payload=i,c!=null&&(x.callback=c),i=ji(r,x,d),i!==null&&(Wn(i,r,d),hc(i,r,d))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var d=ms(),x=Pi(d);x.tag=1,x.payload=i,c!=null&&(x.callback=c),i=ji(r,x,d),i!==null&&(Wn(i,r,d),hc(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=ms(),d=Pi(c);d.tag=2,i!=null&&(d.callback=i),i=ji(r,d,c),i!==null&&(Wn(i,r,c),hc(i,r,c))}};function kx(r,i,c,d,x,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,T):i.prototype&&i.prototype.isPureReactComponent?!rc(c,d)||!rc(x,b):!0}function Mx(r,i,c,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==r&&Em.enqueueReplaceState(i,i.state,null)}function Ba(r,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(r=r.defaultProps){c===i&&(c=_({},c));for(var x in r)c[x]===void 0&&(c[x]=r[x])}return c}function Dx(r){Hu(r)}function Px(r){console.error(r)}function jx(r){Hu(r)}function md(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Lx(r,i,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Tm(r,i,c){return c=Pi(c),c.tag=3,c.payload={element:null},c.callback=function(){md(r,i)},c}function Vx(r){return r=Pi(r),r.tag=3,r}function Ux(r,i,c,d){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;r.payload=function(){return x(b)},r.callback=function(){Lx(i,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){Lx(i,c,d),typeof x!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function mS(r,i,c,d,x){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&jo(i,c,x,!0),c=us.current,c!==null){switch(c.tag){case 31:case 13:return Cs===null?Sd():c.alternate===null&&Bt===0&&(Bt=3),c.flags&=-257,c.flags|=65536,c.lanes=x,d===td?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),Qm(r,d,x)),!1;case 22:return c.flags|=65536,d===td?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),Qm(r,d,x)),!1}throw Error(s(435,c.tag))}return Qm(r,d,x),Sd(),!1}if(tt)return i=us.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=x,d!==Gf&&(r=Error(s(422),{cause:d}),oc(Ts(r,c)))):(d!==Gf&&(i=Error(s(423),{cause:d}),oc(Ts(i,c))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,d=Ts(d,c),x=Tm(r.stateNode,d,x),em(r,x),Bt!==4&&(Bt=2)),!1;var b=Error(s(520),{cause:d});if(b=Ts(b,c),Sc===null?Sc=[b]:Sc.push(b),Bt!==4&&(Bt=2),i===null)return!0;d=Ts(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=x&-x,c.lanes|=r,r=Tm(c.stateNode,d,r),em(c,r),!1;case 1:if(i=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zi===null||!zi.has(b))))return c.flags|=65536,x&=-x,c.lanes|=x,x=Vx(x),Ux(x,r,c,d),em(c,x),!1}c=c.return}while(c!==null);return!1}var Nm=Error(s(461)),on=!1;function Sn(r,i,c,d){i.child=r===null?Fy(i,null,c,d):Fa(i,r.child,c,d)}function Ox(r,i,c,d,x){c=c.render;var b=i.ref;if("ref"in d){var T={};for(var A in d)A!=="ref"&&(T[A]=d[A])}else T=d;return Ua(i),d=am(r,i,c,T,b,x),A=om(),r!==null&&!on?(lm(r,i,x),Fr(r,i,x)):(tt&&A&&zf(i),i.flags|=1,Sn(r,i,d,x),i.child)}function qx(r,i,c,d,x){if(r===null){var b=c.type;return typeof b=="function"&&!Uf(b)&&b.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=b,zx(r,i,b,d,x)):(r=Qu(c.type,null,d,i,i.mode,x),r.ref=i.ref,r.return=i,i.child=r)}if(b=r.child,!Dm(r,x)){var T=b.memoizedProps;if(c=c.compare,c=c!==null?c:rc,c(T,d)&&r.ref===i.ref)return Fr(r,i,x)}return i.flags|=1,r=Lr(b,d),r.ref=i.ref,r.return=i,i.child=r}function zx(r,i,c,d,x){if(r!==null){var b=r.memoizedProps;if(rc(b,d)&&r.ref===i.ref)if(on=!1,i.pendingProps=d=b,Dm(r,x))(r.flags&131072)!==0&&(on=!0);else return i.lanes=r.lanes,Fr(r,i,x)}return Sm(r,i,c,d,x)}function Fx(r,i,c,d){var x=d.children,b=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,r!==null){for(d=i.child=r.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,i.child=null;return Gx(r,i,b,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Zu(i,b!==null?b.cachePool:null),b!==null?Hy(i,b):nm(),$y(i);else return d=i.lanes=536870912,Gx(r,i,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Zu(i,b.cachePool),Hy(i,b),Vi(),i.memoizedState=null):(r!==null&&Zu(i,null),nm(),Vi());return Sn(r,i,x,c),i.child}function vc(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Gx(r,i,c,d,x){var b=Jf();return b=b===null?null:{parent:rn._currentValue,pool:b},i.memoizedState={baseLanes:c,cachePool:b},r!==null&&Zu(i,null),nm(),$y(i),r!==null&&jo(r,i,d,!0),i.childLanes=x,null}function pd(r,i){return i=yd({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Bx(r,i,c){return Fa(i,r.child,null,c),r=pd(i,i.pendingProps),r.flags|=2,ds(i),i.memoizedState=null,r}function pS(r,i,c){var d=i.pendingProps,x=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(tt){if(d.mode==="hidden")return r=pd(i,d),i.lanes=536870912,vc(null,r);if(rm(i),(r=Rt)?(r=nb(r,As),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ii!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},c=Ay(r),c.return=i,i.child=c,Tn=i,Rt=null)):r=null,r===null)throw ki(i);return i.lanes=536870912,null}return pd(i,d)}var b=r.memoizedState;if(b!==null){var T=b.dehydrated;if(rm(i),x)if(i.flags&256)i.flags&=-257,i=Bx(r,i,c);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(on||jo(r,i,c,!1),x=(c&r.childLanes)!==0,on||x){if(d=At,d!==null&&(T=ql(d,c),T!==0&&T!==b.retryLane))throw b.retryLane=T,Pa(r,T),Wn(d,r,T),Nm;Sd(),i=Bx(r,i,c)}else r=b.treeContext,Rt=Is(T.nextSibling),Tn=i,tt=!0,Ri=null,As=!1,r!==null&&Ry(i,r),i=pd(i,d),i.flags|=4096;return i}return r=Lr(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function gd(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Sm(r,i,c,d,x){return Ua(i),c=am(r,i,c,d,void 0,x),d=om(),r!==null&&!on?(lm(r,i,x),Fr(r,i,x)):(tt&&d&&zf(i),i.flags|=1,Sn(r,i,c,x),i.child)}function Hx(r,i,c,d,x,b){return Ua(i),i.updateQueue=null,c=Yy(i,d,c,x),Ky(r),d=om(),r!==null&&!on?(lm(r,i,b),Fr(r,i,b)):(tt&&d&&zf(i),i.flags|=1,Sn(r,i,c,b),i.child)}function $x(r,i,c,d,x){if(Ua(i),i.stateNode===null){var b=ko,T=c.contextType;typeof T=="object"&&T!==null&&(b=Nn(T)),b=new c(d,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Em,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=d,b.state=i.memoizedState,b.refs={},Wf(i),T=c.contextType,b.context=typeof T=="object"&&T!==null?Nn(T):ko,b.state=i.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(wm(i,c,T,d),b.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Em.enqueueReplaceState(b,b.state,null),mc(i,d,b,x),fc(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){b=i.stateNode;var A=i.memoizedProps,L=Ba(c,A);b.props=L;var J=b.context,ae=c.contextType;T=ko,typeof ae=="object"&&ae!==null&&(T=Nn(ae));var ce=c.getDerivedStateFromProps;ae=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ae||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||J!==T)&&Mx(i,b,d,T),Di=!1;var X=i.memoizedState;b.state=X,mc(i,d,b,x),fc(),J=i.memoizedState,A||X!==J||Di?(typeof ce=="function"&&(wm(i,c,ce,d),J=i.memoizedState),(L=Di||kx(i,c,L,d,X,J,T))?(ae||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=J),b.props=d,b.state=J,b.context=T,d=L):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{b=i.stateNode,Zf(r,i),T=i.memoizedProps,ae=Ba(c,T),b.props=ae,ce=i.pendingProps,X=b.context,J=c.contextType,L=ko,typeof J=="object"&&J!==null&&(L=Nn(J)),A=c.getDerivedStateFromProps,(J=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ce||X!==L)&&Mx(i,b,d,L),Di=!1,X=i.memoizedState,b.state=X,mc(i,d,b,x),fc();var re=i.memoizedState;T!==ce||X!==re||Di||r!==null&&r.dependencies!==null&&Xu(r.dependencies)?(typeof A=="function"&&(wm(i,c,A,d),re=i.memoizedState),(ae=Di||kx(i,c,ae,d,X,re,L)||r!==null&&r.dependencies!==null&&Xu(r.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,re,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,re,L)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=re),b.props=d,b.state=re,b.context=L,d=ae):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),d=!1)}return b=d,gd(r,i),d=(i.flags&128)!==0,b||d?(b=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,r!==null&&d?(i.child=Fa(i,r.child,null,x),i.child=Fa(i,null,c,x)):Sn(r,i,c,x),i.memoizedState=b.state,r=i.child):r=Fr(r,i,x),r}function Kx(r,i,c,d){return La(),i.flags|=256,Sn(r,i,c,d),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cm(r){return{baseLanes:r,cachePool:Ly()}}function Im(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=fs),r}function Yx(r,i,c){var d=i.pendingProps,x=!1,b=(i.flags&128)!==0,T;if((T=b)||(T=r!==null&&r.memoizedState===null?!1:(Jt.current&2)!==0),T&&(x=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,r===null){if(tt){if(x?Li(i):Vi(),(r=Rt)?(r=nb(r,As),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ii!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},c=Ay(r),c.return=i,i.child=c,Tn=i,Rt=null)):r=null,r===null)throw ki(i);return dp(r)?i.lanes=32:i.lanes=536870912,null}var A=d.children;return d=d.fallback,x?(Vi(),x=i.mode,A=yd({mode:"hidden",children:A},x),d=ja(d,x,c,null),A.return=i,d.return=i,A.sibling=d,i.child=A,d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,vc(null,d)):(Li(i),Rm(i,A))}var L=r.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(b)i.flags&256?(Li(i),i.flags&=-257,i=km(r,i,c)):i.memoizedState!==null?(Vi(),i.child=r.child,i.flags|=128,i=null):(Vi(),A=d.fallback,x=i.mode,d=yd({mode:"visible",children:d.children},x),A=ja(A,x,c,null),A.flags|=2,d.return=i,A.return=i,d.sibling=A,i.child=d,Fa(i,r.child,null,c),d=i.child,d.memoizedState=Cm(c),d.childLanes=Im(r,T,c),i.memoizedState=Am,i=vc(null,d));else if(Li(i),dp(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var J=T.dgst;T=J,d=Error(s(419)),d.stack="",d.digest=T,oc({value:d,source:null,stack:null}),i=km(r,i,c)}else if(on||jo(r,i,c,!1),T=(c&r.childLanes)!==0,on||T){if(T=At,T!==null&&(d=ql(T,c),d!==0&&d!==L.retryLane))throw L.retryLane=d,Pa(r,d),Wn(T,r,d),Nm;up(A)||Sd(),i=km(r,i,c)}else up(A)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Rt=Is(A.nextSibling),Tn=i,tt=!0,Ri=null,As=!1,r!==null&&Ry(i,r),i=Rm(i,d.children),i.flags|=4096);return i}return x?(Vi(),A=d.fallback,x=i.mode,L=r.child,J=L.sibling,d=Lr(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,J!==null?A=Lr(J,A):(A=ja(A,x,c,null),A.flags|=2),A.return=i,d.return=i,d.sibling=A,i.child=d,vc(null,d),d=i.child,A=r.child.memoizedState,A===null?A=Cm(c):(x=A.cachePool,x!==null?(L=rn._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=Ly(),A={baseLanes:A.baseLanes|c,cachePool:x}),d.memoizedState=A,d.childLanes=Im(r,T,c),i.memoizedState=Am,vc(r.child,d)):(Li(i),c=r.child,r=c.sibling,c=Lr(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,r!==null&&(T=i.deletions,T===null?(i.deletions=[r],i.flags|=16):T.push(r)),i.child=c,i.memoizedState=null,c)}function Rm(r,i){return i=yd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function yd(r,i){return r=cs(22,r,null,i),r.lanes=0,r}function km(r,i,c){return Fa(i,r.child,null,c),r=Rm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Qx(r,i,c){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),$f(r.return,i,c)}function Mm(r,i,c,d,x,b){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:x,treeForkCount:b}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=x,T.treeForkCount=b)}function Jx(r,i,c){var d=i.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var T=Jt.current,A=(T&2)!==0;if(A?(T=T&1|2,i.flags|=128):T&=1,U(Jt,T),Sn(r,i,d,c),d=tt?ac:0,!A&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qx(r,c,i);else if(r.tag===19)Qx(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(c=i.child,x=null;c!==null;)r=c.alternate,r!==null&&id(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),Mm(i,!1,x,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(r=x.alternate,r!==null&&id(r)===null){i.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Mm(i,!0,c,null,b,d);break;case"together":Mm(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Fr(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),qi|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(jo(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,c=Lr(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Lr(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function Dm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Xu(r)))}function gS(r,i,c){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Mi(i,rn,r.memoizedState.cache),La();break;case 27:case 5:It(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Mi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,rm(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Li(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Yx(r,i,c):(Li(i),r=Fr(r,i,c),r!==null?r.sibling:null);Li(i);break;case 19:var x=(r.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(jo(r,i,c,!1),d=(c&i.childLanes)!==0),x){if(d)return Jx(r,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),U(Jt,Jt.current),d)break;return null;case 22:return i.lanes=0,Fx(r,i,c,i.pendingProps);case 24:Mi(i,rn,r.memoizedState.cache)}return Fr(r,i,c)}function Xx(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)on=!0;else{if(!Dm(r,c)&&(i.flags&128)===0)return on=!1,gS(r,i,c);on=(r.flags&131072)!==0}else on=!1,tt&&(i.flags&1048576)!==0&&Iy(i,ac,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=qa(i.elementType),i.type=r,typeof r=="function")Uf(r)?(d=Ba(r,d),i.tag=1,i=$x(null,i,r,d,c)):(i.tag=0,i=Sm(null,i,r,d,c));else{if(r!=null){var x=r.$$typeof;if(x===ie){i.tag=11,i=Ox(null,i,r,d,c);break e}else if(x===C){i.tag=14,i=qx(null,i,r,d,c);break e}}throw i=Ge(r)||r,Error(s(306,i,""))}}return i;case 0:return Sm(r,i,i.type,i.pendingProps,c);case 1:return d=i.type,x=Ba(d,i.pendingProps),$x(r,i,d,x,c);case 3:e:{if(at(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var b=i.memoizedState;x=b.element,Zf(r,i),mc(i,d,null,c);var T=i.memoizedState;if(d=T.cache,Mi(i,rn,d),d!==b.cache&&Kf(i,[rn],c,!0),fc(),d=T.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=Kx(r,i,d,c);break e}else if(d!==x){x=Ts(Error(s(424)),i),oc(x),i=Kx(r,i,d,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Rt=Is(r.firstChild),Tn=i,tt=!0,Ri=null,As=!0,c=Fy(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(La(),d===x){i=Fr(r,i,c);break e}Sn(r,i,d,c)}i=i.child}return i;case 26:return gd(r,i),r===null?(c=lb(i.type,null,i.pendingProps,null))?i.memoizedState=c:tt||(c=i.type,r=i.pendingProps,d=Dd(Ne.current).createElement(c),d[tn]=i,d[xn]=r,An(d,c,r),nn(d),i.stateNode=d):i.memoizedState=lb(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return It(i),r===null&&tt&&(d=i.stateNode=ib(i.type,i.pendingProps,Ne.current),Tn=i,As=!0,x=Rt,Hi(i.type)?(hp=x,Rt=Is(d.firstChild)):Rt=x),Sn(r,i,i.pendingProps.children,c),gd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&tt&&((x=d=Rt)&&(d=$S(d,i.type,i.pendingProps,As),d!==null?(i.stateNode=d,Tn=i,Rt=Is(d.firstChild),As=!1,x=!0):x=!1),x||ki(i)),It(i),x=i.type,b=i.pendingProps,T=r!==null?r.memoizedProps:null,d=b.children,op(x,b)?d=null:T!==null&&op(x,T)&&(i.flags|=32),i.memoizedState!==null&&(x=am(r,i,oS,null,null,c),Pc._currentValue=x),gd(r,i),Sn(r,i,d,c),i.child;case 6:return r===null&&tt&&((r=c=Rt)&&(c=KS(c,i.pendingProps,As),c!==null?(i.stateNode=c,Tn=i,Rt=null,r=!0):r=!1),r||ki(i)),null;case 13:return Yx(r,i,c);case 4:return at(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=Fa(i,null,d,c):Sn(r,i,d,c),i.child;case 11:return Ox(r,i,i.type,i.pendingProps,c);case 7:return Sn(r,i,i.pendingProps,c),i.child;case 8:return Sn(r,i,i.pendingProps.children,c),i.child;case 12:return Sn(r,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Mi(i,i.type,d.value),Sn(r,i,d.children,c),i.child;case 9:return x=i.type._context,d=i.pendingProps.children,Ua(i),x=Nn(x),d=d(x),i.flags|=1,Sn(r,i,d,c),i.child;case 14:return qx(r,i,i.type,i.pendingProps,c);case 15:return zx(r,i,i.type,i.pendingProps,c);case 19:return Jx(r,i,c);case 31:return pS(r,i,c);case 22:return Fx(r,i,c,i.pendingProps);case 24:return Ua(i),d=Nn(rn),r===null?(x=Jf(),x===null&&(x=At,b=Yf(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=c),x=b),i.memoizedState={parent:d,cache:x},Wf(i),Mi(i,rn,x)):((r.lanes&c)!==0&&(Zf(r,i),mc(i,null,null,c),fc()),x=r.memoizedState,b=i.memoizedState,x.parent!==d?(x={parent:d,cache:d},i.memoizedState=x,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=x),Mi(i,rn,d)):(d=b.cache,Mi(i,rn,d),d!==x.cache&&Kf(i,[rn],c,!0))),Sn(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Gr(r){r.flags|=4}function Pm(r,i,c,d,x){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(Tv())r.flags|=8192;else throw za=td,Xf}else r.flags&=-16777217}function Wx(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!fb(i))if(Tv())r.flags|=8192;else throw za=td,Xf}function xd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?St():536870912,r.lanes|=i,Ko|=i)}function bc(r,i){if(!tt)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function kt(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(i)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=d,r.childLanes=c,i}function yS(r,i,c){var d=i.pendingProps;switch(Ff(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(i),null;case 1:return kt(i),null;case 3:return c=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Or(rn),Ae(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Po(i)?Gr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bf())),kt(i),null;case 26:var x=i.type,b=i.memoizedState;return r===null?(Gr(i),b!==null?(kt(i),Wx(i,b)):(kt(i),Pm(i,x,null,d,c))):b?b!==r.memoizedState?(Gr(i),kt(i),Wx(i,b)):(kt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&Gr(i),kt(i),Pm(i,x,r,d,c)),null;case 27:if(Ve(i),c=Ne.current,x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Gr(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return kt(i),null}r=te.current,Po(i)?ky(i):(r=ib(x,d,c),i.stateNode=r,Gr(i))}return kt(i),null;case 5:if(Ve(i),x=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Gr(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return kt(i),null}if(b=te.current,Po(i))ky(i);else{var T=Dd(Ne.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?T.createElement(x,{is:d.is}):T.createElement(x)}}b[tn]=i,b[xn]=d;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=b;e:switch(An(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Gr(i)}}return kt(i),Pm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,c),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&Gr(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=Ne.current,Po(i)){if(r=i.stateNode,c=i.memoizedProps,d=null,x=Tn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}r[tn]=i,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Yv(r.nodeValue,c)),r||ki(i,!0)}else r=Dd(r).createTextNode(d),r[tn]=i,i.stateNode=r}return kt(i),null;case 31:if(c=i.memoizedState,r===null||r.memoizedState!==null){if(d=Po(i),c!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[tn]=i}else La(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),r=!1}else c=Bf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return i.flags&256?(ds(i),i):(ds(i),null);if((i.flags&128)!==0)throw Error(s(558))}return kt(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=Po(i),d!==null&&d.dehydrated!==null){if(r===null){if(!x)throw Error(s(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[tn]=i}else La(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),x=!1}else x=Bf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return i.flags&256?(ds(i),i):(ds(i),null)}return ds(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,r=r!==null&&r.memoizedState!==null,c&&(d=i.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),c!==r&&c&&(i.child.flags|=8192),xd(i,i.updateQueue),kt(i),null);case 4:return Ae(),r===null&&np(i.stateNode.containerInfo),kt(i),null;case 10:return Or(i.type),kt(i),null;case 19:if(Q(Jt),d=i.memoizedState,d===null)return kt(i),null;if(x=(i.flags&128)!==0,b=d.rendering,b===null)if(x)bc(d,!1);else{if(Bt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=id(r),b!==null){for(i.flags|=128,bc(d,!1),r=b.updateQueue,i.updateQueue=r,xd(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)Sy(c,r),c=c.sibling;return U(Jt,Jt.current&1|2),tt&&Vr(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&Ft()>Ed&&(i.flags|=128,x=!0,bc(d,!1),i.lanes=4194304)}else{if(!x)if(r=id(b),r!==null){if(i.flags|=128,x=!0,r=r.updateQueue,i.updateQueue=r,xd(i,r),bc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!tt)return kt(i),null}else 2*Ft()-d.renderingStartTime>Ed&&c!==536870912&&(i.flags|=128,x=!0,bc(d,!1),i.lanes=4194304);d.isBackwards?(b.sibling=i.child,i.child=b):(r=d.last,r!==null?r.sibling=b:i.child=b,d.last=b)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ft(),r.sibling=null,c=Jt.current,U(Jt,x?c&1|2:c&1),tt&&Vr(i,d.treeForkCount),r):(kt(i),null);case 22:case 23:return ds(i),sm(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(kt(i),i.subtreeFlags&6&&(i.flags|=8192)):kt(i),c=i.updateQueue,c!==null&&xd(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),r!==null&&Q(Oa),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Or(rn),kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function xS(r,i){switch(Ff(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Or(rn),Ae(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ve(i),null;case 31:if(i.memoizedState!==null){if(ds(i),i.alternate===null)throw Error(s(340));La()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(ds(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));La()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Q(Jt),null;case 4:return Ae(),null;case 10:return Or(i.type),null;case 22:case 23:return ds(i),sm(),r!==null&&Q(Oa),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Or(rn),null;case 25:return null;default:return null}}function Zx(r,i){switch(Ff(i),i.tag){case 3:Or(rn),Ae();break;case 26:case 27:case 5:Ve(i);break;case 4:Ae();break;case 31:i.memoizedState!==null&&ds(i);break;case 13:ds(i);break;case 19:Q(Jt);break;case 10:Or(i.type);break;case 22:case 23:ds(i),sm(),r!==null&&Q(Oa);break;case 24:Or(rn)}}function _c(r,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var x=d.next;c=x;do{if((c.tag&r)===r){d=void 0;var b=c.create,T=c.inst;d=b(),T.destroy=d}c=c.next}while(c!==x)}}catch(A){vt(i,i.return,A)}}function Ui(r,i,c){try{var d=i.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&r)===r){var T=d.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,x=i;var L=c,J=A;try{J()}catch(ae){vt(x,L,ae)}}}d=d.next}while(d!==b)}}catch(ae){vt(i,i.return,ae)}}function ev(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{By(i,c)}catch(d){vt(r,r.return,d)}}}function tv(r,i,c){c.props=Ba(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){vt(r,i,d)}}function wc(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(x){vt(r,i,x)}}function gr(r,i){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(x){vt(r,i,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){vt(r,i,x)}else c.current=null}function nv(r){var i=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(x){vt(r,r.return,x)}}function jm(r,i,c){try{var d=r.stateNode;qS(d,r.type,c,i),d[xn]=i}catch(x){vt(r,r.return,x)}}function sv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Hi(r.type)||r.tag===4}function Lm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Hi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Vm(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Us));else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(Vm(r,i,c),r=r.sibling;r!==null;)Vm(r,i,c),r=r.sibling}function vd(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(d!==4&&(d===27&&Hi(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(vd(r,i,c),r=r.sibling;r!==null;)vd(r,i,c),r=r.sibling}function rv(r){var i=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,x=i.attributes;x.length;)i.removeAttributeNode(x[0]);An(i,d,c),i[tn]=r,i[xn]=c}catch(b){vt(r,r.return,b)}}var Br=!1,ln=!1,Um=!1,iv=typeof WeakSet=="function"?WeakSet:Set,bn=null;function vS(r,i){if(r=r.containerInfo,ip=qd,r=yy(r),kf(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var T=0,A=-1,L=-1,J=0,ae=0,ce=r,X=null;t:for(;;){for(var re;ce!==c||x!==0&&ce.nodeType!==3||(A=T+x),ce!==b||d!==0&&ce.nodeType!==3||(L=T+d),ce.nodeType===3&&(T+=ce.nodeValue.length),(re=ce.firstChild)!==null;)X=ce,ce=re;for(;;){if(ce===r)break t;if(X===c&&++J===x&&(A=T),X===b&&++ae===d&&(L=T),(re=ce.nextSibling)!==null)break;ce=X,X=ce.parentNode}ce=re}c=A===-1||L===-1?null:{start:A,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(ap={focusedElem:r,selectionRange:c},qd=!1,bn=i;bn!==null;)if(i=bn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,bn=r;else for(;bn!==null;){switch(i=bn,b=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)x=r[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=i,x=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Ee=Ba(c.type,x);r=d.getSnapshotBeforeUpdate(Ee,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(ke){vt(c,c.return,ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)cp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,bn=r;break}bn=i.return}}function av(r,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:$r(r,c),d&4&&_c(5,c);break;case 1:if($r(r,c),d&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(T){vt(c,c.return,T)}else{var x=Ba(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(x,i,r.__reactInternalSnapshotBeforeUpdate)}catch(T){vt(c,c.return,T)}}d&64&&ev(c),d&512&&wc(c,c.return);break;case 3:if($r(r,c),d&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{By(r,i)}catch(T){vt(c,c.return,T)}}break;case 27:i===null&&d&4&&rv(c);case 26:case 5:$r(r,c),i===null&&d&4&&nv(c),d&512&&wc(c,c.return);break;case 12:$r(r,c);break;case 31:$r(r,c),d&4&&cv(r,c);break;case 13:$r(r,c),d&4&&uv(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=CS.bind(null,c),YS(r,c))));break;case 22:if(d=c.memoizedState!==null||Br,!d){i=i!==null&&i.memoizedState!==null||ln,x=Br;var b=ln;Br=d,(ln=i)&&!b?Kr(r,c,(c.subtreeFlags&8772)!==0):$r(r,c),Br=x,ln=b}break;case 30:break;default:$r(r,c)}}function ov(r){var i=r.alternate;i!==null&&(r.alternate=null,ov(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&yo(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Vt=null,Yn=!1;function Hr(r,i,c){for(c=c.child;c!==null;)lv(r,i,c),c=c.sibling}function lv(r,i,c){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(jt,c)}catch{}switch(c.tag){case 26:ln||gr(c,i),Hr(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ln||gr(c,i);var d=Vt,x=Yn;Hi(c.type)&&(Vt=c.stateNode,Yn=!1),Hr(r,i,c),kc(c.stateNode),Vt=d,Yn=x;break;case 5:ln||gr(c,i);case 6:if(d=Vt,x=Yn,Vt=null,Hr(r,i,c),Vt=d,Yn=x,Vt!==null)if(Yn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(c.stateNode)}catch(b){vt(c,i,b)}else try{Vt.removeChild(c.stateNode)}catch(b){vt(c,i,b)}break;case 18:Vt!==null&&(Yn?(r=Vt,eb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),tl(r)):eb(Vt,c.stateNode));break;case 4:d=Vt,x=Yn,Vt=c.stateNode.containerInfo,Yn=!0,Hr(r,i,c),Vt=d,Yn=x;break;case 0:case 11:case 14:case 15:Ui(2,c,i),ln||Ui(4,c,i),Hr(r,i,c);break;case 1:ln||(gr(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&tv(c,i,d)),Hr(r,i,c);break;case 21:Hr(r,i,c);break;case 22:ln=(d=ln)||c.memoizedState!==null,Hr(r,i,c),ln=d;break;default:Hr(r,i,c)}}function cv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{tl(r)}catch(c){vt(i,i.return,c)}}}function uv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tl(r)}catch(c){vt(i,i.return,c)}}function bS(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new iv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new iv),i;default:throw Error(s(435,r.tag))}}function bd(r,i){var c=bS(r);i.forEach(function(d){if(!c.has(d)){c.add(d);var x=IS.bind(null,r,d);d.then(x,x)}})}function Qn(r,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var x=c[d],b=r,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Hi(A.type)){Vt=A.stateNode,Yn=!1;break e}break;case 5:Vt=A.stateNode,Yn=!1;break e;case 3:case 4:Vt=A.stateNode.containerInfo,Yn=!0;break e}A=A.return}if(Vt===null)throw Error(s(160));lv(b,T,x),Vt=null,Yn=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)dv(i,r),i=i.sibling}var Bs=null;function dv(r,i){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qn(i,r),Jn(r),d&4&&(Ui(3,r,r.return),_c(3,r),Ui(5,r,r.return));break;case 1:Qn(i,r),Jn(r),d&512&&(ln||c===null||gr(c,c.return)),d&64&&Br&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var x=Bs;if(Qn(i,r),Jn(r),d&512&&(ln||c===null||gr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[nr]||b[tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),An(b,d,c),b[tn]=r,nn(b),d=b;break e;case"link":var T=db("link","href",x).get(d+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}b=x.createElement(d),An(b,d,c),x.head.appendChild(b);break;case"meta":if(T=db("meta","content",x).get(d+(c.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}b=x.createElement(d),An(b,d,c),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[tn]=r,nn(b),d=b}r.stateNode=d}else hb(x,r.type,r.stateNode);else r.stateNode=ub(x,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?hb(x,r.type,r.stateNode):ub(x,d,r.memoizedProps)):d===null&&r.stateNode!==null&&jm(r,r.memoizedProps,c.memoizedProps)}break;case 27:Qn(i,r),Jn(r),d&512&&(ln||c===null||gr(c,c.return)),c!==null&&d&4&&jm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Qn(i,r),Jn(r),d&512&&(ln||c===null||gr(c,c.return)),r.flags&32){x=r.stateNode;try{Kn(x,"")}catch(Ee){vt(r,r.return,Ee)}}d&4&&r.stateNode!=null&&(x=r.memoizedProps,jm(r,x,c!==null?c.memoizedProps:x)),d&1024&&(Um=!0);break;case 6:if(Qn(i,r),Jn(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(Ee){vt(r,r.return,Ee)}}break;case 3:if(Ld=null,x=Bs,Bs=Pd(i.containerInfo),Qn(i,r),Bs=x,Jn(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{tl(i.containerInfo)}catch(Ee){vt(r,r.return,Ee)}Um&&(Um=!1,hv(r));break;case 4:d=Bs,Bs=Pd(r.stateNode.containerInfo),Qn(i,r),Jn(r),Bs=d;break;case 12:Qn(i,r),Jn(r);break;case 31:Qn(i,r),Jn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 13:Qn(i,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(wd=Ft()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 22:x=r.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,J=Br,ae=ln;if(Br=J||x,ln=ae||L,Qn(i,r),ln=ae,Br=J,Jn(r),d&8192)e:for(i=r.stateNode,i._visibility=x?i._visibility&-2:i._visibility|1,x&&(c===null||L||Br||ln||Ha(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){L=c=i;try{if(b=L.stateNode,x)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=L.stateNode;var ce=L.memoizedProps.style,X=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Ee){vt(L,L.return,Ee)}}}else if(i.tag===6){if(c===null){L=i;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Ee){vt(L,L.return,Ee)}}}else if(i.tag===18){if(c===null){L=i;try{var re=L.stateNode;x?tb(re,!0):tb(L.stateNode,!1)}catch(Ee){vt(L,L.return,Ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,bd(r,c))));break;case 19:Qn(i,r),Jn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,bd(r,d)));break;case 30:break;case 21:break;default:Qn(i,r),Jn(r)}}function Jn(r){var i=r.flags;if(i&2){try{for(var c,d=r.return;d!==null;){if(sv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var x=c.stateNode,b=Lm(r);vd(r,b,x);break;case 5:var T=c.stateNode;c.flags&32&&(Kn(T,""),c.flags&=-33);var A=Lm(r);vd(r,A,T);break;case 3:case 4:var L=c.stateNode.containerInfo,J=Lm(r);Vm(r,J,L);break;default:throw Error(s(161))}}catch(ae){vt(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function hv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;hv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function $r(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)av(r,i.alternate,i),i=i.sibling}function Ha(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ui(4,i,i.return),Ha(i);break;case 1:gr(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&tv(i,i.return,c),Ha(i);break;case 27:kc(i.stateNode);case 26:case 5:gr(i,i.return),Ha(i);break;case 22:i.memoizedState===null&&Ha(i);break;case 30:Ha(i);break;default:Ha(i)}r=r.sibling}}function Kr(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,x=r,b=i,T=b.flags;switch(b.tag){case 0:case 11:case 15:Kr(x,b,c),_c(4,b);break;case 1:if(Kr(x,b,c),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(J){vt(d,d.return,J)}if(d=b,x=d.updateQueue,x!==null){var A=d.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)Gy(L[x],A)}catch(J){vt(d,d.return,J)}}c&&T&64&&ev(b),wc(b,b.return);break;case 27:rv(b);case 26:case 5:Kr(x,b,c),c&&d===null&&T&4&&nv(b),wc(b,b.return);break;case 12:Kr(x,b,c);break;case 31:Kr(x,b,c),c&&T&4&&cv(x,b);break;case 13:Kr(x,b,c),c&&T&4&&uv(x,b);break;case 22:b.memoizedState===null&&Kr(x,b,c),wc(b,b.return);break;case 30:break;default:Kr(x,b,c)}i=i.sibling}}function Om(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&lc(c))}function qm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&lc(r))}function Hs(r,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fv(r,i,c,d),i=i.sibling}function fv(r,i,c,d){var x=i.flags;switch(i.tag){case 0:case 11:case 15:Hs(r,i,c,d),x&2048&&_c(9,i);break;case 1:Hs(r,i,c,d);break;case 3:Hs(r,i,c,d),x&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&lc(r)));break;case 12:if(x&2048){Hs(r,i,c,d),r=i.stateNode;try{var b=i.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){vt(i,i.return,L)}}else Hs(r,i,c,d);break;case 31:Hs(r,i,c,d);break;case 13:Hs(r,i,c,d);break;case 23:break;case 22:b=i.stateNode,T=i.alternate,i.memoizedState!==null?b._visibility&2?Hs(r,i,c,d):Ec(r,i):b._visibility&2?Hs(r,i,c,d):(b._visibility|=2,Bo(r,i,c,d,(i.subtreeFlags&10256)!==0||!1)),x&2048&&Om(T,i);break;case 24:Hs(r,i,c,d),x&2048&&qm(i.alternate,i);break;default:Hs(r,i,c,d)}}function Bo(r,i,c,d,x){for(x=x&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=r,T=i,A=c,L=d,J=T.flags;switch(T.tag){case 0:case 11:case 15:Bo(b,T,A,L,x),_c(8,T);break;case 23:break;case 22:var ae=T.stateNode;T.memoizedState!==null?ae._visibility&2?Bo(b,T,A,L,x):Ec(b,T):(ae._visibility|=2,Bo(b,T,A,L,x)),x&&J&2048&&Om(T.alternate,T);break;case 24:Bo(b,T,A,L,x),x&&J&2048&&qm(T.alternate,T);break;default:Bo(b,T,A,L,x)}i=i.sibling}}function Ec(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,d=i,x=d.flags;switch(d.tag){case 22:Ec(c,d),x&2048&&Om(d.alternate,d);break;case 24:Ec(c,d),x&2048&&qm(d.alternate,d);break;default:Ec(c,d)}i=i.sibling}}var Tc=8192;function Ho(r,i,c){if(r.subtreeFlags&Tc)for(r=r.child;r!==null;)mv(r,i,c),r=r.sibling}function mv(r,i,c){switch(r.tag){case 26:Ho(r,i,c),r.flags&Tc&&r.memoizedState!==null&&aA(c,Bs,r.memoizedState,r.memoizedProps);break;case 5:Ho(r,i,c);break;case 3:case 4:var d=Bs;Bs=Pd(r.stateNode.containerInfo),Ho(r,i,c),Bs=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Tc,Tc=16777216,Ho(r,i,c),Tc=d):Ho(r,i,c));break;default:Ho(r,i,c)}}function pv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Nc(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];bn=d,yv(d,r)}pv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gv(r),r=r.sibling}function gv(r){switch(r.tag){case 0:case 11:case 15:Nc(r),r.flags&2048&&Ui(9,r,r.return);break;case 3:Nc(r);break;case 12:Nc(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,_d(r)):Nc(r);break;default:Nc(r)}}function _d(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];bn=d,yv(d,r)}pv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ui(8,i,i.return),_d(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,_d(i));break;default:_d(i)}r=r.sibling}}function yv(r,i){for(;bn!==null;){var c=bn;switch(c.tag){case 0:case 11:case 15:Ui(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:lc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,bn=d;else e:for(c=r;bn!==null;){d=bn;var x=d.sibling,b=d.return;if(ov(d),d===c){bn=null;break e}if(x!==null){x.return=b,bn=x;break e}bn=b}}}var _S={getCacheForType:function(r){var i=Nn(rn),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c},cacheSignal:function(){return Nn(rn).controller.signal}},wS=typeof WeakMap=="function"?WeakMap:Map,mt=0,At=null,Ke=null,Qe=0,xt=0,hs=null,Oi=!1,$o=!1,zm=!1,Yr=0,Bt=0,qi=0,$a=0,Fm=0,fs=0,Ko=0,Sc=null,Xn=null,Gm=!1,wd=0,xv=0,Ed=1/0,Td=null,zi=null,fn=0,Fi=null,Yo=null,Qr=0,Bm=0,Hm=null,vv=null,Ac=0,$m=null;function ms(){return(mt&2)!==0&&Qe!==0?Qe&-Qe:Z.T!==null?Wm():Nu()}function bv(){if(fs===0)if((Qe&536870912)===0||tt){var r=me;me<<=1,(me&3932160)===0&&(me=262144),fs=r}else fs=536870912;return r=us.current,r!==null&&(r.flags|=32),fs}function Wn(r,i,c){(r===At&&(xt===2||xt===9)||r.cancelPendingCommit!==null)&&(Qo(r,0),Gi(r,Qe,fs,!1)),ht(r,c),((mt&2)===0||r!==At)&&(r===At&&((mt&2)===0&&($a|=c),Bt===4&&Gi(r,Qe,fs,!1)),yr(r))}function _v(r,i,c){if((mt&6)!==0)throw Error(s(327));var d=!c&&(i&127)===0&&(i&r.expiredLanes)===0||Ue(r,i),x=d?NS(r,i):Ym(r,i,!0),b=d;do{if(x===0){$o&&!d&&Gi(r,i,0,!1);break}else{if(c=r.current.alternate,b&&!ES(c)){x=Ym(r,i,!1),b=!1;continue}if(x===2){if(b=i,r.errorRecoveryDisabledLanes&b)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=r;x=Sc;var L=A.current.memoizedState.isDehydrated;if(L&&(Qo(A,T).flags|=256),T=Ym(A,T,!1),T!==2){if(zm&&!L){A.errorRecoveryDisabledLanes|=b,$a|=b,x=4;break e}b=Xn,Xn=x,b!==null&&(Xn===null?Xn=b:Xn.push.apply(Xn,b))}x=T}if(b=!1,x!==2)continue}}if(x===1){Qo(r,0),Gi(r,i,0,!0);break}e:{switch(d=r,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gi(d,i,fs,!Oi);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(x=wd+300-Ft(),10<x)){if(Gi(d,i,fs,!Oi),xe(d,0,!0)!==0)break e;Qr=i,d.timeoutHandle=Wv(wv.bind(null,d,c,Xn,Td,Gm,i,fs,$a,Ko,Oi,b,"Throttled",-0,0),x);break e}wv(d,c,Xn,Td,Gm,i,fs,$a,Ko,Oi,b,null,-0,0)}}break}while(!0);yr(r)}function wv(r,i,c,d,x,b,T,A,L,J,ae,ce,X,re){if(r.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},mv(i,b,ce);var Ee=(b&62914560)===b?wd-Ft():(b&4194048)===b?xv-Ft():0;if(Ee=oA(ce,Ee),Ee!==null){Qr=b,r.cancelPendingCommit=Ee(Rv.bind(null,r,i,b,c,d,x,T,A,L,ae,ce,null,X,re)),Gi(r,b,T,!J);return}}Rv(r,i,b,c,d,x,T,A,L)}function ES(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var x=c[d],b=x.getSnapshot;x=x.value;try{if(!ls(b(),x))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(r,i,c,d){i&=~Fm,i&=~$a,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var x=i;0<x;){var b=31-ut(x),T=1<<b;d[b]=-1,x&=~T}c!==0&&yn(r,c,i)}function Nd(){return(mt&6)===0?(Cc(0),!1):!0}function Km(){if(Ke!==null){if(xt===0)var r=Ke.return;else r=Ke,Ur=Va=null,cm(r),Oo=null,uc=0,r=Ke;for(;r!==null;)Zx(r.alternate,r),r=r.return;Ke=null}}function Qo(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,GS(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Qr=0,Km(),At=r,Ke=c=Lr(r.current,null),Qe=i,xt=0,hs=null,Oi=!1,$o=Ue(r,i),zm=!1,Ko=fs=Fm=$a=qi=Bt=0,Xn=Sc=null,Gm=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var x=31-ut(d),b=1<<x;i|=r[x],d&=~b}return Yr=i,$u(),c}function Ev(r,i){Fe=null,Z.H=xc,i===Uo||i===ed?(i=Oy(),xt=3):i===Xf?(i=Oy(),xt=4):xt=i===Nm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,hs=i,Ke===null&&(Bt=1,md(r,Ts(i,r.current)))}function Tv(){var r=us.current;return r===null?!0:(Qe&4194048)===Qe?Cs===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?r===Cs:!1}function Nv(){var r=Z.H;return Z.H=xc,r===null?xc:r}function Sv(){var r=Z.A;return Z.A=_S,r}function Sd(){Bt=4,Oi||(Qe&4194048)!==Qe&&us.current!==null||($o=!0),(qi&134217727)===0&&($a&134217727)===0||At===null||Gi(At,Qe,fs,!1)}function Ym(r,i,c){var d=mt;mt|=2;var x=Nv(),b=Sv();(At!==r||Qe!==i)&&(Td=null,Qo(r,i)),i=!1;var T=Bt;e:do try{if(xt!==0&&Ke!==null){var A=Ke,L=hs;switch(xt){case 8:Km(),T=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(i=!0);var J=xt;if(xt=0,hs=null,Jo(r,A,L,J),c&&$o){T=0;break e}break;default:J=xt,xt=0,hs=null,Jo(r,A,L,J)}}TS(),T=Bt;break}catch(ae){Ev(r,ae)}while(!0);return i&&r.shellSuspendCounter++,Ur=Va=null,mt=d,Z.H=x,Z.A=b,Ke===null&&(At=null,Qe=0,$u()),T}function TS(){for(;Ke!==null;)Av(Ke)}function NS(r,i){var c=mt;mt|=2;var d=Nv(),x=Sv();At!==r||Qe!==i?(Td=null,Ed=Ft()+500,Qo(r,i)):$o=Ue(r,i);e:do try{if(xt!==0&&Ke!==null){i=Ke;var b=hs;t:switch(xt){case 1:xt=0,hs=null,Jo(r,i,b,1);break;case 2:case 9:if(Vy(b)){xt=0,hs=null,Cv(i);break}i=function(){xt!==2&&xt!==9||At!==r||(xt=7),yr(r)},b.then(i,i);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Vy(b)?(xt=0,hs=null,Cv(i)):(xt=0,hs=null,Jo(r,i,b,7));break;case 5:var T=null;switch(Ke.tag){case 26:T=Ke.memoizedState;case 5:case 27:var A=Ke;if(T?fb(T):A.stateNode.complete){xt=0,hs=null;var L=A.sibling;if(L!==null)Ke=L;else{var J=A.return;J!==null?(Ke=J,Ad(J)):Ke=null}break t}}xt=0,hs=null,Jo(r,i,b,5);break;case 6:xt=0,hs=null,Jo(r,i,b,6);break;case 8:Km(),Bt=6;break e;default:throw Error(s(462))}}SS();break}catch(ae){Ev(r,ae)}while(!0);return Ur=Va=null,Z.H=d,Z.A=x,mt=c,Ke!==null?0:(At=null,Qe=0,$u(),Bt)}function SS(){for(;Ke!==null&&!yi();)Av(Ke)}function Av(r){var i=Xx(r.alternate,r,Yr);r.memoizedProps=r.pendingProps,i===null?Ad(r):Ke=i}function Cv(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=Hx(c,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Hx(c,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:cm(i);default:Zx(c,i),i=Ke=Sy(i,Yr),i=Xx(c,i,Yr)}r.memoizedProps=r.pendingProps,i===null?Ad(r):Ke=i}function Jo(r,i,c,d){Ur=Va=null,cm(i),Oo=null,uc=0;var x=i.return;try{if(mS(r,x,i,c,Qe)){Bt=1,md(r,Ts(c,r.current)),Ke=null;return}}catch(b){if(x!==null)throw Ke=x,b;Bt=1,md(r,Ts(c,r.current)),Ke=null;return}i.flags&32768?(tt||d===1?r=!0:$o||(Qe&536870912)!==0?r=!1:(Oi=r=!0,(d===2||d===9||d===3||d===6)&&(d=us.current,d!==null&&d.tag===13&&(d.flags|=16384))),Iv(i,r)):Ad(i)}function Ad(r){var i=r;do{if((i.flags&32768)!==0){Iv(i,Oi);return}r=i.return;var c=yS(i.alternate,i,Yr);if(c!==null){Ke=c;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=r}while(i!==null);Bt===0&&(Bt=5)}function Iv(r,i){do{var c=xS(r.alternate,r);if(c!==null){c.flags&=32767,Ke=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=c}while(r!==null);Bt=6,Ke=null}function Rv(r,i,c,d,x,b,T,A,L){r.cancelPendingCommit=null;do Cd();while(fn!==0);if((mt&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(b=i.lanes|i.childLanes,b|=Lf,Ot(r,c,b,T,A,L),r===At&&(Ke=At=null,Qe=0),Yo=i,Fi=r,Qr=c,Bm=b,Hm=x,vv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,RS(is,function(){return jv(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,x=pe.p,pe.p=2,T=mt,mt|=4;try{vS(r,i,c)}finally{mt=T,pe.p=x,Z.T=d}}fn=1,kv(),Mv(),Dv()}}function kv(){if(fn===1){fn=0;var r=Fi,i=Yo,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null;var d=pe.p;pe.p=2;var x=mt;mt|=4;try{dv(i,r);var b=ap,T=yy(r.containerInfo),A=b.focusedElem,L=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&gy(A.ownerDocument.documentElement,A)){if(L!==null&&kf(A)){var J=L.start,ae=L.end;if(ae===void 0&&(ae=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(ae,A.value.length);else{var ce=A.ownerDocument||document,X=ce&&ce.defaultView||window;if(X.getSelection){var re=X.getSelection(),Ee=A.textContent.length,ke=Math.min(L.start,Ee),Tt=L.end===void 0?ke:Math.min(L.end,Ee);!re.extend&&ke>Tt&&(T=Tt,Tt=ke,ke=T);var H=py(A,ke),q=py(A,Tt);if(H&&q&&(re.rangeCount!==1||re.anchorNode!==H.node||re.anchorOffset!==H.offset||re.focusNode!==q.node||re.focusOffset!==q.offset)){var Y=ce.createRange();Y.setStart(H.node,H.offset),re.removeAllRanges(),ke>Tt?(re.addRange(Y),re.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),re.addRange(Y))}}}}for(ce=[],re=A;re=re.parentNode;)re.nodeType===1&&ce.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var oe=ce[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}qd=!!ip,ap=ip=null}finally{mt=x,pe.p=d,Z.T=c}}r.current=i,fn=2}}function Mv(){if(fn===2){fn=0;var r=Fi,i=Yo,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=Z.T,Z.T=null;var d=pe.p;pe.p=2;var x=mt;mt|=4;try{av(r,i.alternate,i)}finally{mt=x,pe.p=d,Z.T=c}}fn=3}}function Dv(){if(fn===4||fn===3){fn=0,xi();var r=Fi,i=Yo,c=Qr,d=vv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Yo=Fi=null,Pv(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(zi=null),Mr(c),i=i.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(jt,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Z.T,x=pe.p,pe.p=2,Z.T=null;try{for(var b=r.onRecoverableError,T=0;T<d.length;T++){var A=d[T];b(A.value,{componentStack:A.stack})}}finally{Z.T=i,pe.p=x}}(Qr&3)!==0&&Cd(),yr(r),x=r.pendingLanes,(c&261930)!==0&&(x&42)!==0?r===$m?Ac++:(Ac=0,$m=r):Ac=0,Cc(0)}}function Pv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,lc(i)))}function Cd(){return kv(),Mv(),Dv(),jv()}function jv(){if(fn!==5)return!1;var r=Fi,i=Bm;Bm=0;var c=Mr(Qr),d=Z.T,x=pe.p;try{pe.p=32>c?32:c,Z.T=null,c=Hm,Hm=null;var b=Fi,T=Qr;if(fn=0,Yo=Fi=null,Qr=0,(mt&6)!==0)throw Error(s(331));var A=mt;if(mt|=4,gv(b.current),fv(b,b.current,T,c),mt=A,Cc(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(jt,b)}catch{}return!0}finally{pe.p=x,Z.T=d,Pv(r,i)}}function Lv(r,i,c){i=Ts(c,i),i=Tm(r.stateNode,i,2),r=ji(r,i,2),r!==null&&(ht(r,2),yr(r))}function vt(r,i,c){if(r.tag===3)Lv(r,r,c);else for(;i!==null;){if(i.tag===3){Lv(i,r,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zi===null||!zi.has(d))){r=Ts(c,r),c=Vx(2),d=ji(i,c,2),d!==null&&(Ux(c,d,i,r),ht(d,2),yr(d));break}}i=i.return}}function Qm(r,i,c){var d=r.pingCache;if(d===null){d=r.pingCache=new wS;var x=new Set;d.set(i,x)}else x=d.get(i),x===void 0&&(x=new Set,d.set(i,x));x.has(c)||(zm=!0,x.add(c),r=AS.bind(null,r,i,c),i.then(r,r))}function AS(r,i,c){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,At===r&&(Qe&c)===c&&(Bt===4||Bt===3&&(Qe&62914560)===Qe&&300>Ft()-wd?(mt&2)===0&&Qo(r,0):Fm|=c,Ko===Qe&&(Ko=0)),yr(r)}function Vv(r,i){i===0&&(i=St()),r=Pa(r,i),r!==null&&(ht(r,i),yr(r))}function CS(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),Vv(r,c)}function IS(r,i){var c=0;switch(r.tag){case 31:case 13:var d=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Vv(r,c)}function RS(r,i){return Pt(r,i)}var Id=null,Xo=null,Jm=!1,Rd=!1,Xm=!1,Bi=0;function yr(r){r!==Xo&&r.next===null&&(Xo===null?Id=Xo=r:Xo=Xo.next=r),Rd=!0,Jm||(Jm=!0,MS())}function Cc(r,i){if(!Xm&&Rd){Xm=!0;do for(var c=!1,d=Id;d!==null;){if(r!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var T=d.suspendedLanes,A=d.pingedLanes;b=(1<<31-ut(42|r)+1)-1,b&=x&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,zv(d,b))}else b=Qe,b=xe(d,d===At?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Ue(d,b)||(c=!0,zv(d,b));d=d.next}while(c);Xm=!1}}function kS(){Uv()}function Uv(){Rd=Jm=!1;var r=0;Bi!==0&&FS()&&(r=Bi);for(var i=Ft(),c=null,d=Id;d!==null;){var x=d.next,b=Ov(d,i);b===0?(d.next=null,c===null?Id=x:c.next=x,x===null&&(Xo=c)):(c=d,(r!==0||(b&3)!==0)&&(Rd=!0)),d=x}fn!==0&&fn!==5||Cc(r),Bi!==0&&(Bi=0)}function Ov(r,i){for(var c=r.suspendedLanes,d=r.pingedLanes,x=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var T=31-ut(b),A=1<<T,L=x[T];L===-1?((A&c)===0||(A&d)!==0)&&(x[T]=rt(A,i)):L<=i&&(r.expiredLanes|=A),b&=~A}if(i=At,c=Qe,c=xe(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===i&&(xt===2||xt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&ys(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ue(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(d!==null&&ys(d),Mr(c)){case 2:case 8:c=kr;break;case 32:c=is;break;case 268435456:c=He;break;default:c=is}return d=qv.bind(null,r),c=Pt(c,d),r.callbackPriority=i,r.callbackNode=c,i}return d!==null&&d!==null&&ys(d),r.callbackPriority=2,r.callbackNode=null,2}function qv(r,i){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Cd()&&r.callbackNode!==c)return null;var d=Qe;return d=xe(r,r===At?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(_v(r,d,i),Ov(r,Ft()),r.callbackNode!=null&&r.callbackNode===c?qv.bind(null,r):null)}function zv(r,i){if(Cd())return null;_v(r,i,!0)}function MS(){BS(function(){(mt&6)!==0?Pt(zn,kS):Uv()})}function Wm(){if(Bi===0){var r=Lo;r===0&&(r=gn,gn<<=1,(gn&261888)===0&&(gn=256)),Bi=r}return Bi}function Fv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:_o(""+r)}function Gv(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function DS(r,i,c,d,x){if(i==="submit"&&c&&c.stateNode===x){var b=Fv((x[xn]||null).action),T=d.submitter;T&&(i=(i=T[xn]||null)?Fv(i.formAction):T.getAttribute("formAction"),i!==null&&(b=i,T=null));var A=new ur("action","action",null,d,x);r.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Bi!==0){var L=T?Gv(x,T):new FormData(x);xm(c,{pending:!0,data:L,method:x.method,action:b},null,L)}}else typeof b=="function"&&(A.preventDefault(),L=T?Gv(x,T):new FormData(x),xm(c,{pending:!0,data:L,method:x.method,action:b},b,L))},currentTarget:x}]})}}for(var Zm=0;Zm<jf.length;Zm++){var ep=jf[Zm],PS=ep.toLowerCase(),jS=ep[0].toUpperCase()+ep.slice(1);Gs(PS,"on"+jS)}Gs(by,"onAnimationEnd"),Gs(_y,"onAnimationIteration"),Gs(wy,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(X2,"onTransitionRun"),Gs(W2,"onTransitionStart"),Gs(Z2,"onTransitionCancel"),Gs(Ey,"onTransitionEnd"),ar("onMouseEnter",["mouseout","mouseover"]),ar("onMouseLeave",["mouseout","mouseover"]),ar("onPointerEnter",["pointerout","pointerover"]),ar("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Bv(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],x=d.event;d=d.listeners;e:{var b=void 0;if(i)for(var T=d.length-1;0<=T;T--){var A=d[T],L=A.instance,J=A.currentTarget;if(A=A.listener,L!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=J;try{b(x)}catch(ae){Hu(ae)}x.currentTarget=null,b=L}else for(T=0;T<d.length;T++){if(A=d[T],L=A.instance,J=A.currentTarget,A=A.listener,L!==b&&x.isPropagationStopped())break e;b=A,x.currentTarget=J;try{b(x)}catch(ae){Hu(ae)}x.currentTarget=null,b=L}}}}function Ye(r,i){var c=i[go];c===void 0&&(c=i[go]=new Set);var d=r+"__bubble";c.has(d)||(Hv(i,r,2,!1),c.add(d))}function tp(r,i,c){var d=0;i&&(d|=4),Hv(c,r,d,i)}var kd="_reactListening"+Math.random().toString(36).slice(2);function np(r){if(!r[kd]){r[kd]=!0,zl.forEach(function(c){c!=="selectionchange"&&(LS.has(c)||tp(c,!1,r),tp(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[kd]||(i[kd]=!0,tp("selectionchange",!1,i))}}function Hv(r,i,c,d){switch(bb(i)){case 2:var x=uA;break;case 8:x=dA;break;default:x=yp}c=x.bind(null,i,c,r),x=void 0,!Sa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),d?x!==void 0?r.addEventListener(i,c,{capture:!0,passive:x}):r.addEventListener(i,c,!0):x!==void 0?r.addEventListener(i,c,{passive:x}):r.addEventListener(i,c,!1)}function sp(r,i,c,d,x){var b=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var A=d.stateNode.containerInfo;if(A===x)break;if(T===4)for(T=d.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;A!==null;){if(T=sr(A),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){d=b=T;continue e}A=A.parentNode}}d=d.return}Ni(function(){var J=b,ae=bs(c),ce=[];e:{var X=Ty.get(r);if(X!==void 0){var re=ur,Ee=r;switch(r){case"keypress":if(Ca(c)===0)break e;case"keydown":case"keyup":re=Fu;break;case"focusin":Ee="focus",re=Ra;break;case"focusout":Ee="blur",re=Ra;break;case"beforeblur":case"afterblur":re=Ra;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=E;break;case by:case _y:case wy:re=ju;break;case Ey:re=k;break;case"scroll":case"scrollend":re=Zl;break;case"wheel":re=se;break;case"copy":case"cut":case"paste":re=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=jr;break;case"toggle":case"beforetoggle":re=ze}var ke=(i&4)!==0,Tt=!ke&&(r==="scroll"||r==="scrollend"),H=ke?X!==null?X+"Capture":null:X;ke=[];for(var q=J,Y;q!==null;){var oe=q;if(Y=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Y===null||H===null||(oe=Os(q,H),oe!=null&&ke.push(Rc(q,oe,Y))),Tt)break;q=q.return}0<ke.length&&(X=new re(X,Ee,null,c,ae),ce.push({event:X,listeners:ke}))}}if((i&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",X&&c!==Jl&&(Ee=c.relatedTarget||c.fromElement)&&(sr(Ee)||Ee[tr]))break e;if((re||X)&&(X=ae.window===ae?ae:(X=ae.ownerDocument)?X.defaultView||X.parentWindow:window,re?(Ee=c.relatedTarget||c.toElement,re=J,Ee=Ee?sr(Ee):null,Ee!==null&&(Tt=l(Ee),ke=Ee.tag,Ee!==Tt||ke!==5&&ke!==27&&ke!==6)&&(Ee=null)):(re=null,Ee=J),re!==Ee)){if(ke=ec,oe="onMouseLeave",H="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(ke=jr,oe="onPointerLeave",H="onPointerEnter",q="pointer"),Tt=re==null?X:as(re),Y=Ee==null?X:as(Ee),X=new ke(oe,q+"leave",re,c,ae),X.target=Tt,X.relatedTarget=Y,oe=null,sr(ae)===J&&(ke=new ke(H,q+"enter",Ee,c,ae),ke.target=Y,ke.relatedTarget=Tt,oe=ke),Tt=oe,re&&Ee)t:{for(ke=VS,H=re,q=Ee,Y=0,oe=H;oe;oe=ke(oe))Y++;oe=0;for(var Ce=q;Ce;Ce=ke(Ce))oe++;for(;0<Y-oe;)H=ke(H),Y--;for(;0<oe-Y;)q=ke(q),oe--;for(;Y--;){if(H===q||q!==null&&H===q.alternate){ke=H;break t}H=ke(H),q=ke(q)}ke=null}else ke=null;re!==null&&$v(ce,X,re,ke,!1),Ee!==null&&Tt!==null&&$v(ce,Tt,Ee,ke,!0)}}e:{if(X=J?as(J):window,re=X.nodeName&&X.nodeName.toLowerCase(),re==="select"||re==="input"&&X.type==="file")var ot=cy;else if(oy(X))if(uy)ot=Y2;else{ot=$2;var Te=H2}else re=X.nodeName,!re||re.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?J&&bo(J.elementType)&&(ot=cy):ot=K2;if(ot&&(ot=ot(r,J))){ly(ce,ot,c,ae);break e}Te&&Te(r,X,J),r==="focusout"&&J&&X.type==="number"&&J.memoizedProps.value!=null&&Kl(X,"number",X.value)}switch(Te=J?as(J):window,r){case"focusin":(oy(Te)||Te.contentEditable==="true")&&(Co=Te,Mf=J,ic=null);break;case"focusout":ic=Mf=Co=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,xy(ce,c,ae);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":xy(ce,c,ae)}var Be;if(ft)e:{switch(r){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ao?ka(r,c)&&(Je="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Je="onCompositionStart");Je&&(fr&&c.locale!=="ko"&&(Ao||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ao&&(Be=Wl()):(cr=ae,Xl="value"in cr?cr.value:cr.textContent,Ao=!0)),Te=Md(J,Je),0<Te.length&&(Je=new hr(Je,r,null,c,ae),ce.push({event:Je,listeners:Te}),Be?Je.data=Be:(Be=So(c),Be!==null&&(Je.data=Be)))),(Be=ws?z2(r,c):F2(r,c))&&(Je=Md(J,"onBeforeInput"),0<Je.length&&(Te=new hr("onBeforeInput","beforeinput",null,c,ae),ce.push({event:Te,listeners:Je}),Te.data=Be)),DS(ce,r,J,c,ae)}Bv(ce,i)})}function Rc(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Md(r,i){for(var c=i+"Capture",d=[];r!==null;){var x=r,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Os(r,c),x!=null&&d.unshift(Rc(r,x,b)),x=Os(r,i),x!=null&&d.push(Rc(r,x,b))),r.tag===3)return d;r=r.return}return[]}function VS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $v(r,i,c,d,x){for(var b=i._reactName,T=[];c!==null&&c!==d;){var A=c,L=A.alternate,J=A.stateNode;if(A=A.tag,L!==null&&L===d)break;A!==5&&A!==26&&A!==27||J===null||(L=J,x?(J=Os(c,b),J!=null&&T.unshift(Rc(c,J,L))):x||(J=Os(c,b),J!=null&&T.push(Rc(c,J,L)))),c=c.return}T.length!==0&&r.push({event:i,listeners:T})}var US=/\r\n?/g,OS=/\u0000|\uFFFD/g;function Kv(r){return(typeof r=="string"?r:""+r).replace(US,`
`).replace(OS,"")}function Yv(r,i){return i=Kv(i),Kv(r)===i}function Et(r,i,c,d,x,b){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Kn(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Kn(r,""+d);break;case"className":os(r,"class",d);break;case"tabIndex":os(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":os(r,c,d);break;case"style":Ql(r,d,b);break;case"data":if(i!=="object"){os(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=_o(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(i!=="input"&&Et(r,i,"name",x.name,x,null),Et(r,i,"formEncType",x.formEncType,x,null),Et(r,i,"formMethod",x.formMethod,x,null),Et(r,i,"formTarget",x.formTarget,x,null)):(Et(r,i,"encType",x.encType,x,null),Et(r,i,"method",x.method,x,null),Et(r,i,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=_o(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=Us);break;case"onScroll":d!=null&&Ye("scroll",r);break;case"onScrollEnd":d!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=_o(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),xo(r,"popover",d);break;case"xlinkActuate":sn(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sn(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sn(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sn(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sn(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sn(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sn(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":xo(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Mu.get(c)||c,xo(r,c,d))}}function rp(r,i,c,d,x,b){switch(c){case"style":Ql(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(x.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Kn(r,d):(typeof d=="number"||typeof d=="bigint")&&Kn(r,""+d);break;case"onScroll":d!=null&&Ye("scroll",r);break;case"onScrollEnd":d!=null&&Ye("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),i=c.slice(2,x?c.length-7:void 0),b=r[xn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(i,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,d,x);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):xo(r,c,d)}}}function An(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var d=!1,x=!1,b;for(b in c)if(c.hasOwnProperty(b)){var T=c[b];if(T!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Et(r,i,b,T,c,null)}}x&&Et(r,i,"srcSet",c.srcSet,c,null),d&&Et(r,i,"src",c.src,c,null);return;case"input":Ye("invalid",r);var A=b=T=x=null,L=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var ae=c[d];if(ae!=null)switch(d){case"name":x=ae;break;case"type":T=ae;break;case"checked":L=ae;break;case"defaultChecked":J=ae;break;case"value":b=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:Et(r,i,d,ae,c,null)}}Iu(r,b,A,L,J,T,x,!1);return;case"select":Ye("invalid",r),d=T=b=null;for(x in c)if(c.hasOwnProperty(x)&&(A=c[x],A!=null))switch(x){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":d=A;default:Et(r,i,x,A,c,null)}i=b,c=T,r.multiple=!!d,i!=null?_i(r,!!d,i,!1):c!=null&&_i(r,!!d,c,!0);return;case"textarea":Ye("invalid",r),b=x=d=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":d=A;break;case"defaultValue":x=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Et(r,i,T,A,c,null)}wi(r,d,x,b);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Et(r,i,L,d,c,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(d=0;d<Ic.length;d++)Ye(Ic[d],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Et(r,i,J,d,c,null)}return;default:if(bo(i)){for(ae in c)c.hasOwnProperty(ae)&&(d=c[ae],d!==void 0&&rp(r,i,ae,d,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null&&Et(r,i,A,d,c,null))}function qS(r,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,T=null,A=null,L=null,J=null,ae=null;for(re in c){var ce=c[re];if(c.hasOwnProperty(re)&&ce!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":L=ce;default:d.hasOwnProperty(re)||Et(r,i,re,null,d,ce)}}for(var X in d){var re=d[X];if(ce=c[X],d.hasOwnProperty(X)&&(re!=null||ce!=null))switch(X){case"type":b=re;break;case"name":x=re;break;case"checked":J=re;break;case"defaultChecked":ae=re;break;case"value":T=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:re!==ce&&Et(r,i,X,re,d,ce)}}vo(r,T,A,L,J,ae,b,x);return;case"select":re=T=A=X=null;for(b in c)if(L=c[b],c.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":re=L;default:d.hasOwnProperty(b)||Et(r,i,b,null,d,L)}for(x in d)if(b=d[x],L=c[x],d.hasOwnProperty(x)&&(b!=null||L!=null))switch(x){case"value":X=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==L&&Et(r,i,x,b,d,L)}i=A,c=T,d=re,X!=null?_i(r,!!c,X,!1):!!d!=!!c&&(i!=null?_i(r,!!c,i,!0):_i(r,!!c,c?[]:"",!1));return;case"textarea":re=X=null;for(A in c)if(x=c[A],c.hasOwnProperty(A)&&x!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Et(r,i,A,null,d,x)}for(T in d)if(x=d[T],b=c[T],d.hasOwnProperty(T)&&(x!=null||b!=null))switch(T){case"value":X=x;break;case"defaultValue":re=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&Et(r,i,T,x,d,b)}Ru(r,X,re);return;case"option":for(var Ee in c)if(X=c[Ee],c.hasOwnProperty(Ee)&&X!=null&&!d.hasOwnProperty(Ee))switch(Ee){case"selected":r.selected=!1;break;default:Et(r,i,Ee,null,d,X)}for(L in d)if(X=d[L],re=c[L],d.hasOwnProperty(L)&&X!==re&&(X!=null||re!=null))switch(L){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Et(r,i,L,X,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in c)X=c[ke],c.hasOwnProperty(ke)&&X!=null&&!d.hasOwnProperty(ke)&&Et(r,i,ke,null,d,X);for(J in d)if(X=d[J],re=c[J],d.hasOwnProperty(J)&&X!==re&&(X!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Et(r,i,J,X,d,re)}return;default:if(bo(i)){for(var Tt in c)X=c[Tt],c.hasOwnProperty(Tt)&&X!==void 0&&!d.hasOwnProperty(Tt)&&rp(r,i,Tt,void 0,d,X);for(ae in d)X=d[ae],re=c[ae],!d.hasOwnProperty(ae)||X===re||X===void 0&&re===void 0||rp(r,i,ae,X,d,re);return}}for(var H in c)X=c[H],c.hasOwnProperty(H)&&X!=null&&!d.hasOwnProperty(H)&&Et(r,i,H,null,d,X);for(ce in d)X=d[ce],re=c[ce],!d.hasOwnProperty(ce)||X===re||X==null&&re==null||Et(r,i,ce,X,d,re)}function Qv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zS(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var x=c[d],b=x.transferSize,T=x.initiatorType,A=x.duration;if(b&&A&&Qv(T)){for(T=0,A=x.responseEnd,d+=1;d<c.length;d++){var L=c[d],J=L.startTime;if(J>A)break;var ae=L.transferSize,ce=L.initiatorType;ae&&Qv(ce)&&(L=L.responseEnd,T+=ae*(L<A?1:(A-J)/(L-J)))}if(--d,i+=8*(b+T)/(x.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ip=null,ap=null;function Dd(r){return r.nodeType===9?r:r.ownerDocument}function Jv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function op(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lp=null;function FS(){var r=window.event;return r&&r.type==="popstate"?r===lp?!1:(lp=r,!0):(lp=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,GS=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,BS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(r){return Zv.resolve(null).then(r).catch(HS)}:Wv;function HS(r){setTimeout(function(){throw r})}function Hi(r){return r==="head"}function eb(r,i){var c=i,d=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(d===0){r.removeChild(x),tl(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")kc(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,kc(c);for(var b=c.firstChild;b;){var T=b.nextSibling,A=b.nodeName;b[nr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=T}}else c==="body"&&kc(r.ownerDocument.body);c=x}while(c);tl(i)}function tb(r,i){var c=r;r=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=d}while(c)}function cp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":cp(c),yo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function $S(r,i,c,d){for(;r.nodeType===1;){var x=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[nr])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Is(r.nextSibling),r===null)break}return null}function KS(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Is(r.nextSibling),r===null))return null;return r}function nb(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Is(r.nextSibling),r===null))return null;return r}function up(r){return r.data==="$?"||r.data==="$~"}function dp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function YS(r,i){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Is(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var hp=null;function sb(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(i===0)return Is(r.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}r=r.nextSibling}return null}function rb(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return r;i--}else c!=="/$"&&c!=="/&"||i++}r=r.previousSibling}return null}function ib(r,i,c){switch(i=Dd(c),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function kc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);yo(r)}var Rs=new Map,ab=new Set;function Pd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Jr=pe.d;pe.d={f:QS,r:JS,D:XS,C:WS,L:ZS,m:eA,X:nA,S:tA,M:sA};function QS(){var r=Jr.f(),i=Nd();return r||i}function JS(r){var i=vs(r);i!==null&&i.tag===5&&i.type==="form"?Ex(i):Jr.r(r)}var Wo=typeof document>"u"?null:document;function ob(r,i,c){var d=Wo;if(d&&typeof i=="string"&&i){var x=$n(i);x='link[rel="'+r+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),ab.has(x)||(ab.add(x),r={rel:r,crossOrigin:c,href:i},d.querySelector(x)===null&&(i=d.createElement("link"),An(i,"link",r),nn(i),d.head.appendChild(i)))}}function XS(r){Jr.D(r),ob("dns-prefetch",r,null)}function WS(r,i){Jr.C(r,i),ob("preconnect",r,i)}function ZS(r,i,c){Jr.L(r,i,c);var d=Wo;if(d&&r&&i){var x='link[rel="preload"][as="'+$n(i)+'"]';i==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+$n(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+$n(c.imageSizes)+'"]')):x+='[href="'+$n(r)+'"]';var b=x;switch(i){case"style":b=Zo(r);break;case"script":b=el(r)}Rs.has(b)||(r=_({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),Rs.set(b,r),d.querySelector(x)!==null||i==="style"&&d.querySelector(Mc(b))||i==="script"&&d.querySelector(Dc(b))||(i=d.createElement("link"),An(i,"link",r),nn(i),d.head.appendChild(i)))}}function eA(r,i){Jr.m(r,i);var c=Wo;if(c&&r){var d=i&&typeof i.as=="string"?i.as:"script",x='link[rel="modulepreload"][as="'+$n(d)+'"][href="'+$n(r)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=el(r)}if(!Rs.has(b)&&(r=_({rel:"modulepreload",href:r},i),Rs.set(b,r),c.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dc(b)))return}d=c.createElement("link"),An(d,"link",r),nn(d),c.head.appendChild(d)}}}function tA(r,i,c){Jr.S(r,i,c);var d=Wo;if(d&&r){var x=rr(d).hoistableStyles,b=Zo(r);i=i||"default";var T=x.get(b);if(!T){var A={loading:0,preload:null};if(T=d.querySelector(Mc(b)))A.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},c),(c=Rs.get(b))&&fp(r,c);var L=T=d.createElement("link");nn(L),An(L,"link",r),L._p=new Promise(function(J,ae){L.onload=J,L.onerror=ae}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,jd(T,i,d)}T={type:"stylesheet",instance:T,count:1,state:A},x.set(b,T)}}}function nA(r,i){Jr.X(r,i);var c=Wo;if(c&&r){var d=rr(c).hoistableScripts,x=el(r),b=d.get(x);b||(b=c.querySelector(Dc(x)),b||(r=_({src:r,async:!0},i),(i=Rs.get(x))&&mp(r,i),b=c.createElement("script"),nn(b),An(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function sA(r,i){Jr.M(r,i);var c=Wo;if(c&&r){var d=rr(c).hoistableScripts,x=el(r),b=d.get(x);b||(b=c.querySelector(Dc(x)),b||(r=_({src:r,async:!0,type:"module"},i),(i=Rs.get(x))&&mp(r,i),b=c.createElement("script"),nn(b),An(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function lb(r,i,c,d){var x=(x=Ne.current)?Pd(x):null;if(!x)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Zo(c.href),c=rr(x).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Zo(c.href);var b=rr(x).hoistableStyles,T=b.get(r);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,T),(b=x.querySelector(Mc(r)))&&!b._p&&(T.instance=b,T.state.loading=5),Rs.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rs.set(r,c),b||rA(x,r,c,T.state))),i&&d===null)throw Error(s(528,""));return T}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=el(c),c=rr(x).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Zo(r){return'href="'+$n(r)+'"'}function Mc(r){return'link[rel="stylesheet"]['+r+"]"}function cb(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function rA(r,i,c,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),An(i,"link",c),nn(i),r.head.appendChild(i))}function el(r){return'[src="'+$n(r)+'"]'}function Dc(r){return"script[async]"+r}function ub(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+$n(c.href)+'"]');if(d)return i.instance=d,nn(d),d;var x=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),nn(d),An(d,"style",x),jd(d,c.precedence,r),i.instance=d;case"stylesheet":x=Zo(c.href);var b=r.querySelector(Mc(x));if(b)return i.state.loading|=4,i.instance=b,nn(b),b;d=cb(c),(x=Rs.get(x))&&fp(d,x),b=(r.ownerDocument||r).createElement("link"),nn(b);var T=b;return T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),An(b,"link",d),i.state.loading|=4,jd(b,c.precedence,r),i.instance=b;case"script":return b=el(c.src),(x=r.querySelector(Dc(b)))?(i.instance=x,nn(x),x):(d=c,(x=Rs.get(b))&&(d=_({},c),mp(d,x)),r=r.ownerDocument||r,x=r.createElement("script"),nn(x),An(x,"link",d),r.head.appendChild(x),i.instance=x);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,jd(d,c.precedence,r));return i.instance}function jd(r,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,T=0;T<d.length;T++){var A=d[T];if(A.dataset.precedence===i)b=A;else if(b!==x)break}b?b.parentNode.insertBefore(r,b.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function fp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ld=null;function db(r,i,c){if(Ld===null){var d=new Map,x=Ld=new Map;x.set(c,d)}else x=Ld,d=x.get(c),d||(d=new Map,x.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),x=0;x<c.length;x++){var b=c[x];if(!(b[nr]||b[tn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(i)||"";T=r+T;var A=d.get(T);A?A.push(b):d.set(T,[b])}}return d}function hb(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function iA(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function fb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function aA(r,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Zo(d.href),b=i.querySelector(Mc(x));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Vd.bind(r),i.then(r,r)),c.state.loading|=4,c.instance=b,nn(b);return}b=i.ownerDocument||i,d=cb(d),(x=Rs.get(x))&&fp(d,x),b=b.createElement("link"),nn(b);var T=b;T._p=new Promise(function(A,L){T.onload=A,T.onerror=L}),An(b,"link",d),c.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Vd.bind(r),i.addEventListener("load",c),i.addEventListener("error",c))}}var pp=0;function oA(r,i){return r.stylesheets&&r.count===0&&Od(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var d=setTimeout(function(){if(r.stylesheets&&Od(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+i);0<r.imgBytes&&pp===0&&(pp=62500*zS());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Od(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>pp?50:800)+i);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function Vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ud=null;function Od(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ud=new Map,i.forEach(lA,r),Ud=null,Vd.call(r))}function lA(r,i){if(!(i.state.loading&4)){var c=Ud.get(r);if(c)var d=c.get(null);else{c=new Map,Ud.set(r,c);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var T=x[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}x=i.instance,T=x.getAttribute("data-precedence"),b=c.get(T)||d,b===d&&c.set(null,x),c.set(T,x),this.count++,d=Vd.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),i.state.loading|=4}}var Pc={$$typeof:K,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function cA(r,i,c,d,x,b,T,A,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dt(0),this.hiddenUpdates=dt(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function mb(r,i,c,d,x,b,T,A,L,J,ae,ce){return r=new cA(r,i,c,T,L,J,ae,ce,A),i=1,b===!0&&(i|=24),b=cs(3,null,null,i),r.current=b,b.stateNode=r,i=Yf(),i.refCount++,r.pooledCache=i,i.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:i},Wf(b),r}function pb(r){return r?(r=ko,r):ko}function gb(r,i,c,d,x,b){x=pb(x),d.context===null?d.context=x:d.pendingContext=x,d=Pi(i),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=ji(r,d,i),c!==null&&(Wn(c,r,i),hc(c,r,i))}function yb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function gp(r,i){yb(r,i),(r=r.alternate)&&yb(r,i)}function xb(r){if(r.tag===13||r.tag===31){var i=Pa(r,67108864);i!==null&&Wn(i,r,67108864),gp(r,67108864)}}function vb(r){if(r.tag===13||r.tag===31){var i=ms();i=wa(i);var c=Pa(r,i);c!==null&&Wn(c,r,i),gp(r,i)}}var qd=!0;function uA(r,i,c,d){var x=Z.T;Z.T=null;var b=pe.p;try{pe.p=2,yp(r,i,c,d)}finally{pe.p=b,Z.T=x}}function dA(r,i,c,d){var x=Z.T;Z.T=null;var b=pe.p;try{pe.p=8,yp(r,i,c,d)}finally{pe.p=b,Z.T=x}}function yp(r,i,c,d){if(qd){var x=xp(d);if(x===null)sp(r,i,d,zd,c),_b(r,d);else if(fA(x,r,i,c,d))d.stopPropagation();else if(_b(r,d),i&4&&-1<hA.indexOf(r)){for(;x!==null;){var b=vs(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Se(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var L=1<<31-ut(T);A.entanglements[1]|=L,T&=~L}yr(b),(mt&6)===0&&(Ed=Ft()+500,Cc(0))}}break;case 31:case 13:A=Pa(b,2),A!==null&&Wn(A,b,2),Nd(),gp(b,2)}if(b=xp(d),b===null&&sp(r,i,d,zd,c),b===x)break;x=b}x!==null&&d.stopPropagation()}else sp(r,i,d,null,c)}}function xp(r){return r=bs(r),vp(r)}var zd=null;function vp(r){if(zd=null,r=sr(r),r!==null){var i=l(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=u(i),r!==null)return r;r=null}else if(c===31){if(r=h(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return zd=r,null}function bb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case zn:return 2;case kr:return 8;case is:case fe:return 32;case He:return 268435456;default:return 32}default:return 32}}var bp=!1,$i=null,Ki=null,Yi=null,jc=new Map,Lc=new Map,Qi=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _b(r,i){switch(r){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":jc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(i.pointerId)}}function Vc(r,i,c,d,x,b){return r===null||r.nativeEvent!==b?(r={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},i!==null&&(i=vs(i),i!==null&&xb(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),r)}function fA(r,i,c,d,x){switch(i){case"focusin":return $i=Vc($i,r,i,c,d,x),!0;case"dragenter":return Ki=Vc(Ki,r,i,c,d,x),!0;case"mouseover":return Yi=Vc(Yi,r,i,c,d,x),!0;case"pointerover":var b=x.pointerId;return jc.set(b,Vc(jc.get(b)||null,r,i,c,d,x)),!0;case"gotpointercapture":return b=x.pointerId,Lc.set(b,Vc(Lc.get(b)||null,r,i,c,d,x)),!0}return!1}function wb(r){var i=sr(r.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){r.blockedOn=i,Ls(r.priority,function(){vb(c)});return}}else if(i===31){if(i=h(c),i!==null){r.blockedOn=i,Ls(r.priority,function(){vb(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Fd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=xp(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Jl=d,c.target.dispatchEvent(d),Jl=null}else return i=vs(c),i!==null&&xb(i),r.blockedOn=c,!1;i.shift()}return!0}function Eb(r,i,c){Fd(r)&&c.delete(i)}function mA(){bp=!1,$i!==null&&Fd($i)&&($i=null),Ki!==null&&Fd(Ki)&&(Ki=null),Yi!==null&&Fd(Yi)&&(Yi=null),jc.forEach(Eb),Lc.forEach(Eb)}function Gd(r,i){r.blockedOn===i&&(r.blockedOn=null,bp||(bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mA)))}var Bd=null;function Tb(r){Bd!==r&&(Bd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bd===r&&(Bd=null);for(var i=0;i<r.length;i+=3){var c=r[i],d=r[i+1],x=r[i+2];if(typeof d!="function"){if(vp(d||c)===null)continue;break}var b=vs(c);b!==null&&(r.splice(i,3),i-=3,xm(b,{pending:!0,data:x,method:c.method,action:d},d,x))}}))}function tl(r){function i(L){return Gd(L,r)}$i!==null&&Gd($i,r),Ki!==null&&Gd(Ki,r),Yi!==null&&Gd(Yi,r),jc.forEach(i),Lc.forEach(i);for(var c=0;c<Qi.length;c++){var d=Qi[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Qi.length&&(c=Qi[0],c.blockedOn===null);)wb(c),c.blockedOn===null&&Qi.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var x=c[d],b=c[d+1],T=x[xn]||null;if(typeof b=="function")T||Tb(c);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(x=b,T=b[xn]||null)A=T.formAction;else if(vp(x)!==null)continue}else A=T.action;typeof A=="function"?c[d+1]=A:(c.splice(d,3),d-=3),Tb(c)}}}function Nb(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function i(){x!==null&&(x(),x=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),x!==null&&(x(),x=null)}}}function _p(r){this._internalRoot=r}Hd.prototype.render=_p.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,d=ms();gb(c,d,r,i,null,null)},Hd.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;gb(r.current,2,null,r,null,null),Nd(),i[tr]=null}};function Hd(r){this._internalRoot=r}Hd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Nu();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Qi.length&&i!==0&&i<Qi[c].priority;c++);Qi.splice(c,0,r),c===0&&wb(r)}};var Sb=e.version;if(Sb!=="19.2.0")throw Error(s(527,Sb,"19.2.0"));pe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var pA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{jt=$d.inject(pA),Nt=$d}catch{}}return Oc.createRoot=function(r,i){if(!a(r))throw Error(s(299));var c=!1,d="",x=Dx,b=Px,T=jx;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=mb(r,1,!1,null,null,c,d,null,x,b,T,Nb),r[tr]=i.current,np(r),new _p(i)},Oc.hydrateRoot=function(r,i,c){if(!a(r))throw Error(s(299));var d=!1,x="",b=Dx,T=Px,A=jx,L=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(L=c.formState)),i=mb(r,1,!0,i,c??null,d,x,L,b,T,A,Nb),i.context=pb(null),c=i.current,d=ms(),d=wa(d),x=Pi(d),x.callback=null,ji(c,x,d),c=d,i.current.lanes=c,ht(i,c),yr(i),r[tr]=i.current,np(r),new Hd(i)},Oc.version="19.2.0",Oc}var Lb;function NA(){if(Lb)return Tp.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tp.exports=TA(),Tp.exports}var SA=NA();const AA=iE(SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Vb=n=>{const e=IA(n);return e.charAt(0).toUpperCase()+e.slice(1)},oE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),RA=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=G.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>G.createElement("svg",{ref:p,...kA,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:oE("lucide",a),...!l&&!RA(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,v])=>G.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,e)=>{const t=G.forwardRef(({className:s,...a},l)=>G.createElement(MA,{ref:l,iconNode:e,className:oE(`lucide-${CA(Vb(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Vb(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],PA=ge("activity",DA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hh=ge("arrow-left",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ut=ge("arrow-right",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],eo=ge("award",VA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],OA=ge("bell",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],On=ge("book-open",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],FA=ge("book",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xl=ge("brain",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],lE=ge("briefcase",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fh=ge("calendar",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],cE=ge("chart-column",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],YA=ge("chart-no-axes-column-increasing",KA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],to=ge("chevron-down",QA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vr=ge("chevron-left",JA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cp=ge("chevron-right",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mh=ge("circle-alert",WA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],la=ge("circle-check-big",ZA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],es=ge("circle-check",eC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ph=ge("circle-plus",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zr=ge("circle-question-mark",nC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],rC=ge("circle-user",sC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],aC=ge("circle-x",iC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hh=ge("clock",oC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],cC=ge("cloud-upload",lC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Sl=ge("crown",uC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jp=ge("download",dC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xp=ge("eye",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Wp=ge("facebook",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],pC=ge("file-check",mC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],yC=ge("file-plus",gC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],vC=ge("file-search",xC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ar=ge("file-text",bC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Gg=ge("flag",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],gh=ge("flame",wC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],zc=ge("folder-open",EC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],NC=ge("globe",TC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ri=ge("graduation-cap",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],yh=ge("house",AC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],IC=ge("info",CC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Bg=ge("languages",RC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ca=ge("layers",kC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ub=ge("layout-dashboard",MC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],PC=ge("link",DC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ob=ge("list",jC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ht=ge("loader-circle",LC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Zp=ge("log-in",VC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ya=ge("lock",UC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],su=ge("log-out",OC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eg=ge("mail",qC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tg=ge("map-pin",zC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],GC=ge("medal",FC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Yc=ge("megaphone",BC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],$C=ge("menu",HC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Hg=ge("message-circle",KC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ll=ge("message-square",YC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],no=ge("monitor",QC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],uE=ge("move-right",JC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],WC=ge("octagon-alert",XC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],qb=ge("palette",ZC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tI=ge("pen-line",eI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],$g=ge("pen-tool",nI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],rI=ge("percent",sI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],aI=ge("quote",iI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dE=ge("refresh-cw",oI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hE=ge("rotate-ccw",lI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sa=ge("save",cI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],xh=ge("school",uI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ua=ge("search",dI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fI=ge("send",hI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pI=ge("share-2",mI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ng=ge("shield-alert",gI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xI=ge("shield-check",yI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],bI=ge("smartphone",vI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fE=ge("sparkles",_I);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sg=ge("square-pen",wI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ei=ge("star",EI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mE=ge("tag",TI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kg=ge("target",NI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],AI=ge("text-align-start",SI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],II=ge("thumbs-up",CI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],pE=ge("timer",RI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rg=ge("trash-2",kI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],DI=ge("trending-up",MI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ig=ge("triangle-alert",PI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],cl=ge("trophy",jI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],VI=ge("type",LI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ln=ge("user",UI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qI=ge("users",OI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],br=ge("x",zI);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$h=ge("zap",FI),GI=()=>{};var zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},BI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let w=(h&15)<<2|m>>6,S=m&63;p||(S=64,u||(w=64)),s.push(t[v],t[_],t[w],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||m==null||_==null)throw new HI;const w=l<<2|h>>4;if(s.push(w),m!==64){const S=h<<4&240|m>>2;if(s.push(S),_!==64){const M=m<<6&192|_;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(n){const e=gE(n);return yE.encodeByteArray(e,!0)},vh=function(n){return $I(n).replace(/\./g,"")},xE=function(n){try{return yE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=()=>KI().__FIREBASE_DEFAULTS__,QI=()=>{if(typeof process>"u"||typeof zb>"u")return;const n=zb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xE(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return GI()||YI()||QI()||JI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vE=n=>{var e,t;return(t=(e=Kh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},XI=n=>{const e=vE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},bE=()=>{var n;return(n=Kh())==null?void 0:n.config},_E=n=>{var e;return(e=Kh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vh(JSON.stringify(t)),vh(JSON.stringify(u)),""].join(".")}const Qc={};function eR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?n.emulator.push(e):n.prod.push(e);return n}function tR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Fb=!1;function EE(n,e){if(typeof window>"u"||typeof document>"u"||!Al(window.location.host)||Qc[n]===e||Qc[n]||Fb)return;Qc[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",l=eR().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Fb=!0,u()},w}function v(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=tR(s),S=t("text"),M=document.getElementById(S)||document.createElement("span"),B=t("learnmore"),F=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),ne=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;h(K),v(F,B);const ie=m();p(ne,ee),K.append(ne,M,F,ie),document.body.appendChild(K)}l?(M.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function sR(){var e;const n=(e=Kh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aR(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function lR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class Ws extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=cR,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?uR(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Ws(a,h,s)}}function uR(n,e){return n.replace(dR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const dR=/\{\$([^}]+)}/g;function hR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ii(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(Gb(l)&&Gb(u)){if(!ii(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Gb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Gc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fR(n,e){const t=new mR(n,e);return t.subscribe.bind(t)}class mR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Ip),a.error===void 0&&(a.error=Ip),a.complete===void 0&&(a.complete=Ip);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,yR=2,xR=14400*1e3,vR=.5;function Bb(n,e=gR,t=yR){const s=e*Math.pow(t,n),a=Math.round(vR*s*(Math.random()-.5)*2);return Math.min(xR,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n){return n&&n._delegate?n._delegate:n}class Ys{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new WI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wR(e))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ka){return this.instances.has(e)}getOptions(e=Ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_R(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ka){return this.component?this.component.multipleInstances?e:Ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(n){return n===Ka?void 0:n}function wR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const TR={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},NR=Xe.INFO,SR={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},AR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=SR[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=NR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const CR=(n,e)=>e.some(t=>n instanceof t);let Hb,$b;function IR(){return Hb||(Hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RR(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,ag=new WeakMap,CE=new WeakMap,Rp=new WeakMap,Yg=new WeakMap;function kR(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ra(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,n)}).catch(()=>{}),Yg.set(e,n),e}function MR(n){if(ag.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});ag.set(n,e)}let og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DR(n){og=n(og)}function PR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(kp(this),e,...t);return CE.set(s,e.sort?e.sort():[e]),ra(s)}:RR().includes(n)?function(...e){return n.apply(kp(this),e),ra(AE.get(this))}:function(...e){return ra(n.apply(kp(this),e))}}function jR(n){return typeof n=="function"?PR(n):(n instanceof IDBTransaction&&MR(n),CR(n,IR())?new Proxy(n,og):n)}function ra(n){if(n instanceof IDBRequest)return kR(n);if(Rp.has(n))return Rp.get(n);const e=jR(n);return e!==n&&(Rp.set(n,e),Yg.set(e,n)),e}const kp=n=>Yg.get(n);function IE(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=ra(u);return s&&u.addEventListener("upgradeneeded",p=>{s(ra(u.result),p.oldVersion,p.newVersion,ra(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const LR=["get","getKey","getAll","getAllKeys","count"],VR=["put","add","delete","clear"],Mp=new Map;function Kb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mp.get(e))return Mp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=VR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||LR.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&p.done]))[0]};return Mp.set(e,l),l}DR(n=>({...n,get:(e,t,s)=>Kb(e,t)||n.get(e,t,s),has:(e,t)=>!!Kb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function OR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",Yb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Yh("@firebase/app"),qR="@firebase/app-compat",zR="@firebase/analytics-compat",FR="@firebase/analytics",GR="@firebase/app-check-compat",BR="@firebase/app-check",HR="@firebase/auth",$R="@firebase/auth-compat",KR="@firebase/database",YR="@firebase/data-connect",QR="@firebase/database-compat",JR="@firebase/functions",XR="@firebase/functions-compat",WR="@firebase/installations",ZR="@firebase/installations-compat",e4="@firebase/messaging",t4="@firebase/messaging-compat",n4="@firebase/performance",s4="@firebase/performance-compat",r4="@firebase/remote-config",i4="@firebase/remote-config-compat",a4="@firebase/storage",o4="@firebase/storage-compat",l4="@firebase/firestore",c4="@firebase/ai",u4="@firebase/firestore-compat",d4="firebase",h4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",f4={[lg]:"fire-core",[qR]:"fire-core-compat",[FR]:"fire-analytics",[zR]:"fire-analytics-compat",[BR]:"fire-app-check",[GR]:"fire-app-check-compat",[HR]:"fire-auth",[$R]:"fire-auth-compat",[KR]:"fire-rtdb",[YR]:"fire-data-connect",[QR]:"fire-rtdb-compat",[JR]:"fire-fn",[XR]:"fire-fn-compat",[WR]:"fire-iid",[ZR]:"fire-iid-compat",[e4]:"fire-fcm",[t4]:"fire-fcm-compat",[n4]:"fire-perf",[s4]:"fire-perf-compat",[r4]:"fire-rc",[i4]:"fire-rc-compat",[a4]:"fire-gcs",[o4]:"fire-gcs-compat",[l4]:"fire-fst",[u4]:"fire-fst-compat",[c4]:"fire-vertex","fire-js":"fire-js",[d4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,m4=new Map,ug=new Map;function Qb(n,e){try{n.container.addComponent(e)}catch(t){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cr(n){const e=n.name;if(ug.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,n);for(const t of bh.values())Qb(t,n);for(const t of m4.values())Qb(t,n);return!0}function ho(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ks(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new uo("app","Firebase",p4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=h4;function RE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:cg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(t||(t=bE()),!t)throw ia.create("no-options");const l=bh.get(a);if(l){if(ii(t,l.options)&&ii(s,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const u=new ER(a);for(const p of ug.values())u.addComponent(p);const h=new g4(t,s,u);return bh.set(a,h),h}function Qg(n=cg){const e=bh.get(n);if(!e&&n===cg&&bE())return RE();if(!e)throw ia.create("no-app",{appName:n});return e}function Ds(n,e,t){let s=f4[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(u.join(" "));return}Cr(new Ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="firebase-heartbeat-database",x4=1,ru="firebase-heartbeat-store";let Dp=null;function kE(){return Dp||(Dp=IE(y4,x4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),Dp}async function v4(n){try{const t=(await kE()).transaction(ru),s=await t.objectStore(ru).get(ME(n));return await t.done,s}catch(e){if(e instanceof Ws)ai.warn(e.message);else{const t=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(t.message)}}}async function Jb(n,e){try{const s=(await kE()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,ME(n)),await s.done}catch(t){if(t instanceof Ws)ai.warn(t.message);else{const s=ia.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ai.warn(s.message)}}}function ME(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=1024,_4=30;class w4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Xb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_4){const u=N4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ai.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xb(),{heartbeatsToSend:s,unsentEntries:a}=E4(this._heartbeatsCache.heartbeats),l=vh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ai.warn(t),""}}}function Xb(){return new Date().toISOString().substring(0,10)}function E4(n,e=b4){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Wb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Wb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class T4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await v4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wb(n){return vh(JSON.stringify({version:2,heartbeats:n})).length}function N4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n){Cr(new Ys("platform-logger",e=>new UR(e),"PRIVATE")),Cr(new Ys("heartbeat",e=>new w4(e),"PRIVATE")),Ds(lg,Yb,n),Ds(lg,Yb,"esm2020"),Ds("fire-js","")}S4("");var A4="firebase",C4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(A4,C4,"app");function DE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I4=DE,PE=new uo("auth","Firebase",DE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Yh("@firebase/auth");function R4(n,...e){_h.logLevel<=Xe.WARN&&_h.warn(`Auth (${Cl}): ${n}`,...e)}function eh(n,...e){_h.logLevel<=Xe.ERROR&&_h.error(`Auth (${Cl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(n,...e){throw Jg(n,...e)}function _r(n,...e){return Jg(n,...e)}function jE(n,e,t){const s={...I4(),[e]:t};return new uo("auth","Firebase",s).create(e,{appName:n.name})}function ti(n){return jE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return PE.create(n,...e)}function Me(n,e,...t){if(!n)throw Jg(e,...t)}function Xr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eh(e),new Error(e)}function oi(n,e){n||Xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function k4(){return Zb()==="http:"||Zb()==="https:"}function Zb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k4()||TE()||"connection"in navigator)?navigator.onLine:!0}function D4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=nR()||iR()}get(){return M4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n,e){oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L4=new gu(3e4,6e4);function hi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fi(n,e,t,s,a={}){return VE(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=pu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return rR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Al(n.emulatorConfig.host)&&(m.credentials="include"),LE.fetch()(await UE(n,n.config.apiHost,t,h),m)})}async function VE(n,e,t){n._canInitEmulator=!1;const s={...P4,...e};try{const a=new U4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Kd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Kd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Kd(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw jE(n,v,m);Qs(n,v)}}catch(a){if(a instanceof Ws)throw a;Qs(n,"network-request-failed",{message:String(a)})}}async function yu(n,e,t,s,a={}){const l=await fi(n,e,t,s,a);return"mfaPendingCredential"in l&&Qs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function UE(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?Xg(n.config,a):`${n.config.apiScheme}://${a}`;return j4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function V4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(_r(this.auth,"network-request-failed")),L4.get())})}}function Kd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=_r(n,e,s);return a.customData._tokenResponse=t,a}function e_(n){return n!==void 0&&n.enterprise!==void 0}class O4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q4(n,e){return fi(n,"GET","/v2/recaptchaConfig",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(n,e){return fi(n,"POST","/v1/accounts:delete",e)}async function wh(n,e){return fi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F4(n,e=!1){const t=Kt(n),s=await t.getIdToken(e),a=Wg(s);Me(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Jc(Pp(a.auth_time)),issuedAtTime:Jc(Pp(a.iat)),expirationTime:Jc(Pp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pp(n){return Number(n)*1e3}function Wg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const a=xE(t);return a?JSON.parse(a):(eh("Failed to decode base64 JWT payload"),null)}catch(a){return eh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function t_(n){const e=Wg(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ws&&G4(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function G4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await iu(n,wh(e,{idToken:t}));Me(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?OE(a.providerUserInfo):[],u=$4(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),m=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function H4(n){const e=Kt(n);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $4(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function OE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(n,e){const t=await VE(n,{},async()=>{const s=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await UE(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Al(n.emulatorConfig.host)&&(p.credentials="include"),LE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y4(n,e){return fi(n,"POST","/v2/accounts:revokeToken",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=t_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await K4(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new ul;return s&&(Me(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Me(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Me(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return Xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $s{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new B4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return F4(this,e)}reload(){return H4(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await iu(this,z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:S,providerData:M,stsTokenManager:B}=t;Me(_&&B,e,"internal-error");const F=ul.fromJSON(this.name,B);Me(typeof _=="string",e,"internal-error"),Xi(s,e.name),Xi(a,e.name),Me(typeof w=="boolean",e,"internal-error"),Me(typeof S=="boolean",e,"internal-error"),Xi(l,e.name),Xi(u,e.name),Xi(h,e.name),Xi(p,e.name),Xi(m,e.name),Xi(v,e.name);const ee=new $s({uid:_,auth:e,email:a,emailVerified:w,displayName:s,isAnonymous:S,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:F,createdAt:m,lastLoginAt:v});return M&&Array.isArray(M)&&(ee.providerData=M.map(ne=>({...ne}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const a=new ul;a.updateFromServerResponse(t);const l=new $s({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Eh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Me(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?OE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new ul;h.updateFromIdToken(s);const p=new $s({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;function Wr(n){oi(n instanceof Function,"Expected a class definition");let e=n_.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,n_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qE.type="NONE";const s_=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n,e,t){return`firebase:${n}:${e}:${t}`}class dl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=th(this.userKey,a.apiKey,l),this.fullPersistenceKey=th("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wh(this.auth,{idToken:e}).catch(()=>{});return t?$s._fromGetAccountInfoResponse(this.auth,t,e):null}return $s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new dl(Wr(s_),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Wr(s_);const u=th(s,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(u);if(v){let _;if(typeof v=="string"){const w=await wh(e,{idToken:v}).catch(()=>{});if(!w)break;_=await $s._fromGetAccountInfoResponse(e,w,v)}else _=$s._fromJSON(e,v);m!==l&&(h=_),l=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new dl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new dl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(KE(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(HE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zE(n=qn()){return/firefox\//i.test(n)}function FE(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(n=qn()){return/crios\//i.test(n)}function BE(n=qn()){return/iemobile/i.test(n)}function HE(n=qn()){return/android/i.test(n)}function $E(n=qn()){return/blackberry/i.test(n)}function KE(n=qn()){return/webos/i.test(n)}function Zg(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Q4(n=qn()){var e;return Zg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function J4(){return aR()&&document.documentMode===10}function YE(n=qn()){return Zg(n)||HE(n)||KE(n)||$E(n)||/windows phone/i.test(n)||BE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e=[]){let t;switch(n){case"Browser":t=r_(qn());break;case"Worker":t=`${r_(qn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n,e={}){return fi(n,"GET","/v2/passwordPolicy",hi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=6;class e5{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Z4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new X4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wh(this,{idToken:e}),s=await $s._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ks(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ks(this.app))return Promise.reject(ti(this));const t=e?Kt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ks(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W4(this),t=new e5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Y4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wr(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&R4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ya(n){return Kt(n)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(n){Qh=n}function JE(n){return Qh.loadJS(n)}function s5(){return Qh.recaptchaEnterpriseScript}function r5(){return Qh.gapiScript}function i5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class a5{constructor(){this.enterprise=new o5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class o5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const l5="recaptcha-enterprise",XE="NO_RECAPTCHA";class c5{constructor(e){this.type=l5,this.auth=ya(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{q4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new O4(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(p=>{h(p)})})}function a(l,u,h){const p=window.grecaptcha;e_(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(XE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a5().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!t&&e_(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=s5();p.length!==0&&(p+=h),JE(p).then(()=>{a(h,l,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function a_(n,e,t,s=!1,a=!1){const l=new c5(n);let u;if(a)u=XE;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Th(n,e,t,s,a){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await a_(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await a_(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e){const t=ho(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ii(l,e??{}))return a;Qs(a,"already-initialized")}return t.initialize({options:e})}function d5(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Wr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function h5(n,e,t){const s=ya(n);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=WE(e),{host:u,port:h}=f5(e),p=h===null?"":`:${h}`,m={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(ii(m,s.config.emulator)&&ii(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Al(u)?(wE(`${l}//${u}${p}`),EE("Auth",!0)):m5()}function WE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f5(n){const e=WE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:o_(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:o_(u)}}}function o_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function m5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function p5(n,e){return fi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",hi(n,e))}async function y5(n,e){return fi(n,"POST","/v1/accounts:sendOobCode",hi(n,e))}async function x5(n,e){return y5(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",hi(n,e))}async function b5(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends e0{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,t,"signInWithPassword",g5);case"emailLink":return v5(e,{email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Th(e,s,"signUpPassword",p5);case"emailLink":return b5(e,{idToken:t,email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="http://localhost";class so extends e0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new so(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return hl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,hl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hl(e,t)}buildRequest(){const e={requestUri:_5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E5(n){const e=Fc(Gc(n)).link,t=e?Fc(Gc(e)).deep_link_id:null,s=Fc(Gc(n)).deep_link_id;return(s?Fc(Gc(s)).link:null)||s||t||e||n}class t0{constructor(e){const t=Fc(Gc(e)),s=t.apiKey??null,a=t.oobCode??null,l=w5(t.mode??null);Me(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=E5(e);try{return new t0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=t0.parseLink(t);return Me(s,"argument-error"),au._fromEmailAndCode(e,s.code,s.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends ZE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends xu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Zi.credential(t,s)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends xu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends xu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ta.credential(t,s)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(n,e){return yu(n,"POST","/v1/accounts:signUp",hi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await $s._fromIdTokenResponse(e,s,a),u=l_(s);return new ro({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=l_(s);return new ro({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function l_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Ws{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Nh(e,t,s,a)}}function eT(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,l,e,s):l})}async function N5(n,e,t=!1){const s=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ro._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e,t=!1){const{auth:s}=n;if(ks(s.app))return Promise.reject(ti(s));const a="reauthenticate";try{const l=await iu(n,eT(s,a,e,n),t);Me(l.idToken,s,"internal-error");const u=Wg(l.idToken);Me(u,s,"internal-error");const{sub:h}=u;return Me(n.uid===h,s,"user-mismatch"),ro._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qs(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n,e,t=!1){if(ks(n.app))return Promise.reject(ti(n));const s="signIn",a=await eT(n,s,e),l=await ro._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function A5(n,e){return tT(ya(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(n){const e=ya(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C5(n,e,t){const s=ya(n);await Th(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",x5)}async function I5(n,e,t){if(ks(n.app))return Promise.reject(ti(n));const s=ya(n),u=await Th(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nT(n),p}),h=await ro._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function R5(n,e,t){return ks(n.app)?Promise.reject(ti(n)):A5(Kt(n),Il.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nT(n),s})}function k5(n,e,t,s){return Kt(n).onIdTokenChanged(e,t,s)}function M5(n,e,t){return Kt(n).beforeAuthStateChanged(e,t)}function D5(n,e,t,s){return Kt(n).onAuthStateChanged(e,t,s)}function P5(n){return Kt(n).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=1e3,L5=10;class rT extends sT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);J4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,L5):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},j5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const V5=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends sT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iT.type="SESSION";const aT=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Jh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,l)),p=await U5(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const m=n0("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function q5(n){wr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function z5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function G5(){return oT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebaseLocalStorageDb",B5=1,Ah="firebaseLocalStorage",cT="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function H5(){const n=indexedDB.deleteDatabase(lT);return new vu(n).toPromise()}function fg(){const n=indexedDB.open(lT,B5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ah,{keyPath:cT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await H5(),e(await fg()))})})}async function c_(n,e,t){const s=Xh(n,!0).put({[cT]:e,value:t});return new vu(s).toPromise()}async function $5(n,e){const t=Xh(n,!1).get(e),s=await new vu(t).toPromise();return s===void 0?null:s.value}function u_(n,e){const t=Xh(n,!0).delete(e);return new vu(t).toPromise()}const K5=800,Y5=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Y5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(G5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await z5(),!this.activeServiceWorker)return;this.sender=new O5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await c_(e,Sh,"1"),await u_(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>c_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>$5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Xh(a,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const Q5=uT;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n,e){return e?Wr(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends e0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X5(n){return tT(n.auth,new s0(n),n.bypassAuthState)}function W5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),S5(t,new s0(n),n.bypassAuthState)}async function Z5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),N5(t,new s0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X5;case"linkViaPopup":case"linkViaRedirect":return Z5;case"reauthViaPopup":case"reauthViaRedirect":return W5;default:Qs(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new gu(2e3,1e4);class al extends dT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,al.currentPopupAction&&al.currentPopupAction.cancel(),al.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=n0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,al.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ek.get())};e()}}al.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="pendingRedirect",nh=new Map;class nk extends dT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const s=await sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sk(n,e){const t=ak(e),s=ik(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function rk(n,e){nh.set(n._key(),e)}function ik(n){return Wr(n._redirectPersistence)}function ak(n){return th(tk,n.config.apiKey,n.name)}async function ok(n,e,t=!1){if(ks(n.app))return Promise.reject(ti(n));const s=ya(n),a=J5(s,e),u=await new nk(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=600*1e3;class ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!hT(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n,e={}){return fi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fk=/^https?/;async function mk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dk(n);for(const t of e)try{if(pk(t))return}catch{}Qs(n,"unauthorized-domain")}function pk(n){const e=dg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!fk.test(t))return!1;if(hk.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new gu(3e4,6e4);function h_(){const n=wr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yk(n){return new Promise((e,t)=>{var a,l,u;function s(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),t(_r(n,"network-request-failed"))},timeout:gk.get()})}if((l=(a=wr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=wr().gapi)!=null&&u.load)s();else{const h=i5("iframefcb");return wr()[h]=()=>{gapi.load?s():t(_r(n,"network-request-failed"))},JE(`${r5()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw sh=null,e})}let sh=null;function xk(n){return sh=sh||yk(n),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new gu(5e3,15e3),bk="__/auth/iframe",_k="emulator/auth/iframe",wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ek=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tk(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Xg(e,_k):`https://${n.config.authDomain}/${bk}`,s={apiKey:e.apiKey,appName:n.name,v:Cl},a=Ek.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pu(s).slice(1)}`}async function Nk(n){const e=await xk(n),t=wr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:Tk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wk,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=_r(n,"network-request-failed"),h=wr().setTimeout(()=>{l(u)},vk.get());function p(){wr().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ak=500,Ck=600,Ik="_blank",Rk="http://localhost";class f_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kk(n,e,t,s=Ak,a=Ck){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...Sk,width:s.toString(),height:a.toString(),top:l,left:u},m=qn().toLowerCase();t&&(h=GE(m)?Ik:t),zE(m)&&(e=e||Rk,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[S,M])=>`${w}${S}=${M},`,"");if(Q4(m)&&h!=="_self")return Mk(e||"",h),new f_(null);const _=window.open(e||"",h,v);Me(_,n,"popup-blocked");try{_.focus()}catch{}return new f_(_)}function Mk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="__/auth/handler",Pk="emulator/auth/handler",jk=encodeURIComponent("fac");async function m_(n,e,t,s,a,l){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Cl,eventId:a};if(e instanceof ZE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",hR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof xu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),m=p?`#${jk}=${encodeURIComponent(p)}`:"";return`${Lk(n)}?${pu(h).slice(1)}${m}`}function Lk({config:n}){return n.emulator?Xg(n,Pk):`https://${n.authDomain}/${Dk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class Vk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=ok,this._overrideRedirectResult=rk}async _openPopup(e,t,s,a){var u;oi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await m_(e,t,s,dg(),a);return kk(e,l,n0())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await m_(e,t,s,dg(),a);return q5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(oi(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Nk(e),s=new ck(e);return t.register("authEvent",a=>(Me(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jp,{type:jp},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[jp];l!==void 0&&t(!!l),Qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YE()||FE()||Zg()}}const Uk=Vk;var p_="@firebase/auth",g_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zk(n){Cr(new Ys("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QE(n)},m=new t5(s,a,l,p);return d5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Cr(new Ys("auth-internal",e=>{const t=ya(e.getProvider("auth").getImmediate());return(s=>new Ok(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(p_,g_,qk(n)),Ds(p_,g_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=300,Gk=_E("authIdTokenMaxAge")||Fk;let y_=null;const Bk=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Gk)return;const a=t==null?void 0:t.token;y_!==a&&(y_=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Hk(n=Qg()){const e=ho(n,"auth");if(e.isInitialized())return e.getImmediate();const t=u5(n,{popupRedirectResolver:Uk,persistence:[Q5,V5,aT]}),s=_E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Bk(l.toString());M5(t,u,()=>u(t.currentUser)),k5(t,h=>u(h))}}const a=vE("auth");return a&&h5(t,`http://${a}`),t}function $k(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}n5({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=_r("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",$k().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zk("Browser");var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,fT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.F=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(P,j,V){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return R.prototype[j].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,I){I||(I=0);const P=Array(16);if(typeof R=="string")for(var j=0;j<16;++j)P[j]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(j=0;j<16;++j)P[j]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],j=C.g[2];let V=C.g[3],D;D=R+(V^I&(j^V))+P[0]+3614090360&4294967295,R=I+(D<<7&4294967295|D>>>25),D=V+(j^R&(I^j))+P[1]+3905402710&4294967295,V=R+(D<<12&4294967295|D>>>20),D=j+(I^V&(R^I))+P[2]+606105819&4294967295,j=V+(D<<17&4294967295|D>>>15),D=I+(R^j&(V^R))+P[3]+3250441966&4294967295,I=j+(D<<22&4294967295|D>>>10),D=R+(V^I&(j^V))+P[4]+4118548399&4294967295,R=I+(D<<7&4294967295|D>>>25),D=V+(j^R&(I^j))+P[5]+1200080426&4294967295,V=R+(D<<12&4294967295|D>>>20),D=j+(I^V&(R^I))+P[6]+2821735955&4294967295,j=V+(D<<17&4294967295|D>>>15),D=I+(R^j&(V^R))+P[7]+4249261313&4294967295,I=j+(D<<22&4294967295|D>>>10),D=R+(V^I&(j^V))+P[8]+1770035416&4294967295,R=I+(D<<7&4294967295|D>>>25),D=V+(j^R&(I^j))+P[9]+2336552879&4294967295,V=R+(D<<12&4294967295|D>>>20),D=j+(I^V&(R^I))+P[10]+4294925233&4294967295,j=V+(D<<17&4294967295|D>>>15),D=I+(R^j&(V^R))+P[11]+2304563134&4294967295,I=j+(D<<22&4294967295|D>>>10),D=R+(V^I&(j^V))+P[12]+1804603682&4294967295,R=I+(D<<7&4294967295|D>>>25),D=V+(j^R&(I^j))+P[13]+4254626195&4294967295,V=R+(D<<12&4294967295|D>>>20),D=j+(I^V&(R^I))+P[14]+2792965006&4294967295,j=V+(D<<17&4294967295|D>>>15),D=I+(R^j&(V^R))+P[15]+1236535329&4294967295,I=j+(D<<22&4294967295|D>>>10),D=R+(j^V&(I^j))+P[1]+4129170786&4294967295,R=I+(D<<5&4294967295|D>>>27),D=V+(I^j&(R^I))+P[6]+3225465664&4294967295,V=R+(D<<9&4294967295|D>>>23),D=j+(R^I&(V^R))+P[11]+643717713&4294967295,j=V+(D<<14&4294967295|D>>>18),D=I+(V^R&(j^V))+P[0]+3921069994&4294967295,I=j+(D<<20&4294967295|D>>>12),D=R+(j^V&(I^j))+P[5]+3593408605&4294967295,R=I+(D<<5&4294967295|D>>>27),D=V+(I^j&(R^I))+P[10]+38016083&4294967295,V=R+(D<<9&4294967295|D>>>23),D=j+(R^I&(V^R))+P[15]+3634488961&4294967295,j=V+(D<<14&4294967295|D>>>18),D=I+(V^R&(j^V))+P[4]+3889429448&4294967295,I=j+(D<<20&4294967295|D>>>12),D=R+(j^V&(I^j))+P[9]+568446438&4294967295,R=I+(D<<5&4294967295|D>>>27),D=V+(I^j&(R^I))+P[14]+3275163606&4294967295,V=R+(D<<9&4294967295|D>>>23),D=j+(R^I&(V^R))+P[3]+4107603335&4294967295,j=V+(D<<14&4294967295|D>>>18),D=I+(V^R&(j^V))+P[8]+1163531501&4294967295,I=j+(D<<20&4294967295|D>>>12),D=R+(j^V&(I^j))+P[13]+2850285829&4294967295,R=I+(D<<5&4294967295|D>>>27),D=V+(I^j&(R^I))+P[2]+4243563512&4294967295,V=R+(D<<9&4294967295|D>>>23),D=j+(R^I&(V^R))+P[7]+1735328473&4294967295,j=V+(D<<14&4294967295|D>>>18),D=I+(V^R&(j^V))+P[12]+2368359562&4294967295,I=j+(D<<20&4294967295|D>>>12),D=R+(I^j^V)+P[5]+4294588738&4294967295,R=I+(D<<4&4294967295|D>>>28),D=V+(R^I^j)+P[8]+2272392833&4294967295,V=R+(D<<11&4294967295|D>>>21),D=j+(V^R^I)+P[11]+1839030562&4294967295,j=V+(D<<16&4294967295|D>>>16),D=I+(j^V^R)+P[14]+4259657740&4294967295,I=j+(D<<23&4294967295|D>>>9),D=R+(I^j^V)+P[1]+2763975236&4294967295,R=I+(D<<4&4294967295|D>>>28),D=V+(R^I^j)+P[4]+1272893353&4294967295,V=R+(D<<11&4294967295|D>>>21),D=j+(V^R^I)+P[7]+4139469664&4294967295,j=V+(D<<16&4294967295|D>>>16),D=I+(j^V^R)+P[10]+3200236656&4294967295,I=j+(D<<23&4294967295|D>>>9),D=R+(I^j^V)+P[13]+681279174&4294967295,R=I+(D<<4&4294967295|D>>>28),D=V+(R^I^j)+P[0]+3936430074&4294967295,V=R+(D<<11&4294967295|D>>>21),D=j+(V^R^I)+P[3]+3572445317&4294967295,j=V+(D<<16&4294967295|D>>>16),D=I+(j^V^R)+P[6]+76029189&4294967295,I=j+(D<<23&4294967295|D>>>9),D=R+(I^j^V)+P[9]+3654602809&4294967295,R=I+(D<<4&4294967295|D>>>28),D=V+(R^I^j)+P[12]+3873151461&4294967295,V=R+(D<<11&4294967295|D>>>21),D=j+(V^R^I)+P[15]+530742520&4294967295,j=V+(D<<16&4294967295|D>>>16),D=I+(j^V^R)+P[2]+3299628645&4294967295,I=j+(D<<23&4294967295|D>>>9),D=R+(j^(I|~V))+P[0]+4096336452&4294967295,R=I+(D<<6&4294967295|D>>>26),D=V+(I^(R|~j))+P[7]+1126891415&4294967295,V=R+(D<<10&4294967295|D>>>22),D=j+(R^(V|~I))+P[14]+2878612391&4294967295,j=V+(D<<15&4294967295|D>>>17),D=I+(V^(j|~R))+P[5]+4237533241&4294967295,I=j+(D<<21&4294967295|D>>>11),D=R+(j^(I|~V))+P[12]+1700485571&4294967295,R=I+(D<<6&4294967295|D>>>26),D=V+(I^(R|~j))+P[3]+2399980690&4294967295,V=R+(D<<10&4294967295|D>>>22),D=j+(R^(V|~I))+P[10]+4293915773&4294967295,j=V+(D<<15&4294967295|D>>>17),D=I+(V^(j|~R))+P[1]+2240044497&4294967295,I=j+(D<<21&4294967295|D>>>11),D=R+(j^(I|~V))+P[8]+1873313359&4294967295,R=I+(D<<6&4294967295|D>>>26),D=V+(I^(R|~j))+P[15]+4264355552&4294967295,V=R+(D<<10&4294967295|D>>>22),D=j+(R^(V|~I))+P[6]+2734768916&4294967295,j=V+(D<<15&4294967295|D>>>17),D=I+(V^(j|~R))+P[13]+1309151649&4294967295,I=j+(D<<21&4294967295|D>>>11),D=R+(j^(I|~V))+P[4]+4149444226&4294967295,R=I+(D<<6&4294967295|D>>>26),D=V+(I^(R|~j))+P[11]+3174756917&4294967295,V=R+(D<<10&4294967295|D>>>22),D=j+(R^(V|~I))+P[2]+718787259&4294967295,j=V+(D<<15&4294967295|D>>>17),D=I+(V^(j|~R))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+V&4294967295}s.prototype.v=function(C,R){R===void 0&&(R=C.length);const I=R-this.blockSize,P=this.C;let j=this.h,V=0;for(;V<R;){if(j==0)for(;V<=I;)a(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<R;)if(P[j++]=C.charCodeAt(V++),j==this.blockSize){a(this,P),j=0;break}}else for(;V<R;)if(P[j++]=C[V++],j==this.blockSize){a(this,P),j=0;break}}this.h=j,this.o+=R},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)C[R++]=this.g[I]>>>P&255;return C};function l(C,R){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function u(C,R){this.h=R;const I=[];let P=!0;for(let j=C.length-1;j>=0;j--){const V=C[j]|0;P&&V==R||(I[j]=V,P=!1)}this.g=I}var h={};function p(C){return-128<=C&&C<128?l(C,function(R){return new u([R|0],R<0?-1:0)}):new u([C|0],C<0?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return F(m(-C));const R=[];let I=1;for(let P=0;C>=I;P++)R[P]=C/I|0,I*=4294967296;return new u(R,0)}function v(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return F(v(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=m(Math.pow(R,8));let P=_;for(let V=0;V<C.length;V+=8){var j=Math.min(8,C.length-V);const D=parseInt(C.substring(V,V+j),R);j<8?(j=m(Math.pow(R,j)),P=P.j(j).add(m(D))):(P=P.j(I),P=P.add(m(D)))}return P}var _=p(0),w=p(1),S=p(16777216);n=u.prototype,n.m=function(){if(B(this))return-F(this).m();let C=0,R=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);C+=(P>=0?P:4294967296+P)*R,R*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M(this))return"0";if(B(this))return"-"+F(this).toString(C);const R=m(Math.pow(C,6));var I=this;let P="";for(;;){const j=ie(I,R).g;I=ee(I,j.j(R));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=j,M(I))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function M(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function B(C){return C.h==-1}n.l=function(C){return C=ee(this,C),B(C)?-1:M(C)?0:1};function F(C){const R=C.g.length,I=[];for(let P=0;P<R;P++)I[P]=~C.g[P];return new u(I,~C.h).add(w)}n.abs=function(){return B(this)?F(this):this},n.add=function(C){const R=Math.max(this.g.length,C.g.length),I=[];let P=0;for(let j=0;j<=R;j++){let V=P+(this.i(j)&65535)+(C.i(j)&65535),D=(V>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);P=D>>>16,V&=65535,D&=65535,I[j]=D<<16|V}return new u(I,I[I.length-1]&-2147483648?-1:0)};function ee(C,R){return C.add(F(R))}n.j=function(C){if(M(this)||M(C))return _;if(B(this))return B(C)?F(this).j(F(C)):F(F(this).j(C));if(B(C))return F(this.j(F(C)));if(this.l(S)<0&&C.l(S)<0)return m(this.m()*C.m());const R=this.g.length+C.g.length,I=[];for(var P=0;P<2*R;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let j=0;j<C.g.length;j++){const V=this.i(P)>>>16,D=this.i(P)&65535,Ge=C.i(j)>>>16,$e=C.i(j)&65535;I[2*P+2*j]+=D*$e,ne(I,2*P+2*j),I[2*P+2*j+1]+=V*$e,ne(I,2*P+2*j+1),I[2*P+2*j+1]+=D*Ge,ne(I,2*P+2*j+1),I[2*P+2*j+2]+=V*Ge,ne(I,2*P+2*j+2)}for(C=0;C<R;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=R;C<2*R;C++)I[C]=0;return new u(I,0)};function ne(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function K(C,R){this.g=C,this.h=R}function ie(C,R){if(M(R))throw Error("division by zero");if(M(C))return new K(_,_);if(B(C))return R=ie(F(C),R),new K(F(R.g),F(R.h));if(B(R))return R=ie(C,F(R)),new K(F(R.g),R.h);if(C.g.length>30){if(B(C)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,P=R;P.l(C)<=0;)I=W(I),P=W(P);var j=z(I,1),V=z(P,1);for(P=z(P,2),I=z(I,2);!M(P);){var D=V.add(P);D.l(C)<=0&&(j=j.add(I),V=D),P=z(P,1),I=z(I,1)}return R=ee(C,j.j(R)),new K(j,R)}for(j=_;C.l(R)>=0;){for(I=Math.max(1,Math.floor(C.m()/R.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=m(I),D=V.j(R);B(D)||D.l(C)>0;)I-=P,V=m(I),D=V.j(R);M(V)&&(V=w),j=j.add(V),C=ee(C,D)}return new K(j,C)}n.B=function(C){return ie(this,C).h},n.and=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<R;P++)I[P]=this.i(P)&C.i(P);return new u(I,this.h&C.h)},n.or=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<R;P++)I[P]=this.i(P)|C.i(P);return new u(I,this.h|C.h)},n.xor=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let P=0;P<R;P++)I[P]=this.i(P)^C.i(P);return new u(I,this.h^C.h)};function W(C){const R=C.g.length+1,I=[];for(let P=0;P<R;P++)I[P]=C.i(P)<<1|C.i(P-1)>>>31;return new u(I,C.h)}function z(C,R){const I=R>>5;R%=32;const P=C.g.length-I,j=[];for(let V=0;V<P;V++)j[V]=R>0?C.i(V+I)>>>R|C.i(V+I+1)<<32-R:C.i(V+I);return new u(j,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,fT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,aa=u}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,Bc,pT,rh,mg,gT,yT,xT;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var E=0;E<y.length;++E){var N=y[E];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function a(y,E){if(E)e:{var N=s;y=y.split(".");for(var k=0;k<y.length-1;k++){var $=y[k];if(!($ in N))break e;N=N[$]}y=y[y.length-1],k=N[y],E=E(k),E!=k&&E!=null&&e(N,y,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(E){var N=[],k;for(k in E)Object.prototype.hasOwnProperty.call(E,k)&&N.push([k,E[k]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function p(y,E,N){return y.call.apply(y.bind,arguments)}function m(y,E,N){return m=p,m.apply(null,arguments)}function v(y,E){var N=Array.prototype.slice.call(arguments,1);return function(){var k=N.slice();return k.push.apply(k,arguments),y.apply(this,k)}}function _(y,E){function N(){}N.prototype=E.prototype,y.Z=E.prototype,y.prototype=new N,y.prototype.constructor=y,y.Ob=function(k,$,se){for(var ye=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ye[ze-2]=arguments[ze];return E.prototype[$].apply(k,ye)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function S(y){const E=y.length;if(E>0){const N=Array(E);for(let k=0;k<E;k++)N[k]=y[k];return N}return[]}function M(y,E){for(let k=1;k<arguments.length;k++){const $=arguments[k];var N=typeof $;if(N=N!="object"?N:$?Array.isArray($)?"array":N:"null",N=="array"||N=="object"&&typeof $.length=="number"){N=y.length||0;const se=$.length||0;y.length=N+se;for(let ye=0;ye<se;ye++)y[N+ye]=$[ye]}else y.push($)}}class B{constructor(E,N){this.i=E,this.j=N,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function F(y){u.setTimeout(()=>{throw y},0)}function ee(){var y=C;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class ne{constructor(){this.h=this.g=null}add(E,N){const k=K.get();k.set(E,N),this.h?this.h.next=k:this.g=k,this.h=k}}var K=new B(()=>new ie,y=>y.reset());class ie{constructor(){this.next=this.g=this.h=null}set(E,N){this.h=E,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let W,z=!1,C=new ne,R=()=>{const y=Promise.resolve(void 0);W=()=>{y.then(I)}};function I(){for(var y;y=ee();){try{y.h.call(y.g)}catch(N){F(N)}var E=K;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}z=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const N=()=>{};u.addEventListener("test",N,E),u.removeEventListener("test",N,E)}catch{}return y})();function D(y){return/^[\s\xa0]*$/.test(y)}function Ge(y,E){j.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(Ge,j),Ge.prototype.init=function(y,E){const N=this.type=y.type,k=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(N=="mouseover"?E=y.fromElement:N=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),Z=0;function pe(y,E,N,k,$){this.listener=y,this.proxy=null,this.src=E,this.type=N,this.capture=!!k,this.ha=$,this.key=++Z,this.da=this.fa=!1}function de(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Pe(y,E,N){for(const k in y)E.call(N,y[k],k,y)}function Re(y,E){for(const N in y)E.call(void 0,y[N],N,y)}function O(y){const E={};for(const N in y)E[N]=y[N];return E}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(y,E){let N,k;for(let $=1;$<arguments.length;$++){k=arguments[$];for(N in k)y[N]=k[N];for(let se=0;se<Q.length;se++)N=Q[se],Object.prototype.hasOwnProperty.call(k,N)&&(y[N]=k[N])}}function te(y){this.src=y,this.g={},this.h=0}te.prototype.add=function(y,E,N,k,$){const se=y.toString();y=this.g[se],y||(y=this.g[se]=[],this.h++);const ye=Ne(y,E,k,$);return ye>-1?(E=y[ye],N||(E.fa=!1)):(E=new pe(E,this.src,se,!!k,$),E.fa=N,y.push(E)),E};function he(y,E){const N=E.type;if(N in y.g){var k=y.g[N],$=Array.prototype.indexOf.call(k,E,void 0),se;(se=$>=0)&&Array.prototype.splice.call(k,$,1),se&&(de(E),y.g[N].length==0&&(delete y.g[N],y.h--))}}function Ne(y,E,N,k){for(let $=0;$<y.length;++$){const se=y[$];if(!se.da&&se.listener==E&&se.capture==!!N&&se.ha==k)return $}return-1}var je="closure_lm_"+(Math.random()*1e6|0),at={};function Ae(y,E,N,k,$){if(Array.isArray(E)){for(let se=0;se<E.length;se++)Ae(y,E[se],N,k,$);return null}return N=Rr(N),y&&y[$e]?y.J(E,N,h(k)?!!k.capture:!1,$):It(y,E,N,!1,k,$)}function It(y,E,N,k,$,se){if(!E)throw Error("Invalid event type");const ye=h($)?!!$.capture:!!$;let ze=pn(y);if(ze||(y[je]=ze=new te(y)),N=ze.add(E,N,k,ye,se),N.proxy)return N;if(k=Ve(),N.proxy=k,k.src=y,k.listener=N,y.addEventListener)V||($=ye),$===void 0&&($=!1),y.addEventListener(E.toString(),k,$);else if(y.attachEvent)y.attachEvent(Zt(E.toString()),k);else if(y.addListener&&y.removeListener)y.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ve(){function y(N){return E.call(y.src,y.listener,N)}const E=rs;return y}function bt(y,E,N,k,$){if(Array.isArray(E))for(var se=0;se<E.length;se++)bt(y,E[se],N,k,$);else k=h(k)?!!k.capture:!!k,N=Rr(N),y&&y[$e]?(y=y.i,se=String(E).toString(),se in y.g&&(E=y.g[se],N=Ne(E,N,k,$),N>-1&&(de(E[N]),Array.prototype.splice.call(E,N,1),E.length==0&&(delete y.g[se],y.h--)))):y&&(y=pn(y))&&(E=y.g[E.toString()],y=-1,E&&(y=Ne(E,N,k,$)),(N=y>-1?E[y]:null)&&et(N))}function et(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[$e])he(E.i,y);else{var N=y.type,k=y.proxy;E.removeEventListener?E.removeEventListener(N,k,y.capture):E.detachEvent?E.detachEvent(Zt(N),k):E.addListener&&E.removeListener&&E.removeListener(k),(N=pn(E))?(he(N,y),N.h==0&&(N.src=null,E[je]=null)):de(y)}}}function Zt(y){return y in at?at[y]:at[y]="on"+y}function rs(y,E){if(y.da)y=!0;else{E=new Ge(E,this);const N=y.listener,k=y.ha||y.src;y.fa&&et(y),y=N.call(k,E)}return y}function pn(y){return y=y[je],y instanceof te?y:null}var er="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rr(y){return typeof y=="function"?y:(y[er]||(y[er]=function(E){return y.handleEvent(E)}),y[er])}function pt(){P.call(this),this.i=new te(this),this.M=this,this.G=null}_(pt,P),pt.prototype[$e]=!0,pt.prototype.removeEventListener=function(y,E,N,k){bt(this,y,E,N,k)};function Pt(y,E){var N,k=y.G;if(k)for(N=[];k;k=k.G)N.push(k);if(y=y.M,k=E.type||E,typeof E=="string")E=new j(E,y);else if(E instanceof j)E.target=E.target||y;else{var $=E;E=new j(k,y),U(E,$)}$=!0;let se,ye;if(N)for(ye=N.length-1;ye>=0;ye--)se=E.g=N[ye],$=ys(se,k,!0,E)&&$;if(se=E.g=y,$=ys(se,k,!0,E)&&$,$=ys(se,k,!1,E)&&$,N)for(ye=0;ye<N.length;ye++)se=E.g=N[ye],$=ys(se,k,!1,E)&&$}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const N=y.g[E];for(let k=0;k<N.length;k++)de(N[k]);delete y.g[E],y.h--}}this.G=null},pt.prototype.J=function(y,E,N,k){return this.i.add(String(y),E,!1,N,k)},pt.prototype.K=function(y,E,N,k){return this.i.add(String(y),E,!0,N,k)};function ys(y,E,N,k){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let $=!0;for(let se=0;se<E.length;++se){const ye=E[se];if(ye&&!ye.da&&ye.capture==N){const ze=ye.listener,Qt=ye.ha||ye.src;ye.fa&&he(y.i,ye),$=ze.call(Qt,k)!==!1&&$}}return $&&!k.defaultPrevented}function yi(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(y,E||0)}function xi(y){y.g=yi(()=>{y.g=null,y.i&&(y.i=!1,xi(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class Ft extends P{constructor(E,N){super(),this.m=E,this.l=N,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:xi(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(y){P.call(this),this.h=y,this.g={}}_(xs,P);var zn=[];function kr(y){Pe(y.g,function(E,N){this.g.hasOwnProperty(N)&&et(E)},y),y.g={}}xs.prototype.N=function(){xs.Z.N.call(this),kr(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=u.JSON.stringify,fe=u.JSON.parse,He=class{stringify(y){return u.JSON.stringify(y,void 0)}parse(y){return u.JSON.parse(y,void 0)}};function nt(){}function en(){}var jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nt(){j.call(this,"d")}_(Nt,j);function Yt(){j.call(this,"c")}_(Yt,j);var ut={},vi=null;function hn(){return vi=vi||new pt}ut.Ia="serverreachability";function kn(y){j.call(this,ut.Ia,y)}_(kn,j);function gn(y){const E=hn();Pt(E,new kn(E))}ut.STAT_EVENT="statevent";function me(y,E){j.call(this,ut.STAT_EVENT,y),this.stat=E}_(me,j);function _e(y){const E=hn();Pt(E,new me(E,y))}ut.Ja="timingevent";function Se(y,E){j.call(this,ut.Ja,y),this.size=E}_(Se,j);function xe(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){y()},E)}function Ue(){this.g=!0}Ue.prototype.ua=function(){this.g=!1};function rt(y,E,N,k,$,se){y.info(function(){if(y.g)if(se){var ye="",ze=se.split("&");for(let ft=0;ft<ze.length;ft++){var Qt=ze[ft].split("=");if(Qt.length>1){const Lt=Qt[0];Qt=Qt[1];const ws=Lt.split("_");ye=ws.length>=2&&ws[1]=="type"?ye+(Lt+"="+Qt+"&"):ye+(Lt+"=redacted&")}}}else ye=null;else ye=se;return"XMLHTTP REQ ("+k+") [attempt "+$+"]: "+E+`
`+N+`
`+ye})}function St(y,E,N,k,$,se,ye){y.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+$+"]: "+E+`
`+N+`
`+se+" "+ye})}function dt(y,E,N,k){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ot(y,N)+(k?" "+k:"")})}function ht(y,E){y.info(function(){return"TIMEOUT: "+E})}Ue.prototype.info=function(){};function Ot(y,E){if(!y.g)return E;if(!E)return null;try{const se=JSON.parse(E);if(se){for(y=0;y<se.length;y++)if(Array.isArray(se[y])){var N=se[y];if(!(N.length<2)){var k=N[1];if(Array.isArray(k)&&!(k.length<1)){var $=k[0];if($!="noop"&&$!="stop"&&$!="close")for(let ye=1;ye<k.length;ye++)k[ye]=""}}}}return is(se)}catch{return E}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_a={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ql;function wa(){}_(wa,nt),wa.prototype.g=function(){return new XMLHttpRequest},ql=new wa;function Mr(y){return encodeURIComponent(String(y))}function Nu(y){var E=1;y=y.split(":");const N=[];for(;E>0&&y.length;)N.push(y.shift()),E--;return y.length&&N.push(y.join(":")),N}function Ls(y,E,N,k){this.j=y,this.i=E,this.l=N,this.S=k||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vs}function Vs(){this.i=null,this.g="",this.h=!1}var tn={},xn={};function tr(y,E,N){y.M=1,y.A=Ea(sn(E)),y.u=N,y.R=!0,go(y,null)}function go(y,E){y.F=Date.now(),nr(y),y.B=sn(y.A);var N=y.B,k=y.S;Array.isArray(k)||(k=[String(k)]),bo(N.i,"t",k),y.C=0,N=y.j.L,y.h=new Vs,y.g=qu(y.j,N?E:null,!y.u),y.P>0&&(y.O=new Ft(m(y.Y,y,y.g),y.P)),E=y.V,N=y.g,k=y.ba;var $="readystatechange";Array.isArray($)||($&&(zn[0]=$.toString()),$=zn);for(let se=0;se<$.length;se++){const ye=Ae(N,$[se],k||E.handleEvent,!1,E.h||E);if(!ye)break;E.g[ye.key]=ye}E=y.J?O(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),gn(),rt(y.i,y.v,y.B,y.l,y.S,y.u)}Ls.prototype.ba=function(y){y=y.target;const E=this.O;E&&qs(y)==3?E.j():this.Y(y)},Ls.prototype.Y=function(y){try{if(y==this.g)e:{const ze=qs(this.g),Qt=this.g.ya(),ft=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||ze!=4||Qt==7||(Qt==8||ft<=0?gn(3):gn(2)),sr(this);var E=this.g.ca();this.X=E;var N=Cf(this);if(this.o=E==200,St(this.i,this.v,this.B,this.l,this.S,ze,E),this.o){if(this.U&&!this.L){t:{if(this.g){var k,$=this.g;if((k=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var se=k;break t}}se=null}if(y=se)dt(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,y);else{this.o=!1,this.m=3,_e(12),as(this),vs(this);break e}}if(this.R){y=!0;let Lt;for(;!this.K&&this.C<N.length;)if(Lt=Au(this,N),Lt==xn){ze==4&&(this.m=4,_e(14),y=!1),dt(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==tn){this.m=4,_e(15),dt(this.i,this.l,N,"[Invalid Chunk]"),y=!1;break}else dt(this.i,this.l,Lt,null),rr(this,Lt);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||N.length!=0||this.h.h||(this.m=1,_e(16),y=!1),this.o=this.o&&y,!y)dt(this.i,this.l,N,"[Invalid Chunked Response]"),as(this),vs(this);else if(N.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),tc(ye),ye.P=!0,_e(11))}}else dt(this.i,this.l,N,null),rr(this,N);ze==4&&as(this),this.o&&!this.K&&(ze==4?Lu(this.j,this):(this.o=!1,nr(this)))}else Pr(this.g),E==400&&N.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),as(this),vs(this)}}}catch{}finally{}};function Cf(y){if(!Su(y))return y.g.la();const E=En(y.g);if(E==="")return"";let N="";const k=E.length,$=qs(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return as(y),vs(y),"";y.h.i=new u.TextDecoder}for(let se=0;se<k;se++)y.h.h=!0,N+=y.h.i.decode(E[se],{stream:!($&&se==k-1)});return E.length=0,y.h.g+=N,y.C=0,y.h.g}function Su(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Au(y,E){var N=y.C,k=E.indexOf(`
`,N);return k==-1?xn:(N=Number(E.substring(N,k)),isNaN(N)?tn:(k+=1,k+N>E.length?xn:(E=E.slice(k,k+N),y.C=k+N,E)))}Ls.prototype.cancel=function(){this.K=!0,as(this)};function nr(y){y.T=Date.now()+y.H,yo(y,y.H)}function yo(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=xe(m(y.aa,y),E)}function sr(y){y.D&&(u.clearTimeout(y.D),y.D=null)}Ls.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(ht(this.i,this.B),this.M!=2&&(gn(),_e(17)),as(this),this.m=2,vs(this)):yo(this,this.T-y)};function vs(y){y.j.I==0||y.K||Lu(y.j,y)}function as(y){sr(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,kr(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function rr(y,E){try{var N=y.j;if(N.I!=0&&(N.g==y||ar(N.h,y))){if(!y.L&&ar(N.h,y)&&N.I==3){try{var k=N.Ba.g.parse(E)}catch{k=null}if(Array.isArray(k)&&k.length==3){var $=k;if($[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<y.F)No(N),Ai(N);else break e;Ra(N),_e(18)}}else N.xa=$[1],0<N.xa-N.K&&$[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=xe(m(N.Va,N),6e3));ir(N.h)<=1&&N.ta&&(N.ta=void 0)}else hr(N,11)}else if((y.L||N.g==y)&&No(N),!D(E))for($=N.Ba.g.parse(E),E=0;E<$.length;E++){let ft=$[E];const Lt=ft[0];if(!(Lt<=N.K))if(N.K=Lt,ft=ft[1],N.I==2)if(ft[0]=="c"){N.M=ft[1],N.ba=ft[2];const ws=ft[3];ws!=null&&(N.ka=ws,N.j.info("VER="+N.ka));const fr=ft[4];fr!=null&&(N.za=fr,N.j.info("SVER="+N.za));const zs=ft[5];zs!=null&&typeof zs=="number"&&zs>0&&(k=1.5*zs,N.O=k,N.j.info("backChannelRequestTimeoutMs_="+k)),k=N;const Fs=y.g;if(Fs){const ka=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var se=k.h;se.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Gl(se,se.h),se.h=null))}if(k.G){const So=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(k.wa=So,yt(k.J,k.G,So))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-y.F,N.j.info("Handshake RTT: "+N.T+"ms")),k=N;var ye=y;if(k.na=Ou(k,k.L?k.ba:null,k.W),ye.L){Bl(k.h,ye);var ze=ye,Qt=k.O;Qt&&(ze.H=Qt),ze.D&&(sr(ze),nr(ze)),k.g=ye}else Pu(k);N.i.length>0&&dr(N)}else ft[0]!="stop"&&ft[0]!="close"||hr(N,7);else N.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?hr(N,7):Zl(N):ft[0]!="noop"&&N.l&&N.l.qa(ft),N.A=0)}}gn(4)}catch{}}var nn=class{constructor(y,E){this.g=y,this.map=E}};function zl(y){this.l=y||10,u.PerformanceNavigationTiming?(y=u.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function ir(y){return y.h?1:y.g?y.g.size:0}function ar(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function Gl(y,E){y.g?y.g.add(E):y.h=E}function Bl(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}zl.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Hl(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const N of y.g.values())E=E.concat(N.G);return E}return S(y.i)}var Cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(y,E){if(y){y=y.split("&");for(let N=0;N<y.length;N++){const k=y[N].indexOf("=");let $,se=null;k>=0?($=y[N].substring(0,k),se=y[N].substring(k+1)):$=y[N],E($,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function os(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof os?(this.l=y.l,vn(this,y.j),this.o=y.o,this.g=y.g,bi(this,y.u),this.h=y.h,$l(this,Mu(y.i)),this.m=y.m):y&&(E=String(y).match(Cu))?(this.l=!1,vn(this,E[1]||"",!0),this.o=or(E[2]||""),this.g=or(E[3]||"",!0),bi(this,E[4]),this.h=or(E[5]||"",!0),$l(this,E[6]||"",!0),this.m=or(E[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}os.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(Ta(E,vo,!0),":");var N=this.g;return(N||E=="file")&&(y.push("//"),(E=this.o)&&y.push(Ta(E,vo,!0),"@"),y.push(Mr(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&y.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&y.push("/"),y.push(Ta(N,N.charAt(0)=="/"?Kl:Iu,!0))),(N=this.i.toString())&&y.push("?",N),(N=this.m)&&y.push("#",Ta(N,Ru)),y.join("")},os.prototype.resolve=function(y){const E=sn(this);let N=!!y.j;N?vn(E,y.j):N=!!y.o,N?E.o=y.o:N=!!y.g,N?E.g=y.g:N=y.u!=null;var k=y.h;if(N)bi(E,y.u);else if(N=!!y.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var $=E.h.lastIndexOf("/");$!=-1&&(k=E.h.slice(0,$+1)+k)}if($=k,$==".."||$==".")k="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){k=$.lastIndexOf("/",0)==0,$=$.split("/");const se=[];for(let ye=0;ye<$.length;){const ze=$[ye++];ze=="."?k&&ye==$.length&&se.push(""):ze==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),k&&ye==$.length&&se.push("")):(se.push(ze),k=!0)}k=se.join("/")}else k=$}return N?E.h=k:N=y.i.toString()!=="",N?$l(E,Mu(y.i)):N=!!y.m,N&&(E.m=y.m),E};function sn(y){return new os(y)}function vn(y,E,N){y.j=N?or(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function bi(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function $l(y,E,N){E instanceof wi?(y.i=E,_o(y.i,y.l)):(N||(E=Ta(E,_i)),y.i=new wi(E,y.l))}function yt(y,E,N){y.i.set(E,N)}function Ea(y){return yt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function or(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ta(y,E,N){return typeof y=="string"?(y=encodeURI(y).replace(E,$n),N&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function $n(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var vo=/[#\/\?@]/g,Iu=/[#\?:]/g,Kl=/[#\?]/g,_i=/[#\?@]/g,Ru=/#/g;function wi(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Kn(y){y.g||(y.g=new Map,y.h=0,y.i&&xo(y.i,function(E,N){y.add(decodeURIComponent(E.replace(/\+/g," ")),N)}))}n=wi.prototype,n.add=function(y,E){Kn(this),this.i=null,y=Ei(this,y);let N=this.g.get(y);return N||this.g.set(y,N=[]),N.push(E),this.h+=1,this};function ku(y,E){Kn(y),E=Ei(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Yl(y,E){return Kn(y),E=Ei(y,E),y.g.has(E)}n.forEach=function(y,E){Kn(this),this.g.forEach(function(N,k){N.forEach(function($){y.call(E,$,k,this)},this)},this)};function Ql(y,E){Kn(y);let N=[];if(typeof E=="string")Yl(y,E)&&(N=N.concat(y.g.get(Ei(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)N=N.concat(y[E]);return N}n.set=function(y,E){return Kn(this),this.i=null,y=Ei(this,y),Yl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Ql(this,y),y.length>0?String(y[0]):E):E};function bo(y,E,N){ku(y,E),N.length>0&&(y.i=null,y.g.set(Ei(y,E),S(N)),y.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let k=0;k<E.length;k++){var N=E[k];const $=Mr(N);N=Ql(this,N);for(let se=0;se<N.length;se++){let ye=$;N[se]!==""&&(ye+="="+Mr(N[se])),y.push(ye)}}return this.i=y.join("&")};function Mu(y){const E=new wi;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function Ei(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function _o(y,E){E&&!y.j&&(Kn(y),y.i=null,y.g.forEach(function(N,k){const $=k.toLowerCase();k!=$&&(ku(this,k),bo(this,$,N))},y)),y.j=E}function Us(y,E){const N=new Ue;if(u.Image){const k=new Image;k.onload=v(bs,N,"TestLoadImage: loaded",!0,E,k),k.onerror=v(bs,N,"TestLoadImage: error",!1,E,k),k.onabort=v(bs,N,"TestLoadImage: abort",!1,E,k),k.ontimeout=v(bs,N,"TestLoadImage: timeout",!1,E,k),u.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=y}else E(!1)}function Jl(y,E){const N=new Ue,k=new AbortController,$=setTimeout(()=>{k.abort(),bs(N,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:k.signal}).then(se=>{clearTimeout($),se.ok?bs(N,"TestPingServer: ok",!0,E):bs(N,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout($),bs(N,"TestPingServer: error",!1,E)})}function bs(y,E,N,k,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),k(N)}catch{}}function Ti(){this.g=new He}function lr(y){this.i=y.Sb||null,this.h=y.ab||!1}_(lr,nt),lr.prototype.g=function(){return new Na(this.i,this.h)};function Na(y,E){pt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Na,pt),n=Na.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,Os(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function wo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?Ni(this):Os(this),this.readyState==3&&wo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ni(this))},n.Na=function(y){this.g&&(this.response=y,Ni(this))},n.ga=function(){this.g&&Ni(this)};function Ni(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Os(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var N=E.next();!N.done;)N=N.value,y.push(N[0]+": "+N[1]),N=E.next();return y.join(`\r
`)};function Os(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function _s(y){let E="";return Pe(y,function(N,k){E+=k,E+=":",E+=N,E+=`\r
`}),E}function Sa(y,E,N){e:{for(k in N){var k=!1;break e}k=!0}k||(N=_s(N),typeof y=="string"?N!=null&&Mr(N):yt(y,E,N))}function _t(y){pt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(_t,pt);var cr=/^https?$/i,Xl=["POST","PUT"];n=_t.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,N,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ql.g(),this.g.onreadystatechange=w(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(se){Aa(this,se);return}if(y=N||"",N=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var $ in k)N.set($,k[$]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const se of k.keys())N.set(se,k.get(se));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(N.keys()).find(se=>se.toLowerCase()=="content-type"),$=u.FormData&&y instanceof u.FormData,!(Array.prototype.indexOf.call(Xl,E,void 0)>=0)||k||$||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ye]of N)this.g.setRequestHeader(se,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(se){Aa(this,se)}};function Aa(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,Wl(y),Dr(y)}function Wl(y){y.A||(y.A=!0,Pt(y,"complete"),Pt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Pt(this,"complete"),Pt(this,"abort"),Dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ca(this):this.Xa())},n.Xa=function(){Ca(this)};function Ca(y){if(y.h&&typeof l<"u"){if(y.v&&qs(y)==4)setTimeout(y.Ca.bind(y),0);else if(Pt(y,"readystatechange"),qs(y)==4){y.h=!1;try{const se=y.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var N;if(!(N=E)){var k;if(k=se===0){let ye=String(y.D).match(Cu)[1]||null;!ye&&u.self&&u.self.location&&(ye=u.self.location.protocol.slice(0,-1)),k=!cr.test(ye?ye.toLowerCase():"")}N=k}if(N)Pt(y,"complete"),Pt(y,"success");else{y.o=6;try{var $=qs(y)>2?y.g.statusText:""}catch{$=""}y.l=$+" ["+y.ca()+"]",Wl(y)}}finally{Dr(y)}}}}function Dr(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const N=y.g;y.g=null,E||Pt(y,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qs(y){return y.g?y.g.readyState:0}n.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),fe(E)}};function En(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Pr(y){const E={};y=(y.g&&qs(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<y.length;k++){if(D(y[k]))continue;var N=Nu(y[k]);const $=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const se=E[$]||[];E[$]=se,se.push(N)}Re(E,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(y,E,N){return N&&N.internalChannelParams&&N.internalChannelParams[y]||E}function Si(y){this.za=0,this.i=[],this.j=new Ue,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,y),this.Za=ur("retryDelaySeedMs",1e4,y),this.Ta=ur("forwardChannelMaxRetries",2,y),this.va=ur("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new zl(y&&y.concurrentRequestLimit),this.Ba=new Ti,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Si.prototype,n.ka=8,n.I=1,n.connect=function(y,E,N,k){_e(0),this.W=y,this.H=E||{},N&&k!==void 0&&(this.H.OSID=N,this.H.OAID=k),this.F=this.X,this.J=Ou(this,null,this.W),dr(this)};function Zl(y){if(Eo(y),y.I==3){var E=y.V++,N=sn(y.J);if(yt(N,"SID",y.M),yt(N,"RID",E),yt(N,"TYPE","terminate"),Ia(y,N),E=new Ls(y,y.j,E),E.M=2,E.A=Ea(sn(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!N&&u.Image&&(new Image().src=E.A,N=!0),N||(E.g=qu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),nr(E)}Uu(y)}function Ai(y){y.g&&(tc(y),y.g.cancel(),y.g=null)}function Eo(y){Ai(y),y.v&&(u.clearTimeout(y.v),y.v=null),No(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&u.clearTimeout(y.m),y.m=null)}function dr(y){if(!Fl(y.h)&&!y.m){y.m=!0;var E=y.Ea;W||R(),z||(W(),z=!0),C.add(E,y),y.D=0}}function To(y,E){return ir(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=xe(m(y.Ea,y,E),Vu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const $=new Ls(this,this.j,y);let se=this.o;if(this.U&&(se?(se=O(se),U(se,this.U)):se=this.U),this.u!==null||this.R||($.J=se,se=null),this.S)e:{for(var E=0,N=0;N<this.i.length;N++){t:{var k=this.i[N];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(E+=k,E>4096){E=N;break e}if(E===4096||N===this.i.length-1){E=N+1;break e}}E=1e3}else E=1e3;E=Du(this,$,E),N=sn(this.J),yt(N,"RID",y),yt(N,"CVER",22),this.G&&yt(N,"X-HTTP-Session-Id",this.G),Ia(this,N),se&&(this.R?E="headers="+Mr(_s(se))+"&"+E:this.u&&Sa(N,this.u,se)),Gl(this.h,$),this.Ra&&yt(N,"TYPE","init"),this.S?(yt(N,"$req",E),yt(N,"SID","null"),$.U=!0,tr($,N,null)):tr($,N,E),this.I=2}}else this.I==3&&(y?ec(this,y):this.i.length==0||Fl(this.h)||ec(this))};function ec(y,E){var N;E?N=E.l:N=y.V++;const k=sn(y.J);yt(k,"SID",y.M),yt(k,"RID",N),yt(k,"AID",y.K),Ia(y,k),y.u&&y.o&&Sa(k,y.u,y.o),N=new Ls(y,y.j,N,y.D+1),y.u===null&&(N.J=y.o),E&&(y.i=E.G.concat(y.i)),E=Du(y,N,1e3),N.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Gl(y.h,N),tr(N,k,E)}function Ia(y,E){y.H&&Pe(y.H,function(N,k){yt(E,k,N)}),y.l&&Pe({},function(N,k){yt(E,k,N)})}function Du(y,E,N){N=Math.min(y.i.length,N);const k=y.l?m(y.l.Ka,y.l,y):null;e:{var $=y.i;let ze=-1;for(;;){const Qt=["count="+N];ze==-1?N>0?(ze=$[0].g,Qt.push("ofs="+ze)):ze=0:Qt.push("ofs="+ze);let ft=!0;for(let Lt=0;Lt<N;Lt++){var se=$[Lt].g;const ws=$[Lt].map;if(se-=ze,se<0)ze=Math.max(0,$[Lt].g-100),ft=!1;else try{se="req"+se+"_"||"";try{var ye=ws instanceof Map?ws:Object.entries(ws);for(const[fr,zs]of ye){let Fs=zs;h(zs)&&(Fs=is(zs)),Qt.push(se+fr+"="+encodeURIComponent(Fs))}}catch(fr){throw Qt.push(se+"type="+encodeURIComponent("_badmap")),fr}}catch{k&&k(ws)}}if(ft){ye=Qt.join("&");break e}}ye=void 0}return y=y.i.splice(0,N),E.G=y,ye}function Pu(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;W||R(),z||(W(),z=!0),C.add(E,y),y.A=0}}function Ra(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=xe(m(y.Da,y),Vu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=xe(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Ai(this),ju(this))};function tc(y){y.B!=null&&(u.clearTimeout(y.B),y.B=null)}function ju(y){y.g=new Ls(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=sn(y.na);yt(E,"RID","rpc"),yt(E,"SID",y.M),yt(E,"AID",y.K),yt(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&yt(E,"TO",y.ia),yt(E,"TYPE","xmlhttp"),Ia(y,E),y.u&&y.o&&Sa(E,y.u,y.o),y.O&&(y.g.H=y.O);var N=y.g;y=y.ba,N.M=1,N.A=Ea(sn(E)),N.u=null,N.R=!0,go(N,y)}n.Va=function(){this.C!=null&&(this.C=null,Ai(this),Ra(this),_e(19))};function No(y){y.C!=null&&(u.clearTimeout(y.C),y.C=null)}function Lu(y,E){var N=null;if(y.g==E){No(y),tc(y),y.g=null;var k=2}else if(ar(y.h,E))N=E.G,Bl(y.h,E),k=1;else return;if(y.I!=0){if(E.o)if(k==1){N=E.u?E.u.length:0,E=Date.now()-E.F;var $=y.D;k=hn(),Pt(k,new Se(k,N)),dr(y)}else Pu(y);else if($=E.m,$==3||$==0&&E.X>0||!(k==1&&To(y,E)||k==2&&Ra(y)))switch(N&&N.length>0&&(E=y.h,E.i=E.i.concat(N)),$){case 1:hr(y,5);break;case 4:hr(y,10);break;case 3:hr(y,6);break;default:hr(y,2)}}}function Vu(y,E){let N=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(N*=2),N*E}function hr(y,E){if(y.j.info("Error code "+E),E==2){var N=m(y.bb,y),k=y.Ua;const $=!k;k=new os(k||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||vn(k,"https"),Ea(k),$?Us(k.toString(),N):Jl(k.toString(),N)}else _e(2);y.I=0,y.l&&y.l.pa(E),Uu(y),Eo(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Uu(y){if(y.I=0,y.ja=[],y.l){const E=Hl(y.h);(E.length!=0||y.i.length!=0)&&(M(y.ja,E),M(y.ja,y.i),y.h.i.length=0,S(y.i),y.i.length=0),y.l.oa()}}function Ou(y,E,N){var k=N instanceof os?sn(N):new os(N);if(k.g!="")E&&(k.g=E+"."+k.g),bi(k,k.u);else{var $=u.location;k=$.protocol,E=E?E+"."+$.hostname:$.hostname,$=+$.port;const se=new os(null);k&&vn(se,k),E&&(se.g=E),$&&bi(se,$),N&&(se.h=N),k=se}return N=y.G,E=y.wa,N&&E&&yt(k,N,E),yt(k,"VER",y.ka),Ia(y,k),k}function qu(y,E,N){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new _t(new lr({ab:N})):new _t(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}n=zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ci(){}Ci.prototype.g=function(y,E){return new Fn(y,E)};function Fn(y,E){pt.call(this),this.g=new Si(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!D(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new jr(this)}_(Fn,pt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Zl(this.g)},Fn.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var N={};N.__data__=y,y=N}else this.v&&(N={},N.__data__=is(y),y=N);E.i.push(new nn(E.Ya++,y)),E.I==3&&dr(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,Fn.Z.N.call(this)};function Fu(y){Nt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const N in E){y=N;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(Fu,Nt);function Gu(){Yt.call(this),this.status=1}_(Gu,Yt);function jr(y){this.g=y}_(jr,zu),jr.prototype.ra=function(){Pt(this.g,"a")},jr.prototype.qa=function(y){Pt(this.g,new Fu(y))},jr.prototype.pa=function(y){Pt(this.g,new Gu)},jr.prototype.oa=function(){Pt(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,xT=function(){return new Ci},yT=function(){return hn()},gT=ut,mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,rh=yn,_a.COMPLETE="complete",pT=_a,en.EventType=jt,jt.OPEN="a",jt.CLOSE="b",jt.ERROR="c",jt.MESSAGE="d",pt.prototype.listen=pt.prototype.J,Bc=en,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,mT=_t}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const v_="@firebase/firestore",b_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new Yh("@firebase/firestore");function nl(){return io.logLevel}function we(n,...e){if(io.logLevel<=Xe.DEBUG){const t=e.map(r0);io.debug(`Firestore (${Rl}): ${n}`,...t)}}function li(n,...e){if(io.logLevel<=Xe.ERROR){const t=e.map(r0);io.error(`Firestore (${Rl}): ${n}`,...t)}}function vl(n,...e){if(io.logLevel<=Xe.WARN){const t=e.map(r0);io.warn(`Firestore (${Rl}): ${n}`,...t)}}function r0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,vT(n,s,t)}function vT(n,e,t){let s=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw li(s),new Error(s)}function gt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||vT(e,a,s)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ws{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class Yk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Qk{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ni,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ni)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt(typeof s.accessToken=="string",31837,{l:s}),new bT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class Jk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xk{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Jk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const s=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new __(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Zk(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function We(n,e){return n<e?-1:n>e?1:0}function pg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return Lp(a)===Lp(l)?We(a,l):Lp(a)?1:-1}return We(n.length,e.length)}const e3=55296,t3=57343;function Lp(n){const e=n.charCodeAt(0);return e>=e3&&e<=t3}function bl(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="__name__";class xr{constructor(e,t,s){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&De(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=xr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const s=xr.isNumericId(e),a=xr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?xr.extractNumericId(e).compare(xr.extractNumericId(t)):pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class Ct extends xr{construct(e,t,s){return new Ct(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Ct(t)}static emptyPath(){return new Ct([])}}const n3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends xr{construct(e,t,s){return new In(e,t,s)}static isValidIdentifier(e){return n3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w_}static keyField(){return new In([w_])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Ct.fromString(e))}static fromName(e){return new Ie(Ct.fromString(e).popFirst(5))}static empty(){return new Ie(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n,e,t){if(!t)throw new be(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function s3(n,e,t,s){if(e===!0&&s===!0)throw new be(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function E_(n){if(!Ie.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T_(n){if(Ie.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function ns(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wh(n);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!wT(n))throw new be(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new be(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=-62135596800,S_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*S_);return new Dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<N_)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S_}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:dn("string",Dt._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Dt(0,0))}static max(){return new Le(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function r3(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(s===1e9?new Dt(t+1,0):new Dt(t,s));return new da(a,Ie.empty(),e)}function i3(n){return new da(n.readTime,n.key,ou)}class da{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new da(Le.min(),Ie.empty(),ou)}static max(){return new da(Le.max(),Ie.empty(),ou)}}function a3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==o3)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((a=>a?ue.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++h,h===l&&s(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new ue(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function c3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-1;function ef(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function u3(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function d3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A_(e)),e=h3(n.get(t),e);return A_(e)}function h3(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case ET:t+="";break;default:t+=l}}return t}function A_(n){return n+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Cn.RED,this.left=a??Cn.EMPTY,this.right=l??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Cn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Cn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I_(this.data.getIterator())}getIteratorFrom(e){return new I_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class I_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new ps([])}unionWith(e){let t=new mn(In.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NT("Invalid base64 string: "+l):l}})(e);return new Rn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const f3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const t=f3.exec(n);if(gt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fa(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",CT="__previous_value__",IT="__local_write_time__";function o0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AT])==null?void 0:s.stringValue)===ST}function tf(n){const e=n.mapValue.fields[CT];return o0(e)?tf(e):e}function lu(n){const e=ha(n.mapValue.fields[IT].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,t,s,a,l,u,h,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ih="(default)";class cu{constructor(e,t){this.projectId=e,this.database=t||Ih}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",p3="__max__",Jd={mapValue:{}},kT="__vector__",Rh="value";function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o0(n)?4:y3(n)?9007199254740991:g3(n)?10:11:De(28295,{value:n})}function Ir(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ha(a.timestampValue),h=ha(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return fa(a.bytesValue).isEqual(fa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Wt(a.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(a.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Wt(a.integerValue)===Wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Wt(a.doubleValue),h=Wt(l.doubleValue);return u===h?Ch(u)===Ch(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return bl(n.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(C_(u)!==C_(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Ir(u[p],h[p])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function uu(n,e){return(n.values||[]).find((t=>Ir(t,e)))!==void 0}function _l(n,e){if(n===e)return 0;const t=ma(n),s=ma(e);if(t!==s)return We(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=Wt(l.integerValue||l.doubleValue),p=Wt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return R_(n.timestampValue,e.timestampValue);case 4:return R_(lu(n),lu(e));case 5:return pg(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=fa(l),p=fa(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let m=0;m<h.length&&m<p.length;m++){const v=We(h[m],p[m]);if(v!==0)return v}return We(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=We(Wt(l.latitude),Wt(u.latitude));return h!==0?h:We(Wt(l.longitude),Wt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return k_(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var w,S,M,B;const h=l.fields||{},p=u.fields||{},m=(w=h[Rh])==null?void 0:w.arrayValue,v=(S=p[Rh])==null?void 0:S.arrayValue,_=We(((M=m==null?void 0:m.values)==null?void 0:M.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return _!==0?_:k_(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Jd.mapValue&&u===Jd.mapValue)return 0;if(l===Jd.mapValue)return 1;if(u===Jd.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const w=pg(p[_],v[_]);if(w!==0)return w;const S=_l(h[p[_]],m[v[_]]);if(S!==0)return S}return We(p.length,v.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function R_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ha(n),s=ha(e),a=We(t.seconds,s.seconds);return a!==0?a:We(t.nanos,s.nanos)}function k_(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=_l(t[a],s[a]);if(l)return l}return We(t.length,s.length)}function wl(n){return gg(n)}function gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ha(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=gg(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${gg(t.fields[u])}`;return a+"}"})(n.mapValue):De(61005,{value:n})}function ih(n){switch(ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return fa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+ih(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return xa(s.fields,((l,u)=>{a+=l.length+ih(u)})),a})(n.mapValue);default:throw De(13486,{value:n})}}function M_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yg(n){return!!n&&"integerValue"in n}function l0(n){return!!n&&"arrayValue"in n}function D_(n){return!!n&&"nullValue"in n}function P_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ah(n){return!!n&&"mapValue"in n}function g3(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RT])==null?void 0:s.stringValue)===kT}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xa(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xc(n.arrayValue.values[t]);return e}return{...n}}function y3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===p3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}setAll(e){let t=In.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=Xc(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ah(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){xa(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new ts(Xc(this.value))}}function MT(n){const e=[];return xa(n.fields,((t,s)=>{const a=new In([t]);if(ah(s)){const l=MT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ps(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new jn(e,0,Le.min(),Le.min(),Le.min(),ts.empty(),0)}static newFoundDocument(e,t,s,a){return new jn(e,1,t,Le.min(),s,a,0)}static newNoDocument(e,t){return new jn(e,2,t,Le.min(),Le.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,Le.min(),Le.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function j_(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=Ie.comparator(Ie.fromName(u.referenceValue),t.key):s=_l(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function L_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ir(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t="asc"){this.field=e,this.dir=t}}function x3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class un extends DT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new b3(e,t,s):t==="array-contains"?new E3(e,s):t==="in"?new T3(e,s):t==="not-in"?new N3(e,s):t==="array-contains-any"?new S3(e,s):new un(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _3(e,s):new w3(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_l(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends DT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return PT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PT(n){return n.op==="and"}function jT(n){return v3(n)&&PT(n)}function v3(n){for(const e of n.filters)if(e instanceof Js)return!1;return!0}function xg(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(jT(n))return n.filters.map((e=>xg(e))).join(",");{const e=n.filters.map((t=>xg(t))).join(",");return`${n.op}(${e})`}}function LT(n,e){return n instanceof un?(function(s,a){return a instanceof un&&s.op===a.op&&s.field.isEqual(a.field)&&Ir(s.value,a.value)})(n,e):n instanceof Js?(function(s,a){return a instanceof Js&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&LT(u,a.filters[h])),!0):!1})(n,e):void De(19439)}function VT(n){return n instanceof un?(function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`})(n):n instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(VT).join(" ,")+"}"})(n):"Filter"}class b3 extends un{constructor(e,t,s){super(e,t,s),this.key=Ie.fromName(s.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class _3 extends un{constructor(e,t){super(e,"in",t),this.keys=UT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class w3 extends un{constructor(e,t){super(e,"not-in",t),this.keys=UT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ie.fromName(s.referenceValue)))}class E3 extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l0(t)&&uu(t.arrayValue,this.value)}}class T3 extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}}class N3 extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uu(this.value.arrayValue,t)}}class S3 extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>uu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function V_(n,e=null,t=[],s=[],a=null,l=null,u=null){return new A3(n,e,t,s,a,l,u)}function c0(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>xg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>wl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>wl(s))).join(",")),e.Te=t}return e.Te}function u0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!L_(n.startAt,e.startAt)&&L_(n.endAt,e.endAt)}function vg(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function C3(n,e,t,s,a,l,u,h){return new Dl(n,e,t,s,a,l,u,h)}function nf(n){return new Dl(n)}function U_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OT(n){return n.collectionGroup!==null}function Wc(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new mn(In.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new du(l,s))})),t.has(In.keyField().canonicalString())||e.Ie.push(new du(In.keyField(),s))}return e.Ie}function Er(n){const e=qe(n);return e.Ee||(e.Ee=I3(e,Wc(n))),e.Ee}function I3(n,e){if(n.limitType==="F")return V_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new du(a.field,l)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return V_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function bg(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return u0(Er(n),Er(e))&&n.limitType===e.limitType}function qT(n){return`${c0(Er(n))}|lt:${n.limitType}`}function sl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>VT(a))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>wl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>wl(a))).join(",")),`Target(${s})`})(Er(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ie.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of Wc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const m=j_(u,h,p);return u.inclusive?m<=0:m<0})(s.startAt,Wc(s),a)||s.endAt&&!(function(u,h,p){const m=j_(u,h,p);return u.inclusive?m>=0:m>0})(s.endAt,Wc(s),a))})(n,e)}function R3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zT(n){return(e,t)=>{let s=!1;for(const a of Wc(n)){const l=k3(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function k3(n,e,t){const s=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),m=h.data.field(l);return p!==null&&m!==null?_l(p,m):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new zt(Ie.comparator);function ci(){return M3}const FT=new zt(Ie.comparator);function Hc(...n){let e=FT;for(const t of n)e=e.insert(t.key,t);return e}function GT(n){let e=FT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Qa(){return Zc()}function BT(){return Zc()}function Zc(){return new fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const D3=new zt(Ie.comparator),P3=new mn(Ie.comparator);function Ze(...n){let e=P3;for(const t of n)e=e.add(t);return e}const j3=new mn(We);function L3(){return j3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function HT(n){return{integerValue:""+n}}function $T(n,e){return u3(e)?HT(e):d0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function V3(n,e,t){return n instanceof hu?(function(a,l){const u={fields:{[AT]:{stringValue:ST},[IT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&o0(l)&&(l=tf(l)),l&&(u.fields[CT]=l),{mapValue:u}})(t,e):n instanceof El?YT(n,e):n instanceof fu?QT(n,e):(function(a,l){const u=KT(a,l),h=O_(u)+O_(a.Ae);return yg(u)&&yg(a.Ae)?HT(h):d0(a.serializer,h)})(n,e)}function U3(n,e,t){return n instanceof El?YT(n,e):n instanceof fu?QT(n,e):t}function KT(n,e){return n instanceof mu?(function(s){return yg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class hu extends af{}class El extends af{constructor(e){super(),this.elements=e}}function YT(n,e){const t=JT(e);for(const s of n.elements)t.some((a=>Ir(a,s)))||t.push(s);return{arrayValue:{values:t}}}class fu extends af{constructor(e){super(),this.elements=e}}function QT(n,e){let t=JT(e);for(const s of n.elements)t=t.filter((a=>!Ir(a,s)));return{arrayValue:{values:t}}}class mu extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function O_(n){return Wt(n.integerValue||n.doubleValue)}function JT(n){return l0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.field=e,this.transform=t}}function O3(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof El&&a instanceof El||s instanceof fu&&a instanceof fu?bl(s.elements,a.elements,Ir):s instanceof mu&&a instanceof mu?Ir(s.Ae,a.Ae):s instanceof hu&&a instanceof hu})(n.transform,e.transform)}class q3{constructor(e,t){this.version=e,this.transformResults=t}}class Ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class of{}function XT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f0(n.key,Ps.none()):new _u(n.key,n.data,Ps.none());{const t=n.data,s=ts.empty();let a=new mn(In.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new va(n.key,s,new ps(a.toArray()),Ps.none())}}function z3(n,e,t){n instanceof _u?(function(a,l,u){const h=a.value.clone(),p=z_(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof va?(function(a,l,u){if(!oh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=z_(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(WT(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function eu(n,e,t,s){return n instanceof _u?(function(l,u,h,p){if(!oh(l.precondition,u))return h;const m=l.value.clone(),v=F_(l.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof va?(function(l,u,h,p){if(!oh(l.precondition,u))return h;const m=F_(l.fieldTransforms,p,u),v=u.data;return v.setAll(WT(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return oh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function F3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=KT(s.transform,a||null);l!=null&&(t===null&&(t=ts.empty()),t.set(s.field,l))}return t||null}function q_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bl(s,a,((l,u)=>O3(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends of{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class va extends of{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function WT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function z_(n,e,t){const s=new Map;gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,U3(u,h,t[a]))}return s}function F_(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,V3(l,u,e))}return s}class f0 extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G3 extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&z3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=eu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=BT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=XT(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((t,s)=>q_(t,s)))&&bl(this.baseMutations,e.baseMutations,((t,s)=>q_(t,s)))}}class m0{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){gt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return D3})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new m0(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,st;function K3(n){switch(n){case le.OK:return De(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function ZT(n){if(n===void 0)return li("GRPC error has no .code"),le.UNKNOWN;switch(n){case cn.OK:return le.OK;case cn.CANCELLED:return le.CANCELLED;case cn.UNKNOWN:return le.UNKNOWN;case cn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case cn.INTERNAL:return le.INTERNAL;case cn.UNAVAILABLE:return le.UNAVAILABLE;case cn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case cn.NOT_FOUND:return le.NOT_FOUND;case cn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case cn.ABORTED:return le.ABORTED;case cn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case cn.DATA_LOSS:return le.DATA_LOSS;default:return De(39323,{code:n})}}(st=cn||(cn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new aa([4294967295,4294967295],0);function G_(n){const e=Y3().encode(n),t=new fT;return t.update(e),new Uint8Array(t.digest())}function B_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new aa([t,s],0),new aa([a,l],0)]}class p0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(s<0)throw new $c(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(aa.fromNumber(s)));return a.compare(Q3)===1&&(a=new aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=G_(e),[s,a]=B_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new p0(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=G_(e),[s,a]=B_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lf(Le.min(),a,new zt(We),ci(),Ze())}}class wu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wu(s,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class eN{constructor(e,t){this.targetId=e,this.Ce=t}}class tN{constructor(e,t,s=Rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class H_{constructor(){this.ve=0,this.Fe=$_(),this.Me=Rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:De(38017,{changeType:l})}})),new wu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=$_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J3{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=Xd(),this.He=Xd(),this.Ye=new zt(We)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(vg(l))if(s===0){const u=new Ie(l.path);this.et(t,u,jn.newNoDocument(u,Le.min()))}else gt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=fa(s).toUint8Array()}catch(p){if(p instanceof NT)return vl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new p0(u,a,l)}catch(p){return vl(p instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&vg(h.target)){const p=new Ie(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,jn.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Ze();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new lf(e,t,this.Ye,this.je,s);return this.je=ci(),this.Je=Xd(),this.He=Xd(),this.Ye=new zt(We),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new H_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mn(We),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mn(We),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new H_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new zt(Ie.comparator)}function $_(){return new zt(Ie.comparator)}const X3={asc:"ASCENDING",desc:"DESCENDING"},W3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z3={and:"AND",or:"OR"};class eM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _g(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tM(n,e){return Dh(n,e.toTimestamp())}function Tr(n){return gt(!!n,49232),Le.fromTimestamp((function(t){const s=ha(t);return new Dt(s.seconds,s.nanos)})(n))}function g0(n,e){return wg(n,e).canonicalString()}function wg(n,e){const t=(function(a){return new Ct(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sN(n){const e=Ct.fromString(n);return gt(lN(e),10190,{key:e.toString()}),e}function Eg(n,e){return g0(n.databaseId,e.path)}function Vp(n,e){const t=sN(e);if(t.get(1)!==n.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(iN(t))}function rN(n,e){return g0(n.databaseId,e)}function nM(n){const e=sN(n);return e.length===4?Ct.emptyPath():iN(e)}function Tg(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iN(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function K_(n,e,t){return{name:Eg(n,e),fields:t.value.mapValue.fields}}function sM(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:De(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(gt(v===void 0||typeof v=="string",58123),Rn.fromBase64String(v||"")):(gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Rn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?le.UNKNOWN:ZT(m.code);return new be(v,m.message||"")})(u);t=new tN(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Vp(n,s.document.name),l=Tr(s.document.updateTime),u=s.document.createTime?Tr(s.document.createTime):Le.min(),h=new ts({mapValue:{fields:s.document.fields}}),p=jn.newFoundDocument(a,l,u,h),m=s.targetIds||[],v=s.removedTargetIds||[];t=new lh(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Vp(n,s.document),l=s.readTime?Tr(s.readTime):Le.min(),u=jn.newNoDocument(a,l),h=s.removedTargetIds||[];t=new lh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Vp(n,s.document),l=s.removedTargetIds||[];t=new lh([],l,a,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new $3(a,l),h=s.targetId;t=new eN(h,u)}}return t}function rM(n,e){let t;if(e instanceof _u)t={update:K_(n,e.key,e.value)};else if(e instanceof f0)t={delete:Eg(n,e.key)};else if(e instanceof va)t={update:K_(n,e.key,e.data),updateMask:fM(e.fieldMask)};else{if(!(e instanceof G3))return De(16599,{Vt:e.type});t={verify:Eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof hu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof El)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof mu)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw De(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:tM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(n,e.precondition)),t}function iM(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Tr(a.updateTime):Tr(l);return u.isEqual(Le.min())&&(u=Tr(l)),new q3(u,a.transformResults||[])})(t,e)))):[]}function aM(n,e){return{documents:[rN(n,e.path)]}}function oM(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=rN(n,a);const l=(function(m){if(m.length!==0)return oN(Js.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(w){return{field:rl(w.field),direction:uM(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=_g(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function lM(n){let e=nM(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){gt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const w=aN(_);return w instanceof Js&&jT(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((w=>(function(M){return new du(il(M.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let w;return w=typeof _=="object"?_.value:_,ef(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(_){const w=!!_.before,S=_.values||[];return new kh(S,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const w=!_.before,S=_.values||[];return new kh(S,w)})(t.endAt)),C3(e,a,u,l,h,"F",p,m)}function cM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=il(t.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=il(t.unaryFilter.field);return un.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=il(t.unaryFilter.field);return un.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=il(t.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return un.create(il(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((s=>aN(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function uM(n){return X3[n]}function dM(n){return W3[n]}function hM(n){return Z3[n]}function rl(n){return{fieldPath:n.canonicalString()}}function il(n){return In.fromServerFormat(n.fieldPath)}function oN(n){return n instanceof un?(function(t){if(t.op==="=="){if(P_(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(D_(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(P_(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(D_(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:dM(t.op),value:t.value}}})(n):n instanceof Js?(function(t){const s=t.getFilters().map((a=>oN(a)));return s.length===1?s[0]:{compositeFilter:{op:hM(t.op),filters:s}}})(n):De(54877,{filter:n})}function fM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t,s,a,l=Le.min(),u=Le.min(),h=Rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.yt=e}}function pM(n){const e=lM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.Cn=new yM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(da.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(da.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class yM{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new mn(Ct.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mn(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cN=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(cN,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tl(0)}static cr(){return new Tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",xM=1048576;function J_([n,e],[t,s]){const a=We(n,t);return a===0?We(e,s):a}class vM{constructor(e){this.Ir=e,this.buffer=new mn(J_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();J_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bM{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(Q_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ml(t)?we(Q_,"Ignoring IndexedDB error during garbage collection: ",t):await kl(t)}await this.Vr(3e5)}))}}class _M{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Zh.ce);const s=new vM(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Y_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),nl()<=Xe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function wM(n,e){return new _M(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&eu(s.mutation,a,ps.empty(),Dt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const a=Qa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=Hc();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Qa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=ci();const u=Zc(),h=(function(){return Zc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof va)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),eu(v.mutation,m,v.mutation.getFieldMask(),Dt.now())):u.set(m.key,ps.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>h.set(m,new TM(v,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Zc();let a=new zt(((u,h)=>u-h)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||ps.empty();v=h.applyToLocalView(m,v),s.set(p,v);const _=(a.get(h.batchId)||Ze()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,v=p.value,_=BT();v.forEach((w=>{if(!l.has(w)){const S=XT(t.get(w),s.get(w));S!==null&&_.set(w,S),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ue.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ue.resolve(Qa());let h=ou,p=l;return u.next((m=>ue.forEach(m,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,Ze()))).next((v=>({batchId:h,changes:GT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((s=>{let a=Hc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Hc();return this.indexManager.getCollectionParents(e,l).next((h=>ue.forEach(h,(p=>{const m=(function(_,w){return new Dl(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next((v=>{v.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,jn.newInvalidDocument(v)))}));let h=Hc();return u.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&eu(v.mutation,m,ps.empty(),Dt.now()),rf(t,m)&&(h=h.insert(p,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Tr(a.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:pM(a.bundledQuery),readTime:Tr(a.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.overlays=new zt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Qa();return ue.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const a=Qa(),l=t.length+1,u=new Ie(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return ue.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new zt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Qa(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Qa(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=a)););return ue.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new H3(t,s));let l=this.qr.get(t);l===void 0&&(l=Ze(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.Qr=new mn(wn.$r),this.Ur=new mn(wn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new wn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new wn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ie(new Ct([])),s=new wn(t,e),a=new wn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new Ct([])),s=new wn(t,e),a=new wn(t,e+1);let l=Ze();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new wn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class wn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||We(e.Yr,t.Yr)}static Kr(e,t){return We(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mn(wn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new B3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new wn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?a0:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new wn(t,0),a=new wn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new mn(We);return t.forEach((a=>{const l=new wn(a,0),u=new wn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ie.isDocumentKey(l)||(l=l.child(""));const u=new wn(new Ie(l),0);let h=new mn(We);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(h=h.add(p.Yr)),!0)}),u),ue.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(a=>{const l=new wn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new wn(t,0),a=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.ri=e,this.docs=(function(){return new zt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let s=ci();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():jn.newInvalidDocument(a))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ci();const u=t.path,h=new Ie(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||a3(i3(v),s)<=0||(a.has(v.key)||rf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,s,a){De(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new kM(this)}getSize(e){return ue.resolve(this.size)}}class kM extends EM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.persistence=e,this.si=new fo((t=>c0(t)),u0),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new y0,this.targetCount=0,this.ai=Tl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),ue.waitFor(l).next((()=>a))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new CM,this.referenceDelegate=e(this),this.Pi=new MM(this),this.indexManager=new gM,this.remoteDocumentCache=(function(a){return new RM(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new mM(t),this.Ii=new SM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new IM(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const a=new DM(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class DM extends l3{constructor(e){super(),this.currentSequenceNumber=e}}class x0{constructor(e){this.persistence=e,this.Ri=new y0,this.Vi=null}static mi(e){return new x0(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const a=Ie.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.pi=new fo((s=>d3(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=wM(this,t)}static mi(e,t){return new Ph(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?ue.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,Le.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ue.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Ze(),a=Ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new v0(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oR()?8:c3(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new PM;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(nl()<=Xe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(nl()<=Xe.DEBUG&&we("QueryEngine","Query:",sl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(nl()<=Xe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):ue.resolve())}ys(e,t){if(U_(t))return ue.resolve(null);let s=Er(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Mh(t,null,"F"),s=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Ze(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,h);return this.Cs(t,m,u,p.readTime)?this.ys(e,Mh(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,a){return U_(t)||a.isEqual(Le.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?ue.resolve(null):(nl()<=Xe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),sl(t)),this.vs(e,u,t,r3(a,ou)).next((h=>h)))}))}Ds(e,t){let s=new mn(zT(e));return t.forEach(((a,l)=>{rf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return nl()<=Xe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",sl(t)),this.ps.getDocumentsMatchingQuery(e,t,da.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",LM=3e8;class VM{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new zt(We),this.xs=new fo((l=>c0(l)),u0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function UM(n,e,t,s){return new VM(n,e,t,s)}async function dN(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=Ze();for(const m of a){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function OM(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,m,v){const _=m.batch,w=_.keys();let S=ue.resolve();return w.forEach((M=>{S=S.next((()=>v.getEntry(p,M))).next((B=>{const F=m.docVersions.get(M);gt(F!==null,48541),B.version.compareTo(F)<0&&(_.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=Ze();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function hN(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qM(n,e){const t=qe(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const w=a.get(_);if(!w)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let S=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(Rn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,s)),a=a.insert(_,S),(function(B,F,ee){return B.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=LM?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(w,S,v)&&h.push(t.Pi.updateTargetData(l,S))}));let p=ci(),m=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(zM(l,u,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual(Le.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(v)}return ue.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function zM(n,e,t){let s=Ze(),a=Ze();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ci();return t.forEach(((h,p)=>{const m=l.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):we(b0,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function FM(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=a0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function GM(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,ue.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new na(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Ng(n,e,t){const s=qe(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Ml(u))throw u;we(b0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function X_(n,e,t){const s=qe(n);let a=Le.min(),l=Ze();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const _=qe(p),w=_.xs.get(v);return w!==void 0?ue.resolve(_.Ms.get(w)):_.Pi.getTargetData(m,v)})(s,u,Er(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:Le.min(),t?l:Ze()))).next((h=>(BM(s,R3(e),h),{documents:h,Qs:l})))))}function BM(n,e,t){let s=n.Os.get(e)||Le.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class W_{constructor(){this.activeTargetIds=L3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HM{constructor(){this.Mo=new W_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new W_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="ConnectivityMonitor";class e1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(Z_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(Z_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd=null;function Sg(){return Wd===null?Wd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wd++,"0x"+Wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",KM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Sg(),h=this.zo(e,t.toUriEncodedString());we(Up,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:m}=new URL(h),v=Al(m);return this.Jo(e,h,p,s,v).then((_=>(we(Up,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw vl(Up,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=KM[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class JM extends YM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Sg();return new Promise(((h,p)=>{const m=new mT;m.setWithCredentials(!0),m.listenOnce(pT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case rh.NO_ERROR:const _=m.getResponseJson();we(Dn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case rh.TIMEOUT:we(Dn,`RPC '${e}' ${u} timed out`),p(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const w=m.getStatus();if(we(Dn,`RPC '${e}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S==null?void 0:S.error;if(M&&M.status&&M.message){const B=(function(ee){const ne=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ne)>=0?ne:le.UNKNOWN})(M.status);p(new be(B,M.message))}else p(new be(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new be(le.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{we(Dn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);we(Dn,`RPC '${e}' ${u} sending request:`,a),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=Sg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xT(),h=yT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");we(Dn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let w=!1,S=!1;const M=new QM({Yo:F=>{S?we(Dn,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(w||(we(Dn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),we(Dn,`RPC '${e}' stream ${a} sending:`,F),_.send(F))},Zo:()=>_.close()}),B=(F,ee,ne)=>{F.listen(ee,(K=>{try{ne(K)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return B(_,Bc.EventType.OPEN,(()=>{S||(we(Dn,`RPC '${e}' stream ${a} transport opened.`),M.o_())})),B(_,Bc.EventType.CLOSE,(()=>{S||(S=!0,we(Dn,`RPC '${e}' stream ${a} transport closed`),M.a_(),this.E_(_))})),B(_,Bc.EventType.ERROR,(F=>{S||(S=!0,vl(Dn,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),M.a_(new be(le.UNAVAILABLE,"The operation could not be completed")))})),B(_,Bc.EventType.MESSAGE,(F=>{var ee;if(!S){const ne=F.data[0];gt(!!ne,16349);const K=ne,ie=(K==null?void 0:K.error)||((ee=K[0])==null?void 0:ee.error);if(ie){we(Dn,`RPC '${e}' stream ${a} received error:`,ie);const W=ie.status;let z=(function(I){const P=cn[I];if(P!==void 0)return ZT(P)})(W),C=ie.message;z===void 0&&(z=le.INTERNAL,C="Unknown error status: "+W+" with message "+ie.message),S=!0,M.a_(new be(z,C)),_.close()}else we(Dn,`RPC '${e}' stream ${a} received:`,ne),M.u_(ne)}})),B(h,gT.STAT_EVENT,(F=>{F.stat===mg.PROXY?we(Dn,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===mg.NOPROXY&&we(Dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){return new eM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="PersistentStream";class mN{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new be(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(t1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(t1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XM extends mN{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=sM(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Le.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?Tr(u.readTime):Le.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Tg(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=vg(p)?{documents:aM(l,p)}:{query:oM(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=nN(l,u.resumeToken);const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Le.min())>0){h.readTime=Dh(l,u.snapshotVersion.toTimestamp());const m=_g(l,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=cM(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.q_(t)}}class WM extends mN{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iM(e.writeResults,e.commitTime),s=Tr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Tg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>rM(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{}class e6 extends ZM{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,wg(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(le.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,wg(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(le.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class t6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class n6{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{mo(this)&&(we(ao,"Restarting streams for network reachability change."),await(async function(p){const m=qe(p);m.Ea.add(4),await Eu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await uf(m)})(this))}))})),this.Ra=new t6(s,a)}}async function uf(n){if(mo(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function pN(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T0(t)?E0(t):Pl(t).O_()&&w0(t,e))}function _0(n,e){const t=qe(n),s=Pl(t);t.Ia.delete(e),s.O_()&&gN(t,e),t.Ia.size===0&&(s.O_()?s.L_():mo(t)&&t.Ra.set("Unknown"))}function w0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(n).Y_(e)}function gN(n,e){n.Va.Ue(e),Pl(n).Z_(e)}function E0(n){n.Va=new J3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pl(n).start(),n.Ra.ua()}function T0(n){return mo(n)&&!Pl(n).x_()&&n.Ia.size>0}function mo(n){return qe(n).Ea.size===0}function yN(n){n.Va=void 0}async function s6(n){n.Ra.set("Online")}async function r6(n){n.Ia.forEach(((e,t)=>{w0(n,e)}))}async function i6(n,e){yN(n),T0(n)?(n.Ra.ha(e),E0(n)):n.Ra.set("Unknown")}async function a6(n,e,t){if(n.Ra.set("Online"),e instanceof tN&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){we(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jh(n,s)}else if(e instanceof lh?n.Va.Ze(e):e instanceof eN?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const s=await hN(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,m)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Rn.EMPTY_BYTE_STRING,v.snapshotVersion)),gN(l,p);const _=new na(v.target,p,m,v.sequenceNumber);w0(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){we(ao,"Failed to raise snapshot:",s),await jh(n,s)}}async function jh(n,e,t){if(!Ml(e))throw e;n.Ea.add(1),await Eu(n),n.Ra.set("Offline"),t||(t=()=>hN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function xN(n,e){return e().catch((t=>jh(n,t,e)))}async function df(n){const e=qe(n),t=pa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:a0;for(;o6(e);)try{const a=await FM(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,l6(e,a)}catch(a){await jh(e,a)}vN(e)&&bN(e)}function o6(n){return mo(n)&&n.Ta.length<10}function l6(n,e){n.Ta.push(e);const t=pa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vN(n){return mo(n)&&!pa(n).x_()&&n.Ta.length>0}function bN(n){pa(n).start()}async function c6(n){pa(n).ra()}async function u6(n){const e=pa(n);for(const t of n.Ta)e.ea(t.mutations)}async function d6(n,e,t){const s=n.Ta.shift(),a=m0.from(s,e,t);await xN(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await df(n)}async function h6(n,e){e&&pa(n).X_&&await(async function(s,a){if((function(u){return K3(u)&&u!==le.ABORTED})(a.code)){const l=s.Ta.shift();pa(s).B_(),await xN(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await df(s)}})(n,e),vN(n)&&bN(n)}async function n1(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),we(ao,"RemoteStore received new credentials");const s=mo(t);t.Ea.add(3),await Eu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function f6(n,e){const t=qe(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await Eu(t),t.Ra.set("Unknown"))}function Pl(n){return n.ma||(n.ma=(function(t,s,a){const l=qe(t);return l.sa(),new XM(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:s6.bind(null,n),t_:r6.bind(null,n),r_:i6.bind(null,n),H_:a6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),T0(n)?E0(n):n.Ra.set("Unknown")):(await n.ma.stop(),yN(n))}))),n.ma}function pa(n){return n.fa||(n.fa=(function(t,s,a){const l=qe(t);return l.sa(),new WM(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:c6.bind(null,n),r_:h6.bind(null,n),ta:u6.bind(null,n),na:d6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await df(n)):(await n.fa.stop(),n.Ta.length>0&&(we(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new N0(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(n,e){if(li("AsyncQueue",`${e}: ${n}`),Ml(n))return new be(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{static emptySet(e){return new fl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ie.comparator(t.key,s.key):(t,s)=>Ie.comparator(t.key,s.key),this.keyedMap=Hc(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new fl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.ga=new zt(Ie.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Nl{constructor(e,t,s,a,l,u,h,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Nl(e,t,fl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class p6{constructor(){this.queries=r1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=qe(t),l=a.queries;a.queries=r1(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function r1(){return new fo((n=>qT(n)),sf)}async function A0(n,e){const t=qe(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new m6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=S0(u,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&I0(t)}async function C0(n,e){const t=qe(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function g6(n,e){const t=qe(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&I0(t)}function y6(n,e,t){const s=qe(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function I0(n){n.Ca.forEach((e=>{e.next()}))}var Ag,i1;(i1=Ag||(Ag={})).Ma="default",i1.Cache="cache";class R0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.key=e}}class wN{constructor(e){this.key=e}}class x6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=zT(e),this.tu=new fl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new s1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const w=a.get(v),S=rf(this.query,_)?_:null,M=!!w&&this.mutatedKeys.has(w.key),B=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let F=!1;w&&S?w.data.isEqual(S.data)?M!==B&&(s.track({type:3,doc:S}),F=!0):this.su(w,S)||(s.track({type:2,doc:S}),F=!0,(p&&this.eu(S,p)>0||m&&this.eu(S,m)<0)&&(h=!0)):!w&&S?(s.track({type:0,doc:S}),F=!0):w&&!S&&(s.track({type:1,doc:w}),F=!0,(p||m)&&(h=!0)),F&&(S?(u=u.add(S),l=B?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(S,M){const B=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:F})}};return B(S)-B(M)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,m=p!==this.Za;return this.Za=p,u.length!==0||m?{snapshot:new Nl(this.query,e.tu,l,u,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new wN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new _N(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const k0="SyncEngine";class v6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class b6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new fo((h=>qT(h)),sf),this.Iu=new Map,this.Eu=new Set,this.du=new zt(Ie.comparator),this.Au=new Map,this.Ru=new y0,this.Vu={},this.mu=new Map,this.fu=Tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w6(n,e,t=!0){const s=CN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await EN(s,e,t,!0),a}async function E6(n,e){const t=CN(n);await EN(t,e,!0,!1)}async function EN(n,e,t,s){const a=await GM(n.localStore,Er(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await T6(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&pN(n.remoteStore,a),h}async function T6(n,e,t,s,a){n.pu=(_,w,S)=>(async function(B,F,ee,ne){let K=F.view.ru(ee);K.Cs&&(K=await X_(B.localStore,F.query,!1).then((({documents:C})=>F.view.ru(C,K))));const ie=ne&&ne.targetChanges.get(F.targetId),W=ne&&ne.targetMismatches.get(F.targetId)!=null,z=F.view.applyChanges(K,B.isPrimaryClient,ie,W);return o1(B,F.targetId,z.au),z.snapshot})(n,_,w,S);const l=await X_(n.localStore,e,!0),u=new x6(e,l.Qs),h=u.ru(l.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,p);o1(n,t,m.au);const v=new v6(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function N6(n,e,t){const s=qe(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!sf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ng(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&_0(s.remoteStore,a.targetId),Cg(s,a.targetId)})).catch(kl)):(Cg(s,a.targetId),await Ng(s.localStore,a.targetId,!0))}async function S6(n,e){const t=qe(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),_0(t.remoteStore,s.targetId))}async function A6(n,e,t){const s=P6(n);try{const a=await(function(u,h){const p=qe(u),m=Dt.now(),v=h.reduce(((S,M)=>S.add(M.key)),Ze());let _,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let M=ci(),B=Ze();return p.Ns.getEntries(S,v).next((F=>{M=F,M.forEach(((ee,ne)=>{ne.isValidDocument()||(B=B.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(S,M))).next((F=>{_=F;const ee=[];for(const ne of h){const K=F3(ne,_.get(ne.key).overlayedDocument);K!=null&&ee.push(new va(ne.key,K,MT(K.value.mapValue),Ps.exists(!0)))}return p.mutationQueue.addMutationBatch(S,m,ee,h)})).next((F=>{w=F;const ee=F.applyToLocalDocumentSet(_,B);return p.documentOverlayCache.saveOverlays(S,F.batchId,ee)}))})).then((()=>({batchId:w.batchId,changes:GT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let m=u.Vu[u.currentUser.toKey()];m||(m=new zt(We)),m=m.insert(h,p),u.Vu[u.currentUser.toKey()]=m})(s,a.batchId,t),await Tu(s,a.changes),await df(s.remoteStore)}catch(a){const l=S0(a,"Failed to persist write");t.reject(l)}}async function TN(n,e){const t=qe(n);try{const s=await qM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?gt(u.hu,14607):a.removedDocuments.size>0&&(gt(u.hu,42227),u.hu=!1))})),await Tu(t,s,e)}catch(s){await kl(s)}}function a1(n,e,t){const s=qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=qe(u);p.onlineState=h;let m=!1;p.queries.forEach(((v,_)=>{for(const w of _.Sa)w.va(h)&&(m=!0)})),m&&I0(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function C6(n,e,t){const s=qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new zt(Ie.comparator);u=u.insert(l,jn.newNoDocument(l,Le.min()));const h=Ze().add(l),p=new lf(Le.min(),new Map,new zt(We),u,h);await TN(s,p),s.du=s.du.remove(l),s.Au.delete(e),M0(s)}else await Ng(s.localStore,e,!1).then((()=>Cg(s,e,t))).catch(kl)}async function I6(n,e){const t=qe(n),s=e.batch.batchId;try{const a=await OM(t.localStore,e);SN(t,s,null),NN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tu(t,a)}catch(a){await kl(a)}}async function R6(n,e,t){const s=qe(n);try{const a=await(function(u,h){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,h).next((_=>(gt(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);SN(s,e,t),NN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tu(s,a)}catch(a){await kl(a)}}function NN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function SN(n,e,t){const s=qe(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||AN(n,s)}))}function AN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(_0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),M0(n))}function o1(n,e,t){for(const s of t)s instanceof _N?(n.Ru.addReference(s.key,e),k6(n,s)):s instanceof wN?(we(k0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||AN(n,s.key)):De(19791,{wu:s})}function k6(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(we(k0,"New document in limbo: "+t),n.Eu.add(s),M0(n))}function M0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ie(Ct.fromString(e)),s=n.fu.next();n.Au.set(s,new b6(t)),n.du=n.du.insert(t,s),pN(n.remoteStore,new na(Er(nf(t.path)),s,"TargetPurposeLimboResolution",Zh.ce))}}async function Tu(n,e,t){const s=qe(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){a.push(m);const _=v0.As(p.targetId,m);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,m){const v=qe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ue.forEach(m,(w=>ue.forEach(w.Es,(S=>v.persistence.referenceDelegate.addReference(_,w.targetId,S))).next((()=>ue.forEach(w.ds,(S=>v.persistence.referenceDelegate.removeReference(_,w.targetId,S)))))))))}catch(_){if(!Ml(_))throw _;we(b0,"Failed to update sequence numbers: "+_)}for(const _ of m){const w=_.targetId;if(!_.fromCache){const S=v.Ms.get(w),M=S.snapshotVersion,B=S.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(w,B)}}})(s.localStore,l))}async function M6(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){we(k0,"User change. New user:",e.toKey());const s=await dN(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new be(le.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tu(t,s.Ls)}}function D6(n,e){const t=qe(n),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let a=Ze();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function CN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C6.bind(null,e),e.Pu.H_=g6.bind(null,e.eventManager),e.Pu.yu=y6.bind(null,e.eventManager),e}function P6(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return UM(this.persistence,new jM,e.initialUser,this.serializer)}Cu(e){return new uN(x0.mi,this.serializer)}Du(e){return new HM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class j6 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new bM(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new uN((s=>Ph.mi(s,t)),this.serializer)}}class Ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>a1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=M6.bind(null,this.syncEngine),await f6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new p6})()}createDatastore(e){const t=cf(e.databaseInfo.databaseId),s=(function(l){return new JM(l)})(e.databaseInfo);return(function(l,u,h,p){return new e6(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new n6(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>a1(this.syncEngine,t,0)),(function(){return e1.v()?new e1:new $M})())}createSyncEngine(e,t){return(function(a,l,u,h,p,m,v){const _=new _6(a,l,u,h,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=qe(a);we(ao,"RemoteStore shutting down."),l.Ea.add(5),await Eu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="FirestoreClient";class L6{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Pn.UNAUTHENTICATED,this.clientId=i0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{we(ga,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(we(ga,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=S0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qp(n,e){n.asyncQueue.verifyOperationInProgress(),we(ga,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await dN(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function l1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await V6(n);we(ga,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>n1(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>n1(e.remoteStore,a))),n._onlineComponents=e}async function V6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(ga,"Using user provided OfflineComponentProvider");try{await qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await qp(n,new Lh)}}else we(ga,"Using default OfflineComponentProvider"),await qp(n,new j6(void 0));return n._offlineComponents}async function IN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(ga,"Using user provided OnlineComponentProvider"),await l1(n,n._uninitializedComponentsProvider._online)):(we(ga,"Using default OnlineComponentProvider"),await l1(n,new Ig))),n._onlineComponents}function U6(n){return IN(n).then((e=>e.syncEngine))}async function Vh(n){const e=await IN(n),t=e.eventManager;return t.onListen=w6.bind(null,e.syncEngine),t.onUnlisten=N6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S6.bind(null,e.syncEngine),t}function O6(n,e,t={}){const s=new ni;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new D0({next:w=>{v.Nu(),u.enqueueAndForget((()=>C0(l,_)));const S=w.docs.has(h);!S&&w.fromCache?m.reject(new be(le.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&p&&p.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new R0(nf(h.path),v,{includeMetadataChanges:!0,qa:!0});return A0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}function q6(n,e,t={}){const s=new ni;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,m){const v=new D0({next:w=>{v.Nu(),u.enqueueAndForget((()=>C0(l,_))),w.fromCache&&p.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),_=new R0(h,v,{includeMetadataChanges:!0,qa:!0});return A0(l,_)})(await Vh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firestore.googleapis.com",u1=!0;class d1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=u1}else this.host=e.host,this.ssl=e.ssl??u1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xM)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Kk;switch(s.type){case"firstParty":return new Xk(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=c1.get(t);s&&(we("ComponentProvider","Removing Datastore"),c1.delete(t),s.terminate())})(this),Promise.resolve()}}function z6(n,e,t,s={}){var m;n=ns(n,hf);const a=Al(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(wE(`https://${h}`),EE("Firestore",!0)),l.host!==kN&&l.host!==h&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!ii(p,u)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Pn.MOCK_USER;else{v=ZI(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Pn(w)}n._authCredentials=new Yk(new bT(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class $t{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(bu(t,$t._jsonSchema))return new $t(e,s||null,new Ie(Ct.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:dn("string",$t._jsonSchemaVersion),referencePath:dn("string")};class oa extends mi{constructor(e,t,s){super(e,t,nf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Ie(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function qt(n,e,...t){if(n=Kt(n),_T("collection","path",e),n instanceof hf){const s=Ct.fromString(e,...t);return T_(s),new oa(n,null,s)}{if(!(n instanceof $t||n instanceof oa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return T_(s),new oa(n.firestore,null,s)}}function Xs(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=i0.newId()),_T("doc","path",e),n instanceof hf){const s=Ct.fromString(e,...t);return E_(s),new $t(n,null,new Ie(s))}{if(!(n instanceof $t||n instanceof oa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return E_(s),new $t(n.firestore,n instanceof oa?n.converter:null,new Ie(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="AsyncQueue";class f1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fN(this,"async_queue_retry"),this._c=()=>{const s=Op();s&&we(h1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ni;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;we(h1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",m1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=N0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&De(47125,{Pc:m1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function m1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class ui extends hf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new f1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f1(e),this._firestoreClient=void 0,await e}}}function F6(n,e){const t=typeof n=="object"?n:Qg(),s=typeof n=="string"?n:Ih,a=ho(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=XI("firestore");l&&z6(a,...l)}return a}function ff(n){if(n._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G6(n),n._firestoreClient}function G6(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,m,v){return new m3(h,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,RN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(Rn.fromBase64String(e))}catch(t){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:dn("string",Ms._jsonSchemaVersion),bytes:dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nr._jsonSchemaVersion}}static fromJSON(e){if(bu(e,Nr._jsonSchema))return new Nr(e.latitude,e.longitude)}}Nr._jsonSchemaVersion="firestore/geoPoint/1.0",Nr._jsonSchema={type:dn("string",Nr._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sr(e.vectorValues);throw new be(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:dn("string",Sr._jsonSchemaVersion),vectorValues:dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=/^__.*__$/;class H6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class MN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class pf{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(DN(this.Ac)&&B6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $6{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||cf(e)}Cc(e,t,s,a=!1){return new pf({Ac:e,methodName:t,Dc:s,path:In.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gf(n){const e=n._freezeSettings(),t=cf(n._databaseId);return new $6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);V0("Data must be an object, but it was:",u,s);const h=jN(s,u);let p,m;if(l.merge)p=new ps(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const w=Rg(e,_,t);if(!u.contains(w))throw new be(le.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);VN(v,w)||v.push(w)}p=new ps(v),m=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=u.fieldTransforms;return new H6(new ts(h),p,m)}class yf extends jl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function K6(n,e,t){return new pf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P0 extends jl{_toFieldTransform(e){return new h0(e.path,new hu)}isEqual(e){return e instanceof P0}}class j0 extends jl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=K6(this,e,!0),s=this.vc.map((l=>Ll(l,t))),a=new El(s);return new h0(e.path,a)}isEqual(e){return e instanceof j0&&ii(this.vc,e.vc)}}class L0 extends jl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new mu(e.serializer,$T(e.serializer,this.Fc));return new h0(e.path,t)}isEqual(e){return e instanceof L0&&this.Fc===e.Fc}}function Y6(n,e,t,s){const a=n.Cc(1,e,t);V0("Data must be an object, but it was:",a,s);const l=[],u=ts.empty();xa(s,((p,m)=>{const v=U0(e,p,t);m=Kt(m);const _=a.yc(v);if(m instanceof yf)l.push(v);else{const w=Ll(m,_);w!=null&&(l.push(v),u.set(v,w))}}));const h=new ps(l);return new MN(u,h,a.fieldTransforms)}function Q6(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Rg(e,s,t)],p=[a];if(l.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)h.push(Rg(e,l[w])),p.push(l[w+1]);const m=[],v=ts.empty();for(let w=h.length-1;w>=0;--w)if(!VN(m,h[w])){const S=h[w];let M=p[w];M=Kt(M);const B=u.yc(S);if(M instanceof yf)m.push(S);else{const F=Ll(M,B);F!=null&&(m.push(S),v.set(S,F))}}const _=new ps(m);return new MN(v,_,u.fieldTransforms)}function J6(n,e,t,s=!1){return Ll(t,n.Cc(s?4:3,e))}function Ll(n,e){if(LN(n=Kt(n)))return V0("Unsupported field value:",e,n),jN(n,e);if(n instanceof jl)return(function(s,a){if(!DN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Ll(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $T(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Dt.fromDate(s);return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Dt){const l=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,l)}}if(s instanceof Nr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ms)return{bytesValue:nN(a.serializer,s._byteString)};if(s instanceof $t){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:g0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Sr)return(function(u,h){return{mapValue:{fields:{[RT]:{stringValue:kT},[Rh]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return d0(h.serializer,m)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Wh(s)}`)})(n,e)}function jN(n,e){const t={};return TT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(n,((s,a)=>{const l=Ll(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function LN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof Nr||n instanceof Ms||n instanceof $t||n instanceof jl||n instanceof Sr)}function V0(n,e,t){if(!LN(t)||!wT(t)){const s=Wh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Rg(n,e,t){if((e=Kt(e))instanceof mf)return e._internalPath;if(typeof e=="string")return U0(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const X6=new RegExp("[~\\*/\\[\\]]");function U0(n,e,t){if(e.search(X6)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mf(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new be(le.INVALID_ARGUMENT,h+n+p)}function VN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends UN{data(){return super.data()}}function xf(n,e){return typeof e=="string"?U0(n,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O0{}class q0 extends O0{}function Vn(n,e,...t){let s=[];e instanceof O0&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof z0)).length,h=l.filter((p=>p instanceof vf)).length;if(u>1||u>0&&h>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class vf extends q0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new vf(e,t,s)}_apply(e){const t=this._parse(e);return qN(e._query,t),new mi(e.firestore,e.converter,bg(e._query,t))}_parse(e){const t=gf(e.firestore);return(function(l,u,h,p,m,v,_){let w;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){y1(_,v);const M=[];for(const B of _)M.push(g1(p,l,B));w={arrayValue:{values:M}}}else w=g1(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||y1(_,v),w=J6(h,u,_,v==="in"||v==="not-in");return un.create(m,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ks(n,e,t){const s=e,a=xf("where",n);return vf._create(a,s,t)}class z0 extends O0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new z0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)qN(u,p),u=bg(u,p)})(e._query,t),new mi(e.firestore,e.converter,bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class F0 extends q0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new F0(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(l,u)})(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Dl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Ja(n,e="asc"){const t=e,s=xf("orderBy",n);return F0._create(s,t)}class G0 extends q0{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new G0(e,t,s)}_apply(e){return new mi(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Zd(n){return G0._create("limit",n,"F")}function g1(n,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OT(e)&&t.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ct.fromString(t));if(!Ie.isDocumentKey(s))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return M_(n,new Ie(s))}if(t instanceof $t)return M_(n,t._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function y1(n,e){if(!Array.isArray(n)||n.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qN(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z6{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xa(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Rh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>Wt(u.doubleValue)));return new Sr(t)}convertGeoPoint(e){return new Nr(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const t=ha(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ct.fromString(e);gt(lN(s),9688,{name:e});const a=new cu(s.get(1),s.get(3)),l=new Ie(s.popFirst(5));return a.isEqual(t)||li(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wa extends UN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wa._jsonSchema={type:dn("string",Wa._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class ch extends Wa{data(e={}){return super.data(e)}}class Za{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Kc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ch(this._firestore,this._userDataWriter,s.key,s,new Kc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new ch(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Kc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new ch(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Kc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:eD(h.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){n=ns(n,$t);const e=ns(n.firestore,ui);return O6(ff(e),n._key).then((t=>GN(e,n,t)))}Za._jsonSchemaVersion="firestore/querySnapshot/1.0",Za._jsonSchema={type:dn("string",Za._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class B0 extends Z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function Bn(n){n=ns(n,mi);const e=ns(n.firestore,ui),t=ff(e),s=new B0(e);return ON(n._query),q6(t,n._query).then((a=>new Za(e,s,n,a)))}function H0(n,e,t){n=ns(n,$t);const s=ns(n.firestore,ui),a=zN(n.converter,e,t);return _f(s,[PN(gf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ps.none())])}function bf(n,e,t,...s){n=ns(n,$t);const a=ns(n.firestore,ui),l=gf(a);let u;return u=typeof(e=Kt(e))=="string"||e instanceof mf?Q6(l,"updateDoc",n._key,e,t,s):Y6(l,"updateDoc",n._key,e),_f(a,[u.toMutation(n._key,Ps.exists(!0))])}function tD(n){return _f(ns(n.firestore,ui),[new f0(n._key,Ps.none())])}function oo(n,e){const t=ns(n.firestore,ui),s=Xs(n),a=zN(n.converter,e);return _f(t,[PN(gf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Ps.exists(!1))]).then((()=>s))}function nD(n,...e){var p,m,v;n=Kt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||p1(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(p1(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(m=_.error)==null?void 0:m.bind(_),e[s+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,u,h;if(n instanceof $t)u=ns(n.firestore,ui),h=nf(n._key.path),l={next:_=>{e[s]&&e[s](GN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=ns(n,mi);u=ns(_.firestore,ui),h=_._query;const w=new B0(u);l={next:S=>{e[s]&&e[s](new Za(u,w,_,S))},error:e[s+1],complete:e[s+2]},ON(n._query)}return(function(w,S,M,B){const F=new D0(B),ee=new R0(S,F,M);return w.asyncQueue.enqueueAndForget((async()=>A0(await Vh(w),ee))),()=>{F.Nu(),w.asyncQueue.enqueueAndForget((async()=>C0(await Vh(w),ee)))}})(ff(u),h,a,l)}function _f(n,e){return(function(s,a){const l=new ni;return s.asyncQueue.enqueueAndForget((async()=>A6(await U6(s),a,l))),l.promise})(ff(n),e)}function GN(n,e,t){const s=t.docs.get(e._key),a=new B0(n);return new Wa(n,a,e._key,s,new Kc(t.hasPendingWrites,t.fromCache),e.converter)}function si(){return new P0("serverTimestamp")}function sD(...n){return new j0("arrayUnion",n)}function kg(n){return new L0("increment",n)}(function(e,t=!0){(function(a){Rl=a})(Cl),Cr(new Ys("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new ui(new Qk(s.getProvider("auth-internal")),new Wk(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(m.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ds(v_,b_,e),Ds(v_,b_,"esm2020")})();const BN="@firebase/installations",$0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=1e4,$N=`w:${$0}`,KN="FIS_v2",rD="https://firebaseinstallations.googleapis.com/v1",iD=3600*1e3,aD="installations",oD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lo=new uo(aD,oD,lD);function YN(n){return n instanceof Ws&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN({projectId:n}){return`${rD}/projects/${n}/installations`}function JN(n){return{token:n.token,requestStatus:2,expiresIn:uD(n.expiresIn),creationTime:Date.now()}}async function XN(n,e){const s=(await e.json()).error;return lo.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function WN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function cD(n,{refreshToken:e}){const t=WN(n);return t.append("Authorization",dD(e)),t}async function ZN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function uD(n){return Number(n.replace("s","000"))}function dD(n){return`${KN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=QN(n),a=WN(n),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={fid:t,authVersion:KN,appId:n.appId,sdkVersion:$N},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await ZN(()=>fetch(s,h));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:JN(m.authToken)}}else throw await XN("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=/^[cdef][\w-]{21}$/,Mg="";function pD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=gD(n);return mD.test(t)?t:Mg}catch{return Mg}}function gD(n){return fD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new Map;function n2(n,e){const t=wf(n);s2(t,e),yD(t,e)}function s2(n,e){const t=t2.get(n);if(t)for(const s of t)s(e)}function yD(n,e){const t=xD();t&&t.postMessage({key:n,fid:e}),vD()}let Xa=null;function xD(){return!Xa&&"BroadcastChannel"in self&&(Xa=new BroadcastChannel("[Firebase] FID Change"),Xa.onmessage=n=>{s2(n.data.key,n.data.fid)}),Xa}function vD(){t2.size===0&&Xa&&(Xa.close(),Xa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-installations-database",_D=1,co="firebase-installations-store";let zp=null;function K0(){return zp||(zp=IE(bD,_D,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(co)}}})),zp}async function Oh(n,e){const t=wf(n),a=(await K0()).transaction(co,"readwrite"),l=a.objectStore(co),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&n2(n,e.fid),e}async function r2(n){const e=wf(n),s=(await K0()).transaction(co,"readwrite");await s.objectStore(co).delete(e),await s.done}async function Ef(n,e){const t=wf(n),a=(await K0()).transaction(co,"readwrite"),l=a.objectStore(co),u=await l.get(t),h=e(u);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&n2(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(n){let e;const t=await Ef(n.appConfig,s=>{const a=wD(s),l=ED(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Mg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function wD(n){const e=n||{fid:pD(),registrationStatus:0};return i2(e)}function ED(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(lo.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=TD(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ND(n)}:{installationEntry:e}}async function TD(n,e){try{const t=await hD(n,e);return Oh(n.appConfig,t)}catch(t){throw YN(t)&&t.customData.serverCode===409?await r2(n.appConfig):await Oh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function ND(n){let e=await x1(n.appConfig);for(;e.registrationStatus===1;)await e2(100),e=await x1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Y0(n);return s||t}return e}function x1(n){return Ef(n,e=>{if(!e)throw lo.create("installation-not-found");return i2(e)})}function i2(n){return SD(n)?{fid:n.fid,registrationStatus:0}:n}function SD(n){return n.registrationStatus===1&&n.registrationTime+HN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD({appConfig:n,heartbeatServiceProvider:e},t){const s=CD(n,t),a=cD(n,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const u={installation:{sdkVersion:$N,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},p=await ZN(()=>fetch(s,h));if(p.ok){const m=await p.json();return JN(m)}else throw await XN("Generate Auth Token",p)}function CD(n,{fid:e}){return`${QN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(n,e=!1){let t;const s=await Ef(n.appConfig,l=>{if(!a2(l))throw lo.create("not-registered");const u=l.authToken;if(!e&&kD(u))return l;if(u.requestStatus===1)return t=ID(n,e),l;{if(!navigator.onLine)throw lo.create("app-offline");const h=DD(l);return t=RD(n,h),h}});return t?await t:s.authToken}async function ID(n,e){let t=await v1(n.appConfig);for(;t.authToken.requestStatus===1;)await e2(100),t=await v1(n.appConfig);const s=t.authToken;return s.requestStatus===0?Q0(n,e):s}function v1(n){return Ef(n,e=>{if(!a2(e))throw lo.create("not-registered");const t=e.authToken;return PD(t)?{...e,authToken:{requestStatus:0}}:e})}async function RD(n,e){try{const t=await AD(n,e),s={...e,authToken:t};return await Oh(n.appConfig,s),t}catch(t){if(YN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await r2(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Oh(n.appConfig,s)}throw t}}function a2(n){return n!==void 0&&n.registrationStatus===2}function kD(n){return n.requestStatus===2&&!MD(n)}function MD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+iD}function DD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function PD(n){return n.requestStatus===1&&n.requestTime+HN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n){const e=n,{installationEntry:t,registrationPromise:s}=await Y0(e);return s?s.catch(console.error):Q0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n,e=!1){const t=n;return await VD(t),(await Q0(t,e)).token}async function VD(n){const{registrationPromise:e}=await Y0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n){if(!n||!n.options)throw Fp("App Configuration");if(!n.name)throw Fp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Fp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Fp(n){return lo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="installations",OD="installations-internal",qD=n=>{const e=n.getProvider("app").getImmediate(),t=UD(e),s=ho(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},zD=n=>{const e=n.getProvider("app").getImmediate(),t=ho(e,o2).getImmediate();return{getId:()=>jD(t),getToken:a=>LD(t,a)}};function FD(){Cr(new Ys(o2,qD,"PUBLIC")),Cr(new Ys(OD,zD,"PRIVATE"))}FD();Ds(BN,$0);Ds(BN,$0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="analytics",GD="firebase_id",BD="origin",HD=60*1e3,$D="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gs=new uo("analytics","Analytics",KD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){if(!n.startsWith(J0)){const e=gs.create("invalid-gtag-resource",{gtagURL:n});return Hn.warn(e.message),""}return n}function l2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function QD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function JD(n,e){const t=QD("firebase-js-sdk-policy",{createScriptURL:YD}),s=document.createElement("script"),a=`${J0}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function XD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function WD(n,e,t,s,a,l){const u=s[a];try{if(u)await e[u];else{const p=(await l2(t)).find(m=>m.measurementId===a);p&&await e[p.appId]}}catch(h){Hn.error(h)}n("config",a,l)}async function ZD(n,e,t,s,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await l2(t);for(const p of u){const m=h.find(_=>_.measurementId===p),v=m&&e[m.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,a||{})}catch(l){Hn.error(l)}}function eP(n,e,t,s){async function a(l,...u){try{if(l==="event"){const[h,p]=u;await ZD(n,e,t,h,p)}else if(l==="config"){const[h,p]=u;await WD(n,e,t,s,h,p)}else if(l==="consent"){const[h,p]=u;n("consent",h,p)}else if(l==="get"){const[h,p,m]=u;n("get",h,p,m)}else if(l==="set"){const[h]=u;n("set",h)}else n(l,...u)}catch(h){Hn.error(h)}}return a}function tP(n,e,t,s,a){let l=function(...u){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=eP(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function nP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(J0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=30,rP=1e3;class iP{constructor(e={},t=rP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const c2=new iP;function aP(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function oP(n){var u;const{appId:e,apiKey:t}=n,s={method:"GET",headers:aP(t)},a=$D.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let h="";try{const p=await l.json();(u=p.error)!=null&&u.message&&(h=p.error.message)}catch{}throw gs.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function lP(n,e=c2,t){const{appId:s,apiKey:a,measurementId:l}=n.options;if(!s)throw gs.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw gs.create("no-api-key")}const u=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new dP;return setTimeout(async()=>{h.abort()},HD),u2({appId:s,apiKey:a,measurementId:l},u,h,e)}async function u2(n,{throttleEndTimeMillis:e,backoffCount:t},s,a=c2){var h;const{appId:l,measurementId:u}=n;try{await cP(s,e)}catch(p){if(u)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:u};throw p}try{const p=await oP(n);return a.deleteThrottleMetadata(l),p}catch(p){const m=p;if(!uP(m)){if(a.deleteThrottleMetadata(l),u)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:l,measurementId:u};throw p}const v=Number((h=m==null?void 0:m.customData)==null?void 0:h.httpStatus)===503?Bb(t,a.intervalMillis,sP):Bb(t,a.intervalMillis),_={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return a.setThrottleMetadata(l,_),Hn.debug(`Calling attemptFetch again in ${v} millis`),u2(n,_,s,a)}}function cP(n,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),s(gs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uP(n){if(!(n instanceof Ws)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class dP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function hP(n,e,t,s,a){if(a&&a.global){n("event",t,s);return}else{const l=await e,u={...s,send_to:l};n("event",t,u)}}async function fP(n,e,t,s){if(s&&s.global){const a={};for(const l of Object.keys(t))a[`user_properties.${l}`]=t[l];return n("set",a),Promise.resolve()}else{const a=await e;n("config",a,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(){if(NE())try{await SE()}catch(n){return Hn.warn(gs.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Hn.warn(gs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function pP(n,e,t,s,a,l,u){const h=lP(n);h.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Hn.error(w)),e.push(h);const p=mP().then(w=>{if(w)return s.getId()}),[m,v]=await Promise.all([h,p]);nP(l)||JD(l,m.measurementId),a("js",new Date);const _=(u==null?void 0:u.config)??{};return _[BD]="firebase",_.update=!0,v!=null&&(_[GD]=v),a("config",m.measurementId,_),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.app=e}_delete(){return delete ml[this.app.options.appId],Promise.resolve()}}let ml={},b1=[];const _1={};let Gp="dataLayer",yP="gtag",w1,X0,E1=!1;function xP(){const n=[];if(TE()&&n.push("This is a browser extension environment."),lR()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=gs.create("invalid-analytics-context",{errorInfo:e});Hn.warn(t.message)}}function vP(n,e,t){xP();const s=n.options.appId;if(!s)throw gs.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gs.create("no-api-key");if(ml[s]!=null)throw gs.create("already-exists",{id:s});if(!E1){XD(Gp);const{wrappedGtag:l,gtagCore:u}=tP(ml,b1,_1,Gp,yP);X0=l,w1=u,E1=!0}return ml[s]=pP(n,b1,_1,e,w1,Gp,t),new gP(n)}function bP(n=Qg()){n=Kt(n);const e=ho(n,qh);return e.isInitialized()?e.getImmediate():_P(n)}function _P(n,e={}){const t=ho(n,qh);if(t.isInitialized()){const a=t.getImmediate();if(ii(e,t.getOptions()))return a;throw gs.create("already-initialized")}return t.initialize({options:e})}function wP(n,e,t){n=Kt(n),fP(X0,ml[n.app.options.appId],e,t).catch(s=>Hn.error(s))}function EP(n,e,t,s){n=Kt(n),hP(X0,ml[n.app.options.appId],e,t,s).catch(a=>Hn.error(a))}const T1="@firebase/analytics",N1="0.10.19";function TP(){Cr(new Ys(qh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return vP(s,a,t)},"PUBLIC")),Cr(new Ys("analytics-internal",n,"PRIVATE")),Ds(T1,N1),Ds(T1,N1,"esm2020");function n(e){try{const t=e.getProvider(qh).getImmediate();return{logEvent:(s,a,l)=>EP(t,s,a,l),setUserProperties:(s,a)=>wP(t,s,a)}}catch(t){throw gs.create("interop-component-reg-failed",{reason:t})}}}TP();const NP={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},W0=RE(NP),tu=Hk(W0),it=F6(W0);bP(W0);const d2=G.createContext(void 0),SP=({children:n})=>{const[e,t]=G.useState(null),[s,a]=G.useState(!0),l=(p,m)=>{const v=`teacher-${m.split("@")[0]}`;let _="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";p.includes("")?_="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":p.includes("")&&(_="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:v,email:m,displayName:p,role:"teacher",avatar:_,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",p),localStorage.setItem("teacherEmail",m)},u=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await P5(tu)}catch(p){console.error("Logout error",p)}},h=async p=>{if(e)try{let m={...p};if(p.firstName!==void 0||p.lastName!==void 0){const v=p.firstName!==void 0?p.firstName:e.firstName||"",_=p.lastName!==void 0?p.lastName:e.lastName||"";m.displayName=`${v} ${_}`.trim()}if(t(v=>v?{...v,...m}:null),e.role!=="teacher"){const v=Xs(it,"users",e.uid);await H0(v,m,{merge:!0})}}catch(m){throw console.error("Error updating profile:",m),m}};return G.useEffect(()=>{const p=localStorage.getItem("isTeacher")==="true";if(p){const v=localStorage.getItem("teacherName")||"",_=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";l(v,_),a(!1);return}const m=D5(tu,async v=>{if(v)try{const _=Xs(it,"users",v.uid),w=await FN(_);if(w.exists()){const S=w.data();(v.email==="q@gmail.com"||v.email==="yazan22@gmail.com")&&(S.totalXP=25e3,S.quizzesCompleted=500),t({uid:v.uid,email:v.email||"",displayName:S.displayName||`${S.firstName||""} ${S.lastName||""}`.trim()||"Student",firstName:S.firstName,lastName:S.lastName,age:S.age,role:S.role,grade:S.grade,phone:S.phone,address:S.address,school:S.school,gender:S.gender,avatar:S.avatar,profileBackground:S.profileBackground,genderChanged:S.genderChanged,aptitudeResults:S.aptitudeResults,performanceAnalysis:S.performanceAnalysis})}else t({uid:v.uid,email:v.email||"",displayName:"User",role:"student"})}catch(_){console.error("Error fetching user profile:",_)}else p||t(null);a(!1)});return()=>m()},[]),o.jsx(d2.Provider,{value:{user:e,loading:s,logout:u,setTeacherSession:l,updateUserProfile:h},children:!s&&n})},ss=()=>{const n=G.useContext(d2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},AP=({onLoginClick:n,onNavigate:e,onLogoutClick:t})=>{const[s,a]=G.useState(!1),[l,u]=G.useState(!1),{user:h}=ss();G.useEffect(()=>{const m=()=>{window.scrollY>10?u(!0):u(!1)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const p=m=>{e(m),a(!1),window.scrollTo({top:0,behavior:"smooth"})};return o.jsxs("nav",{className:`w-full z-50 sticky top-0 transition-all duration-500 ${l?"bg-gray-950 shadow-lg":"bg-transparent shadow-none"}`,children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>p("HOME"),children:[o.jsx("div",{className:"p-1 bg-white/5 rounded-full group-hover:bg-white/10 transition-colors",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"  ",className:"w-10 h-10 md:w-12 md:h-12 rounded-full object-cover border-2 border-white/10 shadow-sm"})}),o.jsx("span",{className:"text-xl md:text-2xl font-black text-white tracking-tight drop-shadow-sm",children:""})]}),o.jsx("div",{className:"hidden md:flex items-center justify-center flex-1 px-4 lg:px-8",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1.5 rounded-full border transition-all duration-500 ${l?"bg-gray-900/50 border-white/5 backdrop-blur-sm":"bg-white/5 border-white/5 backdrop-blur-sm"}`,children:[o.jsxs("button",{onClick:()=>p("HOME"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(yh,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("QUIZZES"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(On,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("LESSONS_EXPLANATIONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(no,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>p("LESSONS"),className:"px-4 py-1.5 text-gray-200 font-bold rounded-full hover:bg-white/10 hover:text-white transition-all flex items-center gap-2 text-sm",children:[o.jsx(Ar,{className:"w-4 h-4"})," "]})]})}),o.jsx("div",{className:"hidden md:flex items-center gap-3",children:h?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>p("PROFILE"),className:"flex items-center gap-2 text-white hover:bg-white/10 px-3 py-1.5 rounded-full transition-all font-bold border border-transparent hover:border-white/10",title:" ",children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center border border-white/20",children:h.avatar?o.jsx("img",{src:h.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(Ln,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:h.displayName.split(" ")[0]})]}),h.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>p("QUESTION_BANK"),className:"bg-white/10 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all border border-white/10",title:" ",children:o.jsx(ca,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>p("TEACHER_DASHBOARD"),className:"bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all shadow-lg border border-blue-400/50",title:" ",children:o.jsx(ph,{className:"w-5 h-5"})})]}),o.jsx("button",{onClick:t,className:"bg-red-500/10 text-red-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition-all border border-red-500/20",title:"",children:o.jsx(su,{className:"w-4 h-4"})})]}):o.jsxs("button",{onClick:n,className:"bg-gradient-to-r from-emerald-600 to-teal-700 text-white px-5 py-2 rounded-full font-bold hover:shadow-[0_0_15px_rgba(16,185,129,0.4)] transition-all shadow-md flex items-center gap-2 transform hover:scale-105 border border-emerald-500/30 text-sm",children:[o.jsx(Zp,{className:"w-4 h-4"})," "]})}),o.jsx("div",{className:"md:hidden flex items-center gap-2",children:o.jsx("button",{onClick:()=>a(!s),className:"text-white hover:text-emerald-200 p-2 transition-colors",children:s?o.jsx(br,{className:"w-7 h-7"}):o.jsx($C,{className:"w-7 h-7"})})})]})}),s&&o.jsx("div",{className:"md:hidden bg-gray-950/95 backdrop-blur-xl border-t border-white/10 shadow-xl absolute w-full z-50 animate-fade-in h-screen overflow-y-auto pb-20",children:o.jsxs("div",{className:"px-4 pt-2 pb-6 space-y-2",children:[h&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-white/5 rounded-2xl border border-white/10 mt-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center text-white font-bold text-lg overflow-hidden border border-white/20",children:h.avatar?o.jsx("img",{src:h.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):h.displayName.charAt(0)}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-white text-lg",children:h.displayName}),o.jsx("span",{className:"text-sm text-gray-400",children:h.email})]})]}),o.jsxs("button",{onClick:()=>p("HOME"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(yh,{className:"w-5 h-5 text-emerald-400"})," "]}),o.jsxs("button",{onClick:()=>p("QUIZZES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(On,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("LESSONS_EXPLANATIONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(no,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("LESSONS"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Ar,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("CONTACT_TEACHER"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(Hg,{className:"w-5 h-5 text-emerald-400"}),"   "]}),o.jsxs("button",{onClick:()=>p("ABOUT_PLATFORM"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(IC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsxs("button",{onClick:()=>p("SERVICES"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(lE,{className:"w-5 h-5 text-emerald-400"})," "]}),h&&o.jsxs("button",{onClick:()=>p("PROFILE"),className:"block w-full text-right px-4 py-3 font-bold text-gray-200 hover:bg-white/10 rounded-xl transition-colors flex items-center gap-3",children:[o.jsx(rC,{className:"w-5 h-5 text-emerald-400"}),"  "]}),o.jsx("div",{className:"border-t border-white/10 my-2 pt-2"}),h?o.jsxs("div",{className:"space-y-3 mt-2",children:[h.role==="teacher"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>p("TEACHER_DASHBOARD"),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-md flex items-center justify-center gap-2",children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]}),o.jsxs("button",{onClick:()=>p("QUESTION_BANK"),className:"w-full bg-gray-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2",children:[o.jsx(ca,{className:"w-5 h-5"})," "]})]}),o.jsxs("button",{onClick:()=>{a(!1),t()},className:"w-full bg-red-900/20 text-red-400 border border-red-900/30 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-red-900/40",children:[o.jsx(su,{className:"w-5 h-5"})," "]})]}):o.jsxs("button",{onClick:()=>{a(!1),n()},className:"w-full mt-2 bg-gradient-to-r from-emerald-600 to-teal-700 text-white py-3 rounded-xl font-black text-lg shadow-lg flex items-center justify-center gap-2",children:[o.jsx(Zp,{className:"w-6 h-6"})," "]})]})})]})},CP=({onStartQuiz:n,onLoginClick:e,onNavigate:t})=>{const{user:s}=ss(),[a,l]=G.useState(!1),u=()=>{l(!0),setTimeout(()=>l(!1),3e3)},h=()=>{s?t("QUIZZES"):u()},p=()=>{s?t("LESSONS"):u()},m=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return o.jsxs("section",{className:"relative w-full min-h-[calc(100vh-80px)] flex items-center justify-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300",children:[a&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[o.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:o.jsx(mh,{className:"w-6 h-6 text-red-200"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),o.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),o.jsx("button",{onClick:()=>l(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:o.jsx(br,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{l(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-0 w-full relative z-10 flex flex-col items-center text-center",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/40 border border-emerald-800 px-4 py-2 rounded-full shadow-lg backdrop-blur-md",children:[o.jsx(ei,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})}),o.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",o.jsx("br",{}),o.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",o.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:o.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),o.jsx("br",{}),"  "]}),o.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["         ",o.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),o.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[o.jsxs("button",{onClick:h,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(On,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(no,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:p,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Ar,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:" "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:()=>t("PLATFORM_DEFINITION"),className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Zr,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"   "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Hg,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),o.jsx("div",{className:"w-full mt-2",children:s?o.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-800/80 backdrop-blur-sm border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[o.jsx(Ln,{className:"w-5 h-5"})," "]}):o.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:o.jsx(Zp,{className:"w-5 h-5 text-white"})}),o.jsx("span",{children:"  "})]}),o.jsx(vr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},Bp=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),Hp=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),IP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),S1=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],RP=({onNavigate:n})=>{const[e,t]=G.useState([0,1,2]),[s,a]=G.useState(!0);G.useEffect(()=>{const h=setInterval(()=>{a(!1),setTimeout(()=>{const p=[];for(;p.length<3;){const m=Math.floor(Math.random()*S1.length);p.includes(m)||p.push(m)}t(p),a(!0)},500)},5e3);return()=>clearInterval(h)},[]);const l=h=>{switch(h){case"whatsapp":return o.jsx(Bp,{className:"w-5 h-5 text-white"});case"messenger":return o.jsx(IP,{className:"w-5 h-5 text-white"});case"telegram":return o.jsx(Hp,{className:"w-5 h-5 text-white"});default:return null}},u=h=>{switch(h){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}};return o.jsx("section",{className:"py-20 relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),o.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(tg,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Wp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Hp,{className:"w-6 h-6"})})]})]})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[o.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-center sm:text-right flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),o.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),o.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[o.jsx(tg,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),o.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Wp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Bp,{className:"w-6 h-6"})}),o.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:o.jsx(Hp,{className:"w-6 h-6"})})]})]})]})]}),o.jsx("div",{className:"text-center mb-12",children:o.jsxs("button",{onClick:()=>n("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[o.jsx(eo,{className:"w-6 h-6"}),"  ",o.jsx(hh,{className:"w-6 h-6"})]})}),o.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map((h,p)=>{const m=S1[h];return o.jsx("div",{className:`transform transition-all duration-500 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-lg border border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-white/10 transition-all",children:[o.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-white/5 border-b border-r border-white/5 transform rotate-45"}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:m.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white",children:m.name}),o.jsx("span",{className:"text-xs text-gray-500 font-medium",children:m.time})]})]}),o.jsx("div",{className:`w-8 h-8 rounded-full ${u(m.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:l(m.platform)})]}),o.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',m.text,'"']})]})},`${m.id}-${p}`)})})]})]})})},A1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=G.useState(!1),h=G.useRef(null);G.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":l?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(to,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-3 h-3"})]},v)})})]})},kP=({isOpen:n,onClose:e})=>{const[t,s]=G.useState("ROLE_SELECTION"),[a,l]=G.useState(!1),[u,h]=G.useState(null),[p,m]=G.useState(null),{setTeacherSession:v}=ss(),[_,w]=G.useState(""),[S,M]=G.useState(""),[B,F]=G.useState(""),[ee,ne]=G.useState(""),[K,ie]=G.useState(""),[W,z]=G.useState(""),[C,R]=G.useState(""),[I,P]=G.useState(""),[j,V]=G.useState(""),[D,Ge]=G.useState("male"),[$e,Z]=G.useState(""),[pe,de]=G.useState("");if(!n)return null;const Pe=()=>{s("ROLE_SELECTION"),h(null),m(null),w(""),M(""),F(""),ne(""),ie(""),z(""),R(""),P(""),V(""),Ge("male"),de(""),Z(""),l(!1)},Re=()=>{Pe(),e()},O=Ve=>{Ve.preventDefault(),h(null),l(!0),setTimeout(()=>{_==="2001"?(v(".   ","yazan@etqan.edu"),m("   !"),setTimeout(()=>Re(),1500)):_==="2003"?(v(".   ","majd@etqan.edu"),m("    !"),setTimeout(()=>Re(),1500)):(h("   "),l(!1))},800)},Q=async Ve=>{Ve.preventDefault(),h(null),l(!0);try{await R5(tu,S.trim(),B),m("   !"),setTimeout(()=>Re(),1500)}catch(bt){console.error(bt),h("      "),l(!1)}},U=async Ve=>{Ve.preventDefault(),h(null),l(!0);try{const et=(await I5(tu,I.trim(),j)).user,Zt="",rs=C==="university"&&$e?$e:"";await H0(Xs(it,"users",et.uid),{firstName:ee,lastName:K,age:W,grade:C,gender:D,school:rs,avatar:Zt,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:I.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),m("   !"),setTimeout(()=>Re(),1500)}catch(bt){console.error(bt),bt.code==="auth/email-already-in-use"?h("   "):bt.code==="auth/weak-password"?h("   "):h("    .    ."),l(!1)}},te=async Ve=>{Ve.preventDefault(),h(null),l(!0);try{await C5(tu,pe.trim()),m("   !")}catch(bt){console.error(bt),bt.code==="auth/user-not-found"?h("    "):bt.code==="auth/invalid-email"?h("    "):bt.code==="auth/too-many-requests"?h("           ."):h("          .")}finally{l(!1)}},he=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ne=()=>o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),o.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:o.jsx(Ln,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),o.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:o.jsx(ri,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{className:"text-right flex-1",children:[o.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),o.jsx(Cp,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),je=()=>o.jsxs("form",{onSubmit:O,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ya,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsx("input",{type:"password",value:_,onChange:Ve=>w(Ve.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),at=()=>o.jsxs("form",{onSubmit:Q,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:S,onChange:Ve=>M(Ve.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(eg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"password",value:B,onChange:Ve=>F(Ve.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),o.jsx(Ya,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),o.jsx("div",{className:"text-left",children:o.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"mt-4 text-center",children:o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",o.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Ae=()=>{const Ve=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(et=>({label:` ${et}`,value:et.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],bt=[{label:"",value:"male"},{label:"",value:"female"}];return o.jsxs("form",{onSubmit:U,className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:ee,onChange:et=>ne(et.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"text",value:K,onChange:et=>ie(et.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx("input",{type:"number",value:W,onChange:et=>z(et.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),o.jsx(A1,{options:bt,value:D,onChange:et=>Ge(et),placeholder:" "})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),o.jsx(A1,{options:Ve,value:C,onChange:et=>R(et),placeholder:"  / "})]}),C==="university"&&o.jsxs("div",{className:"space-y-1 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),o.jsx("input",{type:"text",value:$e,onChange:et=>Z(et.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"email",value:I,onChange:et=>P(et.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),o.jsx("input",{type:"password",value:j,onChange:et=>V(et.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},It=()=>o.jsxs("form",{onSubmit:te,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),o.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",o.jsx("strong",{children:""}),"  "]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"email",value:pe,onChange:Ve=>de(Ve.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),o.jsx(eg,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),o.jsx("button",{type:"submit",disabled:a,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),o.jsx("div",{className:"text-center mt-4",children:o.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[o.jsx(hh,{className:"w-4 h-4"}),"  "]})})]});return o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Re}),o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[a&&!p&&o.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),o.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:o.jsx(Ht,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),o.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:he()}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),o.jsx("button",{onClick:Re,disabled:a,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:o.jsx(br,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!p&&t!=="FORGOT_PASSWORD"&&o.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:a,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[o.jsx(Cp,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs font-bold",children:""})]}),o.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:p?o.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:o.jsx(la,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:p}),t==="FORGOT_PASSWORD"&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[o.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[o.jsx(mh,{className:"w-5 h-5"}),"  :"]}),o.jsxs("p",{className:"leading-relaxed",children:["         ",o.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),o.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),m(null)):Re()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):o.jsxs(o.Fragment,{children:[t==="ROLE_SELECTION"&&Ne(),t==="TEACHER_LOGIN"&&je(),t==="STUDENT_LOGIN"&&at(),t==="STUDENT_SIGNUP"&&Ae(),t==="FORGOT_PASSWORD"&&It(),u&&o.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[o.jsx(mh,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsx("span",{className:"font-medium",children:u})]})]})})]})]})},MP=()=>{const{user:n}=ss(),[e,t]=G.useState(!1),[s,a]=G.useState(null),[l,u]=G.useState("MCQ"),[h,p]=G.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[m,v]=G.useState([]),[_,w]=G.useState(null),[S,M]=G.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[B,F]=G.useState(""),[ee,ne]=G.useState(!1),[K,ie]=G.useState([]),[W,z]=G.useState(!1),[C,R]=G.useState(""),I=(U,te)=>{M(he=>({...he,[U]:te}))},P=(U,te)=>{const he=[...S.options];he[U]=te,M(Ne=>({...Ne,options:he}))},j=()=>{if(!S.question.trim()){alert("   ");return}if((l==="MCQ"||l==="READING")&&S.options.some(he=>!he.trim())){alert("   ");return}if(l==="READING"&&!S.passageContent.trim()){alert("   ");return}if(l==="REORDER"&&!B.trim()){alert("    ");return}let U=[];if(l==="TF")U=["",""];else if(l==="REORDER"){if(U=B.split(" ").filter(he=>he.trim().length>0),U.length<2){alert("       ");return}}else U=S.options;const te={id:_||Date.now(),question:S.question,options:U,correctAnswer:S.correctAnswer,explanation:S.explanation||"",type:l};l==="READING"&&(te.passageContent=S.passageContent,te.generalInstruction=S.generalInstruction,te.passageFontSize=S.passageFontSize),_?(v(m.map(he=>he.id===_?te:he)),w(null)):v([...m,te]),V()},V=()=>{M({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),F(""),w(null),u("MCQ")},D=U=>{const te=m.find(he=>he.id===U);te&&(w(U),u(te.type||"MCQ"),te.type==="REORDER"?(F(te.options.join(" ")),M({question:te.question,options:["","","",""],correctAnswer:te.correctAnswer,explanation:te.explanation||"",passageContent:te.passageContent||"",generalInstruction:te.generalInstruction||"",passageFontSize:te.passageFontSize||"md"})):(M({question:te.question,options:te.type==="TF"?["","","",""]:te.options.length>=4?te.options:[...te.options,...Array(4-te.options.length).fill("")],correctAnswer:te.correctAnswer,explanation:te.explanation||"",passageContent:te.passageContent||"",generalInstruction:te.generalInstruction||"",passageFontSize:te.passageFontSize||"md"}),F("")),window.scrollTo({top:0,behavior:"smooth"}))},Ge=()=>{V()},$e=U=>{window.confirm("      ")&&(v(m.filter(te=>te.id!==U)),_===U&&V())},Z=async()=>{if(!h.title||!h.grade){alert("     ");return}if(m.length===0){alert("     ");return}t(!0);try{const U={title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:m,createdBy:(n==null?void 0:n.uid)||"teacher",teacherName:(n==null?void 0:n.displayName)||"",description:h.description||"",duration:parseInt(h.duration)||30,questionDuration:h.questionDuration?parseInt(h.questionDuration):void 0};if(s){const te=Xs(it,"quizzes",s);await bf(te,{...U,updatedAt:si()}),alert("    !")}else await oo(qt(it,"quizzes"),{...U,createdAt:si()}),alert("    !");p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),V()}catch(U){console.error("Error saving quiz:",U),alert("   ")}finally{t(!1)}},pe=()=>{window.confirm("        .")&&(p({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),a(null),V())},de=async()=>{z(!0);try{const U=Vn(qt(it,"quizzes"),Ja("createdAt","desc")),te=await Bn(U);ie(te.docs.map(he=>({id:he.id,...he.data()})))}catch(U){console.error(U)}z(!1)},Pe=()=>{de(),ne(!0)},Re=U=>{m.length>0&&!window.confirm("         .")||(a(U.id||null),p({title:U.title,subject:U.subject,grade:U.grade,category:U.category||"Language",description:U.description||"",duration:U.duration?U.duration.toString():"30",questionDuration:U.questionDuration?U.questionDuration.toString():""}),v(U.questions),ne(!1),V(),window.scrollTo({top:0,behavior:"smooth"}))},O=K.filter(U=>U.title.toLowerCase().includes(C.toLowerCase())||U.grade.includes(C)),Q=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:o.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:o.jsx(Ub,{className:"w-10 h-10 text-blue-400"})}),o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),o.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",n==null?void 0:n.displayName]})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:Pe,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[o.jsx(Jp,{className:"w-5 h-5"})," "]})})]})})}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(On,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),o.jsx("button",{onClick:pe,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:o.jsx(br,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:U=>p({...h,title:U.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx($g,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.subject,onChange:U=>p({...h,subject:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"English",children:"English"}),o.jsx("option",{value:"Science",children:""}),o.jsx("option",{value:"Math",children:""})]})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),o.jsxs("div",{className:"relative",children:[o.jsx(ri,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.grade,onChange:U=>p({...h,grade:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",className:"text-gray-400",children:" "}),o.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(U=>o.jsxs("option",{value:U.toString(),children:[" ",U]},U))}),o.jsx("optgroup",{label:" ",children:o.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(to,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"col-span-2 md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),o.jsxs("div",{className:"relative",children:[o.jsx(mE,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),o.jsxs("select",{value:h.category,onChange:U=>p({...h,category:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),o.jsx("option",{value:"General",children:"  (General Quiz)"})]}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx(to,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(Hh,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),o.jsx("input",{type:"number",min:"1",value:h.duration,onChange:U=>p({...h,duration:U.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(pE,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),o.jsx("input",{type:"number",min:"5",value:h.questionDuration,onChange:U=>p({...h,questionDuration:U.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),o.jsx("textarea",{value:h.description,onChange:U=>p({...h,description:U.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:o.jsx(ph,{className:"w-5 h-5 text-blue-400"})}),_?" ":" "]}),o.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[o.jsx("button",{onClick:()=>u("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsx("button",{onClick:()=>u("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),o.jsxs("button",{onClick:()=>u("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(Ar,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>u("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(uE,{className:"w-4 h-4"})," "]})]})]}),o.jsxs("div",{className:"space-y-6",children:[l==="READING"&&o.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[o.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[o.jsx(AI,{className:"w-5 h-5"})," "]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),o.jsx("input",{type:"text",value:S.generalInstruction,onChange:U=>I("generalInstruction",U.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),o.jsx("textarea",{value:S.passageContent,onChange:U=>I("passageContent",U.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),o.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[o.jsx(VI,{className:"w-4 h-4"}),"   (  )"]}),o.jsx("div",{className:"flex gap-3",children:Q.map(U=>o.jsx("button",{onClick:()=>I("passageFontSize",U.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${S.passageFontSize===U.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:U.label},U.value))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:l==="READING"?"  ":l==="REORDER"?"/ ":" "}),o.jsxs("div",{className:"relative",children:[o.jsx(Zr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),o.jsx("input",{type:"text",value:S.question,onChange:U=>I("question",U.target.value),placeholder:l==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),l==="MCQ"||l==="READING"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.options.map((U,te)=>o.jsxs("div",{className:`relative group transition-all duration-300 ${S.correctAnswer===te?"scale-[1.02]":""}`,children:[o.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[o.jsxs("span",{className:`text-xs font-bold ${S.correctAnswer===te?"text-blue-400":"text-gray-400"}`,children:[" ",te+1]}),o.jsx("button",{onClick:()=>I("correctAnswer",te),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${S.correctAnswer===te?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:S.correctAnswer===te?" ":" "})]}),o.jsx("input",{type:"text",value:U,onChange:he=>P(te,he.target.value),placeholder:`  ${te+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${te===S.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},te))}):l==="REORDER"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),o.jsx("input",{type:"text",dir:"ltr",value:B,onChange:U=>F(U.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),B&&o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:B.split(" ").filter(U=>U.trim()).map((U,te)=>o.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:U},te))}),o.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("button",{onClick:()=>I("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===0&&o.jsx(es,{className:"w-6 h-6"})," (True)"]}),o.jsxs("button",{onClick:()=>I("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${S.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[S.correctAnswer===1&&o.jsx(es,{className:"w-6 h-6"})," (False)"]})]}),o.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[o.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),o.jsx("textarea",{value:S.explanation,onChange:U=>I("explanation",U.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm"})]}),o.jsxs("div",{className:"flex gap-3",children:[_&&o.jsxs("button",{onClick:Ge,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[o.jsx(hE,{className:"w-5 h-5"})," "]}),o.jsx("button",{onClick:j,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${_?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:_?o.jsxs(o.Fragment,{children:[o.jsx(sa,{className:"w-5 h-5"})," "]}):o.jsxs(o.Fragment,{children:[o.jsx(ph,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"sticky top-24 space-y-6",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[o.jsx(sa,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:m.length})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:h.category})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),o.jsxs("span",{className:"font-bold text-white",children:[h.duration," "]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?o.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):o.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),o.jsxs("button",{onClick:Z,disabled:e||m.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||m.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):s?o.jsx(dE,{className:"w-5 h-5"}):o.jsx(es,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),m.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:o.jsx(Ub,{className:"w-4 h-4 text-blue-400"})}),"  (",m.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:m.map((U,te)=>o.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${_===U.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:te+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:U.question}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:U.type==="REORDER"?"":U.options.length===2?"/":U.passageContent?"":""})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[o.jsxs("button",{onClick:()=>D(U.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(sg,{className:"w-3.5 h-3.5"}),""]}),o.jsx("div",{className:"w-px h-3 bg-gray-600"}),o.jsxs("button",{onClick:()=>$e(U.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[o.jsx(rg,{className:"w-3.5 h-3.5"}),""]})]})]},U.id))})]})]})})]})}),ee&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(Jp,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),o.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(br,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:o.jsxs("div",{className:"relative",children:[o.jsx(ua,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),o.jsx("input",{type:"text",placeholder:"   ...",value:C,onChange:U=>R(U.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:W?o.jsx("div",{className:"flex justify-center py-10",children:o.jsx(Ht,{className:"w-8 h-8 animate-spin text-emerald-600"})}):O.length===0?o.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(U=>o.jsxs("div",{onClick:()=>Re(U),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:U.subject}),o.jsx("span",{className:"text-xs text-gray-400",children:U.grade})]}),o.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:U.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(Zr,{className:"w-3 h-3"}),U.questions.length," "]})]},U.id))})})]})})]})},$p=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:Gg},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:On},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ua},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:eo},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:$h},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Sl}],DP=[{id:"first_step",title:" ",desc:"   ",icon:Gg,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:n=>n.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%  ",icon:ei,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:n=>n.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5 ",icon:On,color:"text-blue-500",bg:"bg-blue-500/10",condition:n=>n.quizzesCompleted>=5},{id:"expert",title:" ",desc:" 10 ",icon:cl,color:"text-purple-500",bg:"bg-purple-500/10",condition:n=>n.quizzesCompleted>=10},{id:"high_level",title:" ",desc:"  5",icon:$h,color:"text-orange-500",bg:"bg-orange-500/10",condition:n=>n.level>=5},{id:"master",title:" ",desc:"  10",icon:Sl,color:"text-red-500",bg:"bg-red-500/10",condition:n=>n.level>=10}],PP=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],Kp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],C1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=G.useState(!1),h=G.useRef(null);G.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-[100]":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${a?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":l?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-600"}`,children:p?p.label:s}),o.jsx(to,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-blue-500":""}`})]}),l&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-3 h-3"})]},v)})})]})},jP=({onNavigate:n})=>{const{user:e,updateUserProfile:t}=ss(),[s,a]=G.useState(!1),[l,u]=G.useState(null),[h,p]=G.useState(!1),[m,v]=G.useState(!1),[_,w]=G.useState((e==null?void 0:e.avatar)||""),[S,M]=G.useState((e==null?void 0:e.profileBackground)||Kp[0].url),[B,F]=G.useState([]),[ee,ne]=G.useState(!0),[K,ie]=G.useState(0),[W,z]=G.useState(1),[C,R]=G.useState($p[0]),[I,P]=G.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1}),[j,V]=G.useState([]),[D,Ge]=G.useState(""),[$e,Z]=G.useState(!1),[pe,de]=G.useState("50"),[Pe,Re]=G.useState(null),[O,Q]=G.useState(!1),[U,te]=G.useState(""),[he,Ne]=G.useState(!1),[je,at]=G.useState([]),[Ae,It]=G.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});G.useEffect(()=>{if(e&&(It(fe=>({...fe,firstName:e.firstName||fe.firstName,lastName:e.lastName||fe.lastName,gender:e.gender||fe.gender,grade:e.grade||fe.grade,school:e.school||fe.school})),e.avatar&&w(e.avatar),e.profileBackground&&M(e.profileBackground),e.aptitudeResults)){const fe=[...e.aptitudeResults].sort((He,nt)=>new Date(nt.date).getTime()-new Date(He.date).getTime());at(fe)}},[e]),G.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){ne(!1),Z(!0);try{const He=Vn(qt(it,"users"),Ks("role","==","student")),en=(await Bn(He)).docs.map(jt=>({id:jt.id,...jt.data()}));V(en)}catch(He){console.error("Error fetching students:",He)}finally{Z(!1)}return}try{const He=Vn(qt(it,"quiz_results"),Ks("userId","==",e.uid)),nt=await Bn(He),en=[];let jt=0,Nt=!1;nt.forEach(hn=>{const kn=hn.data();en.push({id:hn.id,...hn.data()});let gn=10+kn.percentage*2;kn.passed&&(gn+=50),kn.percentage===100&&(gn+=100,Nt=!0),jt+=Math.round(gn)}),en.sort((hn,kn)=>{var _e,Se;const gn=((_e=hn.createdAt)==null?void 0:_e.seconds)||0,me=((Se=kn.createdAt)==null?void 0:Se.seconds)||0;return gn-me}),F(en);let Yt=jt;try{const hn=Xs(it,"users",e.uid),kn=await FN(hn);kn.exists()&&kn.data().totalXP!==void 0?Yt=kn.data().totalXP:e.totalXP!==void 0&&(Yt=e.totalXP)}catch{e.totalXP!==void 0&&(Yt=e.totalXP)}ie(Yt);const ut=Math.floor(Yt/500)+1;z(ut);const vi=[...$p].reverse().find(hn=>ut>=hn.minLevel)||$p[0];R(vi),P({quizzesCompleted:en.length,hasPerfectScore:Nt,level:ut})}catch(He){console.error(He)}finally{ne(!1)}}})()},[e]);const Ve=async fe=>{fe.preventDefault(),a(!0),u(null);try{let He={...Ae};Ae.grade==="university"&&Ae.universityName&&(He.school=Ae.universityName),delete He.universityName,await t(He),u("   !"),setTimeout(()=>u(null),3e3)}catch(He){console.error(He),alert("   ")}finally{a(!1)}},bt=async()=>{a(!0);try{await t({avatar:_}),p(!1)}catch(fe){console.error(fe)}finally{a(!1)}},et=async()=>{a(!0);try{await t({profileBackground:S}),v(!1)}catch(fe){console.error(fe)}finally{a(!1)}},Zt=async(fe,He)=>{if(!fe)return;const nt=parseInt(pe);if(isNaN(nt)||nt<=0){alert("    ");return}if(window.confirm(`     ${nt}   ${He}`)){a(!0),Re(null);try{const en=Xs(it,"users",fe);await bf(en,{totalXP:kg(nt)}),V(jt=>jt.map(Nt=>Nt.id===fe?{...Nt,totalXP:(Nt.totalXP||0)+nt}:Nt)),Re(`  ${nt} XP  ${He} !`),setTimeout(()=>Re(null),3e3)}catch(en){console.error(en),alert("    ")}finally{a(!1)}}},rs=async()=>{if(!U.trim()){alert("   ");return}Ne(!0);try{await oo(qt(it,"announcements"),{title:U,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:si()}),alert("   "),te(""),Q(!1)}catch(fe){console.error(fe),alert("   ")}finally{Ne(!1)}},pn=j.filter(fe=>(fe.displayName||"").toLowerCase().includes(D.toLowerCase())||(fe.email||"").toLowerCase().includes(D.toLowerCase())),er=fe=>fe?fe.startsWith("http")?{backgroundImage:`url(${fe})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${Kp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Rr=fe=>!fe||fe.startsWith("http")?"bg-no-repeat bg-center":fe,pt=B.slice(-10).map(fe=>fe.percentage),Pt=pt.length>0?Math.max(...pt):0,ys=pt.length>0?Math.min(...pt):0,yi=pt.length>0?Math.round(pt.reduce((fe,He)=>fe+He,0)/pt.length):0,xi=B.length,Ft=(W-1)*500,xs=Math.min(100,Math.max(0,(K-Ft)/500*100)),zn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",kr=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(fe=>({label:` ${fe}`,value:fe.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],is=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(Ln,{className:"w-full h-full p-4 text-gray-400"})}),o.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:o.jsx(es,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"text-center md:text-right space-y-2",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),o.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[o.jsx(eg,{className:"w-4 h-4 text-blue-500"}),e.email]}),o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[o.jsx(ri,{className:"w-3.5 h-3.5"})," "]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-12",children:[o.jsxs("button",{onClick:()=>n&&n("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:o.jsx(yC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:o.jsx(ca,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:o.jsx(cC,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:o.jsx(no,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>Q(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:o.jsx(Yc,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),o.jsxs("button",{onClick:()=>n&&n("TEACHER_FEEDBACK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-teal-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-teal-900/20 text-teal-400 flex items-center justify-center group-hover:bg-teal-600 group-hover:text-white transition-colors",children:o.jsx(ll,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[o.jsx(cl,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),Pe&&o.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[o.jsx(es,{className:"w-4 h-4"})," ",Pe]})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx(ua,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"   ...",value:D,onChange:fe=>Ge(fe.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),o.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:$e?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Ht,{className:"w-8 h-8 animate-spin text-blue-500"})}):D===""?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):pn.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):pn.map(fe=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:fe.avatar?o.jsx("img",{src:fe.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(Ln,{className:"w-5 h-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:fe.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[o.jsx(gh,{className:"w-3 h-3"})," ",fe.totalXP||0]}),o.jsxs("span",{children:[" ",fe.email]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:pe,onChange:He=>de(He.target.value),children:[o.jsx("option",{value:"10",children:"+10 XP"}),o.jsx("option",{value:"50",children:"+50 XP"}),o.jsx("option",{value:"100",children:"+100 XP"}),o.jsx("option",{value:"200",children:"+200 XP"}),o.jsx("option",{value:"500",children:"+500 XP"})]}),o.jsx("button",{onClick:()=>Zt(fe.id,fe.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:o.jsx(fI,{className:"w-4 h-4"})})]})]},fe.id))})]})]}),O&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:o.jsx(Yc,{className:"w-6 h-6 text-orange-400"})}),o.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),o.jsx("button",{onClick:()=>Q(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:o.jsx(br,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:U,onChange:fe=>te(fe.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),o.jsxs("button",{onClick:rs,disabled:he,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[he?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"})," "]})]})]})})]}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[h&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Ln,{className:"w-5 h-5 text-purple-500"}),"  "]}),o.jsx("button",{onClick:()=>p(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(br,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-3 gap-3",children:PP.map((fe,He)=>{const nt=W<fe.minLevel;return o.jsxs("button",{onClick:()=>!nt&&w(fe.url),disabled:nt,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${_===fe.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${nt?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[o.jsx("img",{src:fe.url,alt:`Avatar ${He}`,className:"w-full h-full object-cover"}),nt&&o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[o.jsx(Ya,{className:"w-4 h-4 mb-0.5"}),o.jsxs("span",{className:"text-[10px] font-bold",children:[" ",fe.minLevel]})]}),!nt&&_===fe.url&&o.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:o.jsx(es,{className:"w-3 h-3"})})]},He)})})}),o.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:o.jsxs("button",{onClick:bt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})}),m&&o.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[o.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(qb,{className:"w-6 h-6 text-emerald-500"}),"  "]}),o.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(br,{className:"w-6 h-6 text-gray-500"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Kp.map((fe,He)=>{const nt=W<fe.minLevel,en=S===fe.url;return o.jsxs("button",{onClick:()=>!nt&&M(fe.url),disabled:nt,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${en?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${nt?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${fe.url})`}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:nt?o.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[o.jsx(Ya,{className:"w-4 h-4 text-white"}),o.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",fe.minLevel]})]}):en&&o.jsx(es,{className:"w-8 h-8 text-white drop-shadow-md"})}),o.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:o.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:fe.name})})]},He)})})}),o.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),o.jsx("button",{onClick:et,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[o.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Rr(e==null?void 0:e.profileBackground)}`,style:er(e==null?void 0:e.profileBackground),children:[o.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[o.jsx(qb,{className:"w-4 h-4"}),"  "]}),o.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${C.color}`,children:[o.jsx(C.icon,{className:"w-4 h-4"})," ",C.title]})]}),o.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>p(!0),children:[o.jsx("div",{className:"w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] border-gray-800 shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center",children:e!=null&&e.avatar?o.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):o.jsx(Ln,{className:"w-16 h-16 text-gray-500"})}),o.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:o.jsx(tI,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm font-medium mb-6",children:[o.jsx("span",{children:e==null?void 0:e.email}),o.jsx("span",{className:"text-gray-300",children:""}),o.jsxs("span",{className:"text-emerald-400 font-bold flex items-center gap-1",children:[o.jsx(cl,{className:"w-3 h-3"}),"  ",W]})]})]}),o.jsxs("form",{onSubmit:Ve,className:"space-y-6 border-t border-gray-700 pt-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(Ln,{className:"w-5 h-5 text-blue-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ae.firstName,onChange:fe=>It({...Ae,firstName:fe.target.value}),className:zn})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ae.lastName,onChange:fe=>It({...Ae,lastName:fe.target.value}),className:zn})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx(C1,{options:is,value:Ae.gender,onChange:fe=>!(e!=null&&e.genderChanged)&&It({...Ae,gender:fe}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&o.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[o.jsx(Ya,{className:"w-3 h-3"}),"        "]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx("input",{type:"text",value:Ae.phone,onChange:fe=>It({...Ae,phone:fe.target.value}),className:zn})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:Ae.address,onChange:fe=>It({...Ae,address:fe.target.value}),className:zn})]}),o.jsx("div",{className:"md:col-span-2 mt-2",children:o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(ri,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),o.jsx("input",{type:"text",value:Ae.school,onChange:fe=>It({...Ae,school:fe.target.value}),className:zn})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),o.jsx(C1,{options:kr,value:Ae.grade,onChange:fe=>It({...Ae,grade:fe}),placeholder:" "})]}),Ae.grade==="university"&&o.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[o.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),o.jsx("input",{type:"text",value:Ae.universityName||Ae.school,onChange:fe=>It({...Ae,universityName:fe.target.value}),placeholder:"   ...",className:`${zn} border-blue-500 bg-blue-900/10`})]})]}),o.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[l&&o.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[o.jsx(es,{className:"w-4 h-4"})," ",l]}),o.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})]})]})]})]}),je.length>0&&o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 overflow-hidden",children:[o.jsx("div",{className:"p-8 bg-gray-800/50 border-b border-gray-700",children:o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(xl,{className:"w-6 h-6 text-blue-400"}),"  "]})}),o.jsx("div",{className:"p-8 space-y-6",children:o.jsx("div",{className:"space-y-3",children:je.map((fe,He)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-4 rounded-xl border border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${fe.score>=75?"bg-emerald-900/30 text-emerald-400":"bg-yellow-900/30 text-yellow-400"}`,children:[fe.score,"%"]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-white text-sm",children:fe.subject}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(fe.date).toLocaleDateString("ar-EG")})]})]}),o.jsx("div",{className:"text-xs text-gray-400 font-medium",children:fe.grade})]},He))})})]})]}),o.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[o.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),o.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),o.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:o.jsx(C.icon,{className:"w-8 h-8 text-white"})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",W]}),o.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[o.jsx(gh,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",K,"   (XP)"]})]})]})}),o.jsxs("div",{className:"relative mb-8",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[o.jsx("span",{children:C.title}),o.jsxs("span",{children:["  ",W+1]})]}),o.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:o.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${xs}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),o.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[o.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[o.jsx(Sl,{className:"w-4 h-4 text-yellow-300"}),"  "]}),o.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:C.title}),o.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[o.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:o.jsx(GC,{className:"w-5 h-5 text-yellow-400"})})," "]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:DP.map((fe,He)=>{const nt=fe.condition(I);return o.jsxs("div",{className:`relative p-3 rounded-xl border flex flex-col items-center text-center transition-all ${nt?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md":"bg-gray-800/50 border-gray-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-2 ${nt?fe.bg:"bg-gray-700"}`,children:o.jsx(fe.icon,{className:`w-6 h-6 ${nt?fe.color:"text-gray-400"}`})}),o.jsx("h4",{className:"font-bold text-xs text-gray-200 mb-1",children:fe.title}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-tight",children:fe.desc}),!nt&&o.jsx("div",{className:"absolute inset-0 bg-gray-900/50 backdrop-blur-[1px] rounded-xl flex items-center justify-center",children:o.jsx(Ya,{className:"w-4 h-4 text-gray-400"})})]},He)})})]}),o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(DI,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),ee?o.jsx("div",{className:"h-48 flex items-center justify-center",children:o.jsx(Ht,{className:"w-6 h-6 animate-spin text-emerald-500"})}):o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:o.jsx(cl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[Pt,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:o.jsx(cE,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsxs("div",{className:"font-black text-lg text-red-400",children:[ys,"%"]})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:o.jsx(pC,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),o.jsx("div",{className:"font-black text-lg text-blue-400",children:xi})]})]}),o.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:o.jsx(rI,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),o.jsxs("div",{className:"font-black text-lg text-purple-400",children:[yi,"%"]})]})]})]})})]})]})]})]})},LP=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],Yp=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=G.useState(!1),h=G.useRef(null);G.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(to,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},VP=({onBack:n})=>{const{user:e}=ss(),[t,s]=G.useState("SELECTION"),[a,l]=G.useState(""),[u,h]=G.useState(""),[p,m]=G.useState("All"),[v,_]=G.useState([]),[w,S]=G.useState(!1),[M,B]=G.useState(null),[F,ee]=G.useState(0),[ne,K]=G.useState({}),[ie,W]=G.useState(1800),[z,C]=G.useState(null),[R,I]=G.useState(!1),[P,j]=G.useState(0),[V,D]=G.useState(0),[Ge,$e]=G.useState(""),[Z,pe]=G.useState(!1),[de,Pe]=G.useState(!1),[Re,O]=G.useState({}),[Q,U]=G.useState(!1),[te,he]=G.useState(null),[Ne,je]=G.useState(!1),[at,Ae]=G.useState(!1),[It,Ve]=G.useState(!1),[bt,et]=G.useState(0),[Zt,rs]=G.useState(!1),[pn,er]=G.useState(null);G.useEffect(()=>{window.scrollTo(0,0)},[t]),G.useEffect(()=>{u?Rr():_([])},[u]),G.useEffect(()=>{let me;return t==="ACTIVE"&&ie>0&&(me=setInterval(()=>{W(_e=>_e<=1?(zn(),0):_e-1)},1e3)),()=>clearInterval(me)},[t,ie]),G.useEffect(()=>{let me;return t==="ACTIVE"&&(M!=null&&M.questionDuration)&&z!==null&&(z>0?me=setInterval(()=>{C(_e=>_e!==null&&_e>0?_e-1:0)},1e3):z===0&&xs()),()=>clearInterval(me)},[t,M,z]),G.useEffect(()=>{M!=null&&M.questionDuration?C(M.questionDuration):C(null)},[F,M]),G.useEffect(()=>{if(t!=="ACTIVE")return;const me=()=>{et(Ue=>{const rt=Ue+1;return rt===1?Ae(!0):rt>=2&&(Ae(!1),Ve(!0)),rt})},_e=()=>{document.hidden&&me()},Se=Ue=>{(Ue.key==="PrintScreen"||Ue.ctrlKey&&Ue.key==="p"||Ue.metaKey&&Ue.shiftKey)&&(Ue.preventDefault(),me())},xe=Ue=>Ue.preventDefault();return document.addEventListener("visibilitychange",_e),document.addEventListener("keydown",Se),document.addEventListener("contextmenu",xe),document.addEventListener("copy",xe),document.addEventListener("paste",xe),document.addEventListener("cut",xe),document.addEventListener("selectstart",xe),()=>{document.removeEventListener("visibilitychange",_e),document.removeEventListener("keydown",Se),document.removeEventListener("contextmenu",xe),document.removeEventListener("copy",xe),document.removeEventListener("paste",xe),document.removeEventListener("cut",xe),document.removeEventListener("selectstart",xe)}},[t]);const Rr=async()=>{S(!0);try{const me=Vn(qt(it,"quizzes"),Ks("grade","==",u)),_e=await Bn(me),Se=[];_e.forEach(xe=>{Se.push({id:xe.id,...xe.data()})}),_(Se)}catch(me){console.error("Error fetching quizzes:",me)}finally{S(!1)}},pt=Array.from(new Set(v.map(me=>me.subject))),Pt=v.filter(me=>{const _e=a?me.subject===a:!0,Se=p&&p!=="All"?me.category===p:!0;return _e&&Se}),ys=me=>{he(me),U(!0)},yi=me=>{if(!me.questions||me.questions.length===0){alert("      ");return}const Se=[...me.questions].sort(()=>Math.random()-.5).map(St=>{if(St.type==="MCQ"||St.type==="TF"){const dt=St.options.map((yn,_a)=>({opt:yn,originalIndex:_a}));dt.sort(()=>Math.random()-.5);const ht=dt.map(yn=>yn.opt),Ot=dt.findIndex(yn=>yn.originalIndex===St.correctAnswer);return{...St,options:ht,correctAnswer:Ot}}return St}),xe={...me,questions:Se},Ue={};Se.forEach((St,dt)=>{if(St.type==="REORDER"){const ht=St.options.map((Ot,yn)=>yn);for(let Ot=ht.length-1;Ot>0;Ot--){const yn=Math.floor(Math.random()*(Ot+1));[ht[Ot],ht[yn]]=[ht[yn],ht[Ot]]}Ue[dt]=ht}}),O(Ue),B(xe),ee(0),K({});const rt=me.duration?me.duration*60:1800;W(rt),j(0),et(0),Ve(!1),D(0),$e(""),Pe(!1),U(!1),he(null),s("ACTIVE")},xi=()=>{te&&yi(te)},Ft=me=>{K(_e=>({..._e,[F]:me}))},xs=()=>{M&&(C(null),F<M.questions.length-1?ee(me=>me+1):zn())},zn=async()=>{if(!M||!e){s("RESULT");return}I(!0);const me=is(),_e=Math.round(me/M.questions.length*100);let Se=0;try{const xe=Vn(qt(it,"quiz_results"),Ks("userId","==",e.uid),Ks("quizId","==",M.id));(await Bn(xe)).empty?Se=me*30:Se=me*1}catch(xe){console.error("Error checking previous attempts:",xe),Se=me*1}j(Se);try{await oo(qt(it,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:M.id||"unknown",quizTitle:M.title,subject:M.subject,score:me,totalQuestions:M.questions.length,percentage:_e,passed:_e>=50,earnedXP:Se,createdAt:si()});const xe=Xs(it,"users",e.uid);await H0(xe,{totalXP:kg(Se),quizzesCompleted:kg(1),lastQuizDate:si(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(xe){console.error("Error saving quiz result:",xe)}finally{I(!1),s("RESULT")}},kr=me=>{const _e=Math.floor(me/60),Se=me%60;return`${_e}:${Se<10?"0":""}${Se}`},is=()=>{if(!M)return 0;let me=0;return M.questions.forEach((_e,Se)=>{if(_e.type==="REORDER"){const xe=ne[Se];if(xe&&xe.length===_e.options.length){let Ue=!0;for(let rt=0;rt<_e.options.length;rt++)if(xe[rt]!==rt){Ue=!1;break}Ue&&me++}}else ne[Se]===_e.correctAnswer&&me++}),me},fe=()=>{je(!0)},He=()=>{je(!1),s("SELECTION")},nt=()=>{Ve(!1),s("SELECTION")},en=async()=>{if(!M||!e||V===0){V===0&&alert("   ");return}pe(!0);try{await oo(qt(it,"feedback"),{userId:e.uid,userName:e.displayName,targetId:M.id||"unknown",targetTitle:M.title,targetType:"quiz",rating:V,comment:Ge,teacherId:M.createdBy,createdAt:si()}),Pe(!0)}catch(me){console.error("Error saving feedback:",me),alert("    ")}finally{pe(!1)}},jt=me=>{er(me),rs(!0)},Nt=()=>{if(rs(!1),pn==="REVIEW")s("REVIEW");else if(pn==="RETAKE"){const me=v.find(_e=>_e.id===(M==null?void 0:M.id));me?yi(me):s("SELECTION")}else pn==="LIST"?s("SELECTION"):pn==="HOME"&&n();er(null)},Yt=(me,_e)=>{const Se=ne[F]||[];Ft(_e?[...Se,me]:Se.filter(xe=>xe!==me))},ut=({title:me,message:_e,onConfirm:Se,onCancel:xe,icon:Ue=Zr,confirmText:rt="",cancelText:St="",confirmColor:dt="emerald"})=>o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:xe}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${dt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:o.jsx(Ue,{className:`w-10 h-10 ${dt==="red"?"text-red-500":"text-emerald-500"}`})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:me}),o.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:_e}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:Se,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${dt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:rt}),o.jsx("button",{onClick:xe,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:St})]})]})]}),vi=()=>{const me=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(xe=>({label:` ${xe}`,value:xe.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],_e=[{label:"  ",value:""},...pt.map(xe=>({label:String(xe),value:String(xe)}))],Se=LP.map(xe=>({label:xe.label,value:xe.id}));return o.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[o.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(ri,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),o.jsx(Yp,{options:me,value:u,onChange:xe=>{h(xe),l(""),m("All")},placeholder:"--    --"})]}),o.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(On,{className:"w-5 h-5 text-emerald-400"})})," "]}),o.jsx(Yp,{options:_e,value:a,onChange:l,placeholder:u?" ":"   ",disabled:!u})]})]}),u&&o.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:o.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[o.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[o.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:o.jsx(mE,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),o.jsx(Yp,{options:Se,value:p,onChange:m,placeholder:"  "})]})}),u&&o.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[o.jsx(Ob,{className:"w-5 h-5"})," "]}),w?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(Ht,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ua,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Pt.length===0?o.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ua,{className:"w-8 h-8 text-gray-500"})}),o.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pt.map(xe=>o.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:xe.subject}),xe.category&&o.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:xe.category==="General"?"General Quiz":xe.category})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsxs("span",{className:"text-gray-500 text-xs",children:[xe.questions.length," "]}),o.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:xe.duration?`${xe.duration} `:"30 "})]})]}),o.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:xe.title}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[o.jsx(xh,{className:"w-3 h-3"}),o.jsx("span",{children:xe.grade==="English Major - QOU"?"  ":` ${xe.grade}`})]}),o.jsxs("button",{onClick:()=>ys(xe),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",o.jsx(hh,{className:"w-4 h-4"})]})]},xe.id))})]}),Q&&o.jsx(ut,{title:"  ",message:`   ${te==null?void 0:te.title} `,onConfirm:xi,onCancel:()=>U(!1),confirmText:" ",cancelText:"",icon:Zr})]})},hn=()=>{if(!M||!M.questions||!M.questions[F])return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[o.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),o.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const me=M.questions[F],_e=me.type==="REORDER";let Se=!1;if(_e){const ht=ne[F];Se=ht!==void 0&&ht.length===me.options.length}else Se=ne[F]!==void 0;const xe=F===M.questions.length-1,Ue=M.subject.toLowerCase().includes("english")||M.subject.includes("")||M.subject.includes(""),rt=Ue?"ltr":"rtl",St=Ue?"text-left":"text-right",dt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[me.passageFontSize||"md"];return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:ht=>ht.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[It&&o.jsx(ut,{title:"   ",message:"      .   .",onConfirm:nt,onCancel:()=>{},confirmText:"",cancelText:"",icon:ng,confirmColor:"red"}),at&&!It&&o.jsx(ut,{title:" !",message:"     .   .",onConfirm:()=>Ae(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:ig,confirmColor:"red"}),Ne&&o.jsx(ut,{title:" ",message:"       .",onConfirm:He,onCancel:()=>je(!1),confirmText:" ",cancelText:"",icon:su,confirmColor:"red"}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:fe,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(su,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${ie<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[o.jsx(Hh,{className:"w-4 h-4"}),kr(ie)]})}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[F+1," / ",M.questions.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(F+1)/M.questions.length*100}%`}})})]}),z!==null&&M.questionDuration&&o.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4",children:[o.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-1000 linear ${z<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${z/M.questionDuration*100}%`}})}),o.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",z," "]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:rt,children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:M.title}),o.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:_e?o.jsx(uE,{className:"w-4 h-4 text-emerald-500"}):o.jsx(Ya,{className:"w-4 h-4 text-gray-300"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[me.passageContent&&o.jsxs("div",{className:"mb-8",children:[me.generalInstruction&&o.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${St}`,children:me.generalInstruction}),o.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${St}`,children:o.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${dt}`,children:me.passageContent})})]}),o.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${St}`,children:me.question}),_e?o.jsxs("div",{className:"space-y-6",dir:"ltr",children:[o.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(ne[F]||[]).map((ht,Ot)=>o.jsx("button",{onClick:()=>Yt(ht,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:me.options[ht]},`ans-${Ot}`)),(!ne[F]||ne[F].length===0)&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),o.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(Re[F]||[]).filter(ht=>!(ne[F]||[]).includes(ht)).map((ht,Ot)=>o.jsx("button",{onClick:()=>Yt(ht,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:me.options[ht]},`bank-${Ot}`))}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:()=>Ft([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[o.jsx(hE,{className:"w-3 h-3"})," "]})})]}):o.jsx("div",{className:"space-y-3",children:me.options.map((ht,Ot)=>o.jsxs("button",{onClick:()=>Ft(Ot),className:`w-full ${St} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${ne[F]===Ot?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[o.jsx("span",{className:`text-base font-bold ${ne[F]===Ot?"text-emerald-300":"text-gray-300"}`,children:ht}),o.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${ne[F]===Ot?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:ne[F]===Ot&&o.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Ot))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end",children:o.jsx("button",{onClick:xs,disabled:!Se||R,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Se||R?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:R?o.jsxs(o.Fragment,{children:["  ",o.jsx(Ht,{className:"w-5 h-5 animate-spin"})]}):o.jsxs(o.Fragment,{children:[xe?" ":" ",rt==="rtl"?o.jsx(hh,{className:"w-5 h-5"}):o.jsx(Ut,{className:"w-5 h-5"})]})})})]})]})},kn=()=>{if(!M)return null;const me=is(),_e=M.questions.length,Se=Math.round(me/_e*100);let xe="text-red-500",Ue="from-red-500 to-pink-600",rt=aC;Se>=90?(xe="text-emerald-500",Ue="from-emerald-400 to-teal-600",rt=Sl):Se>=75?(xe="text-blue-500",Ue="from-blue-400 to-indigo-600",rt=eo):Se>=50&&(xe="text-yellow-500",Ue="from-yellow-400 to-orange-500",rt=la);const St=rt;return o.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in pb-20",children:[o.jsxs("div",{className:"w-full max-w-md bg-gray-900 rounded-[2.5rem] shadow-2xl overflow-hidden relative border border-gray-700 mb-6",children:[o.jsxs("div",{className:`relative pt-12 pb-16 px-6 text-center bg-gradient-to-br ${Ue}`,children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-24 h-24 mx-auto bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-4 shadow-lg ring-4 ring-white/10",children:o.jsx(St,{className:"w-12 h-12 text-white"})}),o.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:Se>=90?"!":Se>=50?"!":" "}),o.jsx("p",{className:"text-white/90 font-medium text-sm mb-6",children:M.title}),o.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-6 py-2 rounded-full border border-white/20 shadow-lg",children:[o.jsx(gh,{className:"w-5 h-5 text-yellow-300 fill-yellow-300 animate-pulse"}),o.jsxs("span",{className:"font-black text-white text-lg",children:["+",P," XP"]})]})]}),o.jsx("div",{className:"absolute -bottom-1 left-0 w-full overflow-hidden leading-[0]",children:o.jsx("svg",{className:"relative block w-[calc(100%+1.3px)] h-[50px]","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:o.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z",className:"fill-gray-900"})})})]}),o.jsxs("div",{className:"px-6 pb-8 -mt-6 relative z-10",children:[o.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-lg border border-gray-700 p-6 text-center mb-6 transform -translate-y-4",children:[o.jsx("div",{className:"text-sm text-gray-400 font-bold uppercase tracking-wider mb-2",children:" "}),o.jsx("div",{className:"flex justify-center items-baseline gap-1",children:o.jsxs("span",{className:`text-6xl font-black ${xe}`,children:[Se,"%"]})}),o.jsxs("div",{className:"text-gray-400 font-medium mt-1 text-sm",children:[me,"     ",_e]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-2xl border border-emerald-800 text-center",children:[o.jsx("div",{className:"text-emerald-400 font-black text-2xl mb-1",children:me}),o.jsx("div",{className:"text-xs text-gray-400 font-bold",children:" "})]}),o.jsxs("div",{className:"bg-red-900/20 p-4 rounded-2xl border border-red-800 text-center",children:[o.jsx("div",{className:"text-red-400 font-black text-2xl mb-1",children:_e-me}),o.jsx("div",{className:"text-xs text-gray-400 font-bold",children:" "})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>jt("REVIEW"),className:"w-full py-4 bg-white text-gray-900 font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95",children:[o.jsx(Xp,{className:"w-5 h-5"}),"  "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>jt("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-sm",children:[o.jsx(dE,{className:"w-4 h-4"}),"  "]}),o.jsxs("button",{onClick:()=>jt("LIST"),className:"py-3 bg-gray-800 text-white font-bold rounded-2xl hover:bg-gray-700 transition-colors flex items-center justify-center gap-2 text-sm border border-gray-700",children:[o.jsx(Ob,{className:"w-4 h-4"})," "]})]}),o.jsxs("button",{onClick:()=>jt("HOME"),className:"w-full py-3 text-gray-400 hover:text-gray-200 font-bold text-sm transition-colors flex items-center justify-center gap-2",children:[o.jsx(yh,{className:"w-4 h-4"}),"  "]})]})]})]}),o.jsx("div",{className:"w-full max-w-md bg-gray-900 rounded-[2.5rem] shadow-lg border border-gray-700 p-6 animate-fade-in-up delay-100",children:de?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-3 border border-green-500/30",children:o.jsx(la,{className:"w-8 h-8 text-green-500"})}),o.jsx("h3",{className:"text-lg font-bold text-white",children:" !"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"    ."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-2 justify-center",children:[o.jsx(ll,{className:"w-5 h-5 text-blue-400"}),"    "]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:"   10 ()  1 ()"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-1.5",dir:"ltr",children:[1,2,3,4,5,6,7,8,9,10].map(dt=>o.jsx("button",{onClick:()=>D(dt),className:`w-8 h-8 rounded-lg font-bold text-sm transition-all ${V===dt?"bg-blue-600 text-white scale-110 shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:dt},dt))})]}),o.jsx("textarea",{value:Ge,onChange:dt=>$e(dt.target.value),placeholder:"     ()...",className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-xl text-white text-sm outline-none focus:border-blue-500 transition-all mb-4 resize-none h-20"}),o.jsx("button",{onClick:en,disabled:Z||V===0,className:`w-full py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${V===0||Z?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg"}`,children:Z?o.jsx(Ht,{className:"w-4 h-4 animate-spin"}):" "})]})})]})},gn=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Xp,{className:"w-5 h-5 text-emerald-400"})," "]}),o.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[o.jsx(Ut,{className:"w-4 h-4"})," "]})]}),o.jsx("div",{className:"space-y-6",children:M==null?void 0:M.questions.map((me,_e)=>{const Se=me.type==="REORDER";let xe=!1,Ue=null;if(Se){const rt=ne[_e];rt?(Ue=rt.map(St=>me.options[St]).join(" "),xe=rt.length===me.options.length&&rt.every((St,dt)=>St===dt)):(Ue="  ",xe=!1)}else{const rt=ne[_e];xe=rt===me.correctAnswer,Ue=rt!==void 0?me.options[rt]:"  "}return o.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${xe?"border-gray-700":"border-red-900/50"}`,children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${xe?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:_e+1}),o.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:me.question})]}),o.jsxs("div",{className:`p-3 rounded-xl border text-sm ${xe?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),o.jsx("span",{className:"font-bold",children:Ue})]}),!xe&&o.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[o.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),o.jsx("span",{className:"font-bold text-emerald-400",children:Se?me.options.join(" "):me.options[me.correctAnswer]})]}),me.explanation&&o.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[o.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[o.jsx(Zr,{className:"w-3 h-3"}),":"]}),o.jsx("p",{className:"leading-relaxed opacity-90",children:me.explanation})]})]},me.id)})})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),vi()]}),t==="ACTIVE"&&hn(),t==="RESULT"&&kn(),t==="REVIEW"&&gn(),Zt&&o.jsx(ut,{title:"  ",message:pn==="REVIEW"?"   ":pn==="RETAKE"?"     ":pn==="LIST"?"    ":"    ",onConfirm:Nt,onCancel:()=>rs(!1),confirmText:"",cancelText:"",icon:WC})]})},UP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),OP=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),qP=({onBack:n})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"#",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),o.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:o.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),o.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(lE,{className:"w-4 h-4"}),t.school]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tg,{className:"w-4 h-4"}),t.location]})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[o.jsx(ei,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),o.jsx("h3",{className:"font-bold text-white",children:" "})]}),o.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[o.jsx(eo,{className:`w-5 h-5 text-${t.color}-400`})," "]}),o.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((a,l)=>o.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:a},l))})]})]}),o.jsx("div",{className:"pt-6 border-t border-white/5",children:o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:o.jsx(Wp,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:o.jsx(UP,{className:"w-5 h-5"})}),o.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:o.jsx(OP,{className:"w-5 h-5"})})]})})]},s))})]})]})},zP=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[o.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",o.jsx("br",{}),"   "]}),o.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:o.jsx(Xp,{className:"w-8 h-8 text-blue-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:o.jsx(Kg,{className:"w-8 h-8 text-emerald-400"})}),o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),o.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),o.jsxs("div",{className:"mb-20",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),o.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:xI,title:" ",desc:"       ."},{icon:NC,title:" ",desc:"           ."},{icon:cE,title:" ",desc:"         ."},{icon:qI,title:" ",desc:"          ."}].map((e,t)=>o.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[o.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:o.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),o.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),FP=({onBack:n})=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:""})]})}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:o.jsxs("div",{className:"bg-gray-900 p-12 rounded-3xl shadow-xl border border-white/5 max-w-md w-full flex flex-col items-center transform hover:scale-105 transition-transform duration-300",children:[o.jsx("div",{className:"w-24 h-24 bg-emerald-900/20 rounded-full flex items-center justify-center mb-6 animate-bounce border border-emerald-500/20",children:o.jsx(Hh,{className:"w-12 h-12 text-emerald-400"})}),o.jsx("h1",{className:"text-4xl font-black text-white mb-3",children:""}),o.jsx("p",{className:"text-gray-400 text-lg font-medium",children:"        "})]})})]}),I1=({options:n,value:e,onChange:t,placeholder:s,disabled:a})=>{const[l,u]=G.useState(!1),h=G.useRef(null);G.useEffect(()=>{const m=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const p=n.find(m=>m.value===e&&!m.isHeader);return o.jsxs("div",{className:`relative ${l?"z-50":"z-0"}`,ref:h,children:[o.jsxs("button",{type:"button",onClick:()=>!a&&u(!l),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${a?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":l?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[o.jsx("span",{className:`truncate ${p?"":"text-gray-500"}`,children:p?p.label:s}),o.jsx(to,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180 text-emerald-500":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[n.map((m,v)=>{if(m.isHeader)return o.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:m.label},v);const _=m.value===e;return o.jsxs("div",{onClick:()=>{t(m.value),u(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${_?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[m.label,_&&o.jsx(la,{className:"w-4 h-4"})]},v)}),n.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},GP=({onBack:n})=>{const[e,t]=G.useState(""),[s,a]=G.useState(""),[l,u]=G.useState("SELECTION"),[h,p]=G.useState(["handouts"]),[m,v]=G.useState([]),[_,w]=G.useState(!1);G.useEffect(()=>{l==="CONTENT"&&s&&e&&S()},[l,s,e]);const S=async()=>{w(!0);try{const W=Vn(qt(it,"study_materials"),Ks("grade","==",s),Ks("subject","==",e)),z=await Bn(W),C=[];z.forEach(R=>{C.push({id:R.id,...R.data()})}),C.sort((R,I)=>{var V,D;const P=((V=R.createdAt)==null?void 0:V.seconds)||0;return(((D=I.createdAt)==null?void 0:D.seconds)||0)-P}),v(C)}catch(W){console.error("Error fetching materials:",W)}finally{w(!1)}},M=()=>{e&&s&&u("CONTENT")},B=W=>{p(z=>z.includes(W)?z.filter(C=>C!==W):[...z,W])},F=()=>{const W=m.filter(R=>R.category==="handouts"),z=m.filter(R=>R.category==="worksheets"),C=m.filter(R=>R.category==="exams");return[{id:"handouts",title:" ",files:W},{id:"worksheets",title:" ",files:z},{id:"exams",title:" ",files:C}]},ee=W=>W?(W.toDate?W.toDate():new Date(W.seconds*1e3)).toLocaleDateString("ar-EG"):"",ne=F(),K=()=>{const W=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(C=>({label:` ${C}`,value:C.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],z=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return o.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),o.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),o.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),o.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:o.jsx(zc,{className:"w-10 h-10 text-white drop-shadow-md"})}),o.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),o.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[o.jsxs("div",{className:"group relative z-20",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:o.jsx(On,{className:"w-5 h-5 text-emerald-400"})})," "]}),o.jsx(I1,{options:z,value:e,onChange:t,placeholder:" "})]}),o.jsxs("div",{className:"group relative z-10",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[o.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:o.jsx(ri,{className:"w-5 h-5 text-teal-400"})})," "]}),o.jsx(I1,{options:W,value:s,onChange:a,placeholder:" "})]})]}),o.jsxs("button",{onClick:M,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[o.jsx(ua,{className:"w-6 h-6"})," "]})]})})]})},ie=()=>o.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[o.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Ar,{className:"w-8 h-8 text-emerald-400"})}),o.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",o.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("button",{onClick:()=>u("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[o.jsx(Ut,{className:"w-5 h-5"})," "]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[o.jsx(zc,{className:"w-3.5 h-3.5"}),ne.reduce((W,z)=>W+z.files.length,0)," "]})]}),_?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Ht,{className:"w-10 h-10 animate-spin text-emerald-400"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):o.jsx("div",{className:"space-y-4",children:ne.map(W=>{const z=h.includes(W.id);return o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("button",{onClick:()=>B(W.id),className:`w-full flex items-center justify-between p-5 transition-colors ${z?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2.5 rounded-xl ${z?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:o.jsx(zc,{className:"w-6 h-6"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-bold text-base text-white block",children:W.title}),o.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[W.files.length," "]})]})]}),o.jsx("div",{className:`transition-transform duration-300 ${z?"rotate-180":""}`,children:o.jsx(to,{className:"w-5 h-5 text-gray-400"})})]}),z&&o.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:W.files.length===0?o.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[o.jsx(zc,{className:"w-10 h-10 mb-2 opacity-20"}),o.jsx("p",{className:"text-sm font-medium",children:"       "})]}):o.jsx("div",{className:"divide-y divide-gray-700/50",children:W.files.map((C,R)=>o.jsxs("div",{onClick:()=>C.url&&window.open(C.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:o.jsx(Ar,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[o.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:C.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[o.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:C.size}),o.jsx("span",{children:""}),o.jsx("span",{children:ee(C.createdAt)})]})]})]}),o.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:o.jsx(Jp,{className:"w-5 h-5"})})]},R))})})]},W.id)})}),o.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[o.jsx(mh,{className:"w-4 h-4 text-emerald-500 shrink-0"}),o.jsx("span",{children:"      PDF  "})]})]});return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),l==="SELECTION"?K():ie()]})},R1=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),k1=({className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",className:n,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),BP=({onBack:n})=>{const e=t=>{let s="";switch(t){case"message":s="       .";break;case"question":s="       ...";break;case"review":s="      .";break;case"inquiry":s="    .";break;default:s="  ."}const a=`https://wa.me/972568401548?text=${encodeURIComponent(s)}`;window.open(a,"_blank")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[o.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[o.jsxs("div",{className:"absolute top-6 left-6 z-30 md:top-10 md:left-10 flex items-center gap-2 md:gap-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[o.jsx(Ut,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[o.jsx("span",{className:"text-gray-300",children:""}),o.jsx("span",{className:"text-gray-500",children:"/"}),o.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),o.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[o.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),o.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),o.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"  .             ."})]})]}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[o.jsxs("button",{onClick:()=>e("message"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-emerald-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center text-emerald-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Hg,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-emerald-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"   "})]})]})]}),o.jsxs("button",{onClick:()=>e("question"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-blue-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-900/20 rounded-2xl flex items-center justify-center text-blue-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(Zr,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-blue-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("review"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-purple-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-pink-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-purple-900/20 rounded-2xl flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(vC,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-purple-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),o.jsxs("button",{onClick:()=>e("inquiry"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-orange-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-amber-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-900/20 rounded-2xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-300",children:o.jsx(xh,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors",children:" "}),o.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-emerald-400 to-teal-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-emerald-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"     ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(R1,{className:"w-5 h-5"}),""]}),o.jsxs("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[o.jsx(k1,{className:"w-5 h-5"}),""]})]})]})]}),o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),o.jsxs("div",{className:"relative shrink-0 mb-6",children:[o.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-blue-400 to-indigo-600 shadow-lg",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:o.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),o.jsxs("div",{className:"z-10",children:[o.jsx("span",{className:"text-blue-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),o.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),o.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"      ."}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[o.jsxs("button",{className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(R1,{className:"w-5 h-5"}),""]}),o.jsxs("button",{className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[o.jsx(k1,{className:"w-5 h-5"}),""]})]})]})]})]})]})]})},M1=[{minLevel:1,title:" ",icon:Gg},{minLevel:5,title:" ",icon:On},{minLevel:10,title:"",icon:ua},{minLevel:15,title:" ",icon:eo},{minLevel:20,title:"",icon:$h},{minLevel:30,title:"",icon:Sl}],HP=({onLoginClick:n})=>{const[e,t]=G.useState([]),[s,a]=G.useState(!0),{user:l}=ss(),[u,h]=G.useState(0),[p,m]=G.useState(null),[v,_]=G.useState(null),[w,S]=G.useState(!1);G.useEffect(()=>{const ie=Vn(qt(it,"users"),Ks("role","==","student")),W=nD(ie,C=>{const R=[];C.forEach(I=>{const P=I.data();R.push({uid:I.id,...P})}),R.sort((I,P)=>(Number(P.totalXP)||0)-(Number(I.totalXP)||0)),t(R.slice(0,10)),a(!1)},C=>{console.error("Error fetching leaderboard:",C),a(!1)});return(async()=>{try{const C=Vn(qt(it,"quizzes")),R=await Bn(C);h(R.size)}catch(C){console.error("Error fetching quizzes count:",C)}})(),()=>W()},[]);const M=async ie=>{m(ie),S(!0),_(null);try{const W=Vn(qt(it,"quiz_results"),Ks("userId","==",ie.uid)),z=await Bn(W);let C=0,R=0;z.forEach(P=>{const j=P.data();j.percentage!==void 0&&(C+=j.percentage,R++)});const I=R>0?Math.round(C/R):0;_({average:I,totalQuizzes:R})}catch(W){console.error("Error fetching student stats",W)}finally{S(!1)}},B=ie=>{switch(ie){case 0:return"bg-gradient-to-b from-yellow-400 to-yellow-600 text-white shadow-lg shadow-yellow-500/30 border border-yellow-300 scale-110";case 1:return"bg-gradient-to-b from-slate-300 to-slate-500 text-white shadow-md border border-slate-300";case 2:return"bg-gradient-to-b from-orange-400 to-orange-600 text-white shadow-md border border-orange-300";case 9:return"bg-gray-800 text-gray-400 border border-gray-700";default:return"bg-gray-700 text-gray-200 border border-gray-600"}},F=ie=>o.jsx("span",{className:"font-black text-sm font-mono",children:ie+1}),ee=ie=>{const W=Math.floor(ie/500)+1,z=[...M1].reverse().find(C=>W>=C.minLevel)||M1[0];return{level:W,rank:z}},ne=e.reduce((ie,W)=>ie+(W.quizzesCompleted||0),0),K=ne*8;return o.jsxs("section",{className:"py-12 md:py-16 relative overflow-hidden",children:[p&&o.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>m(null)}),o.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative shadow-2xl animate-fade-in-up overflow-hidden border border-white/10",children:[o.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white z-20 transition-colors backdrop-blur-sm",children:o.jsx(br,{className:"w-5 h-5"})}),o.jsx("div",{className:"h-32 bg-gray-800 relative"}),o.jsxs("div",{className:"px-8 pb-8 -mt-16 relative z-10 text-center",children:[o.jsx("div",{className:"w-32 h-32 mx-auto rounded-full p-1.5 bg-gray-900 shadow-2xl mb-4 ring-4 ring-gray-800",children:o.jsx("div",{className:"w-full h-full rounded-full overflow-hidden border-4 border-gray-700 bg-gray-800",children:p.avatar?o.jsx("img",{src:p.avatar,alt:p.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx(Ln,{className:"w-12 h-12 text-gray-500"})})})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:p.displayName}),o.jsxs("p",{className:"text-gray-400 font-medium text-sm flex items-center justify-center gap-1 mb-6",children:[o.jsx(xh,{className:"w-4 h-4"}),p.school||" "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[o.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[aE.createElement(ee(p.totalXP||0).rank.icon,{className:"w-5 h-5 text-indigo-400"}),o.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase",children:""})]}),o.jsx("div",{className:"font-black text-white text-sm",children:ee(p.totalXP||0).rank.title}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[" ",ee(p.totalXP||0).level]})]}),o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-white/5",children:w?o.jsx("div",{className:"flex justify-center py-2",children:o.jsx(Ht,{className:"w-5 h-5 animate-spin text-emerald-500"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(ei,{className:"w-5 h-5 text-emerald-400 fill-emerald-400"}),o.jsx("span",{className:"text-xs font-bold text-emerald-400 uppercase",children:" "})]}),o.jsxs("div",{className:"font-black text-white text-xl",children:[(v==null?void 0:v.average)||0,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[(v==null?void 0:v.totalQuizzes)||0," "]})]})})]}),o.jsxs("div",{className:"bg-gray-800/30 border border-white/10 border-dashed rounded-xl p-5 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gray-800 text-yellow-500 px-3 py-1 rounded-full text-[10px] font-bold shadow-sm flex items-center gap-1 border border-white/10 z-10",children:[o.jsx(eo,{className:"w-3 h-3"})," "]}),o.jsxs("p",{className:"text-sm text-gray-300 leading-relaxed font-medium mt-2 mb-6 relative z-10",children:["     / ",o.jsx("span",{className:"font-bold text-white underline decoration-yellow-600",children:p.displayName}),"      /   ."]}),o.jsxs("div",{className:"flex justify-around items-end pt-4 border-t border-white/10 relative z-10",children:[o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-2xl text-emerald-500/80 absolute -bottom-3 left-1/2 -translate-x-1/2 -rotate-6 whitespace-nowrap pointer-events-none opacity-90",children:"Yazan. A.K"})]}),o.jsxs("div",{className:"text-center relative group pb-2",children:[o.jsx("div",{className:"text-[10px] text-gray-500 mb-1 font-medium",children:" "}),o.jsx("div",{className:"font-serif font-bold text-white text-sm italic mb-2",children:".   "}),o.jsx("div",{className:"font-['Great_Vibes'] text-5xl text-blue-600/80 absolute -bottom-6 left-1/2 -translate-x-1/2 -rotate-12 whitespace-nowrap pointer-events-none scale-110",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"Majd. H"})]})]})]})]})]})]}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-24 relative z-10",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 backdrop-blur-md rounded-3xl shadow-lg border border-white/10 mb-5 transform -rotate-3 hover:rotate-0 transition-transform duration-300",children:o.jsx(cl,{className:"w-8 h-8 text-indigo-400"})}),o.jsx("h2",{className:"text-4xl font-black text-white mb-3 tracking-tight drop-shadow-lg",children:" "}),o.jsx("p",{className:"text-gray-400 text-base font-medium max-w-md mx-auto",children:"        "})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-[2.5rem] border border-white/10 shadow-2xl p-4 md:p-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2/3 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50 blur-sm"}),s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-900 rounded-full blur-xl opacity-50 animate-pulse"}),o.jsx(Ht,{className:"w-12 h-12 animate-spin text-indigo-400 relative z-10"})]}),o.jsx("p",{className:"text-gray-400 font-bold mt-6 text-sm animate-pulse",children:"  ..."})]}):e.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-xl",children:o.jsx(eo,{className:"w-10 h-10 text-gray-500"})}),o.jsx("h3",{className:"text-2xl font-black text-gray-300 mb-3",children:"  "}),o.jsx("p",{className:"text-gray-500 font-medium mb-8 text-sm",children:"       !"}),!l&&o.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transform hover:-translate-y-1",children:[o.jsx(fE,{className:"w-4 h-4"}),"  "]})]}):o.jsx("div",{className:"space-y-3",children:e.map((ie,W)=>o.jsxs("div",{onClick:()=>M(ie),className:`flex items-center p-3 rounded-2xl transition-all duration-300 cursor-pointer group border ${(l==null?void 0:l.uid)===ie.uid?"bg-indigo-900/30 border-indigo-500/50 shadow-[0_0_15px_rgba(99,102,241,0.2)] z-10 relative":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[o.jsx("div",{className:"w-10 flex justify-center shrink-0",children:o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shadow-sm transition-transform group-hover:scale-110 ${B(W)}`,children:F(W)})}),o.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden border-2 shadow-sm shrink-0 mx-3 border-gray-700 group-hover:border-white/30 transition-colors bg-gray-800 relative",children:[ie.avatar?o.jsx("img",{src:ie.avatar,alt:ie.displayName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Ln,{className:"w-5 h-5 text-gray-500"})}),W===0&&o.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-500 drop-shadow-sm",children:o.jsx(Sl,{className:"w-4 h-4 fill-yellow-500"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:`font-bold text-sm md:text-base truncate group-hover:text-indigo-300 transition-colors ${(l==null?void 0:l.uid)===ie.uid?"text-indigo-300":W===0?"text-yellow-200":"text-white"}`,children:ie.displayName}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 mt-0.5",children:[o.jsx(xh,{className:"w-3 h-3 shrink-0"}),o.jsx("span",{className:"truncate max-w-[120px] md:max-w-xs",children:ie.school||" "})]})]}),o.jsx("div",{className:"shrink-0 pl-2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border shrink-0 transition-all ${W===0?"bg-yellow-500/10 border-yellow-500/20":"bg-black/20 border-white/5 group-hover:bg-indigo-900/20"}`,children:[o.jsx("span",{className:`font-black text-xs md:text-sm ${W===0?"text-yellow-200":"text-white"}`,children:ie.totalXP||0}),o.jsx(gh,{className:`w-3 h-3 md:w-3.5 md:h-3.5 ${W===0?"text-yellow-400 fill-yellow-400":W<3?"text-orange-500 fill-orange-500":"text-gray-600"}`})]})})]},ie.uid))})]})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-24 relative z-10",children:o.jsxs("div",{className:"relative overflow-hidden rounded-[3rem] bg-white/[0.02] backdrop-blur-sm shadow-xl border border-white/5 group",children:[o.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-indigo-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-emerald-900 rounded-full blur-[120px] opacity-5 group-hover:opacity-10 transition-opacity duration-1000"}),o.jsx("div",{className:"relative z-10 p-8 md:p-12",children:o.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12",children:[o.jsxs("div",{className:"text-center lg:text-right max-w-lg",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-emerald-400 text-sm font-bold mb-6 backdrop-blur-sm shadow-sm",children:[o.jsx(PA,{className:"w-4 h-4 animate-pulse"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white mb-6 leading-tight",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:""}),"  !"]}),o.jsx("p",{className:"text-gray-400 text-lg leading-relaxed font-medium",children:"              ."})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full lg:w-auto",children:[o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-emerald-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-emerald-400 group-hover/stat:text-emerald-300 transition-colors",children:o.jsx(ca,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:u.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-emerald-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-amber-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-amber-400 group-hover/stat:text-amber-300 transition-colors",children:o.jsx(cl,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:ne.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-amber-300/60 uppercase tracking-wider",children:" "})]}),o.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-3 md:p-6 rounded-2xl md:rounded-3xl text-center hover:bg-white/[0.05] transition-all hover:-translate-y-1 group/stat",children:[o.jsx("div",{className:"inline-flex p-2 md:p-3 bg-rose-500/10 rounded-xl md:rounded-2xl mb-2 md:mb-3 text-rose-400 group-hover/stat:text-rose-300 transition-colors",children:o.jsx(pE,{className:"w-5 h-5 md:w-7 md:h-7"})}),o.jsx("div",{className:"text-lg md:text-3xl font-black text-white mb-1 tracking-tight",children:K.toLocaleString()}),o.jsx("div",{className:"text-[10px] md:text-xs font-bold text-rose-300/60 uppercase tracking-wider",children:" "})]})]})]})})]})})]})},$P=({onBack:n})=>{const[e,t]=G.useState([]),[s,a]=G.useState(!0),[l,u]=G.useState(""),[h,p]=G.useState(null),[m,v]=G.useState(!1);G.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const z=Vn(qt(it,"quizzes"),Ja("createdAt","desc")),R=(await Bn(z)).docs.map(I=>({id:I.id,...I.data()}));t(R)}catch(z){console.error("Error fetching quizzes:",z)}finally{a(!1)}},w=z=>{p({category:"Language",...z})},S=async(z,C)=>{if(z.stopPropagation(),!C){alert(":   ");return}if(window.confirm("  "))try{await tD(Xs(it,"quizzes",C)),t(R=>R.filter(I=>I.id!==C))}catch(R){console.error("Error deleting quiz:",R),alert("   : "+R.message)}},M=(z,C)=>{h&&p({...h,[z]:C})},B=(z,C,R)=>{if(!h)return;const I=[...h.questions];I[z]={...I[z],[C]:R},p({...h,questions:I})},F=(z,C,R)=>{if(!h)return;const I=[...h.questions],P=[...I[z].options];P[C]=R,I[z]={...I[z],options:P},p({...h,questions:I})},ee=z=>{if(h&&window.confirm("      ")){const C=h.questions.filter((R,I)=>I!==z);p({...h,questions:C})}},ne=async()=>{if(!(!h||!h.id)){if(h.questions.length===0){alert("     !");return}v(!0);try{const z=Xs(it,"quizzes",h.id);await bf(z,{title:h.title,subject:h.subject,grade:h.grade,category:h.category,questions:h.questions}),t(C=>C.map(R=>R.id===h.id?h:R)),p(null),alert("   ")}catch(z){console.error("Error updating quiz:",z),alert("   ")}finally{v(!1)}}},K=e.filter(z=>z.title.toLowerCase().includes(l.toLowerCase())||z.teacherName&&z.teacherName.toLowerCase().includes(l.toLowerCase())),ie=z=>z?(z.toDate?z.toDate():new Date(z.seconds*1e3)).toLocaleDateString("ar-EG"):"",W="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return o.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[o.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),o.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[o.jsx("button",{onClick:n,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]}),o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),o.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),o.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[o.jsx(ua,{className:"w-5 h-5 text-gray-300 mr-2"}),o.jsx("input",{type:"text",placeholder:"    ...",value:l,onChange:z=>u(z.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?o.jsx("div",{className:"flex justify-center items-center py-20",children:o.jsx(Ht,{className:"w-10 h-10 animate-spin text-blue-400"})}):K.length===0?o.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ca,{className:"w-8 h-8 text-gray-500"})}),o.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),o.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(z=>o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[o.jsxs("div",{className:"p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:z.subject}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>w(z),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:o.jsx(sg,{className:"w-4 h-4"})}),o.jsx("button",{onClick:C=>S(C,z.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:o.jsx(rg,{className:"w-4 h-4"})})]})]}),o.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:z.title}),z.category&&o.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:z.category}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[o.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",z.grade]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[o.jsx(fh,{className:"w-3 h-3"}),ie(z.createdAt)]})]})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:o.jsx(Ln,{className:"w-4 h-4"})}),o.jsx("p",{className:"text-sm font-bold text-gray-300",children:z.teacherName||""})]}),o.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[o.jsx(Zr,{className:"w-3 h-3"}),z.questions.length," "]})]})]},z.id))})}),h&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[o.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:o.jsx(sg,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),o.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:o.jsx(br,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(ca,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),o.jsx("input",{type:"text",value:h.title,onChange:z=>M("title",z.target.value),className:W})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("input",{type:"text",value:h.subject,onChange:z=>M("subject",z.target.value),className:W})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),o.jsx("select",{value:h.grade,onChange:z=>M("grade",z.target.value),className:W,children:[5,6,7,8,9,10,11,12].map(z=>o.jsxs("option",{value:z,children:[" ",z]},z))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),o.jsxs("select",{value:h.category||"Language",onChange:z=>M("category",z.target.value),className:W,children:[o.jsx("option",{value:"Language",children:"Language ()"}),o.jsx("option",{value:"Reading",children:"Reading ()"}),o.jsx("option",{value:"Writing",children:"Writing ()"}),o.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Zr,{className:"w-5 h-5 text-blue-400"})," (",h.questions.length,")"]}),o.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),h.questions.map((z,C)=>o.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[o.jsx("button",{onClick:()=>ee(C),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:o.jsx(rg,{className:"w-5 h-5"})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",C+1]}),o.jsx("input",{type:"text",dir:"ltr",value:z.question,onChange:R=>B(C,"question",R.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:z.options.map((R,I)=>o.jsxs("div",{className:"relative",children:[o.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[o.jsxs("span",{children:[" ",I+1]}),o.jsxs("button",{onClick:()=>B(C,"correctAnswer",I),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${z.correctAnswer===I?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[z.correctAnswer===I?o.jsx(es,{className:"w-3 h-3"}):o.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),z.correctAnswer===I?" ":" "]})]}),o.jsx("input",{type:"text",dir:"ltr",value:R,onChange:P=>F(C,I,P.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${z.correctAnswer===I?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},I))}),o.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[o.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),o.jsx("textarea",{value:z.explanation||"",onChange:R=>B(C,"explanation",R.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},C))]})]}),o.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[o.jsx("button",{onClick:()=>p(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),o.jsxs("button",{onClick:ne,disabled:m,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[m?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"})," "]})]})]})})]})},KP=[{id:"grammar",title:" (Grammar)",icon:ca,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:On,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:Bg,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:$g,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],YP=({onBack:n})=>{const{user:e}=ss(),[t,s]=G.useState("INTRO"),[a,l]=G.useState(""),[u,h]=G.useState(null),[p,m]=G.useState([]),[v,_]=G.useState(!1),[w,S]=G.useState(null),[M,B]=G.useState(0),[F,ee]=G.useState(""),[ne,K]=G.useState(!1),[ie,W]=G.useState(!1);G.useEffect(()=>{window.scrollTo(0,0)},[t]);const z=()=>s("GRADES"),C=de=>{l(de),s("CATEGORIES")},R=de=>{h(de),s("TOPICS")},I=de=>{S(de),B(0),ee(""),W(!1),s("DETAILS")},P=async()=>{if(!w||!e||M===0){M===0&&alert("   ");return}K(!0);try{await oo(qt(it,"feedback"),{userId:e.uid,userName:e.displayName,targetId:w.id||"unknown",targetTitle:w.title,targetType:"explanation",rating:M,comment:F,teacherId:w.teacherId,createdAt:si()}),W(!0)}catch(de){console.error("Error saving feedback:",de),alert("    ")}finally{K(!1)}};G.useEffect(()=>{t==="TOPICS"&&a&&u&&j()},[t,a,u]);const j=async()=>{_(!0);try{const de=Vn(qt(it,"explanations"),Ks("grade","==",a),Ks("category","==",u==null?void 0:u.id)),Pe=await Bn(de),Re=[];Pe.forEach(O=>{Re.push({id:O.id,...O.data()})}),Re.sort((O,Q)=>{var he,Ne;const U=((he=O.createdAt)==null?void 0:he.seconds)||0;return(((Ne=Q.createdAt)==null?void 0:Ne.seconds)||0)-U}),m(Re)}catch(de){console.error("Error fetching explanations:",de)}finally{_(!1)}},V=de=>de?(de.toDate?de.toDate():new Date(de.seconds*1e3)).toLocaleDateString("ar-EG"):"",D=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:o.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[o.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),o.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),o.jsxs("button",{onClick:z,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",o.jsx(Ut,{className:"w-6 h-6"})]})]}),o.jsx("div",{className:"p-6 text-center relative z-10",children:o.jsxs("button",{onClick:n,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[o.jsx(yh,{className:"w-4 h-4"})," "]})})]}),Ge=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(de=>o.jsxs("button",{onClick:()=>C(de.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:o.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:de})}),o.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",de]})]},de)),o.jsxs("button",{onClick:()=>C("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[o.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:o.jsx(ri,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),o.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),$e=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:" "}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:KP.map(de=>o.jsx("button",{onClick:()=>R(de),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${de.color} group-hover:scale-110 transition-transform`,children:o.jsx(de.icon,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-black text-white mb-1",children:de.title}),o.jsx("p",{className:"text-gray-400 text-xs font-medium",children:de.desc})]}),o.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:o.jsx(vr,{className:"w-5 h-5 text-gray-400"})})]})},de.id))})})]}),Z=()=>o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:u==null?void 0:u.title})]})}),o.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:v?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx(Ht,{className:"w-8 h-8 animate-spin text-emerald-400"})}):p.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:o.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),o.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",o.jsx("span",{className:"text-emerald-600 font-bold",children:u==null?void 0:u.title}),"    ."]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[o.jsx(FA,{className:"w-4 h-4"}),"     "]})]})}):o.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map(de=>o.jsxs("button",{onClick:()=>I(de),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:o.jsx(Ar,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:de.title}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(fh,{className:"w-3 h-3"}),V(de.createdAt)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ln,{className:"w-3 h-3"}),de.teacherName]})]})]})]}),o.jsx(vr,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},de.id))})})]}),pe=()=>w?o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:u==null?void 0:u.title}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white truncate",children:w.title})]})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[o.jsxs("div",{className:"p-6 md:p-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:a==="English Major - QOU"?"":` ${a}`}),o.jsx(vr,{className:"w-4 h-4"}),o.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:u==null?void 0:u.title})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",children:w.title}),o.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",children:w.content})]}),o.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ln,{className:"w-4 h-4"}),o.jsxs("span",{children:[": ",o.jsx("span",{className:"font-bold",children:w.teacherName})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fh,{className:"w-4 h-4"}),o.jsx("span",{children:V(w.createdAt)})]})]})]}),e&&o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-gray-700 p-6",children:ie?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-3 border border-green-500/30",children:o.jsx(la,{className:"w-8 h-8 text-green-500"})}),o.jsx("h3",{className:"text-lg font-bold text-white",children:" !"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"    ."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-2 justify-center",children:[o.jsx(ll,{className:"w-5 h-5 text-purple-400"}),"    "]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:"   10 ()  1 ()"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-1.5",dir:"ltr",children:[1,2,3,4,5,6,7,8,9,10].map(de=>o.jsx("button",{onClick:()=>B(de),className:`w-8 h-8 rounded-lg font-bold text-sm transition-all ${M===de?"bg-purple-600 text-white scale-110 shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:de},de))})]}),o.jsx("textarea",{value:F,onChange:de=>ee(de.target.value),placeholder:"    ()...",className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-xl text-white text-sm outline-none focus:border-purple-500 transition-all mb-4 resize-none h-20"}),o.jsx("button",{onClick:P,disabled:ne||M===0,className:`w-full py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${M===0||ne?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white shadow-lg"}`,children:ne?o.jsx(Ht,{className:"w-4 h-4 animate-spin"}):" "})]})})]})]}):null;return o.jsxs(o.Fragment,{children:[t==="INTRO"&&D(),t==="GRADES"&&Ge(),t==="CATEGORIES"&&$e(),t==="TOPICS"&&Z(),t==="DETAILS"&&pe()]})},QP=[{id:"grammar",title:" (Grammar)",icon:ca},{id:"reading",title:" (Reading)",icon:On},{id:"vocabulary",title:" (Vocabulary)",icon:Bg},{id:"writing",title:" (Writing)",icon:$g}],JP=({onBack:n,onNavigate:e})=>{const{user:t}=ss(),[s,a]=G.useState(""),[l,u]=G.useState(""),[h,p]=G.useState(""),[m,v]=G.useState(""),[_,w]=G.useState(!1),[S,M]=G.useState(!1),B=async()=>{if(!s||!l||!h||!m){alert("    ");return}w(!0);try{await oo(qt(it,"explanations"),{grade:s,category:l,subject:"English",title:h,content:m,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:si()}),M(!0),setTimeout(()=>{M(!1),p(""),v("")},2e3)}catch(ee){console.error("Error saving explanation:",ee),alert("   ")}finally{w(!1)}},F=()=>{n?n():e("HOME")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:S?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(es,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),o.jsx("button",{onClick:()=>M(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(ee=>o.jsxs("button",{onClick:()=>a(ee.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${s===ee.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",ee]},ee)),o.jsx("button",{onClick:()=>a("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${s==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   ()"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:QP.map(ee=>o.jsxs("button",{onClick:()=>u(ee.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${l===ee.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${l===ee.id?"bg-purple-800":"bg-gray-700"}`,children:o.jsx(ee.icon,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold",children:ee.title})]},ee.id))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),o.jsx("input",{type:"text",value:h,onChange:ee=>p(ee.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("textarea",{value:m,onChange:ee=>v(ee.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),o.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:o.jsxs("button",{onClick:B,disabled:_,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[_?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})})})]})},XP=[{id:"handouts",title:" ",icon:Ar,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:zc,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:On,color:"text-purple-400",bg:"bg-purple-900/20"}],WP=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],ZP=({onBack:n,onNavigate:e})=>{const{user:t}=ss(),[s,a]=G.useState(""),[l,u]=G.useState(""),[h,p]=G.useState(""),[m,v]=G.useState(""),[_,w]=G.useState(""),[S,M]=G.useState(!1),[B,F]=G.useState(!1),ee=async()=>{if(!s||!l||!h||!m||!_){alert("    ");return}if(!_.startsWith("http")){alert("        http  https");return}M(!0);try{await oo(qt(it,"study_materials"),{grade:s,subject:l,category:h,title:m,url:_,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:si()}),F(!0),setTimeout(()=>{F(!1),v(""),w("")},2e3)}catch(K){console.error("Error saving file:",K),alert("   ")}finally{M(!1)}},ne=()=>{n?n():e("PROFILE")};return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:ne,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:ne,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:"  "})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:o.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:B?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:o.jsx(es,{className:"w-10 h-10 text-green-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),o.jsx("button",{onClick:()=>F(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(ri,{className:"w-4 h-4 text-blue-500"})," "]}),o.jsxs("select",{value:s,onChange:K=>a(K.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(K=>o.jsxs("option",{value:K.toString(),children:[" ",K]},K)),o.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[o.jsx(On,{className:"w-4 h-4 text-blue-500"}),""]}),o.jsxs("select",{value:l,onChange:K=>u(K.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),WP.map(K=>o.jsx("option",{value:K.id,children:K.title},K.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:XP.map(K=>o.jsxs("button",{onClick:()=>p(K.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${h===K.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[o.jsx("div",{className:`p-2 rounded-lg ${K.bg}`,children:o.jsx(K.icon,{className:`w-6 h-6 ${K.color}`})}),o.jsx("span",{className:"font-bold text-sm",children:K.title})]},K.id))})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),o.jsx("input",{type:"text",value:m,onChange:K=>v(K.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[o.jsx(PC,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),o.jsx("input",{type:"url",value:_,onChange:K=>w(K.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),o.jsx("div",{className:"pt-4 flex justify-end",children:o.jsxs("button",{onClick:ee,disabled:S,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[S?o.jsx(Ht,{className:"w-5 h-5 animate-spin"}):o.jsx(sa,{className:"w-5 h-5"}),"  "]})})]})})})]})},ej=({onNavigate:n})=>{const{user:e}=ss(),[t,s]=G.useState([]),[a,l]=G.useState(!0),[u,h]=G.useState("all");G.useEffect(()=>{(async()=>{l(!0);try{let w=Vn(qt(it,"feedback"),Ja("createdAt","desc"));const M=(await Bn(w)).docs.map(B=>({id:B.id,...B.data()}));s(M)}catch(w){console.error("Error fetching feedback:",w)}finally{l(!1)}})()},[e]);const p=t.filter(_=>u==="all"?!0:_.targetType===u),m=_=>_?(_.toDate?_.toDate():new Date(_.seconds*1e3)).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=_=>_>=9?"text-emerald-400":_>=7?"text-blue-400":_>=5?"text-yellow-400":"text-red-400";return o.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[o.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:o.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:()=>n("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:()=>n("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-black text-white mb-2 flex items-center gap-3",children:[o.jsx(ll,{className:"w-8 h-8 text-teal-400"})," "]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"      "})]}),o.jsxs("div",{className:"flex bg-gray-900 p-1.5 rounded-xl border border-gray-700",children:[o.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u==="all"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:""}),o.jsxs("button",{onClick:()=>h("quiz"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="quiz"?"bg-blue-900/30 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(On,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>h("explanation"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="explanation"?"bg-purple-900/30 text-purple-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[o.jsx(no,{className:"w-4 h-4"}),""]})]})]}),a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Ht,{className:"w-10 h-10 animate-spin text-teal-500"})}):p.length===0?o.jsxs("div",{className:"bg-gray-900 p-12 rounded-3xl border border-white/5 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ll,{className:"w-8 h-8 text-gray-600"})}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"    "}),o.jsx("p",{className:"text-gray-500 text-sm",children:"        ."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(_=>o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 p-6 shadow-sm hover:border-gray-600 transition-all",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-gray-400",children:o.jsx(Ln,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:_.userName||""}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[o.jsx(fh,{className:"w-3 h-3"}),m(_.createdAt)]})]})]}),o.jsxs("div",{className:`flex items-center gap-1 font-black text-lg ${v(_.rating)}`,children:[o.jsx("span",{children:_.rating}),o.jsx(ei,{className:"w-4 h-4 fill-current"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[_.targetType==="quiz"?o.jsx(On,{className:"w-3 h-3"}):o.jsx(no,{className:"w-3 h-3"}),_.targetType==="quiz"?":":":"]}),o.jsx("h3",{className:"font-bold text-gray-200 text-sm",children:_.targetTitle})]}),_.comment&&o.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-xl border border-white/5 text-sm text-gray-300 leading-relaxed relative",children:[o.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-700 rounded-full p-1",children:o.jsx(ll,{className:"w-3 h-3 text-gray-400"})}),'"',_.comment,'"']})]},_.id))})]})]})},Qp=[{text:"            .",author:" ",color:"from-emerald-400 to-teal-500",bg:"bg-emerald-500"},{text:"               .",author:"",color:"from-blue-400 to-indigo-500",bg:"bg-blue-500"},{text:"        .",author:" ",color:"from-yellow-400 to-amber-500",bg:"bg-amber-500"},{text:"     .",author:" ",color:"from-rose-400 to-pink-500",bg:"bg-rose-500"},{text:"          .",author:" ",color:"from-purple-400 to-violet-500",bg:"bg-purple-500"},{text:"     .",author:" ",color:"from-cyan-400 to-sky-500",bg:"bg-cyan-500"},{text:"     .",author:" ",color:"from-red-400 to-orange-500",bg:"bg-red-500"},{text:"     .",author:" ",color:"from-orange-400 to-yellow-500",bg:"bg-orange-500"},{text:"     .",author:" ",color:"from-teal-400 to-emerald-500",bg:"bg-teal-500"},{text:"    .",author:" ",color:"from-indigo-400 to-blue-500",bg:"bg-indigo-500"}],tj=()=>{const[n,e]=G.useState(0),[t,s]=G.useState(!0);G.useEffect(()=>{const u=setInterval(()=>{s(!1),setTimeout(()=>{e(h=>(h+1)%Qp.length),s(!0)},500)},1e4);return()=>clearInterval(u)},[]);const a=Qp[n],l=()=>{navigator.clipboard.writeText(`"${a.text}" - ${a.author}`),alert("  !")};return o.jsxs("div",{className:"py-20 bg-gradient-to-b from-slate-900 to-gray-950 relative overflow-hidden border-t border-gray-800",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-10 left-1/4 w-1 h-1 bg-white rounded-full animate-[ping_3s_infinite]"}),o.jsx("div",{className:"absolute bottom-20 right-1/3 w-1.5 h-1.5 bg-yellow-400 rounded-full animate-[ping_5s_infinite]"}),o.jsx("div",{className:"absolute top-1/2 left-10 w-2 h-2 bg-blue-400 rounded-full animate-[bounce_4s_infinite] opacity-20"}),o.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full bg-gradient-to-r ${a.color} blur-[150px] opacity-10 transition-colors duration-1000`})]}),o.jsx("div",{className:"max-w-4xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-[3rem] p-8 md:p-12 text-center relative group hover:bg-white/10 transition-all duration-500 shadow-2xl",children:[o.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:o.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${a.color} flex items-center justify-center shadow-lg transform rotate-3 group-hover:rotate-0 transition-transform`,children:o.jsx(aI,{className:"w-6 h-6 text-white fill-white"})})}),o.jsxs("div",{className:`transition-all duration-500 ease-in-out transform ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[o.jsxs("h2",{className:`text-2xl md:text-4xl font-black leading-relaxed tracking-wide bg-clip-text text-transparent bg-gradient-to-r ${a.color} mb-6 drop-shadow-sm`,children:['"',a.text,'"']}),o.jsxs("p",{className:"text-gray-400 font-bold text-lg flex items-center justify-center gap-2",children:[o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`}),a.author,o.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${a.color} rounded-full`})]})]}),o.jsx("button",{onClick:l,className:"absolute top-6 right-6 p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:" ",children:o.jsx(pI,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center gap-2 mt-10",children:Qp.map((u,h)=>o.jsx("button",{onClick:()=>{s(!1),setTimeout(()=>{e(h),s(!0)},300)},className:`h-1.5 rounded-full transition-all duration-700 ${h===n?`w-8 ${u.bg}`:"w-1.5 bg-gray-700 hover:bg-gray-500"}`},h))})]})})]})},nj=()=>o.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:o.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:o.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),o.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),o.jsx("div",{className:"relative",children:o.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),sj=({onLoginClick:n})=>o.jsxs("section",{className:"py-32 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),o.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[o.jsx(fE,{className:"w-4 h-4"}),o.jsx("span",{children:"  "})]}),o.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",o.jsx("br",{}),o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),o.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),o.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:o.jsxs("button",{onClick:n,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",o.jsx(Ut,{className:"w-6 h-6"})]})})]})]}),rj=()=>o.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),o.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[o.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),o.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),o.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[o.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),o.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),ij=()=>{const[n,e]=G.useState([]),[t,s]=G.useState(!0),[a,l]=G.useState(0);G.useEffect(()=>{(async()=>{try{const w=Vn(qt(it,"quizzes"),Ja("createdAt","desc"),Zd(2)),S=Vn(qt(it,"study_materials"),Ja("createdAt","desc"),Zd(2)),M=Vn(qt(it,"explanations"),Ja("createdAt","desc"),Zd(2)),B=Vn(qt(it,"announcements"),Ja("createdAt","desc"),Zd(2)),[F,ee,ne,K]=await Promise.all([Bn(w),Bn(S),Bn(M),Bn(B)]),ie=[];K.forEach(W=>{const z=W.data();ie.push({id:W.id,type:"general",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),F.forEach(W=>{const z=W.data();ie.push({id:W.id,type:"quiz",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ee.forEach(W=>{const z=W.data();ie.push({id:W.id,type:"file",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ne.forEach(W=>{const z=W.data();ie.push({id:W.id,type:"explanation",title:z.title,teacherName:z.teacherName||"",date:z.createdAt})}),ie.sort((W,z)=>{var I,P;const C=((I=W.date)==null?void 0:I.seconds)||0;return(((P=z.date)==null?void 0:P.seconds)||0)-C}),e(ie.slice(0,10))}catch(w){console.error("Error fetching announcements:",w)}finally{s(!1)}})()},[]),G.useEffect(()=>{if(n.length<=1)return;const _=setInterval(()=>{l(w=>(w+1)%n.length)},4e3);return()=>clearInterval(_)},[n.length]);const u=_=>_?(_.toDate?_.toDate():new Date(_.seconds*1e3)).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit"}):"",h=_=>{switch(_){case"quiz":return o.jsx(On,{className:"w-3 h-3 text-yellow-400"});case"file":return o.jsx(Ar,{className:"w-3 h-3 text-blue-400"});case"explanation":return o.jsx(no,{className:"w-3 h-3 text-purple-400"});case"general":return o.jsx(OA,{className:"w-3 h-3 text-red-400"});default:return o.jsx(Yc,{className:"w-3 h-3 text-emerald-400"})}},p=_=>{switch(_){case"quiz":return"";case"file":return"";case"explanation":return"";case"general":return"";default:return""}};if(t||n.length===0)return null;const m=n[a],v=[...n,...n,...n];return o.jsxs("div",{className:"w-full bg-gray-900 border-t border-b border-emerald-900/30 relative overflow-hidden py-2",dir:"rtl",children:[o.jsxs("div",{className:"md:hidden flex items-center justify-between px-3 h-12",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-emerald-900/20 text-emerald-400 px-2 py-1 rounded-lg text-[10px] font-bold border border-emerald-500/20 shrink-0 ml-2",children:[o.jsx(Yc,{className:"w-3 h-3"}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsxs("div",{className:"flex items-center gap-3 animate-fade-in w-full",children:[o.jsx("div",{className:"shrink-0 pt-1",children:h(m.type)}),o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 justify-center gap-0.5",children:[o.jsx("span",{className:"text-xs font-bold text-gray-200 truncate block w-full",children:m.title}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 w-full",children:[o.jsxs("span",{className:"truncate flex items-center gap-1",children:[o.jsx(Ln,{className:"w-3 h-3"})," ",m.teacherName]}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"whitespace-nowrap font-mono",children:u(m.date)})]})]})]},m.id)})]}),o.jsxs("div",{className:"hidden md:flex items-center relative z-10 h-10",children:[o.jsx("div",{className:"absolute right-0 z-20 h-full flex items-center pr-4 pl-6 bg-gradient-to-l from-gray-900 via-gray-900 to-transparent",children:o.jsxs("div",{className:"flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm",children:[o.jsx(Yc,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]})}),o.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:o.jsx("div",{className:"whitespace-nowrap flex items-center animate-ticker pr-32 will-change-transform",children:v.map((_,w)=>o.jsxs("div",{className:"inline-flex items-center bg-gray-800 border border-gray-700 rounded-full pl-4 pr-2 py-1 gap-3 mx-3 hover:bg-gray-750 transition-colors cursor-default",children:[o.jsxs("div",{className:"bg-gray-700 rounded-full px-2 py-0.5 flex items-center gap-1.5",children:[h(_.type),o.jsx("span",{className:"text-[10px] font-bold text-emerald-400",children:p(_.type)})]}),o.jsx("span",{className:"text-xs text-gray-200 font-bold",children:_.title}),o.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-600 pr-3 mr-1 text-gray-400",children:[o.jsx(Ln,{className:"w-3 h-3"}),o.jsx("span",{className:"text-[10px] font-medium",children:_.teacherName})]}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono border-r border-gray-600 pr-2 mr-1",children:u(_.date)})]},`${_.id}-${w}`))})})]}),o.jsx("style",{children:`
            .animate-ticker {
                animation: ticker 80s linear infinite;
            }
            @keyframes ticker {
                0% { transform: translateX(0); }
                100% { transform: translateX(50%); } 
            }
            .animate-ticker:hover {
                animation-play-state: paused;
            }
        `})]})},h2=()=>{const n=G.useRef(null);return G.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,a=window.innerWidth,l=window.innerHeight;const u=a<768?150:400,h=.1,p=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=a,e.height=l;const m=[];for(let w=0;w<u;w++)m.push({x:Math.random()*a,y:Math.random()*l,z:Math.random()*a,size:Math.random()*2,color:p[Math.floor(Math.random()*p.length)],alpha:Math.random()});const v=()=>{a=window.innerWidth,l=window.innerHeight,e.width=a,e.height=l};window.addEventListener("resize",v);const _=()=>{t.clearRect(0,0,a,l),m.forEach(w=>{Math.random()>.99&&(w.alpha=Math.random()),w.y-=h*(w.size*.5),w.y<0&&(w.y=l,w.x=Math.random()*a),t.beginPath(),t.fillStyle=`rgba(${w.color}, ${w.alpha})`,t.arc(w.x,w.y,w.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),o.jsx("canvas",{ref:n,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},aj=({onBack:n})=>{const e=[{icon:xl,title:" ",desc:"              ."},{icon:bI,title:" 24/7",desc:"                 ."},{icon:$h,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Ar,title:" ",desc:"           ."}];return o.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx(h2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{onClick:n,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),o.jsx("span",{className:"text-gray-600",children:"/"}),o.jsx("span",{className:"font-bold text-white",children:" "})]})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[o.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[o.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),o.jsx(ei,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),o.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),o.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),o.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:o.jsx(Kg,{className:"w-8 h-8 text-blue-400"})})," "]}),o.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[o.jsx("p",{children:'  ""         .                    .'}),o.jsxs("p",{children:["       ",o.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>o.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[o.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:o.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),o.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(es,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(es,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),o.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[o.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:o.jsx(es,{className:"w-6 h-6 text-emerald-400"})}),o.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),o.jsx("div",{className:"mt-16 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",o.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oj,lj;function cj(){return{geminiUrl:oj,vertexUrl:lj}}function uj(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=cj();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi{}function ve(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function dj(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Dg(n,a,l,0,u)}}function Dg(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])Dg(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of h)p[m]=u[m];for(const[m,v]of Object.entries(p)){const _=[];for(const w of t.slice(s))w==="*"?_.push(m):_.push(w);g(u,_,v)}for(const m of h)delete u[m]}}else{const u=n;l in u&&Dg(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hj(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function fj(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],pj(u)),e}function mj(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],gj(u)),e}function pj(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>yj(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function gj(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>xj(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function yj(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],Tj(t)),e}function xj(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Nj(t)),e}function vj(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function bj(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function _j(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],wj(u)),e}function wj(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function f2(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],Ej(u)),e}function Ej(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function Tj(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Z0(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function Nj(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Z0(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var D1;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(D1||(D1={}));var P1;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(P1||(P1={}));var j1;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(j1||(j1={}));var _n;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_n||(_n={}));var L1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(L1||(L1={}));var V1;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(V1||(V1={}));var U1;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(U1||(U1={}));var O1;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(O1||(O1={}));var q1;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(q1||(q1={}));var z1;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(z1||(z1={}));var F1;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(F1||(F1={}));var G1;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(G1||(G1={}));var B1;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(B1||(B1={}));var H1;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(H1||(H1={}));var $1;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})($1||($1={}));var K1;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(K1||(K1={}));var Y1;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Y1||(Y1={}));var Q1;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Q1||(Q1={}));var J1;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(J1||(J1={}));var zh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(zh||(zh={}));var X1;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(X1||(X1={}));var W1;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(W1||(W1={}));var Z1;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Z1||(Z1={}));var Pg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pg||(Pg={}));var ew;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ew||(ew={}));var tw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(tw||(tw={}));var nw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(nw||(nw={}));var sw;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(sw||(sw={}));var rw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rw||(rw={}));var iw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iw||(iw={}));var aw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(aw||(aw={}));var ow;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ow||(ow={}));var lw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(lw||(lw={}));var cw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(cw||(cw={}));var uw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uw||(uw={}));var dw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dw||(dw={}));var hw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hw||(hw={}));var fw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fw||(fw={}));var mw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(mw||(mw={}));var pw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(pw||(pw={}));var gw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(gw||(gw={}));var yw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(yw||(yw={}));var xw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xw||(xw={}));var vw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(vw||(vw={}));var bw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(bw||(bw={}));var _w;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(_w||(_w={}));var ww;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ww||(ww={}));var Ew;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Ew||(Ew={}));var Tw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Tw||(Tw={}));var Nw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nw||(Nw={}));var Sw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Sw||(Sw={}));var Aw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Aw||(Aw={}));var Cw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Cw||(Cw={}));var Iw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Iw||(Iw={}));var ol;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ol||(ol={}));class jg{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class qc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const w of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[S,M]of Object.entries(w))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(M!==null||M!==void 0)&&_.push(S);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;v=!0,m+=w.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[w,S]of Object.entries(_))w!=="inlineData"&&(S!==null||S!==void 0)&&v.push(w);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Rw{}class kw{}class Sj{}class Aj{}class Cj{}class Ij{}class Mw{}class Dw{}class Pw{}class Rj{}class Fh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Fh;let a;const l=e;return t?a=mj(l):a=fj(l),Object.assign(s,a),s}}class jw{}class Lw{}class Vw{}class kj{}class Mj{}class Dj{}class ey{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ey,l=_j(e);return Object.assign(s,l),s}}class Pj{}class jj{}class Lj{}class Uw{}class Vj{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Uj{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ty,l=f2(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function m2(n,e){const t=ct(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function p2(n){return Array.isArray(n)?n.map(e=>Gh(e)):[Gh(n)]}function Gh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function g2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function y2(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ow(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function x2(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Ow(e)):[Ow(n)]}function Lg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function qw(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Un(n){if(n==null)throw new Error("ContentUnion is required");return Lg(n)?n:{role:"user",parts:x2(n)}}function ny(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Un(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Un(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Un(t)):[Un(e)]}function js(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(qw(n)||zw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Un(n)]}const e=[],t=[],s=Lg(n[0]);for(const a of n){const l=Lg(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(qw(a)||zw(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:x2(t)}),e}function Oj(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(_n).includes(t[0].toUpperCase())?t[0].toUpperCase():_n.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(_n).includes(s.toUpperCase())?s.toUpperCase():_n.TYPE_UNSPECIFIED})}}function pl(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Oj(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(_n).includes(h.toUpperCase())?h.toUpperCase():_n.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=pl(h);else if(s.includes(u)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push(pl(m))}e[u]=p}else if(a.includes(u)){const p={};for(const[m,v]of Object.entries(h))p[m]=pl(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function sy(n){return pl(n)}function ry(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function iy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Vl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pl(e.response));return n}function Ul(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function qj(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function gi(n,e){if(typeof e!="string")throw new Error("name must be a string");return qj(n,e,"cachedContents")}function v2(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ba(n){return Z0(n)}function zj(n){return n!=null&&typeof n=="object"&&"name"in n}function Fj(n){return n!=null&&typeof n=="object"&&"video"in n}function Gj(n){return n!=null&&typeof n=="object"&&"uri"in n}function b2(n){var e;let t;if(zj(n)&&(t=n.name),!(Gj(n)&&(t=n.uri,t===void 0))&&!(Fj(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function _2(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function w2(n){for(const e of["models","tunedModels","publisherModels"])if(Bj(n,e))return n[e];return[]}function Bj(n,e){return n!==null&&typeof n=="object"&&e in n}function Hj(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $j(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=Hj(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function E2(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Kj(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function T2(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ol(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function N2(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yj(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>C9(u))),g(e,["inlinedResponses"],l)}const a=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function Qj(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Jj(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uh(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["metadata","state"]);a!=null&&g(e,["state"],N2(a));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=f(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],Yj(T2(m))),e}function Vg(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["state"]);a!=null&&g(e,["state"],N2(a));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const _=f(n,["inputConfig"]);_!=null&&g(e,["src"],Xj(_));const w=f(n,["outputConfig"]);w!=null&&g(e,["dest"],Qj(T2(w)));const S=f(n,["completionStats"]);return S!=null&&g(e,["completionStats"],S),e}function Xj(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=f(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function Wj(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>A9(n,u))),g(t,["requests","requests"],l)}return t}function Zj(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=f(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function e9(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function t9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function n9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function s9(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],r9(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>S)),g(e,["safetyRatings"],w)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function r9(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function S2(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>j9(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function i9(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function a9(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],Jj(Kj(a))),t}function Fw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],Wj(n,E2(n,a)));const l=f(e,["config"]);return l!=null&&i9(l,t),t}function o9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["inputConfig"],Zj(E2(n,a)));const l=f(e,["config"]);return l!=null&&a9(l,t),t}function l9(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function c9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["src"]);a!=null&&g(t,["batch","inputConfig"],g9(n,a));const l=f(e,["config"]);return l!=null&&l9(l,t),t}function u9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function d9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function h9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function f9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function m9(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=ny(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(g(t,["_self"],p9(a,t)),dj(t,{"requests[].*":"requests[].request.*"})),t}function p9(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function g9(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=f(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],m9(n,a)),t}function y9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function x9(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v9(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function b9(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],S2(Un(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const M=f(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],sy(ee));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(s,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let V=K;Array.isArray(V)&&(V=V.map(D=>L9(D))),g(t,["safetySettings"],V)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let V=Ul(ie);Array.isArray(V)&&(V=V.map(D=>U9(Vl(D)))),g(t,["tools"],V)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],V9(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);t!==void 0&&z!=null&&g(t,["cachedContent"],gi(n,z));const C=f(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const R=f(e,["mediaResolution"]);R!=null&&g(s,["mediaResolution"],R);const I=f(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],ry(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],S9(j)),s}function _9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>s9(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function w9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function E9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ol(n,s)),t}function T9(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function N9(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function S9(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function A9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let h=js(a);Array.isArray(h)&&(h=h.map(p=>S2(p))),g(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],b9(n,u,f(t,["request"],{}))),t}function C9(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],_9(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function I9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function R9(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function k9(n){const e={},t=f(n,["config"]);return t!=null&&I9(t,e),e}function M9(n){const e={},t=f(n,["config"]);return t!=null&&R9(t,e),e}function D9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>uh(u))),g(e,["batchJobs"],l)}return e}function P9(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>Vg(u))),g(e,["batchJobs"],l)}return e}function j9(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],y9(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],x9(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],e9(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function L9(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function V9(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],v9(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function U9(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],T9(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],N9(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var di;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(di||(di={}));class po{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O9 extends pi{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new po(di.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Fw(this.apiClient,e),s=t._url,a=ve("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const w=_.systemInstruction;delete _.systemInstruction;const S=_.request;S.systemInstruction=w,_.request=S}m.push(_)}return h.requests=m,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=o9(this.apiClient,e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=Fw(this.apiClient,e);return h=ve("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uh(v))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=c9(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>uh(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=E9(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Vg(v))}else{const m=w9(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uh(v))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=n9(this.apiClient,e);u=ve("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=t9(this.apiClient,e);u=ve("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=M9(e);return h=ve("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=P9(v),w=new Uw;return Object.assign(w,_),w})}else{const m=k9(e);return h=ve("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=D9(v),w=new Uw;return Object.assign(w,_),w})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=d9(this.apiClient,e);return h=ve("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>f9(v))}else{const m=u9(this.apiClient,e);return h=ve("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>h9(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q9(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Gw(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>c8(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function z9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=js(u);Array.isArray(v)&&(v=v.map(_=>Gw(_))),g(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],Gw(Un(h)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>d8(_))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],u8(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function F9(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=js(u);Array.isArray(_)&&(_=_.map(w=>w)),g(e,["contents"],_)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],Un(h));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>h8(w))),g(e,["tools"],_)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function G9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],m2(n,s));const a=f(e,["config"]);return a!=null&&z9(a,t),t}function B9(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],m2(n,s));const a=f(e,["config"]);return a!=null&&F9(a,t),t}function H9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function $9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function K9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Y9(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Q9(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function J9(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X9(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function W9(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function Z9(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function e8(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],gi(n,s)),t}function t8(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function n8(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function s8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function r8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function i8(n){const e={},t=f(n,["config"]);return t!=null&&s8(t,e),e}function a8(n){const e={},t=f(n,["config"]);return t!=null&&r8(t,e),e}function o8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function l8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function c8(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Q9(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],J9(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],q9(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function u8(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],X9(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function d8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],t8(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],n8(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function h8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>W9(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function f8(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function m8(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=f(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function p8(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],gi(n,s));const a=f(e,["config"]);return a!=null&&f8(a,t),t}function g8(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],gi(n,s));const a=f(e,["config"]);return a!=null&&m8(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y8 extends pi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new po(di.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=B9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=G9(this.apiClient,e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=e8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Z9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=$9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Y9(v),w=new Lw;return Object.assign(w,_),w})}else{const m=H9(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=K9(v),w=new Lw;return Object.assign(w,_),w})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=g8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=p8(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=a8(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=l8(v),w=new Vw;return Object.assign(w,_),w})}else{const m=i8(e);return h=ve("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=o8(v),w=new Vw;return Object.assign(w,_),w})}}}function Bw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function gl(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(S){return function(M){return Promise.resolve(M).then(S,_)}}function h(S,M){s[S]&&(a[S]=function(B){return new Promise(function(F,ee){l.push([S,B,F,ee])>1||p(S,B)})},M&&(a[S]=M(a[S])))}function p(S,M){try{m(s[S](M))}catch(B){w(l[0][3],B)}}function m(S){S.value instanceof Mt?Promise.resolve(S.value.v).then(v,_):w(l[0][2],S)}function v(S){p("next",S)}function _(S){p("throw",S)}function w(S,M){S(M),l.shift(),l.length&&p(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Bw=="function"?Bw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(m){l({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x8(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:A2(t)}function A2(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function v8(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!A2(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class b8{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new _8(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _8{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),v8(l)}async sendMessage(e){var t;await this.sendPromise;const s=Un(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,m=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let w=[];v!=null&&(w=(h=v.slice(_))!==null&&h!==void 0?h:[]);const S=m?[m]:[];this.recordHistory(s,S,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=Un(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?Hw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,a;return gl(this,arguments,function*(){var u,h,p,m;const v=[];try{for(var _=!0,w=nu(e),S;S=yield Mt(w.next()),u=S.done,!u;_=!0){m=S.value,_=!1;const M=m;if(x8(M)){const B=(a=(s=M.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;B!==void 0&&v.push(B)}yield yield Mt(M)}}catch(M){h={error:M}}finally{try{!_&&!u&&(p=w.return)&&(yield Mt(p.call(w)))}finally{if(h)throw h.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Hw(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w8(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function E8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function T8(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],b2(t)),e}function N8(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function S8(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],b2(t)),e}function A8(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function C8(n){const e={},t=f(n,["config"]);return t!=null&&A8(t,e),e}function I8(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R8 extends pi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new po(di.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=C8(e);return l=ve("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=I8(p),v=new Pj;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=w8(e);return l=ve("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=E8(p),v=new jj;return Object.assign(v,m),v})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=S8(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=T8(e);return l=ve("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=N8(p),v=new Lj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dh(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function k8(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>K8(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function M8(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function D8(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P8(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function j8(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=f(n,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const M=f(n,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const ne=f(n,["speechConfig"]);ne!=null&&g(e,["speechConfig"],C2(ne));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const W=f(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const z=f(n,["topK"]);z!=null&&g(e,["topK"],z);const C=f(n,["topP"]);if(C!=null&&g(e,["topP"],C),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L8(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function V8(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function U8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],iy(_));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],k8(Un(M)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let z=Ul(B);Array.isArray(z)&&(z=z.map(C=>Q8(Vl(C)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],Y8(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function O8(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],j8(s));const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],C2(iy(_)));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],Un(M));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let z=Ul(B);Array.isArray(z)&&(z=z.map(C=>J8(Vl(C)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],F);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function q8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],U8(a,t)),t}function z8(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],O8(a,t)),t}function F8(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function G8(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function B8(n){const e={},t=f(n,["media"]);if(t!=null){let m=p2(t);Array.isArray(m)&&(m=m.map(v=>dh(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],dh(y2(s)));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],dh(g2(l)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function H8(n){const e={},t=f(n,["media"]);if(t!=null){let m=p2(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],y2(s));const a=f(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=f(n,["video"]);l!=null&&g(e,["video"],g2(l));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function $8(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=f(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],X8(u));const h=f(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function K8(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],M8(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],D8(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],dh(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function Y8(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function C2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Q8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],L8(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],V8(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function J8(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>P8(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function X8(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=f(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=f(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=f(n,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(M=>M)),g(e,["promptTokensDetails"],S)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(M=>M)),g(e,["cacheTokensDetails"],S)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(M=>M)),g(e,["responseTokensDetails"],S)}const _=f(n,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(M=>M)),g(e,["toolUsePromptTokensDetails"],S)}const w=f(n,["trafficType"]);return w!=null&&g(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W8(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Z8(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],eL(s));const a=f(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>S)),g(e,["safetyRatings"],w)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function eL(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function tL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let l=js(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function nL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function sL(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],rL(s)),e}function rL(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Nf(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>fV(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function iL(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function aL(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function oL(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Un(s));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>D2(h))),g(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],WL(l)),t}function lL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=js(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&aL(l),t}function cL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=js(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&oL(l,t),t}function uL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=f(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function dL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function hL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function fL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function mL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function pL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function gL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const M=f(n,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const ne=f(n,["editMode"]);e!==void 0&&ne!=null&&g(e,["parameters","editMode"],ne);const K=f(n,["baseSteps"]);return e!==void 0&&K!=null&&g(e,["parameters","editConfig","baseSteps"],K),t}function yL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>vV(p))),g(t,["instances[0]","referenceImages"],h)}const u=f(e,["config"]);return u!=null&&gL(u,t),t}function xL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function vL(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bL(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=f(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function _L(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let h=ny(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&vL(l,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],ct(n,u)),t}function wL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=ny(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&bL(l,t),t}function EL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function TL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>sL(u))),g(e,["embeddings"],l)}const a=f(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function NL(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function SL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function AL(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CL(n){const e={},t=f(n,["mode"]);t!=null&&g(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const a=f(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function RL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Nf(Un(a)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const M=f(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],sy(ee));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&g(s,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let V=K;Array.isArray(V)&&(V=V.map(D=>bV(D))),g(t,["safetySettings"],V)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let V=Ul(ie);Array.isArray(V)&&(V=V.map(D=>AV(Vl(D)))),g(t,["tools"],V)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&g(t,["toolConfig"],SV(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);t!==void 0&&z!=null&&g(t,["cachedContent"],gi(n,z));const C=f(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const R=f(e,["mediaResolution"]);R!=null&&g(s,["mediaResolution"],R);const I=f(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],ry(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const j=f(e,["imageConfig"]);return j!=null&&g(s,["imageConfig"],sV(j)),s}function kL(n,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Un(a));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const S=f(e,["presencePenalty"]);S!=null&&g(s,["presencePenalty"],S);const M=f(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&g(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],sy(ee));const ne=f(e,["responseJsonSchema"]);ne!=null&&g(s,["responseJsonSchema"],ne);const K=f(e,["routingConfig"]);K!=null&&g(s,["routingConfig"],K);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(s,["modelConfig"],ie);const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let Z=W;Array.isArray(Z)&&(Z=Z.map(pe=>pe)),g(t,["safetySettings"],Z)}const z=f(e,["tools"]);if(t!==void 0&&z!=null){let Z=Ul(z);Array.isArray(Z)&&(Z=Z.map(pe=>D2(Vl(pe)))),g(t,["tools"],Z)}const C=f(e,["toolConfig"]);t!==void 0&&C!=null&&g(t,["toolConfig"],C);const R=f(e,["labels"]);t!==void 0&&R!=null&&g(t,["labels"],R);const I=f(e,["cachedContent"]);t!==void 0&&I!=null&&g(t,["cachedContent"],gi(n,I));const P=f(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const j=f(e,["mediaResolution"]);j!=null&&g(s,["mediaResolution"],j);const V=f(e,["speechConfig"]);V!=null&&g(s,["speechConfig"],M2(ry(V)));const D=f(e,["audioTimestamp"]);D!=null&&g(s,["audioTimestamp"],D);const Ge=f(e,["thinkingConfig"]);Ge!=null&&g(s,["thinkingConfig"],Ge);const $e=f(e,["imageConfig"]);return $e!=null&&g(s,["imageConfig"],rV($e)),s}function $w(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=js(a);Array.isArray(u)&&(u=u.map(h=>Nf(h))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],RL(n,l,t)),t}function Kw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["contents"]);if(a!=null){let u=js(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],kL(n,l,t)),t}function Yw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Z8(m))),g(e,["candidates"],p)}const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function Qw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const a=f(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=f(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function ML(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&g(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=f(n,["imageSize"]);if(e!==void 0&&S!=null&&g(e,["parameters","sampleImageSize"],S),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function DL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const S=f(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const M=f(n,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&g(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const ne=f(n,["imageSize"]);e!==void 0&&ne!=null&&g(e,["parameters","sampleImageSize"],ne);const K=f(n,["enhancePrompt"]);return e!==void 0&&K!=null&&g(e,["parameters","enhancePrompt"],K),t}function PL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&ML(l,t),t}function jL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&DL(l,t),t}function LL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>YL(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],R2(a)),e}function VL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Sf(u))),g(e,["generatedImages"],l)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],k2(a)),e}function UL(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Af(v));const _=f(n,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(S=>qV(S))),g(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function OL(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","negativePrompt"],w);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const M=f(n,["generateAudio"]);e!==void 0&&M!=null&&g(e,["parameters","generateAudio"],M);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],Zs(B));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let K=F;Array.isArray(K)&&(K=K.map(ie=>zV(ie))),g(e,["instances[0]","referenceImages"],K)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],OV(ee));const ne=f(n,["compressionQuality"]);return e!==void 0&&ne!=null&&g(e,["parameters","compressionQuality"],ne),t}function qL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],BL(u)),e}function zL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],HL(u)),e}function FL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Af(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],P2(u));const h=f(e,["source"]);h!=null&&$L(h,t);const p=f(e,["config"]);return p!=null&&UL(p,t),t}function GL(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Zs(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],j2(u));const h=f(e,["source"]);h!=null&&KL(h,t);const p=f(e,["config"]);return p!=null&&OL(p,t),t}function BL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>JL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function HL(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>XL(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function $L(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Af(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],P2(l)),t}function KL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Zs(a));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],j2(l)),t}function YL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],iV(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],R2(a)),e}function Sf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],I2(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=f(n,["_self"]);a!=null&&g(e,["safetyAttributes"],k2(a));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function QL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],I2(t));const s=f(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function JL(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],VV(t)),e}function XL(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],UV(t)),e}function WL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=f(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=f(n,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const S=f(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const M=f(n,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&g(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const ne=f(n,["speechConfig"]);ne!=null&&g(e,["speechConfig"],M2(ne));const K=f(n,["stopSequences"]);K!=null&&g(e,["stopSequences"],K);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const W=f(n,["thinkingConfig"]);W!=null&&g(e,["thinkingConfig"],W);const z=f(n,["topK"]);z!=null&&g(e,["topK"],z);const C=f(n,["topP"]);if(C!=null&&g(e,["topP"],C),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZL(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function eV(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],ct(n,s)),t}function tV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function nV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function sV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=f(n,["outputMimeType"]);a!=null&&g(e,["imageOutputOptions","mimeType"],a);const l=f(n,["outputCompressionQuality"]);return l!=null&&g(e,["imageOutputOptions","compressionQuality"],l),e}function iV(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],ba(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function I2(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Af(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],ba(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Zs(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function aV(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],_2(n,h)),s}function oV(n,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],_2(n,h)),s}function lV(n,e){const t={},s=f(e,["config"]);return s!=null&&aV(n,s,t),t}function cV(n,e){const t={},s=f(e,["config"]);return s!=null&&oV(n,s,t),t}function uV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=w2(a);Array.isArray(l)&&(l=l.map(u=>Ug(u))),g(e,["models"],l)}return e}function dV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["_self"]);if(a!=null){let l=w2(a);Array.isArray(l)&&(l=l.map(u=>Og(u))),g(e,["models"],l)}return e}function hV(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=f(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function Ug(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],CV(u));const h=f(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=f(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const w=f(n,["topP"]);w!=null&&g(e,["topP"],w);const S=f(n,["topK"]);S!=null&&g(e,["topK"],S);const M=f(n,["thinking"]);return M!=null&&g(e,["thinking"],M),e}function Og(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);a!=null&&g(e,["description"],a);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(w=>NL(w))),g(e,["endpoints"],_)}const h=f(n,["labels"]);h!=null&&g(e,["labels"],h);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],IV(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(w=>w)),g(e,["checkpoints"],_)}return e}function fV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],SL(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],AL(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],W8(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function mV(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],Zs(t)),e}function pV(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=f(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const S=f(n,["labels"]);return e!==void 0&&S!=null&&g(e,["labels"],S),t}function gV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["source"]);a!=null&&xV(a,t);const l=f(e,["config"]);return l!=null&&pV(l,t),t}function yV(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Sf(a))),g(e,["generatedImages"],s)}return e}function xV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Zs(a));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>mV(h))),g(e,["instances[0]","productImages"],u)}return t}function vV(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Zs(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=f(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],hV(l));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],iL(u));const h=f(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function R2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function k2(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=f(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function bV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function _V(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],Zs(t)),e}function wV(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function EV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["source"]);a!=null&&NV(a,t);const l=f(e,["config"]);return l!=null&&wV(l,t),t}function TV(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>QL(a))),g(e,["generatedMasks"],s)}return e}function NV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=f(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Zs(a));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],_V(l)),t}function M2(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function SV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],CL(t));const s=f(n,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function AV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],tV(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],nV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function D2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(w=>IL(w))),g(e,["functionDeclarations"],_)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=f(n,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=f(n,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function CV(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function IV(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=f(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function RV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function kV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=f(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function MV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],ct(n,s));const a=f(e,["config"]);return a!=null&&RV(a,t),t}function DV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&kV(a,t),t}function PV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=f(n,["numberOfImages"]);e!==void 0&&w!=null&&g(e,["parameters","sampleCount"],w);const S=f(n,["mode"]);return e!==void 0&&S!=null&&g(e,["parameters","mode"],S),t}function jV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],ct(n,s));const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],Zs(a));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&PV(u,t),t}function LV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Sf(l))),g(e,["generatedImages"],a)}return e}function VV(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],ba(s));const a=f(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function UV(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function OV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],Zs(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function qV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Af(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function zV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Zs(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function P2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function j2(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ba(s));const a=f(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FV="Content-Type",GV="X-Server-Timeout",BV="User-Agent",qg="x-goog-api-client",HV="1.30.0",$V=`google-genai-sdk/${HV}`,KV="v1beta1",YV="v1beta",Jw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class QV{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:KV,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:YV,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&JV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Xw(a),new jg(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await Xw(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var t;return gl(this,arguments,function*(){const a=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:p}=yield Mt(a.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const w=JSON.parse(JSON.stringify(_.error)),S=w.status,M=w.code,B=`got status: ${S}. ${JSON.stringify(_)}`;if(M>=400&&M<600)throw new Tf({message:B,status:M})}}catch(_){if(_.name==="ApiError")throw _}u+=m;let v=u.match(Jw);for(;v;){const _=v[1];try{const w=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Mt(new jg(w)),u=u.slice(v[0].length),v=u.match(Jw)}catch(w){throw new Error(`exception parsing stream chunk ${_}. ${w}`)}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=$V+" "+this.clientOptions.userAgentExtra;return e[BV]=t,e[qg]=t,e[FV]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(GV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},m=this.getFileName(e),v=ve("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&s.customMetadata&&(_.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(_.chunkingConfig=s.chunkingConfig);const w=await this.fetchUploadUrl(m,h,p,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Xw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new Tf({message:a,status:t}):new Error(a)}}function JV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XV="mcp_used/unknown";let WV=!1;function L2(n){for(const e of n)if(ZV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WV}function V2(n){var e;const t=(e=n[qg])!==null&&e!==void 0?e:"";n[qg]=(t+` ${XV}`).trimStart()}function ZV(n){return n!==null&&typeof n=="object"&&n instanceof ay}function eU(n,e=100){return gl(this,arguments,function*(){let s,a=0;for(;a<e;){const l=yield Mt(n.listTools({cursor:s}));for(const u of l.tools)yield yield Mt(u),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class ay{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new ay(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var h=!0,p=(t=void 0,nu(eU(v))),m;m=await p.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const _=a;u.push(_);const w=_.name;if(l[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);l[w]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$j(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tU(n,e,t){const s=new Uj;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class nU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=iU(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(K=>{m=K}),_=e.callbacks,w=function(){m({})},S=this.apiClient,M={onopen:w,onmessage:K=>{tU(S,_.onmessage,K)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(K){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(K){}},B=this.webSocketFactory.create(p,rU(u),M);B.connect(),await v;const ne={setup:{model:ct(this.apiClient,e.model)}};return B.send(JSON.stringify(ne)),new sU(B,this.apiClient)}}class sU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=G8(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=F8(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ol.PLAY)}pause(){this.sendPlaybackControl(ol.PAUSE)}stop(){this.sendPlaybackControl(ol.STOP)}resetContext(){this.sendPlaybackControl(ol.RESET_CONTEXT)}close(){this.conn.close()}}function rU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function iU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oU(n,e,t){const s=new Vj;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=$8(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class lU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new nU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&L2(e.config.tools)&&V2(_);const w=hU(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,v);else{const I=this.apiClient.getApiKey();let P="BidiGenerateContent",j="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",j="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${j}=${I}`}let S=()=>{};const M=new Promise(I=>{S=I}),B=e.callbacks,F=function(){var I;(I=B==null?void 0:B.onopen)===null||I===void 0||I.call(B),S({})},ee=this.apiClient,ne={onopen:F,onmessage:I=>{oU(ee,B.onmessage,I)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(I){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(I){}},K=this.webSocketFactory.create(v,dU(w),ne);K.connect(),await M;let ie=ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const I=this.apiClient.getProject(),P=this.apiClient.getLocation();ie=`projects/${I}/locations/${P}/`+ie}let W={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zh.AUDIO]}:e.config.responseModalities=[zh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],C=[];for(const I of z)if(this.isCallableTool(I)){const P=I;C.push(await P.tool())}else C.push(I);C.length>0&&(e.config.tools=C);const R={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=z8(this.apiClient,R):W=q8(this.apiClient,R),delete W.config,K.send(JSON.stringify(W)),new uU(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const cU={turnComplete:!0};class uU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=js(t.turns),e.isVertexAI()||(s=s.map(a=>Nf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(aU)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},cU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:H8(e)}:t={realtimeInput:B8(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function dU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function hU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ww=10;function Zw(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(yl(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function yl(n){return"callTool"in n&&typeof n.callTool=="function"}function fU(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>yl(a)))!==null&&s!==void 0?s:!1}function eE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(yl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function tE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mU extends pi{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!fU(t)||Zw(t.config))return await this.generateContentInternal(p);const m=eE(t);if(m.length>0){const B=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let v,_;const w=js(p.contents),S=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:Ww;let M=0;for(;M<S&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const B=v.candidates[0].content,F=[];for(const ee of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(yl(ee)){const K=await ee.callTool(v.functionCalls);F.push(...K)}M++,_={role:"user",parts:F},p.contents=js(p.contents),p.contents.push(B),p.contents.push(_),tE(p.config)&&(w.push(B),w.push(_))}return tE(p.config)&&(v.automaticFunctionCallingHistory=w),v},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),Zw(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=eE(t);if(p.length>0){const _=p.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new po(di.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>yl(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&L2(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),V2(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(yl(u)){const h=u,p=await h.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Ww;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){var w,S;return gl(this,arguments,function*(){for(var M,B,F,ee;h<l;){u&&(h++,u=!1);const W=yield Mt(m.processParamsMaybeAddMcpUsage(_)),z=yield Mt(m.generateContentStreamInternal(W)),C=[],R=[];try{for(var ne=!0,K=(B=void 0,nu(z)),ie;ie=yield Mt(K.next()),M=ie.done,!M;ne=!0){ee=ie.value,ne=!1;const I=ee;if(yield yield Mt(I),I.candidates&&(!((w=I.candidates[0])===null||w===void 0)&&w.content)){R.push(I.candidates[0].content);for(const P of(S=I.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const j=yield Mt(v.get(P.functionCall.name).callTool([P.functionCall]));C.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(I){B={error:I}}finally{try{!ne&&!M&&(F=K.return)&&(yield Mt(F.call(K)))}finally{if(B)throw B.error}}if(C.length>0){u=!0;const I=new qc;I.candidates=[{content:{role:"user",parts:C}}],yield yield Mt(I);const P=[];P.push(...R),P.push({role:"user",parts:C});const j=js(_.contents).concat(P);_.contents=j}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Kw(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Qw(v),w=new qc;return Object.assign(w,_),w})}else{const m=$w(this.apiClient,e);return h=ve("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=Yw(v),w=new qc;return Object.assign(w,_),w})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Kw(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return gl(this,arguments,function*(){var w,S,M,B;try{for(var F=!0,ee=nu(_),ne;ne=yield Mt(ee.next()),w=ne.done,!w;F=!0){B=ne.value,F=!1;const K=B,ie=Qw(yield Mt(K.json()));ie.sdkHttpResponse={headers:K.headers};const W=new qc;Object.assign(W,ie),yield yield Mt(W)}}catch(K){S={error:K}}finally{try{!F&&!w&&(M=ee.return)&&(yield Mt(M.call(ee)))}finally{if(S)throw S.error}}})})}else{const m=$w(this.apiClient,e);return h=ve("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return gl(this,arguments,function*(){var w,S,M,B;try{for(var F=!0,ee=nu(_),ne;ne=yield Mt(ee.next()),w=ne.done,!w;F=!0){B=ne.value,F=!1;const K=B,ie=Yw(yield Mt(K.json()));ie.sdkHttpResponse={headers:K.headers};const W=new qc;Object.assign(W,ie),yield yield Mt(W)}}catch(K){S={error:K}}finally{try{!F&&!w&&(M=ee.return)&&(yield Mt(M.call(ee)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=wL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=TL(v),w=new Rw;return Object.assign(w,_),w})}else{const m=_L(this.apiClient,e);return h=ve("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=EL(v),w=new Rw;return Object.assign(w,_),w})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=jL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=VL(v),w=new kw;return Object.assign(w,_),w})}else{const m=PL(this.apiClient,e);return h=ve("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=LL(v),w=new kw;return Object.assign(w,_),w})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=yL(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=xL(p),v=new Sj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=jV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=LV(p),v=new Aj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=gV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=yV(p),v=new Cj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=EV(this.apiClient,e);return l=ve("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=TV(p),v=new Ij;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=eV(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=ZL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=cV(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=dV(v),w=new Mw;return Object.assign(w,_),w})}else{const m=lV(this.apiClient,e);return h=ve("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=uV(v),w=new Mw;return Object.assign(w,_),w})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=DV(this.apiClient,e);return h=ve("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Og(v))}else{const m=MV(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Ug(v))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=fL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=pL(v),w=new Dw;return Object.assign(w,_),w})}else{const m=hL(this.apiClient,e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=mL(v),w=new Dw;return Object.assign(w,_),w})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=cL(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=dL(v),w=new Pw;return Object.assign(w,_),w})}else{const m=lL(this.apiClient,e);return h=ve("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=uL(v),w=new Pw;return Object.assign(w,_),w})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=tL(this.apiClient,e);return l=ve("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=nL(p),v=new Rj;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=GL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=zL(v),w=new Fh;return Object.assign(w,_),w})}else{const m=FL(this.apiClient,e);return h=ve("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const _=qL(v),w=new Fh;return Object.assign(w,_),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pU extends pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=bj(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=vj(e);return h=ve("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=hj(e);return l=ve("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gU(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yU(n){const e={},t=f(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>SU(l))),g(e,["parts"],a)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function xU(n,e,t){const s={},a=f(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],NU(n,h));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function vU(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],xU(n,s,t)),t}function bU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function _U(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const a=f(n,["name"]);if(a!=null&&g(e,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function EU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function TU(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=f(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],iy(_));const w=f(n,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const S=f(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],yU(Un(M)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let z=Ul(B);Array.isArray(z)&&(z=z.map(C=>CU(Vl(C)))),g(e,["setup","tools"],z)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&g(e,["setup","sessionResumption"],AU(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&g(e,["setup","outputAudioTranscription"],ne);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&g(e,["setup","realtimeInputConfig"],K);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const W=f(n,["proactivity"]);return e!==void 0&&W!=null&&g(e,["setup","proactivity"],W),t}function NU(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],ct(n,s));const a=f(e,["config"]);return a!=null&&g(t,["config"],TU(a,t)),t}function SU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=f(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],bU(l));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],_U(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=f(n,["inlineData"]);p!=null&&g(e,["inlineData"],gU(p));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=f(n,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function AU(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=f(n,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],wU(h));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],EU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function RU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=IU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class kU extends pi{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=vU(this.apiClient,e);l=ve("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=RU(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MU(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function DU(n){const e={},t=f(n,["config"]);return t!=null&&MU(t,e),e}function PU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function jU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&PU(s,e),e}function LU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function VU(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=f(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function UU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=f(n,["done"]);a!=null&&g(e,["done"],a);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],qU(u)),e}function OU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=f(n,["config"]);return a!=null&&VU(a,e),e}function qU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const a=f(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function zU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function FU(n){const e={},t=f(n,["config"]);return t!=null&&zU(t,e),e}function GU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function BU(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function HU(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&BU(s,e),e}function $U(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function YU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&KU(s,e),e}function QU(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function JU(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=f(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function XU(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&JU(s,e),e}function WU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=f(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZU extends pi{constructor(e){super(),this.apiClient=e,this.list=async t=>new po(di.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YU(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XU(e);return l=ve("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=WU(p),v=new kj;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e7 extends pi{constructor(e,t=new ZU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new po(di.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LU(e);return l=ve("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jU(e);a=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=FU(e);return l=ve("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=GU(p),v=new Mj;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HU(e);return l=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=$U(p),v=new Dj;return Object.assign(v,m),v})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OU(e);return l=ve("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=UU(p),v=new ey;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function n7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function s7(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function r7(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec"],nE(S))}else if(a==="PREFERENCE_TUNING"){const S=f(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec"],nE(S))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(h==="PREFERENCE_TUNING"){const S=f(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(p==="PREFERENCE_TUNING"){const S=f(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(m==="PREFERENCE_TUNING"){const S=f(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(v==="PREFERENCE_TUNING"){const S=f(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=f(n,["beta"]);return e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),s}function i7(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&g7(l);const u=f(n,["config"]);return u!=null&&s7(u,t),t}function a7(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=f(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=f(n,["trainingDataset"]);l!=null&&y7(l,t,e);const u=f(n,["config"]);return u!=null&&r7(u,t,e),t}function o7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function l7(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function c7(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function u7(n,e,t){const s={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function d7(n,e){const t={},s=f(n,["config"]);return s!=null&&c7(s,t),t}function h7(n,e){const t={},s=f(n,["config"]);return s!=null&&u7(s,t),t}function f7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>U2(h))),g(t,["tuningJobs"],u)}return t}function m7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>zg(h))),g(t,["tuningJobs"],u)}return t}function p7(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const a=f(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function g7(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function y7(n,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function U2(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],v2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const _=f(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const w=f(n,["_self"]);return w!=null&&g(t,["tunedModel"],p7(w)),t}function zg(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["state"]);l!=null&&g(t,["state"],v2(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const _=f(n,["description"]);_!=null&&g(t,["description"],_);const w=f(n,["baseModel"]);w!=null&&g(t,["baseModel"],w);const S=f(n,["tunedModel"]);S!=null&&g(t,["tunedModel"],S);const M=f(n,["preTunedModel"]);M!=null&&g(t,["preTunedModel"],M);const B=f(n,["supervisedTuningSpec"]);B!=null&&g(t,["supervisedTuningSpec"],B);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&g(t,["preferenceOptimizationSpec"],F);const ee=f(n,["tuningDataStats"]);ee!=null&&g(t,["tuningDataStats"],ee);const ne=f(n,["encryptionSpec"]);ne!=null&&g(t,["encryptionSpec"],ne);const K=f(n,["partnerModelTuningSpec"]);K!=null&&g(t,["partnerModelTuningSpec"],K);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const W=f(n,["experiment"]);W!=null&&g(t,["experiment"],W);const z=f(n,["labels"]);z!=null&&g(t,["labels"],z);const C=f(n,["outputUri"]);C!=null&&g(t,["outputUri"],C);const R=f(n,["pipelineJob"]);R!=null&&g(t,["pipelineJob"],R);const I=f(n,["serviceAccount"]);I!=null&&g(t,["serviceAccount"],I);const P=f(n,["tunedModelDisplayName"]);P!=null&&g(t,["tunedModelDisplayName"],P);const j=f(n,["veoTuningSpec"]);return j!=null&&g(t,["veoTuningSpec"],j),t}function x7(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=f(n,["name"]);a!=null&&g(t,["name"],a);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const h=f(n,["error"]);return h!=null&&g(t,["error"],h),t}function nE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=f(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v7 extends pi{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new po(di.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Pg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=l7(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>zg(v))}else{const m=o7(e);return h=ve("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>U2(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=h7(e);return h=ve("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=m7(v),w=new jw;return Object.assign(w,_),w})}else{const m=d7(e);return h=ve("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:v.headers},w})),u.then(v=>{const _=f7(v),w=new jw;return Object.assign(w,_),w})}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=n7(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=t7(e);u=ve("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=a7(e,e);return l=ve("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>zg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=i7(e);return l=ve("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>x7(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b7{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _7=1024*1024*8,w7=3,E7=1e3,T7=2,Bh="x-goog-upload-status";async function N7(n,e,t){var s;const a=await O2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function S7(n,e,t){var s;const a=await O2(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=f2(l),h=new ty;return Object.assign(h,u),h}async function O2(n,e,t){var s,a;let l=0,u=0,h=new jg(new Response),p="upload";for(l=n.size;u<l;){const m=Math.min(_7,l-u),v=n.slice(u,u+m);u+m>=l&&(p+=", finalize");let _=0,w=E7;for(;_<w7&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Bh]));)_++,await C7(w),w=w*T7;if(u+=m,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Bh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function A7(n){return{size:n.size,type:n.type}}function C7(n){return new Promise(e=>setTimeout(e,n))}class I7{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N7(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S7(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R7{create(e,t,s){return new k7(e,t,s)}}class k7{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sE="x-goog-api-key";class M7{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(sE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D7="gl-node/";class P7{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=uj(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new M7(this.apiKey);this.apiClient=new QV({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:D7+"web",uploader:new I7,downloader:new b7}),this.models=new mU(this.apiClient),this.live=new lU(this.apiClient,a,new R7),this.batches=new O9(this.apiClient),this.chats=new b8(this.models,this.apiClient),this.caches=new y8(this.apiClient),this.files=new R8(this.apiClient),this.operations=new pU(this.apiClient),this.authTokens=new kU(this.apiClient),this.tunings=new v7(this.apiClient),this.fileSearchStores=new e7(this.apiClient)}}var j7={};const L7=new P7({apiKey:j7.API_KEY}),rE={5:`Level: A1-A1+. 
  Grammar: Verb to be, have/has, Present Simple (description/routine), Plurals, Possessive adjectives, There is/are, Prepositions of place, Imperatives.
  Skills: Short texts (40-70 words), identify simple ideas (name, place, time), understand short instructions.`,6:`Level: A1+-A2.
  Grammar: Present Simple (Strong), Past Simple (Regular only), Countable/Uncountable, Quantifiers (some, any), Can/Can't, Comparative adjectives, Adverbs of frequency.
  Skills: Short/Medium texts, simple past events, Wh-questions, describing people/places.`,7:`Level: A2.
  Grammar: Past Simple (Regular/Irregular), Future (will/going to), Present Continuous, Comparative & Superlative, Object pronouns, Adverbs (quickly...), Simple connectors.
  Skills: Texts 120-150 words, sequence of events, detailed descriptions, simple opinions.`,8:`Level: A2-A2+ (Start of B1).
  Grammar: Present Perfect, Past Continuous, Zero & First Conditionals, Modals (must, should), Passive (simple), Relative clauses.
  Skills: Texts 150-200 words, specific info extraction, cause/effect, main idea.`,9:`Level: A2+-B1.
  Grammar: Present Perfect (Advanced), Past Perfect, Future forms, Passive (Present/Past), Reported Speech (say/tell), Conditionals (0+1), Too/Enough, Gerunds/Infinitives.
  Skills: Medium texts analysis, multiple opinions, evidence extraction, main idea + details.`,10:`Level: B1.
  Grammar: Passive (Advanced), Reported Speech (Advanced), Modals of obligation/deduction, Second Conditional, Relative Pronouns.
  Skills: Short academic texts, analyzing scientific/social articles, summarizing, linking paragraphs.`,11:`Level: B1+-B2.
  Grammar: Conditionals (0-3), Mixed Conditionals (Basic), Passive (All tenses), Modals (Advice, Obligation, Prediction), Reduced Relative Clauses, Perfect tenses.
  Skills: Long text analysis, arguments & evidence, comparing viewpoints, context clues.`,12:`Level: B2 (Tawjihi Standard).
  Grammar: Advanced Passive, Advanced Conditionals (Mixed), Reported Speech (Full), Modals of speculation/deduction, Reduced clauses, Nominalization, Cohesive devices.
  Skills: Complex academic texts, inference, interpretation, primary vs secondary ideas, advanced paraphrasing, logical arguments.`,General:`Level: B2+ (University Level).
  Grammar: Advanced Structure, Complex Sentences, Academic Vocabulary, Nuanced Grammar Points.
  Skills: Critical Reading, Logical Reasoning, Argument Analysis, Advanced Comprehension.`},V7=async n=>{try{const e="gemini-2.5-flash",t=rE[n]||rE.General,a=`Generate a comprehensive English Aptitude Assessment for Grade ${n}.
    Total 15 Multiple Choice Questions.
    
    Strictly follow this curriculum:
    ${t}
    
    Distribution:
    - 5 Questions: Grammar (Focus on the specific tenses/rules listed above). Tag as 'Grammar'.
    - 5 Questions: Vocabulary (Contextual usage appropriate for level). Tag as 'Vocabulary'.
    - 3 Questions: Reading Comprehension (Short passage approx 3-5 sentences). Tag as 'Reading'.
    - 2 Questions: Writing Mechanics (Punctuation, Structure, Linking words). Tag as 'Writing'.
    
    Ensure questions are varied and challenging for the level.
    The output must be JSON.
    Language: English (Questions and Options). Explanation should be in Arabic for better student understanding.
    `,u=(await L7.models.generateContent({model:e,contents:a,config:{responseMimeType:"application/json",responseSchema:{type:_n.ARRAY,items:{type:_n.OBJECT,properties:{id:{type:_n.INTEGER},question:{type:_n.STRING},options:{type:_n.ARRAY,items:{type:_n.STRING}},correctAnswer:{type:_n.INTEGER},explanation:{type:_n.STRING},skill:{type:_n.STRING,enum:["Grammar","Vocabulary","Reading","Writing"]},passageContent:{type:_n.STRING}},required:["id","question","options","correctAnswer","skill"]}}}})).text;return u?JSON.parse(u):[]}catch(e){throw console.error("Error generating aptitude test:",e),new Error("Failed to generate assessment.")}},U7=({onBack:n,onLoginRequest:e})=>{const{user:t}=ss(),[s,a]=G.useState("SUBJECT_SELECT"),[l,u]=G.useState(""),[h,p]=G.useState(""),[m,v]=G.useState([]),[_,w]=G.useState(0),[S,M]=G.useState([]),[B,F]=G.useState(!1),[ee,ne]=G.useState(0),[K,ie]=G.useState(!1),[W,z]=G.useState(!1),[C,R]=G.useState(!1),[I,P]=G.useState(null);G.useEffect(()=>{window.scrollTo(0,0)},[s]),G.useEffect(()=>{if(s!=="TESTING")return;const Q=()=>{ne(he=>{const Ne=he+1;return Ne===1?ie(!0):Ne>=2&&(ie(!1),z(!0)),Ne})},U=()=>{document.hidden&&Q()},te=he=>{(he.key==="PrintScreen"||he.ctrlKey&&he.key==="p"||he.metaKey&&he.shiftKey)&&(he.preventDefault(),Q())};return document.addEventListener("visibilitychange",U),window.addEventListener("keydown",te),()=>{document.removeEventListener("visibilitychange",U),window.removeEventListener("keydown",te)}},[s]);const j=Q=>{if(!t){e();return}u(Q),a("GRADE_SELECT")},V=async Q=>{p(Q),a("TESTING"),F(!0),ne(0);try{const U=await V7(Q);v(U),M(new Array(U.length).fill(-1))}catch(U){console.error(U),alert("       "),a("GRADE_SELECT")}finally{F(!1)}},D=Q=>{const U=[...S];U[_]=Q,M(U),setTimeout(()=>{_<m.length-1?w(te=>te+1):Z(U)},400)},Ge=()=>{R(!1),a("GRADE_SELECT")},$e=()=>{z(!1),a("GRADE_SELECT")},Z=async Q=>{a("ANALYZING");const U={Grammar:{correct:0,total:0},Vocabulary:{correct:0,total:0},Reading:{correct:0,total:0},Writing:{correct:0,total:0}};let te=0;m.forEach((Ve,bt)=>{const et=Q[bt]===Ve.correctAnswer;et&&te++;const Zt=Ve.skill||"Grammar";U[Zt]&&(U[Zt].total++,et&&U[Zt].correct++)});const he={Grammar:U.Grammar.total?Math.round(U.Grammar.correct/U.Grammar.total*100):0,Vocabulary:U.Vocabulary.total?Math.round(U.Vocabulary.correct/U.Vocabulary.total*100):0,Reading:U.Reading.total?Math.round(U.Reading.correct/U.Reading.total*100):0,Writing:U.Writing.total?Math.round(U.Writing.correct/U.Writing.total*100):0},Ne=[],je=[],at=[];Object.entries(he).forEach(([Ve,bt])=>{bt>=75?Ne.push(Ve):bt<50&&(je.push(Ve),Ve==="Grammar"&&at.push("     ."),Ve==="Vocabulary"&&at.push("       ."),Ve==="Reading"&&at.push("      ."),Ve==="Writing"&&at.push("      ."))}),je.length===0&&at.push(" !     .");const Ae=Math.round(te/m.length*100),It={id:Date.now().toString(),date:new Date().toISOString(),subject:l,grade:h,score:Ae,totalQuestions:m.length,skillsAnalysis:he,strengths:Ne,weaknesses:je,recommendations:at};if(P(It),t)try{const Ve=Xs(it,"users",t.uid);await bf(Ve,{aptitudeResults:sD(It)})}catch(Ve){console.error("Error saving aptitude result:",Ve)}setTimeout(()=>{a("RESULT")},2e3)},pe=()=>o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:" "}),o.jsx("p",{className:"text-gray-400",children:"      "})]}),o.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.jsxs("button",{onClick:()=>j("English"),className:"bg-gray-900 border-2 border-emerald-500/50 p-6 rounded-3xl hover:scale-[1.02] transition-all group relative overflow-hidden flex flex-col items-center justify-center",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/10 rounded-full -mr-10 -mt-10 group-hover:bg-emerald-500/20 transition-colors"}),o.jsx("div",{className:"w-20 h-20 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-4 text-emerald-400",children:o.jsx(Bg,{className:"w-10 h-10"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:" "}),o.jsx("p",{className:"text-sm text-gray-400",children:"English Language"})]})})]}),de=()=>o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in-up",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-3",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"   "})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[[9,10,11,12].map(Q=>o.jsxs("button",{onClick:()=>V(Q.toString()),className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 hover:border-blue-500 hover:bg-gray-800 transition-all group flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 flex items-center justify-center text-blue-400 group-hover:bg-blue-900/30 transition-colors",children:o.jsx(ri,{className:"w-6 h-6"})}),o.jsxs("span",{className:"font-black text-xl text-white",children:[" ",Q]})]}),o.jsx(Ut,{className:"w-5 h-5 text-gray-600 group-hover:text-white transform group-hover:translate-x-1 transition-all"})]},Q)),o.jsxs("button",{onClick:()=>V("General"),className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-indigo-900 to-purple-900 p-6 rounded-2xl border border-indigo-500/50 hover:border-indigo-400 hover:shadow-lg transition-all group flex items-center justify-between relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),o.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-white/10 flex items-center justify-center text-white shadow-inner",children:o.jsx(xl,{className:"w-7 h-7"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("h3",{className:"font-black text-xl text-white",children:"  "}),o.jsx("p",{className:"text-xs text-indigo-200 mt-1",children:"  (  B2+)"})]})]}),o.jsx(Ut,{className:"w-5 h-5 text-white transform group-hover:translate-x-1 transition-all relative z-10"})]}),o.jsxs("div",{className:"col-span-1 sm:col-span-2 mt-4 pt-4 border-t border-white/5",children:[o.jsx("p",{className:"text-center text-xs text-gray-500 mb-4",children:" "}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[5,6,7,8].map(Q=>o.jsx("button",{onClick:()=>V(Q.toString()),className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800 hover:border-gray-600 transition-all text-center",children:o.jsxs("span",{className:"font-bold text-gray-400 text-sm",children:[" ",Q]})},Q))})]})]})]}),Pe=()=>{if(B)return o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-6 relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-500/30 border-t-emerald-500 animate-spin"}),o.jsx(xl,{className:"w-10 h-10 text-emerald-400 animate-pulse"})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"    "}),o.jsx("p",{className:"text-gray-400 text-sm max-w-xs mx-auto mb-2",children:"      ..."}),o.jsx("p",{className:"text-xs text-emerald-500/80 font-medium bg-emerald-900/10 px-3 py-1 rounded-full animate-pulse",children:"      "})]});const Q=m[_],U=(_+1)/m.length*100;return o.jsxs("div",{className:"fixed inset-0 bg-gray-950 z-50 flex flex-col select-none",style:{userSelect:"none"},children:[K&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md",children:o.jsxs("div",{className:"bg-red-900/90 border border-red-500 rounded-2xl p-6 max-w-sm text-center shadow-2xl",children:[o.jsx(ng,{className:"w-16 h-16 mx-auto text-red-200 mb-4"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" !"}),o.jsx("p",{className:"text-red-100 text-sm mb-6",children:"          ."}),o.jsx("button",{onClick:()=>ie(!1),className:"bg-white text-red-900 px-6 py-2 rounded-lg font-bold w-full",children:""})]})}),W&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/90 backdrop-blur-xl",children:o.jsxs("div",{className:"bg-gray-900 border-2 border-red-600 rounded-3xl p-8 max-w-sm text-center shadow-2xl",children:[o.jsx("div",{className:"w-20 h-20 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-600",children:o.jsx(ng,{className:"w-10 h-10 text-red-500"})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"   "}),o.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"      ."}),o.jsx("button",{onClick:$e,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-xl font-bold w-full transition-colors",children:" "})]})}),C&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-6 max-w-sm text-center shadow-xl",children:[o.jsx(ig,{className:"w-12 h-12 mx-auto text-yellow-500 mb-4"}),o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"     ."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Ge,className:"flex-1 bg-red-600 text-white py-2 rounded-lg font-bold",children:" "}),o.jsx("button",{onClick:()=>R(!1),className:"flex-1 bg-gray-700 text-white py-2 rounded-lg font-bold",children:""})]})]})}),o.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[o.jsx(su,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:""})]}),o.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-mono text-sm bg-emerald-900/20 px-4 py-1.5 rounded-full border border-emerald-900/50",children:[o.jsx(Hh,{className:"w-4 h-4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[_+1," / ",m.length]})]}),o.jsx("div",{className:"w-full bg-gray-700 h-1",children:o.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${U}%`}})})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center p-6 overflow-y-auto max-w-3xl mx-auto w-full",children:[o.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:"ltr",children:[o.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:["  - ",l]}),o.jsx("div",{className:"bg-blue-900/30 p-1.5 rounded-lg shadow-sm border border-blue-800/50",children:o.jsx("span",{className:"text-xs font-bold text-blue-300 px-2",children:Q.skill||"General"})})]}),o.jsxs("div",{className:"p-6 md:p-8",children:[Q.passageContent&&o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"bg-blue-900/20 p-5 rounded-2xl border border-blue-800 text-left max-h-[35vh] overflow-y-auto custom-scrollbar",children:o.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-medium text-base leading-relaxed break-words",children:Q.passageContent})})}),o.jsx("h3",{className:"text-lg md:text-2xl font-black text-white leading-relaxed mb-8 text-left break-words",children:Q.question}),o.jsx("div",{className:"space-y-3",dir:"ltr",children:Q.options.map((te,he)=>o.jsxs("button",{onClick:()=>D(he),className:`w-full p-4 rounded-xl border-2 text-left font-medium transition-all hover:scale-[1.01] active:scale-[0.99] flex items-center justify-between group ${S[_]===he?"border-emerald-500 bg-emerald-900/30 text-emerald-100 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 text-gray-300 shadow-sm"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("span",{className:`inline-flex w-8 h-8 rounded-full border-2 text-sm font-bold items-center justify-center shrink-0 transition-colors ${S[_]===he?"border-emerald-500 bg-emerald-600 text-white":"border-gray-600 text-gray-500 group-hover:border-gray-400"}`,children:String.fromCharCode(65+he)}),o.jsx("span",{className:"break-words",children:te})]}),S[_]===he&&o.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full shadow-sm animate-fade-in shrink-0"})]},he))})]})]}),o.jsx("div",{className:"mt-8 flex justify-end opacity-50 pointer-events-none",children:o.jsxs("button",{className:"bg-gray-800 text-gray-500 px-6 py-3 rounded-xl font-bold flex items-center gap-2",children:["  ",o.jsx(Ut,{className:"w-4 h-4"})]})})]})]})},Re=()=>o.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[o.jsxs("div",{className:"mb-8 relative",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl rounded-full animate-pulse"}),o.jsx(YA,{className:"w-20 h-20 text-blue-400 relative z-10 animate-bounce"})]}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  "}),o.jsx("p",{className:"text-gray-400",children:"    ..."})]}),O=()=>I?o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-fade-in pb-20",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"inline-block p-6 rounded-full bg-gray-800 border border-gray-700 mb-4 shadow-lg",children:o.jsxs("div",{className:`text-5xl font-black ${I.score>=75?"text-emerald-400":I.score>=50?"text-yellow-400":"text-red-400"}`,children:[I.score,"%"]})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"  "}),o.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Object.entries(I.skillsAnalysis).map(([Q,U],te)=>{const he=U;return o.jsxs("div",{className:"bg-gray-900 p-5 rounded-2xl border border-gray-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-gray-300 font-bold",children:Q}),o.jsxs("span",{className:`text-sm font-black ${he>=70?"text-green-400":he>=40?"text-yellow-400":"text-red-400"}`,children:[he,"%"]})]}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden border border-gray-700",children:o.jsx("div",{className:`h-full rounded-full ${he>=70?"bg-green-500":he>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${he}%`}})})]},te)})}),o.jsxs("div",{className:"space-y-6",children:[I.strengths.length>0&&o.jsxs("div",{className:"bg-emerald-900/10 border border-emerald-500/20 p-6 rounded-2xl",children:[o.jsxs("h3",{className:"font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[o.jsx(II,{className:"w-5 h-5"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:I.strengths.map((Q,U)=>o.jsx("span",{className:"bg-emerald-900/40 text-emerald-200 px-3 py-1 rounded-lg text-sm font-medium border border-emerald-500/30",children:Q},U))})]}),I.recommendations.length>0&&o.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-2xl shadow-lg",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Kg,{className:"w-5 h-5 text-blue-400"})," "]}),o.jsx("ul",{className:"space-y-3",children:I.recommendations.map((Q,U)=>o.jsxs("li",{className:"flex items-start gap-3 text-gray-300 text-sm leading-relaxed bg-gray-800 p-3 rounded-xl border border-gray-700",children:[o.jsx(ig,{className:"w-4 h-4 text-yellow-500 shrink-0 mt-0.5"}),Q]},U))})]})]}),o.jsx("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl mt-8 shadow-lg transition-all",children:"  "})]}):null;return o.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100",children:[s!=="TESTING"&&o.jsxs("div",{className:"p-4 flex items-center justify-between bg-gray-900/50 backdrop-blur-md sticky top-0 z-30 border-b border-white/5",children:[o.jsx("button",{onClick:n,className:"p-2 bg-gray-800 rounded-full text-gray-400 hover:text-white",children:o.jsx(Ut,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-bold text-sm text-gray-300",children:s==="SUBJECT_SELECT"?" ":s==="GRADE_SELECT"?" ":""}),o.jsx("div",{className:"w-9"})]}),s==="SUBJECT_SELECT"&&pe(),s==="GRADE_SELECT"&&de(),s==="TESTING"&&Pe(),s==="ANALYZING"&&Re(),s==="RESULT"&&O()]})},O7=({onNavigate:n,onLoginRequest:e})=>{const{user:t}=ss(),s=()=>{t?n("APTITUDE_TEST"):e()};return o.jsx("section",{className:"py-20 bg-gray-950 relative overflow-hidden border-t border-white/5",children:o.jsx("div",{className:"max-w-5xl mx-auto px-6 relative z-10",children:o.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 backdrop-blur-md rounded-[3rem] p-8 md:p-12 border border-indigo-500/20 shadow-2xl flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-[100px] -mr-20 -mt-20 group-hover:bg-indigo-600/30 transition-colors"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[100px] -ml-20 -mb-20 group-hover:bg-purple-600/30 transition-colors"}),o.jsxs("div",{className:"flex-1 text-center md:text-right",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-sm font-bold mb-6",children:[o.jsx(xl,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]}),o.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6 leading-tight",children:["  ",o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:""})]}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed font-medium mb-8",children:"                          ."}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center md:justify-start",children:o.jsxs("button",{onClick:s,className:"bg-white text-indigo-950 px-8 py-4 rounded-2xl font-black text-lg hover:bg-indigo-50 transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2 group/btn",children:["  ",o.jsx(vr,{className:"w-5 h-5 group-hover/btn:-translate-x-1 transition-transform"})]})})]}),o.jsx("div",{className:"w-full md:w-1/3 flex justify-center relative",children:o.jsxs("div",{className:"relative w-64 h-64",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full opacity-20 blur-2xl animate-pulse"}),o.jsxs("div",{className:"relative bg-gray-900 rounded-3xl border border-indigo-500/30 p-6 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-all duration-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx(ei,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(ei,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),o.jsx(ei,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),o.jsx("span",{className:"text-xs font-bold text-indigo-300 bg-indigo-900/50 px-2 py-1 rounded",children:" "})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-3/4"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-full"}),o.jsx("div",{className:"h-2 bg-gray-800 rounded-full w-5/6"})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx(xl,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-400",children:" "}),o.jsx("div",{className:"text-sm font-bold text-white",children:" "})]})]})]})]})})]})})})};function q7(){const[n,e]=G.useState("HOME"),[t,s]=G.useState(!1),[a,l]=G.useState(!1),u=G.useRef({}),h=G.useRef(!1),{logout:p}=ss();G.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const _=w=>{w.state&&w.state.view?(h.current=!0,e(w.state.view)):(h.current=!0,e("HOME"))};return window.addEventListener("popstate",_),()=>window.removeEventListener("popstate",_)},[]),G.useEffect(()=>{if(h.current){const _=u.current[n]||0;setTimeout(()=>window.scrollTo(0,_),0)}else window.scrollTo(0,0)},[n]);const m=_=>{_!==n&&(u.current[n]=window.scrollY,h.current=!1,window.history.pushState({view:_},"",""),e(_))},v=async()=>{l(!0),setTimeout(async()=>{await p(),l(!1),m("HOME")},1e3)};return o.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[n==="HOME"&&o.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[o.jsx(h2,{}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),o.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),a&&o.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:o.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),o.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[o.jsx(AP,{onLoginClick:()=>s(!0),onNavigate:m,onLogoutClick:v}),o.jsxs("main",{className:"flex-grow",children:[n==="HOME"&&o.jsxs(o.Fragment,{children:[o.jsx(CP,{onStartQuiz:()=>m("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:m}),o.jsx(RP,{onNavigate:m}),o.jsx(ij,{}),o.jsx(HP,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(O7,{onNavigate:m,onLoginRequest:()=>s(!0)}),o.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),o.jsx(nj,{}),o.jsx(sj,{onLoginClick:()=>s(!0)}),o.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),o.jsx(rj,{}),o.jsx(tj,{})]}),n==="ABOUT_PLATFORM"&&o.jsx(zP,{onBack:()=>m("HOME")}),n==="PLATFORM_DEFINITION"&&o.jsx(aj,{onBack:()=>m("HOME")}),n==="SERVICES"&&o.jsx(FP,{onBack:()=>m("HOME")}),n==="TEACHER_CV"&&o.jsx(qP,{onBack:()=>m("HOME")}),n==="PROFILE"&&o.jsx(jP,{onNavigate:m}),n==="TEACHER_DASHBOARD"&&o.jsx(MP,{}),n==="QUESTION_BANK"&&o.jsx($P,{onBack:()=>m("HOME")}),n==="TEACHER_EXPLANATIONS"&&o.jsx(JP,{onNavigate:m,onBack:()=>m("PROFILE")}),n==="TEACHER_UPLOAD_FILES"&&o.jsx(ZP,{onNavigate:m,onBack:()=>m("PROFILE")}),n==="TEACHER_FEEDBACK"&&o.jsx(ej,{onNavigate:m}),n==="QUIZZES"&&o.jsx(VP,{onBack:()=>m("HOME")}),n==="LESSONS"&&o.jsx(GP,{onBack:()=>m("HOME")}),n==="LESSONS_EXPLANATIONS"&&o.jsx(YP,{onBack:()=>m("HOME")}),n==="CONTACT_TEACHER"&&o.jsx(BP,{onBack:()=>m("HOME")}),n==="APTITUDE_TEST"&&o.jsx(U7,{onBack:()=>m("HOME"),onLoginRequest:()=>s(!0)})]}),o.jsx(kP,{isOpen:t,onClose:()=>s(!1)}),o.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:o.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),o.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const q2=document.getElementById("root");if(!q2)throw new Error("Could not find root element to mount to");const z7=AA.createRoot(q2);z7.render(o.jsx(aE.StrictMode,{children:o.jsx(SP,{children:o.jsx(q7,{})})}));
