(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function L_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fg={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function ST(){if(iw)return Nu;iw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var lw;function AT(){return lw||(lw=1,Fg.exports=ST()),Fg.exports}var i=AT(),Hg={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function IT(){if(ow)return Ke;ow=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function C(I){return I===null||typeof I!="object"?null:(I=N&&I[N]||I["@@iterator"],typeof I=="function"?I:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,F={};function U(I,Z,P){this.props=I,this.context=Z,this.refs=F,this.updater=P||Y}U.prototype.isReactComponent={},U.prototype.setState=function(I,Z){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Z,"setState")},U.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function ae(){}ae.prototype=U.prototype;function $(I,Z,P){this.props=I,this.context=Z,this.refs=F,this.updater=P||Y}var de=$.prototype=new ae;de.constructor=$,V(de,U.prototype),de.isPureReactComponent=!0;var W=Array.isArray;function se(){}var j={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function A(I,Z,P){var Q=P.ref;return{$$typeof:r,type:I,key:Z,ref:Q!==void 0?Q:null,props:P}}function R(I,Z){return A(I.type,Z,I.props)}function D(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function L(I){var Z={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(P){return Z[P]})}var k=/\/+/g;function ge(I,Z){return typeof I=="object"&&I!==null&&I.key!=null?L(""+I.key):Z.toString(36)}function ke(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(se,se):(I.status="pending",I.then(function(Z){I.status==="pending"&&(I.status="fulfilled",I.value=Z)},function(Z){I.status==="pending"&&(I.status="rejected",I.reason=Z)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function G(I,Z,P,Q,ye){var Ee=typeof I;(Ee==="undefined"||Ee==="boolean")&&(I=null);var ue=!1;if(I===null)ue=!0;else switch(Ee){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(I.$$typeof){case r:case e:ue=!0;break;case w:return ue=I._init,G(ue(I._payload),Z,P,Q,ye)}}if(ue)return ye=ye(I),ue=Q===""?"."+ge(I,0):Q,W(ye)?(P="",ue!=null&&(P=ue.replace(k,"$&/")+"/"),G(ye,Z,P,"",function(ft){return ft})):ye!=null&&(D(ye)&&(ye=R(ye,P+(ye.key==null||I&&I.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+ue)),Z.push(ye)),1;ue=0;var qe=Q===""?".":Q+":";if(W(I))for(var ze=0;ze<I.length;ze++)Q=I[ze],Ee=qe+ge(Q,ze),ue+=G(Q,Z,P,Ee,ye);else if(ze=C(I),typeof ze=="function")for(I=ze.call(I),ze=0;!(Q=I.next()).done;)Q=Q.value,Ee=qe+ge(Q,ze++),ue+=G(Q,Z,P,Ee,ye);else if(Ee==="object"){if(typeof I.then=="function")return G(ke(I),Z,P,Q,ye);throw Z=String(I),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ce(I,Z,P){if(I==null)return I;var Q=[],ye=0;return G(I,Q,"","",function(Ee){return Z.call(P,Ee,ye++)}),Q}function te(I){if(I._status===-1){var Z=I._result;Z=Z(),Z.then(function(P){(I._status===0||I._status===-1)&&(I._status=1,I._result=P)},function(P){(I._status===0||I._status===-1)&&(I._status=2,I._result=P)}),I._status===-1&&(I._status=0,I._result=Z)}if(I._status===1)return I._result.default;throw I._result}var me=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Ne={map:ce,forEach:function(I,Z,P){ce(I,function(){Z.apply(this,arguments)},P)},count:function(I){var Z=0;return ce(I,function(){Z++}),Z},toArray:function(I){return ce(I,function(Z){return Z})||[]},only:function(I){if(!D(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ke.Activity=b,Ke.Children=Ne,Ke.Component=U,Ke.Fragment=t,Ke.Profiler=l,Ke.PureComponent=$,Ke.StrictMode=s,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(I){return j.H.useMemoCache(I)}},Ke.cache=function(I){return function(){return I.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(I,Z,P){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Q=V({},I.props),ye=I.key;if(Z!=null)for(Ee in Z.key!==void 0&&(ye=""+Z.key),Z)!T.call(Z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Z.ref===void 0||(Q[Ee]=Z[Ee]);var Ee=arguments.length-2;if(Ee===1)Q.children=P;else if(1<Ee){for(var ue=Array(Ee),qe=0;qe<Ee;qe++)ue[qe]=arguments[qe+2];Q.children=ue}return A(I.type,ye,Q)},Ke.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},Ke.createElement=function(I,Z,P){var Q,ye={},Ee=null;if(Z!=null)for(Q in Z.key!==void 0&&(Ee=""+Z.key),Z)T.call(Z,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ye[Q]=Z[Q]);var ue=arguments.length-2;if(ue===1)ye.children=P;else if(1<ue){for(var qe=Array(ue),ze=0;ze<ue;ze++)qe[ze]=arguments[ze+2];ye.children=qe}if(I&&I.defaultProps)for(Q in ue=I.defaultProps,ue)ye[Q]===void 0&&(ye[Q]=ue[Q]);return A(I,Ee,ye)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(I){return{$$typeof:f,render:I}},Ke.isValidElement=D,Ke.lazy=function(I){return{$$typeof:w,_payload:{_status:-1,_result:I},_init:te}},Ke.memo=function(I,Z){return{$$typeof:x,type:I,compare:Z===void 0?null:Z}},Ke.startTransition=function(I){var Z=j.T,P={};j.T=P;try{var Q=I(),ye=j.S;ye!==null&&ye(P,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(se,me)}catch(Ee){me(Ee)}finally{Z!==null&&P.types!==null&&(Z.types=P.types),j.T=Z}},Ke.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ke.use=function(I){return j.H.use(I)},Ke.useActionState=function(I,Z,P){return j.H.useActionState(I,Z,P)},Ke.useCallback=function(I,Z){return j.H.useCallback(I,Z)},Ke.useContext=function(I){return j.H.useContext(I)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(I,Z){return j.H.useDeferredValue(I,Z)},Ke.useEffect=function(I,Z){return j.H.useEffect(I,Z)},Ke.useEffectEvent=function(I){return j.H.useEffectEvent(I)},Ke.useId=function(){return j.H.useId()},Ke.useImperativeHandle=function(I,Z,P){return j.H.useImperativeHandle(I,Z,P)},Ke.useInsertionEffect=function(I,Z){return j.H.useInsertionEffect(I,Z)},Ke.useLayoutEffect=function(I,Z){return j.H.useLayoutEffect(I,Z)},Ke.useMemo=function(I,Z){return j.H.useMemo(I,Z)},Ke.useOptimistic=function(I,Z){return j.H.useOptimistic(I,Z)},Ke.useReducer=function(I,Z,P){return j.H.useReducer(I,Z,P)},Ke.useRef=function(I){return j.H.useRef(I)},Ke.useState=function(I){return j.H.useState(I)},Ke.useSyncExternalStore=function(I,Z,P){return j.H.useSyncExternalStore(I,Z,P)},Ke.useTransition=function(){return j.H.useTransition()},Ke.version="19.2.0",Ke}var cw;function hx(){return cw||(cw=1,Hg.exports=IT()),Hg.exports}var O=hx();const z_=L_(O);var Gg={exports:{}},ju={},$g={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function CT(){return uw||(uw=1,(function(r){function e(G,ce){var te=G.length;G.push(ce);e:for(;0<te;){var me=te-1>>>1,Ne=G[me];if(0<l(Ne,ce))G[me]=ce,G[te]=Ne,te=me;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ce=G[0],te=G.pop();if(te!==ce){G[0]=te;e:for(var me=0,Ne=G.length,I=Ne>>>1;me<I;){var Z=2*(me+1)-1,P=G[Z],Q=Z+1,ye=G[Q];if(0>l(P,te))Q<Ne&&0>l(ye,P)?(G[me]=ye,G[Q]=te,me=Q):(G[me]=P,G[Z]=te,me=Z);else if(Q<Ne&&0>l(ye,te))G[me]=ye,G[Q]=te,me=Q;else break e}}return ce}function l(G,ce){var te=G.sortIndex-ce.sortIndex;return te!==0?te:G.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],w=1,b=null,N=3,C=!1,Y=!1,V=!1,F=!1,U=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function de(G){for(var ce=t(x);ce!==null;){if(ce.callback===null)s(x);else if(ce.startTime<=G)s(x),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(x)}}function W(G){if(V=!1,de(G),!Y)if(t(g)!==null)Y=!0,se||(se=!0,L());else{var ce=t(x);ce!==null&&ke(W,ce.startTime-G)}}var se=!1,j=-1,T=5,A=-1;function R(){return F?!0:!(r.unstable_now()-A<T)}function D(){if(F=!1,se){var G=r.unstable_now();A=G;var ce=!0;try{e:{Y=!1,V&&(V=!1,ae(j),j=-1),C=!0;var te=N;try{t:{for(de(G),b=t(g);b!==null&&!(b.expirationTime>G&&R());){var me=b.callback;if(typeof me=="function"){b.callback=null,N=b.priorityLevel;var Ne=me(b.expirationTime<=G);if(G=r.unstable_now(),typeof Ne=="function"){b.callback=Ne,de(G),ce=!0;break t}b===t(g)&&s(g),de(G)}else s(g);b=t(g)}if(b!==null)ce=!0;else{var I=t(x);I!==null&&ke(W,I.startTime-G),ce=!1}}break e}finally{b=null,N=te,C=!1}ce=void 0}}finally{ce?L():se=!1}}}var L;if(typeof $=="function")L=function(){$(D)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ge=k.port2;k.port1.onmessage=D,L=function(){ge.postMessage(null)}}else L=function(){U(D,0)};function ke(G,ce){j=U(function(){G(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(G){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var te=N;N=ce;try{return G()}finally{N=te}},r.unstable_requestPaint=function(){F=!0},r.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=N;N=G;try{return ce()}finally{N=te}},r.unstable_scheduleCallback=function(G,ce,te){var me=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?me+te:me):te=me,G){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=te+Ne,G={id:w++,callback:ce,priorityLevel:G,startTime:te,expirationTime:Ne,sortIndex:-1},te>me?(G.sortIndex=te,e(x,G),t(g)===null&&G===t(x)&&(V?(ae(j),j=-1):V=!0,ke(W,te-me))):(G.sortIndex=Ne,e(g,G),Y||C||(Y=!0,se||(se=!0,L()))),G},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(G){var ce=N;return function(){var te=N;N=ce;try{return G.apply(this,arguments)}finally{N=te}}}})(Kg)),Kg}var dw;function RT(){return dw||(dw=1,$g.exports=CT()),$g.exports}var Qg={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function kT(){if(hw)return zn;hw=1;var r=hx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:x,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,zn.createPortal=function(g,x){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,w)},zn.flushSync=function(g){var x=d.T,w=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=w,s.d.f()}},zn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},zn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},zn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var w=x.as,b=f(w,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;w==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:C}):w==="script"&&s.d.X(g,{crossOrigin:b,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},zn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var w=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},zn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var w=x.as,b=f(w,x.crossOrigin);s.d.L(g,w,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},zn.preloadModule=function(g,x){if(typeof g=="string")if(x){var w=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},zn.requestFormReset=function(g){s.d.r(g)},zn.unstable_batchedUpdates=function(g,x){return g(x)},zn.useFormState=function(g,x,w){return d.H.useFormState(g,x,w)},zn.useFormStatus=function(){return d.H.useHostTransitionStatus()},zn.version="19.2.0",zn}var fw;function DT(){if(fw)return Qg.exports;fw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qg.exports=kT(),Qg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function OT(){if(mw)return ju;mw=1;var r=RT(),e=hx(),t=DT();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var v=!1,E=m.child;E;){if(E===o){v=!0,o=m,u=p;break}if(E===u){v=!0,u=m,o=p;break}E=E.sibling}if(!v){for(E=p.child;E;){if(E===o){v=!0,o=p,u=m;break}if(E===u){v=!0,u=p,o=m;break}E=E.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function w(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=w(n),a!==null)return a;n=n.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),$=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case W:return"Suspense";case se:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Y:return"Portal";case $:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case de:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return a=n.displayName||null,a!==null?a:ge(n.type)||"Memo";case T:a=n._payload,n=n._init;try{return ge(n(a))}catch{}}return null}var ke=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},me=[],Ne=-1;function I(n){return{current:n}}function Z(n){0>Ne||(n.current=me[Ne],me[Ne]=null,Ne--)}function P(n,a){Ne++,me[Ne]=n.current,n.current=a}var Q=I(null),ye=I(null),Ee=I(null),ue=I(null);function qe(n,a){switch(P(Ee,a),P(ye,n),P(Q,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Iv(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Iv(a),n=Cv(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(Q),P(Q,n)}function ze(){Z(Q),Z(ye),Z(Ee)}function ft(n){n.memoizedState!==null&&P(ue,n);var a=Q.current,o=Cv(a,n.type);a!==o&&(P(ye,n),P(Q,o))}function Te(n){ye.current===n&&(Z(Q),Z(ye)),ue.current===n&&(Z(ue),bu._currentValue=te)}var He,Xe;function yn(n){if(He===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);He=a&&a[1]||"",Xe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+He+n+Xe}var ds=!1;function Kn(n,a){if(!n||ds)return"";ds=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var J=ne}Reflect.construct(n,[],he)}else{try{he.call()}catch(ne){J=ne}n.call(he.prototype)}}else{try{throw Error()}catch(ne){J=ne}(he=n())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],E=p[1];if(v&&E){var M=v.split(`
`),X=E.split(`
`);for(m=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(u===M.length||m===X.length)for(u=M.length-1,m=X.length-1;1<=u&&0<=m&&M[u]!==X[m];)m--;for(;1<=u&&0<=m;u--,m--)if(M[u]!==X[m]){if(u!==1||m!==1)do if(u--,m--,0>m||M[u]!==X[m]){var ie=`
`+M[u].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=u&&0<=m);break}}}finally{ds=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?yn(o):""}function hs(n,a){switch(n.tag){case 26:case 27:case 5:return yn(n.type);case 16:return yn("Lazy");case 13:return n.child!==a&&a!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return Kn(n.type,!1);case 11:return Kn(n.type.render,!1);case 1:return Kn(n.type,!0);case 31:return yn("Activity");default:return""}}function Ys(n){try{var a="",o=null;do a+=hs(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var zt=Object.prototype.hasOwnProperty,Ut=r.unstable_scheduleCallback,an=r.unstable_cancelCallback,br=r.unstable_shouldYield,Zn=r.unstable_requestPaint,ln=r.unstable_now,Js=r.unstable_getCurrentPriorityLevel,Ws=r.unstable_ImmediatePriority,vr=r.unstable_UserBlockingPriority,Rs=r.unstable_NormalPriority,Ra=r.unstable_LowPriority,fs=r.unstable_IdlePriority,ka=r.log,Zs=r.unstable_setDisableYieldValue,le=null,Ge=null;function Qe(n){if(typeof ka=="function"&&Zs(n),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(le,n)}catch{}}var st=Math.clz32?Math.clz32:Kt,ms=Math.log,ks=Math.LN2;function Kt(n){return n>>>=0,n===0?32:31-(ms(n)/ks|0)|0}var bn=256,Rt=262144,vt=4194304;function Zt(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Bt(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~p,u!==0?m=Zt(u):(v&=E,v!==0?m=Zt(v):o||(o=E&~n,o!==0&&(m=Zt(o))))):(E=u&~p,E!==0?m=Zt(E):v!==0?m=Zt(v):o||(o=u&~n,o!==0&&(m=Zt(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Ln(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function gs(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var n=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),n}function es(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function fe(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function je(n,a,o,u,m,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,M=n.expirationTimes,X=n.hiddenUpdates;for(o=v&~o;0<o;){var ie=31-st(o),he=1<<ie;E[ie]=0,M[ie]=-1;var J=X[ie];if(J!==null)for(X[ie]=null,ie=0;ie<J.length;ie++){var ne=J[ie];ne!==null&&(ne.lane&=-536870913)}o&=~he}u!==0&&ve(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~a))}function ve(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-st(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Re(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-st(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function Pe(n,a){var o=a&-a;return o=(o&42)!==0?1:Oe(o),(o&(n.suspendedLanes|a))!==0?0:o}function Oe(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $e(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function kt(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:Zv(n.type))}function Ze(n,a){var o=ce.p;try{return ce.p=n,a()}finally{ce.p=o}}var mt=Math.random().toString(36).slice(2),gt="__reactFiber$"+mt,on="__reactProps$"+mt,wr="__reactContainer$"+mt,ql="__reactEvents$"+mt,Xm="__reactListeners$"+mt,Bd="__reactHandles$"+mt,qd="__reactResources$"+mt,_r="__reactMarker$"+mt;function Fl(n){delete n[gt],delete n[on],delete n[ql],delete n[Xm],delete n[Bd]}function Nr(n){var a=n[gt];if(a)return a;for(var o=n.parentNode;o;){if(a=o[wr]||o[gt]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=Pv(n);n!==null;){if(o=n[gt])return o;n=Pv(n)}return a}n=o,o=n.parentNode}return null}function Ds(n){if(n=n[gt]||n[wr]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function ps(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function jr(n){var a=n[qd];return a||(a=n[qd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function cn(n){n[_r]=!0}var Tc=new Set,Sc={};function Er(n,a){Tr(n,a),Tr(n+"Capture",a)}function Tr(n,a){for(Sc[n]=a,n=0;n<a.length;n++)Tc.add(a[n])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},Cc={};function Fd(n){return zt.call(Cc,n)?!0:zt.call(Ic,n)?!1:Ac.test(n)?Cc[n]=!0:(Ic[n]=!0,!1)}function Hl(n,a,o){if(Fd(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function xs(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function un(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function jn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Da(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Rc(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function wt(n){if(!n._valueTracker){var a=Da(n)?"checked":"value";n._valueTracker=Rc(n,a,""+n[a])}}function zi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Da(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function Sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ui=/[\n"\\]/g;function ts(n){return n.replace(Ui,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Gl(n,a,o,u,m,p,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),a!=null?v==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+jn(a)):n.value!==""+jn(a)&&(n.value=""+jn(a)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),a!=null?kc(n,v,jn(a)):o!=null?kc(n,v,jn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+jn(E):n.removeAttribute("name")}function Hd(n,a,o,u,m,p,v,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){wt(n);return}o=o!=null?""+jn(o):"",a=a!=null?""+jn(a):o,E||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),wt(n)}function kc(n,a,o){a==="number"&&Sr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Oa(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+jn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Gd(n,a,o){if(a!=null&&(a=""+jn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+jn(o):""}function Ma(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(ke(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=jn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),wt(n)}function ns(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var $d=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||$d.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function Oc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Dc(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Dc(n,p,a[p])}function $l(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(n){return Va.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function tr(){}var Mc=null;function Os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pa=null,Ar=null;function Bi(n){var a=Ds(n);if(a&&(n=a.stateNode)){var o=n[on]||null;e:switch(n=a.stateNode,a.type){case"input":if(Gl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ts(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[on]||null;if(!m)throw Error(s(90));Gl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&zi(u)}break e;case"textarea":Gd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Oa(n,!!o.multiple,a,!1)}}}var Ql=!1;function La(n,a,o){if(Ql)return n(a,o);Ql=!0;try{var u=n(a);return u}finally{if(Ql=!1,(Pa!==null||Ar!==null)&&(Uh(),Pa&&(a=Pa,n=Ar,Ar=Pa=null,Bi(a),n)))for(a=0;a<n.length;a++)Bi(n[a])}}function nr(n,a){var o=n.stateNode;if(o===null)return null;var u=o[on]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qi=!1;if(Ms)try{var St={};Object.defineProperty(St,"passive",{get:function(){qi=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{qi=!1}var Ir=null,Vc=null,Fi=null;function Pc(){if(Fi)return Fi;var n,a=Vc,o=a.length,u,m="value"in Ir?Ir.value:Ir.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var v=o-n;for(u=1;u<=v&&a[o-u]===m[p-u];u++);return Fi=m.slice(n,1<u?1-u:void 0)}function Hi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Jr(){return!0}function sr(){return!1}function Cn(n){function a(o,u,m,p,v){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jr:sr,this.isPropagationStopped=sr,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),a}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cr=Cn(Wr),za=b({},Wr,{view:0,detail:0}),Lc=Cn(za),Ua,Xl,Rr,Yl=b({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rr&&(Rr&&n.type==="mousemove"?(Ua=n.screenX-Rr.screenX,Xl=n.screenY-Rr.screenY):Xl=Ua=0,Rr=n),Ua)},movementY:function(n){return"movementY"in n?n.movementY:Xl}}),zc=Cn(Yl),Gi=b({},Yl,{dataTransfer:0}),Qd=Cn(Gi),Xd=b({},za,{relatedTarget:0}),$i=Cn(Xd),Uc=b({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yd=Cn(Uc),Jl=b({},Wr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Jd=Cn(Jl),Wd=b({},Wr,{data:0}),kr=Cn(Wd),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=th[n])?!!a[n]:!1}function Ba(){return nh}var Qn=b({},za,{key:function(n){if(n.key){var a=Zd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?eh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sh=Cn(Qn),rh=b({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=Cn(rh),h=b({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),y=Cn(h),_=b({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Cn(_),H=b({},Yl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=Cn(H),we=b({},Wr,{newState:0,oldState:0}),Ye=Cn(we),en=[9,13,27,32],pt=Ms&&"CompositionEvent"in window,qt=null;Ms&&"documentMode"in document&&(qt=document.documentMode);var Vs=Ms&&"TextEvent"in window&&!qt,Dr=Ms&&(!pt||qt&&8<qt&&11>=qt),rr=" ",ar=!1;function Ki(n,a){switch(n){case"keyup":return en.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zl=!1;function J5(n,a){switch(n){case"compositionend":return Wl(a);case"keypress":return a.which!==32?null:(ar=!0,rr);case"textInput":return n=a.data,n===rr&&ar?null:n;default:return null}}function W5(n,a){if(Zl)return n==="compositionend"||!pt&&Ki(n,a)?(n=Pc(),Fi=Vc=Ir=null,Zl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Dr&&a.locale!=="ko"?null:a.data;default:return null}}var Z5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Z5[n.type]:a==="textarea"}function By(n,a,o,u){Pa?Ar?Ar.push(u):Ar=[u]:Pa=u,a=Kh(a,"onChange"),0<a.length&&(o=new Cr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Bc=null,qc=null;function eE(n){Nv(n,0)}function ah(n){var a=ps(n);if(zi(a))return n}function qy(n,a){if(n==="change")return a}var Fy=!1;if(Ms){var Ym;if(Ms){var Jm="oninput"in document;if(!Jm){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),Jm=typeof Hy.oninput=="function"}Ym=Jm}else Ym=!1;Fy=Ym&&(!document.documentMode||9<document.documentMode)}function Gy(){Bc&&(Bc.detachEvent("onpropertychange",$y),qc=Bc=null)}function $y(n){if(n.propertyName==="value"&&ah(qc)){var a=[];By(a,qc,n,Os(n)),La(eE,a)}}function tE(n,a,o){n==="focusin"?(Gy(),Bc=a,qc=o,Bc.attachEvent("onpropertychange",$y)):n==="focusout"&&Gy()}function nE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ah(qc)}function sE(n,a){if(n==="click")return ah(a)}function rE(n,a){if(n==="input"||n==="change")return ah(a)}function aE(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var ys=typeof Object.is=="function"?Object.is:aE;function Fc(n,a){if(ys(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!zt.call(a,m)||!ys(n[m],a[m]))return!1}return!0}function Ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qy(n,a){var o=Ky(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ky(o)}}function Xy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Xy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Yy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Sr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=Sr(n.document)}return a}function Wm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var iE=Ms&&"documentMode"in document&&11>=document.documentMode,eo=null,Zm=null,Hc=null,e0=!1;function Jy(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;e0||eo==null||eo!==Sr(u)||(u=eo,"selectionStart"in u&&Wm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Hc&&Fc(Hc,u)||(Hc=u,u=Kh(Zm,"onSelect"),0<u.length&&(a=new Cr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=eo)))}function Qi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var to={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},t0={},Wy={};Ms&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Xi(n){if(t0[n])return t0[n];if(!to[n])return n;var a=to[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in Wy)return t0[n]=a[o];return n}var Zy=Xi("animationend"),eb=Xi("animationiteration"),tb=Xi("animationstart"),lE=Xi("transitionrun"),oE=Xi("transitionstart"),cE=Xi("transitioncancel"),nb=Xi("transitionend"),sb=new Map,n0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");n0.push("scrollEnd");function ir(n,a){sb.set(n,a),Er(a,[n])}var ih=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ps=[],no=0,s0=0;function lh(){for(var n=no,a=s0=no=0;a<n;){var o=Ps[a];Ps[a++]=null;var u=Ps[a];Ps[a++]=null;var m=Ps[a];Ps[a++]=null;var p=Ps[a];if(Ps[a++]=null,u!==null&&m!==null){var v=u.pending;v===null?m.next=m:(m.next=v.next,v.next=m),u.pending=m}p!==0&&rb(o,m,p)}}function oh(n,a,o,u){Ps[no++]=n,Ps[no++]=a,Ps[no++]=o,Ps[no++]=u,s0|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function r0(n,a,o,u){return oh(n,a,o,u),ch(n)}function Yi(n,a){return oh(n,null,null,a),ch(n)}function rb(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-st(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function ch(n){if(50<hu)throw hu=0,fg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var so={};function uE(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(n,a,o,u){return new uE(n,a,o,u)}function a0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ea(n,a){var o=n.alternate;return o===null?(o=bs(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ab(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function uh(n,a,o,u,m,p){var v=0;if(u=n,typeof n=="function")a0(n)&&(v=1);else if(typeof n=="string")v=gT(n,o,Q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=bs(31,o,a,m),n.elementType=A,n.lanes=p,n;case V:return Ji(o.children,m,p,a);case F:v=8,m|=24;break;case U:return n=bs(12,o,a,m|2),n.elementType=U,n.lanes=p,n;case W:return n=bs(13,o,a,m),n.elementType=W,n.lanes=p,n;case se:return n=bs(19,o,a,m),n.elementType=se,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:v=10;break e;case ae:v=9;break e;case de:v=11;break e;case j:v=14;break e;case T:v=16,u=null;break e}v=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=bs(v,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function Ji(n,a,o,u){return n=bs(7,n,u,a),n.lanes=o,n}function i0(n,a,o){return n=bs(6,n,null,a),n.lanes=o,n}function ib(n){var a=bs(18,null,null,0);return a.stateNode=n,a}function l0(n,a,o){return a=bs(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var lb=new WeakMap;function Ls(n,a){if(typeof n=="object"&&n!==null){var o=lb.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Ys(a)},lb.set(n,a),a)}return{value:n,source:a,stack:Ys(a)}}var ro=[],ao=0,dh=null,Gc=0,zs=[],Us=0,qa=null,Or=1,Mr="";function ta(n,a){ro[ao++]=Gc,ro[ao++]=dh,dh=n,Gc=a}function ob(n,a,o){zs[Us++]=Or,zs[Us++]=Mr,zs[Us++]=qa,qa=n;var u=Or;n=Mr;var m=32-st(u)-1;u&=~(1<<m),o+=1;var p=32-st(a)+m;if(30<p){var v=m-m%5;p=(u&(1<<v)-1).toString(32),u>>=v,m-=v,Or=1<<32-st(a)+m|o<<m|u,Mr=p+n}else Or=1<<p|o<<m|u,Mr=n}function o0(n){n.return!==null&&(ta(n,1),ob(n,1,0))}function c0(n){for(;n===dh;)dh=ro[--ao],ro[ao]=null,Gc=ro[--ao],ro[ao]=null;for(;n===qa;)qa=zs[--Us],zs[Us]=null,Mr=zs[--Us],zs[Us]=null,Or=zs[--Us],zs[Us]=null}function cb(n,a){zs[Us++]=Or,zs[Us++]=Mr,zs[Us++]=qa,Or=a.id,Mr=a.overflow,qa=n}var Rn=null,Pt=null,ot=!1,Fa=null,Bs=!1,u0=Error(s(519));function Ha(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $c(Ls(a,n)),u0}function ub(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[gt]=n,a[on]=u,o){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(o=0;o<mu.length;o++)nt(mu[o],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),Hd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Ma(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||Sv(a.textContent,o)?(u.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),u.onScroll!=null&&nt("scroll",a),u.onScrollEnd!=null&&nt("scrollend",a),u.onClick!=null&&(a.onclick=tr),a=!0):a=!1,a||Ha(n,!0)}function db(n){for(Rn=n.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:Rn=Rn.return}}function io(n){if(n!==Rn)return!1;if(!ot)return db(n),ot=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ag(n.type,n.memoizedProps)),o=!o),o&&Pt&&Ha(n),db(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=Vv(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Pt=Vv(n)}else a===27?(a=Pt,ri(n.type)?(n=Dg,Dg=null,Pt=n):Pt=a):Pt=Rn?Fs(n.stateNode.nextSibling):null;return!0}function Wi(){Pt=Rn=null,ot=!1}function d0(){var n=Fa;return n!==null&&(is===null?is=n:is.push.apply(is,n),Fa=null),n}function $c(n){Fa===null?Fa=[n]:Fa.push(n)}var h0=I(null),Zi=null,na=null;function Ga(n,a,o){P(h0,a._currentValue),a._currentValue=o}function sa(n){n._currentValue=h0.current,Z(h0)}function f0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function m0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=m;for(var M=0;M<a.length;M++)if(E.context===a[M]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),f0(p.return,o,n),u||(v=null);break e}p=E.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(s(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),f0(v,o,n),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===n){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function lo(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=m.type;ys(m.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(m===ue.current){if(v=m.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(bu):n=[bu])}m=m.return}n!==null&&m0(a,n,o,u),a.flags|=262144}function hh(n){for(n=n.firstContext;n!==null;){if(!ys(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function el(n){Zi=n,na=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function kn(n){return hb(Zi,n)}function fh(n,a){return Zi===null&&el(n),hb(n,a)}function hb(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},na===null){if(n===null)throw Error(s(308));na=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else na=na.next=a;return o}var dE=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},hE=r.unstable_scheduleCallback,fE=r.unstable_NormalPriority,dn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function g0(){return{controller:new dE,data:new Map,refCount:0}}function Kc(n){n.refCount--,n.refCount===0&&hE(fE,function(){n.controller.abort()})}var Qc=null,p0=0,oo=0,co=null;function mE(n,a){if(Qc===null){var o=Qc=[];p0=0,oo=bg(),co={status:"pending",value:void 0,then:function(u){o.push(u)}}}return p0++,a.then(fb,fb),a}function fb(){if(--p0===0&&Qc!==null){co!==null&&(co.status="fulfilled");var n=Qc;Qc=null,oo=0,co=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function gE(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var mb=G.S;G.S=function(n,a){J1=ln(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&mE(n,a),mb!==null&&mb(n,a)};var tl=I(null);function x0(){var n=tl.current;return n!==null?n:Dt.pooledCache}function mh(n,a){a===null?P(tl,tl.current):P(tl,a.pool)}function gb(){var n=x0();return n===null?null:{parent:dn._currentValue,pool:n}}var uo=Error(s(460)),y0=Error(s(474)),gh=Error(s(542)),ph={then:function(){}};function pb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function xb(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(tr,tr),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,bb(n),n;default:if(typeof a.status=="string")a.then(tr,tr);else{if(n=Dt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,bb(n),n}throw sl=a,uo}}function nl(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(sl=o,uo):o}}var sl=null;function yb(){if(sl===null)throw Error(s(459));var n=sl;return sl=null,n}function bb(n){if(n===uo||n===gh)throw Error(s(483))}var ho=null,Xc=0;function xh(n){var a=Xc;return Xc+=1,ho===null&&(ho=[]),xb(ho,n,a)}function Yc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function yh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function vb(n){function a(B,z){if(n){var K=B.deletions;K===null?(B.deletions=[z],B.flags|=16):K.push(z)}}function o(B,z){if(!n)return null;for(;z!==null;)a(B,z),z=z.sibling;return null}function u(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function m(B,z){return B=ea(B,z),B.index=0,B.sibling=null,B}function p(B,z,K){return B.index=K,n?(K=B.alternate,K!==null?(K=K.index,K<z?(B.flags|=67108866,z):K):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function v(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function E(B,z,K,oe){return z===null||z.tag!==6?(z=i0(K,B.mode,oe),z.return=B,z):(z=m(z,K),z.return=B,z)}function M(B,z,K,oe){var Me=K.type;return Me===V?ie(B,z,K.props.children,oe,K.key):z!==null&&(z.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===T&&nl(Me)===z.type)?(z=m(z,K.props),Yc(z,K),z.return=B,z):(z=uh(K.type,K.key,K.props,null,B.mode,oe),Yc(z,K),z.return=B,z)}function X(B,z,K,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=l0(K,B.mode,oe),z.return=B,z):(z=m(z,K.children||[]),z.return=B,z)}function ie(B,z,K,oe,Me){return z===null||z.tag!==7?(z=Ji(K,B.mode,oe,Me),z.return=B,z):(z=m(z,K),z.return=B,z)}function he(B,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=i0(""+z,B.mode,K),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return K=uh(z.type,z.key,z.props,null,B.mode,K),Yc(K,z),K.return=B,K;case Y:return z=l0(z,B.mode,K),z.return=B,z;case T:return z=nl(z),he(B,z,K)}if(ke(z)||L(z))return z=Ji(z,B.mode,K,null),z.return=B,z;if(typeof z.then=="function")return he(B,xh(z),K);if(z.$$typeof===$)return he(B,fh(B,z),K);yh(B,z)}return null}function J(B,z,K,oe){var Me=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Me!==null?null:E(B,z,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Me?M(B,z,K,oe):null;case Y:return K.key===Me?X(B,z,K,oe):null;case T:return K=nl(K),J(B,z,K,oe)}if(ke(K)||L(K))return Me!==null?null:ie(B,z,K,oe,null);if(typeof K.then=="function")return J(B,z,xh(K),oe);if(K.$$typeof===$)return J(B,z,fh(B,K),oe);yh(B,K)}return null}function ne(B,z,K,oe,Me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return B=B.get(K)||null,E(z,B,""+oe,Me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case C:return B=B.get(oe.key===null?K:oe.key)||null,M(z,B,oe,Me);case Y:return B=B.get(oe.key===null?K:oe.key)||null,X(z,B,oe,Me);case T:return oe=nl(oe),ne(B,z,K,oe,Me)}if(ke(oe)||L(oe))return B=B.get(K)||null,ie(z,B,oe,Me,null);if(typeof oe.then=="function")return ne(B,z,K,xh(oe),Me);if(oe.$$typeof===$)return ne(B,z,K,fh(z,oe),Me);yh(z,oe)}return null}function Ae(B,z,K,oe){for(var Me=null,dt=null,Ce=z,We=z=0,at=null;Ce!==null&&We<K.length;We++){Ce.index>We?(at=Ce,Ce=null):at=Ce.sibling;var ht=J(B,Ce,K[We],oe);if(ht===null){Ce===null&&(Ce=at);break}n&&Ce&&ht.alternate===null&&a(B,Ce),z=p(ht,z,We),dt===null?Me=ht:dt.sibling=ht,dt=ht,Ce=at}if(We===K.length)return o(B,Ce),ot&&ta(B,We),Me;if(Ce===null){for(;We<K.length;We++)Ce=he(B,K[We],oe),Ce!==null&&(z=p(Ce,z,We),dt===null?Me=Ce:dt.sibling=Ce,dt=Ce);return ot&&ta(B,We),Me}for(Ce=u(Ce);We<K.length;We++)at=ne(Ce,B,We,K[We],oe),at!==null&&(n&&at.alternate!==null&&Ce.delete(at.key===null?We:at.key),z=p(at,z,We),dt===null?Me=at:dt.sibling=at,dt=at);return n&&Ce.forEach(function(ci){return a(B,ci)}),ot&&ta(B,We),Me}function Le(B,z,K,oe){if(K==null)throw Error(s(151));for(var Me=null,dt=null,Ce=z,We=z=0,at=null,ht=K.next();Ce!==null&&!ht.done;We++,ht=K.next()){Ce.index>We?(at=Ce,Ce=null):at=Ce.sibling;var ci=J(B,Ce,ht.value,oe);if(ci===null){Ce===null&&(Ce=at);break}n&&Ce&&ci.alternate===null&&a(B,Ce),z=p(ci,z,We),dt===null?Me=ci:dt.sibling=ci,dt=ci,Ce=at}if(ht.done)return o(B,Ce),ot&&ta(B,We),Me;if(Ce===null){for(;!ht.done;We++,ht=K.next())ht=he(B,ht.value,oe),ht!==null&&(z=p(ht,z,We),dt===null?Me=ht:dt.sibling=ht,dt=ht);return ot&&ta(B,We),Me}for(Ce=u(Ce);!ht.done;We++,ht=K.next())ht=ne(Ce,B,We,ht.value,oe),ht!==null&&(n&&ht.alternate!==null&&Ce.delete(ht.key===null?We:ht.key),z=p(ht,z,We),dt===null?Me=ht:dt.sibling=ht,dt=ht);return n&&Ce.forEach(function(TT){return a(B,TT)}),ot&&ta(B,We),Me}function Ct(B,z,K,oe){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Me=K.key;z!==null;){if(z.key===Me){if(Me=K.type,Me===V){if(z.tag===7){o(B,z.sibling),oe=m(z,K.props.children),oe.return=B,B=oe;break e}}else if(z.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===T&&nl(Me)===z.type){o(B,z.sibling),oe=m(z,K.props),Yc(oe,K),oe.return=B,B=oe;break e}o(B,z);break}else a(B,z);z=z.sibling}K.type===V?(oe=Ji(K.props.children,B.mode,oe,K.key),oe.return=B,B=oe):(oe=uh(K.type,K.key,K.props,null,B.mode,oe),Yc(oe,K),oe.return=B,B=oe)}return v(B);case Y:e:{for(Me=K.key;z!==null;){if(z.key===Me)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){o(B,z.sibling),oe=m(z,K.children||[]),oe.return=B,B=oe;break e}else{o(B,z);break}else a(B,z);z=z.sibling}oe=l0(K,B.mode,oe),oe.return=B,B=oe}return v(B);case T:return K=nl(K),Ct(B,z,K,oe)}if(ke(K))return Ae(B,z,K,oe);if(L(K)){if(Me=L(K),typeof Me!="function")throw Error(s(150));return K=Me.call(K),Le(B,z,K,oe)}if(typeof K.then=="function")return Ct(B,z,xh(K),oe);if(K.$$typeof===$)return Ct(B,z,fh(B,K),oe);yh(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(o(B,z.sibling),oe=m(z,K),oe.return=B,B=oe):(o(B,z),oe=i0(K,B.mode,oe),oe.return=B,B=oe),v(B)):o(B,z)}return function(B,z,K,oe){try{Xc=0;var Me=Ct(B,z,K,oe);return ho=null,Me}catch(Ce){if(Ce===uo||Ce===gh)throw Ce;var dt=bs(29,Ce,null,B.mode);return dt.lanes=oe,dt.return=B,dt}finally{}}}var rl=vb(!0),wb=vb(!1),$a=!1;function b0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function v0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ka(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Qa(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=ch(n),rb(n,null,o),a}return oh(n,u,a,o),ch(n)}function Jc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Re(n,o)}}function w0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var _0=!1;function Wc(){if(_0){var n=co;if(n!==null)throw n}}function Zc(n,a,o,u){_0=!1;var m=n.updateQueue;$a=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var M=E,X=M.next;M.next=null,v===null?p=X:v.next=X,v=M;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,E=ie.lastBaseUpdate,E!==v&&(E===null?ie.firstBaseUpdate=X:E.next=X,ie.lastBaseUpdate=M))}if(p!==null){var he=m.baseState;v=0,ie=X=M=null,E=p;do{var J=E.lane&-536870913,ne=J!==E.lane;if(ne?(rt&J)===J:(u&J)===J){J!==0&&J===oo&&(_0=!0),ie!==null&&(ie=ie.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ae=n,Le=E;J=a;var Ct=o;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){he=Ae.call(Ct,he,J);break e}he=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,J=typeof Ae=="function"?Ae.call(Ct,he,J):Ae,J==null)break e;he=b({},he,J);break e;case 2:$a=!0}}J=E.callback,J!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ie===null?(X=ie=ne,M=he):ie=ie.next=ne,v|=J;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;ne=E,E=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ie===null&&(M=he),m.baseState=M,m.firstBaseUpdate=X,m.lastBaseUpdate=ie,p===null&&(m.shared.lanes=0),Za|=v,n.lanes=v,n.memoizedState=he}}function _b(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function Nb(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)_b(o[n],a)}var fo=I(null),bh=I(0);function jb(n,a){n=ha,P(bh,n),P(fo,a),ha=n|a.baseLanes}function N0(){P(bh,ha),P(fo,fo.current)}function j0(){ha=bh.current,Z(fo),Z(bh)}var vs=I(null),qs=null;function Xa(n){var a=n.alternate;P(tn,tn.current&1),P(vs,n),qs===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(qs=n)}function E0(n){P(tn,tn.current),P(vs,n),qs===null&&(qs=n)}function Eb(n){n.tag===22?(P(tn,tn.current),P(vs,n),qs===null&&(qs=n)):Ya()}function Ya(){P(tn,tn.current),P(vs,vs.current)}function ws(n){Z(vs),qs===n&&(qs=null),Z(tn)}var tn=I(0);function vh(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rg(o)||kg(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ra=0,Je=null,At=null,hn=null,wh=!1,mo=!1,al=!1,_h=0,eu=0,go=null,pE=0;function Qt(){throw Error(s(321))}function T0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!ys(n[o],a[o]))return!1;return!0}function S0(n,a,o,u,m,p){return ra=p,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=n===null||n.memoizedState===null?o1:q0,al=!1,p=o(u,m),al=!1,mo&&(p=Sb(a,o,u,m)),Tb(n),p}function Tb(n){G.H=su;var a=At!==null&&At.next!==null;if(ra=0,hn=At=Je=null,wh=!1,eu=0,go=null,a)throw Error(s(300));n===null||fn||(n=n.dependencies,n!==null&&hh(n)&&(fn=!0))}function Sb(n,a,o,u){Je=n;var m=0;do{if(mo&&(go=null),eu=0,mo=!1,25<=m)throw Error(s(301));if(m+=1,hn=At=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}G.H=c1,p=a(o,u)}while(mo);return p}function xE(){var n=G.H,a=n.useState()[0];return a=typeof a.then=="function"?tu(a):a,n=n.useState()[0],(At!==null?At.memoizedState:null)!==n&&(Je.flags|=1024),a}function A0(){var n=_h!==0;return _h=0,n}function I0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function C0(n){if(wh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}wh=!1}ra=0,hn=At=Je=null,mo=!1,eu=_h=0,go=null}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Je.memoizedState=hn=n:hn=hn.next=n,hn}function nn(){if(At===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var a=hn===null?Je.memoizedState:hn.next;if(a!==null)hn=a,At=n;else{if(n===null)throw Je.alternate===null?Error(s(467)):Error(s(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},hn===null?Je.memoizedState=hn=n:hn=hn.next=n}return hn}function Nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(n){var a=eu;return eu+=1,go===null&&(go=[]),n=xb(go,n,a),a=Je,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?o1:q0),n}function jh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return tu(n);if(n.$$typeof===$)return kn(n)}throw Error(s(438,String(n)))}function R0(n){var a=null,o=Je.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Nh(),Je.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=R;return a.index++,o}function aa(n,a){return typeof a=="function"?a(n):a}function Eh(n){var a=nn();return k0(a,At,n)}function k0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var E=v=null,M=null,X=a,ie=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(rt&he)===he:(ra&he)===he){var J=X.revertLane;if(J===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===oo&&(ie=!0);else if((ra&J)===J){X=X.next,J===oo&&(ie=!0);continue}else he={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(E=M=he,v=p):M=M.next=he,Je.lanes|=J,Za|=J;he=X.action,al&&o(p,he),p=X.hasEagerState?X.eagerState:o(p,he)}else J={lane:he,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(E=M=J,v=p):M=M.next=J,Je.lanes|=he,Za|=he;X=X.next}while(X!==null&&X!==a);if(M===null?v=p:M.next=E,!ys(p,n.memoizedState)&&(fn=!0,ie&&(o=co,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=M,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function D0(n){var a=nn(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var v=m=m.next;do p=n(p,v.action),v=v.next;while(v!==m);ys(p,a.memoizedState)||(fn=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function Ab(n,a,o){var u=Je,m=nn(),p=ot;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var v=!ys((At||m).memoizedState,o);if(v&&(m.memoizedState=o,fn=!0),m=m.queue,V0(Rb.bind(null,u,m,n),[n]),m.getSnapshot!==a||v||hn!==null&&hn.memoizedState.tag&1){if(u.flags|=2048,po(9,{destroy:void 0},Cb.bind(null,u,m,o,a),null),Dt===null)throw Error(s(349));p||(ra&127)!==0||Ib(u,a,o)}return o}function Ib(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=Je.updateQueue,a===null?(a=Nh(),Je.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function Cb(n,a,o,u){a.value=o,a.getSnapshot=u,kb(a)&&Db(n)}function Rb(n,a,o){return o(function(){kb(a)&&Db(n)})}function kb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!ys(n,o)}catch{return!0}}function Db(n){var a=Yi(n,2);a!==null&&ls(a,n,2)}function O0(n){var a=Xn();if(typeof n=="function"){var o=n;if(n=o(),al){Qe(!0);try{o()}finally{Qe(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:n},a}function Ob(n,a,o,u){return n.baseState=o,k0(n,At,typeof u=="function"?u:aa)}function yE(n,a,o,u,m){if(Ah(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};G.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,Mb(a,p)):(p.next=o.next,a.pending=o.next=p)}}function Mb(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=G.T,v={};G.T=v;try{var E=o(m,u),M=G.S;M!==null&&M(v,E),Vb(n,a,E)}catch(X){M0(n,a,X)}finally{p!==null&&v.types!==null&&(p.types=v.types),G.T=p}}else try{p=o(m,u),Vb(n,a,p)}catch(X){M0(n,a,X)}}function Vb(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Pb(n,a,u)},function(u){return M0(n,a,u)}):Pb(n,a,o)}function Pb(n,a,o){a.status="fulfilled",a.value=o,Lb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Mb(n,o)))}function M0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Lb(a),a=a.next;while(a!==u)}n.action=null}function Lb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function zb(n,a){return a}function Ub(n,a){if(ot){var o=Dt.formState;if(o!==null){e:{var u=Je;if(ot){if(Pt){t:{for(var m=Pt,p=Bs;m.nodeType!==8;){if(!p){m=null;break t}if(m=Fs(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Pt=Fs(m.nextSibling),u=m.data==="F!";break e}}Ha(u)}u=!1}u&&(a=o[0])}}return o=Xn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zb,lastRenderedState:a},o.queue=u,o=a1.bind(null,Je,u),u.dispatch=o,u=O0(!1),p=B0.bind(null,Je,!1,u.queue),u=Xn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=yE.bind(null,Je,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Bb(n){var a=nn();return qb(a,At,n)}function qb(n,a,o){if(a=k0(n,a,zb)[0],n=Eh(aa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=tu(a)}catch(v){throw v===uo?gh:v}else u=a;a=nn();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&(Je.flags|=2048,po(9,{destroy:void 0},bE.bind(null,m,o),null)),[u,p,n]}function bE(n,a){n.action=a}function Fb(n){var a=nn(),o=At;if(o!==null)return qb(a,o,n);nn(),a=a.memoizedState,o=nn();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function po(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=Je.updateQueue,a===null&&(a=Nh(),Je.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Hb(){return nn().memoizedState}function Th(n,a,o,u){var m=Xn();Je.flags|=n,m.memoizedState=po(1|a,{destroy:void 0},o,u===void 0?null:u)}function Sh(n,a,o,u){var m=nn();u=u===void 0?null:u;var p=m.memoizedState.inst;At!==null&&u!==null&&T0(u,At.memoizedState.deps)?m.memoizedState=po(a,p,o,u):(Je.flags|=n,m.memoizedState=po(1|a,p,o,u))}function Gb(n,a){Th(8390656,8,n,a)}function V0(n,a){Sh(2048,8,n,a)}function vE(n){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=Nh(),Je.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function $b(n){var a=nn().memoizedState;return vE({ref:a,nextImpl:n}),function(){if((xt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Kb(n,a){return Sh(4,2,n,a)}function Qb(n,a){return Sh(4,4,n,a)}function Xb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Yb(n,a,o){o=o!=null?o.concat([n]):null,Sh(4,4,Xb.bind(null,a,n),o)}function P0(){}function Jb(n,a){var o=nn();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&T0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function Wb(n,a){var o=nn();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&T0(a,u[1]))return u[0];if(u=n(),al){Qe(!0);try{n()}finally{Qe(!1)}}return o.memoizedState=[u,a],u}function L0(n,a,o){return o===void 0||(ra&1073741824)!==0&&(rt&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Z1(),Je.lanes|=n,Za|=n,o)}function Zb(n,a,o,u){return ys(o,a)?o:fo.current!==null?(n=L0(n,o,u),ys(n,a)||(fn=!0),n):(ra&42)===0||(ra&1073741824)!==0&&(rt&261930)===0?(fn=!0,n.memoizedState=o):(n=Z1(),Je.lanes|=n,Za|=n,a)}function e1(n,a,o,u,m){var p=ce.p;ce.p=p!==0&&8>p?p:8;var v=G.T,E={};G.T=E,B0(n,!1,a,o);try{var M=m(),X=G.S;if(X!==null&&X(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ie=gE(M,u);nu(n,a,ie,js(n))}else nu(n,a,u,js(n))}catch(he){nu(n,a,{then:function(){},status:"rejected",reason:he},js())}finally{ce.p=p,v!==null&&E.types!==null&&(v.types=E.types),G.T=v}}function wE(){}function z0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=t1(n).queue;e1(n,m,a,te,o===null?wE:function(){return n1(n),o(u)})}function t1(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:te},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function n1(n){var a=t1(n);a.next===null&&(a=n.alternate.memoizedState),nu(n,a.next.queue,{},js())}function U0(){return kn(bu)}function s1(){return nn().memoizedState}function r1(){return nn().memoizedState}function _E(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=js();n=Ka(o);var u=Qa(a,n,o);u!==null&&(ls(u,a,o),Jc(u,a,o)),a={cache:g0()},n.payload=a;return}a=a.return}}function NE(n,a,o){var u=js();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ah(n)?i1(a,o):(o=r0(n,a,o,u),o!==null&&(ls(o,n,u),l1(o,a,u)))}function a1(n,a,o){var u=js();nu(n,a,o,u)}function nu(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ah(n))i1(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,E=p(v,o);if(m.hasEagerState=!0,m.eagerState=E,ys(E,v))return oh(n,a,m,0),Dt===null&&lh(),!1}catch{}finally{}if(o=r0(n,a,m,u),o!==null)return ls(o,n,u),l1(o,a,u),!0}return!1}function B0(n,a,o,u){if(u={lane:2,revertLane:bg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ah(n)){if(a)throw Error(s(479))}else a=r0(n,o,u,2),a!==null&&ls(a,n,2)}function Ah(n){var a=n.alternate;return n===Je||a!==null&&a===Je}function i1(n,a){mo=wh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function l1(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Re(n,o)}}var su={readContext:kn,use:jh,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};su.useEffectEvent=Qt;var o1={readContext:kn,use:jh,useCallback:function(n,a){return Xn().memoizedState=[n,a===void 0?null:a],n},useContext:kn,useEffect:Gb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,Th(4194308,4,Xb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return Th(4194308,4,n,a)},useInsertionEffect:function(n,a){Th(4,2,n,a)},useMemo:function(n,a){var o=Xn();a=a===void 0?null:a;var u=n();if(al){Qe(!0);try{n()}finally{Qe(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Xn();if(o!==void 0){var m=o(a);if(al){Qe(!0);try{o(a)}finally{Qe(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=NE.bind(null,Je,n),[u.memoizedState,n]},useRef:function(n){var a=Xn();return n={current:n},a.memoizedState=n},useState:function(n){n=O0(n);var a=n.queue,o=a1.bind(null,Je,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:P0,useDeferredValue:function(n,a){var o=Xn();return L0(o,n,a)},useTransition:function(){var n=O0(!1);return n=e1.bind(null,Je,n.queue,!0,!1),Xn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=Je,m=Xn();if(ot){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),Dt===null)throw Error(s(349));(rt&127)!==0||Ib(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,Gb(Rb.bind(null,u,p,n),[n]),u.flags|=2048,po(9,{destroy:void 0},Cb.bind(null,u,p,o,a),null),o},useId:function(){var n=Xn(),a=Dt.identifierPrefix;if(ot){var o=Mr,u=Or;o=(u&~(1<<32-st(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=_h++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=pE++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:U0,useFormState:Ub,useActionState:Ub,useOptimistic:function(n){var a=Xn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=B0.bind(null,Je,!0,o),o.dispatch=a,[n,a]},useMemoCache:R0,useCacheRefresh:function(){return Xn().memoizedState=_E.bind(null,Je)},useEffectEvent:function(n){var a=Xn(),o={impl:n};return a.memoizedState=o,function(){if((xt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},q0={readContext:kn,use:jh,useCallback:Jb,useContext:kn,useEffect:V0,useImperativeHandle:Yb,useInsertionEffect:Kb,useLayoutEffect:Qb,useMemo:Wb,useReducer:Eh,useRef:Hb,useState:function(){return Eh(aa)},useDebugValue:P0,useDeferredValue:function(n,a){var o=nn();return Zb(o,At.memoizedState,n,a)},useTransition:function(){var n=Eh(aa)[0],a=nn().memoizedState;return[typeof n=="boolean"?n:tu(n),a]},useSyncExternalStore:Ab,useId:s1,useHostTransitionStatus:U0,useFormState:Bb,useActionState:Bb,useOptimistic:function(n,a){var o=nn();return Ob(o,At,n,a)},useMemoCache:R0,useCacheRefresh:r1};q0.useEffectEvent=$b;var c1={readContext:kn,use:jh,useCallback:Jb,useContext:kn,useEffect:V0,useImperativeHandle:Yb,useInsertionEffect:Kb,useLayoutEffect:Qb,useMemo:Wb,useReducer:D0,useRef:Hb,useState:function(){return D0(aa)},useDebugValue:P0,useDeferredValue:function(n,a){var o=nn();return At===null?L0(o,n,a):Zb(o,At.memoizedState,n,a)},useTransition:function(){var n=D0(aa)[0],a=nn().memoizedState;return[typeof n=="boolean"?n:tu(n),a]},useSyncExternalStore:Ab,useId:s1,useHostTransitionStatus:U0,useFormState:Fb,useActionState:Fb,useOptimistic:function(n,a){var o=nn();return At!==null?Ob(o,At,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:R0,useCacheRefresh:r1};c1.useEffectEvent=$b;function F0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:b({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var H0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=js(),m=Ka(u);m.payload=a,o!=null&&(m.callback=o),a=Qa(n,m,u),a!==null&&(ls(a,n,u),Jc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=js(),m=Ka(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Qa(n,m,u),a!==null&&(ls(a,n,u),Jc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=js(),u=Ka(o);u.tag=2,a!=null&&(u.callback=a),a=Qa(n,u,o),a!==null&&(ls(a,n,o),Jc(a,n,o))}};function u1(n,a,o,u,m,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):a.prototype&&a.prototype.isPureReactComponent?!Fc(o,u)||!Fc(m,p):!0}function d1(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&H0.enqueueReplaceState(a,a.state,null)}function il(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=b({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function h1(n){ih(n)}function f1(n){console.error(n)}function m1(n){ih(n)}function Ih(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function g1(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function G0(n,a,o){return o=Ka(o),o.tag=3,o.payload={element:null},o.callback=function(){Ih(n,a)},o}function p1(n){return n=Ka(n),n.tag=3,n}function x1(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){g1(a,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){g1(a,o,u),typeof m!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function jE(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&lo(a,o,m,!0),o=vs.current,o!==null){switch(o.tag){case 31:case 13:return qs===null?Bh():o.alternate===null&&Xt===0&&(Xt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===ph?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),pg(n,u,m)),!1;case 22:return o.flags|=65536,u===ph?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),pg(n,u,m)),!1}throw Error(s(435,o.tag))}return pg(n,u,m),Bh(),!1}if(ot)return a=vs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==u0&&(n=Error(s(422),{cause:u}),$c(Ls(n,o)))):(u!==u0&&(a=Error(s(423),{cause:u}),$c(Ls(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Ls(u,o),m=G0(n.stateNode,u,m),w0(n,m),Xt!==4&&(Xt=2)),!1;var p=Error(s(520),{cause:u});if(p=Ls(p,o),du===null?du=[p]:du.push(p),Xt!==4&&(Xt=2),a===null)return!0;u=Ls(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=G0(o.stateNode,u,n),w0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ei===null||!ei.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=p1(m),x1(m,n,o,u),w0(o,m),!1}o=o.return}while(o!==null);return!1}var $0=Error(s(461)),fn=!1;function Dn(n,a,o,u){a.child=n===null?wb(a,null,o,u):rl(a,n.child,o,u)}function y1(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var v={};for(var E in u)E!=="ref"&&(v[E]=u[E])}else v=u;return el(a),u=S0(n,a,o,v,p,m),E=A0(),n!==null&&!fn?(I0(n,a,m),ia(n,a,m)):(ot&&E&&o0(a),a.flags|=1,Dn(n,a,u,m),a.child)}function b1(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!a0(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,v1(n,a,p,u,m)):(n=uh(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!eg(n,m)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Fc,o(v,u)&&n.ref===a.ref)return ia(n,a,m)}return a.flags|=1,n=ea(p,u),n.ref=a.ref,n.return=a,a.child=n}function v1(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Fc(p,u)&&n.ref===a.ref)if(fn=!1,a.pendingProps=u=p,eg(n,m))(n.flags&131072)!==0&&(fn=!0);else return a.lanes=n.lanes,ia(n,a,m)}return K0(n,a,o,u,m)}function w1(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return _1(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&mh(a,p!==null?p.cachePool:null),p!==null?jb(a,p):N0(),Eb(a);else return u=a.lanes=536870912,_1(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(mh(a,p.cachePool),jb(a,p),Ya(),a.memoizedState=null):(n!==null&&mh(a,null),N0(),Ya());return Dn(n,a,m,o),a.child}function ru(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function _1(n,a,o,u,m){var p=x0();return p=p===null?null:{parent:dn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&mh(a,null),N0(),Eb(a),n!==null&&lo(n,a,u,!0),a.childLanes=m,null}function Ch(n,a){return a=kh({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function N1(n,a,o){return rl(a,n.child,null,o),n=Ch(a,a.pendingProps),n.flags|=2,ws(a),a.memoizedState=null,n}function EE(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(ot){if(u.mode==="hidden")return n=Ch(a,u),a.lanes=536870912,ru(null,n);if(E0(a),(n=Pt)?(n=Mv(n,Bs),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:qa!==null?{id:Or,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=ib(n),o.return=a,a.child=o,Rn=a,Pt=null)):n=null,n===null)throw Ha(a);return a.lanes=536870912,null}return Ch(a,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(E0(a),m)if(a.flags&256)a.flags&=-257,a=N1(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(fn||lo(n,a,o,!1),m=(o&n.childLanes)!==0,fn||m){if(u=Dt,u!==null&&(v=Pe(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Yi(n,v),ls(u,n,v),$0;Bh(),a=N1(n,a,o)}else n=p.treeContext,Pt=Fs(v.nextSibling),Rn=a,ot=!0,Fa=null,Bs=!1,n!==null&&cb(a,n),a=Ch(a,u),a.flags|=4096;return a}return n=ea(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Rh(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function K0(n,a,o,u,m){return el(a),o=S0(n,a,o,u,void 0,m),u=A0(),n!==null&&!fn?(I0(n,a,m),ia(n,a,m)):(ot&&u&&o0(a),a.flags|=1,Dn(n,a,o,m),a.child)}function j1(n,a,o,u,m,p){return el(a),a.updateQueue=null,o=Sb(a,u,o,m),Tb(n),u=A0(),n!==null&&!fn?(I0(n,a,p),ia(n,a,p)):(ot&&u&&o0(a),a.flags|=1,Dn(n,a,o,p),a.child)}function E1(n,a,o,u,m){if(el(a),a.stateNode===null){var p=so,v=o.contextType;typeof v=="object"&&v!==null&&(p=kn(v)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=H0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},b0(a),v=o.contextType,p.context=typeof v=="object"&&v!==null?kn(v):so,p.state=a.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(F0(a,o,v,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&H0.enqueueReplaceState(p,p.state,null),Zc(a,u,p,m),Wc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var E=a.memoizedProps,M=il(o,E);p.props=M;var X=p.context,ie=o.contextType;v=so,typeof ie=="object"&&ie!==null&&(v=kn(ie));var he=o.getDerivedStateFromProps;ie=typeof he=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||X!==v)&&d1(a,p,u,v),$a=!1;var J=a.memoizedState;p.state=J,Zc(a,u,p,m),Wc(),X=a.memoizedState,E||J!==X||$a?(typeof he=="function"&&(F0(a,o,he,u),X=a.memoizedState),(M=$a||u1(a,o,M,u,J,X,v))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=X),p.props=u,p.state=X,p.context=v,u=M):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,v0(n,a),v=a.memoizedProps,ie=il(o,v),p.props=ie,he=a.pendingProps,J=p.context,X=o.contextType,M=so,typeof X=="object"&&X!==null&&(M=kn(X)),E=o.getDerivedStateFromProps,(X=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==he||J!==M)&&d1(a,p,u,M),$a=!1,J=a.memoizedState,p.state=J,Zc(a,u,p,m),Wc();var ne=a.memoizedState;v!==he||J!==ne||$a||n!==null&&n.dependencies!==null&&hh(n.dependencies)?(typeof E=="function"&&(F0(a,o,E,u),ne=a.memoizedState),(ie=$a||u1(a,o,ie,u,J,ne,M)||n!==null&&n.dependencies!==null&&hh(n.dependencies))?(X||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ne,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ne,M)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ne),p.props=u,p.state=ne,p.context=M,u=ie):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&J===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,Rh(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=rl(a,n.child,null,m),a.child=rl(a,null,o,m)):Dn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=ia(n,a,m),n}function T1(n,a,o,u){return Wi(),a.flags|=256,Dn(n,a,o,u),a.child}var Q0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function X0(n){return{baseLanes:n,cachePool:gb()}}function Y0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=Ns),n}function S1(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(tn.current&2)!==0),v&&(m=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,n===null){if(ot){if(m?Xa(a):Ya(),(n=Pt)?(n=Mv(n,Bs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:qa!==null?{id:Or,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=ib(n),o.return=a,a.child=o,Rn=a,Pt=null)):n=null,n===null)throw Ha(a);return kg(n)?a.lanes=32:a.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(Ya(),m=a.mode,E=kh({mode:"hidden",children:E},m),u=Ji(u,m,o,null),E.return=a,u.return=a,E.sibling=u,a.child=E,u=a.child,u.memoizedState=X0(o),u.childLanes=Y0(n,v,o),a.memoizedState=Q0,ru(null,u)):(Xa(a),J0(a,E))}var M=n.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(p)a.flags&256?(Xa(a),a.flags&=-257,a=W0(n,a,o)):a.memoizedState!==null?(Ya(),a.child=n.child,a.flags|=128,a=null):(Ya(),E=u.fallback,m=a.mode,u=kh({mode:"visible",children:u.children},m),E=Ji(E,m,o,null),E.flags|=2,u.return=a,E.return=a,u.sibling=E,a.child=u,rl(a,n.child,null,o),u=a.child,u.memoizedState=X0(o),u.childLanes=Y0(n,v,o),a.memoizedState=Q0,a=ru(null,u));else if(Xa(a),kg(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var X=v.dgst;v=X,u=Error(s(419)),u.stack="",u.digest=v,$c({value:u,source:null,stack:null}),a=W0(n,a,o)}else if(fn||lo(n,a,o,!1),v=(o&n.childLanes)!==0,fn||v){if(v=Dt,v!==null&&(u=Pe(v,o),u!==0&&u!==M.retryLane))throw M.retryLane=u,Yi(n,u),ls(v,n,u),$0;Rg(E)||Bh(),a=W0(n,a,o)}else Rg(E)?(a.flags|=192,a.child=n.child,a=null):(n=M.treeContext,Pt=Fs(E.nextSibling),Rn=a,ot=!0,Fa=null,Bs=!1,n!==null&&cb(a,n),a=J0(a,u.children),a.flags|=4096);return a}return m?(Ya(),E=u.fallback,m=a.mode,M=n.child,X=M.sibling,u=ea(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,X!==null?E=ea(X,E):(E=Ji(E,m,o,null),E.flags|=2),E.return=a,u.return=a,u.sibling=E,a.child=u,ru(null,u),u=a.child,E=n.child.memoizedState,E===null?E=X0(o):(m=E.cachePool,m!==null?(M=dn._currentValue,m=m.parent!==M?{parent:M,pool:M}:m):m=gb(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=Y0(n,v,o),a.memoizedState=Q0,ru(n.child,u)):(Xa(a),o=n.child,n=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(v=a.deletions,v===null?(a.deletions=[n],a.flags|=16):v.push(n)),a.child=o,a.memoizedState=null,o)}function J0(n,a){return a=kh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function kh(n,a){return n=bs(22,n,null,a),n.lanes=0,n}function W0(n,a,o){return rl(a,n.child,null,o),n=J0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function A1(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),f0(n.return,a,o)}function Z0(n,a,o,u,m,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=m,v.treeForkCount=p)}function I1(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var v=tn.current,E=(v&2)!==0;if(E?(v=v&1|2,a.flags|=128):v&=1,P(tn,v),Dn(n,a,u,o),u=ot?Gc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&A1(n,o,a);else if(n.tag===19)A1(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&vh(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),Z0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&vh(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Z0(a,!0,o,null,p,u);break;case"together":Z0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function ia(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Za|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(lo(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=ea(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=ea(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function eg(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&hh(n)))}function TE(n,a,o){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),Ga(a,dn,n.memoizedState.cache),Wi();break;case 27:case 5:ft(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:Ga(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,E0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Xa(a),a.flags|=128,null):(o&a.child.childLanes)!==0?S1(n,a,o):(Xa(a),n=ia(n,a,o),n!==null?n.sibling:null);Xa(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(lo(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return I1(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),P(tn,tn.current),u)break;return null;case 22:return a.lanes=0,w1(n,a,o,a.pendingProps);case 24:Ga(a,dn,n.memoizedState.cache)}return ia(n,a,o)}function C1(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)fn=!0;else{if(!eg(n,o)&&(a.flags&128)===0)return fn=!1,TE(n,a,o);fn=(n.flags&131072)!==0}else fn=!1,ot&&(a.flags&1048576)!==0&&ob(a,Gc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=nl(a.elementType),a.type=n,typeof n=="function")a0(n)?(u=il(n,u),a.tag=1,a=E1(null,a,n,u,o)):(a.tag=0,a=K0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===de){a.tag=11,a=y1(null,a,n,u,o);break e}else if(m===j){a.tag=14,a=b1(null,a,n,u,o);break e}}throw a=ge(n)||n,Error(s(306,a,""))}}return a;case 0:return K0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=il(u,a.pendingProps),E1(n,a,u,m,o);case 3:e:{if(qe(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,v0(n,a),Zc(a,u,null,o);var v=a.memoizedState;if(u=v.cache,Ga(a,dn,u),u!==p.cache&&m0(a,[dn],o,!0),Wc(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=T1(n,a,u,o);break e}else if(u!==m){m=Ls(Error(s(424)),a),$c(m),a=T1(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Pt=Fs(n.firstChild),Rn=a,ot=!0,Fa=null,Bs=!0,o=wb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Wi(),u===m){a=ia(n,a,o);break e}Dn(n,a,u,o)}a=a.child}return a;case 26:return Rh(n,a),n===null?(o=Bv(a.type,null,a.pendingProps,null))?a.memoizedState=o:ot||(o=a.type,n=a.pendingProps,u=Qh(Ee.current).createElement(o),u[gt]=a,u[on]=n,On(u,o,n),cn(u),a.stateNode=u):a.memoizedState=Bv(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return ft(a),n===null&&ot&&(u=a.stateNode=Lv(a.type,a.pendingProps,Ee.current),Rn=a,Bs=!0,m=Pt,ri(a.type)?(Dg=m,Pt=Fs(u.firstChild)):Pt=m),Dn(n,a,a.pendingProps.children,o),Rh(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&ot&&((m=u=Pt)&&(u=nT(u,a.type,a.pendingProps,Bs),u!==null?(a.stateNode=u,Rn=a,Pt=Fs(u.firstChild),Bs=!1,m=!0):m=!1),m||Ha(a)),ft(a),m=a.type,p=a.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Ag(m,p)?u=null:v!==null&&Ag(m,v)&&(a.flags|=32),a.memoizedState!==null&&(m=S0(n,a,xE,null,null,o),bu._currentValue=m),Rh(n,a),Dn(n,a,u,o),a.child;case 6:return n===null&&ot&&((n=o=Pt)&&(o=sT(o,a.pendingProps,Bs),o!==null?(a.stateNode=o,Rn=a,Pt=null,n=!0):n=!1),n||Ha(a)),null;case 13:return S1(n,a,o);case 4:return qe(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=rl(a,null,u,o):Dn(n,a,u,o),a.child;case 11:return y1(n,a,a.type,a.pendingProps,o);case 7:return Dn(n,a,a.pendingProps,o),a.child;case 8:return Dn(n,a,a.pendingProps.children,o),a.child;case 12:return Dn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Ga(a,a.type,u.value),Dn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,el(a),m=kn(m),u=u(m),a.flags|=1,Dn(n,a,u,o),a.child;case 14:return b1(n,a,a.type,a.pendingProps,o);case 15:return v1(n,a,a.type,a.pendingProps,o);case 19:return I1(n,a,o);case 31:return EE(n,a,o);case 22:return w1(n,a,o,a.pendingProps);case 24:return el(a),u=kn(dn),n===null?(m=x0(),m===null&&(m=Dt,p=g0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},b0(a),Ga(a,dn,m)):((n.lanes&o)!==0&&(v0(n,a),Zc(a,null,null,o),Wc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ga(a,dn,u)):(u=p.cache,Ga(a,dn,u),u!==m.cache&&m0(a,[dn],o,!0))),Dn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function la(n){n.flags|=4}function tg(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(sv())n.flags|=8192;else throw sl=ph,y0}else n.flags&=-16777217}function R1(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$v(a))if(sv())n.flags|=8192;else throw sl=ph,y0}function Dh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?er():536870912,n.lanes|=a,vo|=a)}function au(n,a){if(!ot)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Lt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function SE(n,a,o){var u=a.pendingProps;switch(c0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Lt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),sa(dn),ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(io(a)?la(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,d0())),Lt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(la(a),p!==null?(Lt(a),R1(a,p)):(Lt(a),tg(a,m,null,u,o))):p?p!==n.memoizedState?(la(a),Lt(a),R1(a,p)):(Lt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&la(a),Lt(a),tg(a,m,n,u,o)),null;case 27:if(Te(a),o=Ee.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&la(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Lt(a),null}n=Q.current,io(a)?ub(a):(n=Lv(m,u,o),a.stateNode=n,la(a))}return Lt(a),null;case 5:if(Te(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&la(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Lt(a),null}if(p=Q.current,io(a))ub(a);else{var v=Qh(Ee.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(m,{is:u.is}):v.createElement(m)}}p[gt]=a,p[on]=u;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;e:switch(On(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&la(a)}}return Lt(a),tg(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&la(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Ee.current,io(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Rn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[gt]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Sv(n.nodeValue,o)),n||Ha(a,!0)}else n=Qh(n).createTextNode(u),n[gt]=a,a.stateNode=n}return Lt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=io(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[gt]=a}else Wi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),n=!1}else o=d0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(ws(a),a):(ws(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Lt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=io(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[gt]=a}else Wi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),m=!1}else m=d0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ws(a),a):(ws(a),null)}return ws(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),Dh(a,a.updateQueue),Lt(a),null);case 4:return ze(),n===null&&Ng(a.stateNode.containerInfo),Lt(a),null;case 10:return sa(a.type),Lt(a),null;case 19:if(Z(tn),u=a.memoizedState,u===null)return Lt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)au(u,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=vh(n),p!==null){for(a.flags|=128,au(u,!1),n=p.updateQueue,a.updateQueue=n,Dh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)ab(o,n),o=o.sibling;return P(tn,tn.current&1|2),ot&&ta(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&ln()>Lh&&(a.flags|=128,m=!0,au(u,!1),a.lanes=4194304)}else{if(!m)if(n=vh(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,Dh(a,n),au(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!ot)return Lt(a),null}else 2*ln()-u.renderingStartTime>Lh&&o!==536870912&&(a.flags|=128,m=!0,au(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=ln(),n.sibling=null,o=tn.current,P(tn,m?o&1|2:o&1),ot&&ta(a,u.treeForkCount),n):(Lt(a),null);case 22:case 23:return ws(a),j0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),o=a.updateQueue,o!==null&&Dh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&Z(tl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),sa(dn),Lt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function AE(n,a){switch(c0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return sa(dn),ze(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return Te(a),null;case 31:if(a.memoizedState!==null){if(ws(a),a.alternate===null)throw Error(s(340));Wi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(ws(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Wi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Z(tn),null;case 4:return ze(),null;case 10:return sa(a.type),null;case 22:case 23:return ws(a),j0(),n!==null&&Z(tl),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return sa(dn),null;case 25:return null;default:return null}}function k1(n,a){switch(c0(a),a.tag){case 3:sa(dn),ze();break;case 26:case 27:case 5:Te(a);break;case 4:ze();break;case 31:a.memoizedState!==null&&ws(a);break;case 13:ws(a);break;case 19:Z(tn);break;case 10:sa(a.type);break;case 22:case 23:ws(a),j0(),n!==null&&Z(tl);break;case 24:sa(dn)}}function iu(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==m)}}catch(E){Nt(a,a.return,E)}}function Ja(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var v=u.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,m=a;var M=o,X=E;try{X()}catch(ie){Nt(m,M,ie)}}}u=u.next}while(u!==p)}}catch(ie){Nt(a,a.return,ie)}}function D1(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{Nb(a,o)}catch(u){Nt(n,n.return,u)}}}function O1(n,a,o){o.props=il(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Nt(n,a,u)}}function lu(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){Nt(n,a,m)}}function Vr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Nt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Nt(n,a,m)}else o.current=null}function M1(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Nt(n,n.return,m)}}function ng(n,a,o){try{var u=n.stateNode;YE(u,n.type,o,a),u[on]=a}catch(m){Nt(n,n.return,m)}}function V1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ri(n.type)||n.tag===4}function sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ri(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rg(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=tr));else if(u!==4&&(u===27&&ri(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(rg(n,a,o),n=n.sibling;n!==null;)rg(n,a,o),n=n.sibling}function Oh(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&ri(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Oh(n,a,o),n=n.sibling;n!==null;)Oh(n,a,o),n=n.sibling}function P1(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);On(a,u,o),a[gt]=n,a[on]=o}catch(p){Nt(n,n.return,p)}}var oa=!1,mn=!1,ag=!1,L1=typeof WeakSet=="function"?WeakSet:Set,En=null;function IE(n,a){if(n=n.containerInfo,Tg=tf,n=Yy(n),Wm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,E=-1,M=-1,X=0,ie=0,he=n,J=null;t:for(;;){for(var ne;he!==o||m!==0&&he.nodeType!==3||(E=v+m),he!==p||u!==0&&he.nodeType!==3||(M=v+u),he.nodeType===3&&(v+=he.nodeValue.length),(ne=he.firstChild)!==null;)J=he,he=ne;for(;;){if(he===n)break t;if(J===o&&++X===m&&(E=v),J===p&&++ie===u&&(M=v),(ne=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=ne}o=E===-1||M===-1?null:{start:E,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sg={focusedElem:n,selectionRange:o},tf=!1,En=a;En!==null;)if(a=En,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,En=n;else for(;En!==null;){switch(a=En,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ae=il(o.type,m);n=u.getSnapshotBeforeUpdate(Ae,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Le){Nt(o,o.return,Le)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Cg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,En=n;break}En=a.return}}function z1(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ua(n,o),u&4&&iu(5,o);break;case 1:if(ua(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(v){Nt(o,o.return,v)}else{var m=il(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Nt(o,o.return,v)}}u&64&&D1(o),u&512&&lu(o,o.return);break;case 3:if(ua(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{Nb(n,a)}catch(v){Nt(o,o.return,v)}}break;case 27:a===null&&u&4&&P1(o);case 26:case 5:ua(n,o),a===null&&u&4&&M1(o),u&512&&lu(o,o.return);break;case 12:ua(n,o);break;case 31:ua(n,o),u&4&&q1(n,o);break;case 13:ua(n,o),u&4&&F1(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=LE.bind(null,o),rT(n,o))));break;case 22:if(u=o.memoizedState!==null||oa,!u){a=a!==null&&a.memoizedState!==null||mn,m=oa;var p=mn;oa=u,(mn=a)&&!p?da(n,o,(o.subtreeFlags&8772)!==0):ua(n,o),oa=m,mn=p}break;case 30:break;default:ua(n,o)}}function U1(n){var a=n.alternate;a!==null&&(n.alternate=null,U1(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Fl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ft=null,ss=!1;function ca(n,a,o){for(o=o.child;o!==null;)B1(n,a,o),o=o.sibling}function B1(n,a,o){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(le,o)}catch{}switch(o.tag){case 26:mn||Vr(o,a),ca(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:mn||Vr(o,a);var u=Ft,m=ss;ri(o.type)&&(Ft=o.stateNode,ss=!1),ca(n,a,o),pu(o.stateNode),Ft=u,ss=m;break;case 5:mn||Vr(o,a);case 6:if(u=Ft,m=ss,Ft=null,ca(n,a,o),Ft=u,ss=m,Ft!==null)if(ss)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(o.stateNode)}catch(p){Nt(o,a,p)}else try{Ft.removeChild(o.stateNode)}catch(p){Nt(o,a,p)}break;case 18:Ft!==null&&(ss?(n=Ft,Dv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ao(n)):Dv(Ft,o.stateNode));break;case 4:u=Ft,m=ss,Ft=o.stateNode.containerInfo,ss=!0,ca(n,a,o),Ft=u,ss=m;break;case 0:case 11:case 14:case 15:Ja(2,o,a),mn||Ja(4,o,a),ca(n,a,o);break;case 1:mn||(Vr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&O1(o,a,u)),ca(n,a,o);break;case 21:ca(n,a,o);break;case 22:mn=(u=mn)||o.memoizedState!==null,ca(n,a,o),mn=u;break;default:ca(n,a,o)}}function q1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(o){Nt(a,a.return,o)}}}function F1(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(o){Nt(a,a.return,o)}}function CE(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new L1),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new L1),a;default:throw Error(s(435,n.tag))}}function Mh(n,a){var o=CE(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=zE.bind(null,n,u);u.then(m,m)}})}function rs(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ri(E.type)){Ft=E.stateNode,ss=!1;break e}break;case 5:Ft=E.stateNode,ss=!1;break e;case 3:case 4:Ft=E.stateNode.containerInfo,ss=!0;break e}E=E.return}if(Ft===null)throw Error(s(160));B1(p,v,m),Ft=null,ss=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)H1(a,n),a=a.sibling}var lr=null;function H1(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rs(a,n),as(n),u&4&&(Ja(3,n,n.return),iu(3,n),Ja(5,n,n.return));break;case 1:rs(a,n),as(n),u&512&&(mn||o===null||Vr(o,o.return)),u&64&&oa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=lr;if(rs(a,n),as(n),u&512&&(mn||o===null||Vr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[_r]||p[gt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),On(p,u,o),p[gt]=n,cn(p),u=p;break e;case"link":var v=Hv("link","href",m).get(u+(o.href||""));if(v){for(var E=0;E<v.length;E++)if(p=v[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(E,1);break t}}p=m.createElement(u),On(p,u,o),m.head.appendChild(p);break;case"meta":if(v=Hv("meta","content",m).get(u+(o.content||""))){for(E=0;E<v.length;E++)if(p=v[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(E,1);break t}}p=m.createElement(u),On(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[gt]=n,cn(p),u=p}n.stateNode=u}else Gv(m,n.type,n.stateNode);else n.stateNode=Fv(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Gv(m,n.type,n.stateNode):Fv(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ng(n,n.memoizedProps,o.memoizedProps)}break;case 27:rs(a,n),as(n),u&512&&(mn||o===null||Vr(o,o.return)),o!==null&&u&4&&ng(n,n.memoizedProps,o.memoizedProps);break;case 5:if(rs(a,n),as(n),u&512&&(mn||o===null||Vr(o,o.return)),n.flags&32){m=n.stateNode;try{ns(m,"")}catch(Ae){Nt(n,n.return,Ae)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,ng(n,m,o!==null?o.memoizedProps:m)),u&1024&&(ag=!0);break;case 6:if(rs(a,n),as(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Ae){Nt(n,n.return,Ae)}}break;case 3:if(Jh=null,m=lr,lr=Xh(a.containerInfo),rs(a,n),lr=m,as(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ao(a.containerInfo)}catch(Ae){Nt(n,n.return,Ae)}ag&&(ag=!1,G1(n));break;case 4:u=lr,lr=Xh(n.stateNode.containerInfo),rs(a,n),as(n),lr=u;break;case 12:rs(a,n),as(n);break;case 31:rs(a,n),as(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 13:rs(a,n),as(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ph=ln()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 22:m=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,X=oa,ie=mn;if(oa=X||m,mn=ie||M,rs(a,n),mn=ie,oa=X,as(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||M||oa||mn||ll(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){M=o=a;try{if(p=M.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=M.stateNode;var he=M.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ae){Nt(M,M.return,Ae)}}}else if(a.tag===6){if(o===null){M=a;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(Ae){Nt(M,M.return,Ae)}}}else if(a.tag===18){if(o===null){M=a;try{var ne=M.stateNode;m?Ov(ne,!0):Ov(M.stateNode,!1)}catch(Ae){Nt(M,M.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Mh(n,o))));break;case 19:rs(a,n),as(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mh(n,u)));break;case 30:break;case 21:break;default:rs(a,n),as(n)}}function as(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(V1(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=sg(n);Oh(n,p,m);break;case 5:var v=o.stateNode;o.flags&32&&(ns(v,""),o.flags&=-33);var E=sg(n);Oh(n,E,v);break;case 3:case 4:var M=o.stateNode.containerInfo,X=sg(n);rg(n,X,M);break;default:throw Error(s(161))}}catch(ie){Nt(n,n.return,ie)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function G1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;G1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ua(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)z1(n,a.alternate,a),a=a.sibling}function ll(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Ja(4,a,a.return),ll(a);break;case 1:Vr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&O1(a,a.return,o),ll(a);break;case 27:pu(a.stateNode);case 26:case 5:Vr(a,a.return),ll(a);break;case 22:a.memoizedState===null&&ll(a);break;case 30:ll(a);break;default:ll(a)}n=n.sibling}}function da(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:da(m,p,o),iu(4,p);break;case 1:if(da(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){Nt(u,u.return,X)}if(u=p,m=u.updateQueue,m!==null){var E=u.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)_b(M[m],E)}catch(X){Nt(u,u.return,X)}}o&&v&64&&D1(p),lu(p,p.return);break;case 27:P1(p);case 26:case 5:da(m,p,o),o&&u===null&&v&4&&M1(p),lu(p,p.return);break;case 12:da(m,p,o);break;case 31:da(m,p,o),o&&v&4&&q1(m,p);break;case 13:da(m,p,o),o&&v&4&&F1(m,p);break;case 22:p.memoizedState===null&&da(m,p,o),lu(p,p.return);break;case 30:break;default:da(m,p,o)}a=a.sibling}}function ig(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Kc(o))}function lg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Kc(n))}function or(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$1(n,a,o,u),a=a.sibling}function $1(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:or(n,a,o,u),m&2048&&iu(9,a);break;case 1:or(n,a,o,u);break;case 3:or(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Kc(n)));break;case 12:if(m&2048){or(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,v=p.id,E=p.onPostCommit;typeof E=="function"&&E(v,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Nt(a,a.return,M)}}else or(n,a,o,u);break;case 31:or(n,a,o,u);break;case 13:or(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?or(n,a,o,u):ou(n,a):p._visibility&2?or(n,a,o,u):(p._visibility|=2,xo(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&ig(v,a);break;case 24:or(n,a,o,u),m&2048&&lg(a.alternate,a);break;default:or(n,a,o,u)}}function xo(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,v=a,E=o,M=u,X=v.flags;switch(v.tag){case 0:case 11:case 15:xo(p,v,E,M,m),iu(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?xo(p,v,E,M,m):ou(p,v):(ie._visibility|=2,xo(p,v,E,M,m)),m&&X&2048&&ig(v.alternate,v);break;case 24:xo(p,v,E,M,m),m&&X&2048&&lg(v.alternate,v);break;default:xo(p,v,E,M,m)}a=a.sibling}}function ou(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:ou(o,u),m&2048&&ig(u.alternate,u);break;case 24:ou(o,u),m&2048&&lg(u.alternate,u);break;default:ou(o,u)}a=a.sibling}}var cu=8192;function yo(n,a,o){if(n.subtreeFlags&cu)for(n=n.child;n!==null;)K1(n,a,o),n=n.sibling}function K1(n,a,o){switch(n.tag){case 26:yo(n,a,o),n.flags&cu&&n.memoizedState!==null&&pT(o,lr,n.memoizedState,n.memoizedProps);break;case 5:yo(n,a,o);break;case 3:case 4:var u=lr;lr=Xh(n.stateNode.containerInfo),yo(n,a,o),lr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=cu,cu=16777216,yo(n,a,o),cu=u):yo(n,a,o));break;default:yo(n,a,o)}}function Q1(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function uu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];En=u,Y1(u,n)}Q1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X1(n),n=n.sibling}function X1(n){switch(n.tag){case 0:case 11:case 15:uu(n),n.flags&2048&&Ja(9,n,n.return);break;case 3:uu(n);break;case 12:uu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Vh(n)):uu(n);break;default:uu(n)}}function Vh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];En=u,Y1(u,n)}Q1(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Ja(8,a,a.return),Vh(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Vh(a));break;default:Vh(a)}n=n.sibling}}function Y1(n,a){for(;En!==null;){var o=En;switch(o.tag){case 0:case 11:case 15:Ja(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Kc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,En=u;else e:for(o=n;En!==null;){u=En;var m=u.sibling,p=u.return;if(U1(u),u===o){En=null;break e}if(m!==null){m.return=p,En=m;break e}En=p}}}var RE={getCacheForType:function(n){var a=kn(dn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return kn(dn).controller.signal}},kE=typeof WeakMap=="function"?WeakMap:Map,xt=0,Dt=null,tt=null,rt=0,_t=0,_s=null,Wa=!1,bo=!1,og=!1,ha=0,Xt=0,Za=0,ol=0,cg=0,Ns=0,vo=0,du=null,is=null,ug=!1,Ph=0,J1=0,Lh=1/0,zh=null,ei=null,vn=0,ti=null,wo=null,fa=0,dg=0,hg=null,W1=null,hu=0,fg=null;function js(){return(xt&2)!==0&&rt!==0?rt&-rt:G.T!==null?bg():kt()}function Z1(){if(Ns===0)if((rt&536870912)===0||ot){var n=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Ns=n}else Ns=536870912;return n=vs.current,n!==null&&(n.flags|=32),Ns}function ls(n,a,o){(n===Dt&&(_t===2||_t===9)||n.cancelPendingCommit!==null)&&(_o(n,0),ni(n,rt,Ns,!1)),fe(n,o),((xt&2)===0||n!==Dt)&&(n===Dt&&((xt&2)===0&&(ol|=o),Xt===4&&ni(n,rt,Ns,!1)),Pr(n))}function ev(n,a,o){if((xt&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Ln(n,a),m=u?ME(n,a):gg(n,a,!0),p=u;do{if(m===0){bo&&!u&&ni(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!DE(o)){m=gg(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var E=n;m=du;var M=E.current.memoizedState.isDehydrated;if(M&&(_o(E,v).flags|=256),v=gg(E,v,!1),v!==2){if(og&&!M){E.errorRecoveryDisabledLanes|=p,ol|=p,m=4;break e}p=is,is=m,p!==null&&(is===null?is=p:is.push.apply(is,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){_o(n,0),ni(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ni(u,a,Ns,!Wa);break e;case 2:is=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Ph+300-ln(),10<m)){if(ni(u,a,Ns,!Wa),Bt(u,0,!0)!==0)break e;fa=a,u.timeoutHandle=Rv(tv.bind(null,u,o,is,zh,ug,a,Ns,ol,vo,Wa,p,"Throttled",-0,0),m);break e}tv(u,o,is,zh,ug,a,Ns,ol,vo,Wa,p,null,-0,0)}}break}while(!0);Pr(n)}function tv(n,a,o,u,m,p,v,E,M,X,ie,he,J,ne){if(n.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tr},K1(a,p,he);var Ae=(p&62914560)===p?Ph-ln():(p&4194048)===p?J1-ln():0;if(Ae=xT(he,Ae),Ae!==null){fa=p,n.cancelPendingCommit=Ae(cv.bind(null,n,a,p,o,u,m,v,E,M,ie,he,null,J,ne)),ni(n,p,v,!X);return}}cv(n,a,p,o,u,m,v,E,M)}function DE(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!ys(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ni(n,a,o,u){a&=~cg,a&=~ol,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-st(m),v=1<<p;u[p]=-1,m&=~v}o!==0&&ve(n,o,a)}function Uh(){return(xt&6)===0?(fu(0),!1):!0}function mg(){if(tt!==null){if(_t===0)var n=tt.return;else n=tt,na=Zi=null,C0(n),ho=null,Xc=0,n=tt;for(;n!==null;)k1(n.alternate,n),n=n.return;tt=null}}function _o(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,ZE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),fa=0,mg(),Dt=n,tt=o=ea(n.current,null),rt=a,_t=0,_s=null,Wa=!1,bo=Ln(n,a),og=!1,vo=Ns=cg=ol=Za=Xt=0,is=du=null,ug=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-st(u),p=1<<m;a|=n[m],u&=~p}return ha=a,lh(),o}function nv(n,a){Je=null,G.H=su,a===uo||a===gh?(a=yb(),_t=3):a===y0?(a=yb(),_t=4):_t=a===$0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,_s=a,tt===null&&(Xt=1,Ih(n,Ls(a,n.current)))}function sv(){var n=vs.current;return n===null?!0:(rt&4194048)===rt?qs===null:(rt&62914560)===rt||(rt&536870912)!==0?n===qs:!1}function rv(){var n=G.H;return G.H=su,n===null?su:n}function av(){var n=G.A;return G.A=RE,n}function Bh(){Xt=4,Wa||(rt&4194048)!==rt&&vs.current!==null||(bo=!0),(Za&134217727)===0&&(ol&134217727)===0||Dt===null||ni(Dt,rt,Ns,!1)}function gg(n,a,o){var u=xt;xt|=2;var m=rv(),p=av();(Dt!==n||rt!==a)&&(zh=null,_o(n,a)),a=!1;var v=Xt;e:do try{if(_t!==0&&tt!==null){var E=tt,M=_s;switch(_t){case 8:mg(),v=6;break e;case 3:case 2:case 9:case 6:vs.current===null&&(a=!0);var X=_t;if(_t=0,_s=null,No(n,E,M,X),o&&bo){v=0;break e}break;default:X=_t,_t=0,_s=null,No(n,E,M,X)}}OE(),v=Xt;break}catch(ie){nv(n,ie)}while(!0);return a&&n.shellSuspendCounter++,na=Zi=null,xt=u,G.H=m,G.A=p,tt===null&&(Dt=null,rt=0,lh()),v}function OE(){for(;tt!==null;)iv(tt)}function ME(n,a){var o=xt;xt|=2;var u=rv(),m=av();Dt!==n||rt!==a?(zh=null,Lh=ln()+500,_o(n,a)):bo=Ln(n,a);e:do try{if(_t!==0&&tt!==null){a=tt;var p=_s;t:switch(_t){case 1:_t=0,_s=null,No(n,a,p,1);break;case 2:case 9:if(pb(p)){_t=0,_s=null,lv(a);break}a=function(){_t!==2&&_t!==9||Dt!==n||(_t=7),Pr(n)},p.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:pb(p)?(_t=0,_s=null,lv(a)):(_t=0,_s=null,No(n,a,p,7));break;case 5:var v=null;switch(tt.tag){case 26:v=tt.memoizedState;case 5:case 27:var E=tt;if(v?$v(v):E.stateNode.complete){_t=0,_s=null;var M=E.sibling;if(M!==null)tt=M;else{var X=E.return;X!==null?(tt=X,qh(X)):tt=null}break t}}_t=0,_s=null,No(n,a,p,5);break;case 6:_t=0,_s=null,No(n,a,p,6);break;case 8:mg(),Xt=6;break e;default:throw Error(s(462))}}VE();break}catch(ie){nv(n,ie)}while(!0);return na=Zi=null,G.H=u,G.A=m,xt=o,tt!==null?0:(Dt=null,rt=0,lh(),Xt)}function VE(){for(;tt!==null&&!br();)iv(tt)}function iv(n){var a=C1(n.alternate,n,ha);n.memoizedProps=n.pendingProps,a===null?qh(n):tt=a}function lv(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=j1(o,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=j1(o,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:C0(a);default:k1(o,a),a=tt=ab(a,ha),a=C1(o,a,ha)}n.memoizedProps=n.pendingProps,a===null?qh(n):tt=a}function No(n,a,o,u){na=Zi=null,C0(a),ho=null,Xc=0;var m=a.return;try{if(jE(n,m,a,o,rt)){Xt=1,Ih(n,Ls(o,n.current)),tt=null;return}}catch(p){if(m!==null)throw tt=m,p;Xt=1,Ih(n,Ls(o,n.current)),tt=null;return}a.flags&32768?(ot||u===1?n=!0:bo||(rt&536870912)!==0?n=!1:(Wa=n=!0,(u===2||u===9||u===3||u===6)&&(u=vs.current,u!==null&&u.tag===13&&(u.flags|=16384))),ov(a,n)):qh(a)}function qh(n){var a=n;do{if((a.flags&32768)!==0){ov(a,Wa);return}n=a.return;var o=SE(a.alternate,a,ha);if(o!==null){tt=o;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=n}while(a!==null);Xt===0&&(Xt=5)}function ov(n,a){do{var o=AE(n.alternate,n);if(o!==null){o.flags&=32767,tt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){tt=n;return}tt=n=o}while(n!==null);Xt=6,tt=null}function cv(n,a,o,u,m,p,v,E,M){n.cancelPendingCommit=null;do Fh();while(vn!==0);if((xt&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=s0,je(n,o,p,v,E,M),n===Dt&&(tt=Dt=null,rt=0),wo=a,ti=n,fa=o,dg=p,hg=m,W1=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,UE(Rs,function(){return mv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,m=ce.p,ce.p=2,v=xt,xt|=4;try{IE(n,a,o)}finally{xt=v,ce.p=m,G.T=u}}vn=1,uv(),dv(),hv()}}function uv(){if(vn===1){vn=0;var n=ti,a=wo,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var m=xt;xt|=4;try{H1(a,n);var p=Sg,v=Yy(n.containerInfo),E=p.focusedElem,M=p.selectionRange;if(v!==E&&E&&E.ownerDocument&&Xy(E.ownerDocument.documentElement,E)){if(M!==null&&Wm(E)){var X=M.start,ie=M.end;if(ie===void 0&&(ie=X),"selectionStart"in E)E.selectionStart=X,E.selectionEnd=Math.min(ie,E.value.length);else{var he=E.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var ne=J.getSelection(),Ae=E.textContent.length,Le=Math.min(M.start,Ae),Ct=M.end===void 0?Le:Math.min(M.end,Ae);!ne.extend&&Le>Ct&&(v=Ct,Ct=Le,Le=v);var B=Qy(E,Le),z=Qy(E,Ct);if(B&&z&&(ne.rangeCount!==1||ne.anchorNode!==B.node||ne.anchorOffset!==B.offset||ne.focusNode!==z.node||ne.focusOffset!==z.offset)){var K=he.createRange();K.setStart(B.node,B.offset),ne.removeAllRanges(),Le>Ct?(ne.addRange(K),ne.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),ne.addRange(K))}}}}for(he=[],ne=E;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<he.length;E++){var oe=he[E];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}tf=!!Tg,Sg=Tg=null}finally{xt=m,ce.p=u,G.T=o}}n.current=a,vn=2}}function dv(){if(vn===2){vn=0;var n=ti,a=wo,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var m=xt;xt|=4;try{z1(n,a.alternate,a)}finally{xt=m,ce.p=u,G.T=o}}vn=3}}function hv(){if(vn===4||vn===3){vn=0,Zn();var n=ti,a=wo,o=fa,u=W1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,wo=ti=null,fv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(ei=null),$e(o),a=a.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(le,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=G.T,m=ce.p,ce.p=2,G.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var E=u[v];p(E.value,{componentStack:E.stack})}}finally{G.T=a,ce.p=m}}(fa&3)!==0&&Fh(),Pr(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===fg?hu++:(hu=0,fg=n):hu=0,fu(0)}}function fv(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Kc(a)))}function Fh(){return uv(),dv(),hv(),mv()}function mv(){if(vn!==5)return!1;var n=ti,a=dg;dg=0;var o=$e(fa),u=G.T,m=ce.p;try{ce.p=32>o?32:o,G.T=null,o=hg,hg=null;var p=ti,v=fa;if(vn=0,wo=ti=null,fa=0,(xt&6)!==0)throw Error(s(331));var E=xt;if(xt|=4,X1(p.current),$1(p,p.current,v,o),xt=E,fu(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(le,p)}catch{}return!0}finally{ce.p=m,G.T=u,fv(n,a)}}function gv(n,a,o){a=Ls(o,a),a=G0(n.stateNode,a,2),n=Qa(n,a,2),n!==null&&(fe(n,2),Pr(n))}function Nt(n,a,o){if(n.tag===3)gv(n,n,o);else for(;a!==null;){if(a.tag===3){gv(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ei===null||!ei.has(u))){n=Ls(o,n),o=p1(2),u=Qa(a,o,2),u!==null&&(x1(o,u,a,n),fe(u,2),Pr(u));break}}a=a.return}}function pg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new kE;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(og=!0,m.add(o),n=PE.bind(null,n,a,o),a.then(n,n))}function PE(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Dt===n&&(rt&o)===o&&(Xt===4||Xt===3&&(rt&62914560)===rt&&300>ln()-Ph?(xt&2)===0&&_o(n,0):cg|=o,vo===rt&&(vo=0)),Pr(n)}function pv(n,a){a===0&&(a=er()),n=Yi(n,a),n!==null&&(fe(n,a),Pr(n))}function LE(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),pv(n,o)}function zE(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),pv(n,o)}function UE(n,a){return Ut(n,a)}var Hh=null,jo=null,xg=!1,Gh=!1,yg=!1,si=0;function Pr(n){n!==jo&&n.next===null&&(jo===null?Hh=jo=n:jo=jo.next=n),Gh=!0,xg||(xg=!0,qE())}function fu(n,a){if(!yg&&Gh){yg=!0;do for(var o=!1,u=Hh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var v=u.suspendedLanes,E=u.pingedLanes;p=(1<<31-st(42|n)+1)-1,p&=m&~(v&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,vv(u,p))}else p=rt,p=Bt(u,u===Dt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ln(u,p)||(o=!0,vv(u,p));u=u.next}while(o);yg=!1}}function BE(){xv()}function xv(){Gh=xg=!1;var n=0;si!==0&&WE()&&(n=si);for(var a=ln(),o=null,u=Hh;u!==null;){var m=u.next,p=yv(u,a);p===0?(u.next=null,o===null?Hh=m:o.next=m,m===null&&(jo=o)):(o=u,(n!==0||(p&3)!==0)&&(Gh=!0)),u=m}vn!==0&&vn!==5||fu(n),si!==0&&(si=0)}function yv(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-st(p),E=1<<v,M=m[v];M===-1?((E&o)===0||(E&u)!==0)&&(m[v]=gs(E,a)):M<=a&&(n.expiredLanes|=E),p&=~E}if(a=Dt,o=rt,o=Bt(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(_t===2||_t===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&an(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ln(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&an(u),$e(o)){case 2:case 8:o=vr;break;case 32:o=Rs;break;case 268435456:o=fs;break;default:o=Rs}return u=bv.bind(null,n),o=Ut(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&an(u),n.callbackPriority=2,n.callbackNode=null,2}function bv(n,a){if(vn!==0&&vn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Fh()&&n.callbackNode!==o)return null;var u=rt;return u=Bt(n,n===Dt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(ev(n,u,a),yv(n,ln()),n.callbackNode!=null&&n.callbackNode===o?bv.bind(null,n):null)}function vv(n,a){if(Fh())return null;ev(n,a,!0)}function qE(){eT(function(){(xt&6)!==0?Ut(Ws,BE):xv()})}function bg(){if(si===0){var n=oo;n===0&&(n=bn,bn<<=1,(bn&261888)===0&&(bn=256)),si=n}return si}function wv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Kl(""+n)}function _v(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function FE(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=wv((m[on]||null).action),v=u.submitter;v&&(a=(a=v[on]||null)?wv(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var E=new Cr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(si!==0){var M=v?_v(m,v):new FormData(m);z0(o,{pending:!0,data:M,method:m.method,action:p},null,M)}}else typeof p=="function"&&(E.preventDefault(),M=v?_v(m,v):new FormData(m),z0(o,{pending:!0,data:M,method:m.method,action:p},p,M))},currentTarget:m}]})}}for(var vg=0;vg<n0.length;vg++){var wg=n0[vg],HE=wg.toLowerCase(),GE=wg[0].toUpperCase()+wg.slice(1);ir(HE,"on"+GE)}ir(Zy,"onAnimationEnd"),ir(eb,"onAnimationIteration"),ir(tb,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(lE,"onTransitionRun"),ir(oE,"onTransitionStart"),ir(cE,"onTransitionCancel"),ir(nb,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$E=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function Nv(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var v=u.length-1;0<=v;v--){var E=u[v],M=E.instance,X=E.currentTarget;if(E=E.listener,M!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=X;try{p(m)}catch(ie){ih(ie)}m.currentTarget=null,p=M}else for(v=0;v<u.length;v++){if(E=u[v],M=E.instance,X=E.currentTarget,E=E.listener,M!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=X;try{p(m)}catch(ie){ih(ie)}m.currentTarget=null,p=M}}}}function nt(n,a){var o=a[ql];o===void 0&&(o=a[ql]=new Set);var u=n+"__bubble";o.has(u)||(jv(a,n,2,!1),o.add(u))}function _g(n,a,o){var u=0;a&&(u|=4),jv(o,n,u,a)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Ng(n){if(!n[$h]){n[$h]=!0,Tc.forEach(function(o){o!=="selectionchange"&&($E.has(o)||_g(o,!1,n),_g(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[$h]||(a[$h]=!0,_g("selectionchange",!1,a))}}function jv(n,a,o,u){switch(Zv(a)){case 2:var m=vT;break;case 8:m=wT;break;default:m=Lg}o=m.bind(null,a,o,n),m=void 0,!qi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function jg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var E=u.stateNode.containerInfo;if(E===m)break;if(v===4)for(v=u.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;E!==null;){if(v=Nr(E),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){u=p=v;continue e}E=E.parentNode}}u=u.return}La(function(){var X=p,ie=Os(o),he=[];e:{var J=sb.get(n);if(J!==void 0){var ne=Cr,Ae=n;switch(n){case"keypress":if(Hi(o)===0)break e;case"keydown":case"keyup":ne=sh;break;case"focusin":Ae="focus",ne=$i;break;case"focusout":Ae="blur",ne=$i;break;case"beforeblur":case"afterblur":ne=$i;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case Zy:case eb:case tb:ne=Yd;break;case nb:ne=S;break;case"scroll":case"scrollend":ne=Lc;break;case"wheel":ne=ee;break;case"copy":case"cut":case"paste":ne=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Zr;break;case"toggle":case"beforetoggle":ne=Ye}var Le=(a&4)!==0,Ct=!Le&&(n==="scroll"||n==="scrollend"),B=Le?J!==null?J+"Capture":null:J;Le=[];for(var z=X,K;z!==null;){var oe=z;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||B===null||(oe=nr(z,B),oe!=null&&Le.push(gu(z,oe,K))),Ct)break;z=z.return}0<Le.length&&(J=new ne(J,Ae,null,o,ie),he.push({event:J,listeners:Le}))}}if((a&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",J&&o!==Mc&&(Ae=o.relatedTarget||o.fromElement)&&(Nr(Ae)||Ae[wr]))break e;if((ne||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Ae=o.relatedTarget||o.toElement,ne=X,Ae=Ae?Nr(Ae):null,Ae!==null&&(Ct=c(Ae),Le=Ae.tag,Ae!==Ct||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(ne=null,Ae=X),ne!==Ae)){if(Le=zc,oe="onMouseLeave",B="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(Le=Zr,oe="onPointerLeave",B="onPointerEnter",z="pointer"),Ct=ne==null?J:ps(ne),K=Ae==null?J:ps(Ae),J=new Le(oe,z+"leave",ne,o,ie),J.target=Ct,J.relatedTarget=K,oe=null,Nr(ie)===X&&(Le=new Le(B,z+"enter",Ae,o,ie),Le.target=K,Le.relatedTarget=Ct,oe=Le),Ct=oe,ne&&Ae)t:{for(Le=KE,B=ne,z=Ae,K=0,oe=B;oe;oe=Le(oe))K++;oe=0;for(var Me=z;Me;Me=Le(Me))oe++;for(;0<K-oe;)B=Le(B),K--;for(;0<oe-K;)z=Le(z),oe--;for(;K--;){if(B===z||z!==null&&B===z.alternate){Le=B;break t}B=Le(B),z=Le(z)}Le=null}else Le=null;ne!==null&&Ev(he,J,ne,Le,!1),Ae!==null&&Ct!==null&&Ev(he,Ct,Ae,Le,!0)}}e:{if(J=X?ps(X):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var dt=qy;else if(Uy(J))if(Fy)dt=rE;else{dt=nE;var Ce=tE}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&$l(X.elementType)&&(dt=qy):dt=sE;if(dt&&(dt=dt(n,X))){By(he,dt,o,ie);break e}Ce&&Ce(n,J,X),n==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&kc(J,"number",J.value)}switch(Ce=X?ps(X):window,n){case"focusin":(Uy(Ce)||Ce.contentEditable==="true")&&(eo=Ce,Zm=X,Hc=null);break;case"focusout":Hc=Zm=eo=null;break;case"mousedown":e0=!0;break;case"contextmenu":case"mouseup":case"dragend":e0=!1,Jy(he,o,ie);break;case"selectionchange":if(iE)break;case"keydown":case"keyup":Jy(he,o,ie)}var We;if(pt)e:{switch(n){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Zl?Ki(n,o)&&(at="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(at="onCompositionStart");at&&(Dr&&o.locale!=="ko"&&(Zl||at!=="onCompositionStart"?at==="onCompositionEnd"&&Zl&&(We=Pc()):(Ir=ie,Vc="value"in Ir?Ir.value:Ir.textContent,Zl=!0)),Ce=Kh(X,at),0<Ce.length&&(at=new kr(at,n,null,o,ie),he.push({event:at,listeners:Ce}),We?at.data=We:(We=Wl(o),We!==null&&(at.data=We)))),(We=Vs?J5(n,o):W5(n,o))&&(at=Kh(X,"onBeforeInput"),0<at.length&&(Ce=new kr("onBeforeInput","beforeinput",null,o,ie),he.push({event:Ce,listeners:at}),Ce.data=We)),FE(he,n,X,o,ie)}Nv(he,a)})}function gu(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Kh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=nr(n,o),m!=null&&u.unshift(gu(n,m,p)),m=nr(n,a),m!=null&&u.push(gu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function KE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ev(n,a,o,u,m){for(var p=a._reactName,v=[];o!==null&&o!==u;){var E=o,M=E.alternate,X=E.stateNode;if(E=E.tag,M!==null&&M===u)break;E!==5&&E!==26&&E!==27||X===null||(M=X,m?(X=nr(o,p),X!=null&&v.unshift(gu(o,X,M))):m||(X=nr(o,p),X!=null&&v.push(gu(o,X,M)))),o=o.return}v.length!==0&&n.push({event:a,listeners:v})}var QE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function Tv(n){return(typeof n=="string"?n:""+n).replace(QE,`
`).replace(XE,"")}function Sv(n,a){return a=Tv(a),Tv(n)===a}function It(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||ns(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&ns(n,""+u);break;case"className":xs(n,"class",u);break;case"tabIndex":xs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(n,o,u);break;case"style":Oc(n,u,p);break;case"data":if(a!=="object"){xs(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Kl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&It(n,a,"name",m.name,m,null),It(n,a,"formEncType",m.formEncType,m,null),It(n,a,"formMethod",m.formMethod,m,null),It(n,a,"formTarget",m.formTarget,m,null)):(It(n,a,"encType",m.encType,m,null),It(n,a,"method",m.method,m,null),It(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Kl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=tr);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Kl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":nt("beforetoggle",n),nt("toggle",n),Hl(n,"popover",u);break;case"xlinkActuate":un(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":un(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":un(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":un(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":un(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":un(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":un(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":un(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":un(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Hl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Kd.get(o)||o,Hl(n,o,u))}}function Eg(n,a,o,u,m,p){switch(o){case"style":Oc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?ns(n,u):(typeof u=="number"||typeof u=="bigint")&&ns(n,""+u);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[on]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Hl(n,o,u)}}}function On(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",n),nt("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:It(n,a,p,v,o,null)}}m&&It(n,a,"srcSet",o.srcSet,o,null),u&&It(n,a,"src",o.src,o,null);return;case"input":nt("invalid",n);var E=p=v=m=null,M=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":m=ie;break;case"type":v=ie;break;case"checked":M=ie;break;case"defaultChecked":X=ie;break;case"value":p=ie;break;case"defaultValue":E=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,a));break;default:It(n,a,u,ie,o,null)}}Hd(n,p,E,M,X,v,m,!1);return;case"select":nt("invalid",n),u=v=p=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":v=E;break;case"multiple":u=E;default:It(n,a,m,E,o,null)}a=p,o=v,n.multiple=!!u,a!=null?Oa(n,!!u,a,!1):o!=null&&Oa(n,!!u,o,!0);return;case"textarea":nt("invalid",n),p=m=u=null;for(v in o)if(o.hasOwnProperty(v)&&(E=o[v],E!=null))switch(v){case"value":u=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:It(n,a,v,E,o,null)}Ma(n,u,m,p);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:It(n,a,M,u,o,null)}return;case"dialog":nt("beforetoggle",n),nt("toggle",n),nt("cancel",n),nt("close",n);break;case"iframe":case"object":nt("load",n);break;case"video":case"audio":for(u=0;u<mu.length;u++)nt(mu[u],n);break;case"image":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"embed":case"source":case"link":nt("error",n),nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:It(n,a,X,u,o,null)}return;default:if($l(a)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Eg(n,a,ie,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&It(n,a,E,u,o,null))}function YE(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,E=null,M=null,X=null,ie=null;for(ne in o){var he=o[ne];if(o.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":M=he;default:u.hasOwnProperty(ne)||It(n,a,ne,null,u,he)}}for(var J in u){var ne=u[J];if(he=o[J],u.hasOwnProperty(J)&&(ne!=null||he!=null))switch(J){case"type":p=ne;break;case"name":m=ne;break;case"checked":X=ne;break;case"defaultChecked":ie=ne;break;case"value":v=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:ne!==he&&It(n,a,J,ne,u,he)}}Gl(n,v,E,M,X,ie,p,m);return;case"select":ne=v=E=J=null;for(p in o)if(M=o[p],o.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":ne=M;default:u.hasOwnProperty(p)||It(n,a,p,null,u,M)}for(m in u)if(p=u[m],M=o[m],u.hasOwnProperty(m)&&(p!=null||M!=null))switch(m){case"value":J=p;break;case"defaultValue":E=p;break;case"multiple":v=p;default:p!==M&&It(n,a,m,p,u,M)}a=E,o=v,u=ne,J!=null?Oa(n,!!o,J,!1):!!u!=!!o&&(a!=null?Oa(n,!!o,a,!0):Oa(n,!!o,o?[]:"",!1));return;case"textarea":ne=J=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:It(n,a,E,null,u,m)}for(v in u)if(m=u[v],p=o[v],u.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":J=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&It(n,a,v,m,u,p)}Gd(n,J,ne);return;case"option":for(var Ae in o)if(J=o[Ae],o.hasOwnProperty(Ae)&&J!=null&&!u.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:It(n,a,Ae,null,u,J)}for(M in u)if(J=u[M],ne=o[M],u.hasOwnProperty(M)&&J!==ne&&(J!=null||ne!=null))switch(M){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:It(n,a,M,J,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in o)J=o[Le],o.hasOwnProperty(Le)&&J!=null&&!u.hasOwnProperty(Le)&&It(n,a,Le,null,u,J);for(X in u)if(J=u[X],ne=o[X],u.hasOwnProperty(X)&&J!==ne&&(J!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,a));break;default:It(n,a,X,J,u,ne)}return;default:if($l(a)){for(var Ct in o)J=o[Ct],o.hasOwnProperty(Ct)&&J!==void 0&&!u.hasOwnProperty(Ct)&&Eg(n,a,Ct,void 0,u,J);for(ie in u)J=u[ie],ne=o[ie],!u.hasOwnProperty(ie)||J===ne||J===void 0&&ne===void 0||Eg(n,a,ie,J,u,ne);return}}for(var B in o)J=o[B],o.hasOwnProperty(B)&&J!=null&&!u.hasOwnProperty(B)&&It(n,a,B,null,u,J);for(he in u)J=u[he],ne=o[he],!u.hasOwnProperty(he)||J===ne||J==null&&ne==null||It(n,a,he,J,u,ne)}function Av(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,v=m.initiatorType,E=m.duration;if(p&&E&&Av(v)){for(v=0,E=m.responseEnd,u+=1;u<o.length;u++){var M=o[u],X=M.startTime;if(X>E)break;var ie=M.transferSize,he=M.initiatorType;ie&&Av(he)&&(M=M.responseEnd,v+=ie*(M<E?1:(E-X)/(M-X)))}if(--u,a+=8*(p+v)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Tg=null,Sg=null;function Qh(n){return n.nodeType===9?n:n.ownerDocument}function Iv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cv(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Ag(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ig=null;function WE(){var n=window.event;return n&&n.type==="popstate"?n===Ig?!1:(Ig=n,!0):(Ig=null,!1)}var Rv=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(n){return kv.resolve(null).then(n).catch(tT)}:Rv;function tT(n){setTimeout(function(){throw n})}function ri(n){return n==="head"}function Dv(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),Ao(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")pu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,pu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,E=p.nodeName;p[_r]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&pu(n.ownerDocument.body);o=m}while(o);Ao(a)}function Ov(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Cg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cg(o),Fl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function nT(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[_r])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Fs(n.nextSibling),n===null)break}return null}function sT(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Fs(n.nextSibling),n===null))return null;return n}function Mv(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Fs(n.nextSibling),n===null))return null;return n}function Rg(n){return n.data==="$?"||n.data==="$~"}function kg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function rT(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Fs(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Dg=null;function Vv(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Fs(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function Pv(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function Lv(n,a,o){switch(a=Qh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function pu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Fl(n)}var Hs=new Map,zv=new Set;function Xh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ma=ce.d;ce.d={f:aT,r:iT,D:lT,C:oT,L:cT,m:uT,X:hT,S:dT,M:fT};function aT(){var n=ma.f(),a=Uh();return n||a}function iT(n){var a=Ds(n);a!==null&&a.tag===5&&a.type==="form"?n1(a):ma.r(n)}var Eo=typeof document>"u"?null:document;function Uv(n,a,o){var u=Eo;if(u&&typeof a=="string"&&a){var m=ts(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),zv.has(m)||(zv.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),On(a,"link",n),cn(a),u.head.appendChild(a)))}}function lT(n){ma.D(n),Uv("dns-prefetch",n,null)}function oT(n,a){ma.C(n,a),Uv("preconnect",n,a)}function cT(n,a,o){ma.L(n,a,o);var u=Eo;if(u&&n&&a){var m='link[rel="preload"][as="'+ts(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ts(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ts(o.imageSizes)+'"]')):m+='[href="'+ts(n)+'"]';var p=m;switch(a){case"style":p=To(n);break;case"script":p=So(n)}Hs.has(p)||(n=b({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Hs.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(xu(p))||a==="script"&&u.querySelector(yu(p))||(a=u.createElement("link"),On(a,"link",n),cn(a),u.head.appendChild(a)))}}function uT(n,a){ma.m(n,a);var o=Eo;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ts(u)+'"][href="'+ts(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=So(n)}if(!Hs.has(p)&&(n=b({rel:"modulepreload",href:n},a),Hs.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yu(p)))return}u=o.createElement("link"),On(u,"link",n),cn(u),o.head.appendChild(u)}}}function dT(n,a,o){ma.S(n,a,o);var u=Eo;if(u&&n){var m=jr(u).hoistableStyles,p=To(n);a=a||"default";var v=m.get(p);if(!v){var E={loading:0,preload:null};if(v=u.querySelector(xu(p)))E.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Hs.get(p))&&Og(n,o);var M=v=u.createElement("link");cn(M),On(M,"link",n),M._p=new Promise(function(X,ie){M.onload=X,M.onerror=ie}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Yh(v,a,u)}v={type:"stylesheet",instance:v,count:1,state:E},m.set(p,v)}}}function hT(n,a){ma.X(n,a);var o=Eo;if(o&&n){var u=jr(o).hoistableScripts,m=So(n),p=u.get(m);p||(p=o.querySelector(yu(m)),p||(n=b({src:n,async:!0},a),(a=Hs.get(m))&&Mg(n,a),p=o.createElement("script"),cn(p),On(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function fT(n,a){ma.M(n,a);var o=Eo;if(o&&n){var u=jr(o).hoistableScripts,m=So(n),p=u.get(m);p||(p=o.querySelector(yu(m)),p||(n=b({src:n,async:!0,type:"module"},a),(a=Hs.get(m))&&Mg(n,a),p=o.createElement("script"),cn(p),On(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Bv(n,a,o,u){var m=(m=Ee.current)?Xh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=To(o.href),o=jr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=To(o.href);var p=jr(m).hoistableStyles,v=p.get(n);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=m.querySelector(xu(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Hs.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hs.set(n,o),p||mT(m,n,o,v.state))),a&&u===null)throw Error(s(528,""));return v}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=So(o),o=jr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function To(n){return'href="'+ts(n)+'"'}function xu(n){return'link[rel="stylesheet"]['+n+"]"}function qv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function mT(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),On(a,"link",o),cn(a),n.head.appendChild(a))}function So(n){return'[src="'+ts(n)+'"]'}function yu(n){return"script[async]"+n}function Fv(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+ts(o.href)+'"]');if(u)return a.instance=u,cn(u),u;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),cn(u),On(u,"style",m),Yh(u,o.precedence,n),a.instance=u;case"stylesheet":m=To(o.href);var p=n.querySelector(xu(m));if(p)return a.state.loading|=4,a.instance=p,cn(p),p;u=qv(o),(m=Hs.get(m))&&Og(u,m),p=(n.ownerDocument||n).createElement("link"),cn(p);var v=p;return v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),On(p,"link",u),a.state.loading|=4,Yh(p,o.precedence,n),a.instance=p;case"script":return p=So(o.src),(m=n.querySelector(yu(p)))?(a.instance=m,cn(m),m):(u=o,(m=Hs.get(p))&&(u=b({},o),Mg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),cn(m),On(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Yh(u,o.precedence,n));return a.instance}function Yh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,v=0;v<u.length;v++){var E=u[v];if(E.dataset.precedence===a)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Og(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Mg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Jh=null;function Hv(n,a,o){if(Jh===null){var u=new Map,m=Jh=new Map;m.set(o,u)}else m=Jh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[_r]||p[gt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=n+v;var E=u.get(v);E?E.push(p):u.set(v,[p])}}return u}function Gv(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function gT(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function $v(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function pT(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=To(u.href),p=a.querySelector(xu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Wh.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,cn(p);return}p=a.ownerDocument||a,u=qv(u),(m=Hs.get(m))&&Og(u,m),p=p.createElement("link"),cn(p);var v=p;v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),On(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Wh.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var Vg=0;function xT(n,a){return n.stylesheets&&n.count===0&&ef(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&ef(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&Vg===0&&(Vg=62500*JE());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ef(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Vg?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zh=null;function ef(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zh=new Map,a.forEach(yT,n),Zh=null,Wh.call(n))}function yT(n,a){if(!(a.state.loading&4)){var o=Zh.get(n);if(o)var u=o.get(null);else{o=new Map,Zh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}m=a.instance,v=m.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,m),o.set(v,m),this.count++,u=Wh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var bu={$$typeof:$,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function bT(n,a,o,u,m,p,v,E,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Kv(n,a,o,u,m,p,v,E,M,X,ie,he){return n=new bT(n,a,o,v,M,X,ie,he,E),a=1,p===!0&&(a|=24),p=bs(3,null,null,a),n.current=p,p.stateNode=n,a=g0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},b0(p),n}function Qv(n){return n?(n=so,n):so}function Xv(n,a,o,u,m,p){m=Qv(m),u.context===null?u.context=m:u.pendingContext=m,u=Ka(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Qa(n,u,a),o!==null&&(ls(o,n,a),Jc(o,n,a))}function Yv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Pg(n,a){Yv(n,a),(n=n.alternate)&&Yv(n,a)}function Jv(n){if(n.tag===13||n.tag===31){var a=Yi(n,67108864);a!==null&&ls(a,n,67108864),Pg(n,67108864)}}function Wv(n){if(n.tag===13||n.tag===31){var a=js();a=Oe(a);var o=Yi(n,a);o!==null&&ls(o,n,a),Pg(n,a)}}var tf=!0;function vT(n,a,o,u){var m=G.T;G.T=null;var p=ce.p;try{ce.p=2,Lg(n,a,o,u)}finally{ce.p=p,G.T=m}}function wT(n,a,o,u){var m=G.T;G.T=null;var p=ce.p;try{ce.p=8,Lg(n,a,o,u)}finally{ce.p=p,G.T=m}}function Lg(n,a,o,u){if(tf){var m=zg(u);if(m===null)jg(n,a,u,nf,o),ew(n,u);else if(NT(m,n,a,o,u))u.stopPropagation();else if(ew(n,u),a&4&&-1<_T.indexOf(n)){for(;m!==null;){var p=Ds(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Zt(p.pendingLanes);if(v!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var M=1<<31-st(v);E.entanglements[1]|=M,v&=~M}Pr(p),(xt&6)===0&&(Lh=ln()+500,fu(0))}}break;case 31:case 13:E=Yi(p,2),E!==null&&ls(E,p,2),Uh(),Pg(p,2)}if(p=zg(u),p===null&&jg(n,a,u,nf,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else jg(n,a,u,null,o)}}function zg(n){return n=Os(n),Ug(n)}var nf=null;function Ug(n){if(nf=null,n=Nr(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return nf=n,null}function Zv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Js()){case Ws:return 2;case vr:return 8;case Rs:case Ra:return 32;case fs:return 268435456;default:return 32}default:return 32}}var Bg=!1,ai=null,ii=null,li=null,vu=new Map,wu=new Map,oi=[],_T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ew(n,a){switch(n){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":vu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(a.pointerId)}}function _u(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Ds(a),a!==null&&Jv(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function NT(n,a,o,u,m){switch(a){case"focusin":return ai=_u(ai,n,a,o,u,m),!0;case"dragenter":return ii=_u(ii,n,a,o,u,m),!0;case"mouseover":return li=_u(li,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return vu.set(p,_u(vu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,wu.set(p,_u(wu.get(p)||null,n,a,o,u,m)),!0}return!1}function tw(n){var a=Nr(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Ze(n.priority,function(){Wv(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,Ze(n.priority,function(){Wv(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sf(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=zg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Mc=u,o.target.dispatchEvent(u),Mc=null}else return a=Ds(o),a!==null&&Jv(a),n.blockedOn=o,!1;a.shift()}return!0}function nw(n,a,o){sf(n)&&o.delete(a)}function jT(){Bg=!1,ai!==null&&sf(ai)&&(ai=null),ii!==null&&sf(ii)&&(ii=null),li!==null&&sf(li)&&(li=null),vu.forEach(nw),wu.forEach(nw)}function rf(n,a){n.blockedOn===a&&(n.blockedOn=null,Bg||(Bg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jT)))}var af=null;function sw(n){af!==n&&(af=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){af===n&&(af=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Ug(u||o)===null)continue;break}var p=Ds(o);p!==null&&(n.splice(a,3),a-=3,z0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ao(n){function a(M){return rf(M,n)}ai!==null&&rf(ai,n),ii!==null&&rf(ii,n),li!==null&&rf(li,n),vu.forEach(a),wu.forEach(a);for(var o=0;o<oi.length;o++){var u=oi[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<oi.length&&(o=oi[0],o.blockedOn===null);)tw(o),o.blockedOn===null&&oi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],v=m[on]||null;if(typeof p=="function")v||sw(o);else if(v){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[on]||null)E=v.formAction;else if(Ug(m)!==null)continue}else E=v.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),sw(o)}}}function rw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function qg(n){this._internalRoot=n}lf.prototype.render=qg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=js();Xv(o,u,n,a,null,null)},lf.prototype.unmount=qg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Xv(n.current,2,null,n,null,null),Uh(),a[wr]=null}};function lf(n){this._internalRoot=n}lf.prototype.unstable_scheduleHydration=function(n){if(n){var a=kt();n={blockedOn:null,target:n,priority:a};for(var o=0;o<oi.length&&a!==0&&a<oi[o].priority;o++);oi.splice(o,0,n),o===0&&tw(n)}};var aw=e.version;if(aw!=="19.2.0")throw Error(s(527,aw,"19.2.0"));ce.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var ET={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{le=of.inject(ET),Ge=of}catch{}}return ju.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=h1,p=f1,v=m1;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Kv(n,1,!1,null,null,o,u,null,m,p,v,rw),n[wr]=a.current,Ng(n),new qg(a)},ju.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=h1,v=f1,E=m1,M=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(M=o.formState)),a=Kv(n,1,!0,a,o??null,u,m,M,p,v,E,rw),a.context=Qv(null),o=a.current,u=js(),u=Oe(u),m=Ka(u),m.callback=null,Qa(o,m,u),o=u,a.current.lanes=o,fe(a,o),Pr(a),n[wr]=a.current,Ng(n),new lf(a)},ju.version="19.2.0",ju}var gw;function MT(){if(gw)return Gg.exports;gw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gg.exports=OT(),Gg.exports}var VT=MT();const PT=L_(VT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),pw=r=>{const e=zT(r);return e.charAt(0).toUpperCase()+e.slice(1)},U_=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),UT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=O.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>O.createElement("svg",{ref:g,...BT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:U_("lucide",l),...!c&&!UT(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,w])=>O.createElement(x,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(r,e)=>{const t=O.forwardRef(({className:s,...l},c)=>O.createElement(qT,{ref:c,iconNode:e,className:U_(`lucide-${LT(pw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=pw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],HT=xe("activity",FT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fx=xe("arrow-left",GT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ot=xe("arrow-right",$T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],xd=xe("award",KT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xg=xe("ban",QT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cf=xe("bell",XT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Pn=xe("book-open",YT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Yu=xe("book",JT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],mx=xe("brain",WT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],B_=xe("briefcase",ZT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ju=xe("calendar",eS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],q_=xe("chart-column",tS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],F_=xe("check",nS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ti=xe("chevron-down",sS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zr=xe("chevron-left",rS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yg=xe("chevron-right",aS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mf=xe("circle-alert",iS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wa=xe("circle-check-big",lS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yt=xe("circle-check",oS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],H_=xe("circle-play",cS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],xw=xe("circle-plus",uS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dr=xe("circle-question-mark",dS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],fS=xe("circle-user",hS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gS=xe("circle-x",mS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wu=xe("clock",pS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],yS=xe("cloud-download",xS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],G_=xe("cloud-upload",bS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],wS=xe("coffee",vS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gx=xe("copy",_S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$_=xe("credit-card",NS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Vn=xe("crown",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jp=xe("download",ES);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],K_=xe("ellipsis",TS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ep=xe("eye",SS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Ko=xe("facebook",AS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],CS=xe("file-check",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],kS=xe("file-plus",RS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],OS=xe("file-search",DS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gn=xe("file-text",MS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],px=xe("flag",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Vf=xe("flame",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Uo=xe("folder-open",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],US=xe("globe",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Qr=xe("graduation-cap",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Zu=xe("house",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q_=xe("info",FS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],X_=xe("instagram",HS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],yd=xe("languages",GS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Qo=xe("layers",$S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],yw=xe("layout-dashboard",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],XS=xe("link",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],JS=xe("list",YS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ut=xe("loader-circle",WS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Tp=xe("log-in",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ur=xe("lock",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ed=xe("log-out",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Br=xe("mail",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Sp=xe("map-pin",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],aA=xe("map",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ap=xe("medal",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],bw=xe("megaphone",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],cA=xe("menu",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Si=xe("message-circle",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],pm=xe("message-square",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],El=xe("monitor",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],Y_=xe("move-right",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],gA=xe("octagon-alert",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],vw=xe("palette",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],yA=xe("pen-line",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],xm=xe("pen-tool",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],wA=xe("percent",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],NA=xe("quote",_A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bd=xe("refresh-cw",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],J_=xe("rocket",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],W_=xe("rotate-ccw",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vi=xe("save",SA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],xx=xe("school",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],us=xe("search",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ya=xe("send",CA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Pf=xe("share-2",RA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],DA=xe("shield-alert",kA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yx=xe("shield-check",OA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],VA=xe("smartphone",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Z_=xe("sparkles",PA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ip=xe("square-pen",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Tl=xe("star",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],eN=xe("tag",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ym=xe("target",BA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],FA=xe("text-align-start",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],tN=xe("timer",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_a=xe("trash-2",GA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],KA=xe("trending-up",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bx=xe("triangle-alert",QA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],vl=xe("trophy",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],JA=xe("type",YA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ZA=xe("user-check",WA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yn=xe("user",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xo=xe("users",t3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],s3=xe("wifi-off",n3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hn=xe("x",r3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gc=xe("zap",a3),i3=()=>{};var ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},l3=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},sN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,w=c>>2,b=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,C=x&63;g||(C=64,d||(N=64)),s.push(t[w],t[b],t[N],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nN(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):l3(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const b=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||b==null)throw new o3;const N=c<<2|f>>4;if(s.push(N),x!==64){const C=f<<4&240|x>>2;if(s.push(C),b!==64){const Y=x<<6&192|b;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class o3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c3=function(r){const e=nN(r);return sN.encodeByteArray(e,!0)},rN=function(r){return c3(r).replace(/\./g,"")},aN=function(r){try{return sN.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=()=>iN().__FIREBASE_DEFAULTS__,d3=()=>{if(typeof process>"u"||typeof ww>"u")return;const r=ww.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},h3=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&aN(r[1]);return e&&JSON.parse(e)},bm=()=>{try{return i3()||u3()||d3()||h3()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},f3=r=>{var e,t;return(t=(e=bm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},lN=()=>{var r;return(r=bm())==null?void 0:r.config},oN=r=>{var e;return(e=bm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cN(r){return(await fetch(r,{credentials:"include"})).ok}const Lu={};function g3(){const r={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?r.emulator.push(e):r.prod.push(e);return r}function p3(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let _w=!1;function x3(r,e){if(typeof window>"u"||typeof document>"u"||!pc(window.location.host)||Lu[r]===e||Lu[r]||_w)return;Lu[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=g3().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{_w=!0,d()},N}function w(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function b(){const N=p3(s),C=t("text"),Y=document.getElementById(C)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),U=t("preprendIcon"),ae=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const $=N.element;f($),w(F,V);const de=x();g(ae,U),$.append(ae,Y,F,de),document.body.appendChild($)}c?(Y.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function uN(){var e;const r=(e=bm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function v3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w3(){const r=_n();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hN(){return!uN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fN(){return!uN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vx(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function _3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="FirebaseError";class xr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=N3,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?j3(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new xr(l,f,s)}}function j3(r,e){return r.replace(E3,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const E3=/\{\$([^}]+)}/g;function T3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ai(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(Nw(c)&&Nw(d)){if(!Ai(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function Nw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ru(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function ku(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function S3(r,e){const t=new A3(r,e);return t.subscribe.bind(t)}class A3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");I3(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=Jg),l.error===void 0&&(l.error=Jg),l.complete===void 0&&(l.complete=Jg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I3(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Jg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=1e3,R3=2,k3=14400*1e3,D3=.5;function jw(r,e=C3,t=R3){const s=e*Math.pow(t,r),l=Math.round(D3*s*(Math.random()-.5)*2);return Math.min(k3,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(r){return r&&r._delegate?r._delegate:r}class mr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new m3;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V3(e))try{this.getOrInitializeService({instanceIdentifier:dl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=dl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dl){return this.instances.has(e)}getOptions(e=dl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:M3(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=dl){return this.component?this.component.multipleInstances?e:dl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M3(r){return r===dl?void 0:r}function V3(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new O3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const L3={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},z3=it.INFO,U3={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},B3=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=U3[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=z3,this._logHandler=B3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const q3=(r,e)=>e.some(t=>r instanceof t);let Ew,Tw;function F3(){return Ew||(Ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H3(){return Tw||(Tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gN=new WeakMap,Cp=new WeakMap,pN=new WeakMap,Wg=new WeakMap,wx=new WeakMap;function G3(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(wi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&gN.set(t,r)}).catch(()=>{}),wx.set(e,r),e}function $3(r){if(Cp.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Cp.set(r,e)}let Rp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||pN.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function K3(r){Rp=r(Rp)}function Q3(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Zg(this),e,...t);return pN.set(s,e.sort?e.sort():[e]),wi(s)}:H3().includes(r)?function(...e){return r.apply(Zg(this),e),wi(gN.get(this))}:function(...e){return wi(r.apply(Zg(this),e))}}function X3(r){return typeof r=="function"?Q3(r):(r instanceof IDBTransaction&&$3(r),q3(r,F3())?new Proxy(r,Rp):r)}function wi(r){if(r instanceof IDBRequest)return G3(r);if(Wg.has(r))return Wg.get(r);const e=X3(r);return e!==r&&(Wg.set(r,e),wx.set(e,r)),e}const Zg=r=>wx.get(r);function xN(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=wi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(wi(d.result),g.oldVersion,g.newVersion,wi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const Y3=["get","getKey","getAll","getAllKeys","count"],J3=["put","add","delete","clear"],ep=new Map;function Sw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ep.get(e))return ep.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=J3.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Y3.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return ep.set(e,c),c}K3(r=>({...r,get:(e,t,s)=>Sw(e,t)||r.get(e,t,s),has:(e,t)=>!!Sw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z3(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Z3(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",Aw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new vm("@firebase/app"),eI="@firebase/app-compat",tI="@firebase/analytics-compat",nI="@firebase/analytics",sI="@firebase/app-check-compat",rI="@firebase/app-check",aI="@firebase/auth",iI="@firebase/auth-compat",lI="@firebase/database",oI="@firebase/data-connect",cI="@firebase/database-compat",uI="@firebase/functions",dI="@firebase/functions-compat",hI="@firebase/installations",fI="@firebase/installations-compat",mI="@firebase/messaging",gI="@firebase/messaging-compat",pI="@firebase/performance",xI="@firebase/performance-compat",yI="@firebase/remote-config",bI="@firebase/remote-config-compat",vI="@firebase/storage",wI="@firebase/storage-compat",_I="@firebase/firestore",NI="@firebase/ai",jI="@firebase/firestore-compat",EI="firebase",TI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",SI={[kp]:"fire-core",[eI]:"fire-core-compat",[nI]:"fire-analytics",[tI]:"fire-analytics-compat",[rI]:"fire-app-check",[sI]:"fire-app-check-compat",[aI]:"fire-auth",[iI]:"fire-auth-compat",[lI]:"fire-rtdb",[oI]:"fire-data-connect",[cI]:"fire-rtdb-compat",[uI]:"fire-fn",[dI]:"fire-fn-compat",[hI]:"fire-iid",[fI]:"fire-iid-compat",[mI]:"fire-fcm",[gI]:"fire-fcm-compat",[pI]:"fire-perf",[xI]:"fire-perf-compat",[yI]:"fire-rc",[bI]:"fire-rc-compat",[vI]:"fire-gcs",[wI]:"fire-gcs-compat",[_I]:"fire-fst",[jI]:"fire-fst-compat",[NI]:"fire-vertex","fire-js":"fire-js",[EI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Map,AI=new Map,Op=new Map;function Iw(r,e){try{r.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xr(r){const e=r.name;if(Op.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;Op.set(e,r);for(const t of Lf.values())Iw(t,r);for(const t of AI.values())Iw(t,r);return!0}function zl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Gs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new Ll("app","Firebase",II);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=TI;function yN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Dp,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw _i.create("bad-app-name",{appName:String(l)});if(t||(t=lN()),!t)throw _i.create("no-options");const c=Lf.get(l);if(c){if(Ai(t,c.options)&&Ai(s,c.config))return c;throw _i.create("duplicate-app",{appName:l})}const d=new P3(l);for(const g of Op.values())d.addComponent(g);const f=new CI(t,s,d);return Lf.set(l,f),f}function bN(r=Dp){const e=Lf.get(r);if(!e&&r===Dp&&lN())return yN();if(!e)throw _i.create("no-app",{appName:r});return e}function Ks(r,e,t){let s=SI[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(d.join(" "));return}Xr(new mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebase-heartbeat-database",kI=1,td="firebase-heartbeat-store";let tp=null;function vN(){return tp||(tp=xN(RI,kI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(td)}catch(t){console.warn(t)}}}}).catch(r=>{throw _i.create("idb-open",{originalErrorMessage:r.message})})),tp}async function DI(r){try{const t=(await vN()).transaction(td),s=await t.objectStore(td).get(wN(r));return await t.done,s}catch(e){if(e instanceof xr)Na.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Na.warn(t.message)}}}async function Cw(r,e){try{const s=(await vN()).transaction(td,"readwrite");await s.objectStore(td).put(e,wN(r)),await s.done}catch(t){if(t instanceof xr)Na.warn(t.message);else{const s=_i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Na.warn(s.message)}}}function wN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=1024,MI=30;class VI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Rw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>MI){const d=zI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Na.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Rw(),{heartbeatsToSend:s,unsentEntries:l}=PI(this._heartbeatsCache.heartbeats),c=rN(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Na.warn(t),""}}}function Rw(){return new Date().toISOString().substring(0,10)}function PI(r,e=OI){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),kw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),kw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class LI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vx()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kw(r){return rN(JSON.stringify({version:2,heartbeats:r})).length}function zI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r){Xr(new mr("platform-logger",e=>new W3(e),"PRIVATE")),Xr(new mr("heartbeat",e=>new VI(e),"PRIVATE")),Ks(kp,Aw,r),Ks(kp,Aw,"esm2020"),Ks("fire-js","")}UI("");var BI="firebase",qI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(BI,qI,"app");function _N(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FI=_N,NN=new Ll("auth","Firebase",_N());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new vm("@firebase/auth");function HI(r,...e){zf.logLevel<=it.WARN&&zf.warn(`Auth (${xc}): ${r}`,...e)}function bf(r,...e){zf.logLevel<=it.ERROR&&zf.error(`Auth (${xc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(r,...e){throw _x(r,...e)}function Hr(r,...e){return _x(r,...e)}function jN(r,e,t){const s={...FI(),[e]:t};return new Ll("auth","Firebase",s).create(e,{appName:r.name})}function ba(r){return jN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _x(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return NN.create(r,...e)}function Ue(r,e,...t){if(!r)throw _x(e,...t)}function ga(r){const e="INTERNAL ASSERTION FAILED: "+r;throw bf(e),new Error(e)}function ja(r,e){r||ga(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function GI(){return Dw()==="http:"||Dw()==="https:"}function Dw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GI()||dN()||"connection"in navigator)?navigator.onLine:!0}function KI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ja(t>e,"Short delay should be less than long delay!"),this.isMobile=y3()||v3()}get(){return $I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(r,e){ja(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ga("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ga("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ga("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YI=new wd(3e4,6e4);function Sa(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Aa(r,e,t,s,l={}){return TN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=vd({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return b3()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&pc(r.emulatorConfig.host)&&(x.credentials="include"),EN.fetch()(await SN(r,r.config.apiHost,t,f),x)})}async function TN(r,e,t){r._canInitEmulator=!1;const s={...QI,...e};try{const l=new WI(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw uf(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw uf(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw uf(r,"user-disabled",d);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw jN(r,w,x);gr(r,w)}}catch(l){if(l instanceof xr)throw l;gr(r,"network-request-failed",{message:String(l)})}}async function _d(r,e,t,s,l={}){const c=await Aa(r,e,t,s,l);return"mfaPendingCredential"in c&&gr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function SN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?Nx(r.config,l):`${r.config.apiScheme}://${l}`;return XI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function JI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Hr(this.auth,"network-request-failed")),YI.get())})}}function uf(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Hr(r,e,s);return l.customData._tokenResponse=t,l}function Ow(r){return r!==void 0&&r.enterprise!==void 0}class ZI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e6(r,e){return Aa(r,"GET","/v2/recaptchaConfig",Sa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(r,e){return Aa(r,"POST","/v1/accounts:delete",e)}async function Uf(r,e){return Aa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n6(r,e=!1){const t=Gt(r),s=await t.getIdToken(e),l=jx(s);Ue(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:zu(np(l.auth_time)),issuedAtTime:zu(np(l.iat)),expirationTime:zu(np(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function np(r){return Number(r)*1e3}function jx(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const l=aN(t);return l?JSON.parse(l):(bf("Failed to decode base64 JWT payload"),null)}catch(l){return bf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Mw(r){const e=jx(r);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xr&&s6(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function s6({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(r){var b;const e=r.auth,t=await r.getIdToken(),s=await nd(r,Uf(e,{idToken:t}));Ue(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(b=l.providerUserInfo)!=null&&b.length?AN(l.providerUserInfo):[],d=i6(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,w)}async function a6(r){const e=Gt(r);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i6(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function AN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(r,e){const t=await TN(r,{},async()=>{const s=vd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await SN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&pc(r.emulatorConfig.host)&&(g.credentials="include"),EN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function o6(r,e){return Aa(r,"POST","/v2/accounts:revokeToken",Sa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=Mw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await l6(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new qo;return s&&(Ue(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Ue(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ue(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return ga("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(r,e){Ue(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new r6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await nd(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return n6(this,e)}reload(){return a6(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gs(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await nd(this,t6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:N,isAnonymous:C,providerData:Y,stsTokenManager:V}=t;Ue(b&&V,e,"internal-error");const F=qo.fromJSON(this.name,V);Ue(typeof b=="string",e,"internal-error"),ui(s,e.name),ui(l,e.name),Ue(typeof N=="boolean",e,"internal-error"),Ue(typeof C=="boolean",e,"internal-error"),ui(c,e.name),ui(d,e.name),ui(f,e.name),ui(g,e.name),ui(x,e.name),ui(w,e.name);const U=new hr({uid:b,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:F,createdAt:x,lastLoginAt:w});return Y&&Array.isArray(Y)&&(U.providerData=Y.map(ae=>({...ae}))),g&&(U._redirectEventId=g),U}static async _fromIdTokenResponse(e,t,s=!1){const l=new qo;l.updateFromServerResponse(t);const c=new hr({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Bf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Ue(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?AN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new qo;f.updateFromIdToken(s);const g=new hr({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;function pa(r){ja(r instanceof Function,"Expected a class definition");let e=Vw.get(r);return e?(ja(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Vw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IN.type="NONE";const Pw=IN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(r,e,t){return`firebase:${r}:${e}:${t}`}class Fo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=vf(this.userKey,l.apiKey,c),this.fullPersistenceKey=vf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uf(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Fo(pa(Pw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||pa(Pw);const d=vf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const w=await x._get(d);if(w){let b;if(typeof w=="string"){const N=await Uf(e,{idToken:w}).catch(()=>{});if(!N)break;b=await hr._fromGetAccountInfoResponse(e,N,w)}else b=hr._fromJSON(e,w);x!==c&&(f=b),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Fo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Fo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MN(e))return"Blackberry";if(VN(e))return"Webos";if(RN(e))return"Safari";if((e.includes("chrome/")||kN(e))&&!e.includes("edge/"))return"Chrome";if(ON(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CN(r=_n()){return/firefox\//i.test(r)}function RN(r=_n()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kN(r=_n()){return/crios\//i.test(r)}function DN(r=_n()){return/iemobile/i.test(r)}function ON(r=_n()){return/android/i.test(r)}function MN(r=_n()){return/blackberry/i.test(r)}function VN(r=_n()){return/webos/i.test(r)}function Ex(r=_n()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function c6(r=_n()){var e;return Ex(r)&&!!((e=window.navigator)!=null&&e.standalone)}function u6(){return w3()&&document.documentMode===10}function PN(r=_n()){return Ex(r)||ON(r)||VN(r)||MN(r)||/windows phone/i.test(r)||DN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(r,e=[]){let t;switch(r){case"Browser":t=Lw(_n());break;case"Worker":t=`${Lw(_n())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(r,e={}){return Aa(r,"GET","/v2/passwordPolicy",Sa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=6;class m6{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??f6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zw(this),this.idTokenSubscription=new zw(this),this.beforeStateQueue=new d6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pa(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uf(this,{idToken:e}),s=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Gs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gs(this.app))return Promise.reject(ba(this));const t=e?Gt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gs(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gs(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h6(this),t=new m6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await o6(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pa(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[pa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&HI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oi(r){return Gt(r)}class zw{constructor(e){this.auth=e,this.observer=null,this.addObserver=S3(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p6(r){wm=r}function zN(r){return wm.loadJS(r)}function x6(){return wm.recaptchaEnterpriseScript}function y6(){return wm.gapiScript}function b6(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class v6{constructor(){this.enterprise=new w6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class w6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _6="recaptcha-enterprise",UN="NO_RECAPTCHA";class N6{constructor(e){this.type=_6,this.auth=Oi(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{e6(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new ZI(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;Ow(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(UN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new v6().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&Ow(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=x6();g.length!==0&&(g+=f),zN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Uw(r,e,t,s=!1,l=!1){const c=new N6(r);let d;if(l)d=UN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function qf(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Uw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Uw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(r,e){const t=zl(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(Ai(c,e??{}))return l;gr(l,"already-initialized")}return t.initialize({options:e})}function E6(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(pa);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function T6(r,e,t){const s=Oi(r);Ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=BN(e),{host:d,port:f}=S6(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ue(Ai(x,s.config.emulator)&&Ai(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,pc(d)?(cN(`${c}//${d}${g}`),x3("Auth",!0)):A6()}function BN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function S6(r){const e=BN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Bw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Bw(d)}}}function Bw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function A6(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ga("not implemented")}_getIdTokenResponse(e){return ga("not implemented")}_linkToIdToken(e,t){return ga("not implemented")}_getReauthenticationResolver(e){return ga("not implemented")}}async function I6(r,e){return Aa(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(r,e){return _d(r,"POST","/v1/accounts:signInWithPassword",Sa(r,e))}async function R6(r,e){return Aa(r,"POST","/v1/accounts:sendOobCode",Sa(r,e))}async function k6(r,e){return R6(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D6(r,e){return _d(r,"POST","/v1/accounts:signInWithEmailLink",Sa(r,e))}async function O6(r,e){return _d(r,"POST","/v1/accounts:signInWithEmailLink",Sa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Tx{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new sd(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new sd(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qf(e,t,"signInWithPassword",C6);case"emailLink":return D6(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qf(e,s,"signUpPassword",I6);case"emailLink":return O6(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(r,e){return _d(r,"POST","/v1/accounts:signInWithIdp",Sa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="http://localhost";class Sl extends Tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new Sl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ho(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:M6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function P6(r){const e=Ru(ku(r)).link,t=e?Ru(ku(e)).deep_link_id:null,s=Ru(ku(r)).deep_link_id;return(s?Ru(ku(s)).link:null)||s||t||e||r}class Sx{constructor(e){const t=Ru(ku(e)),s=t.apiKey??null,l=t.oobCode??null,c=V6(t.mode??null);Ue(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=P6(e);try{return new Sx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.providerId=yc.PROVIDER_ID}static credential(e,t){return sd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Sx.parseLink(t);return Ue(s,"argument-error"),sd._fromEmailAndCode(e,s.code,s.tenantId)}}yc.PROVIDER_ID="password";yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends qN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Nd{constructor(){super("facebook.com")}static credential(e){return Sl._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Nd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sl._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return gi.credential(t,s)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Nd{constructor(){super("github.com")}static credential(e){return Sl._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Nd{constructor(){super("twitter.com")}static credential(e,t){return Sl._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return xi.credential(t,s)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(r,e){return _d(r,"POST","/v1/accounts:signUp",Sa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await hr._fromIdTokenResponse(e,s,l),d=qw(s);return new Al({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=qw(s);return new Al({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function qw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends xr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new Ff(e,t,s,l)}}function FN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ff._fromErrorAndOperation(r,c,e,s):c})}async function z6(r,e,t=!1){const s=await nd(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Al._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(r,e,t=!1){const{auth:s}=r;if(Gs(s.app))return Promise.reject(ba(s));const l="reauthenticate";try{const c=await nd(r,FN(s,l,e,r),t);Ue(c.idToken,s,"internal-error");const d=jx(c.idToken);Ue(d,s,"internal-error");const{sub:f}=d;return Ue(r.uid===f,s,"user-mismatch"),Al._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&gr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(r,e,t=!1){if(Gs(r.app))return Promise.reject(ba(r));const s="signIn",l=await FN(r,s,e),c=await Al._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function B6(r,e){return HN(Oi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(r){const e=Oi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q6(r,e,t){const s=Oi(r);await qf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",k6)}async function F6(r,e,t){if(Gs(r.app))return Promise.reject(ba(r));const s=Oi(r),d=await qf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",L6).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&GN(r),g}),f=await Al._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function H6(r,e,t){return Gs(r.app)?Promise.reject(ba(r)):B6(Gt(r),yc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GN(r),s})}function G6(r,e,t,s){return Gt(r).onIdTokenChanged(e,t,s)}function $6(r,e,t){return Gt(r).beforeAuthStateChanged(e,t)}function K6(r,e,t,s){return Gt(r).onAuthStateChanged(e,t,s)}function Q6(r){return Gt(r).signOut()}const Hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hf,"1"),this.storage.removeItem(Hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=1e3,Y6=10;class KN extends $N{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);u6()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Y6):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},X6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KN.type="LOCAL";const J6=KN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN extends $N{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QN.type="SESSION";const XN=QN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new _m(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await W6(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=Ax("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(b){const N=b;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function eC(r){Gr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function sC(){return YN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebaseLocalStorageDb",rC=1,Gf="firebaseLocalStorage",WN="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nm(r,e){return r.transaction([Gf],e?"readwrite":"readonly").objectStore(Gf)}function aC(){const r=indexedDB.deleteDatabase(JN);return new jd(r).toPromise()}function Pp(){const r=indexedDB.open(JN,rC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gf,{keyPath:WN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gf)?e(s):(s.close(),await aC(),e(await Pp()))})})}async function Fw(r,e,t){const s=Nm(r,!0).put({[WN]:e,value:t});return new jd(s).toPromise()}async function iC(r,e){const t=Nm(r,!1).get(e),s=await new jd(t).toPromise();return s===void 0?null:s.value}function Hw(r,e){const t=Nm(r,!0).delete(e);return new jd(t).toPromise()}const lC=800,oC=3;class ZN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>oC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new Z6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await Fw(e,Hf,"1"),await Hw(e,Hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>iC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Nm(l,!1).getAll();return new jd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZN.type="LOCAL";const cC=ZN;new wd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(r,e){return e?pa(e):(Ue(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dC(r){return HN(r.auth,new Ix(r),r.bypassAuthState)}function hC(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),U6(t,new Ix(r),r.bypassAuthState)}async function fC(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),z6(t,new Ix(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return hC;default:gr(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new wd(2e3,1e4);class Bo extends e4{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ja(this.filter.length===1,"Popup operations only handle one event");const e=Ax();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="pendingRedirect",wf=new Map;class pC extends e4{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=wf.get(this.auth._key());if(!e){try{const s=await xC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}wf.set(this.auth._key(),e)}return this.bypassAuthState||wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xC(r,e){const t=vC(e),s=bC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function yC(r,e){wf.set(r._key(),e)}function bC(r){return pa(r._redirectPersistence)}function vC(r){return vf(gC,r.config.apiKey,r.name)}async function wC(r,e,t=!1){if(Gs(r.app))return Promise.reject(ba(r));const s=Oi(r),l=uC(s,e),d=await new pC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=600*1e3;class NC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!t4(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Hr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_C&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gw(e))}saveEventToCache(e){this.cachedEventUids.add(Gw(e)),this.lastProcessedEventTime=Date.now()}}function Gw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function t4({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t4(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(r,e={}){return Aa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SC=/^https?/;async function AC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await EC(r);for(const t of e)try{if(IC(t))return}catch{}gr(r,"unauthorized-domain")}function IC(r){const e=Mp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!SC.test(t))return!1;if(TC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new wd(3e4,6e4);function $w(){const r=Gr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function RC(r){return new Promise((e,t)=>{var l,c,d;function s(){$w(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$w(),t(Hr(r,"network-request-failed"))},timeout:CC.get()})}if((c=(l=Gr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Gr().gapi)!=null&&d.load)s();else{const f=b6("iframefcb");return Gr()[f]=()=>{gapi.load?s():t(Hr(r,"network-request-failed"))},zN(`${y6()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw _f=null,e})}let _f=null;function kC(r){return _f=_f||RC(r),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new wd(5e3,15e3),OC="__/auth/iframe",MC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LC(r){const e=r.config;Ue(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Nx(e,MC):`https://${r.config.authDomain}/${OC}`,s={apiKey:e.apiKey,appName:r.name,v:xc},l=PC.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${vd(s).slice(1)}`}async function zC(r){const e=await kC(r),t=Gr().gapi;return Ue(t,r,"internal-error"),e.open({where:document.body,url:LC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Hr(r,"network-request-failed"),f=Gr().setTimeout(()=>{c(d)},DC.get());function g(){Gr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BC=500,qC=600,FC="_blank",HC="http://localhost";class Kw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(r,e,t,s=BC,l=qC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...UC,width:s.toString(),height:l.toString(),top:c,left:d},x=_n().toLowerCase();t&&(f=kN(x)?FC:t),CN(x)&&(e=e||HC,g.scrollbars="yes");const w=Object.entries(g).reduce((N,[C,Y])=>`${N}${C}=${Y},`,"");if(c6(x)&&f!=="_self")return $C(e||"",f),new Kw(null);const b=window.open(e||"",f,w);Ue(b,r,"popup-blocked");try{b.focus()}catch{}return new Kw(b)}function $C(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__/auth/handler",QC="emulator/auth/handler",XC=encodeURIComponent("fac");async function Qw(r,e,t,s,l,c){Ue(r.config.authDomain,r,"auth-domain-config-required"),Ue(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:xc,eventId:l};if(e instanceof qN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",T3(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))d[w]=b}if(e instanceof Nd){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),x=g?`#${XC}=${encodeURIComponent(g)}`:"";return`${YC(r)}?${vd(f).slice(1)}${x}`}function YC({config:r}){return r.emulator?Nx(r,QC):`https://${r.authDomain}/${KC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class JC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XN,this._completeRedirectFn=wC,this._overrideRedirectResult=yC}async _openPopup(e,t,s,l){var d;ja((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Qw(e,t,s,Mp(),l);return GC(e,c,Ax())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Qw(e,t,s,Mp(),l);return eC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(ja(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await zC(e),s=new NC(e);return t.register("authEvent",l=>(Ue(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sp,{type:sp},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[sp];c!==void 0&&t(!!c),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PN()||RN()||Ex()}}const WC=JC;var Xw="@firebase/auth",Yw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tR(r){Xr(new mr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Ue(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LN(r)},x=new g6(s,l,c,g);return E6(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xr(new mr("auth-internal",e=>{const t=Oi(e.getProvider("auth").getImmediate());return(s=>new ZC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(Xw,Yw,eR(r)),Ks(Xw,Yw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=300,sR=oN("authIdTokenMaxAge")||nR;let Jw=null;const rR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>sR)return;const l=t==null?void 0:t.token;Jw!==l&&(Jw=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function aR(r=bN()){const e=zl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=j6(r,{popupRedirectResolver:WC,persistence:[cC,J6,XN]}),s=oN("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=rR(c.toString());$6(t,d,()=>d(t.currentUser)),G6(t,f=>d(f))}}const l=f3("auth");return l&&T6(t,`http://${l}`),t}function iR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}p6({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Hr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",iR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tR("Browser");var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,n4;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,T){function A(){}A.prototype=T.prototype,j.F=T.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(R,D,L){for(var k=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)k[ge-2]=arguments[ge];return T.prototype[D].apply(R,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(j,T,A){A||(A=0);const R=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)R[D]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(D=0;D<16;++D)R[D]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=j.g[0],A=j.g[1],D=j.g[2];let L=j.g[3],k;k=T+(L^A&(D^L))+R[0]+3614090360&4294967295,T=A+(k<<7&4294967295|k>>>25),k=L+(D^T&(A^D))+R[1]+3905402710&4294967295,L=T+(k<<12&4294967295|k>>>20),k=D+(A^L&(T^A))+R[2]+606105819&4294967295,D=L+(k<<17&4294967295|k>>>15),k=A+(T^D&(L^T))+R[3]+3250441966&4294967295,A=D+(k<<22&4294967295|k>>>10),k=T+(L^A&(D^L))+R[4]+4118548399&4294967295,T=A+(k<<7&4294967295|k>>>25),k=L+(D^T&(A^D))+R[5]+1200080426&4294967295,L=T+(k<<12&4294967295|k>>>20),k=D+(A^L&(T^A))+R[6]+2821735955&4294967295,D=L+(k<<17&4294967295|k>>>15),k=A+(T^D&(L^T))+R[7]+4249261313&4294967295,A=D+(k<<22&4294967295|k>>>10),k=T+(L^A&(D^L))+R[8]+1770035416&4294967295,T=A+(k<<7&4294967295|k>>>25),k=L+(D^T&(A^D))+R[9]+2336552879&4294967295,L=T+(k<<12&4294967295|k>>>20),k=D+(A^L&(T^A))+R[10]+4294925233&4294967295,D=L+(k<<17&4294967295|k>>>15),k=A+(T^D&(L^T))+R[11]+2304563134&4294967295,A=D+(k<<22&4294967295|k>>>10),k=T+(L^A&(D^L))+R[12]+1804603682&4294967295,T=A+(k<<7&4294967295|k>>>25),k=L+(D^T&(A^D))+R[13]+4254626195&4294967295,L=T+(k<<12&4294967295|k>>>20),k=D+(A^L&(T^A))+R[14]+2792965006&4294967295,D=L+(k<<17&4294967295|k>>>15),k=A+(T^D&(L^T))+R[15]+1236535329&4294967295,A=D+(k<<22&4294967295|k>>>10),k=T+(D^L&(A^D))+R[1]+4129170786&4294967295,T=A+(k<<5&4294967295|k>>>27),k=L+(A^D&(T^A))+R[6]+3225465664&4294967295,L=T+(k<<9&4294967295|k>>>23),k=D+(T^A&(L^T))+R[11]+643717713&4294967295,D=L+(k<<14&4294967295|k>>>18),k=A+(L^T&(D^L))+R[0]+3921069994&4294967295,A=D+(k<<20&4294967295|k>>>12),k=T+(D^L&(A^D))+R[5]+3593408605&4294967295,T=A+(k<<5&4294967295|k>>>27),k=L+(A^D&(T^A))+R[10]+38016083&4294967295,L=T+(k<<9&4294967295|k>>>23),k=D+(T^A&(L^T))+R[15]+3634488961&4294967295,D=L+(k<<14&4294967295|k>>>18),k=A+(L^T&(D^L))+R[4]+3889429448&4294967295,A=D+(k<<20&4294967295|k>>>12),k=T+(D^L&(A^D))+R[9]+568446438&4294967295,T=A+(k<<5&4294967295|k>>>27),k=L+(A^D&(T^A))+R[14]+3275163606&4294967295,L=T+(k<<9&4294967295|k>>>23),k=D+(T^A&(L^T))+R[3]+4107603335&4294967295,D=L+(k<<14&4294967295|k>>>18),k=A+(L^T&(D^L))+R[8]+1163531501&4294967295,A=D+(k<<20&4294967295|k>>>12),k=T+(D^L&(A^D))+R[13]+2850285829&4294967295,T=A+(k<<5&4294967295|k>>>27),k=L+(A^D&(T^A))+R[2]+4243563512&4294967295,L=T+(k<<9&4294967295|k>>>23),k=D+(T^A&(L^T))+R[7]+1735328473&4294967295,D=L+(k<<14&4294967295|k>>>18),k=A+(L^T&(D^L))+R[12]+2368359562&4294967295,A=D+(k<<20&4294967295|k>>>12),k=T+(A^D^L)+R[5]+4294588738&4294967295,T=A+(k<<4&4294967295|k>>>28),k=L+(T^A^D)+R[8]+2272392833&4294967295,L=T+(k<<11&4294967295|k>>>21),k=D+(L^T^A)+R[11]+1839030562&4294967295,D=L+(k<<16&4294967295|k>>>16),k=A+(D^L^T)+R[14]+4259657740&4294967295,A=D+(k<<23&4294967295|k>>>9),k=T+(A^D^L)+R[1]+2763975236&4294967295,T=A+(k<<4&4294967295|k>>>28),k=L+(T^A^D)+R[4]+1272893353&4294967295,L=T+(k<<11&4294967295|k>>>21),k=D+(L^T^A)+R[7]+4139469664&4294967295,D=L+(k<<16&4294967295|k>>>16),k=A+(D^L^T)+R[10]+3200236656&4294967295,A=D+(k<<23&4294967295|k>>>9),k=T+(A^D^L)+R[13]+681279174&4294967295,T=A+(k<<4&4294967295|k>>>28),k=L+(T^A^D)+R[0]+3936430074&4294967295,L=T+(k<<11&4294967295|k>>>21),k=D+(L^T^A)+R[3]+3572445317&4294967295,D=L+(k<<16&4294967295|k>>>16),k=A+(D^L^T)+R[6]+76029189&4294967295,A=D+(k<<23&4294967295|k>>>9),k=T+(A^D^L)+R[9]+3654602809&4294967295,T=A+(k<<4&4294967295|k>>>28),k=L+(T^A^D)+R[12]+3873151461&4294967295,L=T+(k<<11&4294967295|k>>>21),k=D+(L^T^A)+R[15]+530742520&4294967295,D=L+(k<<16&4294967295|k>>>16),k=A+(D^L^T)+R[2]+3299628645&4294967295,A=D+(k<<23&4294967295|k>>>9),k=T+(D^(A|~L))+R[0]+4096336452&4294967295,T=A+(k<<6&4294967295|k>>>26),k=L+(A^(T|~D))+R[7]+1126891415&4294967295,L=T+(k<<10&4294967295|k>>>22),k=D+(T^(L|~A))+R[14]+2878612391&4294967295,D=L+(k<<15&4294967295|k>>>17),k=A+(L^(D|~T))+R[5]+4237533241&4294967295,A=D+(k<<21&4294967295|k>>>11),k=T+(D^(A|~L))+R[12]+1700485571&4294967295,T=A+(k<<6&4294967295|k>>>26),k=L+(A^(T|~D))+R[3]+2399980690&4294967295,L=T+(k<<10&4294967295|k>>>22),k=D+(T^(L|~A))+R[10]+4293915773&4294967295,D=L+(k<<15&4294967295|k>>>17),k=A+(L^(D|~T))+R[1]+2240044497&4294967295,A=D+(k<<21&4294967295|k>>>11),k=T+(D^(A|~L))+R[8]+1873313359&4294967295,T=A+(k<<6&4294967295|k>>>26),k=L+(A^(T|~D))+R[15]+4264355552&4294967295,L=T+(k<<10&4294967295|k>>>22),k=D+(T^(L|~A))+R[6]+2734768916&4294967295,D=L+(k<<15&4294967295|k>>>17),k=A+(L^(D|~T))+R[13]+1309151649&4294967295,A=D+(k<<21&4294967295|k>>>11),k=T+(D^(A|~L))+R[4]+4149444226&4294967295,T=A+(k<<6&4294967295|k>>>26),k=L+(A^(T|~D))+R[11]+3174756917&4294967295,L=T+(k<<10&4294967295|k>>>22),k=D+(T^(L|~A))+R[2]+718787259&4294967295,D=L+(k<<15&4294967295|k>>>17),k=A+(L^(D|~T))+R[9]+3951481745&4294967295,j.g[0]=j.g[0]+T&4294967295,j.g[1]=j.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+D&4294967295,j.g[3]=j.g[3]+L&4294967295}s.prototype.v=function(j,T){T===void 0&&(T=j.length);const A=T-this.blockSize,R=this.C;let D=this.h,L=0;for(;L<T;){if(D==0)for(;L<=A;)l(this,j,L),L+=this.blockSize;if(typeof j=="string"){for(;L<T;)if(R[D++]=j.charCodeAt(L++),D==this.blockSize){l(this,R),D=0;break}}else for(;L<T;)if(R[D++]=j[L++],D==this.blockSize){l(this,R),D=0;break}}this.h=D,this.o+=T},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var T=1;T<j.length-8;++T)j[T]=0;T=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=T&255,T/=256;for(this.v(j),j=Array(16),T=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)j[T++]=this.g[A]>>>R&255;return j};function c(j,T){var A=f;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=T(j)}function d(j,T){this.h=T;const A=[];let R=!0;for(let D=j.length-1;D>=0;D--){const L=j[D]|0;R&&L==T||(A[D]=L,R=!1)}this.g=A}var f={};function g(j){return-128<=j&&j<128?c(j,function(T){return new d([T|0],T<0?-1:0)}):new d([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return b;if(j<0)return F(x(-j));const T=[];let A=1;for(let R=0;j>=A;R++)T[R]=j/A|0,A*=4294967296;return new d(T,0)}function w(j,T){if(j.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(j.charAt(0)=="-")return F(w(j.substring(1),T));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(T,8));let R=b;for(let L=0;L<j.length;L+=8){var D=Math.min(8,j.length-L);const k=parseInt(j.substring(L,L+D),T);D<8?(D=x(Math.pow(T,D)),R=R.j(D).add(x(k))):(R=R.j(A),R=R.add(x(k)))}return R}var b=g(0),N=g(1),C=g(16777216);r=d.prototype,r.m=function(){if(V(this))return-F(this).m();let j=0,T=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);j+=(R>=0?R:4294967296+R)*T,T*=4294967296}return j},r.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(Y(this))return"0";if(V(this))return"-"+F(this).toString(j);const T=x(Math.pow(j,6));var A=this;let R="";for(;;){const D=de(A,T).g;A=U(A,D.j(T));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=D,Y(A))return L+R;for(;L.length<6;)L="0"+L;R=L+R}},r.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function Y(j){if(j.h!=0)return!1;for(let T=0;T<j.g.length;T++)if(j.g[T]!=0)return!1;return!0}function V(j){return j.h==-1}r.l=function(j){return j=U(this,j),V(j)?-1:Y(j)?0:1};function F(j){const T=j.g.length,A=[];for(let R=0;R<T;R++)A[R]=~j.g[R];return new d(A,~j.h).add(N)}r.abs=function(){return V(this)?F(this):this},r.add=function(j){const T=Math.max(this.g.length,j.g.length),A=[];let R=0;for(let D=0;D<=T;D++){let L=R+(this.i(D)&65535)+(j.i(D)&65535),k=(L>>>16)+(this.i(D)>>>16)+(j.i(D)>>>16);R=k>>>16,L&=65535,k&=65535,A[D]=k<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function U(j,T){return j.add(F(T))}r.j=function(j){if(Y(this)||Y(j))return b;if(V(this))return V(j)?F(this).j(F(j)):F(F(this).j(j));if(V(j))return F(this.j(F(j)));if(this.l(C)<0&&j.l(C)<0)return x(this.m()*j.m());const T=this.g.length+j.g.length,A=[];for(var R=0;R<2*T;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<j.g.length;D++){const L=this.i(R)>>>16,k=this.i(R)&65535,ge=j.i(D)>>>16,ke=j.i(D)&65535;A[2*R+2*D]+=k*ke,ae(A,2*R+2*D),A[2*R+2*D+1]+=L*ke,ae(A,2*R+2*D+1),A[2*R+2*D+1]+=k*ge,ae(A,2*R+2*D+1),A[2*R+2*D+2]+=L*ge,ae(A,2*R+2*D+2)}for(j=0;j<T;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=T;j<2*T;j++)A[j]=0;return new d(A,0)};function ae(j,T){for(;(j[T]&65535)!=j[T];)j[T+1]+=j[T]>>>16,j[T]&=65535,T++}function $(j,T){this.g=j,this.h=T}function de(j,T){if(Y(T))throw Error("division by zero");if(Y(j))return new $(b,b);if(V(j))return T=de(F(j),T),new $(F(T.g),F(T.h));if(V(T))return T=de(j,F(T)),new $(F(T.g),T.h);if(j.g.length>30){if(V(j)||V(T))throw Error("slowDivide_ only works with positive integers.");for(var A=N,R=T;R.l(j)<=0;)A=W(A),R=W(R);var D=se(A,1),L=se(R,1);for(R=se(R,2),A=se(A,2);!Y(R);){var k=L.add(R);k.l(j)<=0&&(D=D.add(A),L=k),R=se(R,1),A=se(A,1)}return T=U(j,D.j(T)),new $(D,T)}for(D=b;j.l(T)>=0;){for(A=Math.max(1,Math.floor(j.m()/T.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),L=x(A),k=L.j(T);V(k)||k.l(j)>0;)A-=R,L=x(A),k=L.j(T);Y(L)&&(L=N),D=D.add(L),j=U(j,k)}return new $(D,j)}r.B=function(j){return de(this,j).h},r.and=function(j){const T=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)&j.i(R);return new d(A,this.h&j.h)},r.or=function(j){const T=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)|j.i(R);return new d(A,this.h|j.h)},r.xor=function(j){const T=Math.max(this.g.length,j.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)^j.i(R);return new d(A,this.h^j.h)};function W(j){const T=j.g.length+1,A=[];for(let R=0;R<T;R++)A[R]=j.i(R)<<1|j.i(R-1)>>>31;return new d(A,j.h)}function se(j,T){const A=T>>5;T%=32;const R=j.g.length-A,D=[];for(let L=0;L<R;L++)D[L]=T>0?j.i(L+A)>>>T|j.i(L+A+1)<<32-T:j.i(L+A);return new d(D,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,n4=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=w,Ni=d}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s4,Du,r4,Nf,Lp,a4,i4,l4;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in _))break e;_=_[H]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function w(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function b(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(S,H,ee){for(var we=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)we[Ye-2]=arguments[Ye];return y.prototype[H].apply(S,we)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function Y(h,y){for(let S=1;S<arguments.length;S++){const H=arguments[S];var _=typeof H;if(_=_!="object"?_:H?Array.isArray(H)?"array":_:"null",_=="array"||_=="object"&&typeof H.length=="number"){_=h.length||0;const ee=H.length||0;h.length=_+ee;for(let we=0;we<ee;we++)h[_+we]=H[we]}else h.push(H)}}class V{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){d.setTimeout(()=>{throw h},0)}function U(){var h=j;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,_){const S=$.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var $=new V(()=>new de,h=>h.reset());class de{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let W,se=!1,j=new ae,T=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(A)}};function A(){for(var h;h=U();){try{h.h.call(h.g)}catch(_){F(_)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}se=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function ge(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(ge,D),ge.prototype.init=function(h,y){const _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),G=0;function ce(h,y,_,S,H){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=H,this.key=++G,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function me(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function Ne(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function I(h){const y={};for(const _ in h)y[_]=h[_];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,y){let _,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(_ in S)h[_]=S[_];for(let ee=0;ee<Z.length;ee++)_=Z[ee],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function Q(h){this.src=h,this.g={},this.h=0}Q.prototype.add=function(h,y,_,S,H){const ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);const we=Ee(h,y,S,H);return we>-1?(y=h[we],_||(y.fa=!1)):(y=new ce(y,this.src,ee,!!S,H),y.fa=_,h.push(y)),y};function ye(h,y){const _=y.type;if(_ in h.g){var S=h.g[_],H=Array.prototype.indexOf.call(S,y,void 0),ee;(ee=H>=0)&&Array.prototype.splice.call(S,H,1),ee&&(te(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ee(h,y,_,S){for(let H=0;H<h.length;++H){const ee=h[H];if(!ee.da&&ee.listener==y&&ee.capture==!!_&&ee.ha==S)return H}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),qe={};function ze(h,y,_,S,H){if(Array.isArray(y)){for(let ee=0;ee<y.length;ee++)ze(h,y[ee],_,S,H);return null}return _=Ys(_),h&&h[ke]?h.J(y,_,f(S)?!!S.capture:!1,H):ft(h,y,_,!1,S,H)}function ft(h,y,_,S,H,ee){if(!y)throw Error("Invalid event type");const we=f(H)?!!H.capture:!!H;let Ye=Kn(h);if(Ye||(h[ue]=Ye=new Q(h)),_=Ye.add(y,_,S,we,ee),_.proxy)return _;if(S=Te(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)L||(H=we),H===void 0&&(H=!1),h.addEventListener(y.toString(),S,H);else if(h.attachEvent)h.attachEvent(yn(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Te(){function h(_){return y.call(h.src,h.listener,_)}const y=ds;return h}function He(h,y,_,S,H){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)He(h,y[ee],_,S,H);else S=f(S)?!!S.capture:!!S,_=Ys(_),h&&h[ke]?(h=h.i,ee=String(y).toString(),ee in h.g&&(y=h.g[ee],_=Ee(y,_,S,H),_>-1&&(te(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[ee],h.h--)))):h&&(h=Kn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,_,S,H)),(_=h>-1?y[h]:null)&&Xe(_))}function Xe(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])ye(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(yn(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=Kn(y))?(ye(_,h),_.h==0&&(_.src=null,y[ue]=null)):te(h)}}}function yn(h){return h in qe?qe[h]:qe[h]="on"+h}function ds(h,y){if(h.da)h=!0;else{y=new ge(y,this);const _=h.listener,S=h.ha||h.src;h.fa&&Xe(h),h=_.call(S,y)}return h}function Kn(h){return h=h[ue],h instanceof Q?h:null}var hs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ys(h){return typeof h=="function"?h:(h[hs]||(h[hs]=function(y){return h.handleEvent(y)}),h[hs])}function zt(){R.call(this),this.i=new Q(this),this.M=this,this.G=null}b(zt,R),zt.prototype[ke]=!0,zt.prototype.removeEventListener=function(h,y,_,S){He(this,h,y,_,S)};function Ut(h,y){var _,S=h.G;if(S)for(_=[];S;S=S.G)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var H=y;y=new D(S,h),P(y,H)}H=!0;let ee,we;if(_)for(we=_.length-1;we>=0;we--)ee=y.g=_[we],H=an(ee,S,!0,y)&&H;if(ee=y.g=h,H=an(ee,S,!0,y)&&H,H=an(ee,S,!1,y)&&H,_)for(we=0;we<_.length;we++)ee=y.g=_[we],H=an(ee,S,!1,y)&&H}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let S=0;S<_.length;S++)te(_[S]);delete h.g[y],h.h--}}this.G=null},zt.prototype.J=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},zt.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function an(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let ee=0;ee<y.length;++ee){const we=y[ee];if(we&&!we.da&&we.capture==_){const Ye=we.listener,en=we.ha||we.src;we.fa&&ye(h.i,we),H=Ye.call(en,S)!==!1&&H}}return H&&!S.defaultPrevented}function br(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Zn(h){h.g=br(()=>{h.g=null,h.i&&(h.i=!1,Zn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends R{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Zn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(h){R.call(this),this.h=h,this.g={}}b(Js,R);var Ws=[];function vr(h){me(h.g,function(y,_){this.g.hasOwnProperty(_)&&Xe(y)},h),h.g={}}Js.prototype.N=function(){Js.Z.N.call(this),vr(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rs=d.JSON.stringify,Ra=d.JSON.parse,fs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ka(){}function Zs(){}var le={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ge(){D.call(this,"d")}b(Ge,D);function Qe(){D.call(this,"c")}b(Qe,D);var st={},ms=null;function ks(){return ms=ms||new zt}st.Ia="serverreachability";function Kt(h){D.call(this,st.Ia,h)}b(Kt,D);function bn(h){const y=ks();Ut(y,new Kt(y))}st.STAT_EVENT="statevent";function Rt(h,y){D.call(this,st.STAT_EVENT,h),this.stat=y}b(Rt,D);function vt(h){const y=ks();Ut(y,new Rt(y,h))}st.Ja="timingevent";function Zt(h,y){D.call(this,st.Ja,h),this.size=y}b(Zt,D);function Bt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Ln(){this.g=!0}Ln.prototype.ua=function(){this.g=!1};function gs(h,y,_,S,H,ee){h.info(function(){if(h.g)if(ee){var we="",Ye=ee.split("&");for(let pt=0;pt<Ye.length;pt++){var en=Ye[pt].split("=");if(en.length>1){const qt=en[0];en=en[1];const Vs=qt.split("_");we=Vs.length>=2&&Vs[1]=="type"?we+(qt+"="+en+"&"):we+(qt+"=redacted&")}}}else we=null;else we=ee;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+y+`
`+_+`
`+we})}function er(h,y,_,S,H,ee,we){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+y+`
`+_+`
`+ee+" "+we})}function es(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+je(h,_)+(S?" "+S:"")})}function fe(h,y){h.info(function(){return"TIMEOUT: "+y})}Ln.prototype.info=function(){};function je(h,y){if(!h.g)return y;if(!y)return null;try{const ee=JSON.parse(y);if(ee){for(h=0;h<ee.length;h++)if(Array.isArray(ee[h])){var _=ee[h];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let we=1;we<S.length;we++)S[we]=""}}}}return Rs(ee)}catch{return y}}var ve={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Re={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pe;function Oe(){}b(Oe,ka),Oe.prototype.g=function(){return new XMLHttpRequest},Pe=new Oe;function $e(h){return encodeURIComponent(String(h))}function kt(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Ze(h,y,_,S){this.j=h,this.i=y,this.l=_,this.S=S||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var gt={},on={};function wr(h,y,_){h.M=1,h.A=zi(un(y)),h.u=_,h.R=!0,ql(h,null)}function ql(h,y){h.F=Date.now(),_r(h),h.B=un(h.A);var _=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),$l(_.i,"t",S),h.C=0,_=h.j.L,h.h=new mt,h.g=th(h.j,_?y:null,!h.u),h.P>0&&(h.O=new ln(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,S=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ws[0]=H.toString()),H=Ws);for(let ee=0;ee<H.length;ee++){const we=ze(_,H[ee],S||y.handleEvent,!1,y.h||y);if(!we)break;y.g[we.key]=we}y=h.J?I(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),bn(),gs(h.i,h.v,h.B,h.l,h.S,h.u)}Ze.prototype.ba=function(h){h=h.target;const y=this.O;y&&sr(h)==3?y.j():this.Y(h)},Ze.prototype.Y=function(h){try{if(h==this.g)e:{const Ye=sr(this.g),en=this.g.ya(),pt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||Cn(this.g)))){this.K||Ye!=4||en==7||(en==8||pt<=0?bn(3):bn(2)),Nr(this);var y=this.g.ca();this.X=y;var _=Xm(this);if(this.o=y==200,er(this.i,this.v,this.B,this.l,this.S,Ye,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var ee=S;break t}}ee=null}if(h=ee)es(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,h);else{this.o=!1,this.m=3,vt(12),ps(this),Ds(this);break e}}if(this.R){h=!0;let qt;for(;!this.K&&this.C<_.length;)if(qt=qd(this,_),qt==on){Ye==4&&(this.m=4,vt(14),h=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==gt){this.m=4,vt(15),es(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else es(this.i,this.l,qt,null),jr(this,qt);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||_.length!=0||this.h.h||(this.m=1,vt(16),h=!1),this.o=this.o&&h,!h)es(this.i,this.l,_,"[Invalid Chunked Response]"),ps(this),Ds(this);else if(_.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Uc(we),we.P=!0,vt(11))}}else es(this.i,this.l,_,null),jr(this,_);Ye==4&&ps(this),this.o&&!this.K&&(Ye==4?Jd(this.j,this):(this.o=!1,_r(this)))}else Wr(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),ps(this),Ds(this)}}}catch{}finally{}};function Xm(h){if(!Bd(h))return h.g.la();const y=Cn(h.g);if(y==="")return"";let _="";const S=y.length,H=sr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ps(h),Ds(h),"";h.h.i=new d.TextDecoder}for(let ee=0;ee<S;ee++)h.h.h=!0,_+=h.h.i.decode(y[ee],{stream:!(H&&ee==S-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Bd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function qd(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?on:(_=Number(y.substring(_,S)),isNaN(_)?gt:(S+=1,S+_>y.length?on:(y=y.slice(S,S+_),h.C=S+_,y)))}Ze.prototype.cancel=function(){this.K=!0,ps(this)};function _r(h){h.T=Date.now()+h.H,Fl(h,h.H)}function Fl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Bt(x(h.aa,h),y)}function Nr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Ze.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(fe(this.i,this.B),this.M!=2&&(bn(),vt(17)),ps(this),this.m=2,Ds(this)):Fl(this,this.T-h)};function Ds(h){h.j.I==0||h.K||Jd(h.j,h)}function ps(h){Nr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,vr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function jr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||Tr(_.h,h))){if(!h.L&&Tr(_.h,h)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Jl(_),Ua(_);else break e;$i(_),vt(18)}}else _.xa=H[1],0<_.xa-_.K&&H[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Bt(x(_.Va,_),6e3));Er(_.h)<=1&&_.ta&&(_.ta=void 0)}else kr(_,11)}else if((h.L||_.g==h)&&Jl(_),!k(y))for(H=_.Ba.g.parse(y),y=0;y<H.length;y++){let pt=H[y];const qt=pt[0];if(!(qt<=_.K))if(_.K=qt,pt=pt[1],_.I==2)if(pt[0]=="c"){_.M=pt[1],_.ba=pt[2];const Vs=pt[3];Vs!=null&&(_.ka=Vs,_.j.info("VER="+_.ka));const Dr=pt[4];Dr!=null&&(_.za=Dr,_.j.info("SVER="+_.za));const rr=pt[5];rr!=null&&typeof rr=="number"&&rr>0&&(S=1.5*rr,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const ar=h.g;if(ar){const Ki=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var ee=S.h;ee.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ac(ee,ee.h),ee.h=null))}if(S.G){const Wl=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(S.wa=Wl,wt(S.J,S.G,Wl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var we=h;if(S.na=eh(S,S.L?S.ba:null,S.W),we.L){Ic(S.h,we);var Ye=we,en=S.O;en&&(Ye.H=en),Ye.D&&(Nr(Ye),_r(Ye)),S.g=we}else Xd(S);_.i.length>0&&Rr(_)}else pt[0]!="stop"&&pt[0]!="close"||kr(_,7);else _.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?kr(_,7):Lc(_):pt[0]!="noop"&&_.l&&_.l.qa(pt),_.A=0)}}bn(4)}catch{}}var cn=class{constructor(h,y){this.g=h,this.map=y}};function Tc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Er(h){return h.h?1:h.g?h.g.size:0}function Tr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ac(h,y){h.g?h.g.add(y):h.h=y}function Ic(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Tc.prototype.cancel=function(){if(this.i=Cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return C(h.i)}var Fd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const S=h[_].indexOf("=");let H,ee=null;S>=0?(H=h[_].substring(0,S),ee=h[_].substring(S+1)):H=h[_],y(H,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function xs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof xs?(this.l=h.l,jn(this,h.j),this.o=h.o,this.g=h.g,Da(this,h.u),this.h=h.h,Rc(this,Kd(h.i)),this.m=h.m):h&&(y=String(h).match(Fd))?(this.l=!1,jn(this,y[1]||"",!0),this.o=Sr(y[2]||""),this.g=Sr(y[3]||"",!0),Da(this,y[4]),this.h=Sr(y[5]||"",!0),Rc(this,y[6]||"",!0),this.m=Sr(y[7]||"")):(this.l=!1,this.i=new Ma(null,this.l))}xs.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ui(y,Gl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ui(y,Gl,!0),"@"),h.push($e(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ui(_,_.charAt(0)=="/"?kc:Hd,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ui(_,Gd)),h.join("")},xs.prototype.resolve=function(h){const y=un(this);let _=!!h.j;_?jn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var S=h.h;if(_)Da(y,h.u);else if(_=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=y.h.lastIndexOf("/");H!=-1&&(S=y.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const ee=[];for(let we=0;we<H.length;){const Ye=H[we++];Ye=="."?S&&we==H.length&&ee.push(""):Ye==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),S&&we==H.length&&ee.push("")):(ee.push(Ye),S=!0)}S=ee.join("/")}else S=H}return _?y.h=S:_=h.i.toString()!=="",_?Rc(y,Kd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function un(h){return new xs(h)}function jn(h,y,_){h.j=_?Sr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Da(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Rc(h,y,_){y instanceof Ma?(h.i=y,Kl(h.i,h.l)):(_||(y=Ui(y,Oa)),h.i=new Ma(y,h.l))}function wt(h,y,_){h.i.set(y,_)}function zi(h){return wt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Sr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ui(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,ts),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ts(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,Hd=/[#\?:]/g,kc=/[#\?]/g,Oa=/[#\?@]/g,Gd=/#/g;function Ma(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ns(h){h.g||(h.g=new Map,h.h=0,h.i&&Hl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Ma.prototype,r.add=function(h,y){ns(this),this.i=null,h=Va(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function $d(h,y){ns(h),y=Va(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Dc(h,y){return ns(h),y=Va(h,y),h.g.has(y)}r.forEach=function(h,y){ns(this),this.g.forEach(function(_,S){_.forEach(function(H){h.call(y,H,S,this)},this)},this)};function Oc(h,y){ns(h);let _=[];if(typeof y=="string")Dc(h,y)&&(_=_.concat(h.g.get(Va(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return ns(this),this.i=null,h=Va(this,h),Dc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Oc(this,h),h.length>0?String(h[0]):y):y};function $l(h,y,_){$d(h,y),_.length>0&&(h.i=null,h.g.set(Va(h,y),C(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const H=$e(_);_=Oc(this,_);for(let ee=0;ee<_.length;ee++){let we=H;_[ee]!==""&&(we+="="+$e(_[ee])),h.push(we)}}return this.i=h.join("&")};function Kd(h){const y=new Ma;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Va(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Kl(h,y){y&&!h.j&&(ns(h),h.i=null,h.g.forEach(function(_,S){const H=S.toLowerCase();S!=H&&($d(this,S),$l(this,H,_))},h)),h.j=y}function tr(h,y){const _=new Ln;if(d.Image){const S=new Image;S.onload=w(Os,_,"TestLoadImage: loaded",!0,y,S),S.onerror=w(Os,_,"TestLoadImage: error",!1,y,S),S.onabort=w(Os,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=w(Os,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Mc(h,y){const _=new Ln,S=new AbortController,H=setTimeout(()=>{S.abort(),Os(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(ee=>{clearTimeout(H),ee.ok?Os(_,"TestPingServer: ok",!0,y):Os(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Os(_,"TestPingServer: error",!1,y)})}function Os(h,y,_,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(_)}catch{}}function Pa(){this.g=new fs}function Ar(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Ar,ka),Ar.prototype.g=function(){return new Bi(this.i,this.h)};function Bi(h,y){zt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Bi,zt),r=Bi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,nr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ql(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ql(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?La(this):nr(this),this.readyState==3&&Ql(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,La(this))},r.Na=function(h){this.g&&(this.response=h,La(this))},r.ga=function(){this.g&&La(this)};function La(h){h.readyState=4,h.l=null,h.j=null,h.B=null,nr(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ms(h){let y="";return me(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function qi(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Ms(_),typeof h=="string"?_!=null&&$e(_):wt(h,y,_))}function St(h){zt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(St,zt);var Ir=/^https?$/i,Vc=["POST","PUT"];r=St.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pe.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ee){Fi(this,ee);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)_.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const ee of S.keys())_.set(ee,S.get(ee));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Vc,y,void 0)>=0)||S||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,we]of _)this.g.setRequestHeader(ee,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ee){Fi(this,ee)}};function Fi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Pc(h),Jr(h)}function Pc(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Jr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),St.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Hi(this):this.Xa())},r.Xa=function(){Hi(this)};function Hi(h){if(h.h&&typeof c<"u"){if(h.v&&sr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),sr(h)==4){h.h=!1;try{const ee=h.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ee===0){let we=String(h.D).match(Fd)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),S=!Ir.test(we?we.toLowerCase():"")}_=S}if(_)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var H=sr(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Pc(h)}}finally{Jr(h)}}}}function Jr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Ut(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function sr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ra(y)}};function Cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wr(h){const y={};h=(h.g&&sr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(k(h[S]))continue;var _=kt(h[S]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=y[H]||[];y[H]=ee,ee.push(_)}Ne(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function za(h){this.za=0,this.i=[],this.j=new Ln,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cr("baseRetryDelayMs",5e3,h),this.Za=Cr("retryDelaySeedMs",1e4,h),this.Ta=Cr("forwardChannelMaxRetries",2,h),this.va=Cr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Tc(h&&h.concurrentRequestLimit),this.Ba=new Pa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=za.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,S){vt(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=eh(this,null,this.W),Rr(this)};function Lc(h){if(Xl(h),h.I==3){var y=h.V++,_=un(h.J);if(wt(_,"SID",h.M),wt(_,"RID",y),wt(_,"TYPE","terminate"),Gi(h,_),y=new Ze(h,h.j,y),y.M=2,y.A=zi(un(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=th(y.j,null),y.g.ea(y.A)),y.F=Date.now(),_r(y)}Zd(h)}function Ua(h){h.g&&(Uc(h),h.g.cancel(),h.g=null)}function Xl(h){Ua(h),h.v&&(d.clearTimeout(h.v),h.v=null),Jl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Rr(h){if(!Sc(h.h)&&!h.m){h.m=!0;var y=h.Ea;W||T(),se||(W(),se=!0),j.add(y,h),h.D=0}}function Yl(h,y){return Er(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Bt(x(h.Ea,h,y),Wd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Ze(this,this.j,h);let ee=this.o;if(this.U&&(ee?(ee=I(ee),P(ee,this.U)):ee=this.U),this.u!==null||this.R||(H.J=ee,ee=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Qd(this,H,y),_=un(this.J),wt(_,"RID",h),wt(_,"CVER",22),this.G&&wt(_,"X-HTTP-Session-Id",this.G),Gi(this,_),ee&&(this.R?y="headers="+$e(Ms(ee))+"&"+y:this.u&&qi(_,this.u,ee)),Ac(this.h,H),this.Ra&&wt(_,"TYPE","init"),this.S?(wt(_,"$req",y),wt(_,"SID","null"),H.U=!0,wr(H,_,null)):wr(H,_,y),this.I=2}}else this.I==3&&(h?zc(this,h):this.i.length==0||Sc(this.h)||zc(this))};function zc(h,y){var _;y?_=y.l:_=h.V++;const S=un(h.J);wt(S,"SID",h.M),wt(S,"RID",_),wt(S,"AID",h.K),Gi(h,S),h.u&&h.o&&qi(S,h.u,h.o),_=new Ze(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Qd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ac(h.h,_),wr(_,S,y)}function Gi(h,y){h.H&&me(h.H,function(_,S){wt(y,S,_)}),h.l&&me({},function(_,S){wt(y,S,_)})}function Qd(h,y,_){_=Math.min(h.i.length,_);const S=h.l?x(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ye=-1;for(;;){const en=["count="+_];Ye==-1?_>0?(Ye=H[0].g,en.push("ofs="+Ye)):Ye=0:en.push("ofs="+Ye);let pt=!0;for(let qt=0;qt<_;qt++){var ee=H[qt].g;const Vs=H[qt].map;if(ee-=Ye,ee<0)Ye=Math.max(0,H[qt].g-100),pt=!1;else try{ee="req"+ee+"_"||"";try{var we=Vs instanceof Map?Vs:Object.entries(Vs);for(const[Dr,rr]of we){let ar=rr;f(rr)&&(ar=Rs(rr)),en.push(ee+Dr+"="+encodeURIComponent(ar))}}catch(Dr){throw en.push(ee+"type="+encodeURIComponent("_badmap")),Dr}}catch{S&&S(Vs)}}if(pt){we=en.join("&");break e}}we=void 0}return h=h.i.splice(0,_),y.G=h,we}function Xd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;W||T(),se||(W(),se=!0),j.add(y,h),h.A=0}}function $i(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Bt(x(h.Da,h),Wd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Yd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Bt(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),Ua(this),Yd(this))};function Uc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Yd(h){h.g=new Ze(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=un(h.na);wt(y,"RID","rpc"),wt(y,"SID",h.M),wt(y,"AID",h.K),wt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&wt(y,"TO",h.ia),wt(y,"TYPE","xmlhttp"),Gi(h,y),h.u&&h.o&&qi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=zi(un(y)),_.u=null,_.R=!0,ql(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Ua(this),$i(this),vt(19))};function Jl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Jd(h,y){var _=null;if(h.g==y){Jl(h),Uc(h),h.g=null;var S=2}else if(Tr(h.h,y))_=y.G,Ic(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;S=ks(),Ut(S,new Zt(S,_)),Rr(h)}else Xd(h);else if(H=y.m,H==3||H==0&&y.X>0||!(S==1&&Yl(h,y)||S==2&&$i(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),H){case 1:kr(h,5);break;case 4:kr(h,10);break;case 3:kr(h,6);break;default:kr(h,2)}}}function Wd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function kr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),S=h.Ua;const H=!S;S=new xs(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||jn(S,"https"),zi(S),H?tr(S.toString(),_):Mc(S.toString(),_)}else vt(2);h.I=0,h.l&&h.l.pa(y),Zd(h),Xl(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Zd(h){if(h.I=0,h.ja=[],h.l){const y=Cc(h.h);(y.length!=0||h.i.length!=0)&&(Y(h.ja,y),Y(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function eh(h,y,_){var S=_ instanceof xs?un(_):new xs(_);if(S.g!="")y&&(S.g=y+"."+S.g),Da(S,S.u);else{var H=d.location;S=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const ee=new xs(null);S&&jn(ee,S),y&&(ee.g=y),H&&Da(ee,H),_&&(ee.h=_),S=ee}return _=h.G,y=h.wa,_&&y&&wt(S,_,y),wt(S,"VER",h.ka),Gi(h,S),S}function th(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new St(new Ar({ab:_})):new St(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}r=nh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ba(){}Ba.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){zt.call(this),this.g=new za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!k(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Zr(this)}b(Qn,zt),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Lc(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Rs(h),h=_);y.i.push(new cn(y.Ya++,h)),y.I==3&&Rr(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Lc(this.g),delete this.g,Qn.Z.N.call(this)};function sh(h){Ge.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(sh,Ge);function rh(){Qe.call(this),this.status=1}b(rh,Qe);function Zr(h){this.g=h}b(Zr,nh),Zr.prototype.ra=function(){Ut(this.g,"a")},Zr.prototype.qa=function(h){Ut(this.g,new sh(h))},Zr.prototype.pa=function(h){Ut(this.g,new rh)},Zr.prototype.oa=function(){Ut(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,l4=function(){return new Ba},i4=function(){return ks()},a4=st,Lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,Nf=ve,Re.COMPLETE="complete",r4=Re,Zs.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",zt.prototype.listen=zt.prototype.J,Du=Zs,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,s4=St}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const Zw="@firebase/firestore",e2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new vm("@firebase/firestore");function Mo(){return Il.logLevel}function pe(r,...e){if(Il.logLevel<=it.DEBUG){const t=e.map(Cx);Il.debug(`Firestore (${bc}): ${r}`,...t)}}function sn(r,...e){if(Il.logLevel<=it.ERROR){const t=e.map(Cx);Il.error(`Firestore (${bc}): ${r}`,...t)}}function rd(r,...e){if(Il.logLevel<=it.WARN){const t=e.map(Cx);Il.warn(`Firestore (${bc}): ${r}`,...t)}}function Cx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,o4(r,s,t)}function o4(r,e,t){let s=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw sn(s),new Error(s)}function De(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||o4(e,l,s)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class cR{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(De(typeof s.accessToken=="string",31837,{l:s}),new lR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class uR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new uR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class t2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){De(this.o===void 0,3512);const s=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new t2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(De(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new t2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=fR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function Fe(r,e){return r<e?-1:r>e?1:0}function zp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return rp(l)===rp(c)?Fe(l,c):rp(l)?1:-1}return Fe(r.length,e.length)}const mR=55296,gR=57343;function rp(r){const e=r.charCodeAt(0);return e>=mR&&e<=gR}function Yo(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function c4(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="__name__";class Lr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Lr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Lr.isNumericId(e),l=Lr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class yt extends Lr{construct(e,t,s){return new yt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Lr{construct(e,t,s){return new $t(e,t,s)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n2}static keyField(){return new $t([n2])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new be(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new be(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new be(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(yt.fromString(e))}static fromName(e){return new _e(yt.fromString(e).popFirst(5))}static empty(){return new _e(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(r,e,t){if(!t)throw new be(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function xR(r,e,t,s){if(e===!0&&s===!0)throw new be(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function s2(r){if(!_e.isDocumentKey(r))throw new be(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function r2(r){if(_e.isDocumentKey(r))throw new be(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function d4(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function jm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Sn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jm(r);throw new be(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function yR(r,e){if(e<=0)throw new be(re.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ed(r,e){if(!d4(r))throw new be(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new be(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=-62135596800,i2=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*i2);return new jt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a2)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i2}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ed(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:pn("string",jt._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new jt(0,0))}static max(){return new Ve(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=-1;class $f{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Up(r){return r.fields.find((e=>e.kind===2))}function hl(r){return r.fields.filter((e=>e.kind!==2))}$f.UNKNOWN_ID=-1;class jf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ad{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ad(0,Cs.min())}}function h4(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new jt(t+1,0):new jt(t,s));return new Cs(l,_e.empty(),e)}function f4(r){return new Cs(r.readTime,r.key,Jo)}class Cs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cs(Ve.min(),_e.empty(),Jo)}static max(){return new Cs(Ve.max(),_e.empty(),Jo)}}function kx(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Fe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==m4)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,s)=>{t(e)}))}static reject(e){return new q(((t,s)=>{s(e)}))}static waitFor(e){return new q(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=q.resolve(!1);for(const s of e)t=t.next((l=>l?q.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new q(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((w=>{d[x]=w,++f,f===c&&s(d)}),(w=>l(w)))}}))}static doWhile(e,t){return new q(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="SimpleDb";class Em{static open(e,t,s,l){try{return new Em(t,e.transaction(l,s))}catch(c){throw new Uu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new fr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Uu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Dx(s.target.error);this.S.reject(new Uu(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(pe(Es,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vR(t)}}class ji{static delete(e){return pe(Es,"Removing database:",e),ml(iN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!vx())return!1;if(ji.F())return!0;const e=_n(),t=ji.M(e),s=0<t&&t<10,l=p4(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,ji.M(_n())===12.2&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(pe(Es,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new be(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new be(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Uu(e,d))},l.onupgradeneeded=c=>{pe(Es,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{pe(Es,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=Em.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),q.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(pe(Es,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function p4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ml(this.U.delete())}}class Uu extends be{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vi(r){return r.name==="IndexedDbTransactionError"}class vR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(pe(Es,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(pe(Es,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ml(s)}add(e){return pe(Es,"ADD",this.store.name,e,e),ml(this.store.add(e))}get(e){return ml(this.store.get(e)).next((t=>(t===void 0&&(t=null),pe(Es,"GET",this.store.name,e,t),t)))}delete(e){return pe(Es,"DELETE",this.store.name,e),ml(this.store.delete(e))}count(){return pe(Es,"COUNT",this.store.name),ml(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new q(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new q(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){pe(Es,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new q(((s,l)=>{t.onerror=c=>{const d=Dx(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new q(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new bR(f),x=t(f.primaryKey,f.value,g);if(x instanceof q){const w=x.catch((b=>(g.done(),q.reject(b))));s.push(w)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>q.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ml(r){return new q(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=Dx(s.target.error);t(l)}}))}let l2=!1;function Dx(r){const e=ji.M(_n());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l2||(l2=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Bu="IndexBackfiller";class wR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){pe(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();pe(Bu,`Documents written: ${t}`)}catch(t){Vi(t)?pe(Bu,"Ignoring IndexedDB error during index backfill: ",t):await Mi(t)}await this.re(6e4)}))}}class _R{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return q.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return pe(Bu,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(pe(Bu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=f4(c);kx(d,s)>0&&(s=d)})),new Cs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}os.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;function Tm(r){return r==null}function id(r){return r===0&&1/r==-1/0}function x4(r){return typeof r=="number"&&Number.isInteger(r)&&!id(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="";function $n(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=o2(e)),e=NR(r.get(t),e);return o2(e)}function NR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Kf:t+="";break;default:t+=c}}return t}function o2(r){return r+Kf+""}function qr(r){const e=r.length;if(De(e>=2,64408,{path:r}),e===2)return De(r.charAt(0)===Kf&&r.charAt(1)==="",56145,{path:r}),yt.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Kf,c);switch((d<0||d>t)&&Se(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:Se(61167,{path:r})}c=d+2}return new yt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="remoteDocuments",Td="owner",Io="owner",ld="mutationQueues",jR="userId",cr="mutations",c2="batchId",yl="userMutationsIndex",u2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r,e){return[r,$n(e)]}function y4(r,e,t){return[r,$n(e),t]}const ER={},Wo="documentMutations",Qf="remoteDocumentsV14",TR=["prefixPath","collectionGroup","readTime","documentId"],Tf="documentKeyIndex",SR=["prefixPath","collectionGroup","documentId"],b4="collectionGroupIndex",AR=["collectionGroup","readTime","prefixPath","documentId"],od="remoteDocumentGlobal",Bp="remoteDocumentGlobalKey",Zo="targets",v4="queryTargetsIndex",IR=["canonicalId","targetId"],ec="targetDocuments",CR=["targetId","path"],Ox="documentTargetsIndex",RR=["path","targetId"],Xf="targetGlobalKey",_l="targetGlobal",cd="collectionParents",kR=["collectionId","parent"],tc="clientMetadata",DR="clientId",Sm="bundles",OR="bundleId",Am="namedQueries",MR="name",Mx="indexConfiguration",VR="indexId",qp="collectionGroupIndex",PR="collectionGroup",qu="indexState",LR=["indexId","uid"],w4="sequenceNumberIndex",zR=["uid","sequenceNumber"],Fu="indexEntries",UR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_4="documentKeyIndex",BR=["indexId","uid","orderedDocumentKey"],Im="documentOverlays",qR=["userId","collectionPath","documentId"],Fp="collectionPathOverlayIndex",FR=["userId","collectionPath","largestBatchId"],N4="collectionGroupOverlayIndex",HR=["userId","collectionGroup","largestBatchId"],Vx="globals",GR="name",j4=[ld,cr,Wo,fl,Zo,Td,_l,ec,tc,od,cd,Sm,Am],$R=[...j4,Im],E4=[ld,cr,Wo,Qf,Zo,Td,_l,ec,tc,od,cd,Sm,Am,Im],T4=E4,Px=[...T4,Mx,qu,Fu],KR=Px,S4=[...Px,Vx],QR=S4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends g4{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Nn(r,e){const t=Ie(r);return ji.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Pi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function A4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??Mn.RED,this.left=l??Mn.EMPTY,this.right=c??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new Mn(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Mn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h2(this.data.getIterator())}getIteratorFrom(e){return new h2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class h2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Co(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new cs([])}unionWith(e){let t=new Tt($t.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new I4("Invalid base64 string: "+c):c}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const XR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(r){if(De(!!r,39018),typeof r=="string"){let e=0;const t=XR.exec(r);if(De(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ht(r.seconds),nanos:Ht(r.nanos)}}function Ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ta(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="server_timestamp",R4="__type__",k4="__previous_value__",D4="__local_write_time__";function Lx(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[R4])==null?void 0:s.stringValue)===C4}function Cm(r){const e=r.mapValue.fields[k4];return Lx(e)?Cm(e):e}function ud(r){const e=Ea(r.mapValue.fields[D4].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,s,l,c,d,f,g,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=w}}const Yf="(default)";class Cl{constructor(e,t){this.projectId=e,this.database=t||Yf}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===Yf}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="__type__",O4="__max__",bi={mapValue:{fields:{__type__:{stringValue:O4}}}},Ux="__vector__",nc="value",Sf={nullValue:"NULL_VALUE"};function Ii(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Lx(r)?4:M4(r)?9007199254740991:Rm(r)?10:11:Se(28295,{value:r})}function Yr(r,e){if(r===e)return!0;const t=Ii(r);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ud(r).isEqual(ud(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Ea(l.timestampValue),f=Ea(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Ta(l.bytesValue).isEqual(Ta(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Ht(l.geoPointValue.latitude)===Ht(c.geoPointValue.latitude)&&Ht(l.geoPointValue.longitude)===Ht(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Ht(l.integerValue)===Ht(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Ht(l.doubleValue),f=Ht(c.doubleValue);return d===f?id(d)===id(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(d2(d)!==d2(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Yr(d[g],f[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function dd(r,e){return(r.values||[]).find((t=>Yr(t,e)))!==void 0}function Ci(r,e){if(r===e)return 0;const t=Ii(r),s=Ii(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=Ht(c.integerValue||c.doubleValue),g=Ht(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return f2(r.timestampValue,e.timestampValue);case 4:return f2(ud(r),ud(e));case 5:return zp(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=Ta(c),g=Ta(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const w=Fe(f[x],g[x]);if(w!==0)return w}return Fe(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=Fe(Ht(c.latitude),Ht(d.latitude));return f!==0?f:Fe(Ht(c.longitude),Ht(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return m2(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,C,Y,V;const f=c.fields||{},g=d.fields||{},x=(N=f[nc])==null?void 0:N.arrayValue,w=(C=g[nc])==null?void 0:C.arrayValue,b=Fe(((Y=x==null?void 0:x.values)==null?void 0:Y.length)||0,((V=w==null?void 0:w.values)==null?void 0:V.length)||0);return b!==0?b:m2(x,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===bi.mapValue&&d===bi.mapValue)return 0;if(c===bi.mapValue)return 1;if(d===bi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},w=Object.keys(x);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const N=zp(g[b],w[b]);if(N!==0)return N;const C=Ci(f[g[b]],x[w[b]]);if(C!==0)return C}return Fe(g.length,w.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function f2(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const t=Ea(r),s=Ea(e),l=Fe(t.seconds,s.seconds);return l!==0?l:Fe(t.nanos,s.nanos)}function m2(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ci(t[l],s[l]);if(c)return c}return Fe(t.length,s.length)}function sc(r){return Gp(r)}function Gp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Ea(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ta(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Gp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Gp(t.fields[d])}`;return l+"}"})(r.mapValue):Se(61005,{value:r})}function Af(r){switch(Ii(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cm(r);return e?16+Af(e):16;case 5:return 2*r.stringValue.length;case 6:return Ta(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Af(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Pi(s.fields,((c,d)=>{l+=c.length+Af(d)})),l})(r.mapValue);default:throw Se(13486,{value:r})}}function hd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function $p(r){return!!r&&"integerValue"in r}function fd(r){return!!r&&"arrayValue"in r}function g2(r){return!!r&&"nullValue"in r}function p2(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function If(r){return!!r&&"mapValue"in r}function Rm(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[zx])==null?void 0:s.stringValue)===Ux}function Hu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Pi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Hu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(r.arrayValue.values[t]);return e}return{...r}}function M4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===O4}const V4={mapValue:{fields:{[zx]:{stringValue:Ux},[nc]:{arrayValue:{}}}}};function JR(r){return"nullValue"in r?Sf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?hd(Cl.empty(),_e.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Rm(r)?V4:{mapValue:{}}:Se(35942,{value:r})}function WR(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?hd(Cl.empty(),_e.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?V4:"mapValue"in r?Rm(r)?{mapValue:{}}:bi:Se(61959,{value:r})}function x2(r,e){const t=Ci(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function y2(r,e){const t=Ci(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=$t.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Hu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];If(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Pi(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Fn(Hu(this.value))}}function P4(r){const e=[];return Pi(r.fields,((t,s)=>{const l=new $t([t]);if(If(s)){const c=P4(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Jt(e,0,Ve.min(),Ve.min(),Ve.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,l){return new Jt(e,1,t,Ve.min(),s,l,0)}static newNoDocument(e,t){return new Jt(e,2,t,Ve.min(),Ve.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Ve.min(),Ve.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.position=e,this.inclusive=t}}function b2(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=_e.comparator(_e.fromName(d.referenceValue),t.key):s=Ci(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function v2(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Yr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{}class lt extends L4{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ek(e,t,s):t==="array-contains"?new sk(e,s):t==="in"?new H4(e,s):t==="not-in"?new rk(e,s):t==="array-contains-any"?new ak(e,s):new lt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new tk(e,s):new nk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ci(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends L4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return ac(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ac(r){return r.op==="and"}function Kp(r){return r.op==="or"}function Bx(r){return z4(r)&&ac(r)}function z4(r){for(const e of r.filters)if(e instanceof Et)return!1;return!0}function Qp(r){if(r instanceof lt)return r.field.canonicalString()+r.op.toString()+sc(r.value);if(Bx(r))return r.filters.map((e=>Qp(e))).join(",");{const e=r.filters.map((t=>Qp(t))).join(",");return`${r.op}(${e})`}}function U4(r,e){return r instanceof lt?(function(s,l){return l instanceof lt&&s.op===l.op&&s.field.isEqual(l.field)&&Yr(s.value,l.value)})(r,e):r instanceof Et?(function(s,l){return l instanceof Et&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&U4(d,l.filters[f])),!0):!1})(r,e):void Se(19439)}function B4(r,e){const t=r.filters.concat(e);return Et.create(t,r.op)}function q4(r){return r instanceof lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${sc(t.value)}`})(r):r instanceof Et?(function(t){return t.op.toString()+" {"+t.getFilters().map(q4).join(" ,")+"}"})(r):"Filter"}class ek extends lt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class tk extends lt{constructor(e,t){super(e,"in",t),this.keys=F4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nk extends lt{constructor(e,t){super(e,"not-in",t),this.keys=F4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function F4(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class sk extends lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fd(t)&&dd(t.arrayValue,this.value)}}class H4 extends lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dd(this.value.arrayValue,t)}}class rk extends lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dd(this.value.arrayValue,t)}}class ak extends lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>dd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Xp(r,e=null,t=[],s=[],l=null,c=null,d=null){return new ik(r,e,t,s,l,c,d)}function Rl(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Qp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>sc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>sc(s))).join(",")),e.Te=t}return e.Te}function Sd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ZR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!U4(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!v2(r.startAt,e.startAt)&&v2(r.endAt,e.endAt)}function Jf(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Wf(r,e){return r.filters.filter((t=>t instanceof lt&&t.field.isEqual(e)))}function w2(r,e,t){let s=Sf,l=!0;for(const c of Wf(r,e)){let d=Sf,f=!0;switch(c.op){case"<":case"<=":d=JR(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=Sf}x2({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];x2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function _2(r,e,t){let s=bi,l=!0;for(const c of Wf(r,e)){let d=bi,f=!0;switch(c.op){case">=":case">":d=WR(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=bi}y2({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];y2({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function G4(r,e,t,s,l,c,d,f){return new vc(r,e,t,s,l,c,d,f)}function Ad(r){return new vc(r)}function N2(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function $4(r){return r.collectionGroup!==null}function Gu(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Tt($t.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new md(c,s))})),t.has($t.keyField().canonicalString())||e.Ie.push(new md($t.keyField(),s))}return e.Ie}function Ss(r){const e=Ie(r);return e.Ee||(e.Ee=lk(e,Gu(r))),e.Ee}function lk(r,e){if(r.limitType==="F")return Xp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new md(l.field,c)}));const t=r.endAt?new rc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new rc(r.startAt.position,r.startAt.inclusive):null;return Xp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Yp(r,e){const t=r.filters.concat([e]);return new vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Zf(r,e,t){return new vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function km(r,e){return Sd(Ss(r),Ss(e))&&r.limitType===e.limitType}function K4(r){return`${Rl(Ss(r))}|lt:${r.limitType}`}function Vo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>q4(l))).join(", ")}]`),Tm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>sc(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>sc(l))).join(",")),`Target(${s})`})(Ss(r))}; limitType=${r.limitType})`}function Id(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):_e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Gu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=b2(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Gu(s),l)||s.endAt&&!(function(d,f,g){const x=b2(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Gu(s),l))})(r,e)}function Q4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function X4(r){return(e,t)=>{let s=!1;for(const l of Gu(r)){const c=ok(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function ok(r,e,t){const s=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ci(g,x):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return A4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new Vt(_e.comparator);function Ts(){return ck}const Y4=new Vt(_e.comparator);function Ou(...r){let e=Y4;for(const t of r)e=e.insert(t.key,t);return e}function J4(r){let e=Y4;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Fr(){return $u()}function W4(){return $u()}function $u(){return new Ia((r=>r.toString()),((r,e)=>r.isEqual(e)))}const uk=new Vt(_e.comparator),dk=new Tt(_e.comparator);function et(...r){let e=dk;for(const t of r)e=e.add(t);return e}const hk=new Tt(Fe);function qx(){return hk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function Z4(r){return{integerValue:""+r}}function ej(r,e){return x4(e)?Z4(e):Fx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function fk(r,e,t){return r instanceof ic?(function(l,c){const d={fields:{[R4]:{stringValue:C4},[D4]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Lx(c)&&(c=Cm(c)),c&&(d.fields[k4]=c),{mapValue:d}})(t,e):r instanceof lc?nj(r,e):r instanceof oc?sj(r,e):(function(l,c){const d=tj(l,c),f=j2(d)+j2(l.Ae);return $p(d)&&$p(l.Ae)?Z4(f):Fx(l.serializer,f)})(r,e)}function mk(r,e,t){return r instanceof lc?nj(r,e):r instanceof oc?sj(r,e):t}function tj(r,e){return r instanceof cc?(function(s){return $p(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class ic extends Dm{}class lc extends Dm{constructor(e){super(),this.elements=e}}function nj(r,e){const t=rj(e);for(const s of r.elements)t.some((l=>Yr(l,s)))||t.push(s);return{arrayValue:{values:t}}}class oc extends Dm{constructor(e){super(),this.elements=e}}function sj(r,e){let t=rj(e);for(const s of r.elements)t=t.filter((l=>!Yr(l,s)));return{arrayValue:{values:t}}}class cc extends Dm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function j2(r){return Ht(r.integerValue||r.doubleValue)}function rj(r){return fd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t){this.field=e,this.transform=t}}function gk(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof lc&&l instanceof lc||s instanceof oc&&l instanceof oc?Yo(s.elements,l.elements,Yr):s instanceof cc&&l instanceof cc?Yr(s.Ae,l.Ae):s instanceof ic&&l instanceof ic})(r.transform,e.transform)}class pk{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Om{}function aj(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Cd(r.key,wn.none()):new wc(r.key,r.data,wn.none());{const t=r.data,s=Fn.empty();let l=new Tt($t.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Ca(r.key,s,new cs(l.toArray()),wn.none())}}function xk(r,e,t){r instanceof wc?(function(l,c,d){const f=l.value.clone(),g=T2(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Ca?(function(l,c,d){if(!Cf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=T2(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ij(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Ku(r,e,t,s){return r instanceof wc?(function(c,d,f,g){if(!Cf(c.precondition,d))return f;const x=c.value.clone(),w=S2(c.fieldTransforms,g,d);return x.setAll(w),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ca?(function(c,d,f,g){if(!Cf(c.precondition,d))return f;const x=S2(c.fieldTransforms,g,d),w=d.data;return w.setAll(ij(c)),w.setAll(x),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,t,s):(function(c,d,f){return Cf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function yk(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=tj(s.transform,l||null);c!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,c))}return t||null}function E2(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Yo(s,l,((c,d)=>gk(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class wc extends Om{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ca extends Om{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ij(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function T2(r,e,t){const s=new Map;De(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,mk(d,f,t[l]))}return s}function S2(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,fk(c,d,e))}return s}class Cd extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lj extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&xk(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ku(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ku(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=W4();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=aj(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,s)=>E2(t,s)))&&Yo(this.baseMutations,e.baseMutations,((t,s)=>E2(t,s)))}}class $x{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){De(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return uk})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new $x(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,ct;function vk(r){switch(r){case re.OK:return Se(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function oj(r){if(r===void 0)return sn("GRPC error has no .code"),re.UNKNOWN;switch(r){case gn.OK:return re.OK;case gn.CANCELLED:return re.CANCELLED;case gn.UNKNOWN:return re.UNKNOWN;case gn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case gn.INTERNAL:return re.INTERNAL;case gn.UNAVAILABLE:return re.UNAVAILABLE;case gn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case gn.NOT_FOUND:return re.NOT_FOUND;case gn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case gn.ABORTED:return re.ABORTED;case gn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case gn.DATA_LOSS:return re.DATA_LOSS;default:return Se(39323,{code:r})}}(ct=gn||(gn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new Ni([4294967295,4294967295],0);function A2(r){const e=wk().encode(r),t=new n4;return t.update(e),new Uint8Array(t.digest())}function I2(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ni([t,s],0),new Ni([l,c],0)]}class Qx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(s<0)throw new Mu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ni.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(Ni.fromNumber(s)));return l.compare(_k)===1&&(l=new Ni([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=A2(e),[s,l]=I2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Qx(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=A2(e),[s,l]=I2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,kd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Rd(Ve.min(),l,new Vt(Fe),Ts(),et())}}class kd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new kd(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class cj{constructor(e,t){this.targetId=e,this.Ce=t}}class uj{constructor(e,t,s=rn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class C2{constructor(){this.ve=0,this.Fe=R2(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),s=et();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Se(38017,{changeType:c})}})),new kd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=R2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=ff(),this.He=ff(),this.Ye=new Vt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Jf(c))if(s===0){const d=new _e(c.path);this.et(t,d,Jt.newNoDocument(d,Ve.min()))}else De(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=Ta(s).toUint8Array()}catch(g){if(g instanceof I4)return rd("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Qx(d,l,c)}catch(g){return rd(g instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&Jf(f.target)){const g=new _e(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Jt.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=et();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Rd(e,t,this.Ye,this.je,s);return this.je=Ts(),this.Je=ff(),this.He=ff(),this.Ye=new Vt(Fe),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new C2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ff(){return new Vt(_e.comparator)}function R2(){return new Vt(_e.comparator)}const jk={asc:"ASCENDING",desc:"DESCENDING"},Ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tk={and:"AND",or:"OR"};class Sk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jp(r,e){return r.useProto3Json||Tm(e)?e:{value:e}}function uc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dj(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Ak(r,e){return uc(r,e.toTimestamp())}function Jn(r){return De(!!r,49232),Ve.fromTimestamp((function(t){const s=Ea(t);return new jt(s.seconds,s.nanos)})(r))}function Xx(r,e){return Wp(r,e).canonicalString()}function Wp(r,e){const t=(function(l){return new yt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function hj(r){const e=yt.fromString(r);return De(wj(e),10190,{key:e.toString()}),e}function em(r,e){return Xx(r.databaseId,e.path)}function Nl(r,e){const t=hj(e);if(t.get(1)!==r.databaseId.projectId)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(gj(t))}function fj(r,e){return Xx(r.databaseId,e)}function mj(r){const e=hj(r);return e.length===4?yt.emptyPath():gj(e)}function Zp(r){return new yt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gj(r){return De(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function k2(r,e,t){return{name:em(r,e),fields:t.value.mapValue.fields}}function Ik(r,e,t){const s=Nl(r,e.name),l=Jn(e.updateTime),c=e.createTime?Jn(e.createTime):Ve.min(),d=new Fn({mapValue:{fields:e.fields}}),f=Jt.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ck(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Se(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,w){return x.useProto3Json?(De(w===void 0||typeof w=="string",58123),rn.fromBase64String(w||"")):(De(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),rn.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const w=x.code===void 0?re.UNKNOWN:oj(x.code);return new be(w,x.message||"")})(d);t=new uj(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Nl(r,s.document.name),c=Jn(s.document.updateTime),d=s.document.createTime?Jn(s.document.createTime):Ve.min(),f=new Fn({mapValue:{fields:s.document.fields}}),g=Jt.newFoundDocument(l,c,d,f),x=s.targetIds||[],w=s.removedTargetIds||[];t=new Rf(x,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Nl(r,s.document),c=s.readTime?Jn(s.readTime):Ve.min(),d=Jt.newNoDocument(l,c),f=s.removedTargetIds||[];t=new Rf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Nl(r,s.document),c=s.removedTargetIds||[];t=new Rf([],c,l,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new bk(l,c),f=s.targetId;t=new cj(f,d)}}return t}function tm(r,e){let t;if(e instanceof wc)t={update:k2(r,e.key,e.value)};else if(e instanceof Cd)t={delete:em(r,e.key)};else if(e instanceof Ca)t={update:k2(r,e.key,e.data),updateMask:Vk(e.fieldMask)};else{if(!(e instanceof lj))return Se(16599,{Vt:e.type});t={verify:em(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof ic)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof lc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof oc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof cc)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Ak(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)})(r,e.precondition)),t}function ex(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?wn.updateTime(Jn(c.updateTime)):c.exists!==void 0?wn.exists(c.exists):wn.none()})(e.currentDocument):wn.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)De(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new ic;else if("appendMissingElements"in f){const w=f.appendMissingElements.values||[];g=new lc(w)}else if("removeAllFromArray"in f){const w=f.removeAllFromArray.values||[];g=new oc(w)}else"increment"in f?g=new cc(d,f.increment):Se(16584,{proto:f});const x=$t.fromServerFormat(f.fieldPath);return new Hx(x,g)})(r,l))):[];if(e.update){e.update.name;const l=Nl(r,e.update.name),c=new Fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new cs(x.map((w=>$t.fromServerFormat(w))))})(e.updateMask);return new Ca(l,c,d,t,s)}return new wc(l,c,t,s)}if(e.delete){const l=Nl(r,e.delete);return new Cd(l,t)}if(e.verify){const l=Nl(r,e.verify);return new lj(l,t)}return Se(1463,{proto:e})}function Rk(r,e){return r&&r.length>0?(De(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Jn(l.updateTime):Jn(c);return d.isEqual(Ve.min())&&(d=Jn(c)),new pk(d,l.transformResults||[])})(t,e)))):[]}function pj(r,e){return{documents:[fj(r,e.path)]}}function xj(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=fj(r,l);const c=(function(x){if(x.length!==0)return vj(Et.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((w=>(function(N){return{field:Po(N.field),direction:Dk(N.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Jp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function yj(r){let e=mj(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){De(s===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const N=bj(b);return N instanceof Et&&Bx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((N=>(function(Y){return new md(Lo(Y.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let N;return N=typeof b=="object"?b.value:b,Tm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(b){const N=!!b.before,C=b.values||[];return new rc(C,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(b){const N=!b.before,C=b.values||[];return new rc(C,N)})(t.endAt)),G4(e,l,d,c,f,"F",g,x)}function kk(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bj(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Lo(t.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Lo(t.unaryFilter.field);return lt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Lo(t.unaryFilter.field);return lt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Lo(t.unaryFilter.field);return lt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return lt.create(Lo(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Et.create(t.compositeFilter.filters.map((s=>bj(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function Dk(r){return jk[r]}function Ok(r){return Ek[r]}function Mk(r){return Tk[r]}function Po(r){return{fieldPath:r.canonicalString()}}function Lo(r){return $t.fromServerFormat(r.fieldPath)}function vj(r){return r instanceof lt?(function(t){if(t.op==="=="){if(p2(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(g2(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p2(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(g2(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:Ok(t.op),value:t.value}}})(r):r instanceof Et?(function(t){const s=t.getFilters().map((l=>vj(l)));return s.length===1?s[0]:{compositeFilter:{op:Mk(t.op),filters:s}}})(r):Se(54877,{filter:r})}function Vk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wj(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,s,l,c=Ve.min(),d=Ve.min(),f=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.yt=e}}function Pk(r,e){let t;if(e.document)t=Ik(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=_e.fromSegments(e.noDocument.path),l=Dl(e.noDocument.readTime);t=Jt.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const s=_e.fromSegments(e.unknownDocument.path),l=Dl(e.unknownDocument.version);t=Jt.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new jt(l[0],l[1]);return Ve.fromTimestamp(c)})(e.readTime)),t}function D2(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:em(c,d.key),fields:d.data.value.mapValue.fields,updateTime:uc(c,d.version.toTimestamp()),createTime:uc(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:kl(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:kl(e.version)}}return s}function nm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function kl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dl(r){const e=new jt(r.seconds,r.nanoseconds);return Ve.fromTimestamp(e)}function gl(r,e){const t=(e.baseMutations||[]).map((c=>ex(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>ex(r.yt,c))),l=jt.fromMillis(e.localWriteTimeMs);return new Gx(e.batchId,l,t,s)}function Vu(r){const e=Dl(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Dl(r.lastLimboFreeSnapshotVersion):Ve.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return De(d===1,1966,{count:d}),Ss(Ad(mj(c.documents[0])))})(r.query):(function(c){return Ss(yj(c))})(r.query),new xa(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,rn.fromBase64String(r.resumeToken))}function Nj(r,e){const t=kl(e.snapshotVersion),s=kl(e.lastLimboFreeSnapshotVersion);let l;l=Jf(e.target)?pj(r.yt,e.target):xj(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function jj(r){const e=yj({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zf(e,e.limit,"L"):e}function ap(r,e){return new Kx(e.largestBatchId,ex(r.yt,e.overlayMutation))}function O2(r,e){const t=e.path.lastSegment();return[r,$n(e.path.popLast()),t]}function M2(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:kl(s.readTime),documentKey:$n(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{getBundleMetadata(e,t){return V2(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:Dl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return V2(e).put((function(l){return{bundleId:l.id,createTime:kl(Jn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return P2(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:jj(c.bundledQuery),readTime:Dl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return P2(e).put((function(l){return{name:l.name,readTime:kl(Jn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function V2(r){return Nn(r,Sm)}function P2(r){return Nn(r,Am)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Mm(e,s)}getOverlay(e,t){return Eu(e).get(O2(this.userId,t)).next((s=>s?ap(this.serializer,s):null))}getOverlays(e,t){const s=Fr();return q.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new Kx(t,d);l.push(this.St(e,f))})),q.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add($n(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(Eu(e).Z(Fp,f))})),q.waitFor(c)}getOverlaysForCollection(e,t,s){const l=Fr(),c=$n(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Eu(e).J(Fp,d).next((f=>{for(const g of f){const x=ap(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=Fr();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Eu(e).ee({index:N4,range:f},((g,x,w)=>{const b=ap(this.serializer,x);c.size()<l||b.largestBatchId===d?(c.set(b.getKey(),b),d=b.largestBatchId):w.done()})).next((()=>c))}St(e,t){return Eu(e).put((function(l,c,d){const[f,g,x]=O2(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:tm(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function Eu(r){return Nn(r,Im)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{bt(e){return Nn(e,Vx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?rn.fromUint8Array(s):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ht(e.integerValue));else if("doubleValue"in e){const s=Ht(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),id(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=Ea(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ta(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?M4(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Rm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=nc,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(Ht(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}pl.Kt=new pl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=255;function Uk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function L2(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=Uk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class Bk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=L2(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=L2(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(Ro),this.sn(255)}_n(){this.an(Ro),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ro?(this.sn(Ro),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ro?(this.an(Ro),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class qk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Fk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Tu{constructor(){this.cn=new Bk,this.ln=new qk(this.cn),this.hn=new Fk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new xl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:kf(this.En),directionalValue:kf(this.dn),orderedDocumentKey:kf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function di(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=z2(r.En,e.En),t!==0?t:(t=z2(r.dn,e.dn),t!==0?t:_e.comparator(r.In,e.In)))}function z2(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function kf(r){return fN()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function U2(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class B2{constructor(e){this.mn=new Tt(((t,s)=>$t.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(De(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Up(e);if(t!==void 0&&!this.wn(t))return!1;const s=hl(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt($t.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new jf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new jf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new jf(s.field,s.dir==="asc"?0:1)));return new $f($f.UNKNOWN_ID,this.collectionId,t,ad.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(r){var t,s;if(De(r instanceof lt||r instanceof Et,20012),r instanceof lt){if(r instanceof H4){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>lt.create(r.field,"==",c))))||[];return Et.create(l,"or")}return r}const e=r.filters.map((l=>Ej(l)));return Et.create(e,r.op)}function Hk(r){if(r.getFilters().length===0)return[];const e=sx(Ej(r));return De(Tj(e),7391),tx(e)||nx(e)?[e]:e.getFilters()}function tx(r){return r instanceof lt}function nx(r){return r instanceof Et&&Bx(r)}function Tj(r){return tx(r)||nx(r)||(function(t){if(t instanceof Et&&Kp(t)){for(const s of t.getFilters())if(!tx(s)&&!nx(s))return!1;return!0}return!1})(r)}function sx(r){if(De(r instanceof lt||r instanceof Et,34018),r instanceof lt)return r;if(r.filters.length===1)return sx(r.filters[0]);const e=r.filters.map((s=>sx(s)));let t=Et.create(e,r.op);return t=sm(t),Tj(t)?t:(De(t instanceof Et,64498),De(ac(t),40251),De(t.filters.length>1,57927),t.filters.reduce(((s,l)=>Yx(s,l))))}function Yx(r,e){let t;return De(r instanceof lt||r instanceof Et,38388),De(e instanceof lt||e instanceof Et,25473),t=r instanceof lt?e instanceof lt?(function(l,c){return Et.create([l,c],"and")})(r,e):q2(r,e):e instanceof lt?q2(e,r):(function(l,c){if(De(l.filters.length>0&&c.filters.length>0,48005),ac(l)&&ac(c))return B4(l,c.getFilters());const d=Kp(l)?l:c,f=Kp(l)?c:l,g=d.filters.map((x=>Yx(x,f)));return Et.create(g,"or")})(r,e),sm(t)}function q2(r,e){if(ac(e))return B4(e,r.getFilters());{const t=e.filters.map((s=>Yx(r,s)));return Et.create(t,"or")}}function sm(r){if(De(r instanceof lt||r instanceof Et,11850),r instanceof lt)return r;const e=r.getFilters();if(e.length===1)return sm(e[0]);if(z4(r))return r;const t=e.map((l=>sm(l))),s=[];return t.forEach((l=>{l instanceof lt?s.push(l):l instanceof Et&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:Et.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.Cn=new Jx}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Cs.min())}updateCollectionGroup(e,t,s){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class Jx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Tt(yt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Tt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="IndexedDbIndexManager",mf=new Uint8Array(0);class $k{constructor(e,t){this.databaseId=t,this.vn=new Jx,this.Fn=new Ia((s=>Rl(s)),((s,l)=>Sd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:$n(l)};return H2(e).put(c)}return q.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[c4(t),""],!1,!0);return H2(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(qr(d.parent))}return s}))}addFieldIndex(e,t){const s=Su(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=Do(e);return c.next((f=>{d.put(M2(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=Su(e),l=Do(e),c=ko(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Su(e),s=ko(e),l=Do(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return q.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new B2(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=ko(e);let l=!0;const c=new Map;return q.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=et();const f=[];return q.forEach(c,((g,x)=>{pe(F2,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((de=>`${de.fieldPath}:${de.kind}`)).join(",")}`})(g)} to execute ${Rl(t)}`);const w=(function($,de){const W=Up(de);if(W===void 0)return null;for(const se of Wf($,W.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null})(x,g),b=(function($,de){const W=new Map;for(const se of hl(de))for(const j of Wf($,se.fieldPath))switch(j.op){case"==":case"in":W.set(se.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return W.set(se.fieldPath.canonicalString(),j.value),Array.from(W.values())}return null})(x,g),N=(function($,de){const W=[];let se=!0;for(const j of hl(de)){const T=j.kind===0?w2($,j.fieldPath,$.startAt):_2($,j.fieldPath,$.startAt);W.push(T.value),se&&(se=T.inclusive)}return new rc(W,se)})(x,g),C=(function($,de){const W=[];let se=!0;for(const j of hl(de)){const T=j.kind===0?_2($,j.fieldPath,$.endAt):w2($,j.fieldPath,$.endAt);W.push(T.value),se&&(se=T.inclusive)}return new rc(W,se)})(x,g),Y=this.On(g,x,N),V=this.On(g,x,C),F=this.Nn(g,x,b),U=this.Bn(g.indexId,w,Y,N.inclusive,V,C.inclusive,F);return q.forEach(U,(ae=>s.Y(ae,t.limit).next(($=>{$.forEach((de=>{const W=_e.fromSegments(de.documentKey);d.has(W)||(d=d.add(W),f.push(W))}))}))))})).next((()=>f))}return q.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Hk(Et.create(e.filters,"and")).map((s=>Xp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),w=[];for(let b=0;b<g;++b){const N=t?this.Ln(t[b/x]):mf,C=this.kn(e,N,s[b%x],l),Y=this.qn(e,N,c[b%x],d),V=f.map((F=>this.kn(e,N,F,!0)));w.push(...this.createRange(C,Y,V))}return w}kn(e,t,s,l){const c=new xl(e,_e.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new xl(e,_e.empty(),t,s);return l?c.An():c}xn(e,t){const s=new B2(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return q.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new Tt($t.comparator),w=!1;for(const b of g.filters)for(const N of b.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?w=!0:x=x.add(N.field));for(const b of g.orderBy)b.field.isKeyField()||(x=x.add(b.field));return x.size+(w?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new Tu;for(const l of hl(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);pl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new Tu;return pl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new Tu;return pl.Kt.Dt(hd(this.databaseId,t),s.Pn((function(c){const d=hl(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new Tu);let c=0;for(const d of hl(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&fd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);pl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new Tu;g.seed(f.un()),pl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof lt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Su(e),l=Do(e);return(t?s.J(qp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return q.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(w,b){const N=b?new ad(b.sequenceNumber,new Cs(Dl(b.readTime),new _e(qr(b.documentKey)),b.largestBatchId)):ad.empty(),C=w.fields.map((([Y,V])=>new jf($t.fromServerFormat(Y),V)));return new $f(w.indexId,w.collectionGroup,C,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Fe(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=Su(e),c=Do(e);return this.Gn(e).next((d=>l.J(qp,IDBKeyRange.bound(t,t)).next((f=>q.forEach(f,(g=>c.put(M2(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return q.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?q.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),q.forEach(f,(g=>this.zn(e,l,g).next((x=>{const w=this.jn(c,g);return x.isEqual(w)?q.resolve():this.Jn(e,c,g,x,w)})))))))}))}Hn(e,t,s,l){return ko(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return ko(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=ko(e);let c=new Tt(di);return l.ee({index:_4,range:IDBKeyRange.only([s.indexId,this.uid,kf(this.$n(s,t))])},((d,f)=>{c=c.add(new xl(s.indexId,t,U2(f.arrayValue),U2(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new Tt(di);const l=this.Qn(t,e);if(l==null)return s;const c=Up(t);if(c!=null){const d=e.data.field(c.fieldPath);if(fd(d))for(const f of d.arrayValue.values||[])s=s.add(new xl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new xl(t.indexId,e.key,mf,l));return s}Jn(e,t,s,l,c){pe(F2,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,w,b,N){const C=g.getIterator(),Y=x.getIterator();let V=Co(C),F=Co(Y);for(;V||F;){let U=!1,ae=!1;if(V&&F){const $=w(V,F);$<0?ae=!0:$>0&&(U=!0)}else V!=null?ae=!0:U=!0;U?(b(F),F=Co(Y)):ae?(N(V),V=Co(C)):(V=Co(C),F=Co(Y))}})(l,c,di,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),q.waitFor(d)}Gn(e){let t=1;return Do(e).ee({index:w4,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>di(d,f))).filter(((d,f,g)=>!f||di(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=di(d,e),g=di(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,mf,_e.empty()),g=l[d+1].Vn(this.uid,mf,_e.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return di(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(G2)}getMinOffset(e,t){return q.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||Se(44426))))).next(G2)}}function H2(r){return Nn(r,cd)}function ko(r){return Nn(r,Fu)}function Su(r){return Nn(r,Mx)}function Do(r){return Nn(r,qu)}function G2(r){De(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;kx(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new Cs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sj=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(r,e,t){const s=r.store(cr),l=r.store(Wo),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((w,b,N)=>(f++,N.delete())));c.push(g.next((()=>{De(f===1,47070,{batchId:t.batchId})})));const x=[];for(const w of t.mutations){const b=y4(e,w.key.path,t.batchId);c.push(l.delete(b)),x.push(w.key)}return q.waitFor(c).next((()=>x))}function rm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Se(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(Sj,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class Vm{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){De(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Vm(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).ee({index:yl,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=zo(e),d=hi(e);return d.add({}).next((f=>{De(typeof f=="number",49019);const g=new Gx(f,t,s,l),x=(function(C,Y,V){const F=V.baseMutations.map((ae=>tm(C.yt,ae))),U=V.mutations.map((ae=>tm(C.yt,ae)));return{userId:Y,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:F,mutations:U}})(this.serializer,this.userId,g),w=[];let b=new Tt(((N,C)=>Fe(N.canonicalString(),C.canonicalString())));for(const N of l){const C=y4(this.userId,N.key.path,f);b=b.add(N.key.path.popLast()),w.push(d.put(x)),w.push(c.put(C,ER))}return b.forEach((N=>{w.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),q.waitFor(w).next((()=>g))}))}lookupMutationBatch(e,t){return hi(e).get(t).next((s=>s?(De(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),gl(this.serializer,s)):null))}er(e,t){return this.Xn[t]?q.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return hi(e).ee({index:yl,range:l},((d,f,g)=>{f.userId===this.userId&&(De(f.batchId>=s,47524,{tr:s}),c=gl(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=wl;return hi(e).ee({index:yl,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,wl],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).J(yl,t).next((s=>s.map((l=>gl(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ef(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return zo(e).ee({range:l},((d,f,g)=>{const[x,w,b]=d,N=qr(w);if(x===this.userId&&t.path.isEqual(N))return hi(e).get(b).next((C=>{if(!C)throw Se(61480,{nr:d,batchId:b});De(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:b}),c.push(gl(this.serializer,C))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(Fe);const l=[];return t.forEach((c=>{const d=Ef(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=zo(e).ee({range:f},((x,w,b)=>{const[N,C,Y]=x,V=qr(C);N===this.userId&&c.path.isEqual(V)?s=s.add(Y):b.done()}));l.push(g)})),q.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=Ef(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new Tt(Fe);return zo(e).ee({range:d},((g,x,w)=>{const[b,N,C]=g,Y=qr(N);b===this.userId&&s.isPrefixOf(Y)?Y.length===l&&(f=f.add(C)):w.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(hi(e).get(c).next((d=>{if(d===null)throw Se(35274,{batchId:c});De(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(gl(this.serializer,d))})))})),q.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return Aj(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),q.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return zo(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=qr(c[1]);l.push(g)}else f.done()})).next((()=>{De(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return Ij(e,this.userId,t)}_r(e){return Cj(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:wl,lastStreamToken:""}))}}function Ij(r,e,t){const s=Ef(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return zo(r).ee({range:c,X:!0},((f,g,x)=>{const[w,b,N]=f;w===e&&b===l&&(d=!0),x.done()})).next((()=>d))}function hi(r){return Nn(r,cr)}function zo(r){return Nn(r,Wo)}function Cj(r){return Nn(r,ld)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ol(0)}static cr(){return new Ol(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Ol(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ve.fromTimestamp(new jt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Oo(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(De(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return Oo(e).ee(((d,f)=>{const g=Vu(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>q.waitFor(c))).next((()=>l))}forEachTarget(e,t){return Oo(e).ee(((s,l)=>{const c=Vu(l);t(c)}))}lr(e){return K2(e).get(Xf).next((t=>(De(t!==null,2888),t)))}hr(e,t){return K2(e).put(Xf,t)}Pr(e,t){return Oo(e).put(Nj(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Rl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Oo(e).ee({range:l,index:v4},((d,f,g)=>{const x=Vu(f);Sd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=yi(e);return t.forEach((d=>{const f=$n(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),q.waitFor(l)}removeMatchingKeys(e,t,s){const l=yi(e);return q.forEach(t,(c=>{const d=$n(c.path);return q.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=yi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=yi(e);let c=et();return l.ee({range:s,X:!0},((d,f,g)=>{const x=qr(d[1]),w=new _e(x);c=c.add(w)})).next((()=>c))}containsKey(e,t){const s=$n(t.path),l=IDBKeyRange.bound([s],[c4(s)],!1,!0);let c=0;return yi(e).ee({index:Ox,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return Oo(e).get(t).next((s=>s?Vu(s):null))}}function Oo(r){return Nn(r,Zo)}function K2(r){return Nn(r,_l)}function yi(r){return Nn(r,ec)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="LruGarbageCollector",Rj=1048576;function X2([r,e],[t,s]){const l=Fe(r,t);return l===0?Fe(e,s):l}class Qk{constructor(e){this.Ir=e,this.buffer=new Tt(X2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();X2(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kj{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(Q2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vi(t)?pe(Q2,"Ignoring IndexedDB error during garbage collection: ",t):await Mi(t)}await this.Vr(3e5)}))}}class Xk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(os.ce);const s=new Qk(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve($2)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(s=b,f=Date.now(),this.removeTargets(e,s,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(x=Date.now(),Mo()<=it.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${b} documents in `+(x-g)+`ms
Total Duration: ${x-w}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function Dj(r,e){return new Xk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this.db=e,this.garbageCollector=Dj(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return gf(e,s)}removeReference(e,t,s){return gf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return gf(e,t)}br(e,t){return(function(l,c){let d=!1;return Cj(l).te((f=>Ij(l,f,c).next((g=>(g&&(d=!0),q.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Ve.min()),yi(e).delete((function(b){return[0,$n(b.path)]})(d)))))}));l.push(g)}})).next((()=>q.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return gf(e,t)}Sr(e,t){const s=yi(e);let l,c=os.ce;return s.ee({index:Ox},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==os.ce&&t(new _e(qr(l)),c),c=x,l=g):c=os.ce})).next((()=>{c!==os.ce&&t(new _e(qr(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gf(r,e){return yi(r).put((function(s,l){return{targetId:0,path:$n(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.changes=new Ia((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return cl(e).put(s)}removeEntry(e,t,s){return cl(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],nm(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=Jt.newInvalidDocument(t);return cl(e).ee({index:Tf,range:IDBKeyRange.only(Au(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:Jt.newInvalidDocument(t)};return cl(e).ee({index:Tf,range:IDBKeyRange.only(Au(t))},((l,c)=>{s={document:this.Cr(t,c),size:rm(c)}})).next((()=>s))}getEntries(e,t){let s=Ts();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=Ts(),l=new Vt(_e.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,rm(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return q.resolve();let l=new Tt(W2);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(Au(l.first()),Au(l.last())),d=l.getIterator();let f=d.getNext();return cl(e).ee({index:Tf,range:c},((g,x,w)=>{const b=_e.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&W2(f,b)<0;)s(f,null),f=d.getNext();f&&f.isEqual(b)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?w.j(Au(f)):w.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),nm(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cl(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let w=Ts();for(const b of x){const N=this.Cr(_e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);N.isFoundDocument()&&(Id(t,N)||l.has(N.key))&&(w=w.insert(N.key,N))}return w}))}getAllFromCollectionGroup(e,t,s,l){let c=Ts();const d=J2(t,s),f=J2(t,Cs.max());return cl(e).ee({index:b4,range:IDBKeyRange.bound(d,f,!0)},((g,x,w)=>{const b=this.Cr(_e.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(b.key,b),c.size===l&&w.done()})).next((()=>c))}newChangeBuffer(e){return new Wk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Y2(e).get(Bp).next((t=>(De(!!t,20021),t)))}Dr(e,t){return Y2(e).put(Bp,t)}Cr(e,t){if(t){const s=Pk(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Ve.min())))return s}return Jt.newInvalidDocument(e)}}function Mj(r){return new Jk(r)}class Wk extends Oj{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ia((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new Tt(((c,d)=>Fe(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=D2(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=rm(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=D2(this.Nr.serializer,d.convertToNoDocument(Ve.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),q.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function Y2(r){return Nn(r,od)}function cl(r){return Nn(r,Qf)}function Au(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J2(r,e){const t=e.documentKey.path.toArray();return[r,nm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W2(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=Fe(t[c],s[c]),l)return l;return l=Fe(t.length,s.length),l||(l=Fe(t[t.length-2],s[s.length-2]),l||Fe(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&Ku(s.mutation,l,cs.empty(),jt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const l=Fr();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Ou();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Fr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=Ts();const d=$u(),f=(function(){return $u()})();return t.forEach(((g,x)=>{const w=s.get(x.key);l.has(x.key)&&(w===void 0||w.mutation instanceof Ca)?c=c.insert(x.key,x):w!==void 0?(d.set(x.key,w.mutation.getFieldMask()),Ku(w.mutation,x,w.mutation.getFieldMask(),jt.now())):d.set(x.key,cs.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,w)=>d.set(x,w))),t.forEach(((x,w)=>f.set(x,new Zk(w,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=$u();let l=new Vt(((d,f)=>d-f)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let w=s.get(g)||cs.empty();w=f.applyToLocalView(x,w),s.set(g,w);const b=(l.get(f.batchId)||et()).add(g);l=l.insert(f.batchId,b)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,w=g.value,b=W4();w.forEach((N=>{if(!c.has(N)){const C=aj(t.get(N),s.get(N));C!==null&&b.set(N,C),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,b))}return q.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return _e.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):q.resolve(Fr());let f=Jo,g=c;return d.next((x=>q.forEach(x,((w,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),c.get(w)?q.resolve():this.remoteDocumentCache.getEntry(e,w).next((N=>{g=g.insert(w,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,et()))).next((w=>({batchId:f,changes:J4(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let l=Ou();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Ou();return this.indexManager.getCollectionParents(e,c).next((f=>q.forEach(f,(g=>{const x=(function(b,N){return new vc(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((w=>{w.forEach(((b,N)=>{d=d.insert(b,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const w=x.getKey();d.get(w)===null&&(d=d.insert(w,Jt.newInvalidDocument(w)))}));let f=Ou();return d.forEach(((g,x)=>{const w=c.get(g);w!==void 0&&Ku(w.mutation,x,cs.empty(),jt.now()),Id(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Jn(l.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:jj(l.bundledQuery),readTime:Jn(l.readTime)}})(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.overlays=new Vt(_e.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Fr();return q.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),q.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),q.resolve()}getOverlaysForCollection(e,t,s){const l=Fr(),c=t.length+1,d=new _e(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return q.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Vt(((x,w)=>x-w));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let w=c.get(x.largestBatchId);w===null&&(w=Fr(),c=c.insert(x.largestBatchId,w)),w.set(x.getKey(),x)}}const f=Fr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,w)=>f.set(x,w))),!(f.size()>=l)););return q.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Kx(t,s));let c=this.qr.get(t);c===void 0&&(c=et(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.Qr=new Tt(Tn.$r),this.Ur=new Tt(Tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Tn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Tn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new yt([])),s=new Tn(t,e),l=new Tn(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new yt([])),s=new Tn(t,e),l=new Tn(t,e+1);let c=et();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Tn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Tn.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Gx(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new Tn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return q.resolve(d)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?wl:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tn(t,0),l=new Tn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(Fe);return t.forEach((l=>{const c=new Tn(l,0),d=new Tn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;_e.isDocumentKey(c)||(c=c.child(""));const d=new Tn(new _e(c),0);let f=new Tt(Fe);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){De(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return q.forEach(t.mutations,(l=>{const c=new Tn(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Tn(t,0),l=this.Zr.firstAfterOrEqual(s);return q.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.ri=e,this.docs=(function(){return new Vt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return q.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let s=Ts();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Jt.newInvalidDocument(l))})),q.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=Ts();const d=t.path,f=new _e(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:w}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||kx(f4(w),s)<=0||(l.has(w.key)||Id(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return q.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Se(9500)}ii(e,t){return q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new a8(this)}getSize(e){return q.resolve(this.size)}}class a8 extends Oj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.persistence=e,this.si=new Ia((t=>Rl(t)),Sd),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Wx,this.targetCount=0,this.ai=Ol.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),q.waitFor(c).next((()=>l))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return q.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),q.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),q.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return q.resolve(s)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t){this.ui={},this.overlays={},this.ci=new os(0),this.li=!1,this.li=!0,this.hi=new n8,this.referenceDelegate=e(this),this.Pi=new i8(this),this.indexManager=new Gk,this.remoteDocumentCache=(function(l){return new r8(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new _j(t),this.Ii=new e8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new t8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new s8(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const l=new l8(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class l8 extends g4{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Ri=new Wx,this.Vi=null}static mi(e){return new Pm(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),q.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(s=>{const l=_e.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class am{constructor(e,t){this.persistence=e,this.pi=new Ia((s=>$n(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=Dj(this,t)}static mi(e,t){return new am(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?q.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}br(e,t,s){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return q.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.serializer=e}k(e,t,s,l){const c=new Em("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(Td)})(e),(function(g){g.createObjectStore(ld,{keyPath:jR}),g.createObjectStore(cr,{keyPath:c2,autoIncrement:!0}).createIndex(yl,u2,{unique:!0}),g.createObjectStore(Wo)})(e),Z2(e),(function(g){g.createObjectStore(fl)})(e));let d=q.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(ec),g.deleteObjectStore(Zo),g.deleteObjectStore(_l)})(e),Z2(e)),d=d.next((()=>(function(g){const x=g.store(_l),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return x.put(Xf,w)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(cr).J().next((b=>{g.deleteObjectStore(cr),g.createObjectStore(cr,{keyPath:c2,autoIncrement:!0}).createIndex(yl,u2,{unique:!0});const N=x.store(cr),C=b.map((Y=>N.put(Y)));return q.waitFor(C)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(tc,{keyPath:DR})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(od)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(Sm,{keyPath:OR})})(e),(function(g){g.createObjectStore(Am,{keyPath:MR})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(Im,{keyPath:qR});x.createIndex(Fp,FR,{unique:!1}),x.createIndex(N4,HR,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Qf,{keyPath:TR});x.createIndex(Tf,SR),x.createIndex(b4,AR)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(fl)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Mx,{keyPath:VR,autoIncrement:!0}).createIndex(qp,PR,{unique:!1}),g.createObjectStore(qu,{keyPath:LR}).createIndex(w4,zR,{unique:!1}),g.createObjectStore(Fu,{keyPath:UR}).createIndex(_4,BR,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Vx,{keyPath:GR})})(e)}))),s<18&&l>=18&&fN()&&(d=d.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),d}wi(e){let t=0;return e.store(fl).ee(((s,l)=>{t+=rm(l)})).next((()=>{const s={byteSize:t};return e.store(od).put(Bp,s)}))}yi(e){const t=e.store(ld),s=e.store(cr);return t.J().next((l=>q.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,wl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(yl,d).next((f=>q.forEach(f,(g=>{De(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=gl(this.serializer,g);return Aj(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(ec),s=e.store(fl);return e.store(_l).get(Xf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new yt(d),x=(function(b){return[0,$n(b)]})(g);c.push(t.get(x).next((w=>w?q.resolve():(b=>t.put({targetId:0,path:$n(b),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>q.waitFor(c)))}))}bi(e,t){e.createObjectStore(cd,{keyPath:kR});const s=t.store(cd),l=new Jx,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:$n(g)})}};return t.store(fl).ee({X:!0},((d,f)=>{const g=new yt(d);return c(g.popLast())})).next((()=>t.store(Wo).ee({X:!0},(([d,f,g],x)=>{const w=qr(f);return c(w.popLast())}))))}Di(e){const t=e.store(Zo);return t.ee(((s,l)=>{const c=Vu(l),d=Nj(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(fl),l=[];return s.ee(((c,d)=>{const f=t.store(Qf),g=(function(b){return b.document?new _e(yt.fromString(b.document.name).popFirst(5)):b.noDocument?_e.fromSegments(b.noDocument.path):b.unknownDocument?_e.fromSegments(b.unknownDocument.path):Se(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>q.waitFor(l)))}Fi(e,t){const s=t.store(cr),l=Mj(this.serializer),c=new Zx(Pm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??et();gl(this.serializer,g).keys().forEach((w=>x=x.add(w))),f.set(g.userId,x)})),q.forEach(f,((g,x)=>{const w=new Bn(x),b=Mm.wt(this.serializer,w),N=c.getIndexManager(w),C=Vm.wt(w,this.serializer,N,c.referenceDelegate);return new Vj(l,C,b,N).recalculateAndSaveOverlaysForDocumentKeys(new Hp(t,os.ce),g).next()}))}))}}function Z2(r){r.createObjectStore(ec,{keyPath:CR}).createIndex(Ox,RR,{unique:!0}),r.createObjectStore(Zo,{keyPath:"targetId"}).createIndex(v4,IR,{unique:!0}),r.createObjectStore(_l)}const fi="IndexedDbPersistence",ip=18e5,lp=5e3,op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",c8="main";class ey{constructor(e,t,s,l,c,d,f,g,x,w,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=w,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!ey.v())throw new be(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yk(this,l),this.$i=t+c8,this.serializer=new _j(g),this.Ui=new ji(this.$i,this.Ni,new o8(this.serializer)),this.hi=new zk,this.Pi=new Kk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mj(this.serializer),this.Ii=new Lk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&sn(fi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(re.FAILED_PRECONDITION,op);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new os(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Vi(e))return pe(fi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe(fi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Iu(e).get(Io).next((t=>q.resolve(this.es(t))))}ts(e){return pf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ip)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=Nn(t,tc);return s.J().next((l=>{const c=this.ss(l,ip),d=l.filter((f=>c.indexOf(f)===-1));return q.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?q.resolve(!0):Iu(e).get(Io).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new be(re.FAILED_PRECONDITION,op);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).J().next((s=>this.ss(s,lp).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&pe(fi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Td,tc],(e=>{const t=new Hp(e,os.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>pf(e).J().next((t=>this.ss(t,ip).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Vm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $k(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Mm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){pe(fi,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?QR:g===17?S4:g===16?KR:g===15?Px:g===14?T4:g===13?E4:g===12?$R:g===11?j4:void Se(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new Hp(f,this.ci?this.ci.next():os.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new be(re.FAILED_PRECONDITION,m4);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return Iu(e).get(Io).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(re.FAILED_PRECONDITION,op)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iu(e).put(Io,t)}static v(){return ji.v()}Zi(e){const t=Iu(e);return t.get(Io).next((s=>this.es(s)?(pe(fi,"Releasing primary lease."),t.delete(Io)):q.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(sn(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;hN()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return pe(fi,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return sn(fi,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Iu(r){return Nn(r,Td)}function pf(r){return Nn(r,tc)}function Pj(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=et(),l=et();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new ty(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hN()?8:p4(_n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new u8;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(Mo()<=it.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Mo()<=it.DEBUG&&pe("QueryEngine","Query:",Vo(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Mo()<=it.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ss(t))):q.resolve())}ys(e,t){if(N2(t))return q.resolve(null);let s=Ss(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Zf(t,null,"F"),s=Ss(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=et(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Zf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return N2(t)||l.isEqual(Ve.min())?q.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?q.resolve(null):(Mo()<=it.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Vo(t)),this.vs(e,d,t,h4(l,Jo)).next((f=>f)))}))}Ds(e,t){let s=new Tt(X4(e));return t.forEach(((l,c)=>{Id(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return Mo()<=it.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="LocalStore",d8=3e8;class h8{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Vt(Fe),this.xs=new Ia((c=>Rl(c)),Sd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function zj(r,e,t,s){return new h8(r,e,t,s)}async function Uj(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=et();for(const x of l){d.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}for(const x of c){f.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function f8(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,w){const b=x.batch,N=b.keys();let C=q.resolve();return N.forEach((Y=>{C=C.next((()=>w.getEntry(g,Y))).next((V=>{const F=x.docVersions.get(Y);De(F!==null,48541),V.version.compareTo(F)<0&&(b.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),w.addEntry(V)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,b)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=et();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function Bj(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function m8(r,e){const t=Ie(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((w,b)=>{const N=l.get(b);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let C=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(rn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):w.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(w.resumeToken,s)),l=l.insert(b,C),(function(V,F,U){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=d8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(N,C,w)&&f.push(t.Pi.updateTargetData(c,C))}));let g=Ts(),x=et();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),f.push(g8(c,d,e.documentUpdates).next((w=>{g=w.ks,x=w.qs}))),!s.isEqual(Ve.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(w)}return q.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function g8(r,e,t){let s=et(),l=et();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Ts();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):pe(ny,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function p8(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=wl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function im(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,q.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new xa(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function dc(r,e,t){const s=Ie(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Vi(d))throw d;pe(ny,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function lm(r,e,t){const s=Ie(r);let l=Ve.min(),c=et();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,w){const b=Ie(g),N=b.xs.get(w);return N!==void 0?q.resolve(b.Ms.get(N)):b.Pi.getTargetData(x,w)})(s,d,Ss(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Ve.min(),t?c:et()))).next((f=>(Hj(s,Q4(e),f),{documents:f,Qs:c})))))}function qj(r,e){const t=Ie(r),s=Ie(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function Fj(r,e){const t=Ie(r),s=t.Os.get(e)||Ve.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,h4(s,Jo),Number.MAX_SAFE_INTEGER))).then((l=>(Hj(t,e,l),l)))}function Hj(r,e,t){let s=r.Os.get(e)||Ve.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="firestore_clients";function e_(r,e){return`${Gj}_${r}_${e}`}const $j="firestore_mutations";function t_(r,e,t){let s=`${$j}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const Kj="firestore_targets";function cp(r,e){return`${Kj}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="SharedClientState";class om{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new be(l.error.code,l.error.message))),d?new om(e,t,l.state,c):(sn(Ur,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new be(s.error.code,s.error.message))),c?new Qu(e,s.state,l):(sn(Ur,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=qx();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=x4(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new cm(e,c):(sn(Ur,`Failed to parse client data for instance '${e}': ${t}`),null)}}class sy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new sy(t.clientId,t.onlineState):(sn(Ur,`Failed to parse online state: ${e}`),null)}}class rx{constructor(){this.activeTargetIds=qx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Vt(Fe),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=e_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new rx),this.ro=new RegExp(`^${Gj}_${d}_([^_]*)$`),this.io=new RegExp(`^${$j}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Kj}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(e_(this.persistenceKey,s));if(l){const c=cm.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(cp(this.persistenceKey,e));if(l){const c=Qu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pe(Ur,"READ",e,t),t}setItem(e,t){pe(Ur,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){pe(Ur,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(pe(Ur,"EVENT",t.key,t.newValue),t.key===this.eo)return void sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=os.ce;if(c!=null)try{const f=JSON.parse(c);De(typeof f=="number",30636,{So:c}),d=f}catch(f){sn(Ur,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==os.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new om(this.currentUser,e,t,s),c=t_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=t_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=cp(this.persistenceKey,e),c=new Qu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return cm.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return om.Ws(new Bn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Qu.Ws(l,t)}uo(e){return sy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);pe(Ur,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=qx();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class Qj{constructor(){this.Mo=new rx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rx,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="ConnectivityMonitor";class s_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(n_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(n_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf=null;function ax(){return xf===null?xf=(function(){return 268435456+Math.round(2147483648*Math.random())})():xf++,"0x"+xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="RestConnection",y8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Yf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=ax(),f=this.zo(e,t.toUriEncodedString());pe(dp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),w=pc(x);return this.Jo(e,f,g,s,w).then((b=>(pe(dp,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw rd(dp,`RPC '${e}' ${d} failed with error: `,b,"url: ",f,"request:",s),b}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=y8[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class w8 extends b8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=ax();return new Promise(((f,g)=>{const x=new s4;x.setWithCredentials(!0),x.listenOnce(r4.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case Nf.NO_ERROR:const b=x.getResponseJson();pe(Un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),f(b);break;case Nf.TIMEOUT:pe(Un,`RPC '${e}' ${d} timed out`),g(new be(re.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const N=x.getStatus();if(pe(Un,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const Y=C==null?void 0:C.error;if(Y&&Y.status&&Y.message){const V=(function(U){const ae=U.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ae)>=0?ae:re.UNKNOWN})(Y.status);g(new be(V,Y.message))}else g(new be(re.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new be(re.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{pe(Un,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);pe(Un,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",w,s,15)}))}T_(e,t,s){const l=ax(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=l4(),f=i4(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=c.join("");pe(Un,`Creating RPC '${e}' stream ${l}: ${w}`,g);const b=d.createWebChannel(w,g);this.I_(b);let N=!1,C=!1;const Y=new v8({Yo:F=>{C?pe(Un,`Not sending because RPC '${e}' stream ${l} is closed:`,F):(N||(pe(Un,`Opening RPC '${e}' stream ${l} transport.`),b.open(),N=!0),pe(Un,`RPC '${e}' stream ${l} sending:`,F),b.send(F))},Zo:()=>b.close()}),V=(F,U,ae)=>{F.listen(U,($=>{try{ae($)}catch(de){setTimeout((()=>{throw de}),0)}}))};return V(b,Du.EventType.OPEN,(()=>{C||(pe(Un,`RPC '${e}' stream ${l} transport opened.`),Y.o_())})),V(b,Du.EventType.CLOSE,(()=>{C||(C=!0,pe(Un,`RPC '${e}' stream ${l} transport closed`),Y.a_(),this.E_(b))})),V(b,Du.EventType.ERROR,(F=>{C||(C=!0,rd(Un,`RPC '${e}' stream ${l} transport errored. Name:`,F.name,"Message:",F.message),Y.a_(new be(re.UNAVAILABLE,"The operation could not be completed")))})),V(b,Du.EventType.MESSAGE,(F=>{var U;if(!C){const ae=F.data[0];De(!!ae,16349);const $=ae,de=($==null?void 0:$.error)||((U=$[0])==null?void 0:U.error);if(de){pe(Un,`RPC '${e}' stream ${l} received error:`,de);const W=de.status;let se=(function(A){const R=gn[A];if(R!==void 0)return oj(R)})(W),j=de.message;se===void 0&&(se=re.INTERNAL,j="Unknown error status: "+W+" with message "+de.message),C=!0,Y.a_(new be(se,j)),b.close()}else pe(Un,`RPC '${e}' stream ${l} received:`,ae),Y.u_(ae)}})),V(f,a4.STAT_EVENT,(F=>{F.stat===Lp.PROXY?pe(Un,`RPC '${e}' stream ${l} detected buffering proxy`):F.stat===Lp.NOPROXY&&pe(Un,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return typeof window<"u"?window:null}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r){return new Sk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&pe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="PersistentStream";class Jj{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yj(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new be(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(r_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(r_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _8 extends Jj{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Ck(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Jn(d.readTime):Ve.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=Jf(g)?{documents:pj(c,g)}:{query:xj(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=dj(c,d.resumeToken);const x=Jp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Ve.min())>0){f.readTime=uc(c,d.snapshotVersion.toTimestamp());const x=Jp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=kk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class N8 extends Jj{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Rk(e.writeResults,e.commitTime),s=Jn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tm(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{}class E8 extends j8{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Wp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(re.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Wp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class T8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sn(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="RemoteStore";class S8{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ul(this)&&(pe(Ml,"Restarting streams for network reachability change."),await(async function(g){const x=Ie(g);x.Ea.add(4),await Dd(x),x.Ra.set("Unknown"),x.Ea.delete(4),await zm(x)})(this))}))})),this.Ra=new T8(s,l)}}async function zm(r){if(Ul(r))for(const e of r.da)await e(!0)}async function Dd(r){for(const e of r.da)await e(!1)}function Um(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),iy(t)?ay(t):Nc(t).O_()&&ry(t,e))}function hc(r,e){const t=Ie(r),s=Nc(t);t.Ia.delete(e),s.O_()&&Wj(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ul(t)&&t.Ra.set("Unknown"))}function ry(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nc(r).Y_(e)}function Wj(r,e){r.Va.Ue(e),Nc(r).Z_(e)}function ay(r){r.Va=new Nk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Nc(r).start(),r.Ra.ua()}function iy(r){return Ul(r)&&!Nc(r).x_()&&r.Ia.size>0}function Ul(r){return Ie(r).Ea.size===0}function Zj(r){r.Va=void 0}async function A8(r){r.Ra.set("Online")}async function I8(r){r.Ia.forEach(((e,t)=>{ry(r,e)}))}async function C8(r,e){Zj(r),iy(r)?(r.Ra.ha(e),ay(r)):r.Ra.set("Unknown")}async function R8(r,e,t){if(r.Ra.set("Online"),e instanceof uj&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){pe(Ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await um(r,s)}else if(e instanceof Rf?r.Va.Ze(e):e instanceof cj?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ve.min()))try{const s=await Bj(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(x);w&&c.Ia.set(x,w.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(rn.EMPTY_BYTE_STRING,w.snapshotVersion)),Wj(c,g);const b=new xa(w.target,g,x,w.sequenceNumber);ry(c,b)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){pe(Ml,"Failed to raise snapshot:",s),await um(r,s)}}async function um(r,e,t){if(!Vi(e))throw e;r.Ea.add(1),await Dd(r),r.Ra.set("Offline"),t||(t=()=>Bj(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(Ml,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await zm(r)}))}function e5(r,e){return e().catch((t=>um(r,t,e)))}async function _c(r){const e=Ie(r),t=Ri(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wl;for(;k8(e);)try{const l=await p8(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,D8(e,l)}catch(l){await um(e,l)}t5(e)&&n5(e)}function k8(r){return Ul(r)&&r.Ta.length<10}function D8(r,e){r.Ta.push(e);const t=Ri(r);t.O_()&&t.X_&&t.ea(e.mutations)}function t5(r){return Ul(r)&&!Ri(r).x_()&&r.Ta.length>0}function n5(r){Ri(r).start()}async function O8(r){Ri(r).ra()}async function M8(r){const e=Ri(r);for(const t of r.Ta)e.ea(t.mutations)}async function V8(r,e,t){const s=r.Ta.shift(),l=$x.from(s,e,t);await e5(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await _c(r)}async function P8(r,e){e&&Ri(r).X_&&await(async function(s,l){if((function(d){return vk(d)&&d!==re.ABORTED})(l.code)){const c=s.Ta.shift();Ri(s).B_(),await e5(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await _c(s)}})(r,e),t5(r)&&n5(r)}async function a_(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),pe(Ml,"RemoteStore received new credentials");const s=Ul(t);t.Ea.add(3),await Dd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zm(t)}async function ix(r,e){const t=Ie(r);e?(t.Ea.delete(2),await zm(t)):e||(t.Ea.add(2),await Dd(t),t.Ra.set("Unknown"))}function Nc(r){return r.ma||(r.ma=(function(t,s,l){const c=Ie(t);return c.sa(),new _8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:A8.bind(null,r),t_:I8.bind(null,r),r_:C8.bind(null,r),H_:R8.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),iy(r)?ay(r):r.Ra.set("Unknown")):(await r.ma.stop(),Zj(r))}))),r.ma}function Ri(r){return r.fa||(r.fa=(function(t,s,l){const c=Ie(t);return c.sa(),new N8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:O8.bind(null,r),r_:P8.bind(null,r),ta:M8.bind(null,r),na:V8.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await _c(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(Ml,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new ly(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(r,e){if(sn("AsyncQueue",`${e}: ${r}`),Vi(r))return new be(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=Ou(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ga=new Vt(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class fc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new fc(e,t,Go.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class z8{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Ie(t),c=l.queries;l.queries=l_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new be(re.ABORTED,"Firestore shutting down"))}}function l_(){return new Ia((r=>K4(r)),km)}async function oy(r,e){const t=Ie(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new L8,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Bm(d,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&uy(t)}async function cy(r,e){const t=Ie(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function U8(r,e){const t=Ie(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&uy(t)}function B8(r,e,t){const s=Ie(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function uy(r){r.Ca.forEach((e=>{e.next()}))}var lx,o_;(o_=lx||(lx={})).Ma="default",o_.Cache="cache";class dy{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new fc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.key=e}}class r5{constructor(e){this.key=e}}class a5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=X4(e),this.tu=new Go(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new i_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,b)=>{const N=l.get(w),C=Id(this.query,b)?b:null,Y=!!N&&this.mutatedKeys.has(N.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let F=!1;N&&C?N.data.isEqual(C.data)?Y!==V&&(s.track({type:3,doc:C}),F=!0):this.su(N,C)||(s.track({type:2,doc:C}),F=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(f=!0)):!N&&C?(s.track({type:0,doc:C}),F=!0):N&&!C&&(s.track({type:1,doc:N}),F=!0,(g||x)&&(f=!0)),F&&(C?(d=d.add(C),c=V?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,b)=>(function(C,Y){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:F})}};return V(C)-V(Y)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new fc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new r5(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new s5(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jc="SyncEngine";class q8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class F8{constructor(e){this.key=e,this.hu=!1}}class H8{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ia((f=>K4(f)),km),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(_e.comparator),this.Au=new Map,this.Ru=new Wx,this.Vu={},this.mu=new Map,this.fu=Ol.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function G8(r,e,t=!0){const s=qm(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await i5(s,e,t,!0),l}async function $8(r,e){const t=qm(r);await i5(t,e,!0,!1)}async function i5(r,e,t,s){const l=await im(r.localStore,Ss(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await hy(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&Um(r.remoteStore,l),f}async function hy(r,e,t,s,l){r.pu=(b,N,C)=>(async function(V,F,U,ae){let $=F.view.ru(U);$.Cs&&($=await lm(V.localStore,F.query,!1).then((({documents:j})=>F.view.ru(j,$))));const de=ae&&ae.targetChanges.get(F.targetId),W=ae&&ae.targetMismatches.get(F.targetId)!=null,se=F.view.applyChanges($,V.isPrimaryClient,de,W);return ox(V,F.targetId,se.au),se.snapshot})(r,b,N,C);const c=await lm(r.localStore,e,!0),d=new a5(e,c.Qs),f=d.ru(c.documents),g=kd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);ox(r,t,x.au);const w=new q8(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function K8(r,e,t){const s=Ie(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!km(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await dc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&hc(s.remoteStore,l.targetId),mc(s,l.targetId)})).catch(Mi)):(mc(s,l.targetId),await dc(s.localStore,l.targetId,!0))}async function Q8(r,e){const t=Ie(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),hc(t.remoteStore,s.targetId))}async function X8(r,e,t){const s=py(r);try{const l=await(function(d,f){const g=Ie(d),x=jt.now(),w=f.reduce(((C,Y)=>C.add(Y.key)),et());let b,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let Y=Ts(),V=et();return g.Ns.getEntries(C,w).next((F=>{Y=F,Y.forEach(((U,ae)=>{ae.isValidDocument()||(V=V.add(U))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,Y))).next((F=>{b=F;const U=[];for(const ae of f){const $=yk(ae,b.get(ae.key).overlayedDocument);$!=null&&U.push(new Ca(ae.key,$,P4($.value.mapValue),wn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,U,f)})).next((F=>{N=F;const U=F.applyToLocalDocumentSet(b,V);return g.documentOverlayCache.saveOverlays(C,F.batchId,U)}))})).then((()=>({batchId:N.batchId,changes:J4(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Vt(Fe)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Li(s,l.changes),await _c(s.remoteStore)}catch(l){const c=Bm(l,"Failed to persist write");t.reject(c)}}async function l5(r,e){const t=Ie(r);try{const s=await m8(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(De(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?De(d.hu,14607):l.removedDocuments.size>0&&(De(d.hu,42227),d.hu=!1))})),await Li(t,s,e)}catch(s){await Mi(s)}}function c_(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=Ie(d);g.onlineState=f;let x=!1;g.queries.forEach(((w,b)=>{for(const N of b.Sa)N.va(f)&&(x=!0)})),x&&uy(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Y8(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Vt(_e.comparator);d=d.insert(c,Jt.newNoDocument(c,Ve.min()));const f=et().add(c),g=new Rd(Ve.min(),new Map,new Vt(Fe),d,f);await l5(s,g),s.du=s.du.remove(c),s.Au.delete(e),gy(s)}else await dc(s.localStore,e,!1).then((()=>mc(s,e,t))).catch(Mi)}async function J8(r,e){const t=Ie(r),s=e.batch.batchId;try{const l=await f8(t.localStore,e);my(t,s,null),fy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Li(t,l)}catch(l){await Mi(l)}}async function W8(r,e,t){const s=Ie(r);try{const l=await(function(d,f){const g=Ie(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let w;return g.mutationQueue.lookupMutationBatch(x,f).next((b=>(De(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(x,b)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,w))).next((()=>g.localDocuments.getDocuments(x,w)))}))})(s.localStore,e);my(s,e,t),fy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Li(s,l)}catch(l){await Mi(l)}}function fy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function my(r,e,t){const s=Ie(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function mc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||o5(r,s)}))}function o5(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(hc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),gy(r))}function ox(r,e,t){for(const s of t)s instanceof s5?(r.Ru.addReference(s.key,e),Z8(r,s)):s instanceof r5?(pe(jc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||o5(r,s.key)):Se(19791,{wu:s})}function Z8(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(pe(jc,"New document in limbo: "+t),r.Eu.add(s),gy(r))}function gy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new _e(yt.fromString(e)),s=r.fu.next();r.Au.set(s,new F8(t)),r.du=r.du.insert(t,s),Um(r.remoteStore,new xa(Ss(Ad(t.path)),s,"TargetPurposeLimboResolution",os.ce))}}async function Li(r,e,t){const s=Ie(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var w;if((x||t)&&s.isPrimaryClient){const b=x?!x.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){l.push(x);const b=ty.As(g.targetId,x);c.push(b)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const w=Ie(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>q.forEach(x,(N=>q.forEach(N.Es,(C=>w.persistence.referenceDelegate.addReference(b,N.targetId,C))).next((()=>q.forEach(N.ds,(C=>w.persistence.referenceDelegate.removeReference(b,N.targetId,C)))))))))}catch(b){if(!Vi(b))throw b;pe(ny,"Failed to update sequence numbers: "+b)}for(const b of x){const N=b.targetId;if(!b.fromCache){const C=w.Ms.get(N),Y=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(Y);w.Ms=w.Ms.insert(N,V)}}})(s.localStore,c))}async function e9(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){pe(jc,"User change. New user:",e.toKey());const s=await Uj(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new be(re.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Li(t,s.Ls)}}function t9(r,e){const t=Ie(r),s=t.Au.get(e);if(s&&s.hu)return et().add(s.key);{let l=et();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function n9(r,e){const t=Ie(r),s=await lm(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&ox(t,e.targetId,l.au),l}async function s9(r,e){const t=Ie(r);return Fj(t.localStore,e).then((s=>Li(t,s)))}async function r9(r,e,t,s){const l=Ie(r),c=await(function(f,g){const x=Ie(f),w=Ie(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(b=>w.er(b,g).next((N=>N?x.localDocuments.getDocuments(b,N):q.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await _c(l.remoteStore):t==="acknowledged"||t==="rejected"?(my(l,e,s||null),fy(l,e),(function(f,g){Ie(Ie(f).mutationQueue).ir(g)})(l.localStore,e)):Se(6720,"Unknown batchState",{Su:t}),await Li(l,c)):pe(jc,"Cannot apply mutation batch with id: "+e)}async function a9(r,e){const t=Ie(r);if(qm(t),py(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await u_(t,s.toArray());t.gu=!0,await ix(t.remoteStore,!0);for(const c of l)Um(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(mc(t,d),dc(t.localStore,d,!0)))),hc(t.remoteStore,d)})),await l,await u_(t,s),(function(d){const f=Ie(d);f.Au.forEach(((g,x)=>{hc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Vt(_e.comparator)})(t),t.gu=!1,await ix(t.remoteStore,!1)}}async function u_(r,e,t){const s=Ie(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await im(s.localStore,Ss(g[0]));for(const x of g){const w=s.Tu.get(x),b=await n9(s,w);b.snapshot&&c.push(b.snapshot)}}else{const x=await qj(s.localStore,d);f=await im(s.localStore,x),await hy(s,c5(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function c5(r){return G4(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function i9(r){return(function(t){return Ie(Ie(t).persistence).Ts()})(Ie(r).localStore)}async function l9(r,e,t,s){const l=Ie(r);if(l.gu)return void pe(jc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await Fj(l.localStore,Q4(c[0])),f=Rd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rn.EMPTY_BYTE_STRING);await Li(l,d,f);break}case"rejected":await dc(l.localStore,e,!0),mc(l,e,s);break;default:Se(64155,t)}}async function o9(r,e,t){const s=qm(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){pe(jc,"Adding an already active target "+l);continue}const c=await qj(s.localStore,l),d=await im(s.localStore,c);await hy(s,c5(c),d.targetId,!1,d.resumeToken),Um(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await dc(s.localStore,l,!1).then((()=>{hc(s.remoteStore,l),mc(s,l)})).catch(Mi)}}function qm(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=l5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y8.bind(null,e),e.Pu.H_=U8.bind(null,e.eventManager),e.Pu.yu=B8.bind(null,e.eventManager),e}function py(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W8.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zj(this.persistence,new Lj,e.initialUser,this.serializer)}Cu(e){return new Zx(Pm.mi,this.serializer)}Du(e){return new Qj}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class c9 extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){De(this.persistence.referenceDelegate instanceof am,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kj(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new Zx((s=>am.mi(s,t)),this.serializer)}}class u5 extends gd{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await py(this.xu.syncEngine),await _c(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return zj(this.persistence,new Lj,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new kj(s,e.asyncQueue,t)}Mu(e,t){const s=new _R(t,this.persistence);return new wR(e.asyncQueue,s)}Cu(e){const t=Pj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new ey(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Xj(),Df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Qj}}class u9 extends u5{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof up&&(this.sharedClientState.syncEngine={Co:r9.bind(null,t),vo:l9.bind(null,t),Fo:o9.bind(null,t),Ts:i9.bind(null,t),Do:s9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await a9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Xj();if(!up.v(t))throw new be(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Pj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class pd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>c_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),await ix(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new z8})()}createDatastore(e){const t=Lm(e.databaseInfo.databaseId),s=(function(c){return new w8(c)})(e.databaseInfo);return(function(c,d,f,g){return new E8(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new S8(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>c_(this.syncEngine,t,0)),(function(){return s_.v()?new s_:new x8})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,w){const b=new H8(l,c,d,f,g,x);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=Ie(l);pe(Ml,"RemoteStore shutting down."),c.Ea.add(5),await Dd(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}pd.provider={build:()=>new pd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="FirestoreClient";class d9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Bn.UNAUTHENTICATED,this.clientId=Rx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{pe(ki,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(pe(ki,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Bm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function hp(r,e){r.asyncQueue.verifyOperationInProgress(),pe(ki,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await Uj(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function d_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await d5(r);pe(ki,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>a_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>a_(e.remoteStore,l))),r._onlineComponents=e}async function d5(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(ki,"Using user provided OfflineComponentProvider");try{await hp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===re.FAILED_PRECONDITION||l.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;rd("Error using user provided cache. Falling back to memory cache: "+t),await hp(r,new gd)}}else pe(ki,"Using default OfflineComponentProvider"),await hp(r,new c9(void 0));return r._offlineComponents}async function h5(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(ki,"Using user provided OnlineComponentProvider"),await d_(r,r._uninitializedComponentsProvider._online)):(pe(ki,"Using default OnlineComponentProvider"),await d_(r,new pd))),r._onlineComponents}function h9(r){return d5(r).then((e=>e.localStore))}function f9(r){return h5(r).then((e=>e.syncEngine))}async function dm(r){const e=await h5(r),t=e.eventManager;return t.onListen=G8.bind(null,e.syncEngine),t.onUnlisten=K8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q8.bind(null,e.syncEngine),t}function m9(r,e,t={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new xy({next:N=>{w.Nu(),d.enqueueAndForget((()=>cy(c,b)));const C=N.docs.has(f);!C&&N.fromCache?x.reject(new be(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&N.fromCache&&g&&g.source==="server"?x.reject(new be(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),b=new dy(Ad(f.path),w,{includeMetadataChanges:!0,qa:!0});return oy(c,b)})(await dm(r),r.asyncQueue,e,t,s))),s.promise}function g9(r,e){const t=new fr;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await lm(l,c,!0),g=new a5(c,f.Qs),x=g.ru(f.documents),w=g.applyChanges(x,!1);d.resolve(w.snapshot)}catch(f){const g=Bm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await h9(r),e,t))),t.promise}function f5(r,e,t={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new xy({next:N=>{w.Nu(),d.enqueueAndForget((()=>cy(c,b))),N.fromCache&&g.source==="server"?x.reject(new be(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),b=new dy(f,w,{includeMetadataChanges:!0,qa:!0});return oy(c,b)})(await dm(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="firestore.googleapis.com",f_=!0;class m_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p9,this.ssl=f_}else this.host=e.host,this.ssl=e.ssl??f_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rj)throw new be(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m5(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yy{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new oR;switch(s.type){case"firstParty":return new dR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=h_.get(t);s&&(pe("ComponentProvider","Removing Datastore"),h_.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class Wt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ed(t,Wt._jsonSchema))return new Wt(e,s||null,new _e(yt.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:pn("string",Wt._jsonSchemaVersion),referencePath:pn("string")};class Ei extends yr{constructor(e,t,s){super(e,t,Ad(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new _e(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function bt(r,e,...t){if(r=Gt(r),u4("collection","path",e),r instanceof yy){const s=yt.fromString(e,...t);return r2(s),new Ei(r,null,s)}{if(!(r instanceof Wt||r instanceof Ei))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yt.fromString(e,...t));return r2(s),new Ei(r.firestore,null,s)}}function An(r,e,...t){if(r=Gt(r),arguments.length===1&&(e=Rx.newId()),u4("doc","path",e),r instanceof yy){const s=yt.fromString(e,...t);return s2(s),new Wt(r,null,new _e(s))}{if(!(r instanceof Wt||r instanceof Ei))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yt.fromString(e,...t));return s2(s),new Wt(r.firestore,r instanceof Ei?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yj(this,"async_queue_retry"),this._c=()=>{const s=Df();s&&pe(g_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vi(e))throw e;pe(g_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",x_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=ly.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Se(47125,{Pc:x_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function x_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Qs extends yy{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new p_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function x9(r,e,t){t||(t=Yf);const s=zl(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(Ai(c,e))return l;throw new be(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new be(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rj)throw new be(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&pc(e.host)&&cN(e.host),s.initialize({options:e,instanceIdentifier:t})}function Bl(r){if(r._terminated)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||y9(r),r._firestoreClient}function y9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,w){return new YR(f,g,x,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,m5(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new d9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(rn.fromBase64String(e))}catch(t){throw new be(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $s(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ed(e,$s._jsonSchema))return $s.fromBase64String(e.bytes)}}$s._jsonSchemaVersion="firestore/bytes/1.0",$s._jsonSchema={type:pn("string",$s._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(Ed(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:pn("string",$r._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ed(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new be(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:pn("string",Kr._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=/^__.*__$/;class v9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,t,this.fieldTransforms):new wc(e,this.data,t,this.fieldTransforms)}}class g5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ca(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p5(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class by{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new by({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p5(this.Ac)&&b9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class w9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Lm(e)}Cc(e,t,s,l=!1){return new by({Ac:e,methodName:t,Dc:s,path:$t.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vd(r){const e=r._freezeSettings(),t=Lm(r._databaseId);return new w9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function vy(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);Ny("Data must be an object, but it was:",d,s);const f=b5(s,d);let g,x;if(c.merge)g=new cs(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const N=cx(e,b,t);if(!d.contains(N))throw new be(re.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);w5(w,N)||w.push(N)}g=new cs(w),x=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,x=d.fieldTransforms;return new v9(new Fn(f),g,x)}class Fm extends Md{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fm}}class wy extends Md{_toFieldTransform(e){return new Hx(e.path,new ic)}isEqual(e){return e instanceof wy}}class _y extends Md{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new cc(e.serializer,ej(e.serializer,this.Fc));return new Hx(e.path,t)}isEqual(e){return e instanceof _y&&this.Fc===e.Fc}}function x5(r,e,t,s){const l=r.Cc(1,e,t);Ny("Data must be an object, but it was:",l,s);const c=[],d=Fn.empty();Pi(s,((g,x)=>{const w=jy(e,g,t);x=Gt(x);const b=l.yc(w);if(x instanceof Fm)c.push(w);else{const N=Pd(x,b);N!=null&&(c.push(w),d.set(w,N))}}));const f=new cs(c);return new g5(d,f,l.fieldTransforms)}function y5(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[cx(e,s,t)],g=[l];if(c.length%2!=0)throw new be(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(cx(e,c[N])),g.push(c[N+1]);const x=[],w=Fn.empty();for(let N=f.length-1;N>=0;--N)if(!w5(x,f[N])){const C=f[N];let Y=g[N];Y=Gt(Y);const V=d.yc(C);if(Y instanceof Fm)x.push(C);else{const F=Pd(Y,V);F!=null&&(x.push(C),w.set(C,F))}}const b=new cs(x);return new g5(w,b,d.fieldTransforms)}function _9(r,e,t,s=!1){return Pd(t,r.Cc(s?4:3,e))}function Pd(r,e){if(v5(r=Gt(r)))return Ny("Unsupported field value:",e,r),b5(r,e);if(r instanceof Md)return(function(s,l){if(!p5(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=Pd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Gt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ej(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=jt.fromDate(s);return{timestampValue:uc(l.serializer,c)}}if(s instanceof jt){const c=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:uc(l.serializer,c)}}if(s instanceof $r)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof $s)return{bytesValue:dj(l.serializer,s._byteString)};if(s instanceof Wt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Kr)return(function(d,f){return{mapValue:{fields:{[zx]:{stringValue:Ux},[nc]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Fx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${jm(s)}`)})(r,e)}function b5(r,e){const t={};return A4(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(r,((s,l)=>{const c=Pd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function v5(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof jt||r instanceof $r||r instanceof $s||r instanceof Wt||r instanceof Md||r instanceof Kr)}function Ny(r,e,t){if(!v5(t)||!d4(t)){const s=jm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function cx(r,e,t){if((e=Gt(e))instanceof Od)return e._internalPath;if(typeof e=="string")return jy(r,e);throw hm("Field path arguments must be of type string or ",r,!1,void 0,t)}const N9=new RegExp("[~\\*/\\[\\]]");function jy(r,e,t){if(e.search(N9)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hm(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new be(re.INVALID_ARGUMENT,f+r+g)}function w5(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class j9 extends _5{data(){return super.data()}}function Hm(r,e){return typeof e=="string"?jy(r,e):e instanceof Od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ey{}class Ty extends Ey{}function xn(r,e,...t){let s=[];e instanceof Ey&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof Sy)).length,f=c.filter((g=>g instanceof Gm)).length;if(d>1||d>0&&f>0)throw new be(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Gm extends Ty{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gm(e,t,s)}_apply(e){const t=this._parse(e);return j5(e._query,t),new yr(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=Vd(e.firestore);return(function(c,d,f,g,x,w,b){let N;if(x.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new be(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){v_(b,w);const Y=[];for(const V of b)Y.push(b_(g,c,V));N={arrayValue:{values:Y}}}else N=b_(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||v_(b,w),N=_9(f,d,b,w==="in"||w==="not-in");return lt.create(x,w,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Mt(r,e,t){const s=e,l=Hm("where",r);return Gm._create(l,s,t)}class Sy extends Ey{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)j5(d,g),d=Yp(d,g)})(e._query,t),new yr(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ay extends Ty{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ay(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new be(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new md(c,d)})(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new vc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function Ec(r,e="asc"){const t=e,s=Hm("orderBy",r);return Ay._create(s,t)}class Iy extends Ty{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Iy(e,t,s)}_apply(e){return new yr(e.firestore,e.converter,Zf(e._query,this._limit,this._limitType))}}function Di(r){return yR("limit",r),Iy._create("limit",r,"F")}function b_(r,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new be(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$4(e)&&t.indexOf("/")!==-1)throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(yt.fromString(t));if(!_e.isDocumentKey(s))throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hd(r,new _e(s))}if(t instanceof Wt)return hd(r,t._key);throw new be(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(t)}.`)}function v_(r,e){if(!Array.isArray(r)||r.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j5(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class E9{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Pi(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[nc].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Ht(d.doubleValue)));return new Kr(t)}convertGeoPoint(e){return new $r(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Cm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const t=Ea(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yt.fromString(e);De(wj(s),9688,{name:e});const l=new Cl(s.get(1),s.get(3)),c=new _e(s.popFirst(5));return l.isEqual(t)||sn(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jl extends _5{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Hm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=jl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}jl._jsonSchemaVersion="firestore/documentSnapshot/1.0",jl._jsonSchema={type:pn("string",jl._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class Of extends jl{data(e={}){return super.data(e)}}class va{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Pu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Of(this._firestore,this._userDataWriter,s.key,s,new Pu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new Of(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Pu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new Of(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Pu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,w=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),w=d.indexOf(f.doc.key)),{type:T9(f.type),doc:g,oldIndex:x,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function T9(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(r){r=Sn(r,Wt);const e=Sn(r.firestore,Qs);return m9(Bl(e),r._key).then((t=>S5(e,r,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:pn("string",va._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};class Ld extends E9{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function In(r){r=Sn(r,yr);const e=Sn(r.firestore,Qs),t=Bl(e),s=new Ld(e);return N5(r._query),f5(t,r._query).then((l=>new va(e,s,r,l)))}function T5(r){r=Sn(r,yr);const e=Sn(r.firestore,Qs),t=Bl(e),s=new Ld(e);return g9(t,r._query).then((l=>new va(e,s,r,l)))}function fm(r){r=Sn(r,yr);const e=Sn(r.firestore,Qs),t=Bl(e),s=new Ld(e);return f5(t,r._query,{source:"server"}).then((l=>new va(e,s,r,l)))}function Ry(r,e,t){r=Sn(r,Wt);const s=Sn(r.firestore,Qs),l=Cy(r.converter,e,t);return Ud(s,[vy(Vd(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,wn.none())])}function zd(r,e,t,...s){r=Sn(r,Wt);const l=Sn(r.firestore,Qs),c=Vd(l);let d;return d=typeof(e=Gt(e))=="string"||e instanceof Od?y5(c,"updateDoc",r._key,e,t,s):x5(c,"updateDoc",r._key,e),Ud(l,[d.toMutation(r._key,wn.exists(!0))])}function $m(r){return Ud(Sn(r.firestore,Qs),[new Cd(r._key,wn.none())])}function pr(r,e){const t=Sn(r.firestore,Qs),s=An(r),l=Cy(r.converter,e);return Ud(t,[vy(Vd(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,wn.exists(!1))]).then((()=>s))}function w_(r,...e){var g,x,w;r=Gt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||y_(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(y_(e[s])){const b=e[s];e[s]=(g=b.next)==null?void 0:g.bind(b),e[s+1]=(x=b.error)==null?void 0:x.bind(b),e[s+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,d,f;if(r instanceof Wt)d=Sn(r.firestore,Qs),f=Ad(r._key.path),c={next:b=>{e[s]&&e[s](S5(d,r,b))},error:e[s+1],complete:e[s+2]};else{const b=Sn(r,yr);d=Sn(b.firestore,Qs),f=b._query;const N=new Ld(d);c={next:C=>{e[s]&&e[s](new va(d,N,b,C))},error:e[s+1],complete:e[s+2]},N5(r._query)}return(function(N,C,Y,V){const F=new xy(V),U=new dy(C,F,Y);return N.asyncQueue.enqueueAndForget((async()=>oy(await dm(N),U))),()=>{F.Nu(),N.asyncQueue.enqueueAndForget((async()=>cy(await dm(N),U)))}})(Bl(d),f,l,c)}function Ud(r,e){return(function(s,l){const c=new fr;return s.asyncQueue.enqueueAndForget((async()=>X8(await f9(s),l,c))),c.promise})(Bl(r),e)}function S5(r,e,t){const s=t.docs.get(e._key),l=new Ld(r);return new jl(r,l,e._key,s,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}class S9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=R9(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function A9(r){return new S9(r)}class I9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pd.provider,this._offlineComponentProvider={build:t=>new u5(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class C9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pd.provider,this._offlineComponentProvider={build:t=>new u9(t,e==null?void 0:e.cacheSizeBytes)}}}function R9(r){return new I9(r==null?void 0:r.forceOwnership)}function k9(){return new C9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vd(e)}set(e,t,s){this._verifyNotCommitted();const l=fp(e,this._firestore),c=Cy(l.converter,t,s),d=vy(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,wn.none())),this}update(e,t,s,...l){this._verifyNotCommitted();const c=fp(e,this._firestore);let d;return d=typeof(t=Gt(t))=="string"||t instanceof Od?y5(this._dataReader,"WriteBatch.update",c._key,t,s,l):x5(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fp(e,this._firestore);return this._mutations=this._mutations.concat(new Cd(t._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fp(r,e){if((r=Gt(r)).firestore!==e)throw new be(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function As(){return new wy("serverTimestamp")}function ux(r){return new _y("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(r){return Bl(r=Sn(r,Qs)),new D9(r,(e=>Ud(r,e)))}(function(e,t=!0){(function(l){bc=l})(xc),Xr(new mr("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new Qs(new cR(s.getProvider("auth-internal")),new hR(d,s.getProvider("app-check-internal")),(function(x,w){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new be(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(x.options.projectId,w)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ks(Zw,e2,e),Ks(Zw,e2,"esm2020")})();const A5="@firebase/installations",ky="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=1e4,C5=`w:${ky}`,R5="FIS_v2",M9="https://firebaseinstallations.googleapis.com/v1",V9=3600*1e3,P9="installations",L9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vl=new Ll(P9,L9,z9);function k5(r){return r instanceof xr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5({projectId:r}){return`${M9}/projects/${r}/installations`}function O5(r){return{token:r.token,requestStatus:2,expiresIn:B9(r.expiresIn),creationTime:Date.now()}}async function M5(r,e){const s=(await e.json()).error;return Vl.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function V5({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function U9(r,{refreshToken:e}){const t=V5(r);return t.append("Authorization",q9(e)),t}async function P5(r){const e=await r();return e.status>=500&&e.status<600?r():e}function B9(r){return Number(r.replace("s","000"))}function q9(r){return`${R5} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=D5(r),l=V5(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:R5,appId:r.appId,sdkVersion:C5},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await P5(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:O5(x.authToken)}}else throw await M5("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=/^[cdef][\w-]{21}$/,dx="";function $9(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=K9(r);return G9.test(t)?t:dx}catch{return dx}}function K9(r){return H9(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=new Map;function U5(r,e){const t=Km(r);B5(t,e),Q9(t,e)}function B5(r,e){const t=z5.get(r);if(t)for(const s of t)s(e)}function Q9(r,e){const t=X9();t&&t.postMessage({key:r,fid:e}),Y9()}let bl=null;function X9(){return!bl&&"BroadcastChannel"in self&&(bl=new BroadcastChannel("[Firebase] FID Change"),bl.onmessage=r=>{B5(r.data.key,r.data.fid)}),bl}function Y9(){z5.size===0&&bl&&(bl.close(),bl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="firebase-installations-database",W9=1,Pl="firebase-installations-store";let mp=null;function Dy(){return mp||(mp=xN(J9,W9,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Pl)}}})),mp}async function mm(r,e){const t=Km(r),l=(await Dy()).transaction(Pl,"readwrite"),c=l.objectStore(Pl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&U5(r,e.fid),e}async function q5(r){const e=Km(r),s=(await Dy()).transaction(Pl,"readwrite");await s.objectStore(Pl).delete(e),await s.done}async function Qm(r,e){const t=Km(r),l=(await Dy()).transaction(Pl,"readwrite"),c=l.objectStore(Pl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&U5(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(r){let e;const t=await Qm(r.appConfig,s=>{const l=Z9(s),c=eD(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===dx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Z9(r){const e=r||{fid:$9(),registrationStatus:0};return F5(e)}function eD(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Vl.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=tD(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nD(r)}:{installationEntry:e}}async function tD(r,e){try{const t=await F9(r,e);return mm(r.appConfig,t)}catch(t){throw k5(t)&&t.customData.serverCode===409?await q5(r.appConfig):await mm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function nD(r){let e=await __(r.appConfig);for(;e.registrationStatus===1;)await L5(100),e=await __(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Oy(r);return s||t}return e}function __(r){return Qm(r,e=>{if(!e)throw Vl.create("installation-not-found");return F5(e)})}function F5(r){return sD(r)?{fid:r.fid,registrationStatus:0}:r}function sD(r){return r.registrationStatus===1&&r.registrationTime+I5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD({appConfig:r,heartbeatServiceProvider:e},t){const s=aD(r,t),l=U9(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:C5,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await P5(()=>fetch(s,f));if(g.ok){const x=await g.json();return O5(x)}else throw await M5("Generate Auth Token",g)}function aD(r,{fid:e}){return`${D5(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function My(r,e=!1){let t;const s=await Qm(r.appConfig,c=>{if(!H5(c))throw Vl.create("not-registered");const d=c.authToken;if(!e&&oD(d))return c;if(d.requestStatus===1)return t=iD(r,e),c;{if(!navigator.onLine)throw Vl.create("app-offline");const f=uD(c);return t=lD(r,f),f}});return t?await t:s.authToken}async function iD(r,e){let t=await N_(r.appConfig);for(;t.authToken.requestStatus===1;)await L5(100),t=await N_(r.appConfig);const s=t.authToken;return s.requestStatus===0?My(r,e):s}function N_(r){return Qm(r,e=>{if(!H5(e))throw Vl.create("not-registered");const t=e.authToken;return dD(t)?{...e,authToken:{requestStatus:0}}:e})}async function lD(r,e){try{const t=await rD(r,e),s={...e,authToken:t};return await mm(r.appConfig,s),t}catch(t){if(k5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await q5(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await mm(r.appConfig,s)}throw t}}function H5(r){return r!==void 0&&r.registrationStatus===2}function oD(r){return r.requestStatus===2&&!cD(r)}function cD(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+V9}function uD(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function dD(r){return r.requestStatus===1&&r.requestTime+I5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(r){const e=r,{installationEntry:t,registrationPromise:s}=await Oy(e);return s?s.catch(console.error):My(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(r,e=!1){const t=r;return await mD(t),(await My(t,e)).token}async function mD(r){const{registrationPromise:e}=await Oy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(r){if(!r||!r.options)throw gp("App Configuration");if(!r.name)throw gp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw gp(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function gp(r){return Vl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="installations",pD="installations-internal",xD=r=>{const e=r.getProvider("app").getImmediate(),t=gD(e),s=zl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},yD=r=>{const e=r.getProvider("app").getImmediate(),t=zl(e,G5).getImmediate();return{getId:()=>hD(t),getToken:l=>fD(t,l)}};function bD(){Xr(new mr(G5,xD,"PUBLIC")),Xr(new mr(pD,yD,"PRIVATE"))}bD();Ks(A5,ky);Ks(A5,ky,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="analytics",vD="firebase_id",wD="origin",_D=60*1e3,ND="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new vm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Is=new Ll("analytics","Analytics",jD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(r){if(!r.startsWith(Vy)){const e=Is.create("invalid-gtag-resource",{gtagURL:r});return Wn.warn(e.message),""}return r}function $5(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function TD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function SD(r,e){const t=TD("firebase-js-sdk-policy",{createScriptURL:ED}),s=document.createElement("script"),l=`${Vy}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function AD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function ID(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await $5(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){Wn.error(f)}r("config",l,c)}async function CD(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await $5(t);for(const g of d){const x=f.find(b=>b.measurementId===g),w=x&&e[x.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){Wn.error(c)}}function RD(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await CD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await ID(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){Wn.error(f)}}return l}function kD(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=RD(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function DD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Vy)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=30,MD=1e3;class VD{constructor(e={},t=MD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const K5=new VD;function PD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function LD(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:PD(t)},l=ND.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw Is.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function zD(r,e=K5,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw Is.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw Is.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new qD;return setTimeout(async()=>{f.abort()},_D),Q5({appId:s,apiKey:l,measurementId:c},d,f,e)}async function Q5(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=K5){var f;const{appId:c,measurementId:d}=r;try{await UD(s,e)}catch(g){if(d)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await LD(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!BD(x)){if(l.deleteThrottleMetadata(c),d)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const w=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?jw(t,l.intervalMillis,OD):jw(t,l.intervalMillis),b={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return l.setThrottleMetadata(c,b),Wn.debug(`Calling attemptFetch again in ${w} millis`),Q5(r,b,s,l)}}function UD(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(Is.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function BD(r){if(!(r instanceof xr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class qD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FD(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function HD(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(){if(vx())try{await mN()}catch(r){return Wn.warn(Is.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Wn.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $D(r,e,t,s,l,c,d){const f=zD(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Wn.error(N)),e.push(f);const g=GD().then(N=>{if(N)return s.getId()}),[x,w]=await Promise.all([f,g]);DD(c)||SD(c,x.measurementId),l("js",new Date);const b=(d==null?void 0:d.config)??{};return b[wD]="firebase",b.update=!0,w!=null&&(b[vD]=w),l("config",x.measurementId,b),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.app=e}_delete(){return delete $o[this.app.options.appId],Promise.resolve()}}let $o={},j_=[];const E_={};let pp="dataLayer",QD="gtag",T_,Py,S_=!1;function XD(){const r=[];if(dN()&&r.push("This is a browser extension environment."),_3()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=Is.create("invalid-analytics-context",{errorInfo:e});Wn.warn(t.message)}}function YD(r,e,t){XD();const s=r.options.appId;if(!s)throw Is.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Is.create("no-api-key");if($o[s]!=null)throw Is.create("already-exists",{id:s});if(!S_){AD(pp);const{wrappedGtag:c,gtagCore:d}=kD($o,j_,E_,pp,QD);Py=c,T_=d,S_=!0}return $o[s]=$D(r,j_,E_,e,T_,pp,t),new KD(r)}function JD(r=bN()){r=Gt(r);const e=zl(r,gm);return e.isInitialized()?e.getImmediate():WD(r)}function WD(r,e={}){const t=zl(r,gm);if(t.isInitialized()){const l=t.getImmediate();if(Ai(e,t.getOptions()))return l;throw Is.create("already-initialized")}return t.initialize({options:e})}function ZD(r,e,t){r=Gt(r),HD(Py,$o[r.app.options.appId],e,t).catch(s=>Wn.error(s))}function e7(r,e,t,s){r=Gt(r),FD(Py,$o[r.app.options.appId],e,t,s).catch(l=>Wn.error(l))}const A_="@firebase/analytics",I_="0.10.19";function t7(){Xr(new mr(gm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return YD(s,l,t)},"PUBLIC")),Xr(new mr("analytics-internal",r,"PRIVATE")),Ks(A_,I_),Ks(A_,I_,"esm2020");function r(e){try{const t=e.getProvider(gm).getImmediate();return{logEvent:(s,l,c)=>e7(t,s,l,c),setUserProperties:(s,l)=>ZD(t,s,l)}}catch(t){throw Is.create("interop-component-reg-failed",{reason:t})}}}t7();const n7={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Ly=yN(n7),Xu=aR(Ly),Be=x9(Ly,{localCache:A9({tabManager:k9()})});JD(Ly);const s7=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:i.jsx(s3,{className:"w-10 h-10 text-red-500/80"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[i.jsx(bd,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"relative flex py-2 items-center",children:[i.jsx("div",{className:"flex-grow border-t border-gray-700"}),i.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),i.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[i.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),i.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),i.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:i.jsx(Si,{className:"w-5 h-5"})})]})]})]})]}),i.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},X5=O.createContext(void 0),r7=({children:r})=>{const[e,t]=O.useState(null),[s,l]=O.useState(!0),[c,d]=O.useState(!1),f=b=>{if(!b.isSubscriber||!b.subscriptionExpiry)return!1;const N=Date.now();let C=0;return b.subscriptionExpiry.seconds?C=b.subscriptionExpiry.seconds*1e3:typeof b.subscriptionExpiry=="string"?C=new Date(b.subscriptionExpiry).getTime():b.subscriptionExpiry instanceof Date&&(C=b.subscriptionExpiry.getTime()),N<C},g=(b,N)=>{localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",b),localStorage.setItem("teacherEmail",N),window.location.reload()},x=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):(await Q6(Xu),e!=null&&e.uid&&localStorage.removeItem(`etqan_user_profile_${e.uid}`))}catch(b){console.error("Logout error",b)}},w=async b=>{if(e)try{let N={...b};if(b.firstName!==void 0||b.lastName!==void 0){const Y=b.firstName!==void 0?b.firstName:e.firstName||"",V=b.lastName!==void 0?b.lastName:e.lastName||"";N.displayName=`${Y} ${V}`.trim()}const C=An(Be,"users",e.uid);await Ry(C,N,{merge:!0})}catch(N){throw console.error("Error updating profile:",N),N}};return O.useEffect(()=>{if(!e||!e.isSubscriber)return;const b=setInterval(()=>{f(e)||t(C=>C?{...C,isSubscriber:!1}:null)},6e4);return()=>clearInterval(b)},[e]),O.useEffect(()=>{const b=setTimeout(()=>{s&&d(!0)},1e4);let N=null;const C=localStorage.getItem("isTeacher")==="true";if(C){const V=localStorage.getItem("teacherName")||"",F=localStorage.getItem("teacherEmail")||"teacher@etqan.edu",U=`teacher-${F.split("@")[0]}`;let ae="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";V.includes("")?ae="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":V.includes("")&&(ae="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:U,email:F,displayName:V,role:"teacher",avatar:ae,gender:"male",isSubscriber:!1});const de=An(Be,"users",U);return N=w_(de,W=>{if(W.exists()){const se=W.data(),j=f(se);t(T=>({...T,...se,role:"teacher",isSubscriber:j}))}l(!1)},W=>{console.error("Error syncing teacher profile:",W),l(!1)}),()=>{N&&N(),clearTimeout(b)}}const Y=K6(Xu,async V=>{if(N&&(N(),N=null),V){const F=`etqan_user_profile_${V.uid}`,U=Date.now(),ae=localStorage.getItem(F);if(ae)try{const{data:de,timestamp:W}=JSON.parse(ae),se=f(de);t({...de,isSubscriber:se})}catch(de){console.error("Profile cache parse error",de)}const $=An(Be,"users",V.uid);N=w_($,de=>{if(de.exists()){const W=de.data();(V.email==="q@gmail.com"||V.email==="yazan22@gmail.com")&&(W.totalXP=25e3,W.quizzesCompleted=500);const se=f(W),j={uid:V.uid,email:V.email||"",displayName:W.displayName||`${W.firstName||""} ${W.lastName||""}`.trim()||"Student",firstName:W.firstName,lastName:W.lastName,age:W.age,role:W.role,grade:W.grade,phone:W.phone,address:W.address,school:W.school,gender:W.gender,avatar:W.avatar,profileBackground:W.profileBackground,genderChanged:W.genderChanged,createdAt:W.createdAt?{seconds:W.createdAt.seconds}:null,totalXP:W.totalXP||0,quizzesCompleted:W.quizzesCompleted||0,isSubscriber:se,subscriptionExpiry:W.subscriptionExpiry?{seconds:W.subscriptionExpiry.seconds}:null};t(j),localStorage.setItem(F,JSON.stringify({data:j,timestamp:U}))}else{const W={uid:V.uid,email:V.email||"",displayName:"User",role:"student",createdAt:{seconds:Math.floor(Date.now()/1e3)},isSubscriber:!1};t(W)}l(!1)},de=>{console.error("Error listening to user profile:",de),l(!1)})}else C||t(null),l(!1);clearTimeout(b)});return()=>{Y(),N&&N(),clearTimeout(b)}},[]),c?i.jsx(s7,{}):i.jsx(X5.Provider,{value:{user:e,loading:s,logout:x,setTeacherSession:g,updateUserProfile:w},children:s?i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),i.jsx(ut,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),i.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},Xs=()=>{const r=O.useContext(X5);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},xp=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],a7=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var te;const[s,l]=O.useState(!1),[c,d]=O.useState(!1),{user:f}=Xs(),[g,x]=O.useState(!1),[w,b]=O.useState([]),[N,C]=O.useState(0),[Y,V]=O.useState(!1),F=O.useRef(null),[U,ae]=O.useState(!1),[$,de]=O.useState(""),[W,se]=O.useState("teacher-yazan"),[j,T]=O.useState(!1),[A,R]=O.useState(!1);O.useEffect(()=>{const me=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",me),()=>window.removeEventListener("scroll",me)},[]),O.useEffect(()=>{const me=Ne=>{F.current&&!F.current.contains(Ne.target)&&x(!1)};return document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[]);const D=async(me=!1)=>{if(!f){b([]);return}const Ne=`etqan_notifications_${f.uid}`,I=365*24*60*60*1e3,Z=Date.now();if(!me){const P=localStorage.getItem(Ne);if(P)try{const{data:Q,timestamp:ye}=JSON.parse(P);if(Z-ye<I){L(Q);return}}catch(Q){console.error(Q)}}V(!0);try{const Q=xn(bt(Be,"notifications"),Ec("createdAt","desc"),Di(10)),Ee=(await In(Q)).docs.map(ue=>({id:ue.id,...ue.data(),createdAt:ue.data().createdAt?{seconds:ue.data().createdAt.seconds}:null}));localStorage.setItem(Ne,JSON.stringify({data:Ee,timestamp:Z})),L(Ee)}catch(P){console.error("Error fetching notifications:",P)}finally{V(!1)}},L=me=>{const Ne=[];let I=0,Z=[];try{const Q=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`);Z=Q?JSON.parse(Q):[]}catch(Q){console.error("Error parsing viewed notifications",Q)}let P=0;f!=null&&f.createdAt&&(f.createdAt.seconds?P=f.createdAt.seconds*1e3:f.createdAt instanceof Date?P=f.createdAt.getTime():typeof f.createdAt=="string"&&(P=new Date(f.createdAt).getTime())),me.forEach(Q=>{const ye=Q.createdAt?Q.createdAt.seconds?Q.createdAt.seconds*1e3:new Date(Q.createdAt).getTime():Date.now(),Ee=Q.recipientId===(f==null?void 0:f.uid),ue=Q.recipientId==="all",qe=P===0||ye>=P;if(Ee||ue&&qe){const ze=Z.includes(Q.id),ft=Q.read===!0,Te=ze||ft;Te||I++,Ne.push({...Q,read:Te})}}),b(Ne),C(I)};O.useEffect(()=>{D()},[f]);const k=async()=>{const me=!g;if(x(me),me&&N>0){const Ne=[...w],I=Ne.filter(ye=>!ye.read),Z=I.map(ye=>ye.id);if(Z.length===0)return;try{const ye=localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`),Ee=ye?JSON.parse(ye):[],ue=new Set([...Ee,...Z]);localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(Array.from(ue)));const qe=`etqan_notifications_${f==null?void 0:f.uid}`,ze=localStorage.getItem(qe);if(ze){const ft=JSON.parse(ze);localStorage.setItem(qe,JSON.stringify(ft))}}catch(ye){console.error("Error updating local storage for notifications",ye)}const P=Ne.map(ye=>({...ye,read:!0}));b(P),C(0);const Q=I.filter(ye=>ye.recipientId!=="all");if(Q.length>0)try{const ye=O9(Be);Q.forEach(Ee=>{const ue=An(Be,"notifications",Ee.id);ye.update(ue,{read:!0})}),await ye.commit()}catch(ye){console.error("Error batch updating notifications:",ye)}}},ge=async()=>{if($.trim()){T(!0);try{const me=xp.find(Ne=>Ne.id===W);await pr(bt(Be,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:$,teacherId:W,teacherName:me==null?void 0:me.name,createdAt:As(),read:!1}),await pr(bt(Be,"notifications"),{recipientId:W,title:`   ${(f==null?void 0:f.displayName)||""}`,message:$.substring(0,100)+($.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:As(),read:!1}),alert("    !"),de(""),ae(!1),R(!1)}catch(me){console.error(me),alert("   ")}finally{T(!1)}}},ke=me=>{switch(me){case"quiz":return i.jsx(Pn,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(Gn,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(El,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(Br,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(cf,{className:"w-4 h-4 text-gray-400"})}},G=me=>{if(!me)return"";const Ne=me.toDate?me.toDate():new Date(me.seconds*1e3);return isNaN(Ne.getTime())?"":Ne.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},ce=me=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:ce(),children:[i.jsx(Zu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:ce(),children:[i.jsx(Pn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:ce(),children:[i.jsx(Gn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:ce(),children:[i.jsx(Yu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:ce(),children:[i.jsx(Si,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:F,children:[i.jsxs("button",{onClick:k,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(cf,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(cf,{className:"w-4 h-4 text-emerald-400"}),""]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:me=>{me.stopPropagation(),D(!0)},className:"p-1.5 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white transition-colors",title:"",children:i.jsx(bd,{className:`w-3.5 h-3.5 ${Y?"animate-spin text-emerald-500":""}`})}),f.role==="student"&&i.jsx("button",{onClick:()=>{x(!1),ae(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-2 py-1 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30",children:i.jsx(Br,{className:"w-3 h-3"})})]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:Y&&w.length===0?i.jsx("div",{className:"p-8 text-center flex justify-center",children:i.jsx(ut,{className:"w-6 h-6 animate-spin text-emerald-500"})}):w.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(cf,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "}),i.jsx("button",{onClick:()=>D(!0),className:"mt-2 text-xs text-blue-400 underline",children:""})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:w.map(me=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${me.read?"":"bg-emerald-900/10"}`,children:[!me.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:ke(me.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${me.read?"text-gray-400":"text-white"}`,children:me.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:me.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:G(me.createdAt)})]})]})]},me.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(ed,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(Tp,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(Hn,{className:"w-6 h-6"}):i.jsx(cA,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(fS,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Zu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Xo,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Pn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Gn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Yu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Si,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Q_,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(ed,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(Tp,{className:"w-5 h-5"}),"  "]})})]})})]}),U&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{ae(!1),R(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{ae(!1),R(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(Hn,{className:"w-5 h-5"})}),A?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(dr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(te=xp.find(me=>me.id===W))==null?void 0:te.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ge,disabled:j,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:j?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>R(!1),disabled:j,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Br,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:xp.map(me=>i.jsxs("div",{onClick:()=>se(me.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${W===me.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${W===me.id?"text-emerald-400":"text-gray-300"}`,children:me.name}),W===me.id&&i.jsx(wa,{className:"w-4 h-4 text-emerald-500"})]},me.id))})]}),i.jsx("textarea",{value:$,onChange:me=>de(me.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{$.trim()&&R(!0)},disabled:!$.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(ya,{className:"w-5 h-5"})," "]})]})]})]})]})},i7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),l7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),o7=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=Xs(),[l,c]=O.useState(!1),[d,f]=O.useState(!1),[g,x]=O.useState(!1),w=window.location.origin,b="   -   ",N=()=>{c(!0),setTimeout(()=>c(!1),3e3)},C=()=>{s?t("QUIZZES"):N()},Y=()=>{s?t("LESSONS"):N()},V=()=>{t("LESSONS_EXPLANATIONS")},F=()=>{t("SERVICES")},U=()=>{t("CONTACT_TEACHER")},ae=()=>{const j=`https://t.me/share/url?url=${encodeURIComponent(w)}&text=${encodeURIComponent(b)}`;window.open(j,"_blank"),f(!1)},$=()=>{const j=`https://wa.me/?text=${encodeURIComponent(b+" "+w)}`;window.open(j,"_blank"),f(!1)},de=()=>{const j=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(w)}`;window.open(j,"_blank"),f(!1)},W=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:b,url:w}),f(!1)}catch(j){console.log("Error sharing",j)}else se()},se=()=>{navigator.clipboard.writeText(w),x(!0),setTimeout(()=>x(!1),2e3)};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(Mf,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(Hn,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:C,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Pn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:V,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Yu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:Y,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Gn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:F,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(B_,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:""})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:U,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Si,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(Yn,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Tp,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(zr,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})}),i.jsx("div",{className:"relative mt-2 flex justify-center z-50",children:i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-xs font-bold bg-white/5 px-4 py-2 rounded-full border border-white/10 hover:bg-white/10 hover:border-emerald-500/30 group",children:[i.jsx("div",{className:"p-1.5 bg-emerald-500/10 rounded-full group-hover:bg-emerald-500/20 transition-colors",children:i.jsx(Pf,{className:"w-3.5 h-3.5 text-emerald-400 group-hover:text-emerald-300"})}),i.jsx("span",{children:"   "})]})}),d&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>f(!1),children:i.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 w-full max-w-sm flex flex-col gap-5 animate-fade-in-up relative",onClick:j=>j.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Pf,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Hn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:$,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(i7,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:ae,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(l7,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:de,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx(Ko,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:W,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(K_,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(X_,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:w}),i.jsxs("button",{onClick:se,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${g?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[g?i.jsx(F_,{className:"w-3.5 h-3.5"}):i.jsx(gx,{className:"w-3.5 h-3.5"}),g?" ":" "]})]})]})})]})]})]})},yp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),bp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),c7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),ul=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],u7=({onNavigate:r})=>{const[e,t]=O.useState(0),[s,l]=O.useState(!0);O.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%ul.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(yp,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(c7,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(bp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(Tl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(Sp,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(Ko,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(yp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(bp,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(Sp,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(Ko,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(yp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(bp,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(xd,{className:"w-6 h-6"}),"  ",i.jsx(fx,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("div",{className:"block md:hidden space-y-4",children:[f(ul[e]),f(ul[(e+1)%ul.length])]}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%ul.length;return i.jsx("div",{children:f(ul[x])},ul[x].id)})})]})]})]})})},C_=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=O.useState(!1),f=O.useRef(null);O.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ti,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},w);const b=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,b&&i.jsx(wa,{className:"w-3 h-3"})]},w)})})]})},d7=({isOpen:r,onClose:e})=>{const[t,s]=O.useState("ROLE_SELECTION"),[l,c]=O.useState(!1),[d,f]=O.useState(null),[g,x]=O.useState(null),{setTeacherSession:w}=Xs(),[b,N]=O.useState(""),[C,Y]=O.useState(""),[V,F]=O.useState(""),[U,ae]=O.useState(""),[$,de]=O.useState(""),[W,se]=O.useState(""),[j,T]=O.useState(""),[A,R]=O.useState(""),[D,L]=O.useState(""),[k,ge]=O.useState("male"),[ke,G]=O.useState(""),[ce,te]=O.useState("");if(!r)return null;const me=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),Y(""),F(""),ae(""),de(""),se(""),T(""),R(""),L(""),ge("male"),te(""),G(""),c(!1)},Ne=()=>{me(),e()},I=Te=>{Te.preventDefault(),f(null),c(!0),setTimeout(()=>{b==="2001"?(w(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>Ne(),1500)):b==="2003"?(w(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>Ne(),1500)):(f("   "),c(!1))},800)},Z=async Te=>{Te.preventDefault(),f(null),c(!0);try{await H6(Xu,C.trim(),V),x("   !"),setTimeout(()=>{Ne(),window.location.reload()},1500)}catch(He){console.error(He),f("      "),c(!1)}},P=async Te=>{Te.preventDefault(),f(null),c(!0);try{const Xe=(await F6(Xu,A.trim(),D)).user,yn="",ds=j==="university"&&ke?ke:"";await Ry(An(Be,"users",Xe.uid),{firstName:U,lastName:$,age:W,grade:j,gender:k,school:ds,avatar:yn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{Ne(),window.location.reload()},1500)}catch(He){console.error(He),He.code==="auth/email-already-in-use"?f("   "):He.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},Q=async Te=>{Te.preventDefault(),f(null),c(!0);try{await q6(Xu,ce.trim()),x("   !")}catch(He){console.error(He),He.code==="auth/user-not-found"?f("    "):He.code==="auth/invalid-email"?f("    "):He.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},ye=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ee=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(Yn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Yg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(Qr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Yg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),ue=()=>i.jsxs("form",{onSubmit:I,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ur,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:b,onChange:Te=>N(Te.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),qe=()=>i.jsxs("form",{onSubmit:Z,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:C,onChange:Te=>Y(Te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Br,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:V,onChange:Te=>F(Te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(ur,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),ze=()=>{const Te=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(Xe=>({label:` ${Xe}`,value:Xe.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],He=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:P,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:U,onChange:Xe=>ae(Xe.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:$,onChange:Xe=>de(Xe.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:W,onChange:Xe=>se(Xe.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(C_,{options:He,value:k,onChange:Xe=>ge(Xe),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(C_,{options:Te,value:j,onChange:Xe=>T(Xe),placeholder:"  / "})]}),j==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:ke,onChange:Xe=>G(Xe.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:Xe=>R(Xe.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:D,onChange:Xe=>L(Xe.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},ft=()=>i.jsxs("form",{onSubmit:Q,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:ce,onChange:Te=>te(Te.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Br,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(fx,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300",onClick:Ne}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-gray-950/95 backdrop-blur-xl z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl border border-white/10 transition-all duration-500",children:[i.jsxs("div",{className:"relative mb-8",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-2xl rounded-full animate-pulse"}),i.jsxs("div",{className:"relative w-24 h-24",children:[i.jsx("div",{className:"absolute inset-0 border-t-4 border-emerald-500 border-solid rounded-full animate-spin"}),i.jsx("div",{className:"absolute inset-2 border-r-4 border-blue-500 border-solid rounded-full animate-spin-reverse"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(Yn,{className:"w-8 h-8 text-white/80"})})]})]}),i.jsx("h4",{className:"text-xl font-black text-white mb-2 tracking-tight animate-pulse",children:ye()}),i.jsxs("p",{className:"text-gray-400 text-sm font-medium flex items-center gap-2",children:[i.jsx(ut,{className:"w-3 h-3 animate-spin"}),"    ..."]})]}),i.jsx("button",{onClick:Ne,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(Hn,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Yg,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(wa,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(Mf,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):Ne()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Ee(),t==="TEACHER_LOGIN"&&ue(),t==="STUDENT_LOGIN"&&qe(),t==="STUDENT_SIGNUP"&&ze(),t==="FORGOT_PASSWORD"&&ft(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(Mf,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},h7=()=>{const{user:r}=Xs(),[e,t]=O.useState(!1),[s,l]=O.useState(null),[c,d]=O.useState("MCQ"),[f,g]=O.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),[x,w]=O.useState([]),[b,N]=O.useState(null),[C,Y]=O.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[V,F]=O.useState(""),[U,ae]=O.useState(!1),[$,de]=O.useState([]),[W,se]=O.useState(!1),[j,T]=O.useState(""),A=(P,Q)=>{Y(ye=>({...ye,[P]:Q}))},R=(P,Q)=>{const ye=[...C.options];ye[P]=Q,Y(Ee=>({...Ee,options:ye}))},D=()=>{if(!C.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&C.options.some(ye=>!ye.trim())){alert("   ");return}if(c==="READING"&&!C.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!V.trim()){alert("    ");return}let P=[];if(c==="TF")P=["",""];else if(c==="REORDER"){if(P=V.split(" ").filter(ye=>ye.trim().length>0),P.length<2){alert("       ");return}}else P=C.options;const Q={id:b||Date.now(),question:C.question,options:P,correctAnswer:C.correctAnswer,explanation:C.explanation||"",type:c};c==="READING"&&(Q.passageContent=C.passageContent,Q.generalInstruction=C.generalInstruction,Q.passageFontSize=C.passageFontSize),b?(w(x.map(ye=>ye.id===b?Q:ye)),N(null)):w([...x,Q]),L()},L=()=>{Y({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),F(""),N(null),d("MCQ")},k=P=>{const Q=x.find(ye=>ye.id===P);Q&&(N(P),d(Q.type||"MCQ"),Q.type==="REORDER"?(F(Q.options.join(" ")),Y({question:Q.question,options:["","","",""],correctAnswer:Q.correctAnswer,explanation:Q.explanation||"",passageContent:Q.passageContent||"",generalInstruction:Q.generalInstruction||"",passageFontSize:Q.passageFontSize||"md"})):(Y({question:Q.question,options:Q.type==="TF"?["","","",""]:Q.options.length>=4?Q.options:[...Q.options,...Array(4-Q.options.length).fill("")],correctAnswer:Q.correctAnswer,explanation:Q.explanation||"",passageContent:Q.passageContent||"",generalInstruction:Q.generalInstruction||"",passageFontSize:Q.passageFontSize||"md"}),F("")),window.scrollTo({top:0,behavior:"smooth"}))},ge=()=>{L()},ke=P=>{window.confirm("      ")&&(w(x.filter(Q=>Q.id!==P)),b===P&&L())},G=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const P={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null,isPremium:f.isPremium||!1};if(s){const Q=An(Be,"quizzes",s);await zd(Q,{...P,updatedAt:As()}),alert("    !")}else await pr(bt(Be,"quizzes"),{...P,createdAt:As()}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),w([]),l(null),L()}catch(P){console.error("Error saving quiz:",P),alert("   ")}finally{t(!1)}},ce=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:"",isPremium:!1}),w([]),l(null),L())},te=async()=>{se(!0);try{const P="etqan_teacher_import_list",ye=Date.now(),Ee=localStorage.getItem(P);if(Ee){const{data:ft,timestamp:Te}=JSON.parse(Ee);if(ye-Te<3e5){de(ft),se(!1);return}}const ue=xn(bt(Be,"quizzes"),Ec("createdAt","desc"),Di(50)),ze=(await In(ue)).docs.map(ft=>({id:ft.id,...ft.data()}));de(ze),localStorage.setItem(P,JSON.stringify({data:ze,timestamp:ye}))}catch(P){console.error(P)}se(!1)},me=()=>{te(),ae(!0)},Ne=P=>{x.length>0&&!window.confirm("         .")||(l(P.id||null),g({title:P.title,subject:P.subject,grade:P.grade,category:P.category||"Language",description:P.description||"",duration:P.duration?P.duration.toString():"30",questionDuration:P.questionDuration?P.questionDuration.toString():"",isPremium:P.isPremium||!1}),w(P.questions),ae(!1),L(),window.scrollTo({top:0,behavior:"smooth"}))},I=$.filter(P=>(P.title?P.title.toLowerCase().includes(j.toLowerCase()):!1)||(P.grade?P.grade.includes(j):!1)),Z=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(yw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:me,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(jp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(Pn,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:ce,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(Hn,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:P=>g({...f,title:P.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(xm,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:P=>g({...f,subject:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(Qr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:P=>g({...f,grade:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(P=>i.jsxs("option",{value:P.toString(),children:[" ",P]},P))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ti,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx(eN,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:P=>g({...f,category:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Ti,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(Wu,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:P=>g({...f,duration:P.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(tN,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:P=>g({...f,questionDuration:P.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]}),i.jsx("div",{className:"col-span-2",children:i.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-2xl bg-amber-900/10 border border-amber-500/20 cursor-pointer hover:bg-amber-900/20 transition-colors",children:[i.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${f.isPremium?"bg-amber-500":"bg-gray-600"}`,children:i.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${f.isPremium?"right-1":"right-7"}`})}),i.jsx("input",{type:"checkbox",className:"hidden",checked:f.isPremium,onChange:P=>g({...f,isPremium:P.target.checked})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),i.jsx("span",{className:"font-bold text-white",children:"  (Premium)"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]})]})})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:P=>g({...f,description:P.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(xw,{className:"w-5 h-5 text-blue-400"})}),b?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(Gn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(Y_,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(FA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:C.generalInstruction,onChange:P=>A("generalInstruction",P.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:C.passageContent,onChange:P=>A("passageContent",P.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(JA,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:Z.map(P=>i.jsx("button",{onClick:()=>A("passageFontSize",P.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${C.passageFontSize===P.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(dr,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:C.question,onChange:P=>A("question",P.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.options.map((P,Q)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${C.correctAnswer===Q?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${C.correctAnswer===Q?"text-blue-400":"text-gray-400"}`,children:[" ",Q+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",Q),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${C.correctAnswer===Q?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:C.correctAnswer===Q?" ":" "})]}),i.jsx("input",{type:"text",value:P,onChange:ye=>R(Q,ye.target.value),placeholder:`  ${Q+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${Q===C.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},Q))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:V,onChange:P=>F(P.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),V&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:V.split(" ").filter(P=>P.trim()).map((P,Q)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:P},Q))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===0&&i.jsx(Yt,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===1&&i.jsx(Yt,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:C.explanation,onChange:P=>A("explanation",P.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),i.jsxs("div",{className:"flex gap-3",children:[b&&i.jsxs("button",{onClick:ge,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(W_,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:D,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${b?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:b?i.jsxs(i.Fragment,{children:[i.jsx(vi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(xw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(vi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:G,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):s?i.jsx(bd,{className:"w-5 h-5"}):i.jsx(Yt,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(yw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((P,Q)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${b===P.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:Q+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:P.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:P.type==="REORDER"?"":P.options.length===2?"/":P.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>k(P.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(Ip,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>ke(P.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(_a,{className:"w-3.5 h-3.5"}),""]})]}),P.explanation&&i.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",P.explanation]})]},P.id))})]})]})})]})}),U&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(jp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>ae(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Hn,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(us,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:j,onChange:P=>T(P.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:W?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-600"})}):I.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(P=>i.jsxs("div",{onClick:()=>Ne(P),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:P.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:P.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:P.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(dr,{className:"w-3 h-3"}),P.questions.length," "]})]},P.id))})})]})})]})},Cu=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:px},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Pn},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:us},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:xd},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:gc},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Vn}],f7=[{id:"first_step",title:" ",desc:"   ",icon:px,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:Tl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:Pn,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:gc,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:vl,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:us,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:ym,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:yx,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:J_,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:Vn,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],m7=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],vp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],R_=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=O.useState(!1),f=O.useRef(null);O.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(Ti,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},w);const b=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,b&&i.jsx(wa,{className:"w-3 h-3"})]},w)})})]})},g7=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=Xs(),[s,l]=O.useState(!1),[c,d]=O.useState(null),[f,g]=O.useState(!1),[x,w]=O.useState(!1),[b,N]=O.useState(!1),[C,Y]=O.useState(null),[V,F]=O.useState((e==null?void 0:e.avatar)||""),[U,ae]=O.useState((e==null?void 0:e.profileBackground)||vp[0].url),[$,de]=O.useState([]),[W,se]=O.useState(!0),[j,T]=O.useState(0),[A,R]=O.useState(1),[D,L]=O.useState(Cu[0]),[k,ge]=O.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[ke,G]=O.useState([]),[ce,te]=O.useState(""),[me,Ne]=O.useState(!1),[I,Z]=O.useState("50"),[P,Q]=O.useState(null),[ye,Ee]=O.useState(!1),[ue,qe]=O.useState(""),[ze,ft]=O.useState(!1),[Te,He]=O.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});O.useEffect(()=>{e&&(He(le=>({...le,firstName:e.firstName||le.firstName,lastName:e.lastName||le.lastName,gender:e.gender||le.gender,grade:e.grade||le.grade,school:e.school||le.school})),e.avatar&&F(e.avatar),e.profileBackground&&ae(e.profileBackground))},[e]),O.useEffect(()=>{(async()=>{if(!e)return;const Ge=`etqan_quiz_history_${e.uid}`,Qe="etqan_all_students_teacher",st=365*24*60*60*1e3;if(e.role==="teacher"){se(!1),Ne(!0);const Kt=localStorage.getItem(Qe),bn=Date.now();if(Kt)try{const{data:Rt,timestamp:vt}=JSON.parse(Kt);if(bn-vt<st){G(Rt),Ne(!1);return}}catch(Rt){console.error(Rt)}try{const Rt=xn(bt(Be,"users"),Mt("role","==","student")),Zt=(await In(Rt)).docs.map(Bt=>({id:Bt.id,...Bt.data()}));G(Zt),localStorage.setItem(Qe,JSON.stringify({data:Zt,timestamp:bn}))}catch(Rt){console.error("Error fetching students:",Rt)}finally{Ne(!1)}return}const ms=localStorage.getItem(Ge),ks=Date.now();if(ms)try{const{history:Kt,totalXP:bn,rankLevel:Rt,stats:vt,timestamp:Zt}=JSON.parse(ms);if(ks-Zt<st){de(Kt),T(bn),R(Rt),L(Cu.find(Bt=>Rt>=Bt.minLevel)||Cu[0]),ge(vt),se(!1);return}}catch(Kt){console.error(Kt)}try{const Kt=xn(bt(Be,"quiz_results"),Mt("userId","==",e.uid)),bn=await In(Kt),Rt=[];let vt=0,Zt=!1,Bt=0;bn.forEach(je=>{const ve=je.data();Rt.push({id:je.id,...je.data(),createdAt:je.data().createdAt?{seconds:je.data().createdAt.seconds}:null});let Re=10+ve.percentage*2;ve.passed&&(Re+=50),ve.percentage===100&&(Re+=100,Zt=!0,Bt++),vt+=Math.round(Re)}),Rt.sort((je,ve)=>{const Re=je.createdAt?je.createdAt.seconds:0;return(ve.createdAt?ve.createdAt.seconds:0)-Re});const Ln=Rt.slice(0,10);let gs=vt;try{const je=An(Be,"users",e.uid),ve=await E5(je);ve.exists()&&ve.data().totalXP!==void 0?gs=ve.data().totalXP:e.totalXP!==void 0&&(gs=e.totalXP)}catch{e.totalXP!==void 0&&(gs=e.totalXP)}de(Ln),T(gs);const er=Math.floor(gs/500)+1;R(er);const es=[...Cu].reverse().find(je=>er>=je.minLevel)||Cu[0];L(es);const fe={quizzesCompleted:Rt.length,hasPerfectScore:Zt,level:er,totalXP:gs,perfectScoresCount:Bt};ge(fe),localStorage.setItem(Ge,JSON.stringify({history:Ln,totalXP:gs,rankLevel:er,stats:fe,timestamp:ks}))}catch(Kt){console.error(Kt)}finally{se(!1)}})()},[e]);const Xe=async le=>{le.preventDefault(),l(!0),d(null);try{let Ge={...Te};Te.grade==="university"&&Te.universityName&&(Ge.school=Te.universityName),delete Ge.universityName,await t(Ge),d("   !"),setTimeout(()=>d(null),3e3)}catch(Ge){console.error(Ge),alert("   ")}finally{l(!1)}},yn=async()=>{l(!0);try{await t({avatar:V}),g(!1)}catch(le){console.error(le)}finally{l(!1)}},ds=async()=>{l(!0);try{await t({profileBackground:U}),w(!1)}catch(le){console.error(le)}finally{l(!1)}},Kn=async(le,Ge)=>{if(!le)return;const Qe=parseInt(I);if(isNaN(Qe)||Qe<=0){alert("    ");return}if(window.confirm(`     ${Qe} XP  ${Ge}`)){l(!0),Q(null);try{const st=An(Be,"users",le);await zd(st,{totalXP:ux(Qe)});const ms=ke.map(Kt=>Kt.id===le?{...Kt,totalXP:(Kt.totalXP||0)+Qe}:Kt);G(ms),localStorage.setItem("etqan_all_students_teacher",JSON.stringify({data:ms,timestamp:Date.now()})),Q(`  ${Qe} XP  ${Ge} !`),setTimeout(()=>Q(null),3e3)}catch(st){console.error(st),alert("    ")}finally{l(!1)}}},hs=async()=>{if(!ue.trim()){alert("   ");return}ft(!0);try{await pr(bt(Be,"announcements"),{title:ue,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:As()}),await pr(bt(Be,"notifications"),{recipientId:"all",title:"  ",message:ue,type:"info",createdAt:As(),read:!1}),alert("   "),qe(""),Ee(!1)}catch(le){console.error(le),alert("   ")}finally{ft(!1)}},Ys=ke.filter(le=>{const Ge=(le.displayName||"").toLowerCase(),Qe=(le.email||"").toLowerCase(),st=ce.toLowerCase();return Ge.includes(st)||Qe.includes(st)}),zt=le=>le?le.startsWith("http")?{backgroundImage:`url(${le})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${vp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Ut=le=>!le||le.startsWith("http")?"bg-no-repeat bg-center":le,an=le=>le<=3?"border-gray-800":le<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":le<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":le<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":le<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":le<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":le<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":le<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":le<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":le<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",br=le=>le<=3?"text-gray-400":le<=6?"text-emerald-400 font-bold":le<=9?"text-blue-400 font-bold":le<=12?"text-cyan-400 font-black":le<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":le<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":le<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",Zn=$.slice(0,10).map(le=>le.percentage),ln=Zn.length>0?Math.max(...Zn):0,Js=Zn.length>0?Math.min(...Zn):0,Ws=Zn.length>0?Math.round(Zn.reduce((le,Ge)=>le+Ge,0)/Zn.length):0,vr=$.length,Rs=(A-1)*500,Ra=Math.min(100,Math.max(0,(j-Rs)/500*100)),fs="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",ka=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(le=>({label:` ${le}`,value:le.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Zs=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Yn,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(Yt,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(Br,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(Qr,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(kS,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(Qo,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(G_,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(El,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>Ee(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(bw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(pm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(ya,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("SUBSCRIPTION_MANAGEMENT"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-amber-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-amber-900/20 text-amber-400 flex items-center justify-center group-hover:bg-amber-600 group-hover:text-white transition-colors",children:i.jsx($_,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(vl,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),P&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(Yt,{className:"w-4 h-4"})," ",P]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(us,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:ce,onChange:le=>te(le.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:me?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(ut,{className:"w-8 h-8 animate-spin text-blue-500"})}):ce===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):Ys.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):Ys.map(le=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:le.avatar?i.jsx("img",{src:le.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Yn,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:le.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(Vf,{className:"w-3 h-3"})," ",le.totalXP||0]}),i.jsxs("span",{children:[" ",le.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:I,onChange:Ge=>Z(Ge.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>Kn(le.id,le.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(ya,{className:"w-4 h-4"})})]})]},le.id))})]})]}),ye&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(bw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>Ee(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(Hn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:ue,onChange:le=>qe(le.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:hs,disabled:ze,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[ze?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up relative",children:[b&&i.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-slide-up-fade",children:i.jsxs("div",{className:"bg-gray-800/90 backdrop-blur-md border border-gray-700 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-500/20 p-1 rounded-full",children:i.jsx(Yt,{className:"w-4 h-4 text-emerald-400"})}),i.jsx("span",{className:"font-bold text-sm",children:"    "})]})}),f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Yn,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Hn,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:m7.map((le,Ge)=>{const Qe=A<le.minLevel;return i.jsxs("button",{onClick:()=>!Qe&&F(le.url),disabled:Qe,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${V===le.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Qe?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:le.url,alt:`Avatar ${Ge}`,className:"w-full h-full object-cover"}),Qe&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(ur,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",le.minLevel]})]}),!Qe&&V===le.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(Yt,{className:"w-3 h-3"})})]},Ge)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:yn,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(vw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(Hn,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:vp.map((le,Ge)=>{const Qe=A<le.minLevel,st=U===le.url;return i.jsxs("button",{onClick:()=>!Qe&&ae(le.url),disabled:Qe,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${st?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Qe?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${le.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(ur,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",le.minLevel]})]}):st&&i.jsx(Yt,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:le.name})})]},Ge)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:ds,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Ut(e==null?void 0:e.profileBackground)}`,style:zt(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(vw,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${D.color}`,children:[i.jsx(D.icon,{className:"w-4 h-4"})," ",D.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${an(A)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Yn,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(yA,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-gray-700/50 hover:bg-gray-800 transition-colors group cursor-pointer",title:" ",onClick:()=>{navigator.clipboard.writeText((e==null?void 0:e.uid)||""),N(!0),setTimeout(()=>N(!1),2e3)},children:[i.jsx(gx,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-emerald-400 transition-colors"}),i.jsxs("span",{className:"text-[10px] font-mono text-gray-500 group-hover:text-gray-300 transition-colors tracking-wider",children:["ID: ",e==null?void 0:e.uid.substring(0,8).toUpperCase(),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${br(A)}`,children:[i.jsx(vl,{className:"w-3 h-3"}),"  ",A]})]})]}),i.jsxs("form",{onSubmit:Xe,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Yn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Te.firstName,onChange:le=>He({...Te,firstName:le.target.value}),className:fs})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Te.lastName,onChange:le=>He({...Te,lastName:le.target.value}),className:fs})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(R_,{options:Zs,value:Te.gender,onChange:le=>!(e!=null&&e.genderChanged)&&He({...Te,gender:le}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(ur,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Te.phone,onChange:le=>He({...Te,phone:le.target.value}),className:fs})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Te.address,onChange:le=>He({...Te,address:le.target.value}),className:fs})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Qr,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Te.school,onChange:le=>He({...Te,school:le.target.value}),className:fs})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(R_,{options:ka,value:Te.grade,onChange:le=>He({...Te,grade:le}),placeholder:" "})]}),Te.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:Te.universityName||Te.school,onChange:le=>He({...Te,universityName:le.target.value}),placeholder:"   ...",className:`${fs} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(Yt,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-3xl md:rounded-[2.5rem] shadow-2xl p-3 md:p-6 text-white relative overflow-hidden border-2 md:border-4 border-gray-800 ring-2 md:ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-2 md:mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-2 md:p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(D.icon,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg md:text-3xl font-black tracking-tight",children:[" ",A]}),i.jsxs("p",{className:"text-indigo-100 text-xs md:text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-2 md:px-3 py-1 rounded-full w-fit",children:[i.jsx(Vf,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-orange-400 fill-orange-400"})," ",j,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-6 md:mb-8",children:[i.jsxs("div",{className:"flex justify-between text-[10px] md:text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:D.title}),i.jsxs("span",{children:["  ",A+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3 md:h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Ra}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-3 md:p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-xs md:text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(Vn,{className:"w-3 h-3 md:w-4 md:h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-base md:text-xl font-black text-white tracking-wide mb-1",children:D.title}),i.jsx("div",{className:"text-[10px] md:text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(Ap,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:f7.map((le,Ge)=>{const Qe=le.condition(k);return i.jsxs("button",{onClick:()=>Y({badge:le,isUnlocked:Qe}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Qe?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Qe?le.bg:"bg-gray-700"}`,children:i.jsx(le.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Qe?le.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:le.title}),!Qe&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ur,{className:"w-2.5 h-2.5 text-gray-500"})})]},Ge)})}),C&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>Y(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(Hn,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${C.isUnlocked?C.badge.bg:"bg-gray-700"}`,children:i.jsx(C.badge.icon,{className:`w-6 h-6 ${C.isUnlocked?C.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:C.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${C.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:C.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:C.badge.desc})]}),!C.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(ur,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),C.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(Yt,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(KA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),W?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(ut,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Ws>=90?"text-emerald-400":"text-blue-400"}`,children:[Ws,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(vl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[ln,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(q_,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[Js,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(CS,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:vr})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(wA,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Ws,"%"]})]})]})]})]})]})]})]})]})},p7=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],wp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=O.useState(!1),f=O.useRef(null);O.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ti,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const b=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,b&&i.jsx(wa,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},x7=(r="General")=>{switch(r){case"Language":return{label:"",bg:"bg-indigo-500/10",border:"border-indigo-500/20",text:"text-indigo-400",hoverBorder:"group-hover:border-indigo-500/50",buttonHover:"group-hover:bg-indigo-600 group-hover:border-indigo-500 group-hover:text-white",icon:Qo};case"Reading":return{label:"",bg:"bg-emerald-500/10",border:"border-emerald-500/20",text:"text-emerald-400",hoverBorder:"group-hover:border-emerald-500/50",buttonHover:"group-hover:bg-emerald-600 group-hover:border-emerald-500 group-hover:text-white",icon:Gn};case"Writing":return{label:"",bg:"bg-orange-500/10",border:"border-orange-500/20",text:"text-orange-400",hoverBorder:"group-hover:border-orange-500/50",buttonHover:"group-hover:bg-orange-600 group-hover:border-orange-500 group-hover:text-white",icon:xm};case"Vocabulary":return{label:"",bg:"bg-purple-500/10",border:"border-purple-500/20",text:"text-purple-400",hoverBorder:"group-hover:border-purple-500/50",buttonHover:"group-hover:bg-purple-600 group-hover:border-purple-500 group-hover:text-white",icon:yd};case"General":default:return{label:"",bg:"bg-gray-700/30",border:"border-gray-700",text:"text-gray-400",hoverBorder:"group-hover:border-gray-500",buttonHover:"group-hover:bg-gray-700 group-hover:border-gray-500 group-hover:text-white",icon:Pn}}},y7=({onBack:r,onNavigate:e})=>{const{user:t}=Xs(),[s,l]=O.useState("SELECTION"),[c,d]=O.useState(""),[f,g]=O.useState(""),[x,w]=O.useState("All"),[b,N]=O.useState([]),[C,Y]=O.useState(!1),[V,F]=O.useState(null),[U,ae]=O.useState(0),[$,de]=O.useState({}),[W,se]=O.useState(1800),[j,T]=O.useState(null),[A,R]=O.useState(!1),[D,L]=O.useState(0),[k,ge]=O.useState({}),[ke,G]=O.useState(!1),[ce,te]=O.useState(null),[me,Ne]=O.useState(!1),[I,Z]=O.useState(!1),[P,Q]=O.useState(!1),[ye,Ee]=O.useState(0),[ue,qe]=O.useState(!1),[ze,ft]=O.useState(!1),[Te,He]=O.useState(null),[Xe,yn]=O.useState(0),[ds,Kn]=O.useState(""),[hs,Ys]=O.useState(!1),[zt,Ut]=O.useState(!1),[an,br]=O.useState(null),[,Zn]=O.useState(0);O.useEffect(()=>{const fe=setInterval(()=>Zn(je=>je+1),5e3);return()=>clearInterval(fe)},[]);const ln=()=>{if((t==null?void 0:t.role)==="teacher")return!0;if(!(t!=null&&t.isSubscriber)||!t.subscriptionExpiry)return!1;const fe=t.subscriptionExpiry.seconds?t.subscriptionExpiry.seconds*1e3:new Date(t.subscriptionExpiry).getTime();return Date.now()<fe};O.useEffect(()=>{window.scrollTo(0,0)},[s]),O.useEffect(()=>{if(t&&s==="SELECTION"){const fe=`quiz_session_${t.uid}`,je=localStorage.getItem(fe);if(je)try{const ve=JSON.parse(je);Date.now()-ve.timestamp<7200*1e3?br(ve):localStorage.removeItem(fe)}catch{localStorage.removeItem(fe)}}},[t,s]),O.useEffect(()=>{if(s==="ACTIVE"&&V&&t){const fe={quiz:V,answers:$,index:U,timeLeft:W,reorderShuffles:k,timestamp:Date.now()};localStorage.setItem(`quiz_session_${t.uid}`,JSON.stringify(fe))}},[V,$,U,W,t,s,k]),O.useEffect(()=>{f?Js():N([])},[f]),O.useEffect(()=>{let fe;return s==="ACTIVE"&&W>0&&(fe=setInterval(()=>{se(je=>je<=1?(Ge(),0):je-1)},1e3)),()=>clearInterval(fe)},[s,W]),O.useEffect(()=>{let fe;return s==="ACTIVE"&&(V!=null&&V.questionDuration)&&j!==null&&(j>0?fe=setInterval(()=>{T(je=>je!==null&&je>0?je-1:0)},1e3):j===0&&le()),()=>clearInterval(fe)},[s,V,j]),O.useEffect(()=>{V!=null&&V.questionDuration?T(V.questionDuration):T(null)},[U,V]),O.useEffect(()=>{if(s!=="ACTIVE")return;const fe=()=>{Ee(Pe=>{const Oe=Pe+1;return Oe===1?Z(!0):Oe>=2&&(Z(!1),Q(!0)),Oe})},je=()=>{document.hidden&&fe()},ve=Pe=>{(Pe.key==="PrintScreen"||Pe.ctrlKey&&Pe.key==="p"||Pe.metaKey&&Pe.shiftKey)&&(Pe.preventDefault(),fe())},Re=Pe=>Pe.preventDefault();return document.addEventListener("visibilitychange",je),document.addEventListener("keydown",ve),document.addEventListener("contextmenu",Re),document.addEventListener("copy",Re),document.addEventListener("paste",Re),document.addEventListener("cut",Re),document.addEventListener("selectstart",Re),()=>{document.removeEventListener("visibilitychange",je),document.removeEventListener("keydown",ve),document.removeEventListener("contextmenu",Re),document.removeEventListener("copy",Re),document.removeEventListener("paste",Re),document.removeEventListener("cut",Re),document.removeEventListener("selectstart",Re)}},[s]);const Js=async()=>{Y(!0);try{const fe=xn(bt(Be,"quizzes"),Mt("grade","==",f));let je;try{je=await T5(fe),je.empty&&(je=await fm(fe))}catch{je=await In(fe)}const ve=xn(bt(Be,"quizzes"),Mt("grade","==",f),Mt("isPremium","==",!0));let Re;try{Re=await fm(ve)}catch(Oe){console.warn("Could not fetch premium from server, checking cache",Oe),Re=await In(ve)}const Pe=[];je.forEach(Oe=>{const $e=Oe.data();$e.isPremium!==!0&&Pe.push({id:Oe.id,...$e})}),Re.forEach(Oe=>{Pe.find($e=>$e.id===Oe.id)||Pe.push({id:Oe.id,...Oe.data()})}),N(Pe)}catch(fe){console.error("Error fetching quizzes:",fe)}finally{Y(!1)}},Ws=Array.from(new Set(b.map(fe=>fe.subject))),vr=b.filter(fe=>{const je=c?fe.subject===c:!0,ve=x&&x!=="All"?fe.category===x:!0;return je&&ve}),Rs=fe=>{const je=ln();if(fe.isPremium&&!je){qe(!0);return}te(fe),G(!0)},Ra=fe=>{if(!fe.questions||fe.questions.length===0){alert("      ");return}t&&localStorage.removeItem(`quiz_session_${t.uid}`),br(null);const ve=[...fe.questions].sort(()=>Math.random()-.5).map($e=>{if($e.type==="MCQ"||$e.type==="TF"){const kt=$e.options.map((gt,on)=>({opt:gt,originalIndex:on}));kt.sort(()=>Math.random()-.5);const Ze=kt.map(gt=>gt.opt),mt=kt.findIndex(gt=>gt.originalIndex===$e.correctAnswer);return{...$e,options:Ze,correctAnswer:mt}}return $e}),Re={...fe,questions:ve},Pe={};ve.forEach(($e,kt)=>{if($e.type==="REORDER"){const Ze=$e.options.map((mt,gt)=>gt);for(let mt=Ze.length-1;mt>0;mt--){const gt=Math.floor(Math.random()*(mt+1));[Ze[mt],Ze[gt]]=[Ze[gt],Ze[mt]]}Pe[kt]=Ze}}),ge(Pe),F(Re),ae(0),de({});const Oe=fe.duration?fe.duration*60:1800;se(Oe),L(0),Ee(0),Q(!1),yn(0),Kn(""),Ut(!1),G(!1),te(null),l("ACTIVE")},fs=()=>{an&&(F(an.quiz),de(an.answers),ae(an.index),se(an.timeLeft),an.reorderShuffles&&ge(an.reorderShuffles),l("ACTIVE"),br(null))},ka=()=>{ce&&Ra(ce)},Zs=fe=>{de(je=>({...je,[U]:fe}))},le=()=>{V&&(T(null),U<V.questions.length-1?ae(fe=>fe+1):Ge())},Ge=async()=>{if(t&&localStorage.removeItem(`quiz_session_${t.uid}`),!V||!t){l("RESULT");return}R(!0);const fe=ms(),je=Math.round(fe/V.questions.length*100);let ve=fe*30;L(ve);try{await pr(bt(Be,"quiz_results"),{userId:t.uid,userName:t.displayName,quizId:V.id||"unknown",quizTitle:V.title,subject:V.subject,score:fe,totalQuestions:V.questions.length,percentage:je,passed:je>=50,earnedXP:ve,createdAt:As()});const Re=An(Be,"users",t.uid);await Ry(Re,{totalXP:ux(ve),quizzesCompleted:ux(1),lastQuizDate:As(),role:t.role==="teacher"?"teacher":"student",email:t.email,displayName:t.displayName},{merge:!0});const Pe=`etqan_user_profile_${t.uid}`,Oe=localStorage.getItem(Pe);if(Oe){const{data:$e,timestamp:kt}=JSON.parse(Oe),Ze={...$e,totalXP:($e.totalXP||0)+ve,quizzesCompleted:($e.quizzesCompleted||0)+1};localStorage.setItem(Pe,JSON.stringify({data:Ze,timestamp:kt}))}localStorage.removeItem(`etqan_quiz_history_${t.uid}`)}catch(Re){console.error("Error saving quiz result:",Re)}finally{R(!1),l("RESULT")}},Qe=async()=>{if(Xe!==0&&!(!V||!t)){Ys(!0);try{await pr(bt(Be,"reviews"),{type:"quiz",targetId:V.id,targetTitle:V.title,teacherId:V.createdBy||"teacher",teacherName:V.teacherName||"",rating:Xe,comment:ds,studentId:t.uid,studentName:t.displayName,createdAt:As()}),Ut(!0)}catch(fe){console.error("Error saving review:",fe),alert("    ")}finally{Ys(!1)}}},st=fe=>{const je=Math.floor(fe/60),ve=fe%60;return`${je}:${ve<10?"0":""}${ve}`},ms=()=>{if(!V)return 0;let fe=0;return V.questions.forEach((je,ve)=>{if(je.type==="REORDER"){const Re=$[ve];if(Re&&Re.length===je.options.length){let Pe=!0;for(let Oe=0;Oe<je.options.length;Oe++)if(Re[Oe]!==Oe){Pe=!1;break}Pe&&fe++}}else $[ve]===je.correctAnswer&&fe++}),fe},ks=()=>{Ne(!0)},Kt=()=>{t&&localStorage.removeItem(`quiz_session_${t.uid}`),Ne(!1),l("SELECTION")},bn=()=>{t&&localStorage.removeItem(`quiz_session_${t.uid}`),Q(!1),l("SELECTION")},Rt=fe=>{He(fe),ft(!0)},vt=()=>{if(ft(!1),Te==="REVIEW")l("REVIEW");else if(Te==="RETAKE"){const fe=b.find(je=>je.id===(V==null?void 0:V.id));fe?Ra(fe):l("SELECTION")}else Te==="LIST"?l("SELECTION"):Te==="HOME"&&r();He(null)},Zt=(fe,je)=>{const ve=$[U]||[];Zs(je?[...ve,fe]:ve.filter(Re=>Re!==fe))},Bt=({title:fe,message:je,onConfirm:ve,onCancel:Re,icon:Pe=dr,confirmText:Oe="",cancelText:$e="",confirmColor:kt="emerald",isStatic:Ze=!1})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:$e?Re:void 0}),i.jsxs("div",{className:`bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-white/10 shadow-2xl shadow-black/50 ${Ze?"":"animate-fade-in-up"}`,children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${kt==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Pe,{className:`w-10 h-10 ${kt==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:fe}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:je}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:ve,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all shadow-lg ${kt==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"} ${Ze?"":"transform hover:scale-105 active:scale-95"} ${$e?"":"max-w-[200px]"}`,children:Oe}),$e&&i.jsx("button",{onClick:Re,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:$e})]})]})]}),Ln=()=>{const fe=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ve=>({label:` ${ve}`,value:ve.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],je=[{label:"  ",value:""},...Ws.map(ve=>({label:String(ve),value:String(ve)}))];return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),an&&i.jsxs("div",{className:"mb-8 p-4 rounded-3xl bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-purple-500/30 flex flex-col sm:flex-row items-center justify-between gap-4 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-purple-500/20 p-3 rounded-full border border-purple-500/30",children:i.jsx(H_,{className:"w-6 h-6 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"   "}),i.jsxs("p",{className:"text-gray-400 text-sm",children:['    "',an.quiz.title,'"']})]})]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:fs,className:"flex-1 sm:flex-none bg-purple-600 hover:bg-purple-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-purple-900/30",children:" "}),i.jsx("button",{onClick:()=>{t&&localStorage.removeItem(`quiz_session_${t.uid}`),br(null)},className:"px-4 py-2.5 rounded-xl bg-gray-800 text-gray-400 hover:text-white font-bold transition-colors",children:""})]})]}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(Qr,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(wp,{options:fe,value:f,onChange:ve=>{g(ve),d(""),w("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(Pn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(wp,{options:je,value:c,onChange:d,placeholder:f?" ":"   ",disabled:!f})]})]}),f&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(eN,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(wp,{options:p7.map(ve=>({label:ve.label,value:ve.id})),value:x,onChange:w,placeholder:"  "})]})}),f&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(JS,{className:"w-5 h-5"})," "]}),C?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-400"})}):b.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(us,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):vr.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(us,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:vr.map(ve=>{const Re=ln(),Pe=ve.isPremium&&!Re,Oe=x7(ve.category);return i.jsxs("div",{className:`bg-gray-900 rounded-3xl p-5 border-2 transition-all duration-300 group relative overflow-hidden flex flex-col gap-4 ${Pe?"border-gray-800 opacity-90":`${Oe.border} ${Oe.hoverBorder} hover:-translate-y-1 hover:shadow-xl`}`,children:[ve.isPremium&&i.jsxs("div",{className:"absolute top-0 left-0 bg-amber-500 text-gray-900 text-[10px] font-black px-3 py-1 rounded-br-xl z-20 flex items-center gap-1",children:[i.jsx(Vn,{className:"w-3 h-3 fill-gray-900"}),"PREMIUM"]}),i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full ${Oe.bg} ${Oe.text}`,children:[i.jsx(Oe.icon,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs font-bold",children:Oe.label})]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500 text-xs bg-gray-950 px-2 py-1 rounded-lg border border-gray-800",children:[i.jsx(Wu,{className:"w-3 h-3"}),i.jsxs("span",{className:"font-mono font-bold pt-0.5",children:[ve.duration||30," "]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`text-lg font-black text-white leading-tight mb-2 ${Pe?"text-gray-400":""}`,children:ve.title}),i.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-400 font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(xx,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:ve.grade==="English Major - QOU"?"":` ${ve.grade}`})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(dr,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:[ve.questions.length," "]})]})]})]}),i.jsx("button",{onClick:()=>Rs(ve),className:`w-full py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all shadow-lg ${Pe?"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700":`bg-gray-800 text-white border border-gray-700 ${Oe.buttonHover}`}`,children:Pe?i.jsxs(i.Fragment,{children:[i.jsx(ur,{className:"w-4 h-4"})," "]}):i.jsxs(i.Fragment,{children:[" ",i.jsx(Ot,{className:"w-4 h-4"})]})})]},ve.id)})})]}),ke&&i.jsx(Bt,{title:"  ",message:`   ${ce==null?void 0:ce.title} `,onConfirm:ka,onCancel:()=>G(!1),confirmText:" ",cancelText:"",icon:dr}),ue&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>qe(!1)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-amber-500/30 shadow-2xl shadow-amber-900/20 animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 bg-amber-500/20",children:i.jsx(Vn,{className:"w-10 h-10 text-amber-500 fill-amber-500"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:"       .    ."}),i.jsx("button",{onClick:()=>{qe(!1),e("SERVICES")},className:"w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 border border-amber-500",children:" "})]})]})]})},gs=()=>{if(!V||!V.questions||!V.questions[U])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>l("SELECTION"),className:"text-blue-400 underline",children:" "})]});const fe=V.questions[U],je=fe.type==="REORDER";let ve=!1;if(je){const Ze=$[U];ve=Ze!==void 0&&Ze.length===fe.options.length}else ve=$[U]!==void 0;const Re=U===V.questions.length-1,Pe=V.subject.toLowerCase().includes("english")||V.subject.includes("")||V.subject.includes(""),Oe=Pe?"ltr":"rtl",$e=Pe?"text-left":"text-right",kt={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[fe.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:Ze=>Ze.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),P&&i.jsx(Bt,{title:"   ",message:"      .   .",onConfirm:bn,cancelText:null,confirmText:"",icon:DA,confirmColor:"red",isStatic:!0}),I&&!P&&i.jsx(Bt,{title:" !",message:"     .   .",onConfirm:()=>Z(!1),cancelText:null,confirmText:"",icon:bx,confirmColor:"red",isStatic:!0}),me&&i.jsx(Bt,{title:" ",message:"       .",onConfirm:Kt,onCancel:()=>Ne(!1),confirmText:" ",cancelText:"",icon:ed,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:ks,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(ed,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${W<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(Wu,{className:"w-4 h-4"}),st(W)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[U+1," / ",V.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(U+1)/V.questions.length*100}%`}})})]}),j!==null&&V.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${j<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${j/V.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",j," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Oe,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:V.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:je?i.jsx(Y_,{className:"w-4 h-4 text-emerald-500"}):i.jsx(ur,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[fe.passageContent&&i.jsxs("div",{className:"mb-8",children:[fe.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${$e}`,children:fe.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${$e}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${kt}`,children:fe.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${$e}`,children:fe.question}),je?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[($[U]||[]).map((Ze,mt)=>i.jsx("button",{onClick:()=>Zt(Ze,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:fe.options[Ze]},`ans-${mt}`)),(!$[U]||$[U].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(k[U]||[]).filter(Ze=>!($[U]||[]).includes(Ze)).map((Ze,mt)=>i.jsx("button",{onClick:()=>Zt(Ze,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:fe.options[Ze]},`bank-${mt}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>Zs([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(W_,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:fe.options.map((Ze,mt)=>i.jsxs("button",{onClick:()=>Zs(mt),className:`w-full ${$e} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 outline-none ${$[U]===mt?"border-emerald-500 bg-emerald-900/30 shadow-md outline-none":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${$[U]===mt?"text-emerald-300":"text-gray-300"}`,children:Ze}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${$[U]===mt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:$[U]===mt&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},mt))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:le,disabled:!ve||A,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!ve||A?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:A?i.jsxs(i.Fragment,{children:["  ",i.jsx(ut,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[Re?" ":" ",Oe==="rtl"?i.jsx(fx,{className:"w-5 h-5"}):i.jsx(Ot,{className:"w-5 h-5"})]})})})]})]})},er=()=>{if(!V)return null;const fe=ms(),je=V.questions.length,ve=Math.round(fe/je*100);let Re="text-red-500",Pe=gS,Oe=" ";ve>=90?(Re="text-emerald-500",Pe=Vn,Oe="!"):ve>=75?(Re="text-blue-500",Pe=xd,Oe="!"):ve>=50&&(Re="text-yellow-500",Pe=wa,Oe=" ");const $e=Pe;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2.5rem] border border-gray-800 p-8 relative overflow-hidden text-center shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx($e,{className:`w-16 h-16 ${Re} mb-3 drop-shadow-md`}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:Oe}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-3",children:V.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-3 py-1 rounded-full border border-gray-700",children:[i.jsx(Vf,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",D," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 text-center mb-6 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-2",children:" "}),i.jsxs("span",{className:`text-6xl font-black ${Re}`,children:[ve,"%"]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/50 flex items-center justify-center gap-2 text-gray-400 text-sm font-bold",children:[i.jsx("span",{children:"  :"}),i.jsxs("span",{className:`text-white bg-gray-700 px-3 py-1 rounded-lg ${Re}`,children:[fe," / ",je]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>Rt("REVIEW"),className:"w-full py-3.5 bg-orange-500 text-white font-black text-sm rounded-xl hover:bg-orange-600 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-lg shadow-orange-900/20",children:[i.jsx(Ep,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>Rt("HOME"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(Zu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>Rt("RETAKE"),className:"py-3.5 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(bd,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-sm bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:zt?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(wa,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(pm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(kt=>i.jsx("button",{onClick:()=>yn(kt),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Xe===kt?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:kt},kt))}),i.jsx("textarea",{value:ds,onChange:kt=>Kn(kt.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Qe,disabled:hs||Xe===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Xe===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[hs?i.jsx(ut,{className:"w-3 h-3 animate-spin"}):i.jsx(ya,{className:"w-3 h-3"}),""]})]})})]})},es=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Ep,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>l("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(Ot,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:V==null?void 0:V.questions.map((fe,je)=>{const ve=fe.type==="REORDER";let Re=!1,Pe=null;if(ve){const Oe=$[je];Oe?(Pe=Oe.map($e=>fe.options[$e]).join(" "),Re=Oe.length===fe.options.length&&Oe.every(($e,kt)=>$e===kt)):(Pe="  ",Re=!1)}else{const Oe=$[je];Re=Oe===fe.correctAnswer,Pe=Oe!==void 0?fe.options[Oe]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${Re?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${Re?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:je+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:fe.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${Re?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Pe})]}),!Re&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:ve?fe.options.join(" "):fe.options[fe.correctAnswer]})]}),fe.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(dr,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:fe.explanation})]})]},fe.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[s==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),Ln()]}),s==="ACTIVE"&&gs(),s==="RESULT"&&er(),s==="REVIEW"&&es(),ze&&i.jsx(Bt,{title:"  ",message:Te==="REVIEW"?"   ":Te==="RETAKE"?"     ":Te==="LIST"?"    ":"    ",onConfirm:vt,onCancel:()=>ft(!1),confirmText:"",cancelText:"",icon:gA})]})},b7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),v7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),w7=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(B_,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Sp,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(Tl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(xd,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(Ko,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(b7,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(v7,{className:"w-5 h-5"})})]})})]},s))})]})]})},_7=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(Ep,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(ym,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:yx,title:" ",desc:"       ."},{icon:US,title:" ",desc:"           ."},{icon:q_,title:" ",desc:"         ."},{icon:Xo,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),k_=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=O.useState(!1),f=O.useRef(null);O.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(Ti,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const b=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${b?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,b&&i.jsx(wa,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},N7=({onBack:r})=>{const[e,t]=O.useState(""),[s,l]=O.useState(""),[c,d]=O.useState("SELECTION"),[f,g]=O.useState(["handouts"]),[x,w]=O.useState([]),[b,N]=O.useState(!1);O.useEffect(()=>{c==="CONTENT"&&s&&e&&C()},[c,s,e]);const C=async()=>{N(!0);const W=`etqan_materials_${s}_${e}`,se=365*24*60*60*1e3,j=localStorage.getItem(W);if(j)try{const{data:T,timestamp:A}=JSON.parse(j);if(Date.now()-A<se){w(T),N(!1);return}}catch(T){console.error("Cache parsing error",T)}try{const T=xn(bt(Be,"study_materials"),Mt("grade","==",s),Mt("subject","==",e)),A=await In(T),R=[];A.forEach(D=>{R.push({id:D.id,...D.data()})}),R.sort((D,L)=>{var ke,G;const k=((ke=D.createdAt)==null?void 0:ke.seconds)||0;return(((G=L.createdAt)==null?void 0:G.seconds)||0)-k}),w(R),localStorage.setItem(W,JSON.stringify({data:R,timestamp:Date.now()}))}catch(T){console.error("Error fetching materials:",T)}finally{N(!1)}},Y=()=>{e&&s&&d("CONTENT")},V=W=>{g(se=>se.includes(W)?se.filter(j=>j!==W):[...se,W])},F=()=>{const W=x.filter(T=>T.category==="handouts"),se=x.filter(T=>T.category==="worksheets"),j=x.filter(T=>T.category==="exams");return[{id:"handouts",title:" ",files:W},{id:"worksheets",title:" ",files:se},{id:"exams",title:" ",files:j}]},U=W=>W?(W.toDate?W.toDate():new Date(W.seconds*1e3)).toLocaleDateString("ar-EG"):"",ae=F(),$=()=>{const W=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(j=>({label:` ${j}`,value:j.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],se=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(Uo,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(Pn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(k_,{options:se,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(Qr,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(k_,{options:W,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:Y,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(us,{className:"w-6 h-6"})," "]})]})})]})},de=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Gn,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(Ot,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(Uo,{className:"w-3.5 h-3.5"}),ae.reduce((W,se)=>W+se.files.length,0)," "]})]}),b?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(ut,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:ae.map(W=>{const se=f.includes(W.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>V(W.id),className:`w-full flex items-center justify-between p-5 transition-colors ${se?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${se?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(Uo,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:W.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[W.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${se?"rotate-180":""}`,children:i.jsx(Ti,{className:"w-5 h-5 text-gray-400"})})]}),se&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:W.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Uo,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:W.files.map((j,T)=>i.jsxs("div",{onClick:()=>j.url&&window.open(j.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(Gn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:j.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:j.size}),i.jsx("span",{children:""}),i.jsx("span",{children:U(j.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(jp,{className:"w-5 h-5"})})]},T))})})]},W.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(Mf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?$():de()]})},j7=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),E7=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],T7=[{id:"inquiry",label:" ",icon:xx,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:dr,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:OS,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:Si,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],S7=({onBack:r})=>{const[e,t]=O.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(Ot,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:E7.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(ya,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(Hn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),T7.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(zr,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(j7,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},D_=[{minLevel:1,title:" ",icon:px,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:Pn,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:us,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:xd,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:gc,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:Vn,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],A7=({onLoginClick:r})=>{const[e,t]=O.useState([]),[s,l]=O.useState(!0),[c,d]=O.useState(null);O.useEffect(()=>{(async()=>{l(!0);const w="etqan_leaderboard_cache_v2",b=365*24*60*60*1e3,N=localStorage.getItem(w),C=Date.now();let Y=[],V=!1;if(N)try{const F=JSON.parse(N);C-F.timestamp<b&&(Y=F.data,V=!0)}catch(F){console.error("Cache parse error",F)}if(V)t(Y);else try{const F=xn(bt(Be,"users"),Ec("totalXP","desc"),Di(5)),ae=(await In(F)).docs.map($=>({...$.data(),uid:$.id}));t(ae),localStorage.setItem(w,JSON.stringify({timestamp:C,data:ae}))}catch(F){console.error("Error fetching leaderboard:",F)}l(!1)})()},[]);const f=x=>{switch(x){case 0:return i.jsx(Vn,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return i.jsx(Ap,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return i.jsx(Ap,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return i.jsx(vl,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const w=Math.floor((x||0)/500)+1;return[...D_].reverse().find(b=>w>=b.minLevel)||D_[0]};return i.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),i.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[i.jsx(vl,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"    ( 5)"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-3xl",children:i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Vf,{className:"w-5 h-5 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[i.jsx(Q_,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),i.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:i.jsx("p",{children:"      !"})}):i.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,w)=>i.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${w===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":w===1?"bg-gray-800/60 border-gray-600/50":w===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${w<3?"text-white":"text-gray-600"}`,children:w<3?f(w):w+1}),i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?i.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):i.jsx(Yn,{className:"w-full h-full p-2 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[i.jsx(Qr,{className:"w-3 h-3"}),x.school||" "]})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[i.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),i.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),w===0&&i.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:i.jsxs("span",{className:"flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},w))})]})})})]}),c&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:i.jsx(Hn,{className:"w-5 h-5"})}),i.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),i.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[i.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):i.jsx(Yn,{className:"w-full h-full p-6 text-gray-500"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[i.jsx(xx,{className:"w-3 h-3"}),c.school||" "]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[z_.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),i.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),i.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[i.jsx(NA,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),i.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),i.jsx("div",{className:"pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},I7=()=>{const r=[{id:1,label:" ",value:"+500",icon:Xo,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",textColor:"text-blue-200"},{id:2,label:" ",value:"+50",icon:Pn,color:"text-emerald-400",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",textColor:"text-emerald-200"},{id:3,label:"",value:"+20",icon:Gn,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",textColor:"text-yellow-200"},{id:4,label:"",value:"+30",icon:El,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",textColor:"text-purple-200"}];return i.jsx("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-10",children:[i.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full animate-pulse border border-emerald-500/20",children:i.jsx(HT,{className:"w-6 h-6 text-emerald-500"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:" "})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:r.map(e=>i.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-sm p-6 rounded-3xl border ${e.borderColor} flex flex-col items-center justify-center text-center group hover:bg-gray-900 transition-all duration-300 hover:-translate-y-1 shadow-lg`,children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-4 ${e.bgColor} ${e.color} shadow-lg group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:i.jsx(e.icon,{className:"w-7 h-7"})}),i.jsx("div",{className:`text-3xl md:text-4xl font-black mb-2 ${e.color} drop-shadow-sm`,children:e.value}),i.jsx("div",{className:`font-bold text-sm md:text-base transition-colors ${e.textColor}`,children:e.label})]},e.id))})]})})},C7=({onBack:r})=>{const[e,t]=O.useState([]),[s,l]=O.useState(!0),[c,d]=O.useState(""),[f,g]=O.useState(null),[x,w]=O.useState(!1);O.useEffect(()=>{b()},[]);const b=async()=>{l(!0);const j="etqan_question_bank_v1",T=localStorage.getItem(j);if(T)try{const A=JSON.parse(T);if(A&&Array.isArray(A)){t(A),l(!1);return}}catch(A){console.error("Cache parsing error",A)}try{const A=xn(bt(Be,"quizzes"),Ec("createdAt","desc"),Di(50)),D=(await In(A)).docs.map(L=>({id:L.id,...L.data()}));t(D),localStorage.setItem(j,JSON.stringify(D))}catch(A){console.error("Error fetching quizzes:",A)}finally{l(!1)}},N=j=>{g({category:"Language",...j})},C=j=>{localStorage.setItem("etqan_question_bank_v1",JSON.stringify(j))},Y=async(j,T)=>{if(j.stopPropagation(),!T){alert(":   ");return}if(window.confirm("  "))try{await $m(An(Be,"quizzes",T));const A=e.filter(R=>R.id!==T);t(A),C(A)}catch(A){console.error("Error deleting quiz:",A),alert("   : "+A.message)}},V=(j,T)=>{f&&g({...f,[j]:T})},F=(j,T,A)=>{if(!f)return;const R=[...f.questions];R[j]={...R[j],[T]:A},g({...f,questions:R})},U=(j,T,A)=>{if(!f)return;const R=[...f.questions],D=[...R[j].options];D[T]=A,R[j]={...R[j],options:D},g({...f,questions:R})},ae=j=>{if(f&&window.confirm("      ")){const T=f.questions.filter((A,R)=>R!==j);g({...f,questions:T})}},$=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}w(!0);try{const j=An(Be,"quizzes",f.id);await zd(j,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions});const T=e.map(A=>A.id===f.id?f:A);t(T),C(T),g(null),alert("   ")}catch(j){console.error("Error updating quiz:",j),alert("   ")}finally{w(!1)}}},de=e.filter(j=>(j.title?j.title.toLowerCase().includes(c.toLowerCase()):!1)||j.teacherName&&j.teacherName.toLowerCase().includes(c.toLowerCase())),W=j=>j?(j.toDate?j.toDate():new Date(j.seconds*1e3)).toLocaleDateString("ar-EG"):"",se="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(us,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:j=>d(j.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(ut,{className:"w-10 h-10 animate-spin text-blue-400"})}):de.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Qo,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(j=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:j.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(j),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(Ip,{className:"w-4 h-4"})}),i.jsx("button",{onClick:T=>Y(T,j.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(_a,{className:"w-4 h-4"})})]})]}),i.jsxs("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors flex items-center gap-2",children:[j.title,j.isPremium&&i.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 p-1 rounded-full",title:" ",children:i.jsx(Vn,{className:"w-4 h-4 text-amber-500 fill-amber-500"})})]}),j.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:j.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",j.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Ju,{className:"w-3 h-3"}),W(j.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(Yn,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:j.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(dr,{className:"w-3 h-3"}),j.questions.length," "]})]})]},j.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(Ip,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(Hn,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Qo,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:j=>V("title",j.target.value),className:se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:j=>V("subject",j.target.value),className:se})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:j=>V("grade",j.target.value),className:se,children:[5,6,7,8,9,10,11,12].map(j=>i.jsxs("option",{value:j,children:[" ",j]},j))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:j=>V("category",j.target.value),className:se,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(dr,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((j,T)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>ae(T),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(_a,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",T+1]}),i.jsx("input",{type:"text",dir:"ltr",value:j.question,onChange:A=>F(T,"question",A.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:j.options.map((A,R)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",R+1]}),i.jsxs("button",{onClick:()=>F(T,"correctAnswer",R),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${j.correctAnswer===R?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[j.correctAnswer===R?i.jsx(Yt,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),j.correctAnswer===R?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:A,onChange:D=>U(T,R,D.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${j.correctAnswer===R?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},R))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:j.explanation||"",onChange:A=>F(T,"explanation",A.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},T))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:$,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"})," "]})]})]})})]})},R7=[{id:"grammar",title:" (Grammar)",icon:Qo,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Pn,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:yd,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:xm,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],k7=[{id:"English",title:" ",icon:yd,color:"text-purple-400",bg:"bg-purple-900/20"}],D7=({onBack:r,onNavigate:e})=>{const{user:t}=Xs(),[s,l]=O.useState("INTRO"),[c,d]=O.useState(""),[f,g]=O.useState(""),[x,w]=O.useState(null),[b,N]=O.useState([]),[C,Y]=O.useState(!1),[V,F]=O.useState(null),[U,ae]=O.useState(0),[$,de]=O.useState(""),[W,se]=O.useState(!1),[j,T]=O.useState(!1),[A,R]=O.useState(!1),[,D]=O.useState(0);O.useEffect(()=>{const ue=setInterval(()=>D(qe=>qe+1),5e3);return()=>clearInterval(ue)},[]);const L=()=>{if((t==null?void 0:t.role)==="teacher")return!0;if(!(t!=null&&t.isSubscriber)||!t.subscriptionExpiry)return!1;const ue=t.subscriptionExpiry.seconds?t.subscriptionExpiry.seconds*1e3:new Date(t.subscriptionExpiry).getTime();return Date.now()<ue};O.useEffect(()=>{window.scrollTo(0,0)},[s]);const k=()=>l("SUBJECTS"),ge=ue=>{d(ue),l("GRADES")},ke=ue=>{g(ue),l("CATEGORIES")},G=ue=>{w(ue),l("TOPICS")},ce=ue=>{if(ue.isPremium&&!L()){R(!0);return}F(ue),ae(0),de(""),T(!1),l("DETAILS")};O.useEffect(()=>{s==="TOPICS"&&f&&x&&c&&te()},[s,f,x,c]);const te=async()=>{Y(!0);try{const ue=xn(bt(Be,"explanations"),Mt("subject","==",c),Mt("grade","==",f),Mt("category","==",x==null?void 0:x.id));let qe;try{qe=await T5(ue),qe.empty&&(qe=await fm(ue))}catch{qe=await In(ue)}const ze=xn(bt(Be,"explanations"),Mt("subject","==",c),Mt("grade","==",f),Mt("category","==",x==null?void 0:x.id),Mt("isPremium","==",!0));let ft;try{ft=await fm(ze)}catch(He){console.warn("Server fetch failed for premium, falling back to default",He),ft=await In(ze)}const Te=[];qe.forEach(He=>{const Xe=He.data();Xe.isPremium!==!0&&Te.push({id:He.id,...Xe})}),ft.forEach(He=>{Te.find(Xe=>Xe.id===He.id)||Te.push({id:He.id,...He.data()})}),Te.sort((He,Xe)=>{var Kn,hs;const yn=((Kn=He.createdAt)==null?void 0:Kn.seconds)||0;return(((hs=Xe.createdAt)==null?void 0:hs.seconds)||0)-yn}),N(Te)}catch(ue){console.error("Error fetching explanations:",ue)}finally{Y(!1)}},me=async()=>{if(U!==0&&!(!V||!t)){se(!0);try{await pr(bt(Be,"reviews"),{type:"explanation",targetId:V.id,targetTitle:V.title,teacherId:V.teacherName||"",teacherName:V.teacherName||"",rating:U,comment:$,studentId:t.uid,studentName:t.displayName,createdAt:As()}),T(!0)}catch(ue){console.error("Error saving review:",ue),alert("    ")}finally{se(!1)}}},Ne=ue=>ue?(ue.toDate?ue.toDate():new Date(ue.seconds*1e3)).toLocaleDateString("ar-EG"):"",I=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:k,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(Ot,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(Zu,{className:"w-4 h-4"})," "]})})]}),Z=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>l("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>l("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:k7.map(ue=>i.jsxs("button",{onClick:()=>ge(ue.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${ue.bg} ${ue.color} group-hover:scale-110 transition-transform`,children:i.jsx(ue.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:ue.title})]},ue.id))})})]}),P=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>l("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>l("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(ue=>i.jsxs("button",{onClick:()=>ke(ue.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:ue})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",ue]})]},ue)),i.jsxs("button",{onClick:()=>ke("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(Qr,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),Q=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>l("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>l("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R7.map(ue=>i.jsx("button",{onClick:()=>G(ue),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${ue.color} group-hover:scale-110 transition-transform`,children:i.jsx(ue.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:ue.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:ue.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(zr,{className:"w-5 h-5 text-gray-400"})})]})},ue.id))})})]}),ye=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>l("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>l("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:x==null?void 0:x.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:C?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-400"})}):b.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:x==null?void 0:x.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(Yu,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:b.map(ue=>{const qe=L(),ze=ue.isPremium&&!qe,ft=ze?"border-amber-900/50":ue.isPremium?"border-amber-600":"border-gray-700";return i.jsxs("button",{onClick:()=>ce(ue),className:`bg-gray-900 p-5 rounded-2xl shadow-sm border ${ft} hover:shadow-md transition-all group text-right flex items-center justify-between relative overflow-hidden`,children:[ue.isPremium&&i.jsxs("div",{className:"absolute top-0 left-0 bg-amber-500/20 border-b border-r border-amber-500/30 text-amber-400 text-[9px] font-bold px-2 py-0.5 rounded-br-lg z-10 flex items-center gap-1",children:[i.jsx(Vn,{className:"w-3 h-3 fill-amber-400"}),"PREMIUM"]}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`p-3 rounded-xl transition-colors ${ze?"bg-gray-800":"bg-gray-700 group-hover:bg-emerald-900/20"}`,children:ze?i.jsx(ur,{className:"w-6 h-6 text-gray-500"}):i.jsx(Gn,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:`text-lg font-bold mb-1 transition-colors ${ze?"text-gray-500":"text-white group-hover:text-emerald-400"}`,children:ue.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ju,{className:"w-3 h-3"}),Ne(ue.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yn,{className:"w-3 h-3"}),ue.teacherName]})]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${ze?"":"group-hover:-translate-x-1"}`,children:ze?i.jsx(ur,{className:"w-5 h-5 text-gray-600"}):i.jsx(zr,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})})]},ue.id)})})})]}),Ee=()=>V?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>l("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>l("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:x==null?void 0:x.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:V.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8 relative",children:[V.isPremium&&i.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-1 bg-amber-500/10 border border-amber-500/30 px-3 py-1 rounded-full",children:[i.jsx(Vn,{className:"w-4 h-4 text-amber-400 fill-amber-400"}),i.jsx("span",{className:"text-amber-400 text-xs font-bold",children:"  (Premium)"})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:f==="English Major - QOU"?"":` ${f}`}),i.jsx(zr,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:x==null?void 0:x.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:V.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:V.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yn,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:V.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ju,{className:"w-4 h-4"}),i.jsx("span",{children:Ne(V.createdAt)})]})]})]}),t&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:j?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(wa,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(pm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ue=>i.jsx("button",{onClick:()=>ae(ue),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${U===ue?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ue},ue))}),i.jsx("textarea",{value:$,onChange:ue=>de(ue.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:me,disabled:W||U===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${U===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[W?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):i.jsx(ya,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[s==="INTRO"&&I(),s==="SUBJECTS"&&Z(),s==="GRADES"&&P(),s==="CATEGORIES"&&Q(),s==="TOPICS"&&ye(),s==="DETAILS"&&Ee(),A&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>R(!1)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 text-center border border-amber-500/30 shadow-2xl shadow-amber-900/20 animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 bg-amber-500/20",children:i.jsx(Vn,{className:"w-10 h-10 text-amber-500 fill-amber-500"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:"        (Premium).    ."}),i.jsxs("button",{onClick:()=>{R(!1),e("SERVICES")},className:"w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 border border-amber-500 flex items-center justify-center gap-2",children:[i.jsx(Vn,{className:"w-5 h-5 fill-white"})," "]})]})]})]})},O_=[{id:"grammar",title:" (Grammar)",icon:Qo},{id:"reading",title:" (Reading)",icon:Pn},{id:"vocabulary",title:" (Vocabulary)",icon:yd},{id:"writing",title:" (Writing)",icon:xm}],O7=[{id:"English",title:"  (English)",icon:yd}],M7=({onBack:r,onNavigate:e})=>{const{user:t}=Xs(),[s,l]=O.useState(""),[c,d]=O.useState(""),[f,g]=O.useState(""),[x,w]=O.useState(""),[b,N]=O.useState(""),[C,Y]=O.useState(!1),[V,F]=O.useState(!1),[U,ae]=O.useState(!1),[$,de]=O.useState(""),[W,se]=O.useState([]),[j,T]=O.useState(!1),[A,R]=O.useState(!1),[D,L]=O.useState(null),[k,ge]=O.useState(!1),ke=async()=>{if(!s||!c||!f||!x||!b){alert("    ");return}F(!0);try{await pr(bt(Be,"explanations"),{subject:s,grade:c,category:f,title:x,content:b,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,isPremium:C,createdAt:As()}),ae(!0),setTimeout(()=>{ae(!1),w(""),N(""),Y(!1)},2e3)}catch(I){console.error("Error saving explanation:",I),alert("   ")}finally{F(!1)}},G=async()=>{if($.trim()&&t!=null&&t.uid){T(!0),R(!0),se([]);try{const I=xn(bt(Be,"explanations"),Mt("title",">=",$),Mt("title","<=",$+"")),Z=await In(I),P=[];Z.forEach(Q=>{const ye=Q.data();ye.teacherId===t.uid&&P.push({id:Q.id,...ye})}),se(P)}catch(I){console.error("Error searching explanations:",I)}finally{T(!1)}}},ce=async()=>{if(D){ge(!0);try{await $m(An(Be,"explanations",D)),se(I=>I.filter(Z=>Z.id!==D)),L(null)}catch(I){console.error(I),alert("   ")}finally{ge(!1)}}},te=()=>{r?r():e("HOME")},me=I=>I?(I.toDate?I.toDate():new Date(I.seconds*1e3)).toLocaleDateString("ar-EG"):"",Ne=I=>{const Z=O_.find(P=>P.id===I);return Z?Z.title:I};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:te,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:te,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(El,{className:"w-6 h-6 text-purple-500"}),"  "]}),U?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(Yt,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>ae(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:O7.map(I=>i.jsxs("button",{onClick:()=>l(I.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===I.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx(I.icon,{className:"w-6 h-6"}),i.jsx("span",{children:I.title})]},I.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(I=>i.jsxs("button",{onClick:()=>d(I.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===I.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",I]},I)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:O_.map(I=>i.jsxs("button",{onClick:()=>g(I.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===I.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===I.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx(I.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:I.title})]},I.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:I=>w(I.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:b,onChange:I=>N(I.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-xl bg-amber-900/10 border border-amber-500/20 cursor-pointer hover:bg-amber-900/20 transition-colors",children:[i.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${C?"bg-amber-500":"bg-gray-600"}`,children:i.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-md ${C?"right-1":"right-7"}`})}),i.jsx("input",{type:"checkbox",className:"hidden",checked:C,onChange:I=>Y(I.target.checked)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),i.jsx("span",{className:"font-bold text-white",children:"  (Premium)"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"       ."})]})]})})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:ke,disabled:V,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[V?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(_a,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:$,onChange:I=>de(I.target.value),onKeyDown:I=>I.key==="Enter"&&G(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:G,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:j?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):i.jsx(us,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),W.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:W.map(I=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(Gn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h4",{className:"font-bold text-white truncate",children:I.title}),I.isPremium&&i.jsx("span",{className:"text-[9px] bg-amber-900/40 text-amber-300 px-1.5 py-0.5 rounded border border-amber-800/50",children:"VIP"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:I.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Ne(I.category)}),i.jsx("span",{children:I.grade==="English Major - QOU"?"":` ${I.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ju,{className:"w-3 h-3"})," ",me(I.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>I.id&&L(I.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(_a,{className:"w-4 h-4"})})]},I.id))}):A&&!j&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(El,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),D&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(bx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ce,disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:k?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>L(null),disabled:k,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},V7=[{id:"handouts",title:" ",icon:Gn,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Uo,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Pn,color:"text-purple-400",bg:"bg-purple-900/20"}],P7=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],L7=({onBack:r,onNavigate:e})=>{const{user:t}=Xs(),[s,l]=O.useState(""),[c,d]=O.useState(""),[f,g]=O.useState(""),[x,w]=O.useState(""),[b,N]=O.useState(""),[C,Y]=O.useState(!1),[V,F]=O.useState(!1),[U,ae]=O.useState(""),[$,de]=O.useState([]),[W,se]=O.useState(!1),[j,T]=O.useState(!1),[A,R]=O.useState(null),[D,L]=O.useState(!1),k=async()=>{if(!s||!c||!f||!x||!b){alert("    ");return}if(!b.startsWith("http")){alert("        http  https");return}Y(!0);try{await pr(bt(Be,"study_materials"),{grade:s,subject:c,category:f,title:x,url:b,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:As()}),F(!0),setTimeout(()=>{F(!1),w(""),N("")},2e3)}catch(te){console.error("Error saving file:",te),alert("   ")}finally{Y(!1)}},ge=async()=>{if(U.trim()&&t!=null&&t.uid){se(!0),T(!0),de([]);try{const te=xn(bt(Be,"study_materials"),Mt("title",">=",U),Mt("title","<=",U+"")),me=await In(te),Ne=[];me.forEach(I=>{const Z=I.data();Z.teacherId===t.uid&&Ne.push({id:I.id,...Z})}),de(Ne)}catch(te){console.error("Error searching files:",te)}finally{se(!1)}}},ke=async()=>{if(A){L(!0);try{await $m(An(Be,"study_materials",A)),de(te=>te.filter(me=>me.id!==A)),R(null)}catch(te){console.error(te),alert("   ")}finally{L(!1)}}},G=()=>{r?r():e("PROFILE")},ce=te=>te?(te.toDate?te.toDate():new Date(te.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:G,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:G,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(G_,{className:"w-6 h-6 text-blue-500"}),"  "]}),V?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(Yt,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>F(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Qr,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:te=>l(te.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(te=>i.jsxs("option",{value:te.toString(),children:[" ",te]},te)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Pn,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:te=>d(te.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),P7.map(te=>i.jsx("option",{value:te.id,children:te.title},te.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:V7.map(te=>i.jsxs("button",{onClick:()=>g(te.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===te.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${te.bg}`,children:i.jsx(te.icon,{className:`w-6 h-6 ${te.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:te.title})]},te.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:te=>w(te.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(XS,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:b,onChange:te=>N(te.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:k,disabled:C,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(vi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(_a,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:U,onChange:te=>ae(te.target.value),onKeyDown:te=>te.key==="Enter"&&ge(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:ge,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:W?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):i.jsx(us,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),$.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:$.map(te=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(Gn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:te.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:te.subject}),i.jsx("span",{children:te.grade==="English Major - QOU"?"":` ${te.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ju,{className:"w-3 h-3"})," ",ce(te.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>te.id&&R(te.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(_a,{className:"w-4 h-4"})})]},te.id))}):j&&!W&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Gn,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(bx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ke,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>R(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},_p=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const b={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",C=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${b.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${b.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${b.bgIcon} border ${b.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${b.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${b.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${b.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${C} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${b.border} ${b.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${b.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(Ot,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${b.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${b.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},z7=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(_p,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:mx,secondaryIcon:Yt,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(_p,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:Yu,secondaryIcon:H_,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(_p,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Uo,secondaryIcon:yS,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),U7=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),B7=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(Z_,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(Ot,{className:"w-6 h-6"})]})})]})]}),q7=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),zy=()=>{const r=O.useRef(null);return O.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const w=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",w);const b=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(b)};return b(),()=>{window.removeEventListener("resize",w),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},F7=({onBack:r})=>{const e=[{icon:mx,title:" ",desc:"              ."},{icon:VA,title:" 24/7",desc:"                 ."},{icon:gc,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Gn,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(zy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(Tl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(ym,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(Yt,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(Yt,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(Yt,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},H7=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(zy,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(Tl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(Ot,{className:"w-5 h-5"})]})]})]}),G7=({onBack:r,onNavigate:e})=>{const{user:t}=Xs(),[s,l]=O.useState("INBOX"),[c,d]=O.useState([]),[f,g]=O.useState(""),[x,w]=O.useState(""),[b,N]=O.useState(""),[C,Y]=O.useState(!1),[V,F]=O.useState(!1),[U,ae]=O.useState(""),[$,de]=O.useState([]),[W,se]=O.useState(!1);O.useEffect(()=>{s==="COMPOSE"?j():T()},[s,t]);const j=async()=>{F(!0);try{const ge=xn(bt(Be,"users"),Mt("role","==","student")),G=(await In(ge)).docs.map(ce=>({id:ce.id,...ce.data()}));d(G)}catch(ge){console.error("Error fetching students",ge)}finally{F(!1)}},T=async(ge=!1)=>{if(!t)return;const ke=`etqan_inbox_${t.uid}`,G=365*24*60*60*1e3,ce=Date.now();if(!ge){const te=localStorage.getItem(ke);if(te)try{const{data:me,timestamp:Ne}=JSON.parse(te);if(ce-Ne<G){de(me);return}}catch(me){console.error(me)}}se(!0);try{const te=xn(bt(Be,"contact_messages"),Mt("teacherId","==",t.uid),Ec("createdAt","desc"),Di(50)),Ne=(await In(te)).docs.map(I=>({id:I.id,...I.data(),createdAt:I.data().createdAt?{seconds:I.data().createdAt.seconds}:null}));de(Ne),localStorage.setItem(ke,JSON.stringify({timestamp:ce,data:Ne}))}catch(te){console.error("Error fetching inbox",te)}finally{se(!1)}},A=async()=>{if(!x||!b){alert("    ");return}if(!f){alert("  ");return}Y(!0);try{await pr(bt(Be,"notifications"),{recipientId:f,title:x,message:b,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:As(),read:!1}),alert("   !"),w(""),N(""),g(""),ae("")}catch(ge){console.error("Error sending message",ge),alert("   ")}finally{Y(!1)}},R=async ge=>{if(window.confirm("      "))try{await $m(An(Be,"contact_messages",ge));const ke=$.filter(te=>te.id!==ge);de(ke);const G=`etqan_inbox_${t==null?void 0:t.uid}`,ce=localStorage.getItem(G);if(ce){const te=JSON.parse(ce);te.data=ke,localStorage.setItem(G,JSON.stringify(te))}}catch(ke){console.error(ke)}},D=async ge=>{try{await zd(An(Be,"contact_messages",ge),{read:!0});const ke=$.map(te=>te.id===ge?{...te,read:!0}:te);de(ke);const G=`etqan_inbox_${t==null?void 0:t.uid}`,ce=localStorage.getItem(G);if(ce){const te=JSON.parse(ce);te.data=ke,localStorage.setItem(G,JSON.stringify(te))}}catch(ke){console.error(ke)}},L=c.filter(ge=>{const ke=ge.displayName?ge.displayName.toLowerCase():"",G=ge.email?ge.email.toLowerCase():"",ce=U.toLowerCase();return ke.includes(ce)||G.includes(ce)}),k=ge=>ge?(ge.toDate?ge.toDate():new Date(ge.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(Br,{className:"w-5 h-5"})," ",$.some(ge=>!ge.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(ya,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ya,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(Xo,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(us,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:U,onChange:ge=>{ae(ge.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),U&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:L.map(ge=>i.jsxs("div",{onClick:()=>{g(ge.id),ae(ge.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===ge.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:ge.avatar?i.jsx("img",{src:ge.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(Yn,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:ge.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:ge.email})]}),f===ge.id&&i.jsx(Yt,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},ge.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:ge=>w(ge.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:b,onChange:ge=>N(ge.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[C?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(ya,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(Br,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:()=>T(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:i.jsx(bd,{className:"w-5 h-5 text-gray-400"})})]}),W?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(ut,{className:"w-8 h-8 animate-spin text-emerald-500"})}):$.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(Br,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:$.map(ge=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${ge.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${ge.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:ge.studentName?ge.studentName.charAt(0).toUpperCase():i.jsx(Yn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${ge.read?"text-gray-300":"text-white"}`,children:ge.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:ge.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(Wu,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:k(ge.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:ge.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!ge.read&&i.jsxs("button",{onClick:()=>D(ge.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(Yt,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>R(ge.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(_a,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(Br,{className:"w-4 h-4 text-gray-500"})})})]}),!ge.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},ge.id))})]})})]})})]})},$7=({onBack:r,onNavigate:e})=>{const[t,s]=O.useState([]),[l,c]=O.useState(!0),[d,f]=O.useState("ALL");O.useEffect(()=>{g()},[]);const g=async()=>{c(!0);const N="etqan_teacher_reviews_v1",C=365*24*60*60*1e3,Y=Date.now(),V=localStorage.getItem(N);if(V)try{const{data:F,timestamp:U}=JSON.parse(V);if(Y-U<C){s(F),c(!1);return}}catch(F){console.error("Cache parsing error",F)}try{const F=xn(bt(Be,"reviews"),Ec("createdAt","desc"),Di(50)),ae=(await In(F)).docs.map($=>({id:$.id,...$.data(),createdAt:$.data().createdAt?{seconds:$.data().createdAt.seconds}:null}));s(ae),localStorage.setItem(N,JSON.stringify({timestamp:Y,data:ae}))}catch(F){console.error("Error fetching reviews:",F)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),w=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",b=t.length>0?(t.reduce((N,C)=>N+C.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(Tl,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:b}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(ut,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(pm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:w(N.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((C,Y)=>i.jsx(Tl,{className:`w-3 h-3 ${Y<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},Y)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})},K7=({onNavigate:r})=>i.jsxs("section",{className:"py-24 relative overflow-hidden bg-gray-950 border-t border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-900/10 rounded-full blur-[100px]"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-[100px]"})]}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl mb-8 border border-white/10 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:i.jsx(Si,{className:"w-10 h-10 text-emerald-400"})}),i.jsx("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight tracking-tight",children:"   "}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed font-medium",children:"       .         ."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8",children:[i.jsxs("div",{className:"flex items-center -space-x-4 space-x-reverse",children:[i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-20",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 overflow-hidden bg-gray-800 shadow-lg relative z-10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:"Teacher",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"w-14 h-14 rounded-full border-4 border-gray-950 bg-gray-800 flex items-center justify-center text-xs font-bold text-gray-400 shadow-lg relative z-0",children:"+2"})]}),i.jsxs("button",{onClick:()=>r("CONTACT_TEACHER"),className:"group relative bg-white text-gray-900 px-8 py-4 rounded-2xl font-black text-lg hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.3)] flex items-center gap-3 transform hover:-translate-y-1",children:["  ",i.jsx(Ot,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform text-emerald-600"})]})]})]})]}),Np=()=>i.jsxs("div",{className:"relative w-full h-16 flex items-center justify-center my-8 overflow-hidden",children:[i.jsx("div",{className:"absolute w-full h-px bg-gray-800"}),i.jsx("div",{className:"absolute w-3/4 h-px bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,1)]"}),i.jsx("div",{className:"relative bg-gray-950 p-2 rounded-full border border-emerald-500/30 shadow-[0_0_15px_rgba(16,185,129,0.4)]",children:i.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"})})]}),Q7=()=>{const r=[{icon:aA,title:" ",desc:"     .",color:"text-blue-400",bg:"bg-blue-900/20"},{icon:mx,title:" ",desc:"     .",color:"text-purple-400",bg:"bg-purple-900/20"},{icon:gc,title:" ",desc:"    .",color:"text-yellow-400",bg:"bg-yellow-900/20"},{icon:vl,title:" ",desc:"      .",color:"text-emerald-400",bg:"bg-emerald-900/20"}];return i.jsxs("div",{className:"py-12 px-4 relative",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[i.jsx("div",{className:"absolute right-8 md:right-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-emerald-500/10 via-emerald-500 to-emerald-500/10 rounded-full"}),i.jsx("div",{className:"space-y-12",children:r.map((e,t)=>i.jsxs("div",{className:"relative flex items-center gap-6 group",children:[i.jsx("div",{className:`relative z-10 w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 border-4 border-gray-950 shadow-xl ${e.bg} transition-transform group-hover:scale-110 duration-300`,children:i.jsx(e.icon,{className:`w-8 h-8 ${e.color}`})}),i.jsxs("div",{className:"flex-1 bg-gray-900/60 backdrop-blur-sm p-5 rounded-2xl border border-white/5 shadow-lg group-hover:border-emerald-500/30 transition-all group-hover:-translate-x-2",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]})]},t))})]})]})},X7=()=>i.jsxs("div",{className:"py-12 px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-emerald-900/30 rounded-xl flex items-center justify-center mb-4 text-emerald-400 group-hover:scale-110 transition-transform",children:i.jsx(J_,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-l from-blue-500 to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-xl flex items-center justify-center mb-4 text-blue-400 group-hover:scale-110 transition-transform",children:i.jsx(yx,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"         ."})]}),i.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-colors"})]}),i.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 rounded-[2rem] border border-white/5 relative overflow-hidden group text-center md:text-right flex flex-col md:flex-row items-center gap-6",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-400 shrink-0 border border-yellow-500/20 shadow-lg shadow-yellow-900/20 animate-pulse",children:i.jsx(ym,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"          ."})]})]})]})]}),Y7=()=>{const[r,e]=O.useState(null),t=[{q:"   ",a:"        ."},{q:"    ",a:'   "  "       .'},{q:"    ",a:'!     "Mobile First"     .'},{q:"  ",a:"           100%."}];return i.jsxs("div",{className:"py-12 px-4 mb-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-3",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    "})]}),i.jsx("div",{className:"max-w-2xl mx-auto space-y-3",children:t.map((s,l)=>i.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden transition-all duration-300",children:[i.jsxs("button",{onClick:()=>e(r===l?null:l),className:"w-full p-5 flex items-center justify-between text-right bg-gray-900 hover:bg-gray-800/50 transition-colors",children:[i.jsxs("span",{className:"font-bold text-white text-sm md:text-base flex items-center gap-3",children:[i.jsx(dr,{className:"w-5 h-5 text-emerald-500"}),s.q]}),i.jsx(Ti,{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${r===l?"rotate-180 text-emerald-400":""}`})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${r===l?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:i.jsx("div",{className:"p-5 pt-0 text-gray-400 text-sm leading-relaxed border-t border-gray-800/50",children:s.a})})]},l))}),i.jsx("div",{className:"mt-12 flex justify-center",children:i.jsxs("div",{className:"bg-gray-800/50 px-6 py-3 rounded-full flex items-center gap-3 border border-white/5",children:[i.jsx(wS,{className:"w-5 h-5 text-yellow-500"}),i.jsx("span",{className:"text-gray-300 text-xs font-bold",children:"     "})]})})]})},J7=()=>i.jsxs("div",{className:"relative z-10 w-full bg-gray-950",children:[i.jsx(Np,{}),i.jsx(Q7,{}),i.jsx(Np,{}),i.jsx(X7,{}),i.jsx(Np,{}),i.jsx(Y7,{})]}),M_=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),V_=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),W7=({onNavigate:r})=>{const[e,t]=O.useState(!1),[s,l]=O.useState(!1),c=window.location.origin,d="   -   ",f=()=>{const N=`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${encodeURIComponent(d)}`;window.open(N,"_blank"),t(!1)},g=()=>{const N=`https://wa.me/?text=${encodeURIComponent(d+" "+c)}`;window.open(N,"_blank"),t(!1)},x=()=>{const N=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;window.open(N,"_blank"),t(!1)},w=()=>{navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)},b=async()=>{if(navigator.share)try{await navigator.share({title:" ",text:d,url:c}),t(!1)}catch(N){console.log("Error sharing",N)}else w()};return i.jsxs("footer",{className:"relative overflow-hidden bg-gradient-to-t from-emerald-950 via-gray-900 to-gray-950 pt-16 pb-10 border-t border-emerald-500/30",children:[i.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-64 bg-emerald-500/5 blur-[120px] pointer-events-none"}),i.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 flex flex-col items-center text-center",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-10 hover:scale-105 transition-transform duration-300 cursor-default",children:[i.jsxs("div",{className:"w-14 h-14 bg-gray-900 rounded-2xl flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.2)] border border-emerald-500/30 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/10 group-hover:bg-emerald-500/20 transition-colors"}),i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-8 h-8 rounded-full object-cover"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-3xl font-black text-white tracking-tight block",children:" "}),i.jsx("span",{className:"text-emerald-500 text-xs font-bold tracking-widest uppercase opacity-80",children:"Educational Platform"})]})]}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("HOME"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Zu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("QUIZZES"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Pn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Gn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("LESSONS_EXPLANATIONS"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(El,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>r&&r("CONTACT_TEACHER"),className:"px-5 py-2.5 rounded-xl bg-gray-900/50 hover:bg-emerald-900/30 border border-gray-700 hover:border-emerald-500/50 text-gray-300 hover:text-emerald-400 font-bold text-sm transition-all flex items-center gap-2",children:[i.jsx(Si,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex gap-6 mb-10",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#1877F2] group-hover:border-[#1877F2] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(Ko,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#25D366] group-hover:border-[#25D366] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(M_,{className:"w-6 h-6"})})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 border border-gray-700 flex items-center justify-center text-gray-400 group-hover:text-white group-hover:bg-[#0088cc] group-hover:border-[#0088cc] transition-all shadow-lg duration-300 transform group-hover:-translate-y-1",children:i.jsx(V_,{className:"w-6 h-6"})})})]}),i.jsx("div",{className:"relative mb-10 z-50",children:i.jsxs("button",{onClick:()=>t(!0),className:"group relative flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg hover:shadow-emerald-500/30 hover:-translate-y-1 transition-all active:scale-95",children:[i.jsx(Pf,{className:"w-5 h-5"}),"   "]})}),i.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-emerald-900/50 to-transparent mb-8"}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-400",children:["  ",i.jsx("span",{className:"text-emerald-400",children:"   "})]}),i.jsxs("p",{className:"text-[10px] text-gray-600 font-mono dir-ltr",children:[" ",new Date().getFullYear()," Etqan Platform. All rights reserved."]})]})]}),e&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>t(!1),children:i.jsxs("div",{className:"w-full max-w-sm bg-gray-900 border border-gray-700 rounded-[2rem] shadow-2xl p-6 flex flex-col gap-5 animate-fade-in-up relative",onClick:N=>N.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800 pb-4",children:[i.jsxs("span",{className:"text-white font-black text-lg flex items-center gap-2",children:[i.jsx(Pf,{className:"w-5 h-5 text-emerald-500"})," "]}),i.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-full hover:bg-gray-800 text-gray-500 hover:text-white transition-colors",children:i.jsx(Hn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#25D366]/10 flex items-center justify-center group-hover:bg-[#25D366] transition-all shadow-lg group-hover:shadow-[#25D366]/30 group-hover:-translate-y-1 border border-[#25D366]/20",children:i.jsx(M_,{className:"w-7 h-7 text-[#25D366] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#0088cc]/10 flex items-center justify-center group-hover:bg-[#0088cc] transition-all shadow-lg group-hover:shadow-[#0088cc]/30 group-hover:-translate-y-1 border border-[#0088cc]/20",children:i.jsx(V_,{className:"w-7 h-7 text-[#0088cc] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-2 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1877F2]/10 flex items-center justify-center group-hover:bg-[#1877F2] transition-all shadow-lg group-hover:shadow-[#1877F2]/30 group-hover:-translate-y-1 border border-[#1877F2]/20",children:i.jsx(Ko,{className:"w-7 h-7 text-[#1877F2] group-hover:text-white"})}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:""})]}),i.jsxs("button",{onClick:b,className:"flex flex-col items-center gap-2 group",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-tr from-yellow-400/10 via-red-500/10 to-purple-500/10 flex items-center justify-center group-hover:from-yellow-400 group-hover:via-red-500 group-hover:to-purple-500 transition-all shadow-lg group-hover:shadow-purple-500/30 group-hover:-translate-y-1 border border-purple-500/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-900 group-hover:opacity-0 transition-opacity"}),i.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:navigator.share?i.jsx(K_,{className:"w-7 h-7 text-white group-hover:text-white"}):i.jsx(X_,{className:"w-7 h-7 text-white"})})]}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 group-hover:text-white transition-colors",children:navigator.share?"":""})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-2 flex items-center border border-gray-700/50 mt-2",children:[i.jsx("div",{className:"flex-1 px-3 text-xs text-gray-400 font-mono truncate dir-ltr opacity-70",children:c}),i.jsxs("button",{onClick:w,className:`px-4 py-2.5 rounded-lg font-bold text-xs flex items-center gap-2 transition-all shadow-md ${s?"bg-emerald-500 text-white":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[s?i.jsx(F_,{className:"w-3.5 h-3.5"}):i.jsx(gx,{className:"w-3.5 h-3.5"}),s?" ":" "]})]})]})})]})},Z7=({onBack:r})=>{const e=()=>{window.open(`https://wa.me/972568401548?text=${encodeURIComponent("        .")}`,"_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm backdrop-blur-md bg-opacity-90",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsxs("span",{className:"font-bold text-white flex items-center gap-2",children:[i.jsx(Vn,{className:"w-4 h-4 text-amber-400"})," Premium"]})]})}),i.jsxs("div",{className:"relative py-20 px-4 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-gradient-to-b from-amber-900/10 to-gray-950 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-500/10 border border-amber-500/30 text-amber-400 px-6 py-2 rounded-full text-sm font-bold mb-8 animate-fade-in-up shadow-[0_0_20px_rgba(245,158,11,0.2)]",children:[i.jsx(Z_,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 drop-shadow-2xl tracking-tight leading-tight",children:["  ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500",children:""})]}),i.jsx("p",{className:"text-gray-300 text-lg md:text-2xl max-w-2xl mx-auto leading-relaxed",children:"             ."})]})]}),i.jsx("div",{className:"max-w-xl mx-auto px-4 pb-24 relative z-10 w-full",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] p-1 border-2 border-amber-500/30 shadow-[0_0_50px_rgba(245,158,11,0.15)] relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-amber-900/20 to-transparent pointer-events-none"}),i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[2.8rem] p-8 md:p-12 relative h-full flex flex-col",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-amber-500/30 animate-pulse-slow",children:i.jsx(Vn,{className:"w-12 h-12 text-white fill-white"})}),i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:" Premium"}),i.jsx("p",{className:"text-amber-400/80 font-bold text-sm uppercase tracking-widest",children:"   "})]}),i.jsxs("div",{className:"space-y-5 mb-12 flex-1",children:[i.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full text-emerald-400",children:i.jsx(Yt,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h4",{className:"font-bold text-white text-lg",children:"  "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]})]}),i.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50",children:[i.jsx("div",{className:"bg-blue-500/20 p-2 rounded-full text-blue-400",children:i.jsx(El,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h4",{className:"font-bold text-white text-lg",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"     (VIP)"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50",children:[i.jsx("div",{className:"bg-purple-500/20 p-2 rounded-full text-purple-400",children:i.jsx(gc,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h4",{className:"font-bold text-white text-lg",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm",children:"     "})]})]})]}),i.jsxs("button",{onClick:e,className:"w-full py-5 rounded-2xl font-black text-xl text-white shadow-xl flex items-center justify-center gap-3 transition-all transform hover:-translate-y-1 active:scale-95 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 shadow-amber-900/30",children:[i.jsx(Si,{className:"w-6 h-6"}),"   "]}),i.jsx("p",{className:"text-center text-gray-500 text-xs mt-4 font-medium",children:"      "})]})]})}),i.jsx("div",{className:"text-center pb-20 animate-fade-in",children:i.jsxs("p",{className:"text-gray-500 text-sm font-bold flex items-center justify-center gap-2 bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5",children:[i.jsx(Qr,{className:"w-5 h-5 text-gray-400"}),"      "]})})]})},yf="etqan_sub_management_cache_v3",eO=365*24*60*60*1e3,tO=({expiryDate:r})=>{const[e,t]=O.useState(""),[s,l]=O.useState(!1);return O.useEffect(()=>{const c=()=>{let g=0;if(!r)return 0;r.seconds?g=r.seconds*1e3:r instanceof Date?g=r.getTime():g=new Date(r).getTime();const x=Date.now(),w=g-x;return w<=0?(l(!0),0):w},d=()=>{const g=c();if(g<=0){t("");return}const x=Math.floor(g/(1e3*60*60*24)),w=Math.floor(g%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(g%(1e3*60*60)/(1e3*60)),N=Math.floor(g%(1e3*60)/1e3);x>0?t(`${x}   ${w} `):w>0?t(`${w}:${b.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`):t(`${b}:${N.toString().padStart(2,"0")}`)};d();const f=setInterval(d,1e3);return()=>clearInterval(f)},[r]),i.jsx("span",{className:`font-mono font-bold text-[10px] ${s?"text-red-400":"text-emerald-400"}`,children:e})},nO=({onBack:r})=>{const{user:e}=Xs(),[t,s]=O.useState([]),[l,c]=O.useState(""),[d,f]=O.useState(!1),[g,x]=O.useState(null),w=U=>{let ae=U.isSubscriber||!1,$=U.subscriptionExpiry,de=null;return $&&($.seconds?de=new Date($.seconds*1e3):typeof $=="string"&&(de=new Date($))),de&&de.getTime()<Date.now()&&(ae=!1),{...U,isSubscriber:ae,subscriptionExpiry:$}};O.useEffect(()=>{const U=localStorage.getItem(yf);if(U)try{const{data:$,timestamp:de}=JSON.parse(U);if(Date.now()-de<eO){const W=$.map(se=>w(se));s(W)}}catch($){console.error("Cache parse error",$)}(async()=>{try{const $=xn(bt(Be,"users"),Mt("isSubscriber","==",!0)),de=await In($),W=[];de.forEach(se=>{W.push({id:se.id,...se.data()})}),s(se=>{const j=new Set(se.map(R=>R.id)),A=W.filter(R=>!j.has(R.id)).map(R=>w(R));if(A.length>0){const R=[...A,...se];return localStorage.setItem(yf,JSON.stringify({data:R,timestamp:Date.now()})),R}return se})}catch($){console.error("Error fetching active subscribers:",$)}})()},[]);const b=U=>{s(U),localStorage.setItem(yf,JSON.stringify({data:U,timestamp:Date.now()}))},N=async()=>{if(!l.trim())return;f(!0);const U=l.trim();let ae=[];try{const $=An(Be,"users",U);try{const de=await E5($);de.exists()&&ae.push({id:de.id,...de.data()})}catch{}if(ae.length===0){const de=[xn(bt(Be,"users"),Mt("email","==",U)),xn(bt(Be,"users"),Mt("email",">=",U),Mt("email","<=",U+""),Di(5)),xn(bt(Be,"users"),Mt("displayName",">=",U),Mt("displayName","<=",U+""),Di(5))];(await Promise.all(de.map(se=>In(se)))).forEach(se=>{se.forEach(j=>{const T=j.data();ae.find(A=>A.id===j.id)||ae.push({id:j.id,...T})})})}if(ae.length>0){const de=new Set(t.map(T=>T.id)),j=[...ae.filter(T=>!de.has(T.id)).map(T=>w(T)),...t];b(j)}else alert("          ")}catch($){console.error("Error searching user",$),alert("   ")}finally{f(!1)}},C=async(U,ae)=>{x(U);try{const $=An(Be,"users",U),de=!ae,W=30,se=de?new Date(Date.now()+W*24*60*60*1e3):null;await zd($,{isSubscriber:de,subscriptionExpiry:se});const j=t.map(T=>{if(T.id===U){const A=se?{seconds:Math.floor(se.getTime()/1e3)}:null;return{...T,isSubscriber:de,subscriptionExpiry:A}}return T});b(j)}catch($){console.error("Error updating subscription",$),alert("    ")}finally{x(null)}},Y=()=>{window.confirm("      ")&&(s([]),localStorage.removeItem(yf))},V=U=>{if(!U)return"-";let ae;return U.seconds?ae=new Date(U.seconds*1e3):ae=new Date(U),ae.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")},F=t.filter(U=>U.isSubscriber);return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(Ot,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-gray-700 p-6 md:p-8 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8 border-b border-gray-700 pb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2 mb-2",children:[i.jsx($_,{className:"w-8 h-8 text-amber-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"    ( : 30 )"})]}),i.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[i.jsxs("div",{className:"relative w-full md:w-80",children:[i.jsx("input",{type:"text",placeholder:"    ID...",value:l,onChange:U=>c(U.target.value),onKeyDown:U=>U.key==="Enter"&&N(),className:"w-full px-5 py-3 rounded-xl bg-gray-800 border border-gray-700 focus:border-amber-500 outline-none text-white font-bold transition-all text-sm pr-10"}),l&&i.jsx("button",{onClick:()=>c(""),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white",children:i.jsx(Hn,{className:"w-4 h-4"})})]}),i.jsx("button",{onClick:N,disabled:d,className:"bg-amber-600 hover:bg-amber-700 text-white px-4 rounded-xl flex items-center justify-center transition-colors shadow-lg disabled:opacity-50",children:d?i.jsx(ut,{className:"w-5 h-5 animate-spin"}):i.jsx(us,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"overflow-x-auto min-h-[150px]",children:t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500 bg-gray-800/20 rounded-3xl border border-dashed border-gray-800",children:[i.jsx(us,{className:"w-12 h-12 mb-4 opacity-20"}),i.jsx("p",{className:"font-bold text-sm",children:"   "})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("span",{className:"text-sm font-bold text-gray-400",children:["   (",t.length,")"]}),i.jsxs("button",{onClick:Y,className:"text-[10px] text-red-400 hover:text-red-300 flex items-center gap-1 bg-red-900/10 px-3 py-1.5 rounded-lg border border-red-900/30 transition-colors",children:[i.jsx(_a,{className:"w-3 h-3"}),"  "]})]}),i.jsxs("table",{className:"w-full text-right border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-700 text-gray-400 text-[10px] uppercase tracking-wider font-bold",children:[i.jsx("th",{className:"pb-3 pr-4",children:""}),i.jsx("th",{className:"pb-3",children:" (ID)"}),i.jsx("th",{className:"pb-3",children:" "}),i.jsx("th",{className:"pb-3",children:" "}),i.jsx("th",{className:"pb-3 pl-4 text-left",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-800",children:t.slice(0,10).map(U=>i.jsxs("tr",{className:"group hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"py-3 pr-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden border border-gray-600 shrink-0",children:U.avatar?i.jsx("img",{src:U.avatar,className:"w-full h-full object-cover",alt:"avatar"}):i.jsx(Xo,{className:"w-4 h-4 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-white text-xs",children:U.displayName}),i.jsx("div",{className:"text-[10px] text-gray-500",children:U.email})]})]})}),i.jsx("td",{className:"py-3 font-mono text-[10px] text-amber-200/70 select-all",children:U.id}),i.jsx("td",{className:"py-3",children:U.isSubscriber?i.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-900/30 text-green-400 px-2 py-0.5 rounded-full text-[10px] font-bold border border-green-500/20",children:[i.jsx(Yt,{className:"w-3 h-3"})," "]}):i.jsx("span",{className:"inline-flex items-center gap-1 bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-full text-[10px] font-bold border border-gray-600",children:" "})}),i.jsx("td",{className:"py-3 text-[10px] text-gray-400 dir-ltr font-mono font-bold",children:V(U.subscriptionExpiry)}),i.jsx("td",{className:"py-3 pl-4 text-left",children:i.jsx("button",{onClick:()=>C(U.id,U.isSubscriber),disabled:g===U.id,className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all flex items-center justify-center gap-1 ml-auto w-28 ${g===U.id?"bg-gray-700 cursor-not-allowed text-gray-400":U.isSubscriber?"bg-red-900/20 text-red-400 hover:bg-red-900/40 border border-red-900/30":"bg-amber-600 text-white hover:bg-amber-700 shadow-md hover:shadow-amber-900/20"}`,children:g===U.id?i.jsx(ut,{className:"w-3 h-3 animate-spin"}):U.isSubscriber?i.jsxs(i.Fragment,{children:[i.jsx(Xg,{className:"w-3 h-3"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(ZA,{className:"w-3 h-3"})," 30 "]})})})]},U.id))})]}),t.length>10&&i.jsx("div",{className:"text-center py-2 text-xs text-gray-500 italic",children:"  10       "})]})})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-xl border border-emerald-500/20 p-6 md:p-8 animate-fade-in-up",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-gray-800 pb-4",children:[i.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl border border-emerald-500/20",children:i.jsx(Yt,{className:"w-6 h-6 text-emerald-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsxs("p",{className:"text-xs text-gray-400",children:["       (",F.length,")"]})]})]}),F.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-500",children:[i.jsx(Xg,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),i.jsx("p",{children:"      "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(U=>i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 border border-emerald-500/10 hover:border-emerald-500/30 transition-all flex items-center justify-between group",children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden border border-gray-600 shrink-0",children:U.avatar?i.jsx("img",{src:U.avatar,className:"w-full h-full object-cover",alt:"avatar"}):i.jsx(Xo,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-xs truncate",children:U.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-400 font-mono mt-0.5",children:[i.jsx(Wu,{className:"w-2.5 h-2.5 text-emerald-500"}),": ",V(U.subscriptionExpiry)]}),i.jsxs("div",{className:"flex items-center gap-1 text-[9px] mt-0.5 bg-gray-900/50 w-fit px-1.5 py-0.5 rounded border border-gray-700",children:[i.jsx(tN,{className:"w-2.5 h-2.5 text-emerald-400"}),i.jsx(tO,{expiryDate:U.subscriptionExpiry})]})]})]}),i.jsx("button",{onClick:()=>C(U.id,!0),disabled:g===U.id,className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 p-2 rounded-lg transition-colors disabled:opacity-50",title:" ",children:g===U.id?i.jsx(ut,{className:"w-4 h-4 animate-spin"}):i.jsx(Xg,{className:"w-4 h-4"})})]},U.id))})]})]})]})},P_=()=>i.jsx("div",{className:"relative w-full h-20 flex items-center justify-center my-6 overflow-hidden pointer-events-none z-20",children:i.jsxs("div",{className:"transform -skew-x-[20deg] flex items-center justify-center w-full max-w-xl opacity-60",children:[i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-transparent via-emerald-500/50 to-emerald-500 rounded-l-full blur-[1px]"}),i.jsxs("div",{className:"relative mx-3 shrink-0",children:[i.jsx("div",{className:"w-3 h-3 bg-gray-950 rounded-full border border-emerald-500/80 shadow-[0_0_15px_rgba(16,185,129,0.6)] flex items-center justify-center relative z-10",children:i.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full animate-pulse"})}),i.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 blur-md rounded-full"})]}),i.jsx("div",{className:"h-[2px] w-full bg-gradient-to-l from-transparent via-emerald-500/50 to-emerald-500 rounded-r-full blur-[1px]"})]})});function sO(){const[r,e]=O.useState("HOME"),[t,s]=O.useState(!1),[l,c]=O.useState(!1),d=O.useRef({}),f=O.useRef(!1),{logout:g}=Xs();O.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const b=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",b),()=>window.removeEventListener("popstate",b)},[]),O.useEffect(()=>{if(f.current){const b=d.current[r]||0;setTimeout(()=>window.scrollTo(0,b),10)}else window.scrollTo(0,0)},[r]);const x=(b,N=!1)=>{if(b===r){b==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:b},"",""),e(b)},w=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},2500)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(zy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black/90 backdrop-blur-2xl transition-all duration-700 animate-fade-in",children:[i.jsxs("div",{className:"relative scale-150 transform transition-transform duration-700",children:[i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-emerald-500/20 rounded-full blur-[80px] animate-pulse"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-blue-500/10 rounded-full blur-[60px] animate-pulse delay-75"}),i.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_3s_linear_infinite] text-emerald-500/20",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"20 10"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-[spin_2s_linear_infinite_reverse] text-emerald-500/60",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"60 100",strokeLinecap:"round"})}),i.jsx("svg",{className:"w-full h-full absolute inset-0 animate-spin text-blue-500/50",viewBox:"0 0 100 100",children:i.jsx("circle",{cx:"50",cy:"50",r:"32",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"40 40",strokeLinecap:"round"})}),i.jsxs("div",{className:"bg-gray-900 p-4 rounded-full border border-white/10 shadow-2xl relative z-10 animate-bounce-subtle",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-md rounded-full"}),i.jsx(ed,{className:"w-8 h-8 text-emerald-400 relative z-20"})]})]})]}),i.jsxs("div",{className:"mt-12 text-center space-y-4 animate-slide-up-fade",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 tracking-tight drop-shadow-lg",children:" "}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-emerald-400 text-sm md:text-base font-bold bg-emerald-950/30 px-6 py-2.5 rounded-full border border-emerald-500/20 shadow-lg backdrop-blur-md",children:[i.jsx(ut,{className:"w-4 h-4 animate-spin"}),"    ..."]})]})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(a7,{onLoginClick:()=>s(!0),onNavigate:b=>x(b),onLogoutClick:w}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(o7,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:b=>x(b)}),i.jsx(u7,{onNavigate:b=>x(b)}),i.jsx(A7,{onLoginClick:()=>s(!0)}),i.jsx(P_,{}),i.jsx(I7,{}),i.jsx(P_,{}),i.jsx(H7,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsx(U7,{}),i.jsx(B7,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(q7,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(z7,{onNavigate:b=>x(b)}),i.jsx(J7,{}),i.jsx(K7,{onNavigate:b=>x(b)})]}),r==="ABOUT_PLATFORM"&&i.jsx(_7,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(F7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(w7,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(g7,{onNavigate:b=>x(b)}),r==="TEACHER_DASHBOARD"&&i.jsx(h7,{}),r==="QUESTION_BANK"&&i.jsx(C7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(M7,{onNavigate:b=>x(b),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(L7,{onNavigate:b=>x(b),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(y7,{onBack:()=>x("HOME",!0),onNavigate:b=>x(b)}),r==="LESSONS"&&i.jsx(N7,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(D7,{onBack:()=>x("HOME",!0),onNavigate:b=>x(b)}),r==="CONTACT_TEACHER"&&i.jsx(S7,{onBack:()=>x("HOME",!0)}),r==="SERVICES"&&i.jsx(Z7,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(G7,{onNavigate:b=>x(b)}),r==="TEACHER_REVIEWS"&&i.jsx($7,{onNavigate:b=>x(b)}),r==="SUBSCRIPTION_MANAGEMENT"&&i.jsx(nO,{onBack:()=>x("PROFILE",!0)})]}),i.jsx(d7,{isOpen:t,onClose:()=>s(!1)}),i.jsx(W7,{onNavigate:b=>x(b)})]})]})}const Y5=document.getElementById("root");if(!Y5)throw new Error("Could not find root element to mount to");const rO=PT.createRoot(Y5);rO.render(i.jsx(z_.StrictMode,{children:i.jsx(r7,{children:i.jsx(sO,{})})}));
